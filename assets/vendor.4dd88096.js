var XP=Object.defineProperty,ZP=Object.defineProperties;var QP=Object.getOwnPropertyDescriptors;var gf=Object.getOwnPropertySymbols;var V_=Object.prototype.hasOwnProperty,G_=Object.prototype.propertyIsEnumerable;var z_=(e,t,i)=>t in e?XP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,J=(e,t)=>{for(var i in t||(t={}))V_.call(t,i)&&z_(e,i,t[i]);if(gf)for(var i of gf(t))G_.call(t,i)&&z_(e,i,t[i]);return e},Te=(e,t)=>ZP(e,QP(t));var pv=(e,t)=>{var i={};for(var s in e)V_.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&gf)for(var s of gf(e))t.indexOf(s)<0&&G_.call(e,s)&&(i[s]=e[s]);return i};function b(e,t,i,s){var l,d=arguments.length,y=d<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(e,t,i,s);else for(var g=e.length-1;g>=0;g--)(l=e[g])&&(y=(d<3?l(y):d>3?l(t,i,y):l(t,i))||y);return d>3&&y&&Object.defineProperty(t,i,y),y}function eN(e){return e&&e.release&&typeof e.release=="function"}function tN(e){return e&&e.acquire&&typeof e.acquire=="function"}class hn{constructor(t,i,s,l=1,d=0){if(this.ctor=t,this.acquireFunction=i,this.releaseFunction=s,this.allocationSize=l,this._pool=new Array(d),this._initialSize=d,this.ctor)for(let y=0;y<d;y++)this._pool[y]=new this.ctor;this.allocationSize=Math.max(l,1)}destroy(){this.prune(0)}acquire(...t){let i;if(hn.test.disabled)i=new this.ctor;else{if(this._pool.length===0){const s=this.allocationSize;for(let l=0;l<s;l++)this._pool[l]=new this.ctor}i=this._pool.pop()}return this.acquireFunction?this.acquireFunction(i,...t):tN(i)&&i.acquire(...t),i}release(t){t&&!hn.test.disabled&&(this.releaseFunction?this.releaseFunction(t):eN(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const s=this._pool[i];this._dispose(s)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}hn.test={disabled:!1};function iN(e){e.length=0}class ur{constructor(t=50,i=50){this._pool=new hn(Array,void 0,iN,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return dv.acquire()}static release(t){return dv.release(t)}static prune(){dv.prune()}}const dv=new ur(100);var q_,U_;let jo;var B_,H_;(q_=globalThis.dojoConfig)!=null&&q_.has||(U_=globalThis.esriConfig)!=null&&U_.has?jo=J(J({},(B_=globalThis.dojoConfig)==null?void 0:B_.has),(H_=globalThis.esriConfig)==null?void 0:H_.has):jo={};function de(e){return typeof jo[e]=="function"?jo[e]=jo[e](globalThis):jo[e]}de.add=(e,t,i,s)=>((s||jo[e]===void 0)&&(jo[e]=t),i&&de(e)),de.cache=jo,de.add("esri-deprecation-warnings",!0),(()=>{var e;de.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window!="undefined"&&typeof location!="undefined"&&typeof document!="undefined"&&window.location===location&&window.document===document;if(de.add("host-browser",t),de.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),de.add("dom",t),de("host-browser")){const i=navigator,s=i.userAgent,l=i.appVersion,d=parseFloat(l);if(de.add("wp",parseFloat(s.split("Windows Phone")[1])||void 0),de.add("msapp",parseFloat(s.split("MSAppHost/")[1])||void 0),de.add("khtml",l.includes("Konqueror")?d:void 0),de.add("edge",parseFloat(s.split("Edge/")[1])||void 0),de.add("opr",parseFloat(s.split("OPR/")[1])||void 0),de.add("webkit",!de("wp")&&!de("edge")&&parseFloat(s.split("WebKit/")[1])||void 0),de.add("chrome",!de("edge")&&!de("opr")&&parseFloat(s.split("Chrome/")[1])||void 0),de.add("android",!de("wp")&&parseFloat(s.split("Android ")[1])||void 0),de.add("safari",!l.includes("Safari")||de("wp")||de("chrome")||de("android")||de("edge")||de("opr")?void 0:parseFloat(l.split("Version/")[1])),de.add("mac",l.includes("Macintosh")),!de("wp")&&s.match(/(iPhone|iPod|iPad)/)){const y=RegExp.$1.replace(/P/,"p"),g=s.match(/OS ([\d_]+)/)?RegExp.$1:"1",_=parseFloat(g.replace(/_/,".").replace(/_/g,""));de.add(y,_),de.add("ios",_)}de.add("trident",parseFloat(l.split("Trident/")[1])||void 0),de("webkit")||(!s.includes("Gecko")||de("wp")||de("khtml")||de("trident")||de("edge")||de.add("mozilla",d),de("mozilla")&&de.add("ff",parseFloat(s.split("Firefox/")[1]||s.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&de.add("esri-mobile",t),i&&de.add("esri-iPhone",i),de.add("esri-geolocation",!!navigator.geolocation)}de.add("esri-canvas-svg-support",!de("trident")),de.add("esri-wasm","WebAssembly"in globalThis),de.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),de.add("esri-atomics","Atomics"in globalThis),de.add("esri-workers","Worker"in globalThis),de.add("web-feat:cache","caches"in globalThis),de.add("esri-workers-arraybuffer-transfer",!de("safari")||Number(de("safari"))>=12),de.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),de.add("featurelayer-simplify-payload-size-factors",[1,1,4]),de.add("featurelayer-snapshot-enabled",!0),de.add("featurelayer-snapshot-point-min-threshold",8e4),de.add("featurelayer-snapshot-point-max-threshold",4e5),de.add("featurelayer-snapshot-point-coverage",.1),de.add("featurelayer-advanced-symbols",!1),de.add("featurelayer-pbf",!0),de.add("featurelayer-pbf-statistics",!1),de.add("feature-layers-workers",!0),de.add("feature-polyline-generalization-factor",1),de.add("mapview-transitions-duration",200),de.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),de.add("mapserver-pbf-enabled",!1),de("host-webworker")||de("host-browser")&&(de.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),de.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{de.add("esri-image-decode",!0,!0,!0)}).catch(()=>{de.add("esri-image-decode",!1,!0,!0)})}return!1}),de.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();const W_=new Set;function rN(e,t,i=!1){i&&W_.has(t)||(i&&W_.add(t),e.warn(`\u{1F6D1} DEPRECATED - ${t}`))}function bh(e,t,i={}){if(de("esri-deprecation-warnings")){const{moduleName:s}=i;Jm(e,`Function: ${(s?s+"::":"")+t+"()"}`,i)}}function sN(e,t,i={}){if(de("esri-deprecation-warnings")){const{moduleName:s}=i;Jm(e,`Property: ${(s?s+"::":"")+t}`,i)}}function Jm(e,t,i={}){if(de("esri-deprecation-warnings")){const{replacement:s,version:l,see:d,warnOnce:y}=i;let g=t;s&&(g+=`
	\u{1F6E0}\uFE0F Replacement: ${s}`),l&&(g+=`
	\u2699\uFE0F Version: ${l}`),d&&(g+=`
	\u{1F517} See ${d} for more details.`),rN(e,g,y)}}const nN=null;function X(e){return e!=null}function ce(e){return e==null}function Rle(e){return e===void 0}function za(e,t){return X(e)?t(e):nN}function Lle(e){return e}function oN(e,t){if(ce(e))throw new Error(t);return e}function a5(e,t){return X(e)?e:typeof t=="function"?t():t}function Dle(e,t){return X(e)?e:t}function Dn(e){return X(e)&&e.destroy(),null}function zle(e){return X(e)&&e.dispose(),null}function Ju(e){return X(e)&&e.remove(),null}function H2(e){return X(e)&&e.abort(),null}function Vle(e){return X(e)&&e.release(),null}function aN(e){return null}function Gle(e,t){const i=new Array;for(const s of e)i.push(Rp(s,null,t));return i}function qle(e,t){for(const i of e)za(i,t)}function Rp(e,t,i){return X(e)?i(e):t}function Ule(e){return e.filter(t=>X(t))}function cM(e,...t){let i=e;for(let s=0;s<t.length&&i;++s)i=i[t[s]];return i}function Ble(e){return e}class tn{constructor(t=1){this._seed=t}set seed(t){this._seed=t==null?Math.random()*tn._m:t}getInt(){return this._seed=(tn._a*this._seed+tn._c)%tn._m,this._seed}getFloat(){return this.getInt()/(tn._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const s=i-t;return t+this.getInt()/tn._m*s}}tn._m=2147483647,tn._a=48271,tn._c=0;function pM(e,t,i){if(ce(e)&&ce(t))return!0;if(ce(e)||ce(t)||e.length!==t.length)return!1;if(i){for(let s=0;s<e.length;s++)if(!i(e[s],t[s]))return!1}else for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}function Hle(e){return e&&typeof e.length=="number"}const lN=!!Array.prototype.fill;function Wle(e,t){if(lN)return new Array(e).fill(t);const i=new Array(e);for(let s=0;s<e;s++)i[s]=t;return i}function Jle(e,t){t===void 0&&(t=e,e=0);const i=new Array(t-e);for(let s=e;s<t;s++)i[s-e]=s;return i}class dM{constructor(){this.last=0}}const fM=new dM;function yM(e,t,i,s){s=s||fM;const l=Math.max(0,s.last-10);for(let y=l;y<i;++y)if(e[y]===t)return s.last=y,y;const d=Math.min(l,i);for(let y=0;y<d;++y)if(e[y]===t)return s.last=y,y;return-1}function mM(e,t,i,s){const l=i==null?e.length:i,d=yM(e,t,l,s);if(d!==-1)return e[d]=e[l-1],i==null&&e.pop(),t}const Cs=new Set;function uN(e,t,i=e.length,s=t.length,l,d){if(s===0||i===0)return i;Cs.clear();for(let g=0;g<s;++g)Cs.add(t[g]);l=l||fM;const y=Math.max(0,l.last-10);for(let g=y;g<i;++g)if(Cs.has(e[g])&&(d&&d.push(e[g]),Cs.delete(e[g]),e[g]=e[i-1],--i,--g,Cs.size===0||i===0))return Cs.clear(),i;for(let g=0;g<y;++g)if(Cs.has(e[g])&&(d&&d.push(e[g]),Cs.delete(e[g]),e[g]=e[i-1],--i,--g,Cs.size===0||i===0))return Cs.clear(),i;return Cs.clear(),i}new tn;function hN(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}function Kle(e,t){if(e.forEach)e.forEach(t);else for(let i=0;i<e.length;i++)t(e[i],i,e)}function cN(e,t,i){if(e.slice)return e.slice(t,i);t===void 0?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),i===void 0?i=e.length:(i<0&&(i+=e.length),i=Math.min(e.length,Math.max(0,i)));const s=Math.max(0,i-t),l=new e.constructor(s);for(let d=0;d<s;d++)l[d]=e[t+d];return l}function Yle(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}function pN(e){return e instanceof Int8Array||e&&e.constructor&&e.constructor.name==="Int8Array"}function dN(e){return e instanceof Uint8Array||e&&e.constructor&&e.constructor.name==="Uint8Array"}function fN(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&e.constructor.name==="Uint8ClampedArray"}function yN(e){return e instanceof Int16Array||e&&e.constructor&&e.constructor.name==="Int16Array"}function mN(e){return e instanceof Uint16Array||e&&e.constructor&&e.constructor.name==="Uint16Array"}function gN(e){return e instanceof Int32Array||e&&e.constructor&&e.constructor.name==="Int32Array"}function vN(e){return e instanceof Uint32Array||e&&e.constructor&&e.constructor.name==="Uint32Array"}function bN(e){return e instanceof Float32Array||e&&e.constructor&&e.constructor.name==="Float32Array"}function wN(e){return e instanceof Float64Array||e&&e.constructor&&e.constructor.name==="Float64Array"}function gM(e,t){let i;if(t)for(i in e)e.hasOwnProperty(i)&&(e[i]===void 0?delete e[i]:e[i]instanceof Object&&gM(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function le(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=_M(e);if(X(t))return t;if(vM(e))return e.clone();if(bM(e))return e.map(le);if(wM(e))return e.clone();const i={};for(const s of Object.getOwnPropertyNames(e))i[s]=le(e[s]);return i}function W2(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=_M(e);if(X(t))return t;if(bM(e)){let i=!0;const s=e.map(l=>{const d=W2(l);return l!=null&&d==null&&(i=!1),d});return i?s:null}if(vM(e))return e.clone();if(!wM(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const s of Object.getOwnPropertyNames(e)){const l=e[s],d=W2(l);if(l!=null&&d==null)return null;i[s]=d}return i}return null}function vM(e){return typeof e.clone=="function"}function bM(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function wM(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function _M(e){if(pN(e)||dN(e)||fN(e)||yN(e)||mN(e)||gN(e)||vN(e)||bN(e)||wN(e))return cN(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach((i,s)=>{t.set(s,le(i))}),t}if(e instanceof Set){const t=new Set;return e.forEach(i=>{t.add(le(i))}),t}return null}function Km(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function xM(e,t,i=!1){return MM(e,t,i)}function Gc(e,t){if(t!=null)return t[e]||SM(e.split("."),!1,t)}function es(e,t,i){const s=e.split("."),l=s.pop(),d=SM(s,!0,i);d&&l&&(d[l]=t)}function SM(e,t,i){let s=i;for(const l of e){if(s==null)return;if(!(l in s)){if(!t)return;s[l]={}}s=s[l]}return s}function MM(e,t,i){return t?Object.keys(t).reduce(function(s,l){let d=s[l],y=t[l];return d===y?s:d===void 0?(s[l]=le(y),s):(Array.isArray(y)||Array.isArray(s)?(d=d?Array.isArray(d)?s[l]=d.concat():s[l]=[d]:s[l]=[],y&&(Array.isArray(y)||(y=[y]),i?y.forEach(g=>{d.indexOf(g)===-1&&d.push(g)}):s[l]=y.concat())):y&&typeof y=="object"?s[l]=MM(d,y,i):s.hasOwnProperty(l)&&!t.hasOwnProperty(l)||(s[l]=y),s)},e||{}):e}var J_;const Ct={apiKey:void 0,applicationUrl:(J_=globalThis.location)==null?void 0:J_.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(xM(Ct,globalThis.esriConfig,!0),delete Ct.has),!Ct.assetsPath){const e="4.23.7";Ct.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}Ct.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(Ct,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),Ct.request.corsEnabledServers=[],Ct.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};const _N=/\{([^\}]+)\}/g;function K_(e){return e==null?"":e}function Un(e,t){return e.replace(_N,typeof t=="object"?(i,s)=>K_(Gc(s,t)):(i,s)=>K_(t(s)))}function $M(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>t&&t.indexOf(i)!==-1?i:`\\${i}`)}function l5(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function Xle(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}const Y_={info:0,warn:1,error:2,none:3};class Se{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Se._loggers[this.module]=this;const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Se.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){const i=Se._loggers;return Se._loggers=t,i},set throttlingDisabled(t){Se._throttlingDisabled=t}}}static getLogger(t){let i=Se._loggers[t];return i||(i=new Se({module:t})),i}_log(t,i,...s){if(!!this._matchLevel(t)){if(i!=="always"&&!Se._throttlingDisabled){const l=this._argsToKey(s),d=this._loggedMessages[t].get(l);if(i==="once"&&d!=null||i==="oncePerTick"&&d&&d>=Se._tickCounter)return;this._loggedMessages[t].set(l,Se._tickCounter),Se._scheduleTickCounterIncrement()}for(const l of Ct.log.interceptors)if(l(t,this.module,...s))return;this._inheritedWriter()(t,this.module,...s)}}_parentWithMember(t,i){let s=this;for(;X(s);){const l=s[t];if(X(l))return l;s=s.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,i,...s){console[t](`[${i}]`,...s)}_matchLevel(t){const i=Ct.log.level?Ct.log.level:"warn";return Y_[this._parentWithMember("level",i)]<=Y_[t]}_argsToKey(...t){const i=(s,l)=>typeof l!="object"||Array.isArray(l)?l:"[Object]";return l5(JSON.stringify(t,i))}static _scheduleTickCounterIncrement(){Se._tickCounterScheduled||(Se._tickCounterScheduled=!0,Promise.resolve().then(()=>{Se._tickCounter++,Se._tickCounterScheduled=!1}))}}Se._loggers={},Se._tickCounter=0,Se._tickCounterScheduled=!1,Se._throttlingDisabled=!1;function Ym(e){return qc(()=>e.forEach(t=>X(t)&&t.remove()))}function qc(e){return{remove:()=>{e&&(e(),e=void 0)}}}function dr(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function xN(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function v1(e,t,i){return i?Cy(e,t,{policy:i,path:""}):Cy(e,t,null)}function Cy(e,t,i){return t?Object.keys(t).reduce(function(s,l){let d=null,y="merge";if(i&&(d=i.path?`${i.path}.${l}`:l,y=i.policy(d)),y==="replace")return s[l]=t[l],s;if(s[l]===void 0)return s[l]=le(t[l]),s;let g=s[l],_=t[l];if(g===_)return s;if(Array.isArray(_)||Array.isArray(s))g=g?Array.isArray(g)?s[l]=g.concat():s[l]=[g]:s[l]=[],_&&(Array.isArray(_)||(_=[_]),_.forEach(M=>{g.indexOf(M)===-1&&g.push(M)}));else if(_&&typeof _=="object")if(i){const M=i.path;i.path=d,s[l]=Cy(g,_,i),i.path=M}else s[l]=Cy(g,_,null);else s.hasOwnProperty(l)&&!t.hasOwnProperty(l)||(s[l]=_);return s},e||{}):e}function IM(e){return Array.isArray(e)?e:e.split(".")}function X_(e){return e.indexOf(",")>-1?e.split(",").map(t=>t.trim()):[e.trim()]}function SN(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...X_(i));return t}return X_(e)}function TM(e,t,i,s){const l=SN(t);if(l.length!==1){const d=l.map(y=>s(e,y,i));return Ym(d)}return s(e,l[0],i)}function EM(e){let t=!1;return()=>{t||(t=!0,e())}}function kM(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const l=parseInt(i,10);if(!isNaN(l))return Array.isArray(t)?t[l]:t.getItemAt(l)}const s=dr(t);return xN(s,i)?s.get(i):t[i]}function AM(e,t,i){if(e==null)return e;const s=kM(t[i],e);return!s&&i<t.length-1?void 0:i===t.length-1?s:AM(s,t,i+1)}function Pd(e,t,i=0){return typeof t=="string"&&t.indexOf(".")===-1?kM(t,e):AM(e,IM(t),i)}function Py(e,t){return Pd(e,t)}function Z_(e,t){return Pd(t,e)!==void 0}var zn;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(zn||(zn={}));class Q_{constructor(t){this.autoDestroy=!1,this.properties=t}}function Nd(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){const s=Object.create(t.properties),l=t.autoDestroy;for(const d in s)s[d]=le(s[d]);t=new Q_(s),t.autoDestroy=l,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new Q_({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function MN(e){return Nd(e).properties}function Xm(e,t){const i=MN(e);let s=i[t];return s||(s=i[t]={}),s}function $N(e,t){return v1(e,t,TN)}const IN=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function TN(e){return IN.test(e)?"replace":"merge"}var lt;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.USER=6]="USER"})(lt||(lt={}));const J2=lt.USER+1;function qa(e){switch(e){case"defaults":return lt.DEFAULTS;case"service":return lt.SERVICE;case"portal-item":return lt.PORTAL_ITEM;case"web-scene":return lt.WEB_SCENE;case"web-map":return lt.WEB_MAP;case"user":return lt.USER}}function Ny(e){switch(e){case lt.DEFAULTS:return"defaults";case lt.SERVICE:return"service";case lt.PORTAL_ITEM:return"portal-item";case lt.WEB_SCENE:return"web-scene";case lt.WEB_MAP:return"web-map";case lt.USER:return"user"}return void 0}function EN(e){return Ny(e)}var Ot;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Ot||(Ot={}));let jy,Lp=[];const kN=Se.getLogger("esri.core.Accessor");function tt(e){jy!==void 0&&jy.onObservableAccessed(e)}let b1=!1,w1=!1;function zo(e,t,i){if(b1)return u5(e,t,i);OM(e);const s=t.call(i);return CM(),s}function AN(e,t){return zo(void 0,e,t)}function u5(e,t,i){const s=b1;b1=!0,OM(e);let l=null;try{l=t.call(i)}catch(d){w1&&kN.error(d)}return CM(),b1=s,l}function OM(e){jy=e,Lp.push(e)}function CM(){const e=Lp.pop();jy=Lp.length>0?Lp[Lp.length-1]:void 0,e!==void 0&&e.onTrackingEnd()}function PM(e,t){if(t.flags&Ot.DepTrackingInitialized)return;const i=w1;w1=!1,t.flags&Ot.AutoTracked?u5(t,t.metadata.get,e):NM(e,t),w1=i}const ON=[];function NM(e,t){t.flags&Ot.ExplicitlyTracking||(t.flags|=Ot.ExplicitlyTracking,u5(t,()=>{const i=t.metadata.dependsOn||ON;for(const s of i)if(typeof s=="string"&&s.indexOf(".")===-1)e6(e,s,!1);else{const l=IM(s);for(let d=0,y=e;d<l.length&&y!=null&&typeof y=="object";++d)y=e6(y,l[d],d!==l.length-1)}}),t.flags&=~Ot.ExplicitlyTracking)}function e6(e,t,i){const s=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const y=parseInt(s,10);if(!isNaN(y))return Array.isArray(e)?e[y]:e.getItemAt(y)}const l=dr(e),d=l==null?void 0:l.properties.get(s);return d&&(tt(d),PM(e,d)),i?e[s]:void 0}class jM{constructor(t,i){this._observers=t,this._observer=i}remove(){hN(this._observers,this._observer)}}class t6{constructor(t,i,s){this.properties=t,this.propertyName=i,this.metadata=s,this._observers=null,this._accessed=null,this._handles=null,this.flags=Ot.Dirty|(s.nonNullable?Ot.NonNullable:0)|(s.hasOwnProperty("value")?Ot.HasDefaultValue:0)|(s.get===void 0?Ot.DepTrackingInitialized:0)|(s.dependsOn===void 0?Ot.AutoTracked:0)}destroy(){this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){tt(this);const t=this.properties.store,i=this.propertyName,s=this.flags,l=t.get(i);if(s&Ot.Computing||~s&Ot.Dirty&&t.has(i))return l;this.flags|=Ot.Computing;const d=this.properties.host;let y;s&Ot.AutoTracked?y=zo(this,this.metadata.get,d):(NM(d,this),y=this.metadata.get.call(d)),t.set(i,y,lt.COMPUTED);const g=t.get(i);return g===l?this.flags&=~Ot.Dirty:AN(this.commit,this),this.flags&=~Ot.Computing,g}onObservableAccessed(t){t!==this&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=Ot.DepTrackingInitialized;const t=this._accessed;if(t===null)return;let i=this._handles;i===null&&(i=this._handles=[]);for(let s=0;s<t.length;++s)i.push(t[s].observe(this));t.length=0}observe(t){return this._observers===null&&(this._observers=[]),this._observers.includes(t)||this._observers.push(t),new jM(this._observers,t)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&Ot.Overriden&&(this.flags|=Ot.Dirty);const t=this._observers;if(t!==null)for(let i=0;i<t.length;++i)t[i].onInvalidated()}commit(){this.flags&=~Ot.Dirty,this.onCommitted()}onCommitted(){if(this._observers===null)return;const t=this._observers.slice();for(let i=0;i<t.length;++i)t[i].onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}}class h5{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new h5;return this._values.forEach((s,l)=>{t&&t.has(l)||i.set(l,le(s))}),i}get(t){return this._values.get(t)}originOf(){return lt.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}function vf(e,t,i){return e!==void 0}function i6(e,t,i,s){return e!==void 0&&(!(i==null&&e.flags&Ot.NonNullable)||(s.lifecycle,zn.INITIALIZING,!1))}function CN(e){return e&&typeof e.destroy=="function"}Se.getLogger("esri.core.accessorSupport.Properties");class PN{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=zn.INITIALIZING,this.store=new h5,this._origin=lt.USER;const i=this.host.constructor.__accessorMetadata__,s=i.properties;for(const l in s){const d=new t6(this,l,s[l]);this.properties.set(l,d)}this.metadatas=s,this._autoDestroy=i.autoDestroy}initialize(){this.lifecycle=zn.CONSTRUCTING}constructed(){this.lifecycle=zn.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,i]of this.properties){const s=this.internalGet(t);s&&CN(s)&&(s.destroy(),~i.flags&Ot.NonNullable&&this._internalSet(i,null)),i.destroy()}else for(const[t,i]of this.properties)i.destroy()}get initialized(){return this.lifecycle!==zn.INITIALIZING}get(t){const i=this.properties.get(t);if(i.metadata.get)return i.getComputed();tt(i);const s=this.store;return s.has(t)?s.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const s=this.properties.get(t);if(s!==void 0&&s.flags&Ot.HasDefaultValue)return"defaults"}return Ny(i)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const i=this.properties.get(t);if(vf(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const s=this.properties.get(t);vf(s)&&this._internalSet(s,i)}getDependsInfo(t,i,s){const l=this.properties.get(i);if(!vf(l))return"";const d=new Set,y=zo({onObservableAccessed:_=>d.add(_),onTrackingEnd:()=>{}},()=>{var _;return(_=l.metadata.get)==null?void 0:_.call(t)});let g=`${s}${t.declaredClass.split(".").pop()}.${i}: ${y}
`;if(d.size===0)return g;s+="  ";for(const _ of d){if(!(_ instanceof t6))continue;const M=_.properties.host,E=_.propertyName,O=dr(M);g+=O?O.getDependsInfo(M,E,s):`${s}${E}: undefined
`}return g}setAtOrigin(t,i,s){const l=this.properties.get(t);if(vf(l))return this._setAtOrigin(l,i,s)}isOverridden(t){const i=this.properties.get(t);return i!==void 0&&!!(i.flags&Ot.Overriden)}clearOverride(t){const i=this.properties.get(t);i!==void 0&&i.flags&Ot.Overriden&&(i.flags&=~Ot.Overriden,i.notifyChange())}override(t,i){const s=this.properties.get(t);if(!i6(s,t,i,this))return;const l=s.metadata.cast;if(l){const d=this._cast(l,i),{valid:y,value:g}=d;if(fv.release(d),!y)return;i=g}s.flags|=Ot.Overriden,this._internalSet(s,i)}set(t,i){const s=this.properties.get(t);if(!i6(s,t,i,this))return;const l=s.metadata.cast;if(l){const y=this._cast(l,i),{valid:g,value:_}=y;if(fv.release(y),!g)return;i=_}const d=s.metadata.set;d?d.call(this.host,i):this._internalSet(s,i)}setDefaultOrigin(t){this._origin=qa(t)}getDefaultOrigin(){return Ny(this._origin)}notifyChange(t){const i=this.properties.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.properties.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.properties.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const s=this.lifecycle!==zn.INITIALIZING?this._origin:lt.DEFAULTS;this._setAtOrigin(t,i,s)}_setAtOrigin(t,i,s){const l=this.store,d=t.propertyName;l.has(d,s)&&Km(i,l.get(d))&&~t.flags&Ot.Overriden&&s===l.originOf(d)||(t.invalidate(),l.set(d,i,s),t.commit(),PM(this.host,t))}_cast(t,i){const s=fv.acquire();return s.valid=!0,s.value=i,t&&(s.value=t.call(this.host,i,s)),s}}class NN{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const fv=new hn(NN);function jN(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(i,s){if(s==="")return"$";const l=Gc(s,t),d=l==null?"":l;if(d===void 0)throw new Error(`could not find key "${s}" in template`);return d.toString()})}class Zm{constructor(t,i,s){this.name=t,this.details=s,this.message=void 0,this instanceof Zm&&(this.message=i&&jN(i,s)||"")}toString(){return"["+this.name+"]: "+this.message}}class re extends Zm{constructor(t,i,s){if(super(t,i,s),!(this instanceof re))return new re(t,i,s)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return le(i)}catch{return"[object]"}}))}}catch(t){throw Se.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new re(t.name,t.message,t.details)}}re.prototype.type="error";function Fy(e,t,i){if(e&&t)if(typeof t=="object")for(const s of Object.getOwnPropertyNames(t))Fy(e,s,t[s]);else{if(t.indexOf(".")!==-1){const l=t.split("."),d=l.splice(l.length-1,1)[0];return void Fy(Py(e,l),d,i)}const s=e.__accessor__;s!=null&&FN(t,s),e[t]=i}}function FN(e,t){if(de("esri-unknown-property-errors")&&!RN(e,t))throw new re("set:unknown-property",LN(e,t))}function RN(e,t){return t.metadatas[e]!=null}function LN(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}Se.getLogger("esri.core.accessorSupport.set");class DN extends hn{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=aN(this._set)}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}const bf=[];function Ry(e){bf.push(e),bf.length===1&&queueMicrotask(()=>{const t=bf.slice();bf.length=0;for(const i of t)i()})}const zN=29;class P0{constructor(t,i=zN){this.name=t,this._counter=0,this._items=new Array(i)}record(t){this._items[++this._counter%this._items.length]=t}get median(){return this._items.slice().sort((t,i)=>t-i)[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((t,i)=>t+i,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}var K2;(function(e){const t=(d,y,g,_)=>{let M=y,E=y;const O=g>>>1,P=d[M-1];for(;E<=O;){E=M<<1,E<g&&_(d[E-1],d[E])<0&&++E;const j=d[E-1];if(_(j,P)<=0)break;d[M-1]=j,M=E}d[M-1]=P},i=(d,y)=>d<y?-1:d>y?1:0;function s(d,y,g,_){y===void 0&&(y=0),g===void 0&&(g=d.length),_===void 0&&(_=i);for(let E=g>>>1;E>y;E--)t(d,E,g,_);const M=y+1;for(let E=g-1;E>y;E--){const O=d[y];d[y]=d[E],d[E]=O,t(d,M,E,_)}}function*l(d,y,g,_){y===void 0&&(y=0),g===void 0&&(g=d.length),_===void 0&&(_=i);for(let E=g>>>1;E>y;E--)t(d,E,g,_),yield;const M=y+1;for(let E=g-1;E>y;E--){const O=d[y];d[y]=d[E],d[E]=O,t(d,M,E,_),yield}}e.sort=s,e.iterableSort=l})(K2||(K2={}));const r6=K2,VN=1.5,GN=1.1;class Su{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new dM,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>s6(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let s=0;s<this._length;s++){const l=this.data[s];t(l)&&i.push(l)}return i}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let s=0;s<i;s++)this.data[this._length++]=t[s]}fill(t,i){for(let s=0;s<i;s++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,s6(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=yM(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){const i=mM(this.data,t,this.length,this._hint);return i!==void 0&&(this.length=this.length-1),this._shrink(),i}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,s){this.length=uN(this.data,t,this.length,i,this._hint,s),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){t>=this.length||i>=this.length||t===i||([this.data[t],this.data[i]]=[this.data[i],this.data[t]])}sort(t){r6.sort(this.data,0,this.length,t)}iterableSort(t){return r6.iterableSort(this.data,0,this.length,t)}some(t,i){for(let s=0;s<this.length;++s)if(t.call(i,this.data[s],s,this.data))return!0;return!1}filterInPlace(t,i){let s=0;for(let l=0;l<this._length;++l){const d=this.data[l];t.call(i,d,l,this.data)&&(this.data[l]=this.data[s],this.data[s]=d,s++)}if(this._deallocator)for(let l=s;l<this._length;l++)this.data[l]=this._deallocator(this.data[l]);return this._length=s,this._shrink(),this}forAll(t,i){const s=this.length,l=this.data;for(let d=0;d<s;++d)t.call(i,l[d],d,l)}forEach(t,i){for(let s=0;s<this.length;++s)t.call(i,this.data[s],s,this.data)}map(t,i){const s=new Array(this.length);for(let l=0;l<this.length;++l)s[l]=t.call(i,this.data[l],l,this.data);return s}reduce(t,i){let s=i;for(let l=0;l<this.length;++l)s=t(s,this.data[l],l,this.data);return s}has(t){const i=this.length,s=this.data;for(let l=0;l<i;++l)if(s[l]===t)return!0;return!1}}function s6(e){e.data.length>VN*e.length&&(e.data.length=Math.floor(e.length*GN))}function qN(e){return{setTimeout:(t,i)=>{const s=e.setTimeout(t,i);return{remove:()=>e.clearTimeout(s)}}}}const jd=qN(globalThis);function Qm(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function eg(e,t,i){if(!Qm(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,i);if(Array.isArray(t)){const s=t.slice();for(const l of s)e.addEventListener(l,i);return{remove(){for(const l of s)e.removeEventListener(l,i)}}}return e.addEventListener(t,i),{remove(){e.removeEventListener(t,i)}}}function FM(e,t,i){if(!Qm(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const s=eg(e,t,l=>{s.remove(),i.call(e,l)});return{remove(){s.remove()}}}const UN={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function ru({key:e}){return UN[e]||e}function RM(e){return Promise.all(e)}function c5(e){return new Promise((t,i)=>{try{e(t,i)}catch(s){Promise.resolve().then(()=>i(s))}})}function yi(e="Aborted"){return new re("AbortError",e)}function mi(e,t="Aborted"){if(Bn(e))throw yi(t)}function tg(e){return X(e)?"aborted"in e?e:e.signal:e}function Bn(e){const t=tg(e);return X(t)&&t.aborted}function Fd(e){if(ks(e))throw e}function Y2(e){if(!ks(e))throw e}function cn(e,t){const i=tg(e);if(!ce(i)){if(!i.aborted)return FM(i,"abort",()=>t());t()}}function ig(e,t){const i=tg(e);if(!ce(i))return mi(i),FM(i,"abort",()=>t(yi()))}function LM(e,t){const i=tg(t);return ce(i)?e:new Promise((s,l)=>{let d=cn(t,()=>l(yi()));const y=()=>d=Ju(d);e.then(y,y),e.then(s,l)})}function ks(e){return e&&e.name==="AbortError"}function X2(e){return e.catch(t=>{if(!ks(t))throw t})}function Vo(){let e=null;const t=new Promise((i,s)=>{e={promise:void 0,resolve:i,reject:s}});return e.promise=t,e}function Or(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e);return Or(i.map(s=>e[s])).then(s=>{const l={};return i.forEach((d,y)=>l[d]=s[y]),l})}const t=e;return c5(i=>{const s=[];let l=t.length;l===0&&i(s),t.forEach(d=>{const y={promise:d||Promise.resolve(d)};s.push(y),y.promise.then(g=>{y.value=g}).catch(g=>{y.error=g}).then(()=>{--l,l===0&&i(s)})})})}function BN(e){return Or(e).then(t=>t.filter(i=>!!i.value).map(i=>i.value))}function n6(e){return Promise.reject(e)}function ec(e){return Promise.resolve(e)}function p5(e,t,i){const s=new AbortController;return cn(i,()=>s.abort()),new Promise((l,d)=>{let y=setTimeout(()=>{y=0,l(t)},e);cn(s,()=>{y&&(clearTimeout(y),d(yi()))})})}function Bo(e){return e&&typeof e.then=="function"}function Z2(e){return Bo(e)?e:Promise.resolve(e)}function DM(e,t=-1){let i,s,l,d,y=null;const g=(..._)=>{if(i){s=_,d&&d.reject(yi()),d=Vo();const P=d.promise;if(y){const j=y;y=null,j.abort()}return P}if(l=d||Vo(),d=null,t>0){const P=new AbortController;i=Z2(e(..._,P.signal));const j=i;p5(t).then(()=>{i===j&&(d?P.abort():y=P)})}else i=1,i=Z2(e(..._));const M=()=>{const P=s;s=l=i=y=null,P!=null&&g(...P)},E=i,O=l;return E.then(M,M),E.then(O.resolve,O.reject),O.promise};return g}function HN(){let e,t;const i=new Promise((l,d)=>{e=l,t=d}),s=l=>{e(l)};return s.resolve=l=>e(l),s.reject=l=>t(l),s.timeout=(l,d)=>jd.setTimeout(()=>s.reject(d),l),s.promise=i,s}function zM(e,t){let i,s=new AbortController;const l=e(s.signal);let d={promise:l,finished:!1,abort:()=>{s&&(s.abort(),s=null)}};const y=()=>{d&&(d.finished=!0,d=null),X(i)&&(i.remove(),i=null),s=null};return l.then(y,y),i=cn(t,()=>{X(d)&&d.abort()}),d}function Zle(e){return Promise.resolve().then(()=>{mi(e)})}function Qle(e){return e}class WN{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}}class JN{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let Q2=0;const fp={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},eb=["prepare","preRender","render","postRender","update","finish"],tb=[],Ou=new Su;class KN{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const Ly={frameTasks:Ou,willDispatch:!1,clearFrameTasks:YN,dispatch:qM,executeFrameTasks:XN};function Rd(e){const t=new JN(e);return tb.push(t),Ly.willDispatch||(Ly.willDispatch=!0,Ry(qM)),t}function Mc(e){const t=new WN(e);return Ou.push(t),Dy==null&&(Q2=performance.now(),Dy=requestAnimationFrame(VM)),new KN(t)}let Dy=null;function YN(e=!1){Ou.forAll(t=>{t.removed=!0}),e&&GM()}function VM(){const e=performance.now();Dy=null,Dy=Ou.length>0?requestAnimationFrame(VM):null,Ly.executeFrameTasks(e)}function XN(e){const t=e-Q2;Q2=e;const i=1e3/60,s=Math.max(0,t-i);for(let l=0;l<eb.length;l++){const d=performance.now(),y=eb[l];Ou.forAll(g=>{var _;g.paused||g.removed||(l===0&&g.ticks++,g.phases[y]&&(fp.time=e,fp.deltaTime=g.ticks===0?0:t,fp.elapsedFrameTime=performance.now()-e,fp.frameDuration=i-s,(_=g.phases[y])==null||_.call(g,fp)))}),ZN[l].record(performance.now()-d)}GM(),QN.record(performance.now()-e)}const wf=new Su;function GM(){Ou.forAll(e=>{e.removed&&wf.push(e)}),Ou.removeUnorderedMany(wf.data,wf.length),wf.clear()}function qM(){for(;tb.length;){const e=tb.shift();e.isActive&&e.callback()}Ly.willDispatch=!1}function eue(e=1,t){const i=HN(),s=()=>{Bn(t)?i.reject(yi()):e===0?i():(--e,Ry(()=>s()))};return s(),i.promise}const ZN=eb.map(e=>new P0(e)),QN=new P0("total");let ej=0;function N0(){return++ej}class rg{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}onObservableAccessed(t){this._accessed.includes(t)||this._accessed.push(t)}onTrackingEnd(){const t=this._handles,i=this._accessed;for(let s=0;s<i.length;++s)t.push(i[s].observe(this));i.length=0}clear(){const t=this._handles;for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}let cc=!1;const zy=[];function UM(e,t){let i=new rg(d),s=null,l=!1;function d(){if(!i||l)return;if(cc)return void WM(d);const g=s;i.clear(),cc=!0,l=!0,s=zo(i,e),l=!1,cc=!1,t(s,g),JM()}function y(){i&&(i.destroy(),i=null,s=null)}return l=!0,s=zo(i,e),l=!1,{remove:y}}function BM(e,t){let i=new rg(l),s=null;function l(){t(s,y)}function d(){i&&(i.destroy(),i=null),s=null}function y(){return i?(i.clear(),s=zo(i,e),s):null}return y(),{remove:d}}function HM(e){let t=new rg(s),i=!1;function s(){t&&!i&&(cc?WM(s):(t.clear(),cc=!0,i=!0,zo(t,e),i=!1,cc=!1,JM()))}function l(){t&&(t.destroy(),t=null)}return i=!0,zo(t,e),i=!1,{remove:l}}function WM(e){zy.includes(e)||zy.unshift(e)}function JM(){for(;zy.length;)zy.pop()()}var j0;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(j0||(j0={}));class id{constructor(){this.uid=N0(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,s,l,d){return this.pool.acquire(j0.Untracked,t,i,s,l,d,Km)}static acquireTracked(t,i,s,l){return this.pool.acquire(j0.Tracked,t,i,s,null,null,l)}notify(t,i){this.type===j0.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i)}acquire(t,i,s,l,d,y,g){this.uid=N0(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=s,this.getValue=l,this.target=d,this.path=y,this.equals=g}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=N0(),this.removed=!0}}id.pool=new DN(id);const _1=new ur,Za=new Set;let Vy;function Gy(e){Za.delete(e),Za.add(e),Vy||(Vy=Rd(rj))}function tj(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function ij(e){for(const t of Za.values())t.target===e&&(t.removed=!0)}function rj(){let e=10;for(;Vy&&e--;){Vy=null;const t=sj(),i=_1.acquire();for(const s of t){const l=s.uid;tj(s),l===s.uid&&s.removed&&i.push(s)}for(const s of Za)s.removed&&(i.push(s),Za.delete(s));for(const s of i)id.pool.release(s);_1.release(i),_1.release(t),nj.forEach(s=>s())}}function sj(){const e=_1.acquire();e.length=Za.size;let t=0;for(const i of Za)e[t]=i,++t;return Za.clear(),e}const nj=new Set;function oj(e,t,i){let s=TM(e,t,i,(l,d,y)=>{let g,_,M=BM(()=>Pd(l,d),(E,O)=>{l.__accessor__.destroyed||g&&g.uid!==_?s.remove():(g||(g=id.acquireUntracked(E,y,O,l,d),_=g.uid),Gy(g))});return{remove:EM(()=>{M.remove(),g&&(g.uid!==_||g.removed||(g.removed=!0,Gy(g)),g=null),s=M=null})}});return s}function aj(e,t,i){const s=TM(e,t,i,(l,d,y)=>{let g=!1;return UM(()=>Pd(l,d),(_,M)=>{l.__accessor__.destroyed?s.remove():g||(g=!0,Km(M,_)||y.call(l,_,M,d,l),g=!1)})});return s}function lj(e,t,i,s=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:s?aj(e,t,i):oj(e,t,i)}function uj(e,t,i){let s,l,d=BM(e,(y,g)=>{s&&s.uid!==l?d.remove():(s||(s=id.acquireTracked(y,t,g,i),l=s.uid),Gy(s))});return{remove:EM(()=>{d.remove(),s&&(s.uid!==l||s.removed||(s.removed=!0,Gy(s)),s=null),d=null})}}function hj(e,t,i){let s=!1;return UM(e,(l,d)=>{s||(s=!0,i(d,l)||t(l,d),s=!1)})}function cj(e,t,i=!1,s=Km){return i?hj(e,t,s):uj(e,t,s)}function sg(e,t){for(const[i,s]of e)if(t(s,i))return!0;return!1}function pj(e,t,i){const s=e.get(t);if(s!==void 0)return s;const l=i();return e.set(t,l),l}const pc=Se.getLogger("esri.core.Accessor");function dj(e){return e==null?e:new Date(e)}function fj(e){return e==null?e:!!e}function Ld(e){return e==null?e:e.toString()}function _s(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function d5(e){return e==null?e:Math.round(parseFloat(e))}function KM(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function qy(e,t){return t!=null&&e&&!(t instanceof e)}function YM(e){return e&&"isCollection"in e}function o6(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function yj(e,t){if(!t||!t.constructor||!YM(t.constructor))return ib(e,t)?t:new e(t);const i=o6(e.prototype.itemType),s=o6(t.constructor.prototype.itemType);return i?s?i===s?t:i.prototype.isPrototypeOf(s.prototype)?new e(t):(ib(e,t),t):new e(t):t}function ib(e,t){return!!KM(t)&&(pc.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+ng(e)+"'"),!0)}function f5(e,t){return t==null?t:YM(e)?yj(e,t):qy(e,t)?ib(e,t)?t:new e(t):t}function ng(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const mj=new WeakMap;function gj(e){switch(e){case Number:return _s;case Lt:return d5;case Boolean:return fj;case String:return Ld;case Date:return dj;default:return pj(mj,e,()=>f5.bind(null,e))}}function gi(e,t){const i=gj(e);return arguments.length===1?i:i(t)}function rd(e,t,i){return arguments.length===1?rd.bind(null,e):t&&(Array.isArray(t)?t.map(s=>e(s,i)):[e(t,i)])}function vj(e,t){return arguments.length===1?rd(gi.bind(null,e)):rd(gi.bind(null,e),t)}function XM(e,t,i){return t!==0&&Array.isArray(i)?i.map(s=>XM(e,t-1,s)):e(i)}function Uy(e,t,i){if(arguments.length===2)return Uy.bind(null,e,t);if(!i)return i;let s=t,l=i=XM(e,t,i);for(;s>0&&Array.isArray(l);)s--,l=l[0];if(l!==void 0)for(let d=0;d<s;d++)i=[i];return i}function bj(e,t,i){return arguments.length===2?Uy(gi.bind(null,e),t):Uy(gi.bind(null,e),t,i)}function ZM(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function rb(e,t){if(arguments.length===2)return rb(e).call(null,t);const i=new Set,s=e.filter(g=>typeof g!="function"),l=e.filter(g=>typeof g=="function");for(const g of e)typeof g!="string"&&typeof g!="number"||i.add(g);let d=null,y=null;return(g,_)=>{if(g==null)return g;const M=typeof g,E=M==="string"||M==="number";return E&&(i.has(g)||l.some(O=>M==="string"&&O===String||M==="number"&&O===Number))||M==="object"&&l.some(O=>!qy(g,O))?g:(E&&s.length?(d||(d=s.map(O=>typeof O=="string"?`'${O}'`:`${O}`).join(", ")),pc.error("Accessor#set",`'${g}' is not a valid value for this property, only the following values are valid: ${d}`)):typeof g=="object"&&l.length?(y||(y=l.map(O=>ng(O)).join(", ")),pc.error("Accessor#set",`'${g}' is not a valid value for this property, value must be one of ${y}`)):pc.error("Accessor#set",`'${g}' is not a valid value for this property`),_&&(_.valid=!1),null)}}function Hn(e,t){if(arguments.length===2)return Hn(e).call(null,t);const i={},s=[],l=[];for(const _ in e.typeMap){const M=e.typeMap[_];i[_]=gi(M),s.push(ng(M)),l.push(_)}const d=()=>`'${s.join("', '")}'`,y=()=>`'${l.join("', '")}'`,g=typeof e.key=="string"?_=>_[e.key]:e.key;return _=>{if(e.base&&!qy(e.base,_)||_==null)return _;const M=g(_)||e.defaultKeyValue,E=i[M];if(!E)return pc.error("Accessor#set",`Invalid property value, value needs to be one of ${d()}, or a plain object that can autocast (having .type = ${y()})`),null;if(!qy(e.typeMap[M],_))return _;if(typeof e.key=="string"&&!KM(_)){const O={};for(const P in _)P!==e.key&&(O[P]=_[P]);return E(O)}return E(_)}}class Lt{}const tue={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function wj(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function QM(e){switch(e.type){case"native":return gi(e.value);case"array":return rd(QM(e.value));case"one-of":return _j(e);default:return null}}function _j(e){let t=null;return(i,s)=>nb(i,e)?i:(t==null&&(t=sb(e)),pc.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),s&&(s.valid=!1),null)}function sb(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Lt:return"integer";case Date:return"date";default:return ng(e.value)}case"array":return`array of ${sb(e.value)}`;case"one-of":{const t=e.values.map(i=>sb(i));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function nb(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Lt:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!nb(i,t.value));case"one-of":return t.values.some(i=>nb(e,i))}}function S(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const s=Object.getOwnPropertyDescriptor(t,i),l=Xm(t,i);s&&(s.get||s.set?(l.get=s.get||l.get,l.set=s.set||l.set):"value"in s&&("value"in e&&Se.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),l.value=e.value=s.value)),e.readOnly!=null&&(l.readOnly=e.readOnly);const d=e.aliasOf;if(d){const _=typeof d=="string"?d:d.source,M=typeof d=="string"?null:d.overridable===!0;let E;l.dependsOn=[_],l.get=function(){let O=Py(this,_);if(typeof O=="function"){E||(E=_.split(".").slice(0,-1).join("."));const P=Py(this,E);P&&(O=O.bind(P))}return O},l.readOnly||(l.set=M?function(O){O!==void 0?this._override(i,O):this._clearOverride(i)}:function(O){Fy(this,_,O)})}const y=e.type,g=e.types;l.cast||(y?l.cast=xj(y):g&&(Array.isArray(g)?l.cast=rd(Hn(g[0])):l.cast=Hn(g))),e.range&&(l.cast=Sj(l.cast,e.range)),$N(l,e)}}function e$(e,t,i){const s=Xm(e,i);s.json||(s.json={});let l=s.json;return t!==void 0&&(l.origins||(l.origins={}),l.origins[t]||(l.origins[t]={}),l=l.origins[t]),l}function xj(e){let t=0,i=e;if(wj(e))return QM(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const s=i;if(ZM(s))return t===0?rb(s):Uy(rb(s),t);if(t===1)return vj(s);if(t>1)return bj(s,t);const l=e;return l.from?l.from:gi(l)}function Sj(e,t){return i=>{let s=+e(i);return t.step!=null&&(s=Math.round(s/t.step)*t.step),t.min!=null&&(s=Math.max(t.min,s)),t.max!=null&&(s=Math.min(t.max,s)),s}}function Mj(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const s in i)if(t[s]){const l=t[s];i[s].forEach(d=>{t[d]=l}),delete t[s]}}}class fr extends Zm{constructor(t,i,s){if(super(t,i,s),!(this instanceof fr))return new fr(t,i,s)}}fr.prototype.type="warning";function t$(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const ob=Se.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function a6(e,t,i){var s,l;e&&(!i&&!t.read||(s=t.read)!=null&&s.reader||((l=t.read)==null?void 0:l.enabled)===!1||Tj(e)&&es("read.reader",Uc(e),t))}function Uc(e){var t;const i=(t=e.ndimArray)!=null?t:0;if(i>1)return Ij(e);if(i===1)return l6(e);if("type"in e&&r$(e.type)){var s,l;const d=(s=e.type.prototype)==null||(l=s.itemType)==null?void 0:l.Type,y=l6(typeof d=="function"?{type:d}:{types:d});return(g,_,M)=>{const E=y(g,_,M);return E&&new e.type(E)}}return y5(e)}function y5(e){return"type"in e?$j(e.type):Ej(e.types)}function $j(e){return e.prototype.read?(t,i,s)=>{if(t==null)return t;const l=typeof t;if(l!=="object")return void ob.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${l}'`);const d=new e;return d.read(t,s),d}:e.fromJSON}function i$(e,t,i,s){return s!==0&&Array.isArray(t)?t.map(l=>i$(e,l,i,s-1)):e(t,void 0,i)}function Ij(e){var t;const i=y5(e),s=i$.bind(null,i),l=(t=e.ndimArray)!=null?t:0;return(d,y,g)=>{if(d==null)return d;d=s(d,g,l);let _=l,M=d;for(;_>0&&Array.isArray(M);)_--,M=M[0];if(M!==void 0)for(let E=0;E<_;E++)d=[d];return d}}function l6(e){const t=y5(e);return(i,s,l)=>{if(i==null)return i;if(Array.isArray(i)){const y=[];for(const g of i){const _=t(g,void 0,l);_!==void 0&&y.push(_)}return y}const d=t(i,void 0,l);return d!==void 0?[d]:void 0}}function r$(e){if(!t$(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?m5(t.Type):s$(t.Type))}function Tj(e){return"types"in e?s$(e.types):m5(e.type)}function m5(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||r$(e))}function s$(e){for(const t in e.typeMap)if(!m5(e.typeMap[t]))return!1;return!0}function Ej(e){var t;let i=null;const s=(t=e.errorContext)!=null?t:"type";return(l,d,y)=>{if(l==null)return l;const g=typeof l;if(g!=="object")return void ob.error(`Expected JSON value of type 'object' to deserialize, but got '${g}'`);i||(i=kj(e));const _=e.key;if(typeof _!="string")return;const M=l[_],E=M?i[M]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!E){const P=`Type '${M||"unknown"}' is not supported`;return y&&y.messages&&l&&y.messages.push(new fr(`${s}:unsupported`,P,{definition:l,context:y})),void ob.error(P)}const O=new E;return O.read(l,y),O}}function kj(e){const t={};for(const l in e.typeMap){var i,s;const d=e.typeMap[l],y=Nd(d.prototype);if(typeof e.key=="function")continue;const g=y.properties[e.key];if(!g)continue;(i=g.json)!=null&&i.type&&Array.isArray(g.json.type)&&g.json.type.length===1&&typeof g.json.type[0]=="string"&&(t[g.json.type[0]]=d);const _=(s=g.json)==null?void 0:s.write;if(!_||!_.writer){t[l]=d;continue}const M=_.target,E=typeof M=="string"?M:e.key,O={};_.writer(l,O,E),O[E]&&(t[O[E]]=d)}return t}function Aj(e){if(e.json||(e.json={}),h6(e.json),c6(e.json),u6(e.json),e.json.origins)for(const t in e.json.origins)h6(e.json.origins[t]),c6(e.json.origins[t]),u6(e.json.origins[t]);return!0}function u6(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function h6(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function c6(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}const Oj=Se.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function p6(e,t){var i;if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const s=(i=e==null?void 0:e.ndimArray)!=null?i:0;e&&(s===1||"type"in e&&t$(e.type))?t.write.writer=Nj:s>1?t.write.writer=jj(s):t.types?Array.isArray(t.types)?t.write.writer=Pj(t.types[0]):t.write.writer=Cj(t.types):t.write.writer=sd}function Cj(e){return(t,i,s,l)=>t?n$(t,e,l)?sd(t,i,s,l):void 0:sd(t,i,s,l)}function n$(e,t,i){for(const d in t.typeMap)if(e instanceof t.typeMap[d])return!0;if(i!=null&&i.messages){var s,l;const d=(s=t.errorContext)!=null?s:"type",y=`Values of type '${(l=typeof t.key!="function"?e[t.key]:e.declaredClass)!=null?l:"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new re(`${d}:unsupported`,y,{definition:e,context:i})),Oj.error(y)}return!1}function Pj(e){return(t,i,s,l)=>!t||!Array.isArray(t)?sd(t,i,s,l):sd(t.filter(d=>n$(d,e,l)),i,s,l)}function sd(e,t,i,s){es(i,By(e,s),t)}function By(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?Hy(e):e}function Hy(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function Nj(e,t,i,s){let l;e===null?l=null:e&&typeof e.map=="function"?(l=e.map(d=>By(d,s)),typeof l.toArray=="function"&&(l=l.toArray())):l=[By(e,s)],es(i,l,t)}function o$(e,t,i){return i!==0&&Array.isArray(e)?e.map(s=>o$(s,t,i-1)):By(e,t)}function jj(e){return function(t,i,s,l){let d;if(t===null)d=null;else{d=o$(t,l,e);let y=e,g=d;for(;y>0&&Array.isArray(g);)y--,g=g[0];if(g!==void 0)for(let _=0;_<y;_++)d=[d]}es(s,d,i)}}function ab(e,t){return g5(e,"read",t)}function a$(e,t){return g5(e,"write",t)}function g5(e,t,i){let s=e&&e.json;if(e&&e.json&&e.json.origins&&i){const l=e.json.origins[i.origin];l&&(t==="any"||t in l)&&(s=l)}return s}function Fj(e){const t=Rj(e);if(e.json.origins)for(const i in e.json.origins){const s=e.json.origins[i],l=s.types?Lj(s):t;a6(l,s,!1),s.types&&!s.write&&e.json.write&&e.json.write.enabled&&(s.write=J({},e.json.write)),p6(l,s)}a6(t,e.json,!0),p6(t,e.json)}function Rj(e){return e.json.types?lb(e.json):e.type?l$(e):lb(e)}function Lj(e){return e.type?l$(e):lb(e)}function l$(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!ZM(i);)i=i[0],t++;return{type:i,ndimArray:t}}function lb(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function Dj(e){Aj(e)&&(Mj(e),Fj(e))}const yv=new Set,mv=new Set;function H(e){return t=>{t.prototype.declaredClass=e,Vj(t);const i=[],s=[];let l=t.prototype;for(;l;)l.hasOwnProperty("initialize")&&!yv.has(l.initialize)&&(yv.add(l.initialize),i.push(l.initialize)),l.hasOwnProperty("destroy")&&!mv.has(l.destroy)&&(mv.add(l.destroy),s.push(l.destroy)),l=Object.getPrototypeOf(l);yv.clear(),mv.clear();class d extends t{constructor(...g){if(super(...g),this.constructor===d&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let _=i.length-1;_>=0;_--)i[_].call(this)}}),s.length){let _=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!_){_=!0;for(let M=0;M<s.length;M++)s[M].call(this)}}})}this.postscript(...g)}}}return d.__accessorMetadata__=Nd(t.prototype),d.prototype.declaredClass=e,d}}function zj(e,t){return t.get==null?function(){const i=this.__accessor__.properties.get(e);if(i===void 0)return;tt(i);const s=this.__accessor__.store;return s.has(e)?s.get(e):i.metadata.value}:function(){const i=this.__accessor__.properties.get(e);if(i!==void 0)return i.getComputed()}}function Vj(e){const t=e.prototype,i=Nd(t).properties,s={};for(const l of Object.getOwnPropertyNames(i)){const d=i[l];Dj(d),s[l]={enumerable:!0,configurable:!0,get:zj(l,d),set(y){const g=this.__accessor__;if(g!==void 0){if(!Object.isFrozen(this)){if(g.initialized&&d.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${l}' of ${this.declaredClass}`);if(g.lifecycle===zn.CONSTRUCTED&&d.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${l}' of ${this.declaredClass}`);g.set(l,y)}}else Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:y})}}}Object.defineProperties(e.prototype,s)}function Gj(e){if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor&&e.constructor.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}class Fe{constructor(...t){if(this.constructor===Fe)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new PN(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:s,constructor:l}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const d=this;class y extends d{constructor(..._){super(..._),this.inherited=null,l&&l.apply(this,_)}}Nd(y.prototype);for(const g in t){const _=t[g];y.prototype[g]=typeof _=="function"?function(...M){const E=this.inherited;let O;this.inherited=function(...P){if(d.prototype[g])return d.prototype[g].apply(this,P)};try{O=_.apply(this,M)}catch(P){throw this.inherited=E,P}return this.inherited=E,O}:t[g]}for(const g in i){const _=Gj(i[g]);S(_)(y.prototype,g)}return H(s)(y)}postscript(t){const i=this.__accessor__,s=i.ctorArgs||t;i.initialize(),s&&(this.set(s),i.ctorArgs=null),i.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(ij(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&this.__accessor__.lifecycle===zn.CONSTRUCTED||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return Py(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}isInstanceOf(t){return bh(Se.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof t}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return Fy(this,t,i),this}watch(t,i,s){return lj(this,t,i,s)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,i){return this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}}class dc{constructor(){this._emitter=new dc.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}}(function(e){class t{constructor(l=null){this.target=l,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(l,d){const y=this._listenersMap&&this._listenersMap.get(l);if(!y)return!1;const g=this.target||this;return[...y].forEach(_=>{_.call(g,d)}),y.length>0}on(l,d){if(Array.isArray(l)){const g=l.map(_=>this.on(_,d));return Ym(g)}if(l.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const y=this._listenersMap.get(l)||[];return y.push(d),this._listenersMap.set(l,y),{remove:()=>{const g=this._listenersMap&&this._listenersMap.get(l)||[],_=g.indexOf(d);_>=0&&g.splice(_,1)}}}once(l,d){const y=this.on(l,g=>{y.remove(),d.call(null,g)});return y}hasEventListener(l){const d=this._listenersMap&&this._listenersMap.get(l);return d!=null&&d.length>0}}e.EventEmitter=t,e.EventedMixin=s=>{let l=class extends s{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(d,y){return this._emitter.emit(d,y)}on(d,y){return this._emitter.on(d,y)}once(d,y){return this._emitter.once(d,y)}hasEventListener(d){return this._emitter.hasEventListener(d)}};return l=b([H("esri.core.Evented")],l),l};let i=class extends Fe{constructor(){super(...arguments),this._emitter=new dc.EventEmitter(this)}destroy(){this._emitter.clear()}emit(s,l){return this._emitter.emit(s,l)}on(s,l){return this._emitter.on(s,l)}once(s,l){return this._emitter.once(s,l)}hasEventListener(s){return this._emitter.hasEventListener(s)}};i=b([H("esri.core.Evented")],i),e.EventedAccessor=i})(dc||(dc={}));const hl=dc;var xt;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(xt||(xt={}));function v5(e){return(t,i)=>{t[i]=e}}class qj{constructor(){this._observers=[]}observe(t){return this._observers.includes(t)||this._observers.push(t),new jM(this._observers,t)}notify(){const t=this._observers.slice();for(let i=0;i<t.length;++i){const s=t[i];s.onInvalidated(),s.onCommitted()}}}var Co;class Uj{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}}const os=new hn(Uj,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),Bj=()=>{};function gv(e){return e?e instanceof su?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function vv(e){if(e&&e.length)return e[0]}function Hj(e,t,i,s){const l=Math.min(e.length-i,t.length-s);let d=0;for(;d<l&&e[i+d]===t[s+d];)d++;return d}function u$(e,t,i,s){t&&t.forEach((l,d,y)=>{e.push(l),u$(e,i.call(s,l,d,y),i,s)})}const Wo=new Set,Jo=new Set,Ko=new Set,bv=new Map;let Wj=0,su=Co=class extends hl.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new qj,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Wj++})}static isCollection(e){return e!=null&&e instanceof Co}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Co?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return tt(this._observable),this._items}set items(e){this._emitBeforeChanges(xt.ADD)||(this._splice(0,this.length,gv(e)),this._emitAfterChanges(xt.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const i=this._chgListeners,s={removed:!1,callback:t};return i.push(s),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=Bj,s.removed=!0,i.splice(i.indexOf(s),1)}}}return this._emitter.on(e,t)}once(e,t){const i=this.on(e,t);return{remove(){i.remove()}}}add(e,t){if(tt(this._observable),this._emitBeforeChanges(xt.ADD))return this;const i=this.getNextIndex(t!=null?t:null);return this._splice(i,0,[e]),this._emitAfterChanges(xt.ADD),this}addMany(e,t=this._items.length){if(tt(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(xt.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,gv(e)),this._emitAfterChanges(xt.ADD),this}at(e){if(tt(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(tt(this._observable),!this.length||this._emitBeforeChanges(xt.REMOVE))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(xt.REMOVE),e}clone(){return tt(this._observable),this._createNewInstance({items:this._items.map(le)})}concat(...e){tt(this._observable);const t=e.map(gv);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(tt(this._observable),!this.length||this._emitBeforeChanges(xt.REMOVE))return;const i=this._splice(0,this.length),s=i.length;for(let l=0;l<s;l++)e.call(t,i[l],l,i);this._emitAfterChanges(xt.REMOVE)}every(e,t){return tt(this._observable),this._items.every(e,t)}filter(e,t){let i;return tt(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return tt(this._observable),this._items.find(e,t)}findIndex(e,t){return tt(this._observable),this._items.findIndex(e,t)}flatten(e,t){tt(this._observable);const i=[];return u$(i,this,e,t),new Co(i)}forEach(e,t){return tt(this._observable),this._items.forEach(e,t)}getItemAt(e){return tt(this._observable),this._items[e]}getNextIndex(e){tt(this._observable);const t=this.length;return(e=e==null?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return tt(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return tt(this._observable),this._items.indexOf(e,t)}join(e=","){return tt(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return tt(this._observable),this._items.lastIndexOf(e,t)}map(e,t){tt(this._observable);const i=this._items.map(e,t);return new Co({items:i})}reorder(e,t=this.length-1){tt(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(xt.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(xt.MOVE)}return e}}pop(){if(tt(this._observable),!this.length||this._emitBeforeChanges(xt.REMOVE))return;const e=vv(this._splice(this.length-1,1));return this._emitAfterChanges(xt.REMOVE),e}push(...e){return tt(this._observable),this._emitBeforeChanges(xt.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(xt.ADD)),this.length}reduce(e,t){tt(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){tt(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return tt(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(tt(this._observable),e<0||e>=this.length||this._emitBeforeChanges(xt.REMOVE))return;const t=vv(this._splice(e,1));return this._emitAfterChanges(xt.REMOVE),t}removeMany(e){if(tt(this._observable),!e||!e.length||this._emitBeforeChanges(xt.REMOVE))return[];const t=e instanceof Co?e.toArray():e,i=this._items,s=[],l=t.length;for(let d=0;d<l;d++){const y=t[d],g=i.indexOf(y);if(g>-1){const _=1+Hj(t,i,d+1,g+1),M=this._splice(g,_);M&&M.length>0&&s.push.apply(s,M),d+=_-1}}return this._emitAfterChanges(xt.REMOVE),s}reverse(){if(tt(this._observable),this._emitBeforeChanges(xt.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(xt.MOVE),this}shift(){if(tt(this._observable),!this.length||this._emitBeforeChanges(xt.REMOVE))return;const e=vv(this._splice(0,1));return this._emitAfterChanges(xt.REMOVE),e}slice(e=0,t=this.length){return tt(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return tt(this._observable),this._items.some(e,t)}sort(e){if(tt(this._observable),!this.length||this._emitBeforeChanges(xt.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(xt.MOVE),this}splice(e,t,...i){tt(this._observable);const s=(t?xt.REMOVE:0)|(i.length?xt.ADD:0);if(this._emitBeforeChanges(s))return[];const l=this._splice(e,t,i)||[];return this._emitAfterChanges(s),l}toArray(){return tt(this._observable),this._items.slice()}toJSON(){return tt(this._observable),this.toArray()}toLocaleString(){return tt(this._observable),this._items.toLocaleString()}toString(){return tt(this._observable),this._items.toString()}unshift(...e){return tt(this._observable),!e.length||this._emitBeforeChanges(xt.ADD)||(this._splice(0,0,e),this._emitAfterChanges(xt.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const s=this._items,l=this.itemType;let d,y;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Rd(()=>this._dispatchChange())),t){if(y=s.splice(e,t),this.hasEventListener("before-remove")){const g=os.acquire();g.target=this,g.cancellable=!0;for(let _=0,M=y.length;_<M;_++)d=y[_],g.reset(d),this.emit("before-remove",g),g.defaultPrevented&&(y.splice(_,1),s.splice(e,0,d),e+=1,_-=1,M-=1);os.release(g)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const g=os.acquire();g.target=this,g.cancellable=!1;const _=y.length;for(let M=0;M<_;M++)g.reset(y[M]),this.emit("after-remove",g);os.release(g)}}if(i&&i.length){if(l){const E=[];for(const O of i){const P=l.ensureType(O);P==null&&O!=null||E.push(P)}i=E}const g=this.hasEventListener("before-add"),_=this.hasEventListener("after-add"),M=e===this.length;if(g||_){const E=os.acquire();E.target=this,E.cancellable=!0;const O=os.acquire();O.target=this,O.cancellable=!1;for(const P of i)g?(E.reset(P),this.emit("before-add",E),E.defaultPrevented||(M?s.push(P):s.splice(e++,0,P),this._set("length",s.length),_&&(O.reset(P),this.emit("after-add",O)))):(M?s.push(P):s.splice(e++,0,P),this._set("length",s.length),O.reset(P),this.emit("after-add",O));os.release(O),os.release(E)}else{if(M)for(const E of i)s.push(E);else s.splice(e,0,...i);this._set("length",s.length)}}return(i&&i.length||y&&y.length)&&this._notifyChangeEvent(i,y),y}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=os.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,os.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=os.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),os.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;Wo.clear(),Jo.clear(),Ko.clear();for(const{added:_,removed:M}of i){if(_)if(Ko.size===0&&Jo.size===0)for(const E of _)Wo.add(E);else for(const E of _)Jo.has(E)?(Ko.add(E),Jo.delete(E)):Ko.has(E)||Wo.add(E);if(M)if(Ko.size===0&&Wo.size===0)for(const E of M)Jo.add(E);else for(const E of M)Wo.has(E)?Wo.delete(E):(Ko.delete(E),Jo.add(E))}const s=ur.acquire();Wo.forEach(_=>{s.push(_)});const l=ur.acquire();Jo.forEach(_=>{l.push(_)});const d=this._items,y=t.items,g=ur.acquire();if(Ko.forEach(_=>{y.indexOf(_)!==d.indexOf(_)&&g.push(_)}),t.listeners&&(s.length||l.length||g.length)){const _={target:this,added:s,removed:l,moved:g},M=t.listeners.length;for(let E=0;E<M;E++){const O=t.listeners[E];O.removed||O.callback.call(this,_)}}ur.release(s),ur.release(l),ur.release(g)}Wo.clear(),Jo.clear(),Ko.clear()}};su.ofType=e=>{if(!e)return Co;if(bv.has(e))return bv.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const s in e.typeMap){const l=e.typeMap[s].prototype.declaredClass;t?t+=` | ${l}`:t=l}let i=class extends Co{};return b([v5({Type:e,ensureType:typeof e=="function"?gi(e):Hn(e)})],i.prototype,"itemType",void 0),i=b([H(`esri.core.Collection<${t}>`)],i),bv.set(e,i),i},b([S()],su.prototype,"length",void 0),b([S()],su.prototype,"items",null),su=Co=b([H("esri.core.Collection")],su);const qe=su;function Cu(e,t,i=qe){return t||(t=new i),t===e||(t.removeAll(),Jj(e)?t.addMany(e):e&&t.add(e)),t}function h$(e){return e}function Jj(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}class b5{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new b5;return this._values.forEach((s,l)=>{t&&t.has(l)||i.set(l,le(s.value),s.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const s=this._values.get(t);return i==null||(s==null?void 0:s.origin)===i?s==null?void 0:s.value:void 0}originOf(t){var i,s;return(i=(s=this._values.get(t))==null?void 0:s.origin)!=null?i:lt.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(s=>{var l;return((l=this._values.get(s))==null?void 0:l.origin)===t})}set(t,i,s){if((s=this._normalizeOrigin(s))===lt.DEFAULTS){const l=this._values.get(t);if(l&&l.origin!=null&&l.origin>s)return}this._values.set(t,new Kj(i,s))}delete(t,i){var s;(i=this._normalizeOrigin(i))!=null&&((s=this._values.get(t))==null?void 0:s.origin)!==i||this._values.delete(t)}has(t,i){var s;return(i=this._normalizeOrigin(i))!=null?((s=this._values.get(t))==null?void 0:s.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},s)=>t(i,s))}_normalizeOrigin(t){if(t!=null)return t===lt.DEFAULTS?t:lt.USER}}class Kj{constructor(t,i){this.value=t,this.origin=i}}function c$(e,t,i){t.keys().forEach(l=>{i.set(l,t.get(l),lt.DEFAULTS)});const s=e.metadatas;Object.keys(s).forEach(l=>{e.internalGet(l)&&i.set(l,e.internalGet(l),lt.DEFAULTS)})}function Yj(e,t,i){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const s=e.read.source;if(typeof s=="string"){if(s===t||s.indexOf(".")>-1&&s.indexOf(t)===0&&Z_(s,i))return!0}else for(const l of s)if(l===t||l.indexOf(".")>-1&&l.indexOf(t)===0&&Z_(l,i))return!0;return!1}function Xj(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Zj(e,t,i,s,l){let d=ab(t[i],l);Xj(d)&&(e[i]=!0);for(const y of Object.getOwnPropertyNames(t))d=ab(t[y],l),Yj(d,i,s)&&(e[y]=!0)}function Qj(e,t,i,s){const l=i.metadatas,d=g5(l[t],"any",s),y=d&&d.default;if(y===void 0)return;const g=typeof y=="function"?y.call(e,t,s):y;g!==void 0&&i.set(t,g)}const p$={origin:"service"};function d$(e,t,i=p$){if(!t||typeof t!="object")return;const s=dr(e),l=s.metadatas,d={};for(const y of Object.getOwnPropertyNames(t))Zj(d,l,y,t,i);s.setDefaultOrigin(i.origin);for(const y of Object.getOwnPropertyNames(d)){const g=ab(l[y],i).read,_=g&&g.source;let M;M=_&&typeof _=="string"?Pd(t,_):t[y],g&&g.reader&&(M=g.reader.call(e,M,t,i)),M!==void 0&&s.set(y,M)}if(!i||!i.ignoreDefaults){s.setDefaultOrigin("defaults");for(const y of Object.getOwnPropertyNames(l))d[y]||Qj(e,y,s,i)}s.setDefaultOrigin("user")}function eF(e,t,i,s=p$){var l;const d=Te(J({},s),{messages:[]});i(d),(l=d.messages)==null||l.forEach(y=>{y.type!=="warning"||e.loaded?s&&s.messages&&s.messages.push(y):e.loadWarnings.push(y)})}const tF=Se.getLogger("esri.core.accessorSupport.write");function iF(e,t,i,s,l){var d,y;const g={};return(d=t.write)==null||(y=d.writer)==null||y.call(e,s,g,i,l),g}function f$(e,t,i,s,l,d){if(!s||!s.write)return!1;const y=e.get(i);if(!l&&s.write.overridePolicy){const g=s.write.overridePolicy.call(e,y,i,d);g!==void 0&&(l=g)}if(l||(l=s.write),!l||l.enabled===!1)return!1;if((y===null&&!l.allowNull&&!l.writerEnsuresNonNull||y===void 0)&&l.isRequired){const g=new re("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return g&&d&&d.messages?d.messages.push(g):g&&!d&&tF.error(g.name,g.message),!1}return!(y===void 0||y===null&&!l.allowNull&&!l.writerEnsuresNonNull||(!t.store.multipleOriginsSupported||t.store.originOf(i)===lt.DEFAULTS)&&rF(e,i,d,s,y)||!l.ignoreOrigin&&d&&d.origin&&t.store.multipleOriginsSupported&&t.store.originOf(i)<qa(d.origin))}function rF(e,t,i,s,l){const d=s.default;if(d===void 0)return!1;if(s.defaultEquals!=null)return s.defaultEquals(l);if(typeof d=="function"){if(Array.isArray(l)){const y=d.call(e,t,i);return pM(y,l)}return!1}return d===l}function sF(e,t,i,s){const l=dr(e),d=l.metadatas,y=a$(d[t],s);return!!y&&f$(e,l,t,y,i,s)}function y$(e,t,i){if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return v1(t,e.toJSON());const s=dr(e),l=s.metadatas;for(const g in l){const _=a$(l[g],i);if(!f$(e,s,g,_,void 0,i))continue;const M=e.get(g),E=iF(e,_,_.write&&typeof _.write.target=="string"?_.write.target:g,M,i);var d,y;Object.keys(E).length>0&&(t=v1(t,E),i!=null&&(d=i.resources)!=null&&(y=d.pendingOperations)!=null&&y.length&&Promise.all(i.resources.pendingOperations).then(()=>v1(t,E)),i&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:g,oldOrigin:EN(s.store.originOf(g)),newOrigin:i.origin}))}return t}const Dd=e=>{let t=class extends e{constructor(...i){super(...i);const s=dr(this),l=s.store,d=new b5;s.store=d,c$(s,l,d)}read(i,s){d$(this,i,s)}write(i={},s){return y$(this,i,s)}toJSON(i){return this.write({},i)}static fromJSON(i,s){return nF.call(this,i,s)}};return t=b([H("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function nF(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}let ge=class extends Dd(Fe){};ge=b([H("esri.core.JSONSupport")],ge);var Na;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Na||(Na={}));class oF{constructor(t){this.instance=t,this._resolver=Vo(),this._status=Na.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Na.RESOLVED,this._cleanUp()},()=>{this._status=Na.REJECTED,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Na.RESOLVED}isRejected(){return this._status===Na.REJECTED}isFulfilled(){return this._status!==Na.PENDING}abort(){this._resolver.reject(yi())}when(t,i){return this._resolver.promise.then(t,i)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=Vo(),i=[...this._resolvingPromises,t.promise],s=this._allPromise=Promise.all(i);s.then(()=>{this.isFulfilled()||this._allPromise!==s||this._resolver.resolve(this.instance)},l=>{this.isFulfilled()||this._allPromise!==s||ks(l)||this._resolver.reject(l)}),t.resolve()}}const og=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new oF(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,s){return new Promise((l,d)=>{this._promiseProps.when(l,d)}).then(i,s)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=b([H("esri.core.Promise")],t),t};let Wy=class extends og(Fe){};Wy=b([H("esri.core.Promise")],Wy);const aF="not-loaded",lF="loading",uF="failed",d6="loaded",m$=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(s=>{const l=this.load.bind(this);this.load=d=>{const y=new Promise((g,_)=>{const M=ig(d,_);this.destroyed&&_(new re("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(g,_).finally(()=>{M&&M.remove()})});if(this.loadStatus===aF){this._set("loadStatus",lF);const g=this._loadController=new AbortController;l({signal:g.signal}),cn(g.signal,()=>{this._promiseProps.abort()})}return s(),y}})),this.when(()=>{this._set("loadStatus",d6),this._loadController=null},s=>{this._set("loadStatus",uF),this._set("loadError",s),this._loadController=null})}get loaded(){return this.loadStatus===d6}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new re("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return b([S({readOnly:!0})],t.prototype,"loaded",null),b([S({readOnly:!0})],t.prototype,"loadError",void 0),b([S({clonable:!1})],t.prototype,"loadStatus",void 0),b([S({type:[fr],readOnly:!0})],t.prototype,"loadWarnings",null),t=b([H("esri.core.Loadable")],t),t};let Dp=class extends m$(Wy){};Dp=b([H("esri.core.Loadable")],Dp),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=m$,e.isLoadable=t}(Dp||(Dp={}));const Go=Dp;function hF(e,t,i){return Or(e.map((s,l)=>t.apply(i,[s,l])))}function cF(e,t,i){return Or(e.map((s,l)=>t.apply(i,[s,l]))).then(s=>s.map(l=>l.value))}function ag(e){return ce(e)?ec():e.then(t=>({ok:!0,value:t})).catch(t=>({ok:!1,error:t}))}function iue(e){return e.then(t=>({ok:!0,value:t})).catch(t=>(Fd(t),{ok:!1,error:t}))}async function g$(e,t){return await e.load(),pF(e,t)}async function pF(e,t){const i=[],s=(...d)=>{for(const y of d)ce(y)||(Array.isArray(y)?s(...y):qe.isCollection(y)?y.forEach(g=>s(g)):Go.isLoadable(y)&&i.push(y))};t(s);let l=null;if(await cF(i,async d=>{(await ag(dF(d)?d.loadAll():d.load())).ok!==!1||l||(l=d)}),l)throw l.loadError;return e}function dF(e){return"loadAll"in e&&typeof e.loadAll=="function"}const fF=Se.getLogger("esri.core.urlUtils"),Bc=Ct.request,f6="esri/config: esriConfig.request.proxyUrl is not set.",v$=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,b$=/^\s*http:/i,yF=/^\s*https:/i,mF=/^\s*file:/i,gF=/:\d+$/,vF=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,bF=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),wF=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class fc{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(bF);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(wF),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}}const _f={},_F=new fc(Ct.applicationUrl);let er=_F;const xF=SF();let w5=xF;const w$=()=>er,rue=()=>w5;function SF(){const e=er.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${er.scheme}://${er.host}${er.port!=null?`:${er.port}`:""}`}${t}`}function Ri(e){const t={path:null,query:null},i=new fc(e),s=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.substring(0,s),t.query=_$(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.substring(0,t.path.length-(i.fragment.length+1)))),t}function _$(e){const t=e.split("&"),i={};for(const s of t){if(!s)continue;const l=s.indexOf("=");let d,y;l<0?(d=decodeURIComponent(s),y=""):(d=decodeURIComponent(s.slice(0,l)),y=decodeURIComponent(s.slice(l+1)));let g=i[d];typeof g=="string"&&(g=i[d]=[g]),Array.isArray(g)?g.push(y):i[d]=y}return i}function y6(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function nd(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i]))).join("&"):Object.keys(e).map(i=>{const s=e[i];if(s==null)return"";const l=encodeURIComponent(i)+"=",d=t&&t[i];return d?l+encodeURIComponent(d(s)):Array.isArray(s)?s.map(y=>y6(y)?l+encodeURIComponent(JSON.stringify(y)):l+encodeURIComponent(y)).join("&"):y6(s)?l+encodeURIComponent(JSON.stringify(s)):l+encodeURIComponent(s)}).filter(i=>i).join("&"):""}function MF(e=!1){let t,i=Bc.proxyUrl;if(typeof e=="string"){t=OF(e);const s=lg(e);s&&(i=s.proxyUrl)}else t=!!e;if(!i)throw fF.warn(f6),new re("urlutils:proxy-not-set",f6);return t&&ub()&&(i=$5(i)),Ri(i)}function $F(e){const t=lg(e);let i,s;if(t){const l=_5(t.proxyUrl);i=l.path,s=l.query?_$(l.query):null}if(i){const l=Ri(e);e=i+"?"+l.path;const d=nd(J(J({},s),l.query));d&&(e=`${e}?${d}`)}return e}const yp={path:"",query:""};function _5(e){const t=e.indexOf("?");return t!==-1?(yp.path=e.slice(0,t),yp.query=e.slice(t+1)):(yp.path=e,yp.query=null),yp}function x$(e){return e=(e=Ky(e=RF(e=_5(e).path),!0)).toLowerCase()}function IF(e){const t={proxyUrl:e.proxyUrl,urlPrefix:x$(e.urlPrefix)},i=Bc.proxyRules,s=t.urlPrefix;let l=i.length;for(let d=0;d<i.length;d++){const y=i[d].urlPrefix;if(s.indexOf(y)===0){if(s.length===y.length)return-1;l=d;break}y.indexOf(s)===0&&(l=d+1)}return i.splice(l,0,t),l}function lg(e){const t=Bc.proxyRules,i=x$(e);for(let s=0;s<t.length;s++)if(i.indexOf(t[s].urlPrefix)===0)return t[s]}function S$(e,t){return e=m6(e),t=m6(t),Ky(e)===Ky(t)}function m6(e){const t=(e=an(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function M$(e){const t=s=>s==null||s instanceof RegExp&&s.test(e)||typeof s=="string"&&e.startsWith(s),i=Bc.interceptors;if(i){for(const s of i)if(Array.isArray(s.urls)){if(s.urls.some(t))return s}else if(t(s.urls))return s}return null}function Jy(e,t,i=!1){const s=cb(e),l=cb(t);return!(!i&&s.scheme!==l.scheme)&&s.host!=null&&l.host!=null&&s.host.toLowerCase()===l.host.toLowerCase()&&s.port===l.port}function x5(e){if(typeof e=="string"){if(!Yr(e))return!0;e=cb(e)}if(Jy(e,er))return!0;const t=Bc.trustedServers||[];for(let i=0;i<t.length;i++){const s=TF(t[i]);for(let l=0;l<s.length;l++)if(Jy(e,s[l]))return!0}return!1}function TF(e){return _f[e]||(M5(e)||Wn(e)?_f[e]=[new fc(sn(e))]:_f[e]=[new fc(`http://${e}`),new fc(`https://${e}`)]),_f[e]}function sn(e,t=w5,i){return Wn(e)?i&&i.preserveProtocolRelative?e:er.scheme==="http"&&er.authority===Hc(e).slice(2)?`http:${e}`:`https:${e}`:M5(e)?e:rl(e[0]==="/"?jF(t):t,e)}function S5(e,t=w5,i){if(!Yr(e))return e;const s=an(e),l=s.toLowerCase(),d=an(t).toLowerCase().replace(/\/+$/,""),y=i?an(i).toLowerCase().replace(/\/+$/,""):null;if(y&&d.indexOf(y)!==0)return e;const g=(O,P,j)=>(j=O.indexOf(P,j))===-1?O.length:j;let _=g(l,"/",l.indexOf("//")+2),M=-1;for(;l.slice(0,_+1)===d.slice(0,_)+"/"&&(M=_+1,_!==l.length);)_=g(l,"/",_+1);if(M===-1||y&&M<y.length)return e;e=s.slice(M);const E=d.slice(M-1).replace(/[^/]+/g,"").length;if(E>0)for(let O=0;O<E;O++)e=`../${e}`;else e=`./${e}`;return e}function an(e){return e=zF(e=DF(e=LF(e=sn(e=e.trim()))))}function rl(...e){const t=e.filter(X);if(!t||!t.length)return;const i=[];if(Yr(t[0])){const l=t[0],d=l.indexOf("//");d!==-1&&(i.push(l.slice(0,d+1)),PF(t[0])&&(i[0]+="/"),t[0]=l.slice(d+2))}else t[0][0]==="/"&&i.push("");const s=t.reduce((l,d)=>d?l.concat(d.split("/")):l,[]);for(let l=0;l<s.length;l++){const d=s[l];d===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!d&&l===s.length-1||d&&(d!=="."||i.length===0))&&i.push(d)}return i.join("/")}function Hc(e,t=!1){if(ug(e)||Ku(e))return null;let i=e.indexOf("://");if(i===-1&&Wn(e))i=2;else{if(i===-1)return null;i+=3}const s=e.indexOf("/",i);return s!==-1&&(e=e.slice(0,s)),t&&(e=Ky(e,!0)),e}function Yr(e){return Wn(e)||M5(e)}function ug(e){return e!=null&&e.slice(0,5)==="blob:"}function Ku(e){return e.slice(0,5)==="data:"}function sue(e){const t=$$(e);if(!t||!t.isBase64)return null;const i=atob(t.data),s=new Uint8Array(i.length);for(let l=0;l<i.length;l++)s[l]=i.charCodeAt(l);return s.buffer}function nue(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const EF=/^data:(.*?)(;base64)?,(.*)$/;function $$(e){const t=e.match(EF);if(!t)return null;const[,i,s,l]=t;return{mediaType:i,isBase64:!!s,data:l}}function I$(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function oue(e,t){kF(e,t)||AF(e,t)}function kF(e,t){if(!e)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const s=URL.createObjectURL(e);return i.download=t,i.href=s,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s),!0}function AF(e,t){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(e,t)}function Wn(e){return e!=null&&e!==void 0&&e[0]==="/"&&e[1]==="/"}function M5(e){return v$.test(e)}function OF(e){return yF.test(e)||er.scheme==="https"&&Wn(e)}function CF(e){return b$.test(e)||er.scheme==="http"&&Wn(e)}function PF(e){return mF.test(e)}function $5(e){return Wn(e)?`https:${e}`:e.replace(b$,"https:")}function NF(){return er.scheme==="http"}function ub(){return er.scheme==="https"}function Ky(e,t=!1){return Wn(e)?e.slice(2):(e=e.replace(v$,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function jF(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function FF(e){let t=0;if(Yr(e)){const s=e.indexOf("//");s!==-1&&(t=s+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function aue(e,t){if(!e)return"";const i=Ri(e).path.replace(/\/+$/,""),s=i.substring(i.lastIndexOf("/")+1);if(t==null||!t.length)return s;const l=new RegExp(`.(${t.join("|")})$`,"ig");return s.replace(l,"")}function RF(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function T$(e){return e.replace(/\/+$/,"")}function LF(e){if(/^https?:\/\//i.test(e)){const t=_5(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function DF(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function zF(e){const t=Bc.httpsDomains;if(!CF(e))return e;const i=e.indexOf("/",7);let s;if(s=i===-1?e:e.slice(0,i),s=s.toLowerCase().slice(7),gF.test(s)){if(!s.endsWith(":80"))return e;s=s.slice(0,-3),e=e.replace(":80","")}return NF()&&s===er.authority&&!vF.test(e)||(ub()&&s===er.authority||t&&t.some(l=>s===l||s.endsWith(`.${l}`))||ub()&&!lg(e))&&(e=$5(e)),e}function hb(e,t,i){if(!(t&&i&&e&&Yr(e)))return e;const s=e.indexOf("//"),l=e.indexOf("/",s+2),d=e.indexOf(":",s+2),y=Math.min(l<0?e.length:l,d<0?e.length:d);return e.slice(s+2,y).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,s+2)}${i}${e.slice(y)}`}function cb(e){return typeof e=="string"?new fc(sn(e)):(e.scheme||(e.scheme=er.scheme),e)}function lue(e){return GF.test(e)}function E$(e,t){const i=Ri(e),s=Object.keys(i.query||{});return s.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${s.join(", ")}.`),i.path}function k$(e,t,i){const s=Ri(e),l=s.query||{};return l[t]=String(i),`${s.path}?${nd(l)}`}function g6(e,t){const i=Ri(e),s=i.query||{};for(const d in t)s[d]=t[d];const l=nd(s);return l?`${i.path}?${l}`:i.path}function uue(e){if(ce(e))return null;const t=e.match(VF);return t?t[1]:null}const VF=/.*?\.([^\/]*)$/,GF=/(^data:image\/svg|\.svg$)/i;function ke(e,t,i){let s,l;return t===void 0?(l=e,s=[void 0]):typeof t!="string"?(l=e,s=[void 0],i=t):(l=t,s=Array.isArray(e)?e:[e]),(d,y)=>{const g=d.constructor.prototype;for(const _ of s){const M=e$(d,_,l);M.write&&typeof M.write=="object"||(M.write={}),i&&(M.write.target=i),M.write.writer=g[y]}}}var Pu;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(Pu||(Pu={}));let I;const U={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(I=2e3;I<=2045;I++)U[I]=0;for(I=2056;I<=2065;I++)U[I]=0;for(I=2067;I<=2135;I++)U[I]=0;for(I=2137;I<=2154;I++)U[I]=0;for(I=2161;I<=2170;I++)U[I]=0;for(I=2172;I<=2193;I++)U[I]=0;for(I=2195;I<=2198;I++)U[I]=0;for(I=2200;I<=2203;I++)U[I]=0;for(I=2205;I<=2217;I++)U[I]=0;for(I=2222;I<=2224;I++)U[I]=1;for(I=2225;I<=2250;I++)U[I]=2;for(I=2251;I<=2253;I++)U[I]=1;for(I=2257;I<=2264;I++)U[I]=2;for(I=2274;I<=2279;I++)U[I]=2;for(I=2280;I<=2282;I++)U[I]=1;for(I=2283;I<=2289;I++)U[I]=2;for(I=2290;I<=2292;I++)U[I]=0;for(I=2308;I<=2313;I++)U[I]=0;for(I=2315;I<=2491;I++)U[I]=0;for(I=2494;I<=2866;I++)U[I]=0;for(I=2867;I<=2869;I++)U[I]=1;for(I=2870;I<=2888;I++)U[I]=2;for(I=2891;I<=2895;I++)U[I]=2;for(I=2896;I<=2898;I++)U[I]=1;for(I=2902;I<=2908;I++)U[I]=2;for(I=2915;I<=2920;I++)U[I]=2;for(I=2921;I<=2923;I++)U[I]=1;for(I=2924;I<=2930;I++)U[I]=2;for(I=2931;I<=2962;I++)U[I]=0;for(I=2964;I<=2968;I++)U[I]=2;for(I=2969;I<=2973;I++)U[I]=0;for(I=2975;I<=2991;I++)U[I]=0;for(I=2995;I<=3051;I++)U[I]=0;for(I=3054;I<=3079;I++)U[I]=0;for(I=3081;I<=3088;I++)U[I]=0;for(I=3092;I<=3101;I++)U[I]=0;for(I=3106;I<=3138;I++)U[I]=0;for(I=3146;I<=3151;I++)U[I]=0;for(I=3153;I<=3166;I++)U[I]=0;for(I=3168;I<=3172;I++)U[I]=0;for(I=3174;I<=3203;I++)U[I]=0;for(I=3294;I<=3358;I++)U[I]=0;for(I=3367;I<=3403;I++)U[I]=0;for(I=3408;I<=3416;I++)U[I]=0;for(I=3417;I<=3438;I++)U[I]=2;for(I=3441;I<=3446;I++)U[I]=2;for(I=3447;I<=3450;I++)U[I]=0;for(I=3451;I<=3459;I++)U[I]=2;for(I=3460;I<=3478;I++)U[I]=0;for(I=3554;I<=3559;I++)U[I]=0;for(I=3560;I<=3570;I++)U[I]=2;for(I=3571;I<=3581;I++)U[I]=0;for(I=3594;I<=3597;I++)U[I]=0;for(I=3601;I<=3604;I++)U[I]=0;for(I=3637;I<=3639;I++)U[I]=0;for(I=3665;I<=3667;I++)U[I]=0;for(I=3693;I<=3695;I++)U[I]=0;for(I=3701;I<=3727;I++)U[I]=0;for(I=3728;I<=3739;I++)U[I]=2;for(I=3740;I<=3751;I++)U[I]=0;for(I=3753;I<=3760;I++)U[I]=2;for(I=3761;I<=3773;I++)U[I]=0;for(I=3775;I<=3777;I++)U[I]=0;for(I=3779;I<=3781;I++)U[I]=0;for(I=3783;I<=3785;I++)U[I]=0;for(I=3788;I<=3791;I++)U[I]=0;for(I=3797;I<=3802;I++)U[I]=0;for(I=3814;I<=3816;I++)U[I]=0;for(I=3825;I<=3829;I++)U[I]=0;for(I=3832;I<=3841;I++)U[I]=0;for(I=3844;I<=3852;I++)U[I]=0;for(I=3873;I<=3885;I++)U[I]=0;for(I=3890;I<=3893;I++)U[I]=0;for(I=3907;I<=3912;I++)U[I]=0;for(I=3942;I<=3950;I++)U[I]=0;for(I=3968;I<=3970;I++)U[I]=0;for(I=3973;I<=3976;I++)U[I]=0;for(I=3986;I<=3989;I++)U[I]=0;for(I=3994;I<=3997;I++)U[I]=0;for(I=4048;I<=4051;I++)U[I]=0;for(I=4056;I<=4063;I++)U[I]=0;for(I=4093;I<=4096;I++)U[I]=0;for(I=4390;I<=4398;I++)U[I]=0;for(I=4399;I<=4413;I++)U[I]=2;for(I=4418;I<=4433;I++)U[I]=2;for(I=4455;I<=4457;I++)U[I]=2;for(I=4484;I<=4489;I++)U[I]=0;for(I=4491;I<=4554;I++)U[I]=0;for(I=4568;I<=4589;I++)U[I]=0;for(I=4652;I<=4656;I++)U[I]=0;for(I=4766;I<=4800;I++)U[I]=0;for(I=5014;I<=5016;I++)U[I]=0;for(I=5069;I<=5072;I++)U[I]=0;for(I=5105;I<=5130;I++)U[I]=0;for(I=5173;I<=5188;I++)U[I]=0;for(I=5253;I<=5259;I++)U[I]=0;for(I=5269;I<=5275;I++)U[I]=0;for(I=5292;I<=5311;I++)U[I]=0;for(I=5329;I<=5331;I++)U[I]=0;for(I=5343;I<=5349;I++)U[I]=0;for(I=5355;I<=5357;I++)U[I]=0;for(I=5387;I<=5389;I++)U[I]=0;for(I=5459;I<=5463;I++)U[I]=0;for(I=5479;I<=5482;I++)U[I]=0;for(I=5518;I<=5520;I++)U[I]=0;for(I=5530;I<=5539;I++)U[I]=0;for(I=5550;I<=5552;I++)U[I]=0;for(I=5562;I<=5583;I++)U[I]=0;for(I=5623;I<=5625;I++)U[I]=2;for(I=5631;I<=5639;I++)U[I]=0;for(I=5649;I<=5653;I++)U[I]=0;for(I=5663;I<=5680;I++)U[I]=0;for(I=5682;I<=5685;I++)U[I]=0;for(I=5875;I<=5877;I++)U[I]=0;for(I=5896;I<=5899;I++)U[I]=0;for(I=5921;I<=5940;I++)U[I]=0;for(I=6050;I<=6125;I++)U[I]=0;for(I=6244;I<=6275;I++)U[I]=0;for(I=6328;I<=6348;I++)U[I]=0;for(I=6350;I<=6356;I++)U[I]=0;for(I=6366;I<=6372;I++)U[I]=0;for(I=6381;I<=6387;I++)U[I]=0;for(I=6393;I<=6404;I++)U[I]=0;for(I=6480;I<=6483;I++)U[I]=0;for(I=6511;I<=6514;I++)U[I]=0;for(I=6579;I<=6581;I++)U[I]=0;for(I=6619;I<=6624;I++)U[I]=0;for(I=6625;I<=6627;I++)U[I]=2;for(I=6628;I<=6632;I++)U[I]=0;for(I=6634;I<=6637;I++)U[I]=0;for(I=6669;I<=6692;I++)U[I]=0;for(I=6707;I<=6709;I++)U[I]=0;for(I=6720;I<=6723;I++)U[I]=0;for(I=6732;I<=6738;I++)U[I]=0;for(I=6931;I<=6933;I++)U[I]=0;for(I=6956;I<=6959;I++)U[I]=0;for(I=7005;I<=7007;I++)U[I]=0;for(I=7057;I<=7070;I++)U[I]=2;for(I=7074;I<=7082;I++)U[I]=0;for(I=7109;I<=7118;I++)U[I]=0;for(I=7119;I<=7127;I++)U[I]=1;for(I=7374;I<=7376;I++)U[I]=0;for(I=7528;I<=7586;I++)U[I]=0;for(I=7587;I<=7645;I++)U[I]=2;for(I=7692;I<=7696;I++)U[I]=0;for(I=7755;I<=7787;I++)U[I]=0;for(I=7791;I<=7795;I++)U[I]=0;for(I=7799;I<=7801;I++)U[I]=0;for(I=7803;I<=7805;I++)U[I]=0;for(I=7825;I<=7831;I++)U[I]=0;for(I=7845;I<=7859;I++)U[I]=0;for(I=8013;I<=8032;I++)U[I]=0;for(I=8065;I<=8068;I++)U[I]=1;for(I=8518;I<=8529;I++)U[I]=2;for(I=8533;I<=8536;I++)U[I]=2;for(I=8538;I<=8540;I++)U[I]=2;for(I=8677;I<=8679;I++)U[I]=0;for(I=8836;I<=8840;I++)U[I]=0;for(I=8857;I<=8859;I++)U[I]=0;for(I=8908;I<=8910;I++)U[I]=0;for(I=9154;I<=9159;I++)U[I]=0;for(I=9205;I<=9218;I++)U[I]=0;for(I=9271;I<=9273;I++)U[I]=0;for(I=9295;I<=9297;I++)U[I]=0;for(I=9356;I<=9360;I++)U[I]=0;for(I=9404;I<=9407;I++)U[I]=0;for(I=9476;I<=9482;I++)U[I]=0;for(I=9487;I<=9494;I++)U[I]=0;for(I=9697;I<=9699;I++)U[I]=0;for(I=20002;I<=20032;I++)U[I]=0;for(I=20062;I<=20092;I++)U[I]=0;for(I=20135;I<=20138;I++)U[I]=0;for(I=20248;I<=20258;I++)U[I]=0;for(I=20348;I<=20358;I++)U[I]=0;for(I=20436;I<=20440;I++)U[I]=0;for(I=20822;I<=20824;I++)U[I]=0;for(I=20904;I<=20932;I++)U[I]=0;for(I=20934;I<=20936;I++)U[I]=0;for(I=21004;I<=21032;I++)U[I]=0;for(I=21035;I<=21037;I++)U[I]=0;for(I=21095;I<=21097;I++)U[I]=0;for(I=21148;I<=21150;I++)U[I]=0;for(I=21207;I<=21264;I++)U[I]=0;for(I=21307;I<=21364;I++)U[I]=0;for(I=21413;I<=21423;I++)U[I]=0;for(I=21453;I<=21463;I++)U[I]=0;for(I=21473;I<=21483;I++)U[I]=0;for(I=21780;I<=21782;I++)U[I]=0;for(I=21891;I<=21894;I++)U[I]=0;for(I=21896;I<=21899;I++)U[I]=0;for(I=22171;I<=22177;I++)U[I]=0;for(I=22181;I<=22187;I++)U[I]=0;for(I=22191;I<=22197;I++)U[I]=0;for(I=22234;I<=22236;I++)U[I]=0;for(I=22521;I<=22525;I++)U[I]=0;for(I=22991;I<=22994;I++)U[I]=0;for(I=23028;I<=23038;I++)U[I]=0;for(I=23830;I<=23853;I++)U[I]=0;for(I=23866;I<=23872;I++)U[I]=0;for(I=23877;I<=23884;I++)U[I]=0;for(I=23886;I<=23894;I++)U[I]=0;for(I=23946;I<=23948;I++)U[I]=0;for(I=24311;I<=24313;I++)U[I]=0;for(I=24342;I<=24347;I++)U[I]=0;for(I=24370;I<=24374;I++)U[I]=10;for(I=24375;I<=24381;I++)U[I]=0;for(I=24718;I<=24721;I++)U[I]=0;for(I=24817;I<=24821;I++)U[I]=0;for(I=24877;I<=24882;I++)U[I]=0;for(I=24891;I<=24893;I++)U[I]=0;for(I=25391;I<=25395;I++)U[I]=0;for(I=25828;I<=25838;I++)U[I]=0;for(I=26191;I<=26195;I++)U[I]=0;for(I=26391;I<=26393;I++)U[I]=0;for(I=26701;I<=26722;I++)U[I]=0;for(I=26729;I<=26799;I++)U[I]=2;for(I=26801;I<=26803;I++)U[I]=2;for(I=26811;I<=26813;I++)U[I]=2;for(I=26847;I<=26870;I++)U[I]=2;for(I=26891;I<=26899;I++)U[I]=0;for(I=26901;I<=26923;I++)U[I]=0;for(I=26929;I<=26946;I++)U[I]=0;for(I=26948;I<=26998;I++)U[I]=0;for(I=27037;I<=27040;I++)U[I]=0;for(I=27205;I<=27232;I++)U[I]=0;for(I=27258;I<=27260;I++)U[I]=0;for(I=27391;I<=27398;I++)U[I]=0;for(I=27561;I<=27564;I++)U[I]=0;for(I=27571;I<=27574;I++)U[I]=0;for(I=27581;I<=27584;I++)U[I]=0;for(I=27591;I<=27594;I++)U[I]=0;for(I=28191;I<=28193;I++)U[I]=0;for(I=28348;I<=28358;I++)U[I]=0;for(I=28402;I<=28432;I++)U[I]=0;for(I=28462;I<=28492;I++)U[I]=0;for(I=29118;I<=29122;I++)U[I]=0;for(I=29168;I<=29172;I++)U[I]=0;for(I=29177;I<=29185;I++)U[I]=0;for(I=29187;I<=29195;I++)U[I]=0;for(I=29900;I<=29903;I++)U[I]=0;for(I=30161;I<=30179;I++)U[I]=0;for(I=30491;I<=30494;I++)U[I]=0;for(I=30729;I<=30732;I++)U[I]=0;for(I=31251;I<=31259;I++)U[I]=0;for(I=31265;I<=31268;I++)U[I]=0;for(I=31275;I<=31279;I++)U[I]=0;for(I=31281;I<=31297;I++)U[I]=0;for(I=31461;I<=31469;I++)U[I]=0;for(I=31491;I<=31495;I++)U[I]=0;for(I=31917;I<=31922;I++)U[I]=0;for(I=31965;I<=32e3;I++)U[I]=0;for(I=32001;I<=32003;I++)U[I]=2;for(I=32005;I<=32031;I++)U[I]=2;for(I=32033;I<=32060;I++)U[I]=2;for(I=32064;I<=32067;I++)U[I]=2;for(I=32074;I<=32077;I++)U[I]=2;for(I=32081;I<=32086;I++)U[I]=0;for(I=32107;I<=32130;I++)U[I]=0;for(I=32133;I<=32158;I++)U[I]=0;for(I=32164;I<=32167;I++)U[I]=2;for(I=32180;I<=32199;I++)U[I]=0;for(I=32201;I<=32260;I++)U[I]=0;for(I=32301;I<=32360;I++)U[I]=0;for(I=32601;I<=32662;I++)U[I]=0;for(I=32664;I<=32667;I++)U[I]=2;for(I=32701;I<=32761;I++)U[I]=0;for(I=53001;I<=53004;I++)U[I]=0;for(I=53008;I<=53019;I++)U[I]=0;for(I=53021;I<=53032;I++)U[I]=0;for(I=53034;I<=53037;I++)U[I]=0;for(I=53042;I<=53046;I++)U[I]=0;for(I=53074;I<=53080;I++)U[I]=0;for(I=54001;I<=54004;I++)U[I]=0;for(I=54008;I<=54019;I++)U[I]=0;for(I=54021;I<=54032;I++)U[I]=0;for(I=54034;I<=54037;I++)U[I]=0;for(I=54042;I<=54046;I++)U[I]=0;for(I=54048;I<=54053;I++)U[I]=0;for(I=54074;I<=54080;I++)U[I]=0;for(I=54098;I<=54101;I++)U[I]=0;for(I=102001;I<=102040;I++)U[I]=0;for(I=102042;I<=102063;I++)U[I]=0;for(I=102065;I<=102067;I++)U[I]=0;for(I=102070;I<=102117;I++)U[I]=0;for(I=102122;I<=102216;I++)U[I]=0;for(I=102221;I<=102377;I++)U[I]=0;for(I=102382;I<=102388;I++)U[I]=0;for(I=102389;I<=102398;I++)U[I]=2;for(I=102399;I<=102444;I++)U[I]=0;for(I=102445;I<=102447;I++)U[I]=2;for(I=102448;I<=102458;I++)U[I]=0;for(I=102459;I<=102468;I++)U[I]=2;for(I=102469;I<=102499;I++)U[I]=0;for(I=102500;I<=102519;I++)U[I]=1;for(I=102520;I<=102524;I++)U[I]=0;for(I=102525;I<=102529;I++)U[I]=2;for(I=102530;I<=102588;I++)U[I]=0;for(I=102590;I<=102598;I++)U[I]=0;for(I=102601;I<=102603;I++)U[I]=0;for(I=102605;I<=102628;I++)U[I]=0;for(I=102629;I<=102646;I++)U[I]=2;for(I=102648;I<=102700;I++)U[I]=2;for(I=102701;I<=102703;I++)U[I]=0;for(I=102707;I<=102730;I++)U[I]=2;for(I=102733;I<=102758;I++)U[I]=2;for(I=102767;I<=102900;I++)U[I]=0;for(I=102901;I<=102933;I++)U[I]=2;for(I=102934;I<=102950;I++)U[I]=13;for(I=102951;I<=102960;I++)U[I]=0;for(I=102965;I<=102969;I++)U[I]=0;for(I=102971;I<=102973;I++)U[I]=0;for(I=102975;I<=102989;I++)U[I]=0;for(I=102990;I<=102992;I++)U[I]=1;for(I=102997;I<=103002;I++)U[I]=0;for(I=103003;I<=103008;I++)U[I]=2;for(I=103009;I<=103011;I++)U[I]=0;for(I=103012;I<=103014;I++)U[I]=2;for(I=103019;I<=103021;I++)U[I]=0;for(I=103022;I<=103024;I++)U[I]=2;for(I=103029;I<=103031;I++)U[I]=0;for(I=103032;I<=103034;I++)U[I]=2;for(I=103065;I<=103068;I++)U[I]=0;for(I=103074;I<=103076;I++)U[I]=0;for(I=103077;I<=103079;I++)U[I]=1;for(I=103080;I<=103082;I++)U[I]=0;for(I=103083;I<=103085;I++)U[I]=2;for(I=103090;I<=103093;I++)U[I]=0;for(I=103097;I<=103099;I++)U[I]=0;for(I=103100;I<=103102;I++)U[I]=2;for(I=103107;I<=103109;I++)U[I]=0;for(I=103110;I<=103112;I++)U[I]=2;for(I=103113;I<=103116;I++)U[I]=0;for(I=103117;I<=103120;I++)U[I]=2;for(I=103153;I<=103157;I++)U[I]=0;for(I=103158;I<=103162;I++)U[I]=2;for(I=103163;I<=103165;I++)U[I]=0;for(I=103166;I<=103168;I++)U[I]=1;for(I=103169;I<=103171;I++)U[I]=2;for(I=103186;I<=103188;I++)U[I]=0;for(I=103189;I<=103191;I++)U[I]=2;for(I=103192;I<=103195;I++)U[I]=0;for(I=103196;I<=103199;I++)U[I]=2;for(I=103200;I<=103224;I++)U[I]=0;for(I=103225;I<=103227;I++)U[I]=1;for(I=103232;I<=103237;I++)U[I]=0;for(I=103238;I<=103243;I++)U[I]=2;for(I=103244;I<=103246;I++)U[I]=0;for(I=103247;I<=103249;I++)U[I]=2;for(I=103254;I<=103256;I++)U[I]=0;for(I=103257;I<=103259;I++)U[I]=2;for(I=103264;I<=103266;I++)U[I]=0;for(I=103267;I<=103269;I++)U[I]=2;for(I=103300;I<=103375;I++)U[I]=0;for(I=103381;I<=103383;I++)U[I]=0;for(I=103384;I<=103386;I++)U[I]=1;for(I=103387;I<=103389;I++)U[I]=0;for(I=103390;I<=103392;I++)U[I]=2;for(I=103397;I<=103399;I++)U[I]=0;for(I=103400;I<=103471;I++)U[I]=2;for(I=103476;I<=103478;I++)U[I]=0;for(I=103479;I<=103481;I++)U[I]=2;for(I=103486;I<=103488;I++)U[I]=0;for(I=103489;I<=103491;I++)U[I]=2;for(I=103492;I<=103495;I++)U[I]=0;for(I=103496;I<=103499;I++)U[I]=2;for(I=103528;I<=103543;I++)U[I]=0;for(I=103544;I<=103548;I++)U[I]=2;for(I=103549;I<=103551;I++)U[I]=0;for(I=103552;I<=103554;I++)U[I]=1;for(I=103555;I<=103557;I++)U[I]=2;for(I=103558;I<=103560;I++)U[I]=0;for(I=103571;I<=103573;I++)U[I]=0;for(I=103574;I<=103576;I++)U[I]=2;for(I=103577;I<=103580;I++)U[I]=0;for(I=103581;I<=103583;I++)U[I]=2;for(I=103595;I<=103694;I++)U[I]=0;for(I=103696;I<=103699;I++)U[I]=0;for(I=103700;I<=103793;I++)U[I]=2;for(I=103794;I<=103872;I++)U[I]=0;for(I=103900;I<=103971;I++)U[I]=2;const qF={102113:!0,102100:!0,3857:!0,3785:!0},UF={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0},v6='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',xf=[-20037508342788905e-9,20037508342788905e-9],Sf=[-20037508342787e-6,20037508342787e-6],A$={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:xf,origin:Sf,dx:1e-5},102100:{wkTemplate:v6,valid:xf,origin:Sf,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:xf,origin:Sf,dx:1e-5},3857:{wkTemplate:v6,valid:xf,origin:Sf,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function jr(e,t){return!ce(e)&&!ce(t)&&(e===t||(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||Nu(e)&&Nu(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function ln(e){return Cr(e)&&e.wkid?A$[e.wkid]:null}function O$(e){return!!Cr(e)&&(e.wkid?U[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function BF(e){return!(hg(e)||cg(e))}function od(e){return Cr(e)&&e.wkid===4326}function hue(e){return Cr(e)&&e.wkid===Pu.CGCS2000}function Nu(e){return Cr(e)&&e.wkid!=null&&qF[e.wkid]===!0}function HF(e){return Cr(e)&&e.wkid===32662}function I5(e){return e===Pu.GCSMARS2000||e===Pu.GCSMARS2000_SPHERE}function hg(e){return Cr(e)&&e.wkid!=null&&I5(e.wkid)}function T5(e){return e===Pu.GCSMOON2000}function cg(e){return Cr(e)&&e.wkid!=null&&T5(e.wkid)}function WF(e){return Cr(e)&&e.wkid!=null&&UF[e.wkid]===!0}function Cr(e){return X(e)&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const JF={wkid:4326,wkt:Un(A$[4326].wkTemplate,{Central_Meridian:"0.0"})},KF={wkid:102100,latestWkid:3857},YF={wkid:32662};var bn;let kt=bn=class extends ge{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return bn.WebMercator;if(e.wkid===4326)return bn.WGS84}const t=new bn;return t.read(e),t}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return od(this)}get isWebMercator(){return Nu(this)}get isGeographic(){return O$(this)}get isWrappable(){return WF(this)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===bn.WGS84)return bn.WGS84;if(this===bn.WebMercator)return bn.WebMercator;const e=new bn;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=le(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:s}=e.imageCoordinateSystem,l=this.imageCoordinateSystem;return t==null||s?JSON.stringify(l)===JSON.stringify(e.imageCoordinateSystem):i?l.id===t&&l.referenceServiceName===i:l.id===t}return jr(this,e)}toJSON(e){return this.write(void 0,e)}};kt.GCS_NAD_1927=null,kt.WGS84=null,kt.WebMercator=null,kt.PlateCarree=null,b([S({readOnly:!0})],kt.prototype,"isWGS84",null),b([S({readOnly:!0})],kt.prototype,"isWebMercator",null),b([S({readOnly:!0})],kt.prototype,"isGeographic",null),b([S({readOnly:!0})],kt.prototype,"isWrappable",null),b([S({type:Lt,json:{write:!0}})],kt.prototype,"latestWkid",void 0),b([S({type:Lt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],kt.prototype,"wkid",void 0),b([S({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],kt.prototype,"wkt",void 0),b([ke("wkt"),ke("web-scene","wkt")],kt.prototype,"writeWkt",null),b([S({type:Lt,json:{write:!0}})],kt.prototype,"vcsWkid",void 0),b([S({type:Lt,json:{write:!0}})],kt.prototype,"latestVcsWkid",void 0),b([S()],kt.prototype,"imageCoordinateSystem",void 0),kt=bn=b([H("esri.geometry.SpatialReference")],kt),kt.prototype.toJSON.isDefaultToJSON=!0,kt.GCS_NAD_1927=new kt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),kt.WGS84=new kt(JF),kt.WebMercator=new kt(KF),kt.PlateCarree=new kt(YF),Object.freeze&&(Object.freeze(kt.GCS_NAD_1927),Object.freeze(kt.WGS84),Object.freeze(kt.WebMercator));const it=kt,C$="20220404",P$="ecb69ff5e08a61c162de0ddc0b1f397ed5d4071b",N$="4.23",XF={async request(e,t){var i;const{default:s}=await Promise.resolve().then(function(){return pR}),l=e.options,d=l.responseType;l.signal=t==null?void 0:t.signal,l.responseType=d==="native"||d==="native-request-init"?"native-request-init":["blob","json","text"].includes(d)&&(i=M$(e.url))!=null&&i.after?d:"array-buffer";const y=await s(e.url,l),g={data:y.data,ssl:y.ssl};switch(y.requestOptions.responseType){case"native-request-init":return delete g.data.signal,g;case"blob":g.data=await g.data.arrayBuffer();break;case"json":g.data=new TextEncoder().encode(JSON.stringify(g.data)).buffer;break;case"text":g.data=new TextEncoder().encode(g.data).buffer}return{result:g,transferList:[g.data]}}};let ci;function cue(e){ci=e}function ZF(e){const t=ci&&ci.findCredential(e);return t&&t.token?k$(e,"token",t.token):e}de("host-webworker")||(de("edge")||de("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");const QF=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function j$(e){const t=Hc(e,!0);return t&&t.endsWith(".arcgis.com")&&!QF.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function eR(e,t,i=!1,s){return new Promise((l,d)=>{if(Bn(s))return void d(b6());let y=()=>{M(),d(new Error(`Unable to load ${t}`))},g=()=>{const E=e;M(),l(E)},_=()=>{if(!e)return;const E=e;M(),E.src="",d(b6())};const M=()=>{de("esri-image-decode")||(e.removeEventListener("error",y),e.removeEventListener("load",g)),y=null,g=null,e=null,X(s)&&s.removeEventListener("abort",_),_=null,i&&URL.revokeObjectURL(t)};X(s)&&s.addEventListener("abort",_),de("esri-image-decode")?e.decode().then(g,y):(e.addEventListener("error",y),e.addEventListener("load",g))})}function b6(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}async function Ht(e,t){var i;const s=Ku(e),l=ug(e);l||s||(e=an(e));const d={url:e,requestOptions:J({},t)};let y=M$(e);if(y){const E=await lR(y,d);if(E!=null)return{data:E,getHeader:E5,requestOptions:d.requestOptions,url:d.url};y.after||y.error||(y=null)}if(e=d.url,(t=d.requestOptions).responseType==="image"){if(de("host-webworker")||de("host-node"))throw nn("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),d)}else if(s)throw nn("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),d);if(t.method==="head"){if(t.body)throw nn("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),d);if(s||l)throw nn("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),d)}if(await nR(),Yy)return Yy.execute(e,t);const g=new AbortController;cn(t,()=>g.abort());const _={controller:g,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:y,params:d,redoRequest:!1,useIdentity:Ao.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},M=await hR(_);return(i=y)==null||i.after==null||i.after(M),M}let Yy;const Ao=Ct.request,F$="FormData"in globalThis,tR=[499,498,403,401],iR=["COM_0056","COM_0057","SB_0008"],rR=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],E5=()=>null,pb=Symbol();function sR(e){const t=Hc(e);t&&!Ht._corsServers.includes(t)&&Ht._corsServers.push(t)}function w6(e){const t=Hc(e);return!t||t.endsWith(".arcgis.com")||Ht._corsServers.includes(t)||x5(t)}function nn(e,t,i,s){let l="Error";const d={url:i.url,requestOptions:i.requestOptions,getHeader:E5,ssl:!1};if(t instanceof re)return t.details?(t.details=le(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=d,t;if(t){const y=s&&(M=>s.headers.get(M)),g=s&&s.status,_=t.message;_&&(l=_),y&&(d.getHeader=y),d.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||g||0,d.subCode=t.subcode,d.messageCode=t.messageCode,typeof t.details=="string"?d.messages=[t.details]:d.messages=t.details,d.raw=pb in t?t[pb]:t}return ks(t)?yi():new re(e,l,d)}async function nR(){de("host-webworker")?Yy||(Yy=await import("./request.7d8d77b3.js")):Ht._abortableFetch||(Ht._abortableFetch=globalThis.fetch.bind(globalThis))}async function db(){ci||await import("./IdentityManager.490c4d2f.js")}async function oR(e){const t=e.params.url,i=e.params.requestOptions,s=e.controller.signal,l=i.body;let d=null,y=null,g=null;if(F$&&"HTMLFormElement"in globalThis&&(l instanceof FormData?d=l:l instanceof HTMLFormElement&&(y=l,d=new FormData(y))),typeof l=="string"&&(g=l),e.fetchOptions={cache:i.cacheBust&&!Ht._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",redirect:"follow",signal:s},(d||g)&&(e.fetchOptions.body=d||g),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||i.query&&i.query.token||d&&d.get&&d.get("token")||y&&y.elements.token),!e.hasToken&&Ct.apiKey&&j$(t)&&(i.query||(i.query={}),i.query.token=Ct.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!R$(t)&&!Bn(s)){let _;i.authMode==="immediate"?(await db(),_=await ci.getCredential(t,{signal:s}),e.credential=_):i.authMode==="no-prompt"?(await db(),_=await ci.getCredential(t,{prompt:!1,signal:s}).catch(()=>{}),e.credential=_):ci&&(_=ci.findCredential(t)),_&&(e.credentialToken=_.token,e.useSSL=!!_.ssl)}}function R$(e){return rR.some(t=>t.test(e))}async function aR(e){let t=e.params.url;const i=e.params.requestOptions,s=e.fetchOptions,l=ug(t)||Ku(t),d=i.responseType||"json",y=l?0:i.timeout!=null?i.timeout:Ao.timeout;let g=!1;if(!l){e.useSSL&&(t=$5(t)),i.cacheBust&&s.cache==="default"&&(t=k$(t,"request.preventCache",Date.now()));let P=J({},i.query);e.credentialToken&&(P.token=e.credentialToken);let j=nd(P);de("esri-url-encodes-apostrophe")&&(j=j.replace(/'/g,"%27"));const R=t.length+1+j.length;let z;g=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||R>Ao.maxUrlLength;const q=i.useProxy||!!lg(t);if(q){const Y=MF(t);z=Y.path,!g&&z.length+1+R>Ao.maxUrlLength&&(g=!0),Y.query&&(P=J(J({},Y.query),P))}if(s.method==="HEAD"&&(g||q)){if(g)throw R>Ao.maxUrlLength?nn("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):nn("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(q)throw nn("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(g?(s.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=g6(t,P):(s.body=nd(P),s.headers["Content-Type"]="application/x-www-form-urlencoded")):t=g6(t,P),q&&(e.useProxy=!0,t=`${z}?${t}`),P.token&&F$&&s.body instanceof FormData){const Y=s.body;Y.set?Y.set("token",P.token):Y.append("token",P.token)}if(i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!Jy(t,w$())){if(x5(t))e.withCredentials=!0;else if(ci){const Y=ci.findServerInfo(t);Y&&Y.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(s.credentials="include")}let _,M,E=0,O=!1;y>0&&(E=setTimeout(()=>{O=!0,e.controller.abort()},y));try{if(i.responseType==="native-request-init")M=s,M.url=t;else if(i.responseType!=="image"||s.cache!=="default"||s.method!=="GET"||g||uR(i.headers)||!l&&!e.useProxy&&Ao.proxyUrl&&!w6(t)){if(_=await Ht._abortableFetch(t,s),e.useProxy||sR(t),i.responseType==="native")M=_;else if(s.method!=="HEAD")if(_.ok){switch(d){case"array-buffer":M=await _.arrayBuffer();break;case"blob":case"image":M=await _.blob();break;default:M=await _.text()}if(E&&(clearTimeout(E),E=0),d==="json"||d==="xml"||d==="document")if(M)switch(d){case"json":M=JSON.parse(M);break;case"xml":M=_6(M,"application/xml");break;case"document":M=_6(M,"text/html")}else M=null;if(M){if(d==="array-buffer"||d==="blob"){const P=_.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(P)&&M[d==="blob"?"size":"byteLength"]<=750)try{const j=await new Response(M).json();j.error&&(M=j)}catch{}}d==="image"&&M instanceof Blob&&(M=await x6(URL.createObjectURL(M),e,!0))}}else M=await _.text()}else M=await x6(t,e)}catch(P){if(P.name==="AbortError")throw O?new Error("Timeout exceeded"):yi("Request canceled");if(!(!_&&P instanceof TypeError&&Ao.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||w6(t))throw P;e.redoRequest=!0,IF({proxyUrl:Ao.proxyUrl,urlPrefix:Hc(t)})}finally{E&&clearTimeout(E)}return[_,M]}async function lR(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers=J(J({},t.requestOptions.headers),e.headers)),e.query&&(t.requestOptions.query=J(J({},t.requestOptions.query),e.query)),e.before){let i,s;try{s=await e.before(t)}catch(l){i=nn("request:interceptor",l,t)}if((s instanceof Error||s instanceof re)&&(i=nn("request:interceptor",s,t)),i)throw e.error&&e.error(i),i;return s}}function uR(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function _6(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function hR(e){var t,i;let s,l;await oR(e);try{do[s,l]=await aR(e);while(!await cR(e,s,l))}catch(g){const _=nn("request:server",g,e.params,s);throw _.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(_),_}const d=e.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(d)&&!e.hasToken&&!e.credentialToken&&(t=l)!=null&&(i=t.user)!=null&&i.username&&!x5(d)){const g=Hc(d,!0);g&&Ao.trustedServers.push(g)}const y=e.credential;if(y&&ci){const g=ci.findServerInfo(y.server);let _=g&&g.owningSystemUrl;if(_){_=_.replace(/\/?$/,"/sharing");const M=ci.findCredential(_,y.userId);M&&ci._getIdenticalSvcIdx(_,M)===-1&&M.resources.unshift(_)}}return{data:l,getHeader:s?g=>s.headers.get(g):E5,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function cR(e,t,i){if(e.redoRequest)return e.redoRequest=!1,!1;const s=e.params.requestOptions;if(!t||s.responseType==="native"||s.responseType==="native-request-init")return!0;let l,d,y,g;if(!t.ok)throw l=new Error(`Unable to load ${t.url} status: ${t.status}`),l[pb]=i,l;i!=null&&i.error&&(l=i.error),l&&(d=Number(l.code),y=l.hasOwnProperty("subcode")?Number(l.subcode):null,g=l.messageCode,g=g&&g.toUpperCase());const _=s.authMode;if(d===403&&(y===4||l.message&&l.message.toLowerCase().indexOf("ssl")>-1&&l.message.toLowerCase().indexOf("permission")===-1)){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(_!=="no-prompt"||d===498)&&tR.indexOf(d)!==-1&&!R$(e.params.url)&&(d!==403||iR.indexOf(g)===-1&&(y==null||y===2&&e.credentialToken))){await db();try{const M=await ci.getCredential(e.params.url,{error:nn("request:server",l,e.params),prompt:_!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=M,e.credentialToken=M.token,e.useSSL=e.useSSL||M.ssl,!1}catch(M){if(_==="no-prompt")return e.credential=null,e.credentialToken=null,!1;l=M}}if(l)throw l;return!0}function x6(e,t,i=!1){const s=t.controller.signal,l=new Image;return t.withCredentials?l.crossOrigin="use-credentials":l.crossOrigin="anonymous",l.alt="",l.src=e,eR(l,e,i,s)}Ht._abortableFetch=null,Ht._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];var pR=Object.freeze(Object.defineProperty({__proto__:null,default:Ht},Symbol.toStringTag,{value:"Module"}));function $e(e,t,i){let s,l;return t===void 0||Array.isArray(t)?(l=e,i=t,s=[void 0]):(l=t,s=Array.isArray(e)?e:[e]),(d,y)=>{const g=d.constructor.prototype;s.forEach(_=>{const M=e$(d,_,l);M.read&&typeof M.read=="object"||(M.read={}),M.read.reader=g[y],i&&(M.read.source=(M.read.source||[]).concat(i))})}}let wn=class extends ge{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=it.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof it)return e;if(e!=null){const i=new it;return i.read(e,t),i}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};b([S()],wn.prototype,"type",void 0),b([S({readOnly:!0})],wn.prototype,"cache",null),b([S({readOnly:!0})],wn.prototype,"extent",null),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],wn.prototype,"hasM",void 0),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],wn.prototype,"hasZ",void 0),b([S({type:it,json:{write:!0}})],wn.prototype,"spatialReference",void 0),b([$e("spatialReference")],wn.prototype,"readSpatialReference",null),wn=b([H("esri.geometry.Geometry")],wn);const Pr=wn,dR=Object.prototype.toString;function fR(e){const t="__accessorMetadata__"in e?gi(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return yR.apply(this,i)}}function yR(e,t,i,s){Xm(e,t).cast=s}function mR(e){return function(t,i){Xm(t,e).cast=t[i]}}function yt(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&dR.call(e[0])==="[object Function]"?fR(e[0]):e.length===1&&typeof e[0]=="string"?mR(e[0]):void 0}function gR(e,t,i,s){var l;return e.x=e.x+t,e.y=e.y+i,s!=null&&(e.z=((l=e.z)!=null?l:0)+s),e}function vR(e,t){const i=e.x-t.x,s=e.y-t.y,l=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(i*i+s*s+l*l)}class k5{constructor(t,i,s,l){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=s;const d=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*d,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=l||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const Vt=new k5(6378137,1/298.257223563,3e5,.006694379990137799),Lo=new k5(3396190,1/169.8944472236118,23e4),sl=new k5(1737400,0,0),bR=57.29577951308232,wR=.017453292519943;function S6(e){return e*bR}function M6(e){return e*wR}function pue(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Vt.radius))}function fb(e){return e.wkid!=null||e.wkt!=null}const wv=[0,0];function Xy(e,t,i,s,l){const d=e,y=l;if(y.spatialReference=i,"x"in d&&"x"in y)[y.x,y.y]=t(d.x,d.y,wv,s);else if("xmin"in d&&"xmin"in y)[y.xmin,y.ymin]=t(d.xmin,d.ymin,wv,s),[y.xmax,y.ymax]=t(d.xmax,d.ymax,wv,s);else if("paths"in d&&"paths"in y||"rings"in d&&"rings"in y){const g="paths"in d?d.paths:d.rings,_=[];let M;for(let E=0;E<g.length;E++){const O=g[E];M=[],_.push(M);for(let P=0;P<O.length;P++)M.push(t(O[P][0],O[P][1],[0,0],s)),O[P].length>2&&M[P].push(O[P][2]),O[P].length>3&&M[P].push(O[P][3])}"paths"in y?y.paths=_:y.rings=_}else if("points"in d&&"points"in y){const g=d.points,_=[];for(let M=0;M<g.length;M++)_[M]=t(g[M][0],g[M][1],[0,0],s),g[M].length>2&&_[M].push(g[M][2]),g[M].length>3&&_[M].push(g[M][3]);y.points=_}return l}function x1(e,t){const i=e&&(fb(e)?e:e.spatialReference),s=t&&(fb(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!s)&&(!!jr(s,i)||Nu(s)&&od(i)||Nu(i)&&od(s))}function pg(e,t){if(ce(e))return null;const i=e.spatialReference,s=t&&(fb(t)?t:t.spatialReference);return x1(i,s)?jr(i,s)?le(e):Nu(s)?Xy(e,tc,it.WebMercator,!1,le(e)):od(s)?Xy(e,F0,it.WGS84,!1,le(e)):null:null}function tc(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const s=M6(t);return i[0]=M6(e)*Vt.radius,i[1]=Vt.halfSemiMajorAxis*Math.log((1+Math.sin(s))/(1-Math.sin(s))),i}function F0(e,t,i=[0,0],s=!1){const l=S6(e/Vt.radius);return i[0]=s?l:l-360*Math.floor((l+180)/360),i[1]=S6(Math.PI/2-2*Math.atan(Math.exp(-t/Vt.radius))),i}function Qa(e,t=!1,i=le(e)){return Xy(e,tc,it.WebMercator,t,i)}function zp(e,t=!1,i=le(e)){return Xy(e,F0,it.WGS84,t,i)}var S1;const mp=[0,0];function $6(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}const Mf=Se.getLogger("esri.geometry.Point");let ir=S1=class extends Pr{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(i)?i:i.clone())}normalizeCtorArgs(e,t,i,s,l){let d;if(Array.isArray(e))d=e,l=t,e=d[0],t=d[1],i=d[2],s=d[3];else if(e&&typeof e=="object"){if(d=e,e=d.x!=null?d.x:d.longitude,t=d.y!=null?d.y:d.latitude,i=d.z,s=d.m,(l=d.spatialReference)&&l.declaredClass!=="esri.geometry.SpatialReference"&&(l=new it(l)),d.longitude!=null||d.latitude!=null){if(d.longitude==null)Mf.warn(".longitude=","Latitude was defined without longitude");else if(d.latitude==null)Mf.warn(".latitude=","Longitude was defined without latitude");else if(!d.declaredClass&&l&&l.isWebMercator){const g=tc(d.longitude,d.latitude,mp);e=g[0],t=g[1]}}}else $6(i)?(l=i,i=null):$6(s)&&(l=s,s=null);const y={x:e,y:t};return y.x==null&&y.y!=null?Mf.warn(".y=","Y coordinate was defined without an X coordinate"):y.y==null&&y.x!=null&&Mf.warn(".x=","X coordinate was defined without a Y coordinate"),l!=null&&(y.spatialReference=l),i!=null&&(y.z=i),s!=null&&(y.m=s),y}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:i}=this;if(e){if(e.isWebMercator)return F0(t,i,mp)[1];if(e.isGeographic)return i}return null}set latitude(e){const{spatialReference:t,x:i}=this;t&&(t.isWebMercator?this._set("y",tc(i,e,mp)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:i}=this;if(i){if(i.isWebMercator)return F0(e,t,mp)[0];if(i.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:i}=this;i&&(i.isWebMercator?this._set("x",tc(e,t,mp)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new S1;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return S1.copy(e,this),this}equals(e){if(ce(e))return!1;const{x:t,y:i,z:s,m:l,spatialReference:d}=this,{z:y,m:g}=e;let{x:_,y:M,spatialReference:E}=e;if(!d.equals(E))if(d.isWebMercator&&E.isWGS84)[_,M]=tc(_,M),E=d;else{if(!d.isWGS84||!E.isWebMercator)return!1;[_,M]=F0(_,M),E=d}return t===_&&i===M&&s===y&&l===g&&d.wkid===E.wkid}offset(e,t,i){return gR(this,e,t,i)}normalize(){if(!this.spatialReference)return this;const e=ln(this.spatialReference);if(!e)return this;let t=this.x;const[i,s]=e.valid,l=2*s;let d;return t>s?(d=Math.ceil(Math.abs(t-s)/l),t-=d*l):t<i&&(d=Math.ceil(Math.abs(t-i)/l),t+=d*l),this._set("x",t),this}distance(e){return vR(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};b([S({readOnly:!0})],ir.prototype,"cache",null),b([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ir.prototype,"hasM",null),b([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ir.prototype,"hasZ",null),b([S({type:Number})],ir.prototype,"latitude",null),b([S({type:Number})],ir.prototype,"longitude",null),b([S({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),yt(e=>isNaN(e)?e:_s(e))],ir.prototype,"x",void 0),b([ke("x")],ir.prototype,"writeX",null),b([$e("x")],ir.prototype,"readX",null),b([S({type:Number,json:{write:!0}})],ir.prototype,"y",void 0),b([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ir.prototype,"z",void 0),b([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],ir.prototype,"m",void 0),ir=S1=b([H("esri.geometry.Point")],ir),ir.prototype.toJSON.isDefaultToJSON=!0;const Be=ir,_v=[0,0];function dg(e,t){return!!X(t)&&or(e,t.x,t.y,t.z)}function due(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!$c(e,i))return!1;return!0}function _R(e,t){const{xmin:i,ymin:s,zmin:l,xmax:d,ymax:y,zmax:g}=t;return e.hasZ&&t.hasZ?or(e,i,s,l)&&or(e,i,y,l)&&or(e,d,y,l)&&or(e,d,s,l)&&or(e,i,s,g)&&or(e,i,y,g)&&or(e,d,y,g)&&or(e,d,s,g):or(e,i,s)&&or(e,i,y)&&or(e,d,y)&&or(e,d,s)}function $c(e,t){return or(e,t[0],t[1])}function xR(e,t){return or(e,t[0],t[1],t[2])}function or(e,t,i,s){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(s==null||!e.hasZ||s>=e.zmin&&s<=e.zmax)}function L$(e,t){return _v[1]=t.y,_v[0]=t.x,D$(e,_v)}function D$(e,t){return SR(e.rings,t)}function SR(e,t){if(!e)return!1;if(MR(e))return I6(!1,e,t);let i=!1;for(let s=0,l=e.length;s<l;s++)i=I6(i,e[s],t);return i}function MR(e){return!Array.isArray(e[0][0])}function I6(e,t,i){const[s,l]=i;let d=e,y=0;for(let g=0,_=t.length;g<_;g++){y++,y===_&&(y=0);const[M,E]=t[g],[O,P]=t[y];(E<l&&P>=l||P<l&&E>=l)&&M+(l-E)/(P-E)*(O-M)<s&&(d=!d)}return d}function $R(e,t){return dg(e,t)}function IR(e,t){const i=e.hasZ&&t.hasZ;let s,l,d;if(e.xmin<=t.xmin){if(s=t.xmin,e.xmax<s)return!1}else if(s=e.xmin,t.xmax<s)return!1;if(e.ymin<=t.ymin){if(l=t.ymin,e.ymax<l)return!1}else if(l=e.ymin,t.ymax<l)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(d=t.zmin,e.zmax<d)return!1}else if(d=e.zmin,t.zmax<d)return!1}return!0}function TR(e,t){const{points:i,hasZ:s}=t,l=s?xR:$c;for(const d of i)if(l(e,d))return!0;return!1}const ju=[0,0],Fu=[0,0],Ru=[0,0],Lu=[0,0],ER=[ju,Fu,Ru,Lu],z$=[[Ru,ju],[ju,Fu],[Fu,Lu],[Lu,Ru]];function kR(e,t){ju[0]=e.xmin,ju[1]=e.ymax,Fu[0]=e.xmax,Fu[1]=e.ymax,Ru[0]=e.xmin,Ru[1]=e.ymin,Lu[0]=e.xmax,Lu[1]=e.ymin;for(const i of ER)if(D$(t,i))return!0;for(const i of t.rings){if(!i.length)continue;let s=i[0];if($c(e,s))return!0;for(let l=1;l<i.length;l++){const d=i[l];if($c(e,d)||V$(s,d,z$))return!0;s=d}}return!1}function AR(e,t){ju[0]=e.xmin,ju[1]=e.ymax,Fu[0]=e.xmax,Fu[1]=e.ymax,Ru[0]=e.xmin,Ru[1]=e.ymin,Lu[0]=e.xmax,Lu[1]=e.ymin;const i=t.paths;for(const s of i){if(!i.length)continue;let l=s[0];if($c(e,l))return!0;for(let d=1;d<s.length;d++){const y=s[d];if($c(e,y)||V$(l,y,z$))return!0;l=y}}return!1}const Pi=[0,0];function OR(e){for(let t=0;t<e.length;t++){const i=e[t];for(let l=0;l<i.length-1;l++){const d=i[l],y=i[l+1];for(let g=t+1;g<e.length;g++)for(let _=0;_<e[g].length-1;_++){const M=e[g][_],E=e[g][_+1];if(yb(d,y,M,E,Pi)&&!(Pi[0]===d[0]&&Pi[1]===d[1]||Pi[0]===M[0]&&Pi[1]===M[1]||Pi[0]===y[0]&&Pi[1]===y[1]||Pi[0]===E[0]&&Pi[1]===E[1]))return!0}}const s=i.length;if(!(s<=4))for(let l=0;l<s-3;l++){let d=s-1;l===0&&(d=s-2);const y=i[l],g=i[l+1];for(let _=l+2;_<d;_++){const M=i[_],E=i[_+1];if(yb(y,g,M,E,Pi)&&!(Pi[0]===y[0]&&Pi[1]===y[1]||Pi[0]===M[0]&&Pi[1]===M[1]||Pi[0]===g[0]&&Pi[1]===g[1]||Pi[0]===E[0]&&Pi[1]===E[1]))return!0}}}return!1}function V$(e,t,i){for(let s=0;s<i.length;s++)if(yb(e,t,i[s][0],i[s][1]))return!0;return!1}function yb(e,t,i,s,l){const[d,y]=e,[g,_]=t,[M,E]=i,[O,P]=s,j=O-M,R=d-M,z=g-d,q=P-E,Y=y-E,te=_-y,ne=q*z-j*te;if(ne===0)return!1;const he=(j*Y-q*R)/ne,se=(z*Y-te*R)/ne;return he>=0&&he<=1&&se>=0&&se<=1&&(l&&(l[0]=d+he*(g-d),l[1]=y+he*(_-y)),!0)}function CR(e){switch(e){case"esriGeometryEnvelope":case"extent":return IR;case"esriGeometryMultipoint":case"multipoint":return TR;case"esriGeometryPoint":case"point":return $R;case"esriGeometryPolygon":case"polygon":return kR;case"esriGeometryPolyline":case"polyline":return AR}}var hs;function PR(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Yo(e,t,i){return t==null?i:i==null?t:e(t,i)}let $i=hs=class extends Pr{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,s,l){return PR(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?it.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:s,spatialReference:l==null?it.WGS84:l}}static fromBounds(e,t){return new hs({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new hs({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new Be({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new hs;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&x1(t,i)&&(e=t.isWebMercator?Qa(e):zp(e,!0)),e.type==="point"?dg(this,e):e.type==="extent"&&_R(this,e)}equals(e){if(this===e)return!0;if(ce(e))return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&x1(t,i)&&(e=t.isWebMercator?Qa(e):zp(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,s=this.height*t;if(this.xmin+=i,this.ymin+=s,this.xmax-=i,this.ymax-=s,this.hasZ){const l=(this.zmax-this.zmin)*t;this.zmin+=l,this.zmax-=l}if(this.hasM){const l=(this.mmax-this.mmin)*t;this.mmin+=l,this.mmax-=l}return this}intersects(e){if(ce(e))return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&x1(t,i)&&(e=t.isWebMercator?Qa(e):zp(e,!0)),CR(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Yo(Math.min,this.zmin,e.zmin),this.zmax=Yo(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Yo(Math.min,this.mmin,e.mmin),this.mmax=Yo(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:ce(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Yo(Math.max,this.zmin,e.zmin),this.zmax=Yo(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Yo(Math.max,this.mmin,e.mmin),this.mmax=Yo(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=ln(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const s=t.isWebMercator?zp(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(s.x=this._normalizeX(s.x,e).x),this.spatialReference=new it(Un(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(e){let t=null;const[i,s]=e.valid,l=this.xmin,d=this.xmax;return l>=i&&l<=s&&d>=i&&d<=s||(t=this.center),t}_normalize(e,t,i){const s=this.spatialReference;if(!s)return this;if(!(i=i||ln(s)))return this;const l=this._getParts(i).map(g=>g.extent);if(l.length<2)return l[0]||this;if(l.length>2)return e?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(e)return this._shiftCM(i);if(t)return l;let d=!0,y=!0;return l.forEach(g=>{g.hasZ||(d=!1),g.hasM||(y=!1)}),{rings:l.map(g=>{const _=[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]];if(d){const M=(g.zmax-g.zmin)/2;for(let E=0;E<_.length;E++)_[E].push(M)}if(y){const M=(g.mmax-g.mmin)/2;for(let E=0;E<_.length;E++)_[E].push(M)}return _}),hasZ:d,hasM:y,spatialReference:s}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:l,ymax:d,spatialReference:y}=this,g=this.width,_=this.xmin,M=this.xmax;let E;e=e||ln(y);const[O,P]=e.valid;E=this._normalizeX(this.xmin,e);const j=E.x,R=E.frameId;E=this._normalizeX(this.xmax,e);const z=E.x,q=E.frameId,Y=j===z&&g>0;if(g>2*P){const te=new hs(_<M?j:z,l,P,d,y),ne=new hs(O,l,_<M?z:j,d,y),he=new hs(0,l,P,d,y),se=new hs(O,l,0,d,y),ue=[],Ee=[];te.contains(he)&&ue.push(R),te.contains(se)&&Ee.push(R),ne.contains(he)&&ue.push(q),ne.contains(se)&&Ee.push(q);for(let Oe=R+1;Oe<q;Oe++)ue.push(Oe),Ee.push(Oe);t.push({extent:te,frameIds:[R]},{extent:ne,frameIds:[q]},{extent:he,frameIds:ue},{extent:se,frameIds:Ee})}else j>z||Y?t.push({extent:new hs(j,l,P,d,y),frameIds:[R]},{extent:new hs(O,l,z,d,y),frameIds:[q]}):t.push({extent:new hs(j,l,z,d,y),frameIds:[R]});this.cache._parts=t}const i=this.hasZ,s=this.hasM;if(i||s){const l={};i&&(l.zmin=this.zmin,l.zmax=this.zmax),s&&(l.mmin=this.mmin,l.mmax=this.mmax);for(let d=0;d<t.length;d++)t[d].extent.set(l)}return t}_normalizeX(e,t){const[i,s]=t.valid,l=2*s;let d,y=0;return e>s?(d=Math.ceil(Math.abs(e-s)/l),e-=d*l,y=d):e<i&&(d=Math.ceil(Math.abs(e-i)/l),e+=d*l,y=-d),{x:e,frameId:y}}};b([S({readOnly:!0})],$i.prototype,"cache",null),b([S({readOnly:!0})],$i.prototype,"center",null),b([S({readOnly:!0})],$i.prototype,"extent",null),b([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],$i.prototype,"hasM",null),b([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],$i.prototype,"hasZ",null),b([S({readOnly:!0})],$i.prototype,"height",null),b([S({readOnly:!0})],$i.prototype,"width",null),b([S({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],$i.prototype,"xmin",void 0),b([S({type:Number,json:{write:!0}})],$i.prototype,"ymin",void 0),b([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],$i.prototype,"mmin",void 0),b([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],$i.prototype,"zmin",void 0),b([S({type:Number,json:{write:!0}})],$i.prototype,"xmax",void 0),b([S({type:Number,json:{write:!0}})],$i.prototype,"ymax",void 0),b([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],$i.prototype,"mmax",void 0),b([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],$i.prototype,"zmax",void 0),$i=hs=b([H("esri.geometry.Extent")],$i),$i.prototype.toJSON.isDefaultToJSON=!0;const Mt=$i;var T6,E6,k6;let NR,R0;const A6=(T6=(E6=globalThis.esriConfig)==null?void 0:E6.locale)!=null?T6:(k6=globalThis.dojoConfig)==null?void 0:k6.locale;function G$(){var e,t;return(e=A6!=null?A6:(t=globalThis.navigator)==null?void 0:t.language)!=null?e:"en"}function Xr(){return R0===void 0&&(R0=G$()),R0}const L0=[];function jR(e){return L0.push(e),{remove(){L0.splice(L0.indexOf(e),1)}}}const mb=[];function A5(e){return mb.push(e),{remove(){L0.splice(mb.indexOf(e),1)}}}function FR(){var e;const t=(e=NR)!=null?e:G$();R0!==t&&(R0=t,[...mb].forEach(i=>{i.call(null,t)}),[...L0].forEach(i=>{i.call(null,t)}))}globalThis.addEventListener==null||globalThis.addEventListener("languagechange",FR);class ot{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this.jsonToAPI=t,this.options=i,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this.apiToJSON),this.jsonValues=this._getKeysSorted(this.jsonToAPI),this.read=s=>this.fromJSON(s),this.write=(s,l,d)=>{const y=this.toJSON(s);y!==void 0&&es(d,y,l)},this.write.isJSONMapWriter=!0}toJSON(t){if(this.apiToJSON.hasOwnProperty(t)){const i=this.apiToJSON[t];return this.options.useNumericKeys?+i:i}return this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}_invertMap(t){const i={};for(const s in t)i[t[s]]=s;return i}_getKeysSorted(t){const i=[];for(const s in t)i.push(s);return i.sort(),i}}function Hi(){return function(e,t){return new ot(e,J({ignoreUnknown:!0},t))}}var gb;const RR=new ot({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let cs=gb=class extends Fe{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new gb({categories:this.categories?le(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i,s;if(this.categories&&(i=this.categories.map(y=>Array.isArray(y)?JSON.stringify(y):y)),this.extent){const y=pg(this.extent,it.WGS84);X(y)&&(s=`${y.xmin},${y.ymin},${y.xmax},${y.ymax}`)}let l=this.query;!this.disableExtraQuery&&e.extraQuery&&(l="("+l+")"+e.extraQuery);const d={categories:i,bbox:s,q:l,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(d.sortField=this.sortField.split(",").map(y=>RR.toJSON(y.trim())).join(","),d.sortOrder=this.sortOrder),{query:J(J({},t),d)}}};b([S()],cs.prototype,"categories",void 0),b([S()],cs.prototype,"disableExtraQuery",void 0),b([S({type:Mt})],cs.prototype,"extent",void 0),b([S()],cs.prototype,"filter",void 0),b([S()],cs.prototype,"num",void 0),b([S()],cs.prototype,"query",void 0),b([S()],cs.prototype,"sortField",void 0),b([S()],cs.prototype,"sortOrder",null),b([S()],cs.prototype,"start",void 0),cs=gb=b([H("esri.portal.PortalQueryParams")],cs);const No=cs;let Sl=class extends Fe{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};b([S()],Sl.prototype,"nextQueryParams",void 0),b([S()],Sl.prototype,"queryParams",void 0),b([S()],Sl.prototype,"results",void 0),b([S()],Sl.prototype,"total",void 0),Sl=b([H("esri.portal.PortalQueryResult")],Sl);const LR=Sl;let ao=class extends ge{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new re("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};b([S({type:Date})],ao.prototype,"created",void 0),b([S()],ao.prototype,"id",void 0),b([S()],ao.prototype,"portal",void 0),b([S()],ao.prototype,"title",void 0),b([S({readOnly:!0})],ao.prototype,"url",null),b([S()],ao.prototype,"username",void 0),ao=b([H("esri.portal.PortalFolder")],ao);const DR=ao;let Ii=class extends ge{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal._request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(s=>s.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return this.portal._request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new re("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let i=gi(No,e);return parseFloat(this.portal.currentVersion)>5?(i=i||new No,this.portal._queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new No,i.query="group:"+this.id+(i.query?" "+i.query:""),this.portal.queryItems(i,t))}_fetchCategorySchemaSet(e,t){return this.portal._fetchSelf(this.portal.authMode,!0,t).then(i=>{const s=i.contentCategorySetsGroupQuery;if(s){const l=new No;return l.disableExtraQuery=!0,l.num=1,l.query=s,this.portal.queryGroups(l,t)}throw new re("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const s=i.results[0],l=new No;return l.num=1,l.query=`typekeywords:"${e}"`,s.queryItems(l,t)}throw new re("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(s=>{const l=s&&s.categorySchema;return l&&l.length?l:[]}):[])}};b([S()],Ii.prototype,"access",void 0),b([S({type:Date})],Ii.prototype,"created",void 0),b([S()],Ii.prototype,"description",void 0),b([S()],Ii.prototype,"id",void 0),b([S()],Ii.prototype,"isInvitationOnly",void 0),b([S({type:Date})],Ii.prototype,"modified",void 0),b([S()],Ii.prototype,"owner",void 0),b([S()],Ii.prototype,"portal",void 0),b([S()],Ii.prototype,"snippet",void 0),b([S()],Ii.prototype,"sortField",void 0),b([S()],Ii.prototype,"sortOrder",void 0),b([S()],Ii.prototype,"tags",void 0),b([S()],Ii.prototype,"thumbnail",void 0),b([S({readOnly:!0})],Ii.prototype,"thumbnailUrl",null),b([S()],Ii.prototype,"title",void 0),b([S({readOnly:!0})],Ii.prototype,"url",null),Ii=b([H("esri.portal.PortalGroup")],Ii);const vb=Ii;var zR=Object.freeze(Object.defineProperty({__proto__:null,default:vb},Symbol.toStringTag,{value:"Module"})),bb;let Dt=bb=class extends ge{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e&&e.data,s=e&&e.folder,l={method:"post"};t&&(l.query=t.createPostQuery(),i!=null&&(typeof i=="string"?l.query.text=i:typeof i=="object"&&(l.query.text=JSON.stringify(i))));let d=this.userContentUrl;return s&&(d+="/"+(typeof s=="string"?s:s.id)),this.portal._request(d+"/addItem",l).then(y=>(t.id=y.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",i=e.map(s=>s.id);if(i.length){const s={method:"post",query:{items:i.join(",")}};return this.portal._request(t,s).then(()=>{e.forEach(l=>{l.id=null,l.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal._request(this.userContentUrl,e).then(t=>{let i;return i=t&&t.folders?t.folders.map(s=>{const l=DR.fromJSON(s);return l.portal=this.portal,l}):[],i})}fetchGroups(){return this.portal._request(this.url).then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const s=vb.fromJSON(i);return s.portal=this.portal,s}):[],t})}fetchItems(e){e||(e={});let t,i=this.userContentUrl;return e.folder&&(i+="/"+e.folder.id),Promise.resolve().then(function(){return q$}).then(({default:s})=>{t=s;const l={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal._request(i,{query:l})}).then(s=>{let l;return s&&s.items?(l=s.items.map(d=>{const y=t.fromJSON(d);return y.portal=this.portal,y}),Promise.all(l.map(d=>d.load())).catch(d=>d).then(()=>({items:l,nextStart:s.nextStart,total:s.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new vb({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new re("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new re("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new bb;return t.sourceJSON=e,t.read(e),t}};b([S()],Dt.prototype,"access",void 0),b([S({type:Date})],Dt.prototype,"created",void 0),b([S()],Dt.prototype,"culture",void 0),b([S()],Dt.prototype,"description",void 0),b([S()],Dt.prototype,"email",void 0),b([S()],Dt.prototype,"favGroupId",void 0),b([S()],Dt.prototype,"fullName",void 0),b([S({type:Date})],Dt.prototype,"modified",void 0),b([S()],Dt.prototype,"orgId",void 0),b([S()],Dt.prototype,"portal",void 0),b([S()],Dt.prototype,"preferredView",void 0),b([S()],Dt.prototype,"privileges",void 0),b([S()],Dt.prototype,"region",void 0),b([S()],Dt.prototype,"role",void 0),b([S()],Dt.prototype,"roleId",void 0),b([S()],Dt.prototype,"sourceJSON",void 0),b([S()],Dt.prototype,"thumbnail",void 0),b([S({readOnly:!0})],Dt.prototype,"thumbnailUrl",null),b([S()],Dt.prototype,"units",void 0),b([S({readOnly:!0})],Dt.prototype,"userContentUrl",null),b([S({readOnly:!0})],Dt.prototype,"url",null),b([S()],Dt.prototype,"username",void 0),b([S()],Dt.prototype,"userType",void 0),Dt=bb=b([H("esri.portal.PortalUser")],Dt);const O5=Dt;var VR=Object.freeze(Object.defineProperty({__proto__:null,default:O5},Symbol.toStringTag,{value:"Module"})),zr;let xv;const O6={PortalGroup:()=>Promise.resolve().then(function(){return zR}),PortalItem:()=>Promise.resolve().then(function(){return q$}),PortalUser:()=>Promise.resolve().then(function(){return VR})};let Me=zr=class extends Dd(Go){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Ct.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Ct.request.trustedServers.indexOf(t)===-1&&Ct.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get stylesGroupQuery(){return sN(Se.getLogger(this.declaredClass),"stylesGroupQuery",{replacement:"stylesGroupQuery3d",version:"4.21"}),this.stylesGroupQuery3d}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=O5.fromJSON(e),t.portal=this),t}load(e){const t=Promise.resolve().then(function(){return sL}).then(({default:i})=>{mi(e),xv=i}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e)).then(i=>{if(ci){const s=ci;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==zr.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=s.on("credential-create",()=>{s.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createClosestFacilityTask(){bh(Se.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/closestFacility",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("closestFacility");return new(await import("./ClosestFacilityTask.1f5811ce.js")).default(e)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await import("./ElevationLayer.ada866ad.js")).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}async createGeometryService(){bh(Se.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/geometryService",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("geometry");return new(await import("./GeometryService.52631505.js")).default({url:e})}async createPrintTask(){bh(Se.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/print",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("printTask");return new(await import("./PrintTask.953ad256.js")).default(e)}async createRouteTask(){bh(Se.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/route",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("route");return new(await import("./RouteTask.d3b82167.js")).default(e)}async createServiceAreaTask(){bh(Se.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/serviceArea",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("serviceArea");return new(await import("./ServiceAreaTask.3149e195.js")).default(e)}fetchBasemaps(e,t){const i=new No;return i.query=e||(Ct.apiKey&&j$(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,t).then(s=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',s.total){const l=s.results[0];return i.sortField=l.sortField||"name",i.sortOrder=l.sortOrder||"desc",l.queryItems(i,t)}return null}).then(s=>{let l;return l=s&&s.total?s.results.filter(d=>d.type==="Web Map").map(d=>new xv({portalItem:d})):[],l})}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Bn(e)?Promise.reject(yi()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new No;if(i.num=100,i.sortField="title",t&&t.length){const s=[];for(const l of t)s.push(`(title:"${l.title}" AND owner:${l.owner})`);return i.query=s.join(" OR "),this.queryGroups(i,e).then(l=>l.results)}return Bn(e)?Promise.reject(yi()):Promise.resolve([])}fetchRegions(e){var t;const i=((t=this.user)==null?void 0:t.culture)||this.culture||Xr();return this._request(this.restUrl+"/portals/regions",Te(J({},e),{query:{culture:i}}))}fetchSettings(e){var t;const i=((t=this.user)==null?void 0:t.culture)||this.culture||Xr();return this._request(this.restUrl+"/portals/self/settings",Te(J({},e),{query:{culture:i}}))}static getDefault(){return zr._default&&!zr._default.destroyed||(zr._default=new zr),zr._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new re("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new zr({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new re("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new re("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,i){const s=this.restUrl+"/portals/self",l=J({authMode:e,query:{culture:Xr().toLowerCase()}},i);return l.authMode==="auto"&&(l.authMode="no-prompt"),t&&(l.query.default=!0),this._request(s,l)}_queryPortal(e,t,i,s){const l=gi(No,t),d=y=>this._request(this.restUrl+e,J(J({},l.toRequestOptions(this)),s)).then(g=>{const _=l.clone();return _.start=g.nextStart,new LR({nextQueryParams:_,queryParams:l,total:g.total,results:zr._resultsToTypedArray(y,{portal:this},g,s)})}).then(g=>Promise.all(g.results.map(_=>typeof _.when=="function"?_.when():g)).then(()=>g,_=>(Fd(_),g)));return i&&O6[i]?O6[i]().then(({default:y})=>(mi(s),d(y))):d()}_signIn(){if(this.authMode===zr.AUTH_MODE_ANONYMOUS)return Promise.reject(new re("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return ci?ci.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.indexOf("?")>-1?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,i){return this._request(e,t).then(s=>{const l=zr._resultsToTypedArray(i,{portal:this},s);return Promise.all(l.map(d=>typeof d.when=="function"?d.when():s)).then(()=>l,()=>l)})}_readBasemap(e){if(e){const t=xv.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const i=J({f:"json"},t.query),{authMode:s=this.authMode===zr.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:l=null,cacheBust:d=!1,method:y="auto",responseType:g="json",signal:_}=t,M={authMode:s,body:l,cacheBust:d,method:y,query:i,responseType:g,timeout:0,signal:_};return Ht(this._normalizeSSL(e),M).then(E=>E.data)}static _resultsToTypedArray(e,t,i,s){let l;if(i){const d=X(s)?s.signal:null;l=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(l=l.map(y=>{const g=Object.assign(e?e.fromJSON(y):y,t);return typeof g.load=="function"&&g.load(d),g}))}else l=[];return l}};Me.AUTH_MODE_ANONYMOUS="anonymous",Me.AUTH_MODE_AUTO="auto",Me.AUTH_MODE_IMMEDIATE="immediate",b([S()],Me.prototype,"access",void 0),b([S()],Me.prototype,"allSSL",void 0),b([S()],Me.prototype,"authMode",void 0),b([S()],Me.prototype,"authorizedCrossOriginDomains",void 0),b([$e("authorizedCrossOriginDomains")],Me.prototype,"readAuthorizedCrossOriginDomains",null),b([S()],Me.prototype,"basemapGalleryGroupQuery",void 0),b([S()],Me.prototype,"bingKey",void 0),b([S()],Me.prototype,"canListApps",void 0),b([S()],Me.prototype,"canListData",void 0),b([S()],Me.prototype,"canListPreProvisionedItems",void 0),b([S()],Me.prototype,"canProvisionDirectPurchase",void 0),b([S()],Me.prototype,"canSearchPublic",void 0),b([S()],Me.prototype,"canShareBingPublic",void 0),b([S()],Me.prototype,"canSharePublic",void 0),b([S()],Me.prototype,"canSignInArcGIS",void 0),b([S()],Me.prototype,"canSignInIDP",void 0),b([S()],Me.prototype,"colorSetsGroupQuery",void 0),b([S()],Me.prototype,"commentsEnabled",void 0),b([S({type:Date})],Me.prototype,"created",void 0),b([S()],Me.prototype,"credential",void 0),b([S()],Me.prototype,"culture",void 0),b([S()],Me.prototype,"currentVersion",void 0),b([S()],Me.prototype,"customBaseUrl",void 0),b([S()],Me.prototype,"defaultBasemap",void 0),b([$e("defaultBasemap")],Me.prototype,"readDefaultBasemap",null),b([S()],Me.prototype,"defaultDevBasemap",void 0),b([$e("defaultDevBasemap")],Me.prototype,"readDefaultDevBasemap",null),b([S({type:Mt})],Me.prototype,"defaultExtent",void 0),b([S()],Me.prototype,"defaultVectorBasemap",void 0),b([$e("defaultVectorBasemap")],Me.prototype,"readDefaultVectorBasemap",null),b([S()],Me.prototype,"description",void 0),b([S()],Me.prototype,"devBasemapGalleryGroupQuery",void 0),b([S()],Me.prototype,"eueiEnabled",void 0),b([S({readOnly:!0})],Me.prototype,"extraQuery",null),b([S()],Me.prototype,"featuredGroups",void 0),b([S()],Me.prototype,"featuredItemsGroupQuery",void 0),b([S()],Me.prototype,"galleryTemplatesGroupQuery",void 0),b([S()],Me.prototype,"livingAtlasGroupQuery",void 0),b([S()],Me.prototype,"hasCategorySchema",void 0),b([S()],Me.prototype,"helpBase",void 0),b([S()],Me.prototype,"helperServices",void 0),b([S()],Me.prototype,"helpMap",void 0),b([S()],Me.prototype,"homePageFeaturedContent",void 0),b([S()],Me.prototype,"homePageFeaturedContentCount",void 0),b([S()],Me.prototype,"httpPort",void 0),b([S()],Me.prototype,"httpsPort",void 0),b([S()],Me.prototype,"id",void 0),b([S()],Me.prototype,"ipCntryCode",void 0),b([S({readOnly:!0})],Me.prototype,"isOrganization",null),b([S()],Me.prototype,"isPortal",void 0),b([S()],Me.prototype,"isReadOnly",void 0),b([S()],Me.prototype,"layerTemplatesGroupQuery",void 0),b([S()],Me.prototype,"maxTokenExpirationMinutes",void 0),b([S({type:Date})],Me.prototype,"modified",void 0),b([S()],Me.prototype,"name",void 0),b([S()],Me.prototype,"portalHostname",void 0),b([S()],Me.prototype,"portalMode",void 0),b([S()],Me.prototype,"portalProperties",void 0),b([S()],Me.prototype,"region",void 0),b([S({readOnly:!0})],Me.prototype,"restUrl",null),b([S()],Me.prototype,"rotatorPanels",void 0),b([S()],Me.prototype,"showHomePageDescription",void 0),b([S()],Me.prototype,"sourceJSON",void 0),b([S()],Me.prototype,"staticImagesUrl",void 0),b([S({readOnly:!0,json:{read:!1}})],Me.prototype,"stylesGroupQuery",null),b([S({json:{name:"2DStylesGroupQuery"}})],Me.prototype,"stylesGroupQuery2d",void 0),b([S({json:{name:"stylesGroupQuery"}})],Me.prototype,"stylesGroupQuery3d",void 0),b([S()],Me.prototype,"supportsHostedServices",void 0),b([S()],Me.prototype,"symbolSetsGroupQuery",void 0),b([S()],Me.prototype,"templatesGroupQuery",void 0),b([S()],Me.prototype,"thumbnail",void 0),b([S({readOnly:!0})],Me.prototype,"thumbnailUrl",null),b([S()],Me.prototype,"units",void 0),b([S()],Me.prototype,"url",void 0),b([S()],Me.prototype,"urlKey",void 0),b([$e("urlKey")],Me.prototype,"readUrlKey",null),b([S()],Me.prototype,"user",void 0),b([$e("user")],Me.prototype,"readUser",null),b([S()],Me.prototype,"useStandardizedQuery",void 0),b([S()],Me.prototype,"useVectorBasemaps",void 0),b([S()],Me.prototype,"vectorBasemapGalleryGroupQuery",void 0),Me=zr=b([H("esri.portal.Portal")],Me);const ts=Me,GR=Se.getLogger("esri.assets");function bt(e){if(!Ct.assetsPath)throw GR.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new re("assets:path-not-set","config.assetsPath is not set");return rl(Ct.assetsPath,e)}const qR=Se.getLogger("esri.portal.PortalItemResource");let aa=class extends Fe{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?Te(J({},e),{path:this._normalizePath(e.path,e.portalItem)}):e}set path(e){X(e)&&Yr(e)?qR.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const i=this.url;if(ce(i))throw new re("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(i,{responseType:e,query:{token:this.portalItem.apiKey},signal:cM(t,"signal")})}async update(e,t){return(await import("./resourceUtils.9cdd7809.js")).addOrUpdateResource(this,"update",e,t)}hasPath(){return X(this.path)}_normalizePath(e,t){return ce(e)?e:(e=e.replace(/^\/+/,""),X(t)&&Yr(e)&&(e=S5(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};b([S()],aa.prototype,"portalItem",void 0),b([S({type:String,value:null})],aa.prototype,"path",null),b([yt("path")],aa.prototype,"_castPath",null),b([S({type:String,readOnly:!0})],aa.prototype,"url",null),b([S({type:String,readOnly:!0})],aa.prototype,"itemRelativeUrl",null),aa=b([H("esri.portal.PortalItemResource")],aa);const UR=aa;let Vp=class extends Fe{constructor(e){super(e),this.created=null,this.rating=null}};b([S()],Vp.prototype,"created",void 0),b([S()],Vp.prototype,"rating",void 0),Vp=b([H("esri.portal.PortalRating")],Vp);const Sv=Vp;var wh;let st=wh=class extends Dd(Go){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return f5(wh,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":e==="Image Service"?i=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Media Service"?i="Media Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?i=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":e==="Geocoding Service"?i="Locator":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.indexOf("Spatiotemporal")===-1&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&t.indexOf("Relational")===-1?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?i=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.indexOf("configurableApp")>-1&&(i="Instant App"),i}readExtent(e){return e&&e.length?new Mt(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],i="esri/images/portal/",s="16";let l,d=!1,y=!1,g=!1,_=!1,M=!1,E=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(d=t.indexOf("Hosted Service")>-1,e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(y=t.indexOf("Table")>-1,g=t.indexOf("Route Layer")>-1,_=t.indexOf("Markup")>-1,M=t.indexOf("Spatiotemporal")!==-1,E=t.indexOf("UtilityNetwork")!==-1,l=M&&y?"spatiotemporaltable":y?"table":g?"routelayer":_?"markup":M?"spatiotemporal":d?"featureshosted":E?"utilitynetwork":"features"):l=e==="map service"||e==="wms"||e==="wmts"?d||t.indexOf("Tiled")>-1||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.indexOf("Line")>-1?"sceneweblayerline":t.indexOf("3DObject")>-1?"sceneweblayermultipatch":t.indexOf("Point")>-1?"sceneweblayerpoint":t.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":t.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":t.indexOf("Polygon")>-1?"sceneweblayerpolygon":t.indexOf("Building")>-1?"sceneweblayerbuilding":t.indexOf("Voxel")>-1?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.indexOf("Elevation 3D Layer")>-1?"elevationlayer":t.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="media service"?"mediaservice":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"&&t.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):l=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.indexOf("configurableApp")>-1?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.indexOf("ArcGIS Pro")>-1||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.indexOf("Explorer Mapping Application")>-1||t.indexOf("Document")>-1?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":"maps",l?bt(i+l+s+".png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=ts.getDefault());const t=this.portal.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:X(e)?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof Sv&&(e=e.rating),isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then(()=>new Sv({rating:e,created:new Date}))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:le(this.applicationProxies),avgRating:this.avgRating,categories:le(this.categories),created:le(this.created),culture:this.culture,description:this.description,extent:le(this.extent),groupCategories:le(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:le(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:le(this.screenshots),size:this.size,snippet:this.snippet,tags:le(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:le(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new wh({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",Te(J({responseType:e},t),{query:{token:this.apiKey}}))}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",J({query:{token:this.apiKey}},e)).then(t=>t.rating!=null?(t.created=new Date(t.created),new Sv(t)):null)}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",J({query:Te(J({},e),{token:this.apiKey})},t),wh)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e&&e.data,i={method:"post"};i.query=this.createPostQuery();for(const s in i.query)i.query[s]===null&&(i.query[s]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new re("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e.thumbnail,i=e.filename,s={method:"post"};if(typeof t=="string")Ku(t)?s.query={data:t}:s.query={url:sn(t)},X(i)&&(s.query.filename=i);else{const l=new FormData;X(i)?l.append("file",t,i):l.append("file",t),s.body=l}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,s).then(()=>this.reload())}):Promise.reject(new re("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await import("./resourceUtils.9cdd7809.js")).fetchResources(this,e,t)}async addResource(e,t,i){const s=await import("./resourceUtils.9cdd7809.js");return e.portalItem=this,s.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const i=await import("./resourceUtils.9cdd7809.js");if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new re("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,t)}async removeAllResources(e){return(await import("./resourceUtils.9cdd7809.js")).removeAllResources(this,e)}resourceFromPath(e){return new UR({portalItem:this,path:e})}toJSON(){const e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return gM(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new wh({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};b([S({type:["private","shared","org","public"]})],st.prototype,"access",void 0),b([S()],st.prototype,"accessInformation",void 0),b([S({type:String})],st.prototype,"apiKey",void 0),b([S({json:{read:{source:"appProxies"}}})],st.prototype,"applicationProxies",void 0),b([S()],st.prototype,"avgRating",void 0),b([S()],st.prototype,"categories",void 0),b([S({type:Date})],st.prototype,"created",void 0),b([S()],st.prototype,"culture",void 0),b([S()],st.prototype,"description",void 0),b([S({readOnly:!0})],st.prototype,"displayName",null),b([S({type:Mt})],st.prototype,"extent",void 0),b([$e("extent")],st.prototype,"readExtent",null),b([S()],st.prototype,"groupCategories",void 0),b([S({readOnly:!0})],st.prototype,"iconUrl",null),b([S()],st.prototype,"id",void 0),b([S({readOnly:!0})],st.prototype,"isLayer",null),b([S()],st.prototype,"itemControl",void 0),b([S({readOnly:!0})],st.prototype,"itemUrl",null),b([S()],st.prototype,"licenseInfo",void 0),b([S({type:Date})],st.prototype,"modified",void 0),b([S()],st.prototype,"name",void 0),b([S()],st.prototype,"numComments",void 0),b([S()],st.prototype,"numRatings",void 0),b([S()],st.prototype,"numViews",void 0),b([S()],st.prototype,"owner",void 0),b([S()],st.prototype,"ownerFolder",void 0),b([S({type:ts})],st.prototype,"portal",void 0),b([S()],st.prototype,"screenshots",void 0),b([S()],st.prototype,"size",void 0),b([S()],st.prototype,"snippet",void 0),b([S()],st.prototype,"sourceJSON",void 0),b([S()],st.prototype,"tags",void 0),b([S()],st.prototype,"thumbnail",void 0),b([S({readOnly:!0})],st.prototype,"thumbnailUrl",null),b([S()],st.prototype,"title",void 0),b([S()],st.prototype,"type",void 0),b([S()],st.prototype,"typeKeywords",void 0),b([S()],st.prototype,"url",void 0),b([S({readOnly:!0})],st.prototype,"userItemUrl",null),st=wh=b([H("esri.portal.PortalItem")],st);const Zy=st;var q$=Object.freeze(Object.defineProperty({__proto__:null,default:Zy},Symbol.toStringTag,{value:"Module"}));const C6=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,BR={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function P6(e){var t;return(t=BR[e])!=null&&t}const Gp=[],yc=new Map;function N6(e){for(const t of yc.keys())B$(e.pattern,t)&&yc.delete(t)}function HR(e){return Gp.includes(e)||(N6(e),Gp.unshift(e)),{remove(){const t=Gp.indexOf(e);t>-1&&(Gp.splice(t,1),N6(e))}}}async function U$(e){const t=Xr();yc.has(e)||yc.set(e,JR(e,t));const i=yc.get(e);return await KR.add(i),i}function WR(e){if(!C6.test(e))return null;const[,t,i]=C6.exec(e),s=t+(i?"-"+i.toUpperCase():"");return P6(s)?s:P6(t)?t:null}async function JR(e,t){const i=[];for(const s of Gp)if(B$(s.pattern,e))try{return await s.fetchMessageBundle(e,t)}catch(l){i.push(l)}throw i.length?new re("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new re("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function B$(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}A5(()=>{yc.clear()});const KR=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Vo())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function YR(e){if(!e)return;const t=e.indexOf("-vector")>-1?e.slice(0,e.indexOf("-vector")):e,i=await U$("esri/t9n/basemaps");return i[e]||i[t]}const wb={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return bt("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return bt("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return bt("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return bt("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return bt("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return bt("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return bt("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return bt("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return bt("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return bt("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return bt("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return bt("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return bt("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return bt("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return bt("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return bt("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return bt("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return bt("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return bt("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return bt("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return bt("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return bt("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return bt("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return bt("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return bt("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return bt("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return bt("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}},XR=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),ZR=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function QR(e){return e.layerContainerType==="basemap"?XR:e.layerContainerType==="operational-layers"?ZR:null}function C5(e){return!(e.type!=="feature"||e.url||!e.source||e.source.type!=="memory")}function eL(e,t){if(t.restrictedWebMapWriting){const i=QR(t);return!X(i)||i.has(e.type)&&!C5(e)}return!0}function tL(e,t){if(C5(e)){const i=Gc("featureCollection.layers",t),s=i&&i[0]&&i[0].layerDefinition;s&&Mv(e,s)}else e.type==="stream"?Mv(e,t.layerDefinition=t.layerDefinition||{}):e.type!=="group"&&Mv(e,t)}function Mv(e,t){"maxScale"in e&&(t.maxScale=Hy(e.maxScale)),"minScale"in e&&(t.minScale=Hy(e.minScale))}function iL(e,t){if(tL(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=Hy(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts")if(C5(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function j6(e,t,i){if(!("write"in e)||!e.write)return i&&i.messages&&i.messages.push(new re("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(eL(e,i)){const s={};return e.write(s,i)?s:null}return X(t)&&iL(e,t=le(t)),t}var M1;let rL=0;const $v=Se.getLogger("esri.Basemap");let ps=M1=class extends Dd(Go){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+rL++,this.baseLayers=new qe,this.referenceLayers=new qe;const t=s=>{s.parent&&s.parent!==this&&"remove"in s.parent&&s.parent.remove(s),s.parent=this,s.type==="elevation"&&$v.error(`Layer '${s.title}, id:${s.id}' of type '${s.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=s=>{s.parent=null};this.baseLayers.on("after-add",s=>t(s.item)),this.referenceLayers.on("after-add",s=>t(s.item)),this.baseLayers.on("after-remove",s=>i(s.item)),this.referenceLayers.on("after-remove",s=>i(s.item))}initialize(){this.when().catch(e=>{$v.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var e;const t=this.baseLayers.removeAll();for(const s of t)s.destroy();const i=this.referenceLayers.removeAll();for(const s of i)s.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(e=this.portalItem)==null||e.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e=J({},e)).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Cu(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const s=[];e&&(i=Te(J({},i),{layerContainerType:"basemap"}),this.baseLayers.forEach(l=>{const d=j6(l,i.webmap?i.webmap.getLayerJSONFromResourceInfo(l):null,i);X(d)&&s.push(d)}),this.referenceLayers.forEach(l=>{const d=j6(l,i.webmap?i.webmap.getLayerJSONFromResourceInfo(l):null,i);X(d)&&(d.isReference=!0,s.push(d))})),t.baseMapLayers=s}set referenceLayers(e){this._set("referenceLayers",Cu(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return g$(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new M1({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t=J({origin:"web-map"},t)),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const s=le(i);return s.url&&Wn(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&Wn(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i}=this;mi(e);const s=[];if(t){const l=t.context?t.context.url:null;if(s.push(this._loadLayersFromJSON(t.data,l,e)),t.data.id&&!t.data.title){const d=t.data.id;s.push(YR(d).then(y=>{y&&this.read({title:y},t.context)}))}}else i&&s.push(this._loadFromItem(i,e));await Promise.all(s)}async _loadLayersFromJSON(e,t,i){const s=this.resourceInfo&&this.resourceInfo.context,l=this.portalItem&&this.portalItem.portal||s&&s.portal||null,d=s&&s.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:y}=await import("./layersCreator.e87622c9.js"),g=[];if(mi(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const _={context:{origin:d,url:t,portal:l,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},M=y(this.baseLayers,e.baseMapLayers.filter(O=>!O.isReference),_);g.push(M);const E=y(this.referenceLayers,e.baseMapLayers.filter(O=>O.isReference),_);g.push(E)}await Or(g)}async _loadFromItem(e,t){const i=await e.load(t),s=await i.fetchData("json",t),l=Ri(e.itemUrl);return this._set("resourceInfo",{data:s.baseMap,context:{origin:"web-map",portal:e.portal||ts.getDefault(),url:l}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||ts.getDefault(),url:l}),this._loadLayersFromJSON(this.resourceInfo.data,l,t)}static fromId(e){const t=wb[e];if(t){if(t.deprecated){let i=null;e==="dark-gray"?i="dark-gray-vector":e==="gray"?i="gray-vector":e==="streets"?i="streets-vector":e==="topo"&&(i="topo-vector"),Jm($v,`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return M1.fromJSON(t)}return null}};b([S({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,s){this._writeBaseLayers(e,t,s)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:qe}},writer(e,t,i,s){this._writeBaseLayers(e,t,s)}}}}}})],ps.prototype,"baseLayers",null),b([S({type:String,json:{origins:{"web-scene":{write:!0}}}})],ps.prototype,"id",void 0),b([S({type:Zy})],ps.prototype,"portalItem",void 0),b([S()],ps.prototype,"referenceLayers",null),b([S({readOnly:!0})],ps.prototype,"resourceInfo",void 0),b([S({type:it})],ps.prototype,"spatialReference",void 0),b([S()],ps.prototype,"thumbnailUrl",void 0),b([S({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],ps.prototype,"title",void 0),b([ke("title")],ps.prototype,"writeTitle",null),ps=M1=b([H("esri.Basemap")],ps);const Qy=ps;var sL=Object.freeze(Object.defineProperty({__proto__:null,default:Qy},Symbol.toStringTag,{value:"Module"}));const em={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function H$(e){return em[e]||em[e.toLowerCase()]}function P5(e){var t;return(t=em[e])!=null?t:em[e.toLowerCase()]}function nL(e){return[...P5(e)]}function Iv(e,t,i){i<0&&++i,i>1&&--i;const s=6*i;return s<1?e+(t-e)*s:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function W$(e,t,i,s=1){const l=(e%360+360)%360/360,d=i<=.5?i*(t+1):i+t-i*t,y=2*i-d;return[Math.round(255*Iv(y,d,l+1/3)),Math.round(255*Iv(y,d,l)),Math.round(255*Iv(y,d,l-1/3)),s]}function oL(e){const t=e.length>5,i=t?8:4,s=(1<<i)-1,l=t?1:17,d=t?e.length===9:e.length===5;let y=Number("0x"+e.substr(1));if(isNaN(y))return null;const g=[0,0,0,1];let _;return d&&(_=y&s,y>>=i,g[3]=l*_/255),_=y&s,y>>=i,g[2]=l*_,_=y&s,y>>=i,g[1]=l*_,_=y&s,y>>=i,g[0]=l*_,g}function Yn(){return[0,0,0]}function aL(e){return[e[0],e[1],e[2]]}function Wc(e,t,i){return[e,t,i]}function lL(e){const t=Yn(),i=Math.min(3,e.length);for(let s=0;s<i;++s)t[s]=e[s];return t}function uL(e,t){return new Float64Array(e,t,3)}function J$(){return Yn()}function K$(){return Wc(1,1,1)}function Y$(){return Wc(1,0,0)}function X$(){return Wc(0,1,0)}function Z$(){return Wc(0,0,1)}const hL=J$(),Q$=K$(),cL=Y$(),pL=X$(),dL=Z$();Object.freeze({__proto__:null,create:Yn,clone:aL,fromValues:Wc,fromArray:lL,createView:uL,zeros:J$,ones:K$,unitX:Y$,unitY:X$,unitZ:Z$,ZEROS:hL,ONES:Q$,UNIT_X:cL,UNIT_Y:pL,UNIT_Z:dL});const Ke=1e-6,Ua=Math.random,fL=Math.PI/180,yL=180/Math.PI;function N5(e){return e*fL}function mL(e){return e*yL}function gL(e,t){return Math.abs(e-t)<=Ke*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze({__proto__:null,EPSILON:Ke,RANDOM:Ua,toRadian:N5,toDegree:mL,equals:gL});function j5(e){const t=e[0],i=e[1],s=e[2];return Math.sqrt(t*t+i*i+s*s)}function _b(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function eI(e,t,i,s){return e[0]=t,e[1]=i,e[2]=s,e}function vL(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function tI(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function iI(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function rI(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function bL(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function wL(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function _L(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function xL(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function SL(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function sI(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function ML(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e}function nI(e,t){const i=t[0]-e[0],s=t[1]-e[1],l=t[2]-e[2];return Math.sqrt(i*i+s*s+l*l)}function oI(e,t){const i=t[0]-e[0],s=t[1]-e[1],l=t[2]-e[2];return i*i+s*s+l*l}function aI(e){const t=e[0],i=e[1],s=e[2];return t*t+i*i+s*s}function $L(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function IL(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function xb(e,t){const i=t[0],s=t[1],l=t[2];let d=i*i+s*s+l*l;return d>0&&(d=1/Math.sqrt(d),e[0]=t[0]*d,e[1]=t[1]*d,e[2]=t[2]*d),e}function lI(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function TL(e,t,i){const s=t[0],l=t[1],d=t[2],y=i[0],g=i[1],_=i[2];return e[0]=l*_-d*g,e[1]=d*y-s*_,e[2]=s*g-l*y,e}function EL(e,t,i,s){const l=t[0],d=t[1],y=t[2];return e[0]=l+s*(i[0]-l),e[1]=d+s*(i[1]-d),e[2]=y+s*(i[2]-y),e}function kL(e,t,i,s,l,d){const y=d*d,g=y*(2*d-3)+1,_=y*(d-2)+d,M=y*(d-1),E=y*(3-2*d);return e[0]=t[0]*g+i[0]*_+s[0]*M+l[0]*E,e[1]=t[1]*g+i[1]*_+s[1]*M+l[1]*E,e[2]=t[2]*g+i[2]*_+s[2]*M+l[2]*E,e}function AL(e,t,i,s,l,d){const y=1-d,g=y*y,_=d*d,M=g*y,E=3*d*g,O=3*_*y,P=_*d;return e[0]=t[0]*M+i[0]*E+s[0]*O+l[0]*P,e[1]=t[1]*M+i[1]*E+s[1]*O+l[1]*P,e[2]=t[2]*M+i[2]*E+s[2]*O+l[2]*P,e}function OL(e,t){t=t||1;const i=2*Ua()*Math.PI,s=2*Ua()-1,l=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(i)*l,e[1]=Math.sin(i)*l,e[2]=s*t,e}function CL(e,t,i){const s=t[0],l=t[1],d=t[2];return e[0]=i[0]*s+i[4]*l+i[8]*d+i[12],e[1]=i[1]*s+i[5]*l+i[9]*d+i[13],e[2]=i[2]*s+i[6]*l+i[10]*d+i[14],e}function PL(e,t,i){const s=t[0],l=t[1],d=t[2];return e[0]=s*i[0]+l*i[3]+d*i[6],e[1]=s*i[1]+l*i[4]+d*i[7],e[2]=s*i[2]+l*i[5]+d*i[8],e}function NL(e,t,i){const s=i[0],l=i[1],d=i[2],y=i[3],g=t[0],_=t[1],M=t[2];let E=l*M-d*_,O=d*g-s*M,P=s*_-l*g,j=l*P-d*O,R=d*E-s*P,z=s*O-l*E;const q=2*y;return E*=q,O*=q,P*=q,j*=2,R*=2,z*=2,e[0]=g+E+j,e[1]=_+O+R,e[2]=M+P+z,e}function jL(e,t,i,s){const l=[],d=[];return l[0]=t[0]-i[0],l[1]=t[1]-i[1],l[2]=t[2]-i[2],d[0]=l[0],d[1]=l[1]*Math.cos(s)-l[2]*Math.sin(s),d[2]=l[1]*Math.sin(s)+l[2]*Math.cos(s),e[0]=d[0]+i[0],e[1]=d[1]+i[1],e[2]=d[2]+i[2],e}function FL(e,t,i,s){const l=[],d=[];return l[0]=t[0]-i[0],l[1]=t[1]-i[1],l[2]=t[2]-i[2],d[0]=l[2]*Math.sin(s)+l[0]*Math.cos(s),d[1]=l[1],d[2]=l[2]*Math.cos(s)-l[0]*Math.sin(s),e[0]=d[0]+i[0],e[1]=d[1]+i[1],e[2]=d[2]+i[2],e}function RL(e,t,i,s){const l=[],d=[];return l[0]=t[0]-i[0],l[1]=t[1]-i[1],l[2]=t[2]-i[2],d[0]=l[0]*Math.cos(s)-l[1]*Math.sin(s),d[1]=l[0]*Math.sin(s)+l[1]*Math.cos(s),d[2]=l[2],e[0]=d[0]+i[0],e[1]=d[1]+i[1],e[2]=d[2]+i[2],e}function LL(e,t){_b($f,e),_b(If,t),xb($f,$f),xb(If,If);const i=lI($f,If);return i>1?0:i<-1?Math.PI:Math.acos(i)}const $f=Yn(),If=Yn();function DL(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function zL(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function VL(e,t){if(e===t)return!0;const i=e[0],s=e[1],l=e[2],d=t[0],y=t[1],g=t[2];return Math.abs(i-d)<=Ke*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(s-y)<=Ke*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(l-g)<=Ke*Math.max(1,Math.abs(l),Math.abs(g))}function GL(e,t,i){const s=i[0]-t[0],l=i[1]-t[1],d=i[2]-t[2];let y=s*s+l*l+d*d;return y>0?(y=1/Math.sqrt(y),e[0]=s*y,e[1]=l*y,e[2]=d*y,e):(e[0]=0,e[1]=0,e[2]=0,e)}const qL=tI,UL=iI,BL=rI,HL=nI,WL=oI,JL=j5,KL=aI;Object.freeze({__proto__:null,length:j5,copy:_b,set:eI,add:vL,subtract:tI,multiply:iI,divide:rI,ceil:bL,floor:wL,min:_L,max:xL,round:SL,scale:sI,scaleAndAdd:ML,distance:nI,squaredDistance:oI,squaredLength:aI,negate:$L,inverse:IL,normalize:xb,dot:lI,cross:TL,lerp:EL,hermite:kL,bezier:AL,random:OL,transformMat4:CL,transformMat3:PL,transformQuat:NL,rotateX:jL,rotateY:FL,rotateZ:RL,angle:LL,str:DL,exactEquals:zL,equals:VL,direction:GL,sub:qL,mul:UL,div:BL,dist:HL,sqrDist:WL,len:JL,sqrLen:KL});function YL(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function XL(e,t,i,s,l){return e[0]=t,e[1]=i,e[2]=s,e[3]=l,e}function ZL(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function uI(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function hI(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function cI(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function QL(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function eD(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function tD(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function iD(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function rD(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function sD(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function nD(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e}function pI(e,t){const i=t[0]-e[0],s=t[1]-e[1],l=t[2]-e[2],d=t[3]-e[3];return Math.sqrt(i*i+s*s+l*l+d*d)}function dI(e,t){const i=t[0]-e[0],s=t[1]-e[1],l=t[2]-e[2],d=t[3]-e[3];return i*i+s*s+l*l+d*d}function fI(e){const t=e[0],i=e[1],s=e[2],l=e[3];return Math.sqrt(t*t+i*i+s*s+l*l)}function yI(e){const t=e[0],i=e[1],s=e[2],l=e[3];return t*t+i*i+s*s+l*l}function oD(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function aD(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function lD(e,t){const i=t[0],s=t[1],l=t[2],d=t[3];let y=i*i+s*s+l*l+d*d;return y>0&&(y=1/Math.sqrt(y),e[0]=i*y,e[1]=s*y,e[2]=l*y,e[3]=d*y),e}function uD(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function hD(e,t,i,s){const l=t[0],d=t[1],y=t[2],g=t[3];return e[0]=l+s*(i[0]-l),e[1]=d+s*(i[1]-d),e[2]=y+s*(i[2]-y),e[3]=g+s*(i[3]-g),e}function cD(e,t){let i,s,l,d,y,g;t=t||1;do i=2*Ua()-1,s=2*Ua()-1,y=i*i+s*s;while(y>=1);do l=2*Ua()-1,d=2*Ua()-1,g=l*l+d*d;while(g>=1);const _=Math.sqrt((1-y)/g);return e[0]=t*i,e[1]=t*s,e[2]=t*l*_,e[3]=t*d*_,e}function pD(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3];return e[0]=i[0]*s+i[4]*l+i[8]*d+i[12]*y,e[1]=i[1]*s+i[5]*l+i[9]*d+i[13]*y,e[2]=i[2]*s+i[6]*l+i[10]*d+i[14]*y,e[3]=i[3]*s+i[7]*l+i[11]*d+i[15]*y,e}function dD(e,t,i){const s=t[0],l=t[1],d=t[2],y=i[0],g=i[1],_=i[2],M=i[3],E=M*s+g*d-_*l,O=M*l+_*s-y*d,P=M*d+y*l-g*s,j=-y*s-g*l-_*d;return e[0]=E*M+j*-y+O*-_-P*-g,e[1]=O*M+j*-g+P*-y-E*-_,e[2]=P*M+j*-_+E*-g-O*-y,e[3]=t[3],e}function fD(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function yD(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function mD(e,t){const i=e[0],s=e[1],l=e[2],d=e[3],y=t[0],g=t[1],_=t[2],M=t[3];return Math.abs(i-y)<=Ke*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(s-g)<=Ke*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-_)<=Ke*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(d-M)<=Ke*Math.max(1,Math.abs(d),Math.abs(M))}const gD=uI,vD=hI,bD=cI,wD=pI,_D=dI,xD=fI,SD=yI;Object.freeze({__proto__:null,copy:YL,set:XL,add:ZL,subtract:uI,multiply:hI,divide:cI,ceil:QL,floor:eD,min:tD,max:iD,round:rD,scale:sD,scaleAndAdd:nD,distance:pI,squaredDistance:dI,length:fI,squaredLength:yI,negate:oD,inverse:aD,normalize:lD,dot:uD,lerp:hD,random:cD,transformMat4:pD,transformQuat:dD,str:fD,exactEquals:yD,equals:mD,sub:gD,mul:vD,div:bD,dist:wD,sqrDist:_D,len:xD,sqrLen:SD});const F6=new Float32Array(1);function fue(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Is(e,t,i){return Math.min(Math.max(e,t),i)}function yue(e){return(e&e-1)==0}function mue(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function gue(e,t,i){return e+(t-e)*i}function MD(e){return e*Math.PI/180}function mI(e){return 180*e/Math.PI}function vue(e){return Math.acos(Is(e,-1,1))}function gI(e){return Math.asin(Is(e,-1,1))}function bue(e){return vI(Math.max(-R6,Math.min(e,R6)))}function vI(e){return F6[0]=e,F6[0]}function wue(e,t){const i=j5(e),s=gI(e[2]/i),l=Math.atan2(e[1]/i,e[0]/i);return eI(t,i,s,l),t}const R6=vI(34028234663852886e22);function Tf(e){return Is(d5(e),0,255)}function Ef(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}class fi{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}static blendColors(t,i,s,l=new fi){return l.r=Math.round(t.r+(i.r-t.r)*s),l.g=Math.round(t.g+(i.g-t.g)*s),l.b=Math.round(t.b+(i.b-t.b)*s),l.a=t.a+(i.a-t.a)*s,l._sanitize()}static fromRgb(t,i){const s=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(s){const l=s[2].split(/\s*,\s*/),d=s[1];if(d==="rgb"&&l.length===3||d==="rgba"&&l.length===4){const y=l[0];if(y.charAt(y.length-1)==="%"){const g=l.map(_=>2.56*parseFloat(_));return l.length===4&&(g[3]=parseFloat(l[3])),fi.fromArray(g,i)}return fi.fromArray(l.map(g=>parseFloat(g)),i)}if(d==="hsl"&&l.length===3||d==="hsla"&&l.length===4)return fi.fromArray(W$(parseFloat(l[0]),parseFloat(l[1])/100,parseFloat(l[2])/100,parseFloat(l[3])),i)}return null}static fromHex(t,i=new fi){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const s=t.length===4?4:8,l=(1<<s)-1;let d=Number("0x"+t.substr(1));return isNaN(d)?null:(["b","g","r"].forEach(y=>{const g=d&l;d>>=s,i[y]=s===4?17*g:g}),i.a=1,i)}static fromArray(t,i=new fi){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const s=H$(t)?P5(t):null;return s&&fi.fromArray(s,i)||fi.fromRgb(t,i)||fi.fromHex(t,i)}static fromJSON(t){return t&&new fi([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return X(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return X(t)?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){if(typeof t=="string")fi.fromString(t,this);else if(Array.isArray(t))fi.fromArray(t,this);else{var i,s,l,d;this._set((i=t.r)!=null?i:0,(s=t.g)!=null?s:0,(l=t.b)!=null?l:0,(d=t.a)!=null?d:1),t instanceof fi||this._sanitize()}return this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),i=this.g.toString(16),s=this.b.toString(16);return`#${t.length<2?"0"+t:t}${i.length<2?"0"+i:i}${s.length<2?"0"+s:s}`}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=fi.AlphaMode.ALWAYS){const i=Tf(this.r),s=Tf(this.g),l=Tf(this.b);return t===fi.AlphaMode.ALWAYS||this.a!==1?[i,s,l,Tf(255*this.a)]:[i,s,l]}clone(){return new fi(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return X(t)&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(Ef(this.r,0,255)),this.g=Math.round(Ef(this.g,0,255)),this.b=Math.round(Ef(this.b,0,255)),this.a=Ef(this.a,0,1),this}_set(t,i,s,l){this.r=t,this.g=i,this.b=s,this.a=l}}fi.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(fi||(fi={}));const Ze=fi;function _ue(e){}function $D(e){return()=>e}function Ue(e,t={}){var i;const s=e instanceof ot?e:new ot(e,t),l={type:(i=t==null?void 0:t.ignoreUnknown)==null||i?s.apiValues:String,json:{type:s.jsonValues,read:(t==null||!t.readOnly)&&{reader:s.read},write:{writer:s.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(l.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(l.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(l.json.name=t.name),S(l)}var Sb;let $1=Sb=class extends ge{constructor(e){super(e),this.type="none"}clone(){return new Sb({type:this.type})}};b([Ue({none:"none",stayAbove:"stay-above"})],$1.prototype,"type",void 0),$1=Sb=b([H("esri.ground.NavigationConstraint")],$1);function F5(e){const t=d5(100*(1-e));return Math.max(0,Math.min(t,100))}function ad(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var Mb;const L6=Se.getLogger("esri.Ground");let lo=Mb=class extends Dd(Go){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new qe;const t=s=>{s.parent&&s.parent!==this&&"remove"in s.parent&&s.parent.remove(s),s.parent=this,s.type!=="elevation"&&s.type!=="base-elevation"&&L6.error(`Layer '${s.title}, id:${s.id}' of type '${s.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=s=>{s.parent=null};this.layers.on("after-add",s=>t(s.item)),this.layers.on("after-remove",s=>i(s.item))}initialize(){this.when().catch(e=>{L6.error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e=J({},e)).resourceInfo),e}set layers(e){this._set("layers",Cu(e,this._get("layers")))}writeLayers(e,t,i,s){const l=[];e&&(s=Te(J({},s),{layerContainerType:"ground"}),e.forEach(d=>{if("write"in d){const y={};$D(d)().write(y,s)&&l.push(y)}else s&&s.messages&&s.messages.push(new re("layer:unsupported",`Layers (${d.title}, ${d.id}) of type '${d.declaredClass}' cannot be persisted in the ground`,{layer:d}))})),t.layers=l}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return g$(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await import("./ElevationQuery.fa8b7cb0.js");mi(t);const s=new i,l=this.layers.filter(D6).toArray();return s.queryAll(l,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await import("./ElevationQuery.fa8b7cb0.js");mi(t);const s=new i,l=this.layers.filter(D6).toArray();return s.createSamplerAll(l,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:le(this.surfaceColor),navigationConstraint:le(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new Mb({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,i){const s=t&&t.origin||"web-scene",l=t&&t.portal||null,d=t&&t.url||null;return import("./layersCreator.e87622c9.js").then(({populateOperationalLayers:y})=>{mi(i);const g=[];if(e.layers&&Array.isArray(e.layers)){const _={context:{origin:s,url:d,portal:l,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};g.push(y(this.layers,e.layers,_))}return Or(g)}).then(()=>{})}};function ID(e){return e&&"createElevationSampler"in e}function D6(e){return e.type==="elevation"||ID(e)}b([S({json:{read:!1}})],lo.prototype,"layers",null),b([ke("layers")],lo.prototype,"writeLayers",null),b([S({readOnly:!0})],lo.prototype,"resourceInfo",void 0),b([S({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Lt,read:{reader:ad,source:"transparency"},write:{writer:(e,t)=>{t.transparency=F5(e)},target:"transparency"}}})],lo.prototype,"opacity",void 0),b([S({type:Ze,json:{type:[Lt],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],lo.prototype,"surfaceColor",void 0),b([S({type:$1,json:{write:!0}})],lo.prototype,"navigationConstraint",void 0),lo=Mb=b([H("esri.Ground")],lo);const tm=lo;let I1=class extends Fe{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!qe.isCollection(e))return this;const i=this._getOrCreateGroup(t);return Array.isArray(e)||qe.isCollection(e)?e.forEach(s=>this._isHandle(s)&&i.push(s)):i.push(e),this.notifyChange("size"),this}forEach(e,t){if(typeof e=="function")this._groups.forEach(i=>i.forEach(e));else{const i=this._getGroup(e);i&&t&&i.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||qe.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let i=0;i<t.length;i++)t[i].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(e=>{for(let t=0;t<e.length;t++)e[t].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};b([S({readOnly:!0})],I1.prototype,"size",null),I1=b([H("esri.core.Handles")],I1);const yr=I1;function Ft(e,t,i={}){return R5(e,t,i,bI)}function fg(e,t,i={}){return R5(e,t,i,wI)}function R5(e,t,i={},s){let l=null;const d=i.once?(y,g)=>{s(y)&&(Ju(l),t(y,g))}:(y,g)=>{s(y)&&t(y,g)};if(l=cj(e,d,i.sync,i.equals),i.initial){const y=e();d(y,y)}return l}function $b(e,t,i,s={}){let l=null,d=null,y=null;function g(){l&&d&&(d.remove(),s.onListenerRemove==null||s.onListenerRemove(l),l=null,d=null)}function _(E){s.once&&s.once&&Ju(y),i(E)}const M=Ft(e,(E,O)=>{g(),Qm(E)&&(l=E,d=eg(E,t,_),s.onListenerAdd==null||s.onListenerAdd(E))},{sync:s.sync,initial:!0});return y=qc(()=>{M.remove(),g()}),y}function L5(e,t){return TD(e,wI,t)}function TD(e,t,i){if(Bn(i))return Promise.reject(yi());const s=e();if(t!=null&&t(s))return Promise.resolve(s);let l=null;function d(){l=Ju(l)}return new Promise((y,g)=>{l=Ym([cn(i,()=>{d(),g(yi())}),R5(e,_=>{d(),y(_)},{sync:!1,once:!0},t!=null?t:bI)])})}function bI(e){return!0}function wI(e){return!!e}const Ib={sync:!0},Gn={initial:!0},Ml={sync:!0,initial:!0};let mc=class extends Fe{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new yr,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,i={}){return this._installWatch(e,t,i,Ft)}addWhen(e,t,i={}){return this._installWatch(e,t,i,fg)}addOnCollectionChange(e,t,{initial:i=!1}={}){const s=++this.handleId;return this.handles.add([$b(e,"after-changes",this._createSyncUpdatingCallback(),Ib),$b(e,"change",t,{onListenerAdd:i?l=>t({added:l.toArray(),removed:[]}):void 0})],s),{remove:()=>this.handles.remove(s)}}addPromise(e){if(ce(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(this.pendingPromises.size!==0||this.handles.has(kf)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const i=()=>this.handles.remove(t);return e.then(i,i),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,i={},s){const l=++this.handleId;i.sync||this._installSyncUpdatingWatch(e,l);const d=s(e,t,i);return this.handles.add(d,l),{remove:()=>this.handles.remove(l)}}_installSyncUpdatingWatch(e,t){const i=this._createSyncUpdatingCallback(),s=Ft(e,i,{sync:!0,equals:()=>!1});return this.handles.add(s,t),s}_createSyncUpdatingCallback(){return()=>{this.handles.remove(kf),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Rd(()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(kf))}),kf)}}};b([S({readOnly:!0})],mc.prototype,"updating",void 0),mc=b([H("esri.views.support.WatchUpdatingTracking")],mc);const kf=-42;var z6;(function(e){e[e.NONE=0]="NONE",e[e.SYNC=1]="SYNC",e[e.INIT=2]="INIT"})(z6||(z6={}));const Yu=e=>{let t=class extends e{destroy(){var i,s;this.destroyed||((i=this._get("handles"))==null||i.destroy(),(s=this._get("updatingHandles"))==null||s.destroy())}get handles(){return this._get("handles")||new yr}get updatingHandles(){return this._get("updatingHandles")||new mc}};return b([S({readOnly:!0})],t.prototype,"handles",null),b([S({readOnly:!0})],t.prototype,"updatingHandles",null),t=b([H("esri.core.HandleOwner")],t),t};let Ic=class extends Yu(Fe){};Ic=b([H("esri.core.HandleOwner")],Ic);let _h=class extends Yu(qe){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add(HM(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=X(this.getCollections)?this.getCollections():null;if(ce(e))return void this.removeAll();let t=0;for(const i of e)X(i)&&(t=this._processCollection(t,i));this.splice(t,this.length)}_createNewInstance(e){return new qe(e)}_processCollection(e,t){if(!t)return e;const i=this.itemFilterFunction?this.itemFilterFunction:s=>!!s;for(const s of t)if(s){if(i(s)){const l=this.indexOf(s,e);l>=0?l!==e&&this.reorder(s,e):this.add(s,e),++e}if(this.getChildrenFunction){const l=this.getChildrenFunction(s);if(Array.isArray(l))for(const d of l)e=this._processCollection(e,d);else e=this._processCollection(e,l)}}return e}};b([S()],_h.prototype,"getCollections",void 0),b([S()],_h.prototype,"getChildrenFunction",void 0),b([S()],_h.prototype,"itemFilterFunction",void 0),_h=b([H("esri.core.CollectionFlattener")],_h);const gc=_h;function ED(e){var t;return!!(e&&e.loaded&&"capabilities"in e&&e!=null&&(t=e.capabilities)!=null&&t.operations&&"supportsEditing"in e.capabilities.operations&&e.capabilities.operations.supportsEditing===!0)&&!("editingEnabled"in e&&!e.editingEnabled)}const V6=Se.getLogger("esri.support.basemapUtils");function kD(){return{}}function AD(e){for(const t in e){const i=e[t];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete e[t]}}function OD(e,t){var i;let s;if(typeof e=="string"){if(!(e in wb)){const l=Object.entries(wb).filter(([d,y])=>Ct.apiKey&&!y.classic||!Ct.apiKey&&y.classic&&!y.deprecated).map(([d])=>`"${d}"`).join(", ");return V6.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${l}`),null}t&&(s=t[e]),s||(s=Qy.fromId(e),t&&(t[e]=s))}else s=gi(Qy,e);return(i=s)!=null&&i.destroyed&&(V6.warn("The provided basemap is already destroyed",{basemap:s}),s=null),s}const CD=Se.getLogger("esri.support.groundUtils"),G6={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function PD(e){let t=null;if(typeof e=="string")if(e in G6){const i=G6[e];t=new tm({resourceInfo:{data:{layers:[i]}}})}else CD.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=gi(tm,e);return t}function Tc(e,t,i=!1){let{hasM:s,hasZ:l}=e;Array.isArray(t)?t.length!==4||s||l?t.length===3&&i&&!s?(l=!0,s=!1):t.length===3&&s&&l&&(s=!1,l=!1):(s=!0,l=!0):(l=!l&&t.hasZ&&(!s||t.hasM),s=!s&&t.hasM&&(!l||t.hasZ)),e.hasZ=l,e.hasM=s}var Tb;function q6(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function ND(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let la=Tb=class extends Pr{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return null;const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):ND(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const s=i.points&&i.points[0];return s&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=s.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=s.length>3:i.hasM===void 0&&(i.hasM=s.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Mt,i=this.hasZ,s=this.hasM,l=i?3:2,d=e[0],y=q6(Math.min),g=q6(Math.max);let _,M,E,O,[P,j]=d,[R,z]=d;for(let q=0,Y=e.length;q<Y;q++){const te=e[q],[ne,he]=te;if(P=y(P,ne),j=y(j,he),R=g(R,ne),z=g(z,he),i&&te.length>2){const se=te[2];_=y(_,se),E=g(E,se)}if(s&&te.length>l){const se=te[l];M=y(M,se),O=g(O,se)}}return t.xmin=P,t.ymin=j,t.xmax=R,t.ymax=z,t.spatialReference=this.spatialReference,i?(t.zmin=_,t.zmax=E):(t.zmin=null,t.zmax=null),s?(t.mmin=M,t.mmax=O):(t.mmin=null,t.mmax=null),t}writePoints(e,t){t.points=le(this.points)}addPoint(e){return Tc(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:le(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new Tb(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let s=2;return this.hasZ&&(i.z=t[2],s=3),this.hasM&&(i.m=t[s]),new Be(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new Be(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Tc(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};b([S({readOnly:!0})],la.prototype,"cache",null),b([S()],la.prototype,"extent",null),b([S({type:[[Number]],json:{write:{isRequired:!0}}})],la.prototype,"points",void 0),b([ke("points")],la.prototype,"writePoints",null),la=Tb=b([H("esri.geometry.Multipoint")],la),la.prototype.toJSON.isDefaultToJSON=!0;const Xu=la;function jD(e,t){const i=t[0]-e[0],s=t[1]-e[1];if(e.length>2&&t.length>2){const l=e[2]-t[2];return Math.sqrt(i*i+s*s+l*l)}return Math.sqrt(i*i+s*s)}function FD(e,t,i){const s=e[0]+i*(t[0]-e[0]),l=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[s,l,e[2]+i*(t[2]-e[2])]:[s,l]}function RD(e,t,i,s){const[l,d]=t,[y,g]=i[s],[_,M]=i[s+1],E=_-y,O=M-g,P=E*E+O*O,j=(l-y)*E+(d-g)*O,R=Math.min(1,Math.max(0,j/P));return e[0]=y+E*R,e[1]=g+O*R,e}function LD(e,t){return FD(e,t,.5)}function D5(e,t,i){const s=e.length;let l=0,d=0,y=0;for(let g=0;g<s;g++){const _=e[g],M=e[(g+1)%s];let E=2;l+=_[0]*M[1]-M[0]*_[1],_.length>2&&M.length>2&&i&&(d+=_[0]*M[2]-M[0]*_[2],E=3),_.length>E&&M.length>E&&t&&(y+=_[0]*M[E]-M[0]*_[E])}return l<=0&&d<=0&&y<=0}function xue(e){if("rings"in e){for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(e.rings.length>0&&!D5(e.rings[0],e.hasM,e.hasZ))for(let t=0;t<e.rings.length;++t)e.rings[t]=e.rings[t].reverse()}}function Sue(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function DD(e){return e?zD(e.rings,e.hasZ):null}function zD(e,t){if(!e||!e.length)return null;const i=[],s=[],l=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let d=0,y=e.length;d<y;d++){const g=VD(e[d],t,l);g&&s.push(g)}if(s.sort((d,y)=>{let g=d[2]-y[2];return g===0&&t&&(g=d[4]-y[4]),g}),s.length&&(i[0]=s[0][0],i[1]=s[0][1],t&&(i[2]=s[0][3]),(i[0]<l[0]||i[0]>l[1]||i[1]<l[2]||i[1]>l[3]||t&&(i[2]<l[4]||i[2]>l[5]))&&(i.length=0)),!i.length){const d=e[0]&&e[0].length?GD(e[0],t):null;if(!d)return null;i[0]=d[0],i[1]=d[1],t&&d.length>2&&(i[2]=d[2])}return i}function VD(e,t,i){let s=0,l=0,d=0,y=0,g=0;const _=e.length?e[0][0]:0,M=e.length?e[0][1]:0,E=e.length&&t?e[0][2]:0;for(let P=0;P<e.length;P++){const j=e[P],R=e[(P+1)%e.length],[z,q,Y]=j,te=z-_,ne=q-M,he=t?Y-E:void 0,[se,ue,Ee]=R,Oe=se-_,Le=ue-M,Ne=t?Ee-E:void 0,je=te*Le-Oe*ne;if(y+=je,s+=(te+Oe)*je,l+=(ne+Le)*je,t&&j.length>2&&R.length>2){const De=te*Ne-Oe*he;d+=(he+Ne)*De,g+=De}z<i[0]&&(i[0]=z),z>i[1]&&(i[1]=z),q<i[2]&&(i[2]=q),q>i[3]&&(i[3]=q),t&&(Y<i[4]&&(i[4]=Y),Y>i[5]&&(i[5]=Y))}if(y>0&&(y*=-1),g>0&&(g*=-1),!y)return null;y*=.5,g*=.5;const O=[s/(6*y)+_,l/(6*y)+M,y];return t&&(i[4]===i[5]||g===0?(O[3]=(i[4]+i[5])/2,O[4]=0):(O[3]=d/(6*g)+E,O[4]=g)),O}function GD(e,t){const i=t?[0,0,0]:[0,0],s=t?[0,0,0]:[0,0];let l=0,d=0,y=0,g=0;for(let _=0,M=e.length;_<M-1;_++){const E=e[_],O=e[_+1];if(E&&O){i[0]=E[0],i[1]=E[1],s[0]=O[0],s[1]=O[1],t&&E.length>2&&O.length>2&&(i[2]=E[2],s[2]=O[2]);const P=jD(i,s);if(P){l+=P;const j=LD(E,O);d+=P*j[0],y+=P*j[1],t&&j.length>2&&(g+=P*j[2])}}}return l>0?t?[d/l,y/l,g/l]:[d/l,y/l]:e.length?e[0]:null}function _I(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function xI(e){return e.points!==void 0}function SI(e){return e.x!==void 0&&e.y!==void 0}function MI(e){return e.paths!==void 0}function $I(e){return e.rings!==void 0}function II(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}const Ba=II(Math.min),Ha=II(Math.max);function Mue(e,t){return MI(t)?Ec(e,t.paths,!1,!1):$I(t)?Ec(e,t.rings,!1,!1):xI(t)?z5(e,t.points,!1,!1,!1,!1):_I(t)?TI(e,t):(SI(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function $ue(e,t){return MI(t)?Ec(e,t.paths,!0,!1):$I(t)?Ec(e,t.rings,!0,!1):xI(t)?z5(e,t.points,!0,!1,!0,!1):_I(t)?TI(e,t,!0,!1,!0,!1):(SI(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Ec(e,t,i,s){const l=i?3:2;if(!t.length||!t[0].length)return null;let d,y,g,_,[M,E]=t[0][0],[O,P]=t[0][0];for(let j=0;j<t.length;j++){const R=t[j];for(let z=0;z<R.length;z++){const q=R[z],[Y,te]=q;if(M=Ba(M,Y),E=Ba(E,te),O=Ha(O,Y),P=Ha(P,te),i&&q.length>2){const ne=q[2];d=Ba(d,ne),y=Ha(y,ne)}if(s&&q.length>l){const ne=q[l];g=Ba(d,ne),_=Ha(y,ne)}}}return i?s?(e[0]=M,e[1]=E,e[2]=d,e[3]=g,e[4]=O,e[5]=P,e[6]=y,e[7]=_,e.length=8,e):(e[0]=M,e[1]=E,e[2]=d,e[3]=O,e[4]=P,e[5]=y,e.length=6,e):s?(e[0]=M,e[1]=E,e[2]=g,e[3]=O,e[4]=P,e[5]=_,e.length=6,e):(e[0]=M,e[1]=E,e[2]=O,e[3]=P,e.length=4,e)}function TI(e,t,i,s,l,d){const y=t.xmin,g=t.xmax,_=t.ymin,M=t.ymax;let E=t.zmin,O=t.zmax,P=t.mmin,j=t.mmax;return l?(E=E||0,O=O||0,d?(P=P||0,j=j||0,e[0]=y,e[1]=_,e[2]=E,e[3]=P,e[4]=g,e[5]=M,e[6]=O,e[7]=j,e):(e[0]=y,e[1]=_,e[2]=E,e[3]=g,e[4]=M,e[5]=O,e)):d?(P=P||0,j=j||0,e[0]=y,e[1]=_,e[2]=P,e[3]=g,e[4]=M,e[5]=j,e):(e[0]=y,e[1]=_,e[2]=g,e[3]=M,e)}function z5(e,t,i,s,l,d){const y=i?3:2,g=s&&d,_=i&&l;if(!t.length||!t[0].length)return null;let M,E,O,P,[j,R]=t[0],[z,q]=t[0];for(let Y=0;Y<t.length;Y++){const te=t[Y],[ne,he]=te;if(j=Ba(j,ne),R=Ba(R,he),z=Ha(z,ne),q=Ha(q,he),_&&te.length>2){const se=te[2];M=Ba(M,se),E=Ha(E,se)}if(g&&te.length>y){const se=te[y];O=Ba(M,se),P=Ha(E,se)}}return l?(M=M||0,E=E||0,d?(O=O||0,P=P||0,e[0]=j,e[1]=R,e[2]=M,e[3]=O,e[4]=z,e[5]=q,e[6]=E,e[7]=P,e):(e[0]=j,e[1]=R,e[2]=M,e[3]=z,e[4]=q,e[5]=E,e)):d?(O=O||0,P=P||0,e[0]=j,e[1]=R,e[2]=O,e[3]=z,e[4]=q,e[5]=P,e):(e[0]=j,e[1]=R,e[2]=z,e[3]=q,e)}function qD(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function UD(e){return e.points!==void 0}function BD(e){return e.x!==void 0&&e.y!==void 0}function HD(e){return e.paths!==void 0}function WD(e){return e.rings!==void 0}const V5=[];function EI(e,t,i,s){return{xmin:e,ymin:t,xmax:i,ymax:s}}function kI(e,t,i,s,l,d){return{xmin:e,ymin:t,zmin:i,xmax:s,ymax:l,zmax:d}}function AI(e,t,i,s,l,d){return{xmin:e,ymin:t,mmin:i,xmax:s,ymax:l,mmax:d}}function OI(e,t,i,s,l,d,y,g){return{xmin:e,ymin:t,zmin:i,mmin:s,xmax:l,ymax:d,zmax:y,mmax:g}}function G5(e,t=!1,i=!1){return t?i?OI(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):kI(e[0],e[1],e[2],e[3],e[4],e[5]):i?AI(e[0],e[1],e[2],e[3],e[4],e[5]):EI(e[0],e[1],e[2],e[3])}function Iue(e){return e?qD(e)?e:BD(e)?KD(e):WD(e)?CI(e):HD(e)?PI(e):UD(e)?JD(e):null:null}function JD(e){const{hasZ:t,hasM:i,points:s}=e;return G5(z5(V5,s,t,i),t,i)}function KD(e){const{x:t,y:i,z:s,m:l}=e,d=l!=null;return s!=null?d?OI(t,i,s,l,t,i,s,l):kI(t,i,s,t,i,s):d?AI(t,i,l,t,i,l):EI(t,i,t,i)}function CI(e){const{hasZ:t,hasM:i,rings:s}=e,l=Ec(V5,s,t,i);return l?G5(l,t,i):null}function PI(e){const{hasZ:t,hasM:i,paths:s}=e,l=Ec(V5,s,t,i);return l?G5(l,t,i):null}var T1;function U6(e){return!Array.isArray(e[0])}let _n=T1=class extends Pr{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){const t=e.clone().normalize(),i=e.spatialReference;let s=!1,l=!1;for(const y of t)y.hasZ&&(s=!0),y.hasM&&(l=!0);const d={rings:t.map(function(y){const g=[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]];if(s&&y.hasZ){const _=y.zmin+.5*(y.zmax-y.zmin);for(let M=0;M<g.length;M++)g[M].push(_)}if(l&&y.hasM){const _=y.mmin+.5*(y.mmax-y.mmin);for(let M=0;M<g.length;M++)g[M].push(_)}return g}),spatialReference:i};return s&&(d.hasZ=!0),l&&(d.hasM=!0),new T1(d)}normalizeCtorArgs(e,t){let i,s,l=null,d=null;return e&&!Array.isArray(e)?(l=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),i=e.hasZ,s=e.hasM):l=e,l=l||[],t=t||it.WGS84,l.length&&l[0]&&l[0][0]!=null&&typeof l[0][0]=="number"&&(l=[l]),d=l[0]&&l[0][0],d&&(i===void 0&&s===void 0?(i=d.length>2,s=d.length>3):i===void 0?i=s?d.length>3:d.length>2:s===void 0&&(s=i?d.length>3:d.length>2)),{rings:l,spatialReference:t,hasZ:i,hasM:s}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=DD(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new Be;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=CI(this);if(!t)return null;const i=new Mt(t);return i.spatialReference=e,i}get isSelfIntersecting(){return OR(this.rings)}writeRings(e,t){t.rings=le(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(U6(e)){const s=[];for(let l=0,d=e.length;l<d;l++)s[l]=e[l].toArray();t[i]=s}else t[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new T1;return e.spatialReference=this.spatialReference,e.rings=le(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(ce(e))return!1;const t=this.spatialReference,i=e.spatialReference;if(X(t)!==X(i)||X(t)&&X(i)&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const s=([l,d,y,g],[_,M,E,O])=>l===_&&d===M&&(y==null&&E==null||y===E)&&(g==null&&O==null||g===O);for(let l=0;l<this.rings.length;l++){const d=this.rings[l],y=e.rings[l];if(!pM(d,y,s))return!1}return!0}contains(e){if(!e)return!1;const t=pg(e,this.spatialReference);return L$(this,X(t)?t:e)}isClockwise(e){let t;return t=U6(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e,D5(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],s=this.hasZ,l=this.hasM;return s&&!l?new Be(i[0],i[1],i[2],void 0,this.spatialReference):l&&!s?new Be(i[0],i[1],void 0,i[2],this.spatialReference):s&&l?new Be(i[0],i[1],i[2],i[3],this.spatialReference):new Be(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Tc(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new Be(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,s=t.map(l=>new Be(l,i));return this.notifyChange("rings"),s}setPoint(e,t,i){return this._validateInputs(e,t)?(Tc(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const s=this.rings[e];if(i&&(t<0||t>s.length)||!i&&(t<0||t>=s.length))return!1}return!0}toJSON(e){return this.write({},e)}};b([S({readOnly:!0})],_n.prototype,"cache",null),b([S({readOnly:!0})],_n.prototype,"centroid",null),b([S({readOnly:!0})],_n.prototype,"extent",null),b([S({readOnly:!0})],_n.prototype,"isSelfIntersecting",null),b([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],_n.prototype,"rings",void 0),b([ke("rings")],_n.prototype,"writeRings",null),_n=T1=b([H("esri.geometry.Polygon")],_n),_n.prototype.toJSON.isDefaultToJSON=!0;const Ts=_n;var Eb;function YD(e){return!Array.isArray(e[0])}let ua=Eb=class extends Pr{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let i,s,l=null,d=null;return e&&!Array.isArray(e)?(l=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),i=e.hasZ,s=e.hasM):l=e,l=l||[],t=t||it.WGS84,l.length&&l[0]&&l[0][0]!=null&&typeof l[0][0]=="number"&&(l=[l]),d=l[0]&&l[0][0],d&&(i===void 0&&s===void 0?(i=d.length>2,s=!1):i===void 0?i=!s&&d.length>3:s===void 0&&(s=!i&&d.length>3)),{paths:l,spatialReference:t,hasZ:i,hasM:s}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=PI(this);if(!t)return null;const i=new Mt(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=le(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(YD(e)){const s=[];for(let l=0,d=e.length;l<d;l++)s[l]=e[l].toArray();t[i]=s}else t[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new Eb;return e.spatialReference=this.spatialReference,e.paths=le(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],s=this.hasZ,l=this.hasM;return s&&!l?new Be(i[0],i[1],i[2],void 0,this.spatialReference):l&&!s?new Be(i[0],i[1],void 0,i[2],this.spatialReference):s&&l?new Be(i[0],i[1],i[2],i[3],this.spatialReference):new Be(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Tc(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,s=t.map(l=>new Be(l,i));return this.notifyChange("paths"),s}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new Be(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(Tc(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const s=this.paths[e];if(i&&(t<0||t>s.length)||!i&&(t<0||t>=s.length))return!1}return!0}toJSON(e){return this.write({},e)}};b([S({readOnly:!0})],ua.prototype,"cache",null),b([S({readOnly:!0})],ua.prototype,"extent",null),b([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],ua.prototype,"paths",void 0),b([ke("paths")],ua.prototype,"writePaths",null),ua=Eb=b([H("esri.geometry.Polyline")],ua),ua.prototype.toJSON.isDefaultToJSON=!0;const Ir=ua,XD=Hi()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),B6=Hi()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function NI(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function q5(e){return e.points!==void 0}function U5(e){return e.x!==void 0&&e.y!==void 0}function B5(e){return e.paths!==void 0}function Mu(e){return e.rings!==void 0}function nl(e){return ce(e)?null:e instanceof Pr?e:U5(e)?Be.fromJSON(e):B5(e)?Ir.fromJSON(e):Mu(e)?Ts.fromJSON(e):q5(e)?Xu.fromJSON(e):NI(e)?Mt.fromJSON(e):null}function zd(e){return e?U5(e)?"esriGeometryPoint":B5(e)?"esriGeometryPolyline":Mu(e)?"esriGeometryPolygon":NI(e)?"esriGeometryEnvelope":q5(e)?"esriGeometryMultipoint":null:null}const ZD={esriGeometryPoint:Be,esriGeometryPolyline:Ir,esriGeometryPolygon:Ts,esriGeometryEnvelope:Mt,esriGeometryMultipoint:Xu};function QD(e){return e&&ZD[e]||null}const Zu={base:Pr,key:"type",typeMap:{extent:Mt,multipoint:Xu,point:Be,polyline:Ir,polygon:Ts}};Hn(Zu);let ez=0;const H5=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+ez++})}};return t=b([H("esri.core.Identifiable")],t),t};let H6=class extends H5(class{}){};H6=b([H("esri.core.Identifiable")],H6);let tz=0;const W6=Se.getLogger("esri.layers.Layer");let Ti=class extends hl.EventedMixin(H5(Go)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Mt(-180,-90,180,90,it.WGS84),this.id=Date.now().toString(16)+"-layer-"+tz++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=it.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e,i=await import("./arcgisLayers.793a5004.js");try{return await i.fromUrl(t)}catch(s){throw W6.error("#fromArcGISServerUrl({ url: '"+t.url+"'})","Failed to create layer from arcgis server url",s),s}}static async fromPortalItem(e){const t="portalItem"in e?e:{portalItem:e},i=await import("./portalLayers.58cc495f.js");try{return await i.fromItem(t)}catch(s){const l=t&&t.portalItem,d=l&&l.id||"unset",y=l&&l.portal&&l.portal.url||Ct.portalUrl;throw W6.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+y+"', id: '"+d+"')",s),s}}initialize(){this.when().catch(e=>{var t,i;ks(e)||Se.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${(t=this.title)!=null?t:"no title"}', id: '${(i=this.id)!=null?i:"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){const e=this.url;return e?Ri(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Ht(e,{query:{f:"json"},responseType:"json"})).data;throw new re("layer:no-attribution-data","Layer does not have attribution data")}};b([S({type:String})],Ti.prototype,"attributionDataUrl",void 0),b([S({type:Mt})],Ti.prototype,"fullExtent",void 0),b([S({readOnly:!0})],Ti.prototype,"hasAttributionData",null),b([S({type:String,clonable:!1})],Ti.prototype,"id",void 0),b([S({type:Boolean,nonNullable:!0})],Ti.prototype,"legendEnabled",void 0),b([S({type:["show","hide","hide-children"]})],Ti.prototype,"listMode",void 0),b([S({type:Number,range:{min:0,max:1},nonNullable:!0})],Ti.prototype,"opacity",void 0),b([S({clonable:!1})],Ti.prototype,"parent",void 0),b([S({readOnly:!0})],Ti.prototype,"parsedUrl",null),b([S({type:Boolean})],Ti.prototype,"popupEnabled",void 0),b([S({type:Boolean})],Ti.prototype,"attributionVisible",void 0),b([S({type:it})],Ti.prototype,"spatialReference",void 0),b([S({type:String})],Ti.prototype,"title",void 0),b([S({type:String,readOnly:!0,json:{read:!1}})],Ti.prototype,"type",void 0),b([S()],Ti.prototype,"url",void 0),b([S({type:Boolean,nonNullable:!0})],Ti.prototype,"visible",void 0),Ti=b([H("esri.layers.Layer")],Ti);const yg=Ti;function iz(e){return e&&e.type==="group"}function kb(e,t,i){let s,l;if(e)for(let d=0,y=e.length;d<y;d++){if(s=e.getItemAt(d),s[t]===i)return s;if(iz(s)&&(l=kb(s.layers,t,i),l))return l}}const J6=Se.getLogger("esri.support.LayersMixin"),rz=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new qe;const s=y=>{y.parent&&"remove"in y.parent&&y.parent.remove(y)},l=y=>{y.parent=this,this.layerAdded(y),y.type!=="elevation"&&y.type!=="base-elevation"||J6.error(`Layer 'title:${y.title}, id:${y.id}' of type '${y.type}' is not supported as an operational layer and will therefore be ignored.`)},d=y=>{y.parent=null,this.layerRemoved(y)};this.layers.on("before-add",y=>s(y.item)),this.layers.on("after-add",y=>l(y.item)),this.layers.on("after-remove",y=>d(y.item))}destroy(){const i=this.layers.removeAll();for(const s of i)this.layerRemoved(s),s.destroy();this.layers.destroy()}set layers(i){this._set("layers",Cu(i,this._get("layers")))}add(i,s){const l=this.layers;if(s=l.getNextIndex(s),i instanceof yg){const d=i;d.parent===this?this.reorder(d,s):l.add(d,s)}else Bo(i)?i.then(d=>{this.destroyed||this.add(d,s)}):J6.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,s){const l=this.layers;s=l.getNextIndex(s),i.slice().forEach(d=>{d.parent!==this?(l.add(d,s),s+=1):this.reorder(d,s)})}findLayerById(i){return kb(this.layers,"id",i)}findLayerByUid(i){return kb(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,s){return this.layers.reorder(i,s)}layerAdded(i){}layerRemoved(i){}};return b([S()],t.prototype,"layers",null),t=b([H("esri.support.LayersMixin")],t),t},jI="esri.support.TablesMixin",sz=Se.getLogger(jI);function nz(e){return e&&e.type==="group"}function Ab(e,t,i){if(e)for(let s=0,l=e.length;s<l;s++){const d=e.getItemAt(s);if(d[t]===i)return d;if(nz(d)){const y=Ab(d.tables,t,i);if(y)return y}}}const oz=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new qe,this.tables.on("after-add",s=>{const l=s.item;l.parent&&l.parent!==this&&"tables"in l.parent&&l.parent.tables.remove(l),l.parent=this,l.type!=="feature"&&sz.error(`Layer 'title:${l.title}, id:${l.id}' of type '${l.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",s=>{s.item.parent=null})}destroy(){const i=this.tables.removeAll();for(const s of i)s.destroy();this.tables.destroy()}set tables(i){this._set("tables",Cu(i,this._get("tables")))}findTableById(i){return Ab(this.tables,"id",i)}findTableByUid(i){return Ab(this.tables,"uid",i)}};return b([S()],t.prototype,"tables",null),t=b([H(jI)],t),t};let xn=class extends oz(rz(hl.EventedMixin(Fe))){constructor(e){super(e),this.allLayers=new gc({getCollections:()=>{var t,i,s;return[(t=this.basemap)==null?void 0:t.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(s=this.basemap)==null?void 0:s.referenceLayers]},getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=new gc({getCollections:()=>[this.tables,this.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return i&&"tables"in i&&i.tables.includes(t)}}),this.basemap=null,this.editableLayers=new gc({getCollections:()=>[this.allLayers],itemFilterFunction:ED}),this.ground=new tm,this._basemapCache=kD()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(t=this.basemap)==null||t.destroy(),AD(this._basemapCache),this._basemapCache=null}castBasemap(e){return OD(e,this._basemapCache)}castGround(e){const t=PD(e);return ce(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};b([S({readOnly:!0,dependsOn:[]})],xn.prototype,"allLayers",void 0),b([S({readOnly:!0})],xn.prototype,"allTables",void 0),b([S({type:Qy})],xn.prototype,"basemap",void 0),b([yt("basemap")],xn.prototype,"castBasemap",null),b([S({readOnly:!0})],xn.prototype,"editableLayers",void 0),b([S({type:tm,nonNullable:!0})],xn.prototype,"ground",void 0),b([yt("ground")],xn.prototype,"castGround",null),xn=b([H("esri.Map")],xn);const az=xn;var kc;function lz(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,s="range"in e?e.range[1]:e.maxValue;if(+t<i||+t>s)return kc.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(i=>i==null||i.code!==t))return kc.INVALID_CODED_VALUE}return null}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(kc||(kc={}));let Tv;function qo(){return Tv||(Tv=(async()=>{const e=await import("./arcadeUtils.0781186f.js").then(function(t){return t.q});return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),Tv}const Tue=(e,t,i)=>Vd.create(e,t,i,null,["$feature"]),Eue=(e,t,i)=>Vd.create(e,t,i,null,["$feature","$view"]),uz=(e,t,i,s)=>Vd.create(e,t,i,s,["$feature","$view"]);class Vd{constructor(t,i,s,l,d,y,g,_){this.script=t,this.evaluate=d;const M=Array.isArray(g)?g:g.fields;this.fields=M,this._syntaxTree=l,this._arcade=i,this._arcadeDictionary=s,this._arcadeFeature=y,this._spatialReference=_,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,s,l,d,y){const{arcade:g,Feature:_,Dictionary:M}=await qo(),E=it.fromJSON(i),O=g.parseScript(t,y),P=d.reduce((se,ue)=>Te(J({},se),{[ue]:null}),{});let j=null;X(l)&&(j=new M(l),j.immutable=!0,P.$config=null);const R=g.scriptUsesGeometryEngine(O)&&g.enableGeometrySupport(),z=g.scriptUsesFeatureSet(O)&&g.enableFeatureSetSupport(),q=g.scriptIsAsync(O)&&g.enableAsyncSupport(),Y={vars:P,spatialReference:E,useAsync:!!q},te=new M;te.immutable=!1,te.setField("scale",0);const ne=g.compileScript(O,Y),he=se=>("$view"in se&&se.$view&&(te.setField("scale",se.$view.scale),se.$view=te),j&&(se.$config=j),ne({vars:se,spatialReference:E}));return await Promise.all([R,z,q]),new Vd(t,g,M,O,he,new _,s,E)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(t){return this._arcade.referencesMember(this._syntaxTree,t)}referencesFunction(t){return this._arcade.referencesFunction(this._syntaxTree,t)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}const hz=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],cz=["field","normalizationField"];function K6(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(Y6(hz,i,t),"visualVariables"in i&&i.visualVariables)for(const s of i.visualVariables)Y6(cz,s,t)}}function Y6(e,t,i){if(e)for(const s of e){const l=Gc(s,t),d=l&&typeof l!="function"&&i.get(l);d&&es(s,d.name,t)}}function FI(e,t){if(e!=null&&t!=null&&t.fields.length)if("startField"in e){const i=t.get(e.startField),s=t.get(e.endField);e.startField=i&&i.name||null,e.endField=s&&s.name||null}else{const i=t.get(e.startTimeField),s=t.get(e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=s&&s.name||null}}const Ev=new Set;function RI(e,t){return e&&t?(Ev.clear(),ld(Ev,e,t),Array.from(Ev).sort()):[]}function ld(e,t,i){var s;if(i)if(t!=null&&(s=t.fields)!=null&&s.length)if(i.includes("*"))for(const{name:l}of t.fields)e.add(l);else for(const l of i)$s(e,t,l);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const l of i)e.add(l)}}function $s(e,t,i){if(typeof i=="string")if(t){const s=t.get(i);s&&e.add(s.name)}else e.add(i)}function kue(e,t){return ce(t)||ce(e)?[]:t.includes("*")?e.fields.map(i=>i.name):t}async function is(e,t,i){var s;if(!i)return;const{arcadeUtils:l}=await qo(),d=l.extractFieldNames(i,t==null||(s=t.fields)==null?void 0:s.map(y=>y.name));for(const y of d)$s(e,t,y)}async function LI(e,t,i){if(i&&i!=="1=1"){const s=(await import("./WhereClause.064f498e.js")).WhereClause.create(i,t);if(!s.isStandardized)throw new re("fieldUtils:collectFilterFields","Where clause is not standardized");ld(e,t,s.fieldNames)}}function pz({displayField:e,fields:t}){return e||(t&&t.length?kv(t,"name-or-title")||kv(t,"unique-identifier")||kv(t,"type-or-category")||dz(t):null)}function dz(e){for(const t of e){if(!t||!t.name)continue;const i=t.name.toLowerCase();if(i.indexOf("name")>-1||i.indexOf("title")>-1)return t.name}return null}function kv(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function Aue(e,t){if(!t)return;const i=Gc("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}async function fz(e,t,i){i.outStatistic.onStatisticValueExpression?is(e,t,i.outStatistic.onStatisticValueExpression):e.add(i.outStatistic.onStatisticField)}async function Oue(e,t,i){var s,l;if(!t||!i||i.type!=="cluster")return;const d=[];if((s=i.popupTemplate)!=null&&s.expressionInfos&&d.push(...i.popupTemplate.expressionInfos.map(y=>is(e,t.fieldsIndex,y.expression))),Array.isArray((l=i.popupTemplate)==null?void 0:l.content)){const y=i.popupTemplate.content;for(const g of y)g.type==="expression"&&g.expressionInfo&&d.push(is(e,t.fieldsIndex,g.expressionInfo.expression))}i.fields&&d.push(...i.fields.map(y=>fz(e,t.fieldsIndex,y))),await Promise.all(d)}async function Cue(e,t,i){t&&(t.timeInfo&&X(i)&&i.timeExtent&&ld(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&ld(e,t.fieldsIndex,[t.floorInfo.floorField]),X(i)&&X(i.where)&&await LI(e,t.fieldsIndex,i.where))}async function Pue(e,t,i){t&&i&&await Promise.all(i.map(s=>yz(e,t,s)))}async function yz(e,t,i){t&&i&&(i.valueExpression?await is(e,t.fieldsIndex,i.valueExpression):i.field&&$s(e,t.fieldsIndex,i.field))}function Nue(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?RI(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}async function jue(e,t){const{labelingInfo:i,fieldsIndex:s}=t;i&&i.length&&await Promise.all(i.map(l=>mz(e,s,l)))}async function mz(e,t,i){if(!i)return;const s=i.getLabelExpression(),l=i.where;if(s.type==="arcade")await is(e,t,s.expression);else{const d=s.expression.match(/{[^}]*}/g);d&&d.forEach(y=>{$s(e,t,y.slice(1,-1))})}await LI(e,t,l)}function gz(e){const t=e.defaultValue;return t!==void 0&&VI(e,t)?t:e.nullable?null:void 0}function DI(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function vz(e){return e===null||DI(e)}const W5="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function bz(e){return e===null||W5(e)}function zI(e){return e!=null&&typeof e=="string"}function wz(e){return e===null||zI(e)}function _z(){return!0}function VI(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?bz:W5;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?vz:DI;break;case"string":case"esriFieldTypeString":i=e.nullable?wz:zI;break;default:i=_z}return arguments.length===1?i:i(t)}const xz=["integer","small-integer","single","double"],Sz=new Set([...xz,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function J5(e){return e!=null&&Sz.has(e.type)}function Fue(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}var im,rm;function Rue(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function Lue(e,t){return e.nullable&&t===null?null:J5(e)&&!Mz(e.type,Number(t))?im.OUT_OF_RANGE:VI(e,t)?e.domain?lz(e.domain,t):null:rm.INVALID_TYPE}function Mz(e,t){const i=typeof e=="string"?GI(e):e;return!!i&&(i.isInteger?W5(t)&&t>=i.min&&t<=i.max:t>=i.min&&t<=i.max)}function GI(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return $z;case"esriFieldTypeInteger":case"integer":return Iz;case"esriFieldTypeSingle":case"single":return Tz;case"esriFieldTypeDouble":case"double":return Ez}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(im||(im={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(rm||(rm={}));const $z={min:-32768,max:32767,isInteger:!0},Iz={min:-2147483648,max:2147483647,isInteger:!0},Tz={min:-34e37,max:12e37,isInteger:!1},Ez={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Due(e,t,i){switch(e){case kc.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case kc.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case rm.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case im.OUT_OF_RANGE:{const{min:s,max:l}=GI(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${s} to ${l}`}}}function kz(e,t){return!Az(e,t,null)}function Az(e,t,i){if(!t||!t.attributes||!e){if(X(i))for(const d of e)i.add(d);return!0}const s=t.attributes;let l=!1;for(const d of e)if(!(d in s)){if(l=!0,!X(i))break;i.add(d)}return l}let E1=class extends ge{constructor(e){super(e),this.type=null}};b([S({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],E1.prototype,"type",void 0),E1=b([H("esri.popup.content.Content")],E1);const Qu=E1;var Ob;let $l=Ob=class extends Qu{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new Ob({description:this.description,displayType:this.displayType,title:this.title})}};b([S({type:String,json:{write:!0}})],$l.prototype,"description",void 0),b([S({type:["auto","preview","list"],json:{write:!0}})],$l.prototype,"displayType",void 0),b([S({type:String,json:{write:!0}})],$l.prototype,"title",void 0),b([S({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],$l.prototype,"type",void 0),$l=Ob=b([H("esri.popup.content.AttachmentsContent")],$l);const ud=$l;var Cb;let Il=Cb=class extends Qu{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new Cb({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?le(this.outFields):null})}};b([S()],Il.prototype,"creator",void 0),b([S()],Il.prototype,"destroyer",void 0),b([S()],Il.prototype,"outFields",void 0),b([S({type:["custom"],readOnly:!0})],Il.prototype,"type",void 0),Il=Cb=b([H("esri.popup.content.CustomContent")],Il);const Oz=Il;var Pb;let xh=Pb=class extends ge{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new Pb({title:this.title,expression:this.expression})}};b([S({type:String,json:{write:!0}})],xh.prototype,"title",void 0),b([S({type:String,json:{write:!0}})],xh.prototype,"expression",void 0),b([S({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],xh.prototype,"returnType",void 0),xh=Pb=b([H("esri.popup.ElementExpressionInfo")],xh);const qI=xh;var Nb;let qp=Nb=class extends Qu{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new Nb({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};b([S({type:qI,json:{write:!0}})],qp.prototype,"expressionInfo",void 0),b([S({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],qp.prototype,"type",void 0),qp=Nb=b([H("esri.popup.content.ExpressionContent")],qp);const K5=qp,hd=Hi()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});hd.toJSON.bind(hd);hd.fromJSON.bind(hd);const gn={year:"numeric",month:"numeric",day:"numeric"},gp={year:"numeric",month:"long",day:"numeric"},vp={year:"numeric",month:"short",day:"numeric"},bp={year:"numeric",month:"long",weekday:"long",day:"numeric"},ds={hour:"numeric",minute:"numeric"},Ps=Te(J({},ds),{second:"numeric"}),Y5={"short-date":gn,"short-date-short-time":J(J({},gn),ds),"short-date-short-time-24":Te(J(J({},gn),ds),{hour12:!1}),"short-date-long-time":J(J({},gn),Ps),"short-date-long-time-24":Te(J(J({},gn),Ps),{hour12:!1}),"short-date-le":gn,"short-date-le-short-time":J(J({},gn),ds),"short-date-le-short-time-24":Te(J(J({},gn),ds),{hour12:!1}),"short-date-le-long-time":J(J({},gn),Ps),"short-date-le-long-time-24":Te(J(J({},gn),Ps),{hour12:!1}),"long-month-day-year":gp,"long-month-day-year-short-time":J(J({},gp),ds),"long-month-day-year-short-time-24":Te(J(J({},gp),ds),{hour12:!1}),"long-month-day-year-long-time":J(J({},gp),Ps),"long-month-day-year-long-time-24":Te(J(J({},gp),Ps),{hour12:!1}),"day-short-month-year":vp,"day-short-month-year-short-time":J(J({},vp),ds),"day-short-month-year-short-time-24":Te(J(J({},vp),ds),{hour12:!1}),"day-short-month-year-long-time":J(J({},vp),Ps),"day-short-month-year-long-time-24":Te(J(J({},vp),Ps),{hour12:!1}),"long-date":bp,"long-date-short-time":J(J({},bp),ds),"long-date-short-time-24":Te(J(J({},bp),ds),{hour12:!1}),"long-date-long-time":J(J({},bp),Ps),"long-date-long-time-24":Te(J(J({},bp),Ps),{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":ds,"long-time":Ps},cd=Hi()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});cd.apiValues;cd.toJSON.bind(cd);cd.fromJSON.bind(cd);const Cz={ar:"ar-u-nu-latn-ca-gregory"};let k1=new WeakMap,UI=Y5["short-date-short-time"];function Pz(e){const t=e||UI;if(!k1.has(t)){const i=Xr(),s=Cz[Xr()]||i;k1.set(t,new Intl.DateTimeFormat(s,t))}return k1.get(t)}function BI(e){return Y5[e]||null}function ol(e,t){return Pz(t).format(e)}A5(()=>{k1=new WeakMap,UI=Y5["short-date-short-time"]});const Nz={ar:"ar-u-nu-latn"};let A1=new WeakMap,HI={};function jz(e){const t=e||HI;if(!A1.has(t)){const i=Xr(),s=Nz[Xr()]||i;A1.set(t,new Intl.NumberFormat(s,e))}return A1.get(t)}function WI(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Du(e,t){return jz(t).format(e)}A5(()=>{A1=new WeakMap,HI={}});var jb;let Tl=jb=class extends ge{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new jb({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?ol(e,J(J({},BI(this.dateFormat)),this.dateTimeFormatOptions)):Du(e,WI(this))}};b([Ue(hd)],Tl.prototype,"dateFormat",void 0),b([S({type:Object,json:{read:!1}})],Tl.prototype,"dateTimeFormatOptions",void 0),b([S({type:Boolean,json:{write:!0}})],Tl.prototype,"digitSeparator",void 0),b([S({type:Lt,json:{write:!0}})],Tl.prototype,"places",void 0),Tl=jb=b([H("esri.popup.support.FieldInfoFormat")],Tl);const D0=Tl;var Fb;let Ds=Fb=class extends ge{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new Fb({fieldName:this.fieldName,format:this.format?le(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};b([S({type:String,json:{write:!0}})],Ds.prototype,"fieldName",void 0),b([S({type:D0,json:{write:!0}})],Ds.prototype,"format",void 0),b([S({type:Boolean,json:{write:!0,default:!1}})],Ds.prototype,"isEditable",void 0),b([S({type:String,json:{write:!0}})],Ds.prototype,"label",void 0),b([Ue(new ot({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Ds.prototype,"stringFieldOption",void 0),b([S({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Ds.prototype,"statisticType",void 0),b([S({type:String,json:{write:!0}})],Ds.prototype,"tooltip",void 0),b([S({type:Boolean,json:{write:!0}})],Ds.prototype,"visible",void 0),Ds=Fb=b([H("esri.popup.FieldInfo")],Ds);const Gd=Ds;var Rb;let uo=Rb=class extends Qu{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new Rb(le({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};b([S({type:Object,json:{write:!0}})],uo.prototype,"attributes",void 0),b([S({type:String,json:{write:!0}})],uo.prototype,"description",void 0),b([S({type:[Gd]})],uo.prototype,"fieldInfos",void 0),b([ke("fieldInfos")],uo.prototype,"writeFieldInfos",null),b([S({type:String,json:{write:!0}})],uo.prototype,"title",void 0),b([S({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],uo.prototype,"type",void 0),uo=Rb=b([H("esri.popup.content.FieldsContent")],uo);const Ac=uo;let El=class extends ge{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};b([S({type:String,json:{write:!0}})],El.prototype,"altText",void 0),b([S({type:String,json:{write:!0}})],El.prototype,"caption",void 0),b([S({type:String,json:{write:!0}})],El.prototype,"title",void 0),b([S({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],El.prototype,"type",void 0),El=b([H("esri.popup.content.mixins.MediaInfo")],El);const X5=El;var Lb;let Up=Lb=class extends Fe{constructor(e){super(e),this.tooltip=null,this.value=null}clone(){return new Lb({tooltip:this.tooltip,value:this.value})}};b([S()],Up.prototype,"tooltip",void 0),b([S()],Up.prototype,"value",void 0),Up=Lb=b([H("esri.popup.content.support.ChartMediaInfoValueSeries")],Up);const JI=Up;var Db;let kl=Db=class extends ge{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new Db({fields:le(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};b([S({type:[String],json:{write:!0}})],kl.prototype,"fields",void 0),b([S({type:String,json:{write:!0}})],kl.prototype,"normalizeField",void 0),b([S({type:[JI],json:{read:!1}})],kl.prototype,"series",void 0),b([S({type:String,json:{write:!0}})],kl.prototype,"tooltipField",void 0),kl=Db=b([H("esri.popup.content.support.ChartMediaInfoValue")],kl);const Fz=kl;let Bp=class extends X5{constructor(e){super(e),this.type=null,this.value=null}};b([S({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Bp.prototype,"type",void 0),b([S({type:Fz,json:{write:!0}})],Bp.prototype,"value",void 0),Bp=b([H("esri.popup.content.mixins.ChartMediaInfo")],Bp);const mg=Bp,gg=Hi()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var zb;let O1=zb=class extends mg{constructor(e){super(e),this.type="bar-chart"}clone(){return new zb({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};b([S({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:gg.write}})],O1.prototype,"type",void 0),O1=zb=b([H("esri.popup.content.BarChartMediaInfo")],O1);const KI=O1;var Vb;let C1=Vb=class extends mg{constructor(e){super(e),this.type="column-chart"}clone(){return new Vb({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};b([S({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:gg.write}})],C1.prototype,"type",void 0),C1=Vb=b([H("esri.popup.content.ColumnChartMediaInfo")],C1);const YI=C1;var Gb;let Hp=Gb=class extends ge{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new Gb({linkURL:this.linkURL,sourceURL:this.sourceURL})}};b([S({type:String,json:{write:!0}})],Hp.prototype,"linkURL",void 0),b([S({type:String,json:{write:!0}})],Hp.prototype,"sourceURL",void 0),Hp=Gb=b([H("esri.popup.content.support.ImageMediaInfoValue")],Hp);const Rz=Hp;var qb;let Sh=qb=class extends X5{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new qb({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};b([S({type:Number,json:{write:!0}})],Sh.prototype,"refreshInterval",void 0),b([S({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Sh.prototype,"type",void 0),b([S({type:Rz,json:{write:!0}})],Sh.prototype,"value",void 0),Sh=qb=b([H("esri.popup.content.ImageMediaInfo")],Sh);const XI=Sh;var Ub;let P1=Ub=class extends mg{constructor(e){super(e),this.type="line-chart"}clone(){return new Ub({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};b([S({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:gg.write}})],P1.prototype,"type",void 0),P1=Ub=b([H("esri.popup.content.LineChartMediaInfo")],P1);const ZI=P1;var Bb;let N1=Bb=class extends mg{constructor(e){super(e),this.type="pie-chart"}clone(){return new Bb({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};b([S({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:gg.write}})],N1.prototype,"type",void 0),N1=Bb=b([H("esri.popup.content.PieChartMediaInfo")],N1);const QI=N1,eT={base:X5,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":KI,"column-chart":YI,"line-chart":ZI,"pie-chart":QI,image:XI}};var Hb;let zs=Hb=class extends Qu{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?XI.fromJSON(t):t.type==="barchart"?KI.fromJSON(t):t.type==="columnchart"?YI.fromJSON(t):t.type==="linechart"?ZI.fromJSON(t):t.type==="piechart"?QI.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new Hb(le({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};b([S()],zs.prototype,"activeMediaInfoIndex",void 0),b([S({type:Object,json:{write:!0}})],zs.prototype,"attributes",void 0),b([S({type:String,json:{write:!0}})],zs.prototype,"description",void 0),b([S({types:[eT]})],zs.prototype,"mediaInfos",void 0),b([$e("mediaInfos")],zs.prototype,"readMediaInfos",null),b([ke("mediaInfos")],zs.prototype,"writeMediaInfos",null),b([S({type:String,json:{write:!0}})],zs.prototype,"title",void 0),b([S({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],zs.prototype,"type",void 0),zs=Hb=b([H("esri.popup.content.MediaContent")],zs);const pd=zs;var Wb;let Wp=Wb=class extends Qu{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new Wb({text:this.text})}};b([S({type:String,json:{write:!0}})],Wp.prototype,"text",void 0),b([S({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Wp.prototype,"type",void 0),Wp=Wb=b([H("esri.popup.content.TextContent")],Wp);const Oc=Wp,Lz={base:null,key:"type",typeMap:{attachment:ud,media:pd,text:Oc,expression:K5,field:Ac}};var Jb;let Al=Jb=class extends ge{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new Jb({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};b([S({type:String,json:{write:!0}})],Al.prototype,"name",void 0),b([S({type:String,json:{write:!0}})],Al.prototype,"title",void 0),b([S({type:String,json:{write:!0}})],Al.prototype,"expression",void 0),b([S({type:["string","number"],json:{write:!0}})],Al.prototype,"returnType",void 0),Al=Jb=b([H("esri.popup.ExpressionInfo")],Al);const tT=Al;var Kb;let Jp=Kb=class extends ge{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new Kb({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};b([S({type:Boolean,json:{write:!0}})],Jp.prototype,"returnTopmostRaster",void 0),b([S({type:Boolean,json:{write:!0}})],Jp.prototype,"showNoDataRecords",void 0),Jp=Kb=b([H("esri.popup.LayerOptions")],Jp);const Dz=Jp;var Yb;let Kp=Yb=class extends ge{constructor(e){super(e),this.field=null,this.order=null}clone(){return new Yb({field:this.field,order:this.order})}};b([S({type:String,json:{write:!0}})],Kp.prototype,"field",void 0),b([S({type:["asc","desc"],json:{write:!0}})],Kp.prototype,"order",void 0),Kp=Yb=b([H("esri.popup.support.RelatedRecordsInfoFieldOrder")],Kp);const iT=Kp;var Xb;let Yp=Xb=class extends ge{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new Xb({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?le(this.orderByFields):null})}};b([S({type:Boolean,json:{write:!0}})],Yp.prototype,"showRelatedRecords",void 0),b([S({type:[iT],json:{write:!0}})],Yp.prototype,"orderByFields",void 0),Yp=Xb=b([H("esri.popup.RelatedRecordsInfo")],Yp);const zz=Yp;var Zb;let Vs=Zb=class extends H5(Fe){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new Zb({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};b([S()],Vs.prototype,"active",void 0),b([S()],Vs.prototype,"className",void 0),b([S()],Vs.prototype,"disabled",void 0),b([S()],Vs.prototype,"id",void 0),b([S()],Vs.prototype,"indicator",void 0),b([S()],Vs.prototype,"title",void 0),b([S()],Vs.prototype,"type",void 0),b([S()],Vs.prototype,"visible",void 0),Vs=Zb=b([H("esri.support.actions.ActionBase")],Vs);const vg=Vs;var Qb;let j1=Qb=class extends vg{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new Qb({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};b([S()],j1.prototype,"image",void 0),j1=Qb=b([H("esri.support.Action.ActionButton")],j1);const Jc=j1;var ew;let Xp=ew=class extends vg{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new ew({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};b([S()],Xp.prototype,"image",void 0),b([S()],Xp.prototype,"value",void 0),Xp=ew=b([H("esri.support.Action.ActionToggle")],Xp);const rT=Xp;var tw;const Vz=qe.ofType({key:"type",defaultKeyValue:"button",base:vg,typeMap:{button:Jc,toggle:rT}}),Gz={base:Qu,key:"type",typeMap:{media:pd,custom:Oz,text:Oc,attachments:ud,fields:Ac,expression:K5}},sT="esri.PopupTemplate",qz=Se.getLogger(sT),Uz=["attachments","fields","media","text","expression"];let bi=tw=class extends ge{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(e){return Array.isArray(e)?e.map(t=>Hn(Gz,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Bo(e)?e:(qz.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:i}=t;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(t):this._readPopupInfo(t)}writeContent(e,t,i,s){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(l=>Uz.indexOf(l.type)!==-1).map(l=>l&&l.toJSON(s)),t.popupElements.forEach(l=>{l.type==="attachments"?this._writeAttachmentContent(t):l.type==="media"?this._writeMediaContent(l,t):l.type==="text"&&this._writeTextContent(l,t)})):t.description=e}writeFieldInfos(e,t,i,s){const{content:l}=this,d=Array.isArray(l)?l:null;if(e){const y=d?d.filter(_=>_.type==="fields"):[],g=y.length&&y.every(_=>{var M;return(M=_.fieldInfos)==null?void 0:M.length});t.fieldInfos=e.filter(Boolean).map(_=>{const M=_.toJSON(s);return g&&(M.visible=!1),M})}if(d)for(const y of d)y.type==="fields"&&this._writeFieldsContent(y,t)}writeLayerOptions(e,t,i,s){t[i]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(s)}writeTitle(e,t){t.title=e||""}clone(){const{actions:e}=this,t=e?le(e.toArray()):[];return new tw({actions:t,content:Array.isArray(this.content)?le(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?le(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?le(this.fieldInfos):null,layerOptions:this.layerOptions?le(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?le(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?le(this.relatedRecordsInfo):null})}async collectRequiredFields(e,t){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...i,...this._getContentExpressionInfos(this.content,i)]),ld(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const i=le(e.fieldInfos);Array.isArray(t.fieldInfos)?i.forEach(s=>{const l=t.fieldInfos.find(d=>d.fieldName.toLowerCase()===s.fieldName.toLowerCase());l?l.visible=!0:t.fieldInfos.push(s)}):t.fieldInfos=i}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=le(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...i]:t.mediaInfos=i}_readPopupInfoElements({description:e,mediaInfos:t,popupElements:i}){const s={description:!1,mediaInfos:!1};return i.map(l=>l.type==="media"?(l.mediaInfos||!t||s.mediaInfos||(l.mediaInfos=t,s.mediaInfos=!0),pd.fromJSON(l)):l.type==="text"?(l.text||!e||s.description||(l.text=e,s.description=!0),Oc.fromJSON(l)):l.type==="attachments"?ud.fromJSON(l):l.type==="fields"?Ac.fromJSON(l):l.type==="expression"?K5.fromJSON(l):void 0).filter(Boolean)}_readPopupInfo({description:e,mediaInfos:t,showAttachments:i}){const s=[];return e?s.push(new Oc({text:e})):s.push(new Ac),Array.isArray(t)&&t.length&&s.push(pd.fromJSON({mediaInfos:t})),i&&s.push(ud.fromJSON({displayType:"auto"})),s.length?s:e}_getContentElementFields(e){const t=e==null?void 0:e.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos||this.fieldInfos)];if(t==="media"){const i=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...i.reduce((s,l)=>[...s,...this._getMediaInfoFields(l)],[])]}return t==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:i,value:s}=e,l=s||{},{fields:d=[],normalizeField:y,tooltipField:g,sourceURL:_,linkURL:M}=l,E=[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(_),...this._extractFieldNames(M),...d];return y&&E.push(y),g&&E.push(g),E}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((i,s)=>[...i,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,i)=>[...t,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(e,t,i){i&&await Promise.all(i.map(s=>is(e,t,s.expression)))}_getFieldInfoFields(e){return e?e.filter(t=>t.visible===void 0||!!t.visible).map(t=>t.fieldName).filter(t=>t.indexOf("relationships/")===-1&&t.indexOf("expression/")===-1):[]}_getActionsFields(e){return e?e.toArray().reduce((t,i)=>[...t,...this._getActionFields(i)],[]):[]}_getActionFields(e){const{className:t,title:i,type:s}=e,l=s==="button"||s==="toggle"?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(l)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const t=/{[^}]*}/g,i=e.match(t);if(!i)return[];const s=/\{(\w+):.+\}/,l=i.filter(d=>!(d.indexOf("{relationships/")===0||d.indexOf("{expression/")===0)).map(d=>d.replace(s,"{$1}"));return l?l.map(d=>d.slice(1,-1)):[]}};b([S({type:Vz})],bi.prototype,"actions",void 0),b([S()],bi.prototype,"content",void 0),b([yt("content")],bi.prototype,"castContent",null),b([$e("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],bi.prototype,"readContent",null),b([ke("content",{popupElements:{type:qe.ofType(Lz)},showAttachments:{type:Boolean},mediaInfos:{type:qe.ofType(eT)},description:{type:String}})],bi.prototype,"writeContent",null),b([S({type:[tT],json:{write:!0}})],bi.prototype,"expressionInfos",void 0),b([S({type:[Gd]})],bi.prototype,"fieldInfos",void 0),b([ke("fieldInfos")],bi.prototype,"writeFieldInfos",null),b([S({type:Dz})],bi.prototype,"layerOptions",void 0),b([ke("layerOptions")],bi.prototype,"writeLayerOptions",null),b([S({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],bi.prototype,"lastEditInfoEnabled",void 0),b([S()],bi.prototype,"outFields",void 0),b([S()],bi.prototype,"overwriteActions",void 0),b([S()],bi.prototype,"returnGeometry",void 0),b([S({json:{type:String}})],bi.prototype,"title",void 0),b([ke("title")],bi.prototype,"writeTitle",null),b([S({type:zz,json:{write:!0}})],bi.prototype,"relatedRecordsInfo",void 0),bi=tw=b([H(sT)],bi);const bg=bi,X6=new ot({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Bz=0,Mh=class extends ge{constructor(e){super(e),this.id="sym"+Bz++,this.type=null,this.color=new Ze([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};b([S({type:X6.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:X6.write}}})],Mh.prototype,"type",void 0),b([S({type:Ze,json:{write:{allowNull:!0}}})],Mh.prototype,"color",void 0),b([$e("color")],Mh.prototype,"readColor",null),Mh=b([H("esri.symbols.Symbol")],Mh);const Fr=Mh;var iw;let ha=iw=class extends Fr{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const i in e)t[i]=e[i]}async collectRequiredFields(e,t){if(this.data.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const s=i.map(l=>{const d=l.valueExpressionInfo;return is(e,t,d.expression)});await Promise.all(s)}}}clone(){return new iw({data:le(this.data)})}hash(){return l5(JSON.stringify(this.data)).toString()}};b([S({json:{write:!1}})],ha.prototype,"color",void 0),b([S({json:{write:!0}})],ha.prototype,"data",void 0),b([$e("data",["symbol"])],ha.prototype,"readData",null),b([ke("data",{})],ha.prototype,"writeData",null),b([Ue({CIMSymbolReference:"cim"},{readOnly:!0})],ha.prototype,"type",void 0),ha=iw=b([H("esri.symbols.CIMSymbol")],ha);const qd=ha;let $h=class extends ge{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,i){e||(t[i]=e)}};b([S({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],$h.prototype,"enabled",void 0),b([ke("enabled")],$h.prototype,"writeEnabled",null),b([S({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],$h.prototype,"type",void 0),$h=b([H("esri.symbols.Symbol3DLayer")],$h);const Xn=$h,Hz=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Wz="screenUtils.toPt: input not recognized!",nT=96;function zue(e){return e?e/72*nT:0}function al(e){return e?72*e/nT:0}function St(e){if(typeof e=="string"){const t=e.match(Hz);if(t){const i=Number(t[1]),s=t[3]&&t[3].toLowerCase(),l=e.charAt(0)==="-",d=s==="px"?al(i):i;return l?-d:d}return console.warn(Wz),null}return e}function Tr(e=0,t=0){return{x:e,y:t}}function Vue(e=0,t=0){return[e,t]}function Jz(e,t){const i=t.transparency!=null?ad(t.transparency):1,s=t.color;return s&&Array.isArray(s)?new Ze([s[0]||0,s[1]||0,s[2]||0,i]):null}function Kz(e,t){t.color=e.toJSON().slice(0,3);const i=F5(e.a);i!==0&&(t.transparency=i)}const cl={type:Ze,json:{type:[Lt],default:null,read:{source:["color","transparency"],reader:Jz},write:{target:{color:{type:[Lt]},transparency:{type:Lt}},writer:Kz}}},Jn={type:Number,cast:St,json:{write:!0}};let Ol=class extends ge{constructor(e){super(e),this.color=new Ze([0,0,0,1]),this.extensionLength=0,this.size=al(1)}clone(){}cloneProperties(){return{color:le(this.color),size:this.size,extensionLength:this.extensionLength}}};b([S({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Ol.prototype,"type",void 0),b([S(cl)],Ol.prototype,"color",void 0),b([S(Te(J({},Jn),{json:{write:{overridePolicy:e=>({enabled:!!e})}}}))],Ol.prototype,"extensionLength",void 0),b([S(Jn)],Ol.prototype,"size",void 0),Ol=b([H("esri.symbols.edges.Edges3D")],Ol);const Z5=Ol;var rw;let F1=rw=class extends Z5{constructor(e){super(e),this.type="sketch"}clone(){return new rw(this.cloneProperties())}};b([Ue({sketch:"sketch"},{readOnly:!0})],F1.prototype,"type",void 0),F1=rw=b([H("esri.symbols.edges.SketchEdges3D")],F1);const Yz=F1;var sw;let R1=sw=class extends Z5{constructor(e){super(e),this.type="solid"}clone(){return new sw(this.cloneProperties())}};b([Ue({solid:"solid"},{readOnly:!0})],R1.prototype,"type",void 0),R1=sw=b([H("esri.symbols.support.SolidEdges3D")],R1);const Xz=R1,oT={types:{key:"type",base:Z5,typeMap:{solid:Xz,sketch:Yz}},json:{write:!0}};var nw;let Zr=nw=class extends ge{constructor(e){super(e),this.color=null}clone(){const e={color:X(this.color)?this.color.clone():null};return new nw(e)}};b([S(cl)],Zr.prototype,"color",void 0),Zr=nw=b([H("esri.symbols.support.Symbol3DMaterial")],Zr);var ow;let ca=ow=class extends Xn{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new ow({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:X(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};b([Ue({Extrude:"extrude"},{readOnly:!0})],ca.prototype,"type",void 0),b([S({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],ca.prototype,"size",void 0),b([S({type:Zr,json:{write:!0}})],ca.prototype,"material",void 0),b([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ca.prototype,"castShadows",void 0),b([S(oT)],ca.prototype,"edges",void 0),ca=ow=b([H("esri.symbols.ExtrudeSymbol3DLayer")],ca);const Q5=ca;let Zp=class extends Fr{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};b([Ue({esriSLS:"simple-line"},{readOnly:!0})],Zp.prototype,"type",void 0),b([S({type:Number,cast:St,json:{write:!0}})],Zp.prototype,"width",void 0),Zp=b([H("esri.symbols.LineSymbol")],Zp);const Zz=Zp,Qz=["begin","end","begin-end"],aT=["arrow","circle","square","diamond","cross","x"];var aw;let Sn=aw=class extends ge{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,s){(s==null?void 0:s.origin)==="web-map"?t[i]="arrow":t[i]=e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,s){(s==null?void 0:s.origin)==="web-map"||(t[i]=e)}clone(){return new aw({color:le(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};b([S({type:["begin","end","begin-end"],json:{write:!0}})],Sn.prototype,"placement",void 0),b([Ue({"line-marker":"line-marker"},{readOnly:!0}),S({json:{origins:{"web-map":{write:!1}}}})],Sn.prototype,"type",void 0),b([S({type:aT})],Sn.prototype,"style",void 0),b([ke("style")],Sn.prototype,"writeStyle",null),b([S({type:Ze,value:null,json:{write:{allowNull:!0}}})],Sn.prototype,"color",null),b([$e("color")],Sn.prototype,"readColor",null),b([ke("color")],Sn.prototype,"writeColor",null),Sn=aw=b([H("esri.symbols.LineSymbolMarker")],Sn);const eV=Sn;var lw;const Av=new ot({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let ho=lw=class extends Zz{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,s,l,d){if(e&&typeof e!="string")return e;const y={};return e!=null&&(y.style=e),t!=null&&(y.color=t),i!=null&&(y.width=St(i)),s!=null&&(y.cap=s),l!=null&&(y.join=l),d!=null&&(y.miterLimit=St(d)),y}clone(){var e;return new lw({color:le(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};b([Ue({esriSLS:"simple-line"},{readOnly:!0})],ho.prototype,"type",void 0),b([S({type:Av.apiValues,json:{read:Av.read,write:Av.write}})],ho.prototype,"style",void 0),b([S({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],ho.prototype,"cap",void 0),b([S({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],ho.prototype,"join",void 0),b([S({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":eV}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],ho.prototype,"marker",void 0),b([S({type:Number,json:{read:!1,write:!1}})],ho.prototype,"miterLimit",void 0),ho=lw=b([H("esri.symbols.SimpleLineSymbol")],ho);const dn=ho;let Qp=class extends Fr{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};b([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":dn}},json:{default:null,write:!0}})],Qp.prototype,"outline",void 0),b([S({type:["simple-fill","picture-fill"],readOnly:!0})],Qp.prototype,"type",void 0),Qp=b([H("esri.symbols.FillSymbol")],Qp);const lT=Qp;let L1=class extends ge{constructor(e){super(e)}clone(){}};b([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],L1.prototype,"type",void 0),L1=b([H("esri.symbols.patterns.LinePattern3D")],L1);const uT=L1,tV=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var uw;const iV=Hi()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let e0=uw=class extends uT{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new uw(e)}};b([S({type:["style"]})],e0.prototype,"type",void 0),b([Ue(iV),S({type:tV})],e0.prototype,"style",void 0),e0=uw=b([H("esri.symbols.patterns.LineStylePattern3D")],e0);const e4=e0;let D1=class extends ge{constructor(e){super(e)}clone(){}};b([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],D1.prototype,"type",void 0),D1=b([H("esri.symbols.patterns.Pattern3D")],D1);const hT=D1,rV=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var hw;let t0=hw=class extends hT{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new hw(e)}};b([S({type:["style"]})],t0.prototype,"type",void 0),b([S({type:rV,json:{read:!0,write:!0}})],t0.prototype,"style",void 0),t0=hw=b([H("esri.symbols.patterns.StylePattern3D")],t0);const cT=t0,sV={types:{key:"type",base:hT,typeMap:{style:cT}},json:{write:!0}},pT={types:{key:"type",base:uT,typeMap:{style:e4}},json:{write:!0}},z0=new Ze("white");new Ze("black");const nV=new Ze([255,255,255,0]);function oV(e){return e.r===0&&e.g===0&&e.b===0}var cw;let V0=cw=class extends Zr{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:X(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new cw(e)}};b([Ue({multiply:"multiply",replace:"replace",tint:"tint"})],V0.prototype,"colorMixMode",void 0),V0=cw=b([H("esri.symbols.support.Symbol3DFillMaterial")],V0);function zu(e=hV){return[e[0],e[1],e[2],e[3]]}function Gue(e){return[e[0],e[1],e[2],e[3]]}function que(e,t,i,s,l=zu()){return l[0]=e,l[1]=t,l[2]=i,l[3]=s,l}function Uue(e,t=zu()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function Bue(e,t){return new Mt({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function Hue(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function aV(e){return ce(e)||e[0]>=e[2]?0:e[2]-e[0]}function lV(e){return e[1]>=e[3]?0:e[3]-e[1]}function Wue(e){return aV(e)*lV(e)}function Jue(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function Kue(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function uV(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}const Yue=[1/0,1/0,-1/0,-1/0],hV=[0,0,0,0];function t4(e=yV){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function i4(e,t,i,s,l,d,y=t4()){return y[0]=e,y[1]=t,y[2]=i,y[3]=s,y[4]=l,y[5]=d,y}function Xue(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function Zue(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function cV(e){return e[0]>=e[3]?0:e[3]-e[0]}function pV(e){return e[1]>=e[4]?0:e[4]-e[1]}function dV(e){return e[2]>=e[5]?0:e[5]-e[2]}function Que(e,t=[0,0,0]){return t[0]=cV(e),t[1]=pV(e),t[2]=dV(e),t}function ehe(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function the(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function fV(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function ihe(e){return e?fV(e,Q6):t4(Q6)}function rhe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function Z6(e){return e.length===6}function she(e,t,i){if(ce(e)||ce(t))return e===t;if(!Z6(e)||!Z6(t))return!1;if(i){for(let s=0;s<e.length;s++)if(!i(e[s],t[s]))return!1}else for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}const Q6=[1/0,1/0,1/0,-1/0,-1/0,-1/0],yV=[0,0,0,0,0,0];t4();function nhe(e,{isPrimitive:t,width:i,depth:s,height:l}){const d=t?10:1;if(i==null&&l==null&&s==null)return[d*e[0],d*e[1],d*e[2]];const y=Wc(i,s,l);let g;for(let _=0;_<3;_++){const M=y[_];if(M!=null){g=M/e[_];break}}for(let _=0;_<3;_++)y[_]==null&&(y[_]=e[_]*g);return y}const mV=i4(-.5,-.5,-.5,.5,.5,.5),gV=i4(-.5,-.5,0,.5,.5,1),vV=i4(-.5,-.5,0,.5,.5,.5);function ohe(e){switch(e){case"sphere":case"cube":case"diamond":return mV;case"cylinder":case"cone":case"inverted-cone":return gV;case"tetrahedron":return vV;default:return}}const r4=["butt","square","round"],bV=[...r4,"none"],dT=["miter","bevel","round"];var pw;let Cl=pw=class extends ge{constructor(e){super(e),this.color=new Ze([0,0,0,1]),this.size=al(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:X(this.color)?this.color.clone():null,size:this.size,pattern:X(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new pw(e)}};b([S(cl)],Cl.prototype,"color",void 0),b([S(Jn)],Cl.prototype,"size",void 0),b([S(pT)],Cl.prototype,"pattern",void 0),b([S({type:r4,json:{default:"butt",write:{overridePolicy(){return{enabled:X(this.pattern)}}}}})],Cl.prototype,"patternCap",void 0),Cl=pw=b([H("esri.symbols.support.Symbol3DOutline")],Cl);var z1;let co=z1=class extends Xn{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:X(this.edges)?this.edges.clone():null,enabled:this.enabled,material:X(this.material)?this.material.clone():null,pattern:X(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:X(this.outline)?this.outline.clone():null};return new z1(e)}static fromSimpleFillSymbol(e){var t,i,s,l,d,y;const g=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new e4({style:e.outline.style}):null,_={size:(t=(i=e.outline)==null?void 0:i.width)!=null?t:0,color:((s=(l=e.outline)==null?void 0:l.color)!=null?s:z0).clone(),pattern:g};return g&&(d=e.outline)!=null&&d.cap&&(_.patternCap=e.outline.cap),new z1({material:new V0({color:((y=e.color)!=null?y:nV).clone()}),pattern:e.style&&e.style!=="solid"?new cT({style:e.style}):null,outline:_})}};b([Ue({Fill:"fill"},{readOnly:!0})],co.prototype,"type",void 0),b([S({type:V0,json:{write:!0}})],co.prototype,"material",void 0),b([S(sV)],co.prototype,"pattern",void 0),b([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],co.prototype,"castShadows",void 0),b([S({type:Cl,json:{write:!0}})],co.prototype,"outline",void 0),b([S(oT)],co.prototype,"edges",void 0),co=z1=b([H("esri.symbols.FillSymbol3DLayer")],co);const Ud=co,wV=["none","underline","line-through"],_V=["normal","italic","oblique"],xV=["normal","lighter","bold","bolder"],fT={type:Number,cast:e=>{const t=_s(e);return t===0?1:Is(t,.1,4)},nonNullable:!0},SV=["left","right","center","justify"],MV=["left","right","center"],$V=["baseline","top","middle","bottom"],IV={type:SV,nonNullable:!0},TV={type:MV,nonNullable:!0},yT={type:$V,nonNullable:!0};var dw;let po=dw=class extends ge{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return St(e)}clone(){return new dw({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};b([S({type:wV,json:{default:"none",write:!0}})],po.prototype,"decoration",void 0),b([S({type:String,json:{write:!0}})],po.prototype,"family",void 0),b([S({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],po.prototype,"size",void 0),b([yt("size")],po.prototype,"castSize",null),b([S({type:_V,json:{default:"normal",write:!0}})],po.prototype,"style",void 0),b([S({type:xV,json:{default:"normal",write:!0}})],po.prototype,"weight",void 0),po=dw=b([H("esri.symbols.Font")],po);const wg=po;function Kc(e,t){const i=t&&t.url&&t.url.path;if(e&&i&&(e=sn(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const s=S5(e,t.portalItem.itemUrl);kV.test(s)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(s).path)}return fw(e,t&&t.portal)}function Bd(e,t,i=dd.YES){if(!e)return e;!Yr(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let s=sn(e);if(t){const l=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(l){const d=fw(l,t.portal);s=S5(fw(s,t.portal),d,d),s!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(s)}}return s=OV(s,t&&t.portal),Yr(s)&&(s=an(s)),t!=null&&t.resources&&t!=null&&t.portalItem&&!Yr(s)&&!Ku(s)&&i===dd.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(s)}),s}function s4(e,t,i){return Kc(e,i)}function Vu(e,t,i,s){const l=Bd(e,s);l!==void 0&&(t[i]=l)}const EV=/\/items\/([^\/]+)\/resources\//,kV=/^\.\/resources\//;function AV(e){const t=X(e)?e.match(EV):null;return X(t)?t[1]:null}function OV(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?hb(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function fw(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,s=w$();return Jy(s,`${s.scheme}://${i}`)?hb(e,t.portalHostname,i):hb(e,i,t.portalHostname)}var dd;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(dd||(dd={}));const ahe=Object.freeze({__proto__:null,fromJSON:Kc,toJSON:Bd,read:s4,write:Vu,itemIdFromResourceUrl:AV,get MarkKeep(){return dd}});var yw;const CV=Hi()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Pl=yw=class extends ge{constructor(e){super(e)}readHref(e,t,i){return e?Kc(e,i):t.dataURI}writeHref(e,t,i,s){e&&(Ku(e)?t.dataURI=e:(t.href=Bd(e,s),Yr(t.href)&&(t.href=an(t.href))))}clone(){return new yw({href:this.href,primitive:this.primitive})}};b([S({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Pl.prototype,"href",void 0),b([$e("href")],Pl.prototype,"readHref",null),b([ke("href",{href:{type:String},dataURI:{type:String}})],Pl.prototype,"writeHref",null),b([Ue(CV)],Pl.prototype,"primitive",void 0),Pl=yw=b([H("esri.symbols.support.IconSymbol3DLayerResource")],Pl);var mw;let ic=mw=class extends Fe{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new mw({x:this.x,y:this.y})}};b([S({type:Number})],ic.prototype,"x",void 0),b([S({type:Number})],ic.prototype,"y",void 0),ic=mw=b([H("esri.symbols.support.Symbol3DAnchorPosition2D")],ic);var gw;let i0=gw=class extends ge{constructor(e){super(e),this.color=new Ze([0,0,0,1]),this.size=al(1)}clone(){const e={color:X(this.color)?this.color.clone():null,size:this.size};return new gw(e)}};b([S(cl)],i0.prototype,"color",void 0),b([S(Jn)],i0.prototype,"size",void 0),i0=gw=b([H("esri.symbols.support.Symbol3DIconOutline")],i0);var Ih;const PV=Se.getLogger("esri.symbols.IconSymbol3DLayer");let Mn=Ih=class extends Xn{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new Ih({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:X(this.material)?this.material.clone():null,outline:X(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||z0,i=ex(e),s=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||z0).clone()}:null;return new Ih({size:e.size,resource:{primitive:jV(e.style)},material:{color:t},outline:s,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||oV(e.color)?z0:e.color,i=ex(e);return new Ih({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new Ih({resource:{href:I$({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function ex(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,s=tx(e.xoffset),l=tx(e.yoffset);return(s||l)&&t&&i?{x:-s/t,y:l/i}:null}function tx(e){return isFinite(e)?e:0}b([S({type:Zr,json:{write:!0}})],Mn.prototype,"material",void 0),b([S({type:Pl,json:{write:!0}})],Mn.prototype,"resource",void 0),b([Ue({Icon:"icon"},{readOnly:!0})],Mn.prototype,"type",void 0),b([S(Jn)],Mn.prototype,"size",void 0),b([Ue({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),S({json:{default:"center"}})],Mn.prototype,"anchor",void 0),b([S({type:ic,json:{type:[Number],read:{reader:e=>new ic({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Mn.prototype,"anchorPosition",void 0),b([S({type:i0,json:{write:!0}})],Mn.prototype,"outline",void 0),Mn=Ih=b([H("esri.symbols.IconSymbol3DLayer")],Mn);const NV={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function jV(e){return NV[e]||(PV.warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Wa=Mn;Se.getLogger("esri.core.Clonable");const Zn=e=>{let t=class extends e{clone(){const i=oN(dr(this),"unable to clone instance of non-accessor class"),s=i.metadatas,l=i.store,d={},y=new Map;for(const M in s){const E=s[M],O=l==null?void 0:l.originOf(M),P=E.clonable;if(E.readOnly||P===!1||O!==lt.USER&&O!==lt.DEFAULTS&&O!==lt.WEB_MAP&&O!==lt.WEB_SCENE)continue;const j=this[M];let R=null;R=typeof P=="function"?P(j):P==="reference"?j:W2(j),j!=null&&R==null||(O===lt.DEFAULTS?y.set(M,R):d[M]=R)}const g=new(Object.getPrototypeOf(this)).constructor(d);if(y.size){var _;const M=(_=dr(g))==null?void 0:_.store;if(M)for(const[E,O]of y)M.set(E,O,lt.DEFAULTS)}return g}};return t=b([H("esri.core.Clonable")],t),t};let ix=class extends Zn(Fe){};ix=b([H("esri.core.Clonable")],ix);let Nl=class extends Zn(ge){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return X(e)&&e.placement===this.placement&&e.style===this.style&&(ce(this.color)&&ce(e.color)||X(this.color)&&X(e.color)&&this.color.toJSON()===e.color.toJSON())}};b([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Nl.prototype,"type",void 0),b([S({type:Qz,json:{default:"begin-end",write:!0}})],Nl.prototype,"placement",void 0),b([S({type:aT,json:{default:"arrow",write:!0}})],Nl.prototype,"style",void 0),b([S({type:Ze,json:{type:[Lt],default:null,write:!0}})],Nl.prototype,"color",void 0),Nl=b([H("esri.symbols.LineStyleMarker3D")],Nl);const vw=Nl;var V1;let $n=V1=class extends Xn{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=al(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:X(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:X(this.pattern)?this.pattern.clone():null,marker:X(this.marker)?this.marker.clone():null};return new V1(e)}static fromSimpleLineSymbol(e){var t,i,s;const l={enabled:!0,size:(t=e.width)!=null?t:al(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new e4({style:e.style}):null,material:new Zr({color:(e.color||z0).clone()}),marker:e.marker?new vw({placement:e.marker.placement,style:e.marker.style,color:(i=(s=e.marker.color)==null?void 0:s.clone())!=null?i:null}):null};return new V1(l)}};b([S({type:Zr,json:{write:!0}})],$n.prototype,"material",void 0),b([Ue({Line:"line"},{readOnly:!0})],$n.prototype,"type",void 0),b([S({type:dT,json:{write:!0,default:"miter"}})],$n.prototype,"join",void 0),b([S({type:r4,json:{write:!0,default:"butt"}})],$n.prototype,"cap",void 0),b([S(Jn)],$n.prototype,"size",void 0),b([S(pT)],$n.prototype,"pattern",void 0),b([S({types:{key:"type",base:vw,typeMap:{style:vw}},json:{write:!0}})],$n.prototype,"marker",void 0),$n=V1=b([H("esri.symbols.LineSymbol3DLayer")],$n);const Yc=$n;var bw;const FV=Hi()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let r0=bw=class extends ge{clone(){return new bw({href:this.href,primitive:this.primitive})}};b([S({type:String,json:{read:s4,write:Vu}})],r0.prototype,"href",void 0),b([Ue(FV)],r0.prototype,"primitive",void 0),r0=bw=b([H("esri.symbols.support.ObjectSymbol3DLayerResource")],r0);var ww;let nu=ww=class extends Fe{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new ww({x:this.x,y:this.y,z:this.z})}};b([S({type:Number})],nu.prototype,"x",void 0),b([S({type:Number})],nu.prototype,"y",void 0),b([S({type:Number})],nu.prototype,"z",void 0),nu=ww=b([H("esri.symbols.support.Symbol3DAnchorPosition3D")],nu);var _w;let Ki=_w=class extends Xn{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new _w({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:X(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};b([S({type:Zr,json:{write:!0}})],Ki.prototype,"material",void 0),b([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ki.prototype,"castShadows",void 0),b([S({type:r0,json:{write:!0}})],Ki.prototype,"resource",void 0),b([Ue({Object:"object"},{readOnly:!0})],Ki.prototype,"type",void 0),b([S({type:Number,json:{write:!0}})],Ki.prototype,"width",void 0),b([S({type:Number,json:{write:!0}})],Ki.prototype,"height",void 0),b([S({type:Number,json:{write:!0}})],Ki.prototype,"depth",void 0),b([Ue({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),S({json:{default:"origin"}})],Ki.prototype,"anchor",void 0),b([S({type:nu,json:{type:[Number],read:{reader:e=>new nu({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ki.prototype,"anchorPosition",void 0),b([S({type:Number,json:{write:!0}})],Ki.prototype,"heading",void 0),b([S({type:Number,json:{write:!0}})],Ki.prototype,"tilt",void 0),b([S({type:Number,json:{write:!0}})],Ki.prototype,"roll",void 0),b([S({readOnly:!0})],Ki.prototype,"isPrimitive",null),Ki=_w=b([H("esri.symbols.ObjectSymbol3DLayer")],Ki);const _g=Ki;var xw;let rr=xw=class extends Xn{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e!=null?e:t.height==null&&t.size!=null?t.size:void 0}readHeight(e,t){return e!=null?e:t.width==null&&t.size!=null?t.size:void 0}clone(){return new xw({enabled:this.enabled,material:X(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};b([S({type:Zr,json:{write:!0}})],rr.prototype,"material",void 0),b([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],rr.prototype,"castShadows",void 0),b([Ue({Path:"path"},{readOnly:!0})],rr.prototype,"type",void 0),b([S({type:["circle","quad"],json:{write:!0,default:"circle"}})],rr.prototype,"profile",void 0),b([S({type:dT,json:{write:!0,default:"miter"}})],rr.prototype,"join",void 0),b([S({type:bV,json:{write:!0,default:"butt"}})],rr.prototype,"cap",void 0),b([S({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],rr.prototype,"width",void 0),b([$e("width",["width","size","height"])],rr.prototype,"readWidth",null),b([S({type:Number,json:{write:!0}})],rr.prototype,"height",void 0),b([$e("height",["height","size","width"])],rr.prototype,"readHeight",null),b([S({type:["center","bottom","top"],json:{write:!0,default:"center"}})],rr.prototype,"anchor",void 0),b([S({type:["heading","all"],json:{write:!0,default:"all"}})],rr.prototype,"profileRotation",void 0),rr=xw=b([H("esri.symbols.PathSymbol3DLayer")],rr);const n4=rr;var Sw;let rc=Sw=class extends ge{constructor(){super(...arguments),this.color=new Ze([0,0,0,1]),this.size=0}clone(){const e={color:le(this.color),size:this.size};return new Sw(e)}};b([S(cl)],rc.prototype,"color",void 0),b([S(Jn)],rc.prototype,"size",void 0),rc=Sw=b([H("esri.symbols.support.Symbol3DHalo")],rc);let G0=class extends Zn(ge){constructor(e){super(e),this.color=null}};b([S(cl)],G0.prototype,"color",void 0),G0=b([H("esri.symbols.support.Symbol3DTextBackground")],G0);var G1;let gr=G1=class extends Xn{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){X(e)&&X(this._userSize)&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,s){const l=Te(J({},s),{textSymbol3D:!0});t.font=e.write({},l),delete t.font.size}get size(){return X(this._userSize)?this._userSize:X(this.font)&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,X(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new G1({enabled:this.enabled,font:this.font&&le(this.font),halo:this.halo&&le(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:X(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:le(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new G1({font:X(e.font)?e.font.clone():new wg,halo:RV(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Zr({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new G0({color:e.backgroundColor.clone()}):null})}};function RV(e,t){return e&&t>0?new rc({color:le(e),size:t}):null}b([S({type:wg,json:{write:!0}})],gr.prototype,"font",null),b([ke("font")],gr.prototype,"writeFont",null),b([S({type:rc,json:{write:!0}})],gr.prototype,"halo",void 0),b([S(Te(J({},TV),{json:{default:"center",write:!0}}))],gr.prototype,"horizontalAlignment",void 0),b([S(Te(J({},fT),{json:{default:1,write:!0}}))],gr.prototype,"lineHeight",void 0),b([S({type:Zr,json:{write:!0}})],gr.prototype,"material",void 0),b([S({type:G0,json:{write:!0}})],gr.prototype,"background",void 0),b([S(Jn)],gr.prototype,"size",null),b([S({type:String,json:{write:!0}})],gr.prototype,"text",void 0),b([Ue({Text:"text"},{readOnly:!0})],gr.prototype,"type",void 0),b([S(Te(J({},yT),{json:{default:"baseline",write:!0}}))],gr.prototype,"verticalAlignment",void 0),gr=G1=b([H("esri.symbols.TextSymbol3DLayer")],gr);const Xc=gr;var Mw;let pa=Mw=class extends Xn{constructor(e){super(e),this.color=$w.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new Mw({color:le(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};b([S({type:Ze,nonNullable:!0,json:{type:[Lt],write:(e,t,i)=>t[i]=e.toArray(Ze.AlphaMode.UNLESS_OPAQUE),default:()=>$w.clone(),defaultEquals:e=>e.toCss(!0)===$w.toCss(!0)}})],pa.prototype,"color",void 0),b([Ue({Water:"water"},{readOnly:!0})],pa.prototype,"type",void 0),b([S({type:["small","medium","large"],json:{write:!0,default:"medium"}})],pa.prototype,"waterbodySize",void 0),b([S({type:Number,json:{write:!0,default:null}})],pa.prototype,"waveDirection",void 0),b([S({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],pa.prototype,"waveStrength",void 0),pa=Mw=b([H("esri.symbols.WaterSymbol3DLayer")],pa);const $w=new Ze([0,119,190]),o4=pa;var Iw;let jl=Iw=class extends Fe{constructor(){super(...arguments),this.portal=null}clone(){return new Iw({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};b([S({type:String})],jl.prototype,"name",void 0),b([S({type:String})],jl.prototype,"styleUrl",void 0),b([S({type:String})],jl.prototype,"styleName",void 0),b([S({type:ts})],jl.prototype,"portal",void 0),jl=Iw=b([H("esri.symbols.support.StyleOrigin")],jl);const Tw=jl;var Ew;let q0=Ew=class extends Fe{clone(){return new Ew({url:this.url})}};b([S({type:String})],q0.prototype,"url",void 0),q0=Ew=b([H("esri.symbols.support.Thumbnail")],q0);const mT={icon:Wa,object:_g,line:Yc,path:n4,fill:Ud,extrude:Q5,text:Xc,water:o4},LV=qe.ofType({base:Xn,key:"type",typeMap:mT,errorContext:"symbol-layer"}),DV=Se.getLogger("esri.symbols.Symbol3D");let In=class extends Fr{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,i=t&&t.type||qe;this._set("symbolLayers",new i)}get color(){return null}set color(e){this.initialized&&DV.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Cu(e,this._get("symbolLayers"))}readStyleOrigin(e,t,i){if(e.styleUrl&&e.name){const s=Kc(e.styleUrl,i);return new Tw({styleUrl:s,name:e.name})}if(e.styleName&&e.name)return new Tw({portal:i&&i.portal||ts.getDefault(),styleName:e.styleName,name:e.name});i&&i.messages&&i.messages.push(new fr("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:e}))}writeStyleOrigin(e,t,i,s){if(e.styleUrl&&e.name){let l=Bd(e.styleUrl,s);Yr(l)&&(l=an(l)),t.styleOrigin={styleUrl:l,name:e.name}}else e.styleName&&e.name&&(e.portal&&s&&s.portal&&!S$(e.portal.restUrl,s.portal.restUrl)?s&&s.messages&&s.messages.push(new fr("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Xn||e&&mT[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};b([S({json:{read:!1,write:!1}})],In.prototype,"color",null),b([S({type:LV,nonNullable:!0,json:{write:!0}}),yt(h$)],In.prototype,"symbolLayers",null),b([S({type:Tw})],In.prototype,"styleOrigin",void 0),b([$e("styleOrigin")],In.prototype,"readStyleOrigin",null),b([ke("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],In.prototype,"writeStyleOrigin",null),b([S({type:q0,json:{read:!1}})],In.prototype,"thumbnail",void 0),b([S({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],In.prototype,"type",void 0),In=b([H("esri.symbols.Symbol3D")],In);const Zc=In;let s0=class extends ge{constructor(e){super(e),this.visible=!0}clone(){}};b([S({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],s0.prototype,"type",void 0),b([S({readOnly:!0})],s0.prototype,"visible",void 0),s0=b([H("esri.symbols.callouts.Callout3D")],s0);const gT=s0;var kw;let U0=kw=class extends ge{constructor(){super(...arguments),this.color=new Ze("white")}clone(){return new kw({color:le(this.color)})}};b([S(cl)],U0.prototype,"color",void 0),U0=kw=b([H("esri.symbols.callouts.LineCallout3DBorder")],U0);const vT=U0;Object.freeze({__proto__:null,get LineCallout3DBorder(){return U0},default:vT});var Aw;let da=Aw=class extends gT{constructor(e){super(e),this.type="line",this.color=new Ze([0,0,0,1]),this.size=al(1),this.border=null}get visible(){return this.size>0&&X(this.color)&&this.color.a>0}clone(){return new Aw({color:le(this.color),size:this.size,border:le(this.border)})}};b([Ue({line:"line"},{readOnly:!0})],da.prototype,"type",void 0),b([S(cl)],da.prototype,"color",void 0),b([S(Jn)],da.prototype,"size",void 0),b([S({type:vT,json:{write:!0}})],da.prototype,"border",void 0),b([S({readOnly:!0})],da.prototype,"visible",null),da=Aw=b([H("esri.symbols.callouts.LineCallout3D")],da);const zV=da;function a4(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength<=0)}function bT(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!a4(e)}const wT={types:{key:"type",base:gT,typeMap:{line:zV}},json:{write:!0}};var Ow;let ou=Ow=class extends ge{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new Ow({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};b([S(Jn)],ou.prototype,"screenLength",void 0),b([S({type:Number,json:{write:!0,default:0}})],ou.prototype,"minWorldLength",void 0),b([S({type:Number,json:{write:!0}})],ou.prototype,"maxWorldLength",void 0),ou=Ow=b([H("esri.symbols.support.Symbol3DVerticalOffset")],ou);var q1;const _T=qe.ofType({base:null,key:"type",typeMap:{text:Xc}});let fa=q1=class extends Zc{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new _T,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return bT(this)}hasVisibleVerticalOffset(){return a4(this)}clone(){return new q1({styleOrigin:le(this.styleOrigin),symbolLayers:le(this.symbolLayers),thumbnail:le(this.thumbnail),callout:le(this.callout),verticalOffset:le(this.verticalOffset)})}static fromTextSymbol(e){return new q1({symbolLayers:[Xc.fromTextSymbol(e)]})}};b([S({type:ou,json:{write:!0}})],fa.prototype,"verticalOffset",void 0),b([S(wT)],fa.prototype,"callout",void 0),b([S({json:{read:!1,write:!1}})],fa.prototype,"styleOrigin",void 0),b([S({type:_T})],fa.prototype,"symbolLayers",void 0),b([Ue({LabelSymbol3D:"label-3d"},{readOnly:!0})],fa.prototype,"type",void 0),fa=q1=b([H("esri.symbols.LabelSymbol3D")],fa);const xg=fa;var U1;const xT=qe.ofType({base:null,key:"type",typeMap:{line:Yc,path:n4}}),VV=qe.ofType({base:null,key:"type",typeMap:{line:Yc,path:n4}});let n0=U1=class extends Zc{constructor(e){super(e),this.symbolLayers=new xT,this.type="line-3d"}clone(){return new U1({styleOrigin:le(this.styleOrigin),symbolLayers:le(this.symbolLayers),thumbnail:le(this.thumbnail)})}static fromSimpleLineSymbol(e){return new U1({symbolLayers:[Yc.fromSimpleLineSymbol(e)]})}};b([S({type:xT,json:{type:VV}})],n0.prototype,"symbolLayers",void 0),b([Ue({LineSymbol3D:"line-3d"},{readOnly:!0})],n0.prototype,"type",void 0),n0=U1=b([H("esri.symbols.LineSymbol3D")],n0);const Sg=n0;let ya=class extends Fr{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};b([S({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],ya.prototype,"angle",void 0),b([S({type:["simple-marker","picture-marker"],readOnly:!0})],ya.prototype,"type",void 0),b([S({type:Number,cast:St,json:{write:!0}})],ya.prototype,"xoffset",void 0),b([S({type:Number,cast:St,json:{write:!0}})],ya.prototype,"yoffset",void 0),b([S({type:Number,cast:e=>e==="auto"?e:St(e),json:{write:!0}})],ya.prototype,"size",void 0),ya=b([H("esri.symbols.MarkerSymbol")],ya);const ST=ya;var Cw;const MT=qe.ofType({base:null,key:"type",typeMap:{fill:Ud}});let o0=Cw=class extends Zc{constructor(e){super(e),this.symbolLayers=new MT,this.type="mesh-3d"}clone(){return new Cw({styleOrigin:le(this.styleOrigin),symbolLayers:le(this.symbolLayers),thumbnail:le(this.thumbnail)})}};b([S({type:MT})],o0.prototype,"symbolLayers",void 0),b([Ue({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],o0.prototype,"type",void 0),o0=Cw=b([H("esri.symbols.MeshSymbol3D")],o0);const l4=o0;function GV(e,t,i){return t.imageData?I$({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):$T(t.url,i)}function $T(e,t){return UV(t)&&!Yr(e)&&t.layer.parsedUrl?rl(t.layer.parsedUrl.path,"images",e):Kc(e,t)}function qV(e,t,i,s){if(Ku(e)){const l=$$(e);t.contentType=l.mediaType,t.imageData=l.data,i&&i.imageData===t.imageData&&i.url&&Vu(i.url,t,"url",s)}else Vu(e,t,"url",s)}const IT={json:{read:{source:["imageData","url"],reader:GV},write:{writer(e,t,i,s){qV(e,t,this.source,s)}}}},TT={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const s={};return t.imageData&&(s.imageData=t.imageData),t.contentType&&(s.contentType=t.contentType),t.url&&(s.url=$T(t.url,i)),s}}}};function UV(e){return e&&(e.origin==="service"||e.origin==="portal-item")&&e.layer&&(e.layer.type==="feature"||e.layer.type==="stream")}var Pw;let fs=Pw=class extends lT{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,s){if(e&&typeof e!="string"&&e.imageData==null)return e;const l={};return e&&(l.url=e),t&&(l.outline=t),i!=null&&(l.width=St(i)),s!=null&&(l.height=St(s)),l}clone(){const e=new Pw({color:le(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",le(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};b([Ue({esriPFS:"picture-fill"},{readOnly:!0})],fs.prototype,"type",void 0),b([S(IT)],fs.prototype,"url",void 0),b([S({type:Number,json:{write:!0}})],fs.prototype,"xscale",void 0),b([S({type:Number,json:{write:!0}})],fs.prototype,"yscale",void 0),b([S({type:Number,cast:St,json:{write:!0}})],fs.prototype,"width",void 0),b([S({type:Number,cast:St,json:{write:!0}})],fs.prototype,"height",void 0),b([S({type:Number,cast:St,json:{write:!0}})],fs.prototype,"xoffset",void 0),b([S({type:Number,cast:St,json:{write:!0}})],fs.prototype,"yoffset",void 0),b([S(TT)],fs.prototype,"source",void 0),fs=Pw=b([H("esri.symbols.PictureFillSymbol")],fs);const ET=fs;var Nw;let Gs=Nw=class extends ST{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t!=null&&(s.width=St(t)),i!=null&&(s.height=St(i)),s}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new Nw({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",le(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};b([S({json:{write:!1}})],Gs.prototype,"color",void 0),b([Ue({esriPMS:"picture-marker"},{readOnly:!0})],Gs.prototype,"type",void 0),b([S(IT)],Gs.prototype,"url",void 0),b([S(TT)],Gs.prototype,"source",void 0),b([S({type:Number,cast:St,json:{write:!0}})],Gs.prototype,"height",void 0),b([$e("height",["height","size"])],Gs.prototype,"readHeight",null),b([S({type:Number,cast:St,json:{write:!0}})],Gs.prototype,"width",void 0),b([S({json:{write:!1}})],Gs.prototype,"size",void 0),Gs=Nw=b([H("esri.symbols.PictureMarkerSymbol")],Gs);const Mg=Gs;var ma;const kT=qe.ofType({base:null,key:"type",typeMap:{icon:Wa,object:_g,text:Xc}});let Fl=ma=class extends Zc{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new kT,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return bT(this)}hasVisibleVerticalOffset(){return a4(this)}clone(){return new ma({verticalOffset:le(this.verticalOffset),callout:le(this.callout),styleOrigin:le(this.styleOrigin),symbolLayers:le(this.symbolLayers),thumbnail:le(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new ma({symbolLayers:[Wa.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new ma({symbolLayers:[Wa.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var t,i;return((t=e.data)==null||(i=t.symbol)==null?void 0:i.type)!=="CIMPointSymbol"?null:e.data.symbol.callout?new ma({symbolLayers:[Wa.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new ma({symbolLayers:[Wa.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new ma({symbolLayers:[Xc.fromTextSymbol(e)]})}};b([S({type:ou,json:{write:!0}})],Fl.prototype,"verticalOffset",void 0),b([S(wT)],Fl.prototype,"callout",void 0),b([S({type:kT,json:{origins:{"web-scene":{write:!0}}}})],Fl.prototype,"symbolLayers",void 0),b([Ue({PointSymbol3D:"point-3d"},{readOnly:!0})],Fl.prototype,"type",void 0),Fl=ma=b([H("esri.symbols.PointSymbol3D")],Fl);const hu=Fl;var a0;const AT=qe.ofType({base:null,key:"type",typeMap:{extrude:Q5,fill:Ud,icon:Wa,line:Yc,object:_g,text:Xc,water:o4}}),BV=qe.ofType({base:null,key:"type",typeMap:{extrude:Q5,fill:Ud,icon:Wa,line:Yc,object:_g,water:o4}});let Th=a0=class extends Zc{constructor(e){super(e),this.symbolLayers=new AT,this.type="polygon-3d"}writeSymbolLayers(e,t,i,s){const l=e.filter(d=>d.type!=="text");if(s&&s.messages&&l.length<e.length){const d=e.find(y=>y.type==="text");s.messages.push(new re("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:d}))}t[i]=l.map(d=>d.write({},s)).toArray()}clone(){return new a0({styleOrigin:le(this.styleOrigin),symbolLayers:le(this.symbolLayers),thumbnail:le(this.thumbnail)})}static fromJSON(e){const t=new a0;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.getItemAt(0).type==="fill"&&t.symbolLayers.getItemAt(1).type==="line"){const i=t.symbolLayers.getItemAt(0),s=t.symbolLayers.getItemAt(1);!s.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:s.size,color:X(s.material)?s.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new a0({symbolLayers:[Ud.fromSimpleFillSymbol(e)]})}};b([S({type:AT,json:{type:BV}})],Th.prototype,"symbolLayers",void 0),b([ke("web-scene","symbolLayers")],Th.prototype,"writeSymbolLayers",null),b([Ue({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Th.prototype,"type",void 0),Th=a0=b([H("esri.symbols.PolygonSymbol3D")],Th);const Hd=Th;var jw;const Ov=new ot({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Rl=jw=class extends lT{constructor(...e){super(...e),this.color=new Ze([0,0,0,.25]),this.outline=new dn,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t&&(s.outline=t),i&&(s.color=i),s}clone(){return new jw({color:le(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};b([S()],Rl.prototype,"color",void 0),b([S()],Rl.prototype,"outline",void 0),b([Ue({esriSFS:"simple-fill"},{readOnly:!0})],Rl.prototype,"type",void 0),b([S({type:Ov.apiValues,json:{read:Ov.read,write:Ov.write}})],Rl.prototype,"style",void 0),Rl=jw=b([H("esri.symbols.SimpleFillSymbol")],Rl);const eh=Rl;var Fw;const Cv=new ot({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Tn=Fw=class extends ST{constructor(...e){super(...e),this.color=new Ze([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new dn}normalizeCtorArgs(e,t,i,s){if(e&&typeof e!="string")return e;const l={};return e&&(l.style=e),t!=null&&(l.size=St(t)),i&&(l.outline=i),s&&(l.color=s),l}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new Fw({angle:this.angle,color:le(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};b([S()],Tn.prototype,"color",void 0),b([ke("color")],Tn.prototype,"writeColor",null),b([Ue({esriSMS:"simple-marker"},{readOnly:!0})],Tn.prototype,"type",void 0),b([S()],Tn.prototype,"size",void 0),b([S({type:Cv.apiValues,json:{read:Cv.read,write:Cv.write}})],Tn.prototype,"style",void 0),b([S({type:String,json:{write:!0}})],Tn.prototype,"path",null),b([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":dn}},json:{default:null,write:!0}})],Tn.prototype,"outline",void 0),Tn=Fw=b([H("esri.symbols.SimpleMarkerSymbol")],Tn);const Qc=Tn;var Rw;let Ut=Rw=class extends Fr{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new wg,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const s={};return e&&(s.text=e),t&&(s.font=t),i&&(s.color=i),s}writeLineWidth(e,t,i,s){s&&typeof s!="string"?s.origin:t[i]=e}castLineWidth(e){return St(e)}writeLineHeight(e,t,i,s){s&&typeof s!="string"?s.origin:t[i]=e}clone(){return new Rw({angle:this.angle,backgroundColor:le(this.backgroundColor),borderLineColor:le(this.borderLineColor),borderLineSize:this.borderLineSize,color:le(this.color),font:this.font&&this.font.clone(),haloColor:le(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};b([S({type:Ze,json:{write:!0}})],Ut.prototype,"backgroundColor",void 0),b([S({type:Ze,json:{write:!0}})],Ut.prototype,"borderLineColor",void 0),b([S({type:Number,json:{write:!0}})],Ut.prototype,"borderLineSize",void 0),b([S({type:wg,json:{write:!0}})],Ut.prototype,"font",void 0),b([S(Te(J({},IV),{json:{write:!0}}))],Ut.prototype,"horizontalAlignment",void 0),b([S({type:Boolean,json:{write:!0}})],Ut.prototype,"kerning",void 0),b([S({type:Ze,json:{write:!0}})],Ut.prototype,"haloColor",void 0),b([S({type:Number,cast:St,json:{write:!0}})],Ut.prototype,"haloSize",void 0),b([S({type:Boolean,json:{write:!0}})],Ut.prototype,"rightToLeft",void 0),b([S({type:Boolean,json:{write:!0}})],Ut.prototype,"rotated",void 0),b([S({type:String,json:{write:!0}})],Ut.prototype,"text",void 0),b([Ue({esriTS:"text"},{readOnly:!0})],Ut.prototype,"type",void 0),b([S(Te(J({},yT),{json:{write:!0}}))],Ut.prototype,"verticalAlignment",void 0),b([S({type:Number,cast:St,json:{write:!0}})],Ut.prototype,"xoffset",void 0),b([S({type:Number,cast:St,json:{write:!0}})],Ut.prototype,"yoffset",void 0),b([S({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Ut.prototype,"angle",void 0),b([S({type:Number,json:{write:!0}})],Ut.prototype,"width",void 0),b([S({type:Number})],Ut.prototype,"lineWidth",void 0),b([ke("lineWidth")],Ut.prototype,"writeLineWidth",null),b([yt("lineWidth")],Ut.prototype,"castLineWidth",null),b([S(fT)],Ut.prototype,"lineHeight",void 0),b([ke("lineHeight")],Ut.prototype,"writeLineHeight",null),Ut=Rw=b([H("esri.symbols.TextSymbol")],Ut);const ep=Ut;var Lw;const HV=Se.getLogger("esri.symbols.WebStyleSymbol");let En=Lw=class extends Fr{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}read(e,t){this.portal=t?t.portal:void 0,super.read(e,t)}clone(){return new Lw({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=await WV();mi(t);const s=i.resolveWebStyleSymbol(this,{portal:this.portal},e,t);return s.catch(l=>{HV.error("#fetchSymbol()","Failed to create symbol from style",l)}),s}};function WV(){return import("./webStyleSymbolUtils.541351ba.js")}b([S({json:{write:!1}})],En.prototype,"color",void 0),b([S({type:String,json:{write:!0}})],En.prototype,"styleName",void 0),b([S({type:ts,json:{write:!1}})],En.prototype,"portal",void 0),b([S({type:String,json:{read:s4,write:Vu}})],En.prototype,"styleUrl",void 0),b([S({type:q0,json:{read:!1}})],En.prototype,"thumbnail",void 0),b([S({type:String,json:{write:!0}})],En.prototype,"name",void 0),b([Ue({styleSymbolReference:"web-style"},{readOnly:!0})],En.prototype,"type",void 0),En=Lw=b([H("esri.symbols.WebStyleSymbol")],En);const th=En;function u4(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function fd(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const $u={base:Fr,key:"type",typeMap:{"simple-fill":eh,"picture-fill":ET,"picture-marker":Mg,"simple-line":dn,"simple-marker":Qc,text:ep,"label-3d":xg,"line-3d":Sg,"mesh-3d":l4,"point-3d":hu,"polygon-3d":Hd,"web-style":th,cim:qd},errorContext:"symbol"},JV={base:Fr,key:"type",typeMap:{"picture-marker":Mg,"simple-marker":Qc,text:ep,"web-style":th,cim:qd},errorContext:"symbol"},KV=Uc({types:$u}),OT={base:Fr,key:"type",typeMap:{"simple-fill":eh,"picture-fill":ET,"picture-marker":Mg,"simple-line":dn,"simple-marker":Qc,text:ep,"line-3d":Sg,"mesh-3d":l4,"point-3d":hu,"polygon-3d":Hd,"web-style":th,cim:qd},errorContext:"symbol"},YV={base:Fr,key:"type",typeMap:{text:ep,"label-3d":xg},errorContext:"symbol"},rx={base:Fr,key:"type",typeMap:{"line-3d":Sg,"mesh-3d":l4,"point-3d":hu,"polygon-3d":Hd,"web-style":th,cim:qd},errorContext:"symbol"},XV={base:Fr,key:"type",typeMap:{"label-3d":xg},errorContext:"symbol"},CT=Hn($u);function ZV(e){if(!e)return null;const t={};for(const i in e){const s=nl(e[i]);s&&(t[i]=s)}return Object.keys(t).length!==0?t:null}function QV(e){if(!X(e))return null;const t={};for(const i in e){const s=e[i];s&&(t[i]=s.toJSON())}return Object.keys(t).length!==0?t:null}let vr=class extends Zn(ge){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:N0(),configurable:!0})}normalizeCtorArgs(e,t,i,s){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:s}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&X(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:QV(this.aggregateGeometries),geometry:X(this.geometry)?this.geometry.toJSON():null,symbol:X(this.symbol)?this.symbol.toJSON():null,attributes:J({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){X(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,i,s){if(!this.layer||!("graphicChanged"in this.layer))return;const l={graphic:this,property:e,oldValue:t,newValue:i};e==="attributes"&&(l.attributeName=s),this.layer.graphicChanged(l)}};b([S({value:null,json:{read:ZV}})],vr.prototype,"aggregateGeometries",null),b([S({value:null})],vr.prototype,"attributes",null),b([S({value:null,types:Zu,json:{read:nl}})],vr.prototype,"geometry",null),b([S({type:Boolean})],vr.prototype,"isAggregate",void 0),b([S({clonable:"reference"})],vr.prototype,"layer",void 0),b([S({type:bg})],vr.prototype,"popupTemplate",void 0),b([S({clonable:"reference"})],vr.prototype,"sourceLayer",void 0),b([S({value:null,types:$u})],vr.prototype,"symbol",null),b([S({type:Boolean,value:!0})],vr.prototype,"visible",null),vr=b([H("esri.Graphic")],vr),function(e){e.generateUID=N0}(vr||(vr={}));const rs=vr;class h4{constructor(t,i){this.min=t,this.max=i,this.range=i-t}ndiff(t,i=0){return Math.ceil((t-i)/this.range)*this.range+i}_normalize(t,i,s,l=0,d=!1){return(s-=l)<t?s+=this.ndiff(t-s):s>i&&(s-=this.ndiff(s-i)),d&&s===i&&(s=t),s+l}normalize(t,i=0,s=!1){return this._normalize(this.min,this.max,t,i,s)}clamp(t,i=0){return Is(t-i,this.min,this.max)+i}monotonic(t,i,s){return t<i?i:i+this.ndiff(t-i,s)}minimalMonotonic(t,i,s){return this._normalize(t,t+this.range,i,s)}center(t,i,s){return i=this.monotonic(t,i,s),this.normalize((t+i)/2,s)}diff(t,i,s){return this.monotonic(t,i,s)-t}shortestSignedDiff(t,i){t=this.normalize(t);const s=(i=this.normalize(i))-t,l=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(s)<Math.abs(l)?s:l}contains(t,i,s){return i=this.minimalMonotonic(t,i),(s=this.minimalMonotonic(t,s))>t&&s<i}}function c4(e){for(const t in e){const i=e[t];i instanceof Function&&(e[t]=i.bind(e))}return e}c4(new h4(0,2*Math.PI));c4(new h4(-Math.PI,Math.PI));const eG=c4(new h4(0,360));let fo=class extends Zn(ge){constructor(...e){super(...e),this.position=new Be([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,i,s){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const l={position:e};return t!=null&&(l.heading=t),i!=null&&(l.tilt=i),s!=null&&(l.fov=s),l}return e}writePosition(e,t,i,s){const l=e.clone();l.x=_s(e.x||0),l.y=_s(e.y||0),l.z=e.hasZ?_s(e.z||0):e.z,t[i]=l.write({},s)}readPosition(e,t){const i=new Be;return i.read(e,t),i.x=_s(i.x||0),i.y=_s(i.y||0),i.z=i.hasZ?_s(i.z||0):i.z,i}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};b([S({type:Be,json:{write:{isRequired:!0}}})],fo.prototype,"position",void 0),b([ke("position")],fo.prototype,"writePosition",null),b([$e("position")],fo.prototype,"readPosition",null),b([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),yt(e=>eG.normalize(_s(e)))],fo.prototype,"heading",void 0),b([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),yt(e=>Is(_s(e),-180,180))],fo.prototype,"tilt",void 0),b([S({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],fo.prototype,"fov",void 0),fo=b([H("esri.Camera")],fo);const tG=fo;var Dw;let ga=Dw=class extends ge{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new Dw({rotation:this.rotation,scale:this.scale,targetGeometry:X(this.targetGeometry)?this.targetGeometry.clone():null,camera:X(this.camera)?this.camera.clone():null})}};function Pv(){return{enabled:!this.camera}}b([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Pv}}}}})],ga.prototype,"rotation",void 0),b([yt("rotation")],ga.prototype,"castRotation",null),b([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Pv}}}}})],ga.prototype,"scale",void 0),b([S({types:Zu,json:{read:nl,write:!0,origins:{"web-scene":{read:nl,write:{overridePolicy:Pv}}}}})],ga.prototype,"targetGeometry",void 0),b([S({type:tG,json:{write:!0}})],ga.prototype,"camera",void 0),ga=Dw=b([H("esri.Viewpoint")],ga);const qn=ga;function lhe(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function uhe(e,t){for(const i of e)if(i!=null&&t(i))return i}function sx(e){return e!=null&&typeof e[Symbol.iterator]=="function"}var pr;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(pr||(pr={}));let iG=0;function PT(){return iG++}function rG(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function sm(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function NT(e,t,i,s){if(t.type===pr.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==pr.INVOKE&&t.type!==pr.RESPONSE)return void e.postMessage(t);let l;rG(i)?(l=nx(i.transferList),t.data=i.result):(l=nx(s),t.data=i),l?e.postMessage(t,l):e.postMessage(t)}function yd(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function nx(e){if(!e||!e.length)return null;if(de("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!sG(i));return t.length?t:null}function sG(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}const nG={statsWorker:()=>import("./statsWorker.b0a29492.js"),geometryEngineWorker:()=>import("./geometryEngineWorker.3a1b4805.js"),CSVSourceWorker:()=>import("./CSVSourceWorker.c70bdd77.js"),EdgeProcessingWorker:()=>import("./EdgeProcessingWorker.6f1ae8ad.js"),ElevationSamplerWorker:()=>import("./ElevationSamplerWorker.815c067c.js"),FeatureServiceSnappingSourceWorker:()=>import("./FeatureServiceSnappingSourceWorker.1de9ca3d.js"),GeoJSONSourceWorker:()=>import("./GeoJSONSourceWorker.33b682f4.js"),LercWorker:()=>import("./LercWorker.41a1927a.js"),MemorySourceWorker:()=>import("./MemorySourceWorker.282bf401.js"),PBFDecoderWorker:()=>import("./PBFDecoderWorker.08ed8520.js"),Pipeline:()=>import("./Pipeline.ff0700e2.js"),PointCloudWorker:()=>import("./PointCloudWorker.ac1e231c.js"),RasterWorker:()=>import("./RasterWorker.c547ac9f.js"),SceneLayerWorker:()=>import("./SceneLayerWorker.c117055f.js"),WFSSourceWorker:()=>import("./WFSSourceWorker.5acd0a6a.js"),WorkerTileHandler:()=>import("./WorkerTileHandler.a3be542a.js")},{CLOSE:ox,ABORT:ax,INVOKE:lx,RESPONSE:wp,OPEN_PORT:ux,ON:oG}=pr;class aG{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===pr.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class $r{constructor(t,i){this._port=t,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new aG(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(t){const i=new MessageChannel;let s;s=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const l=new $r(i.port1,{channel:i,client:s});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=l),$r.clients.set(l,s),i.port2}static loadWorker(t){const i=nG[t];return i?i():Promise.resolve(null)}close(){this._post({type:ox}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,s){const l=s&&s.signal,d=s&&s.transferList;if(!this._port)return Promise.reject(new re("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const y=PT();return new Promise((g,_)=>{const M=ig(l,()=>{var O;const P=this._outJobs.get(y);P&&(this._outJobs.delete(y),(O=P.abortHandle)==null||O.remove(),this._post({type:ax,jobId:y}),_(yi()))}),E={resolve:g,reject:_,abortHandle:M,debugInfo:t};this._outJobs.set(y,E),this._post({type:lx,jobId:y,methodName:t,abortable:l!=null},i,d)})}on(t,i){const s=new MessageChannel;function l(d){i(d.data)}return this._port.postMessage({type:pr.ON,eventType:t,port:s.port2},[s.port2]),s.port1.addEventListener("message",l),s.port1.start(),{remove(){s.port1.postMessage({type:pr.CLOSE}),s.port1.close(),s.port1.removeEventListener("message",l)}}}openPort(){const t=new MessageChannel;return this._post({type:ux,port:t.port2}),t.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{var i;(i=t.abortHandle)==null||i.remove(),t.reject(yi(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){X(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const i=yd(t);if(i)switch(i.type){case wp:this._onResponseMessage(i);break;case lx:this._invokeQueue.push(i);break;case ax:this._onAbortMessage(i);break;case ox:this._onCloseMessage();break;case ux:this._onOpenPortMessage(i);break;case oG:this._onOnMessage(i)}}_onAbortMessage(t){const i=this._inJobs,s=t.jobId,l=i.get(s);this._invokeQueue.push(t),l&&(l.controller&&l.controller.abort(),i.delete(s))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&$r.clients.get(this)===t&&t.destroy(),$r.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:s,data:l,abortable:d}=t,y=d?new AbortController:null,g=this._inJobs;let _,M=this._client,E=M[i];try{if(!E&&i&&i.indexOf(".")!==-1){const O=i.split(".");for(let P=0;P<O.length-1;P++)M=M[O[P]],E=M[O[P+1]]}if(typeof E!="function")throw new TypeError(`${i} is not a function`);_=E.call(M,l,{client:this,signal:y?y.signal:null})}catch(O){return void this._post({type:wp,jobId:s,error:sm(O)})}Bo(_)?(g.set(s,{controller:y,promise:_}),_.then(O=>{g.has(s)&&(g.delete(s),this._post({type:wp,jobId:s},O))},O=>{g.has(s)&&(g.delete(s),ks(O)||this._post({type:wp,jobId:s,error:sm(O||{message:`Error encountered at method ${i}`})}))})):this._post({type:wp,jobId:s},_)}_onOpenPortMessage(t){new $r(t.port,{client:this._client})}_onOnMessage(t){const{port:i}=t,s=this._client.on(t.eventType,d=>{i.postMessage(d)}),l=eg(t.port,"message",d=>{yd(d).type===pr.CLOSE&&(l.remove(),s.remove(),i.close())})}_onResponseMessage(t){var i;const{jobId:s,error:l,data:d}=t,y=this._outJobs;if(!y.has(s))return;const g=y.get(s);y.delete(s),(i=g.abortHandle)==null||i.remove(),l?g.reject(re.fromJSON(JSON.parse(l))):g.resolve(d)}_post(t,i,s){return NT(this._port,t,i,s)}}$r.kernelInfo={revision:P$,version:N$,buildDate:C$},$r.clients=new Map;const lG=Se.getLogger("esri.core.workers.Connection");class uG{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,i){return new Promise((s,l)=>{let d=!0;const y=g=>{mi(i.signal),d&&(d=!1,g())};this._clients.length=t.length,this._clientPromises.length=t.length;for(let g=0;g<t.length;++g){const _=t[g];Bo(_)?this._clientPromises[g]=_.then(M=>(this._clients[g]=new $r(M,i),y(s),this._clients[g]),()=>(y(l),null)):(this._clients[g]=new $r(_,i),this._clientPromises[g]=Promise.resolve(this._clients[g]),y(s))}})}broadcast(t,i,s){const l=new Array(this._clientPromises.length);for(let d=0;d<this._clientPromises.length;++d){const y=this._clientPromises[d];l[d]=y.then(g=>g.invoke(t,i,s))}return l}close(){for(const t of this._clientPromises)t.then(i=>i.close());this._clients.length=0,this._clientPromises.length=0}getAvailableClient(){let t;for(let i=0;i<this._clients.length;++i){const s=this._clients[i];if(s){if(!s.isBusy())return Promise.resolve(s)}else t=t||[],t.push(this._clientPromises[i])}return t?Promise.race(t):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(t,i,s){let l=null;return Array.isArray(s)?(lG.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),l={transferList:s}):l=s,this.closed?Promise.reject(new Error("Connection closed")):this.getAvailableClient().then(d=>d.invoke(t,i,l))}on(t,i){return Promise.all(this._clientPromises).then(()=>Ym(this._clients.map(s=>s.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let s=i.length;for(let l=0;l<this._clientPromises.length;++l)this._clientPromises[l].then(d=>{i[l]=d.openPort(),--s==0&&t(i)})})}get test(){return{numClients:this._clients.length}}}const jT=Se.getLogger("esri.intl");function yo(e,t,i={}){const{format:s={}}=i;return Un(e,l=>hG(l,t,s))}function hG(e,t,i){let s,l;const d=e.indexOf(":");if(d===-1?s=e.trim():(s=e.slice(0,d).trim(),l=e.slice(d+1).trim()),!s)return"";const y=Gc(s,t);if(y==null)return"";const g=i[l]||i[s];return g?cG(y,g):l?pG(y,l):p4(y)}function cG(e,t){switch(t.type){case"date":return ol(e,t.intlOptions);case"number":return Du(e,t.intlOptions);default:return jT.warn("missing format descriptor for key {key}"),p4(e)}}function pG(e,t){switch(t.toLowerCase()){case"dateformat":return ol(e);case"numberformat":return Du(e);default:return jT.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?ol(e):/^numberformat/i.test(t)?Du(e):p4(e)}}function p4(e){switch(typeof e){case"string":return e;case"number":return Du(e);case"boolean":return""+e;default:return e instanceof Date?ol(e):""}}async function dG(e,t,i,s){const l=t.exec(i);if(!l)throw new re("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const d=l[1]?`${l[1]}/`:"",y=l[2],g=WR(s),_=`${d}${y}.json`,M=g?`${d}${y}_${g}.json`:_;let E;try{E=await hx(e(M))}catch(O){if(M===_)throw new re("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:O});try{E=await hx(e(_))}catch(P){throw new re("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:P})}}return E}async function hx(e){if(X(cx.fetchBundleAsset))return cx.fetchBundleAsset(e);const t=await Ht(e,{responseType:"text"});return JSON.parse(t.data)}class fG{constructor({base:t="",pattern:i,location:s=new URL(window.location.href)}){let l;l=typeof s=="string"?d=>new URL(d,new URL(s,window.location.href)).href:s instanceof URL?d=>new URL(d,s).href:s,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=l,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,i){return dG(this.getAssetUrl,this.matcher,t,i)}}function yG(e){return new fG(e)}const cx={};HR(yG({pattern:"esri/",location:bt}));const px={};function mG(e,t){for(const i of e)if(i.name===t.name)return;e.push(t)}function gG(e){var t;const i={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:J({},e.has),map:J({},e.map),packages:e.packages&&e.packages.concat()||[],paths:J({},e.paths)};return e.hasOwnProperty("async")||(i.async=!0),e.hasOwnProperty("isDebug")||(i.isDebug=!1),e.baseUrl||(i.baseUrl=px.baseUrl),(t=px.packages)==null||t.forEach(s=>{mG(i.packages,s)}),i}class vG{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...s)=>t[i](...s)})}}class B1{constructor(){this._dispatcher=new vG,this._workerPostMessage({type:pr.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){Ry(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,s){this._dispatcher.addEventListener(t,i,s)}removeEventListener(t,i,s){this._dispatcher.removeEventListener(t,i,s)}_workerPostMessage(t){Ry(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=yd(t);if(i&&i.type===pr.OPEN){const{modulePath:s,jobId:l}=i;let d=await $r.loadWorker(s);d||(d=await import(s));const y=$r.connect(d);this._workerPostMessage({type:pr.OPENED,jobId:l,data:y})}}}const zw=Se.getLogger("esri.core.workers"),{HANDSHAKE:bG}=pr,wG='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Af,Of;const dx="Failed to create Worker. Fallback to execute module in main thread";async function _G(){if(!de("esri-workers")||(de("mozilla"),0))return fx(new B1);if(!Af&&!Of)try{const t=wG.replace('"{CONFIGURATION}"',`'${xG()}'`);Af=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){Of=t||{}}let e;if(Af)try{e=new Worker(Af,{name:"esri-worker-"+SG++})}catch{zw.warn(dx,Of),e=new B1}else zw.warn(dx,Of),e=new B1;return fx(e)}async function fx(e){return new Promise(t=>{function i(l){const d=yd(l);d&&d.type===bG&&(e.removeEventListener("message",i),e.removeEventListener("error",s),t(e))}function s(l){l.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",s),zw.warn("Failed to create Worker. Fallback to execute module in main thread",l),(e=new B1).addEventListener("message",i),e.addEventListener("error",s)}e.addEventListener("message",i),e.addEventListener("error",s)})}function xG(){let e;if(Ct.default!=null){const l=J({},Ct);delete l.default,e=JSON.parse(JSON.stringify(l))}else e=JSON.parse(JSON.stringify(Ct));e.assetsPath=sn(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=Xr(),e.has={"esri-csp-restrictions":de("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":de("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":de("esri-2d-query-centroid-enabled"),"featurelayer-pbf":de("featurelayer-pbf"),"featurelayer-simplify-thresholds":de("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":de("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":de("featurelayer-simplify-mobile-factor"),"esri-atomics":de("esri-atomics"),"esri-shared-array-buffer":de("esri-shared-array-buffer"),"esri-tiles-debug":de("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":de("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":de("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=sn(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=sn(e.workers.workerPath):e.workers.workerPath=sn(bt("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Ct.workers.loaderConfig,i=gG({baseUrl:t==null?void 0:t.baseUrl,locale:Xr(),has:J({"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1},t==null?void 0:t.has),map:J({},t==null?void 0:t.map),paths:J({},t==null?void 0:t.paths),packages:(t==null?void 0:t.packages)||[]}),s={version:N$,buildDate:C$,revision:P$};return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:s})}let SG=0;const MG=Se.getLogger("esri.core.workers"),{ABORT:yx,INVOKE:$G,OPEN:IG,OPENED:TG,RESPONSE:_p}=pr;class d4{constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",s=>{s.preventDefault(),MG.error(s)})}static async create(t){const i=await _G();return new d4(i,t)}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:s}=i,l=PT();return new Promise((d,y)=>{const g={resolve:d,reject:y,abortHandle:ig(s,()=>{this._outJobs.delete(l),this._post({type:yx,jobId:l})})};this._outJobs.set(l,g),this._post({type:IG,jobId:l,modulePath:t})})}_onMessage(t){const i=yd(t);if(i)switch(i.type){case TG:this._onOpenedMessage(i);break;case _p:this._onResponseMessage(i);break;case yx:this._onAbortMessage(i);break;case $G:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,s=t.jobId,l=i.get(s);l&&(l.controller&&l.controller.abort(),i.delete(s))}_onInvokeMessage(t){const{methodName:i,jobId:s,data:l,abortable:d}=t,y=d?new AbortController:null,g=this._inJobs,_=XF[i];let M;try{if(typeof _!="function")throw new TypeError(`${i} is not a function`);M=_.call(null,l,{signal:y?y.signal:null})}catch(E){return void this._post({type:_p,jobId:s,error:sm(E)})}Bo(M)?(g.set(s,{controller:y,promise:M}),M.then(E=>{g.has(s)&&(g.delete(s),this._post({type:_p,jobId:s},E))},E=>{g.has(s)&&(g.delete(s),E||(E={message:"Error encountered at method"+i}),ks(E)||this._post({type:_p,jobId:s,error:sm(E||{message:`Error encountered at method ${i}`})}))})):this._post({type:_p,jobId:s},M)}_onOpenedMessage(t){var i;const{jobId:s,data:l}=t,d=this._outJobs.get(s);d&&(this._outJobs.delete(s),(i=d.abortHandle)==null||i.remove(),d.resolve(l))}_onResponseMessage(t){var i;const{jobId:s,error:l,data:d}=t,y=this._outJobs.get(s);y&&(this._outJobs.delete(s),(i=y.abortHandle)==null||i.remove(),l?y.reject(re.fromJSON(JSON.parse(l))):y.resolve(d))}_post(t,i,s){return NT(this.worker,t,i,s)}}let cu=de("esri-workers-debug")?1:de("host-browser")?navigator.hardwareConcurrency-1:0;cu||(cu=de("safari")&&de("mac")||de("trident")?7:2);let mx=0;const H1=[];function EG(){FT()}async function Cf(e,t){const i=new uG;return await i.open(e,t),i}async function kG(e,t={}){if(typeof e!="string")throw new re("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(de("host-webworker")&&!de("esri-workers")&&(i="local"),i==="local"){let s=await $r.loadWorker(e);s||(s=await import(e)),mi(t.signal);const l=t.client||s;return Cf([$r.connect(s)],Te(J({},t),{client:l}))}if(await FT(),mi(t.signal),i==="dedicated"){const s=mx++%cu;return Cf([await H1[s].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const s=Math.min(t.maxNumWorkers,cu);if(s<cu){const l=new Array(s);for(let d=0;d<s;++d){const y=mx++%cu;l[d]=H1[y].open(e,t)}return Cf(l,t)}}return Cf(H1.map(s=>s.open(e,t)),t)}let Pf=null;async function FT(){if(Pf)return Pf;new AbortController;const e=[];for(let t=0;t<cu;t++){const i=d4.create(t).then(s=>(H1[t]=s,s));e.push(i)}return Pf=Promise.all(e),Pf}function f4(e){return new it({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const RT=f4(Vt),nm=f4(Lo),om=f4(sl),AG=new it({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Vt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function hhe(e){return e&&(hg(e)||e===nm)?nm:e&&(cg(e)||e===om)?om:RT}function OG(e){return e&&(hg(e)||e===nm)?Lo:e&&(cg(e)||e===om)?sl:Vt}function che(e){return I5(e)?Lo:T5(e)?sl:Vt}const CG=39.37,PG=Vt.radius*Math.PI/200,LT=/UNIT\[([^\]]+)\]\]$/i,Iu=U,DT=/UNIT\[([^\]]+)\]/i,NG=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),jG=Hi()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),vn=e=>e*e,Xo=e=>e*e*e,md={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:vn(.001)},"square-centimeters":{inBaseUnits:vn(.01)},"square-decimeters":{inBaseUnits:vn(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:vn(1e3)},"square-inches":{inBaseUnits:vn(.0254)},"square-feet":{inBaseUnits:vn(.3048)},"square-yards":{inBaseUnits:vn(.9144)},"square-miles":{inBaseUnits:vn(1609.344)},"square-us-feet":{inBaseUnits:vn(1200/3937)},acres:{inBaseUnits:.0015625*vn(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Xo(.001)},"cubic-centimeters":{inBaseUnits:1e3*Xo(.01)},"cubic-decimeters":{inBaseUnits:1e3*Xo(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Xo(1e3)},"cubic-inches":{inBaseUnits:1e3*Xo(.0254)},"cubic-feet":{inBaseUnits:1e3*Xo(.3048)},"cubic-yards":{inBaseUnits:1e3*Xo(.9144)},"cubic-miles":{inBaseUnits:1e3*Xo(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},FG=function(){const e={};for(const t in md)for(const i in md[t].units)e[i]=t;return e}();function RG(e,t,i){return e*md[i].units[t].inBaseUnits}function LG(e,t,i){return e/md[i].units[t].inBaseUnits}function Vw(e){const t=FG[e];if(t)return t;throw new Error("unknown type")}function gx(e,t=null){return t=t||Vw(e),md[t].baseUnit===e}function ys(e,t,i){if(t===i)return e;const s=Vw(t);if(s!==Vw(i))throw new Error("incompatible units");const l=gx(t,s)?e:RG(e,t,s);return gx(i,s)?l:LG(l,i,s)}function DG(e,t,i){return ys(e,t,"meters")/(i*Math.PI/180)}function zT(e){return jG.fromJSON(e.toLowerCase())||null}function Cc(e){if(e&&typeof e=="object"&&!BF(e))return 1;const t=tp(e);return t>1e5?1:t}function zG(e){return tp(e)>=(e instanceof it?OG(e).metersPerDegree:1e5)?"meters":GG(e)}function tp(e,t=Vt.metersPerDegree){return VG(e,!0)||t}function VG(e,t=!1){let i,s,l=null;if(e!=null&&(typeof e=="object"?(i=e.wkid,s=e.wkt):typeof e=="number"?i=e:typeof e=="string"&&(s=e)),i){if(I5(i))return Lo.metersPerDegree;if(T5(i))return sl.metersPerDegree;l=Iu.values[Iu[i]],!l&&t&&NG.has(i)&&(l=PG)}else s&&(qT(s)?l=vx(LT.exec(s),l):GT(s)&&(l=vx(DT.exec(s),l)));return l}function vx(e,t){return e&&e[1]?VT(e[1]):t}function VT(e){return parseFloat(e.split(",")[1])}function GG(e){let t,i,s=null;if(e!=null&&(typeof e=="object"?(t=e.wkid,i=e.wkt):typeof e=="number"?t=e:typeof e=="string"&&(i=e)),t)s=Iu.units[Iu[t]];else if(i){const l=qT(i)?LT:GT(i)?DT:null;if(l){const d=l.exec(i);d&&d[1]&&(s=UG(d[1]))}}return X(s)?zT(s):null}function GT(e){return/^GEOCCS/i.test(e)}function qT(e){return/^PROJCS/i.test(e)}const qG=1e-7;function UG(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=t&&t[1];if(!i||Iu.units.indexOf(i)===-1){const s=VT(e);i=null;const l=Iu.values;for(let d=0;d<l.length;++d)if(Math.abs(s-l[d])<qG){i=Iu.units[d];break}}return i}const UT={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},BT={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},BG=Hi()(UT),HG=Hi()(BT);Hi()(J(J({},UT),BT));function WG(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function pl(e,t,i,s,l,d,y,g,_,M,E,O,P,j,R,z,q){return e[0]=t,e[1]=i,e[2]=s,e[3]=l,e[4]=d,e[5]=y,e[6]=g,e[7]=_,e[8]=M,e[9]=E,e[10]=O,e[11]=P,e[12]=j,e[13]=R,e[14]=z,e[15]=q,e}function y4(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ho(e,t){if(e===t){const i=t[1],s=t[2],l=t[3],d=t[6],y=t[7],g=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=s,e[9]=d,e[11]=t[14],e[12]=l,e[13]=y,e[14]=g}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function JG(e,t){const i=t[0],s=t[1],l=t[2],d=t[3],y=t[4],g=t[5],_=t[6],M=t[7],E=t[8],O=t[9],P=t[10],j=t[11],R=t[12],z=t[13],q=t[14],Y=t[15],te=i*g-s*y,ne=i*_-l*y,he=i*M-d*y,se=s*_-l*g,ue=s*M-d*g,Ee=l*M-d*_,Oe=E*z-O*R,Le=E*q-P*R,Ne=E*Y-j*R,je=O*q-P*z,De=O*Y-j*z,rt=P*Y-j*q;let Ve=te*rt-ne*De+he*je+se*Ne-ue*Le+Ee*Oe;return Ve?(Ve=1/Ve,e[0]=(g*rt-_*De+M*je)*Ve,e[1]=(l*De-s*rt-d*je)*Ve,e[2]=(z*Ee-q*ue+Y*se)*Ve,e[3]=(P*ue-O*Ee-j*se)*Ve,e[4]=(_*Ne-y*rt-M*Le)*Ve,e[5]=(i*rt-l*Ne+d*Le)*Ve,e[6]=(q*he-R*Ee-Y*ne)*Ve,e[7]=(E*Ee-P*he+j*ne)*Ve,e[8]=(y*De-g*Ne+M*Oe)*Ve,e[9]=(s*Ne-i*De-d*Oe)*Ve,e[10]=(R*ue-z*he+Y*te)*Ve,e[11]=(O*he-E*ue-j*te)*Ve,e[12]=(g*Le-y*je-_*Oe)*Ve,e[13]=(i*je-s*Le+l*Oe)*Ve,e[14]=(z*ne-R*se-q*te)*Ve,e[15]=(E*se-O*ne+P*te)*Ve,e):null}function KG(e,t){const i=t[0],s=t[1],l=t[2],d=t[3],y=t[4],g=t[5],_=t[6],M=t[7],E=t[8],O=t[9],P=t[10],j=t[11],R=t[12],z=t[13],q=t[14],Y=t[15];return e[0]=g*(P*Y-j*q)-O*(_*Y-M*q)+z*(_*j-M*P),e[1]=-(s*(P*Y-j*q)-O*(l*Y-d*q)+z*(l*j-d*P)),e[2]=s*(_*Y-M*q)-g*(l*Y-d*q)+z*(l*M-d*_),e[3]=-(s*(_*j-M*P)-g*(l*j-d*P)+O*(l*M-d*_)),e[4]=-(y*(P*Y-j*q)-E*(_*Y-M*q)+R*(_*j-M*P)),e[5]=i*(P*Y-j*q)-E*(l*Y-d*q)+R*(l*j-d*P),e[6]=-(i*(_*Y-M*q)-y*(l*Y-d*q)+R*(l*M-d*_)),e[7]=i*(_*j-M*P)-y*(l*j-d*P)+E*(l*M-d*_),e[8]=y*(O*Y-j*z)-E*(g*Y-M*z)+R*(g*j-M*O),e[9]=-(i*(O*Y-j*z)-E*(s*Y-d*z)+R*(s*j-d*O)),e[10]=i*(g*Y-M*z)-y*(s*Y-d*z)+R*(s*M-d*g),e[11]=-(i*(g*j-M*O)-y*(s*j-d*O)+E*(s*M-d*g)),e[12]=-(y*(O*q-P*z)-E*(g*q-_*z)+R*(g*P-_*O)),e[13]=i*(O*q-P*z)-E*(s*q-l*z)+R*(s*P-l*O),e[14]=-(i*(g*q-_*z)-y*(s*q-l*z)+R*(s*_-l*g)),e[15]=i*(g*P-_*O)-y*(s*P-l*O)+E*(s*_-l*g),e}function YG(e){const t=e[0],i=e[1],s=e[2],l=e[3],d=e[4],y=e[5],g=e[6],_=e[7],M=e[8],E=e[9],O=e[10],P=e[11],j=e[12],R=e[13],z=e[14],q=e[15];return(t*y-i*d)*(O*q-P*z)-(t*g-s*d)*(E*q-P*R)+(t*_-l*d)*(E*z-O*R)+(i*g-s*y)*(M*q-P*j)-(i*_-l*y)*(M*z-O*j)+(s*_-l*g)*(M*R-E*j)}function HT(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=t[4],_=t[5],M=t[6],E=t[7],O=t[8],P=t[9],j=t[10],R=t[11],z=t[12],q=t[13],Y=t[14],te=t[15];let ne=i[0],he=i[1],se=i[2],ue=i[3];return e[0]=ne*s+he*g+se*O+ue*z,e[1]=ne*l+he*_+se*P+ue*q,e[2]=ne*d+he*M+se*j+ue*Y,e[3]=ne*y+he*E+se*R+ue*te,ne=i[4],he=i[5],se=i[6],ue=i[7],e[4]=ne*s+he*g+se*O+ue*z,e[5]=ne*l+he*_+se*P+ue*q,e[6]=ne*d+he*M+se*j+ue*Y,e[7]=ne*y+he*E+se*R+ue*te,ne=i[8],he=i[9],se=i[10],ue=i[11],e[8]=ne*s+he*g+se*O+ue*z,e[9]=ne*l+he*_+se*P+ue*q,e[10]=ne*d+he*M+se*j+ue*Y,e[11]=ne*y+he*E+se*R+ue*te,ne=i[12],he=i[13],se=i[14],ue=i[15],e[12]=ne*s+he*g+se*O+ue*z,e[13]=ne*l+he*_+se*P+ue*q,e[14]=ne*d+he*M+se*j+ue*Y,e[15]=ne*y+he*E+se*R+ue*te,e}function XG(e,t,i){const s=i[0],l=i[1],d=i[2];let y,g,_,M,E,O,P,j,R,z,q,Y;return t===e?(e[12]=t[0]*s+t[4]*l+t[8]*d+t[12],e[13]=t[1]*s+t[5]*l+t[9]*d+t[13],e[14]=t[2]*s+t[6]*l+t[10]*d+t[14],e[15]=t[3]*s+t[7]*l+t[11]*d+t[15]):(y=t[0],g=t[1],_=t[2],M=t[3],E=t[4],O=t[5],P=t[6],j=t[7],R=t[8],z=t[9],q=t[10],Y=t[11],e[0]=y,e[1]=g,e[2]=_,e[3]=M,e[4]=E,e[5]=O,e[6]=P,e[7]=j,e[8]=R,e[9]=z,e[10]=q,e[11]=Y,e[12]=y*s+E*l+R*d+t[12],e[13]=g*s+O*l+z*d+t[13],e[14]=_*s+P*l+q*d+t[14],e[15]=M*s+j*l+Y*d+t[15]),e}function ZG(e,t,i){const s=i[0],l=i[1],d=i[2];return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*l,e[5]=t[5]*l,e[6]=t[6]*l,e[7]=t[7]*l,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function QG(e,t,i,s){let l,d,y,g,_,M,E,O,P,j,R,z,q,Y,te,ne,he,se,ue,Ee,Oe,Le,Ne,je,De=s[0],rt=s[1],Ve=s[2],ni=Math.sqrt(De*De+rt*rt+Ve*Ve);return ni<Ke?null:(ni=1/ni,De*=ni,rt*=ni,Ve*=ni,l=Math.sin(i),d=Math.cos(i),y=1-d,g=t[0],_=t[1],M=t[2],E=t[3],O=t[4],P=t[5],j=t[6],R=t[7],z=t[8],q=t[9],Y=t[10],te=t[11],ne=De*De*y+d,he=rt*De*y+Ve*l,se=Ve*De*y-rt*l,ue=De*rt*y-Ve*l,Ee=rt*rt*y+d,Oe=Ve*rt*y+De*l,Le=De*Ve*y+rt*l,Ne=rt*Ve*y-De*l,je=Ve*Ve*y+d,e[0]=g*ne+O*he+z*se,e[1]=_*ne+P*he+q*se,e[2]=M*ne+j*he+Y*se,e[3]=E*ne+R*he+te*se,e[4]=g*ue+O*Ee+z*Oe,e[5]=_*ue+P*Ee+q*Oe,e[6]=M*ue+j*Ee+Y*Oe,e[7]=E*ue+R*Ee+te*Oe,e[8]=g*Le+O*Ne+z*je,e[9]=_*Le+P*Ne+q*je,e[10]=M*Le+j*Ne+Y*je,e[11]=E*Le+R*Ne+te*je,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function eq(e,t,i){const s=Math.sin(i),l=Math.cos(i),d=t[4],y=t[5],g=t[6],_=t[7],M=t[8],E=t[9],O=t[10],P=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*l+M*s,e[5]=y*l+E*s,e[6]=g*l+O*s,e[7]=_*l+P*s,e[8]=M*l-d*s,e[9]=E*l-y*s,e[10]=O*l-g*s,e[11]=P*l-_*s,e}function tq(e,t,i){const s=Math.sin(i),l=Math.cos(i),d=t[0],y=t[1],g=t[2],_=t[3],M=t[8],E=t[9],O=t[10],P=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*l-M*s,e[1]=y*l-E*s,e[2]=g*l-O*s,e[3]=_*l-P*s,e[8]=d*s+M*l,e[9]=y*s+E*l,e[10]=g*s+O*l,e[11]=_*s+P*l,e}function iq(e,t,i){const s=Math.sin(i),l=Math.cos(i),d=t[0],y=t[1],g=t[2],_=t[3],M=t[4],E=t[5],O=t[6],P=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*l+M*s,e[1]=y*l+E*s,e[2]=g*l+O*s,e[3]=_*l+P*s,e[4]=M*l-d*s,e[5]=E*l-y*s,e[6]=O*l-g*s,e[7]=P*l-_*s,e}function WT(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function rq(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function sq(e,t,i){let s,l,d,y=i[0],g=i[1],_=i[2],M=Math.sqrt(y*y+g*g+_*_);return M<Ke?null:(M=1/M,y*=M,g*=M,_*=M,s=Math.sin(t),l=Math.cos(t),d=1-l,e[0]=y*y*d+l,e[1]=g*y*d+_*s,e[2]=_*y*d-g*s,e[3]=0,e[4]=y*g*d-_*s,e[5]=g*g*d+l,e[6]=_*g*d+y*s,e[7]=0,e[8]=y*_*d+g*s,e[9]=g*_*d-y*s,e[10]=_*_*d+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function nq(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function oq(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function aq(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function JT(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=s+s,_=l+l,M=d+d,E=s*g,O=s*_,P=s*M,j=l*_,R=l*M,z=d*M,q=y*g,Y=y*_,te=y*M;return e[0]=1-(j+z),e[1]=O+te,e[2]=P-Y,e[3]=0,e[4]=O-te,e[5]=1-(E+z),e[6]=R+q,e[7]=0,e[8]=P+Y,e[9]=R-q,e[10]=1-(E+j),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function lq(e,t){const i=uq,s=-t[0],l=-t[1],d=-t[2],y=t[3],g=t[4],_=t[5],M=t[6],E=t[7],O=s*s+l*l+d*d+y*y;return O>0?(i[0]=2*(g*y+E*s+_*d-M*l)/O,i[1]=2*(_*y+E*l+M*s-g*d)/O,i[2]=2*(M*y+E*d+g*l-_*s)/O):(i[0]=2*(g*y+E*s+_*d-M*l),i[1]=2*(_*y+E*l+M*s-g*d),i[2]=2*(M*y+E*d+g*l-_*s)),JT(e,t,i),e}const uq=Yn();function hq(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function cq(e,t){const i=t[0],s=t[1],l=t[2],d=t[4],y=t[5],g=t[6],_=t[8],M=t[9],E=t[10];return e[0]=Math.sqrt(i*i+s*s+l*l),e[1]=Math.sqrt(d*d+y*y+g*g),e[2]=Math.sqrt(_*_+M*M+E*E),e}function pq(e,t){const i=t[0]+t[5]+t[10];let s=0;return i>0?(s=2*Math.sqrt(i+1),e[3]=.25*s,e[0]=(t[6]-t[9])/s,e[1]=(t[8]-t[2])/s,e[2]=(t[1]-t[4])/s):t[0]>t[5]&&t[0]>t[10]?(s=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/s,e[0]=.25*s,e[1]=(t[1]+t[4])/s,e[2]=(t[8]+t[2])/s):t[5]>t[10]?(s=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/s,e[0]=(t[1]+t[4])/s,e[1]=.25*s,e[2]=(t[6]+t[9])/s):(s=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/s,e[0]=(t[8]+t[2])/s,e[1]=(t[6]+t[9])/s,e[2]=.25*s),e}function dq(e,t,i,s){const l=t[0],d=t[1],y=t[2],g=t[3],_=l+l,M=d+d,E=y+y,O=l*_,P=l*M,j=l*E,R=d*M,z=d*E,q=y*E,Y=g*_,te=g*M,ne=g*E,he=s[0],se=s[1],ue=s[2];return e[0]=(1-(R+q))*he,e[1]=(P+ne)*he,e[2]=(j-te)*he,e[3]=0,e[4]=(P-ne)*se,e[5]=(1-(O+q))*se,e[6]=(z+Y)*se,e[7]=0,e[8]=(j+te)*ue,e[9]=(z-Y)*ue,e[10]=(1-(O+R))*ue,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function fq(e,t,i,s,l){const d=t[0],y=t[1],g=t[2],_=t[3],M=d+d,E=y+y,O=g+g,P=d*M,j=d*E,R=d*O,z=y*E,q=y*O,Y=g*O,te=_*M,ne=_*E,he=_*O,se=s[0],ue=s[1],Ee=s[2],Oe=l[0],Le=l[1],Ne=l[2],je=(1-(z+Y))*se,De=(j+he)*se,rt=(R-ne)*se,Ve=(j-he)*ue,ni=(1-(P+Y))*ue,Rr=(q+te)*ue,Jt=(R+ne)*Ee,Wi=(q-te)*Ee,Lr=(1-(P+z))*Ee;return e[0]=je,e[1]=De,e[2]=rt,e[3]=0,e[4]=Ve,e[5]=ni,e[6]=Rr,e[7]=0,e[8]=Jt,e[9]=Wi,e[10]=Lr,e[11]=0,e[12]=i[0]+Oe-(je*Oe+Ve*Le+Jt*Ne),e[13]=i[1]+Le-(De*Oe+ni*Le+Wi*Ne),e[14]=i[2]+Ne-(rt*Oe+Rr*Le+Lr*Ne),e[15]=1,e}function yq(e,t){const i=t[0],s=t[1],l=t[2],d=t[3],y=i+i,g=s+s,_=l+l,M=i*y,E=s*y,O=s*g,P=l*y,j=l*g,R=l*_,z=d*y,q=d*g,Y=d*_;return e[0]=1-O-R,e[1]=E+Y,e[2]=P-q,e[3]=0,e[4]=E-Y,e[5]=1-M-R,e[6]=j+z,e[7]=0,e[8]=P+q,e[9]=j-z,e[10]=1-M-O,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function mq(e,t,i,s,l,d,y){const g=1/(i-t),_=1/(l-s),M=1/(d-y);return e[0]=2*d*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*d*_,e[6]=0,e[7]=0,e[8]=(i+t)*g,e[9]=(l+s)*_,e[10]=(y+d)*M,e[11]=-1,e[12]=0,e[13]=0,e[14]=y*d*2*M,e[15]=0,e}function gq(e,t,i,s,l){const d=1/Math.tan(t/2);let y;return e[0]=d/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,l!=null&&l!==1/0?(y=1/(s-l),e[10]=(l+s)*y,e[14]=2*l*s*y):(e[10]=-1,e[14]=-2*s),e}function vq(e,t,i,s){const l=Math.tan(t.upDegrees*Math.PI/180),d=Math.tan(t.downDegrees*Math.PI/180),y=Math.tan(t.leftDegrees*Math.PI/180),g=Math.tan(t.rightDegrees*Math.PI/180),_=2/(y+g),M=2/(l+d);return e[0]=_,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=M,e[6]=0,e[7]=0,e[8]=-(y-g)*_*.5,e[9]=(l-d)*M*.5,e[10]=s/(i-s),e[11]=-1,e[12]=0,e[13]=0,e[14]=s*i/(i-s),e[15]=0,e}function bq(e,t,i,s,l,d,y){const g=1/(t-i),_=1/(s-l),M=1/(d-y);return e[0]=-2*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*_,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*M,e[11]=0,e[12]=(t+i)*g,e[13]=(l+s)*_,e[14]=(y+d)*M,e[15]=1,e}function wq(e,t,i,s){let l,d,y,g,_,M,E,O,P,j;const R=t[0],z=t[1],q=t[2],Y=s[0],te=s[1],ne=s[2],he=i[0],se=i[1],ue=i[2];return Math.abs(R-he)<Ke&&Math.abs(z-se)<Ke&&Math.abs(q-ue)<Ke?y4(e):(E=R-he,O=z-se,P=q-ue,j=1/Math.sqrt(E*E+O*O+P*P),E*=j,O*=j,P*=j,l=te*P-ne*O,d=ne*E-Y*P,y=Y*O-te*E,j=Math.sqrt(l*l+d*d+y*y),j?(j=1/j,l*=j,d*=j,y*=j):(l=0,d=0,y=0),g=O*y-P*d,_=P*l-E*y,M=E*d-O*l,j=Math.sqrt(g*g+_*_+M*M),j?(j=1/j,g*=j,_*=j,M*=j):(g=0,_=0,M=0),e[0]=l,e[1]=g,e[2]=E,e[3]=0,e[4]=d,e[5]=_,e[6]=O,e[7]=0,e[8]=y,e[9]=M,e[10]=P,e[11]=0,e[12]=-(l*R+d*z+y*q),e[13]=-(g*R+_*z+M*q),e[14]=-(E*R+O*z+P*q),e[15]=1,e)}function _q(e,t,i,s){const l=t[0],d=t[1],y=t[2],g=s[0],_=s[1],M=s[2];let E=l-i[0],O=d-i[1],P=y-i[2],j=E*E+O*O+P*P;j>0&&(j=1/Math.sqrt(j),E*=j,O*=j,P*=j);let R=_*P-M*O,z=M*E-g*P,q=g*O-_*E;return j=R*R+z*z+q*q,j>0&&(j=1/Math.sqrt(j),R*=j,z*=j,q*=j),e[0]=R,e[1]=z,e[2]=q,e[3]=0,e[4]=O*q-P*z,e[5]=P*R-E*q,e[6]=E*z-O*R,e[7]=0,e[8]=E,e[9]=O,e[10]=P,e[11]=0,e[12]=l,e[13]=d,e[14]=y,e[15]=1,e}function xq(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Sq(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function Mq(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function KT(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function $q(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function Iq(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e[4]=t[4]+i[4]*s,e[5]=t[5]+i[5]*s,e[6]=t[6]+i[6]*s,e[7]=t[7]+i[7]*s,e[8]=t[8]+i[8]*s,e[9]=t[9]+i[9]*s,e[10]=t[10]+i[10]*s,e[11]=t[11]+i[11]*s,e[12]=t[12]+i[12]*s,e[13]=t[13]+i[13]*s,e[14]=t[14]+i[14]*s,e[15]=t[15]+i[15]*s,e}function Tq(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Eq(e,t){if(e===t)return!0;const i=e[0],s=e[1],l=e[2],d=e[3],y=e[4],g=e[5],_=e[6],M=e[7],E=e[8],O=e[9],P=e[10],j=e[11],R=e[12],z=e[13],q=e[14],Y=e[15],te=t[0],ne=t[1],he=t[2],se=t[3],ue=t[4],Ee=t[5],Oe=t[6],Le=t[7],Ne=t[8],je=t[9],De=t[10],rt=t[11],Ve=t[12],ni=t[13],Rr=t[14],Jt=t[15];return Math.abs(i-te)<=Ke*Math.max(1,Math.abs(i),Math.abs(te))&&Math.abs(s-ne)<=Ke*Math.max(1,Math.abs(s),Math.abs(ne))&&Math.abs(l-he)<=Ke*Math.max(1,Math.abs(l),Math.abs(he))&&Math.abs(d-se)<=Ke*Math.max(1,Math.abs(d),Math.abs(se))&&Math.abs(y-ue)<=Ke*Math.max(1,Math.abs(y),Math.abs(ue))&&Math.abs(g-Ee)<=Ke*Math.max(1,Math.abs(g),Math.abs(Ee))&&Math.abs(_-Oe)<=Ke*Math.max(1,Math.abs(_),Math.abs(Oe))&&Math.abs(M-Le)<=Ke*Math.max(1,Math.abs(M),Math.abs(Le))&&Math.abs(E-Ne)<=Ke*Math.max(1,Math.abs(E),Math.abs(Ne))&&Math.abs(O-je)<=Ke*Math.max(1,Math.abs(O),Math.abs(je))&&Math.abs(P-De)<=Ke*Math.max(1,Math.abs(P),Math.abs(De))&&Math.abs(j-rt)<=Ke*Math.max(1,Math.abs(j),Math.abs(rt))&&Math.abs(R-Ve)<=Ke*Math.max(1,Math.abs(R),Math.abs(Ve))&&Math.abs(z-ni)<=Ke*Math.max(1,Math.abs(z),Math.abs(ni))&&Math.abs(q-Rr)<=Ke*Math.max(1,Math.abs(q),Math.abs(Rr))&&Math.abs(Y-Jt)<=Ke*Math.max(1,Math.abs(Y),Math.abs(Jt))}function kq(e){const t=Ke,i=e[0],s=e[1],l=e[2],d=e[4],y=e[5],g=e[6],_=e[8],M=e[9],E=e[10];return Math.abs(1-(i*i+d*d+_*_))<=t&&Math.abs(1-(s*s+y*y+M*M))<=t&&Math.abs(1-(l*l+g*g+E*E))<=t}const Aq=HT,Oq=KT;Object.freeze({__proto__:null,copy:WG,set:pl,identity:y4,transpose:Ho,invert:JG,adjoint:KG,determinant:YG,multiply:HT,translate:XG,scale:ZG,rotate:QG,rotateX:eq,rotateY:tq,rotateZ:iq,fromTranslation:WT,fromScaling:rq,fromRotation:sq,fromXRotation:nq,fromYRotation:oq,fromZRotation:aq,fromRotationTranslation:JT,fromQuat2:lq,getTranslation:hq,getScaling:cq,getRotation:pq,fromRotationTranslationScale:dq,fromRotationTranslationScaleOrigin:fq,fromQuat:yq,frustum:mq,perspective:gq,perspectiveFromFieldOfView:vq,ortho:bq,lookAt:wq,targetTo:_q,str:xq,frob:Sq,add:Mq,subtract:KT,multiplyScalar:$q,multiplyScalarAndAdd:Iq,exactEquals:Tq,equals:Eq,isOrthoNormal:kq,mul:Aq,sub:Oq});let Nv,ie=null;function YT(){return!!ie}function Cq(){return!!de("esri-wasm")}function XT(){return Nv||(Nv=import("./pe-wasm.1d1b20e7.js").then(e=>e.p).then(({default:e})=>e({locateFile:t=>bt(`esri/geometry/support/${t}`)})).then(e=>{QT(e)}),Nv)}var Gw,Bt,qw;(function(e){function t(d,y,g){ie.ensureCache.prepare();const _=au(g),M=g===_,E=ie.ensureFloat64(_),O=ie._pe_geog_to_proj(ie.getPointer(d),y,E);return O&&Va(g,y,E,M),O}function i(d,y,g,_){switch(_){case Bt.PE_TRANSFORM_P_TO_G:return s(d,y,g);case Bt.PE_TRANSFORM_G_TO_P:return t(d,y,g)}return 0}function s(d,y,g){return l(d,y,g,0)}function l(d,y,g,_){ie.ensureCache.prepare();const M=au(g),E=g===M,O=ie.ensureFloat64(M),P=ie._pe_proj_to_geog_center(ie.getPointer(d),y,O,_);return P&&Va(g,y,O,E),P}e.geogToProj=t,e.projGeog=i,e.projToGeog=s,e.projToGeogCenter=l})(Gw||(Gw={})),function(e){function t(){e.PE_BUFFER_MAX=ie.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=ie.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=ie.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=ie.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=ie.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=ie.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=ie.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=ie.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=ie.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=ie.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=ie.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=ie.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=ie.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=ie.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=ie.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=ie.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=ie.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=ie.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=ie.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=ie.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=ie.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=ie.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=ie.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=ie.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=ie.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=ie.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=ie.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=ie.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=ie.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=ie.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Bt||(Bt={})),function(e){const t={},i={},s=j=>{if(j){const R=j.getType();switch(R){case Bt.PE_TYPE_GEOGCS:j=ie.castObject(j,ie.PeGeogcs);break;case Bt.PE_TYPE_PROJCS:j=ie.castObject(j,ie.PeProjcs);break;case Bt.PE_TYPE_GEOGTRAN:j=ie.castObject(j,ie.PeGeogtran);break;default:R&Bt.PE_TYPE_UNIT&&(j=ie.castObject(j,ie.PeUnit))}}return j};function l(){ie.PeFactory.prototype.initialize(null)}function d(j){return y(Bt.PE_TYPE_COORDSYS,j)}function y(j,R){let z=null,q=t[j];if(q||(q={},t[j]=q),q.hasOwnProperty(String(R)))z=q[R];else{const Y=ie.PeFactory.prototype.factoryByType(j,R);ie.compare(Y,ie.NULL)||(z=Y,q[R]=z)}return z=s(z),z}function g(j,R){let z=null,q=i[j];if(q||(q={},i[j]=q),q.hasOwnProperty(R))z=q[R];else{const Y=ie.PeFactory.prototype.fromString(j,R);ie.compare(Y,ie.NULL)||(z=Y,q[R]=z)}return z=s(z),z}function _(j){return y(Bt.PE_TYPE_GEOGCS,j)}function M(j){return y(Bt.PE_TYPE_GEOGTRAN,j)}function E(j){return ie.PeFactory.prototype.getCode(j)}function O(j){return y(Bt.PE_TYPE_PROJCS,j)}function P(j){return y(Bt.PE_TYPE_UNIT,j)}e.initialize=l,e.coordsys=d,e.factoryByType=y,e.fromString=g,e.geogcs=_,e.geogtran=M,e.getCode=E,e.projcs=O,e.unit=P}(qw||(qw={}));let ZT=null;var am,Uw,Bw,Hw,lm,Ww,um,hm,Jw;function QT(e){function t(d,y,g){d[y]=g(d[y])}ie=e,Bt.init(),am.init(),lm.init(),um.init(),hm.init(),ZT=class extends ie.PeGCSExtent{destroy(){ie.destroy(this)}};const i=[ie.PeDatum,ie.PeGeogcs,ie.PeGeogtran,ie.PeObject,ie.PeParameter,ie.PePrimem,ie.PeProjcs,ie.PeSpheroid,ie.PeUnit];for(const d of i)t(d.prototype,"getName",y=>function(){return y.call(this,new Array(Bt.PE_NAME_MAX))});for(const d of[ie.PeGeogtran,ie.PeProjcs])t(d.prototype,"getParameters",y=>function(){const g=new Array(Bt.PE_PARM_MAX);let _=y.call(this);for(let M=0;M<g.length;M++){const E=ie.getValue(_,"*");g[M]=E?ie.wrapPointer(E,ie.PeParameter):null,_+=Int32Array.BYTES_PER_ELEMENT}return g});t(ie.PeHorizon.prototype,"getCoord",d=>function(){const y=this.getSize();if(!y)return null;const g=[];return Va(g,y,d.call(this)),g}),t(ie.PeGTlistExtendedEntry.prototype,"getEntries",d=>{const y=ie._pe_getPeGTlistExtendedGTsSize();return function(){let g=null;const _=d.call(this);if(!ie.compare(_,ie.NULL)){g=[_];const M=this.getSteps();if(M>1){const E=ie.getPointer(_);for(let O=1;O<M;O++)g.push(ie.wrapPointer(E+y*O,ie.PeGTlistExtendedGTs))}}return g}});const s=ie._pe_getPeHorizonSize(),l=d=>function(){let y=this._cache;if(y||(y=new Map,this._cache=y),y.has(d))return y.get(d);let g=null;const _=d.call(this);if(!ie.compare(_,ie.NULL)){g=[_];const M=_.getNump();if(M>1){const E=ie.getPointer(_);for(let O=1;O<M;O++)g.push(ie.wrapPointer(E+s*O,ie.PeHorizon))}}return y.set(d,g),g};t(ie.PeProjcs.prototype,"horizonGcsGenerate",l),t(ie.PeProjcs.prototype,"horizonPcsGenerate",l),ie.PeObject.prototype.toString=function(d=Bt.PE_STR_OPTS_NONE){ie.ensureCache.prepare();const y=ie.getPointer(this),g=ie.ensureInt8(new Array(Bt.PE_BUFFER_MAX));return ie.UTF8ToString(ie._pe_object_to_string_ext(y,d,g))}}function io(e){if(!e)return;const t=ie.getClass(e);if(!t)return;const i=ie.getCache(t);if(!i)return;const s=ie.getPointer(e);s&&delete i[s]}function Nf(e,t){const i=[],s=new Array(t);for(let l=0;l<e;l++)i.push(ie.ensureInt8(s));return i}function au(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(i=>{t.push(i[0],i[1])})):t=e,t}function Va(e,t,i,s=!1){if(s)for(let l=0;l<2*t;l++)e[l]=ie.getValue(i+l*Float64Array.BYTES_PER_ELEMENT,"double");else{const l=e.length===0;for(let d=0;d<t;d++)l&&(e[d]=new Array(2)),e[d][0]=ie.getValue(i,"double"),e[d][1]=ie.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=ie.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=ie._pe_getPeGTlistExtendedEntrySize()}function s(l,d,y,g,_,M){let E=null;const O=new ie.PeInteger(M);try{const P=ie.PeGTlistExtended.prototype.getGTlist(l,d,y,g,_,O);if((M=O.val)&&(E=[P],M>1)){const j=ie.getPointer(P);for(let R=1;R<M;R++)E.push(ie.wrapPointer(j+t*R,ie.PeGTlistExtendedEntry))}}finally{ie.destroy(O)}return E}e.init=i,e.getGTlist=s})(am||(am={})),function(e){function t(i){if(i&&i.length){for(const s of i)io(s),s.getEntries().forEach(l=>{io(l);const d=l.getGeogtran();io(d),d.getParameters().forEach(io),[d.getGeogcs1(),d.getGeogcs2()].forEach(y=>{io(y);const g=y.getDatum();io(g),io(g.getSpheroid()),io(y.getPrimem()),io(y.getUnit())})});ie.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(Uw||(Uw={})),function(e){function t(i,s,l,d,y){ie.ensureCache.prepare();const g=au(l),_=l===g,M=ie.ensureFloat64(g);let E=0;d&&(E=ie.ensureFloat64(d));const O=ie._pe_geog_to_geog(ie.getPointer(i),s,M,E,y);return O&&Va(l,s,M,_),O}e.geogToGeog=t}(Bw||(Bw={})),function(e){const t=(M,E,O,P,j,R)=>{let z,q;switch(ie.ensureCache.prepare(),M){case"dd":z=ie._pe_geog_to_dd,q=Bt.PE_DD_MAX;break;case"ddm":z=ie._pe_geog_to_ddm,q=Bt.PE_DDM_MAX;break;case"dms":z=ie._pe_geog_to_dms,q=Bt.PE_DMS_MAX}let Y=0;E&&(Y=ie.getPointer(E));const te=au(P),ne=ie.ensureFloat64(te),he=Nf(O,q),se=z(Y,O,ne,j,ie.ensureInt32(he));if(se)for(let ue=0;ue<O;ue++)R[ue]=ie.UTF8ToString(he[ue]);return se},i=(M,E,O,P,j)=>{let R;switch(ie.ensureCache.prepare(),M){case"dd":R=ie._pe_dd_to_geog;break;case"ddm":R=ie._pe_ddm_to_geog;break;case"dms":R=ie._pe_dms_to_geog}let z=0;E&&(z=ie.getPointer(E));const q=P.map(he=>ie.ensureString(he)),Y=ie.ensureInt32(q),te=ie.ensureFloat64(new Array(2*O)),ne=R(z,O,Y,te);return ne&&Va(j,O,te),ne};function s(M,E,O,P,j){return t("dms",M,E,O,P,j)}function l(M,E,O,P){return i("dms",M,E,O,P)}function d(M,E,O,P,j){return t("ddm",M,E,O,P,j)}function y(M,E,O,P){return i("ddm",M,E,O,P)}function g(M,E,O,P,j){return t("dd",M,E,O,P,j)}function _(M,E,O,P){return i("dd",M,E,O,P)}e.geogToDms=s,e.dmsToGeog=l,e.geogToDdm=d,e.ddmToGeog=y,e.geogToDd=g,e.ddToGeog=_}(Hw||(Hw={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=ie.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=ie.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=ie.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=ie.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=ie.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(l,d,y,g,_,M,E){ie.ensureCache.prepare();let O=0;l&&(O=ie.getPointer(l));const P=au(y),j=ie.ensureFloat64(P),R=Nf(d,Bt.PE_MGRS_MAX),z=ie.ensureInt32(R),q=ie._pe_geog_to_mgrs_extended(O,d,j,g,_,M,z);if(q)for(let Y=0;Y<d;Y++)E[Y]=ie.UTF8ToString(R[Y]);return q}function s(l,d,y,g,_){ie.ensureCache.prepare();let M=0;l&&(M=ie.getPointer(l));const E=y.map(R=>ie.ensureString(R)),O=ie.ensureInt32(E),P=ie.ensureFloat64(new Array(2*d)),j=ie._pe_mgrs_to_geog_extended(M,d,O,g,P);return j&&Va(_,d,P),j}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=s}(lm||(lm={})),function(e){function t(s,l,d,y,g,_,M){ie.ensureCache.prepare();let E=0;s&&(E=ie.getPointer(s));const O=au(d),P=ie.ensureFloat64(O),j=Nf(l,Bt.PE_MGRS_MAX),R=ie.ensureInt32(j),z=ie._pe_geog_to_usng(E,l,P,y,g,_,R);if(z)for(let q=0;q<l;q++)M[q]=ie.UTF8ToString(j[q]);return z}function i(s,l,d,y){ie.ensureCache.prepare();let g=0;s&&(g=ie.getPointer(s));const _=d.map(P=>ie.ensureString(P)),M=ie.ensureInt32(_),E=ie.ensureFloat64(new Array(2*l)),O=ie._pe_usng_to_geog(g,l,M,E);return O&&Va(y,l,E),O}e.geogToUsng=t,e.usngToGeog=i}(Ww||(Ww={})),function(e){function t(){e.PE_UTM_OPTS_NONE=ie.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=ie.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=ie.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(l,d,y,g,_){ie.ensureCache.prepare();let M=0;l&&(M=ie.getPointer(l));const E=au(y),O=ie.ensureFloat64(E),P=Nf(d,Bt.PE_UTM_MAX),j=ie.ensureInt32(P),R=ie._pe_geog_to_utm(M,d,O,g,j);if(R)for(let z=0;z<d;z++)_[z]=ie.UTF8ToString(P[z]);return R}function s(l,d,y,g,_){ie.ensureCache.prepare();let M=0;l&&(M=ie.getPointer(l));const E=y.map(R=>ie.ensureString(R)),O=ie.ensureInt32(E),P=ie.ensureFloat64(new Array(2*d)),j=ie._pe_utm_to_geog(M,d,O,g,P);return j&&Va(_,d,P),j}e.init=t,e.geogToUtm=i,e.utmToGeog=s}(um||(um={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=ie.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=ie.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=ie.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=ie.PePCSInfo.prototype.PE_POLE_POINT}function s(l,d=e.PE_PCSINFO_OPTION_DOMAIN){let y,g;return t.has(l)&&(g=t.get(l),g[d]&&(y=g[d])),y||(y=ie.PePCSInfo.prototype.generate(l,d),g||(g=[],t.set(l,g)),g[d]=y),y}e.init=i,e.generate=s}(hm||(hm={})),function(e){function t(){return ie.PeVersion.prototype.version_string()}e.versionString=t}(Jw||(Jw={}));const Pq=Object.freeze({__proto__:null,get _pe(){return ie},isLoaded:YT,isSupported:Cq,load:XT,get PeCSTransformations(){return Gw},get PeDefs(){return Bt},get PeFactory(){return qw},get PeGCSExtent(){return ZT},get PeGTlistExtended(){return am},get PeGTlistExtendedEntry(){return Uw},get PeGTTransformations(){return Bw},get PeNotationDms(){return Hw},get PeNotationMgrs(){return lm},get PeNotationUsng(){return Ww},get PeNotationUtm(){return um},get PePCSInfo(){return hm},get PeVersion(){return Jw},_init:QT}),Zo=Vt.radius,Ns=Vt.eccentricitySquared,Nq={a1:Zo*Ns,a2:Zo*Ns*Zo*Ns,a3:Zo*Ns*Ns/2,a4:Zo*Ns*Zo*Ns*2.5,a5:Zo*Ns+Zo*Ns*Ns/2,a6:1-Ns};1/294.9786982,1/298.257222101,Vt.radius,Vt.flattening,sl.radius,sl.flattening,1/192.0430107526882,Lo.radius,Lo.flattening,1/10.2079945799458,1/43.61604095563141,Lo.radius;let jf=0;class vc{constructor(t=null){this.uid=jf++,t?(this._wkt=t.wkt!==void 0?t.wkt:null,this._wkid=t.wkid!==void 0?t.wkid:-1,this._isInverse=t.isInverse!==void 0&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(t){const i=new vc;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=jf++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=jf++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=jf++}getInverse(){const t=new vc;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class Ja{constructor(t){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(const i of t.steps)i instanceof vc?this.steps.push(i):this.steps.push(new vc({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}static cacheKey(t,i){return[t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(t){const i=new Ja;let s="";for(const l of t.steps){const d=vc.fromGE(l);i.steps.push(d),s+=d.uid.toString()+","}return i._cached_projection={},i._gtlistentry=null,i._chain=s,i}getInverse(){const t=new Ja;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const s=this.steps[i];t.steps.push(s.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,s){this._cached_projection[Ja.cacheKey(t,i)]=s}getCachedGeTransformation(t,i){let s="";for(const d of this.steps)s+=d.uid.toString()+",";s!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=s);const l=this._cached_projection[Ja.cacheKey(t,i)];return l===void 0?null:l}}function eE(e,t,i){if(ce(t)||ce(i)||i.vcsWkid||jr(t,i))return null;const s=Cc(t)/Cc(i);if(s===1)return null;switch(e){case"point":case"esriGeometryPoint":return l=>jq(l,s);case"polyline":case"esriGeometryPolyline":return l=>Rq(l,s);case"polygon":case"esriGeometryPolygon":return l=>Fq(l,s);case"multipoint":case"esriGeometryMultipoint":return l=>Lq(l,s);case"extent":case"esriGeometryExtent":return l=>Dq(l,s);default:return null}}function jq(e,t){e&&e.z!=null&&(e.z*=t)}function Fq(e,t){if(e)for(const i of e.rings)for(const s of i)s.length>2&&(s[2]*=t)}function Rq(e,t){if(e)for(const i of e.paths)for(const s of i)s.length>2&&(s[2]*=t)}function Lq(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function Dq(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let Gu=null,cm=null,jv=null,Fv={};function Pc(){return!!Gu&&YT()}function Nc(e){return ce(jv)&&(jv=Promise.all([XT(),Promise.resolve().then(function(){return Hae}).then(t=>t.g),Promise.resolve().then(function(){return Qae})])),jv.then(([,t,{hydratedAdapter:i}])=>{mi(e),cm=i,Gu=t.default,Gu._enableProjection(Pq)})}function Wd(e,t,i=null){return Array.isArray(e)?e.length===0?[]:bx(cm,e,e[0].spatialReference,t,i):bx(cm,[e],e.spatialReference,t,i)[0]}function bx(e,t,i,s,l=null){if(ce(i)||ce(s))return t;if(qu(i,s,l))return t.map(d=>Vq(d,i,s));if(ce(l)){const d=Ja.cacheKey(i,s);Fv[d]!==void 0?l=Fv[d]:(l=zq(i,s,null),ce(l)&&(l=new Ja),Fv[d]=l)}if(ce(Gu))throw new tE;return Gu._project(e,t,i,s,l)}function zq(e,t,i=null){if(ce(Gu))throw new tE;if(ce(e)||ce(t))return null;const s=Gu._getTransformation(cm,e,t,i,i==null?void 0:i.spatialReference);return s!==null?Ja.fromGE(s):null}class tE extends re{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var Q;function qu(e,t,i){return!i&&(!!jr(e,t)||Cr(e)&&Cr(t)&&!!nE(e,t,oE))}async function phe(e,t,i,s){if(!Pc()){if(Array.isArray(e)){for(const{source:l,dest:d,geographicTransformation:y}of e)if(!qu(l,d,y))return Nc(s)}else if(!qu(e,t,i))return Nc(s)}}function Vq(e,t,i){return e?"x"in e?Gq(e,t,new Be,i,0):"xmin"in e?Bq(e,t,new Mt,i,0):"rings"in e?iE(e,t,new Ts,i,0):"paths"in e?Uq(e,t,new Ir,i,0):"points"in e?qq(e,t,new Xu,i,0):null:null}function Gq(e,t,i,s,l){Si[0]=e.x,Si[1]=e.y;const d=e.z;return Si[2]=d!==void 0?d:l,Jd(Si,t,0,Si,s,0,1)?(i.x=Si[0],i.y=Si[1],i.spatialReference=s,d===void 0?(i.z=void 0,i.hasZ=!1):(i.z=Si[2],i.hasZ=!0),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function qq(e,t,i,s,l){const{points:d,hasZ:y,hasM:g}=e,_=[],M=d.length,E=[];for(const O of d)E.push(O[0],O[1],y?O[2]:l);if(!Jd(E,t,0,E,s,0,M))return null;for(let O=0;O<M;++O){const P=3*O,j=E[P],R=E[P+1];y&&g?_.push([j,R,E[P+2],d[O][3]]):y?_.push([j,R,E[P+2]]):g?_.push([j,R,d[O][2]]):_.push([j,R])}return i.points=_,i.spatialReference=s,i.hasZ=y,i.hasM=g,i}function Uq(e,t,i,s,l){const{paths:d,hasZ:y,hasM:g}=e,_=[];return rE(d,y,g,t,_,s,l)?(i.paths=_,i.spatialReference=s,i.hasZ=y,i.hasM=g,i):null}function dhe(e,t,i=t.spatialReference,s=0){return X(i)&&X(iE(e,e.spatialReference,t,i,s))}function iE(e,t,i,s,l){const{rings:d,hasZ:y,hasM:g}=e,_=[];return rE(d,y,g,t,_,s,l)?(i.rings=_,i.spatialReference=s,i.hasZ=y,i.hasM=g,i):null}function Bq(e,t,i,s,l){const{xmin:d,ymin:y,xmax:g,ymax:_,hasZ:M,hasM:E}=e;return wx(d,y,M?e.zmin:l,t,Si,s)?(i.xmin=Si[0],i.ymin=Si[1],M&&(i.zmin=Si[2]),wx(g,_,M?e.zmax:l,t,Si,s)?(i.xmax=Si[0],i.ymax=Si[1],M&&(i.zmax=Si[2]),E&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=s,i):null):null}function fhe(e,t,i,s=0){Si[0]=e.x,Si[1]=e.y;const l=e.z;return Si[2]=l!==void 0?l:s,Jd(Si,e.spatialReference,0,t,i,0,1)}function wx(e,t,i,s,l,d){return Ff[0]=e,Ff[1]=t,Ff[2]=i,Jd(Ff,s,0,l,d,0,1)}function Jd(e,t,i,s,l,d,y=1){const g=nE(t,l,oE);if(ce(g))return!1;if(g===Pt){if(e===s&&i===d)return!0;const M=i+3*y;for(let E=i,O=d;E<M;E++,O++)s[O]=e[E];return!0}const _=i+3*y;for(let M=i,E=d;M<_;M+=3,E+=3)g(e,M,s,E);return!0}function rE(e,t,i,s,l,d,y=0){const g=new Array;for(const M of e)for(const E of M)g.push(E[0],E[1],t?E[2]:y);if(!Jd(g,s,0,g,d,0,g.length/3))return!1;let _=0;l.length=0;for(const M of e){const E=new Array;for(const O of M)t&&i?E.push([g[_++],g[_++],g[_++],O[3]]):t?E.push([g[_++],g[_++],g[_++]]):i?(E.push([g[_++],g[_++],O[2]]),_++):(E.push([g[_++],g[_++]]),_++);l.push(E)}return!0}function yhe(e,t,i,s){if(ce(e)||ce(s))return!1;const l=pm(e,lU),d=pm(s,uU);if(l===d&&!_x(d)&&(l!==Q.UNKNOWN||jr(e,s)))return WT(i,t),!0;if(_x(d)){const y=l0[l][Q.LON_LAT],g=l0[Q.LON_LAT][d];return!ce(y)&&!ce(g)&&(y(t,0,Qo,0),g(Qo,0,ea,0),sE(Vn*Qo[0],Vn*Qo[1],i),i[12]=ea[0],i[13]=ea[1],i[14]=ea[2],!0)}if((d===Q.WEB_MERCATOR||d===Q.PLATE_CARREE)&&(l===Q.WGS84||l===Q.CGCS2000&&d===Q.PLATE_CARREE||l===Q.SPHERICAL_ECEF||l===Q.WEB_MERCATOR)){const y=l0[l][Q.LON_LAT],g=l0[Q.LON_LAT][d];return!ce(y)&&!ce(g)&&(y(t,0,Qo,0),g(Qo,0,ea,0),l===Q.SPHERICAL_ECEF?Hq(Vn*Qo[0],Vn*Qo[1],i):y4(i),i[12]=ea[0],i[13]=ea[1],i[14]=ea[2],!0)}return!1}function _x(e){return e===Q.SPHERICAL_ECEF||e===Q.SPHERICAL_MARS_PCPF||e===Q.SPHERICAL_MOON_PCPF}function sE(e,t,i){const s=Math.sin(e),l=Math.cos(e),d=Math.sin(t),y=Math.cos(t),g=i;return g[0]=-s,g[4]=-d*l,g[8]=y*l,g[12]=0,g[1]=l,g[5]=-d*s,g[9]=y*s,g[13]=0,g[2]=0,g[6]=y,g[10]=d,g[14]=0,g[3]=0,g[7]=0,g[11]=0,g[15]=1,g}function Hq(e,t,i){return sE(e,t,i),Ho(i,i),i}function pm(e,t){return t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=tp(e,1)),e.wkt===RT.wkt?t.spatialReferenceId=Q.SPHERICAL_ECEF:od(e)?t.spatialReferenceId=Q.WGS84:Nu(e)?t.spatialReferenceId=Q.WEB_MERCATOR:HF(e)?t.spatialReferenceId=Q.PLATE_CARREE:e.wkt===AG.wkt?t.spatialReferenceId=Q.WGS84_ECEF:e.wkid===Pu.CGCS2000?t.spatialReferenceId=Q.CGCS2000:e.wkt===nm.wkt?t.spatialReferenceId=Q.SPHERICAL_MARS_PCPF:e.wkt===om.wkt?t.spatialReferenceId=Q.SPHERICAL_MOON_PCPF:hg(e)?t.spatialReferenceId=Q.GCSMARS2000:cg(e)?t.spatialReferenceId=Q.GCSMOON2000:t.spatialReferenceId=Q.UNKNOWN)}function Pt(e,t,i,s){e!==i&&(i[s++]=e[t++],i[s++]=e[t++],i[s]=e[t])}function bc(e,t,i,s){i[s++]=jc*(e[t++]/Vt.radius),i[s++]=jc*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/Vt.radius))),i[s]=e[t]}function Wq(e,t,i,s){bc(e,t,i,s),fu(i,s,i,s)}function Jq(e,t,i,s){bc(e,t,i,s),mu(i,s,i,s)}function Kq(e,t,i,s,l){const d=.4999999*Math.PI,y=Is(Vn*e[t+1],-d,d),g=Math.sin(y);i[s++]=Vn*e[t]*l.radius,i[s++]=l.halfSemiMajorAxis*Math.log((1+g)/(1-g)),i[s]=e[t+2]}function gd(e,t,i,s){Kq(e,t,i,s,Vt)}(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(Q||(Q={}));const xx=Vt.radius*Math.PI/180,Sx=180/(Vt.radius*Math.PI);function pu(e,t,i,s){i[s]=e[t]*xx,i[s+1]=e[t+1]*xx,i[s+2]=e[t+2]}function du(e,t,i,s){i[s]=e[t]*Sx,i[s+1]=e[t+1]*Sx,i[s+2]=e[t+2]}function Yq(e,t,i,s){bc(e,t,i,s),pu(i,s,i,s)}function Xq(e,t,i,s){gu(e,t,i,s),pu(i,s,i,s)}function Zq(e,t,i,s){yu(e,t,i,s),pu(i,s,i,s)}function Qq(e,t,i,s){du(e,t,i,s),fu(i,s,i,s)}function eU(e,t,i,s){du(e,t,i,s),gd(i,s,i,s)}function tU(e,t,i,s){du(e,t,i,s),mu(i,s,i,s)}function m4(e,t,i,s,l){const d=l+e[t+2],y=Vn*e[t+1],g=Vn*e[t],_=Math.cos(y);i[s++]=Math.cos(g)*_*d,i[s++]=Math.sin(g)*_*d,i[s]=Math.sin(y)*d}function Mx(e,t,i,s){m4(e,t,i,s,sl.radius)}function $x(e,t,i,s){m4(e,t,i,s,Lo.radius)}function fu(e,t,i,s){m4(e,t,i,s,Vt.radius)}function g4(e,t,i,s,l){const d=e[t],y=e[t+1],g=e[t+2],_=Math.sqrt(d*d+y*y+g*g),M=gI(g/(_===0?1:_)),E=Math.atan2(y,d);i[s++]=jc*E,i[s++]=jc*M,i[s]=_-l}function Ix(e,t,i,s){g4(e,t,i,s,sl.radius)}function Tx(e,t,i,s){g4(e,t,i,s,Lo.radius)}function yu(e,t,i,s){g4(e,t,i,s,Vt.radius)}function iU(e,t,i,s){yu(e,t,i,s),gd(i,s,i,s)}function rU(e,t,i,s){yu(e,t,i,s),mu(i,s,i,s)}function sU(e,t,i,s,l){const d=Vn*e[t],y=Vn*e[t+1],g=e[t+2],_=Math.sin(y),M=Math.cos(y),E=l.radius/Math.sqrt(1-l.eccentricitySquared*_*_);i[s++]=(E+g)*M*Math.cos(d),i[s++]=(E+g)*M*Math.sin(d),i[s++]=(E*(1-l.eccentricitySquared)+g)*_}function mu(e,t,i,s){sU(e,t,i,s,Vt)}function gu(e,t,i,s){const l=Nq,d=e[t],y=e[t+1],g=e[t+2];let _,M,E,O,P,j,R,z,q,Y,te,ne,he,se,ue,Ee,Oe,Le,Ne,je,De;_=Math.abs(g),M=d*d+y*y,E=Math.sqrt(M),O=M+g*g,P=Math.sqrt(O),je=Math.atan2(y,d),j=g*g/O,R=M/O,se=l.a2/P,ue=l.a3-l.a4/P,R>.3?(z=_/P*(1+R*(l.a1+se+j*ue)/P),Ne=Math.asin(z),Y=z*z,q=Math.sqrt(1-Y)):(q=E/P*(1-j*(l.a5-se-R*ue)/P),Ne=Math.acos(q),Y=1-q*q,z=Math.sqrt(Y)),te=1-Vt.eccentricitySquared*Y,ne=Vt.radius/Math.sqrt(te),he=l.a6*ne,se=E-ne*q,ue=_-he*z,Oe=q*se+z*ue,Ee=q*ue-z*se,Le=Ee/(he/te+Oe),Ne+=Le,De=Oe+Ee*Le/2,g<0&&(Ne=-Ne),i[s++]=jc*je,i[s++]=jc*Ne,i[s]=De}function nU(e,t,i,s){gu(e,t,i,s),fu(i,s,i,s)}function oU(e,t,i,s){gu(e,t,i,s),gd(i,s,i,s)}const l0={[Q.WGS84]:{[Q.CGCS2000]:null,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:null,[Q.LON_LAT]:Pt,[Q.WGS84_COMPARABLE_LON_LAT]:Pt,[Q.SPHERICAL_ECEF]:fu,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:gd,[Q.PLATE_CARREE]:pu,[Q.WGS84]:Pt,[Q.WGS84_ECEF]:mu},[Q.CGCS2000]:{[Q.CGCS2000]:Pt,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:null,[Q.LON_LAT]:Pt,[Q.WGS84_COMPARABLE_LON_LAT]:Pt,[Q.SPHERICAL_ECEF]:fu,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:null,[Q.PLATE_CARREE]:pu,[Q.WGS84]:null,[Q.WGS84_ECEF]:mu},[Q.GCSMARS2000]:{[Q.CGCS2000]:null,[Q.GCSMARS2000]:Pt,[Q.GCSMOON2000]:null,[Q.LON_LAT]:Pt,[Q.WGS84_COMPARABLE_LON_LAT]:null,[Q.SPHERICAL_ECEF]:null,[Q.SPHERICAL_MARS_PCPF]:$x,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:null,[Q.PLATE_CARREE]:null,[Q.WGS84]:null,[Q.WGS84_ECEF]:null},[Q.GCSMOON2000]:{[Q.CGCS2000]:null,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:Pt,[Q.LON_LAT]:Pt,[Q.WGS84_COMPARABLE_LON_LAT]:null,[Q.SPHERICAL_ECEF]:null,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:Mx,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:null,[Q.PLATE_CARREE]:null,[Q.WGS84]:null,[Q.WGS84_ECEF]:null},[Q.WEB_MERCATOR]:{[Q.CGCS2000]:null,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:null,[Q.LON_LAT]:bc,[Q.WGS84_COMPARABLE_LON_LAT]:bc,[Q.SPHERICAL_ECEF]:Wq,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:Pt,[Q.PLATE_CARREE]:Yq,[Q.WGS84]:bc,[Q.WGS84_ECEF]:Jq},[Q.WGS84_ECEF]:{[Q.CGCS2000]:gu,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:null,[Q.LON_LAT]:gu,[Q.WGS84_COMPARABLE_LON_LAT]:gu,[Q.SPHERICAL_ECEF]:nU,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:oU,[Q.PLATE_CARREE]:Xq,[Q.WGS84]:gu,[Q.WGS84_ECEF]:Pt},[Q.SPHERICAL_ECEF]:{[Q.CGCS2000]:yu,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:null,[Q.LON_LAT]:yu,[Q.WGS84_COMPARABLE_LON_LAT]:yu,[Q.SPHERICAL_ECEF]:Pt,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:iU,[Q.PLATE_CARREE]:Zq,[Q.WGS84]:yu,[Q.WGS84_ECEF]:rU},[Q.SPHERICAL_MARS_PCPF]:{[Q.CGCS2000]:null,[Q.GCSMARS2000]:Tx,[Q.GCSMOON2000]:null,[Q.LON_LAT]:Tx,[Q.WGS84_COMPARABLE_LON_LAT]:null,[Q.SPHERICAL_ECEF]:null,[Q.SPHERICAL_MARS_PCPF]:Pt,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:null,[Q.PLATE_CARREE]:null,[Q.WGS84]:null,[Q.WGS84_ECEF]:null},[Q.SPHERICAL_MOON_PCPF]:{[Q.CGCS2000]:null,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:Ix,[Q.LON_LAT]:Ix,[Q.WGS84_COMPARABLE_LON_LAT]:null,[Q.SPHERICAL_ECEF]:null,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:Pt,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:null,[Q.PLATE_CARREE]:null,[Q.WGS84]:null,[Q.WGS84_ECEF]:null},[Q.UNKNOWN]:{[Q.CGCS2000]:null,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:null,[Q.LON_LAT]:null,[Q.WGS84_COMPARABLE_LON_LAT]:null,[Q.SPHERICAL_ECEF]:null,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:Pt,[Q.WEB_MERCATOR]:null,[Q.PLATE_CARREE]:null,[Q.WGS84]:null,[Q.WGS84_ECEF]:null},[Q.LON_LAT]:{[Q.CGCS2000]:Pt,[Q.GCSMARS2000]:Pt,[Q.GCSMOON2000]:Pt,[Q.LON_LAT]:Pt,[Q.WGS84_COMPARABLE_LON_LAT]:Pt,[Q.SPHERICAL_ECEF]:fu,[Q.SPHERICAL_MARS_PCPF]:$x,[Q.SPHERICAL_MOON_PCPF]:Mx,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:gd,[Q.PLATE_CARREE]:pu,[Q.WGS84]:Pt,[Q.WGS84_ECEF]:mu},[Q.WGS84_COMPARABLE_LON_LAT]:{[Q.CGCS2000]:null,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:null,[Q.LON_LAT]:Pt,[Q.WGS84_COMPARABLE_LON_LAT]:Pt,[Q.SPHERICAL_ECEF]:fu,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:null,[Q.PLATE_CARREE]:pu,[Q.WGS84]:Pt,[Q.WGS84_ECEF]:mu},[Q.PLATE_CARREE]:{[Q.CGCS2000]:du,[Q.GCSMARS2000]:null,[Q.GCSMOON2000]:null,[Q.LON_LAT]:du,[Q.WGS84_COMPARABLE_LON_LAT]:du,[Q.SPHERICAL_ECEF]:Qq,[Q.SPHERICAL_MARS_PCPF]:null,[Q.SPHERICAL_MOON_PCPF]:null,[Q.UNKNOWN]:null,[Q.WEB_MERCATOR]:eU,[Q.PLATE_CARREE]:Pt,[Q.WGS84]:du,[Q.WGS84_ECEF]:tU}};function nE(e,t,i=v4()){return ce(e)||ce(t)?null:aU(e,t,i).projector}function aU(e,t,i){if(ce(e)||ce(t)||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const s=pm(e,i.source),l=pm(t,i.dest);return s===Q.UNKNOWN&&l===Q.UNKNOWN?jr(e,t)?i.projector=Pt:i.projector=null:i.projector=l0[s][l],i}function v4(){return{source:{spatialReference:null,spatialReferenceId:Q.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:Q.UNKNOWN,metersPerUnit:1},projector:Pt}}const lU={spatialReference:null,spatialReferenceId:Q.UNKNOWN},uU={spatialReference:null,spatialReferenceId:Q.UNKNOWN},oE=v4();v4();const Vn=MD(1),jc=mI(1),Ff=Yn(),Qo=Yn(),ea=Yn(),Si=Yn();var Kw;let kn=Kw=class extends ge{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new Kw({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};b([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],kn.prototype,"cols",void 0),b([S({type:Lt,json:{write:!0}})],kn.prototype,"level",void 0),b([S({type:String,json:{write:!0}})],kn.prototype,"levelValue",void 0),b([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],kn.prototype,"origin",void 0),b([S({type:Number,json:{write:!0}})],kn.prototype,"resolution",void 0),b([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],kn.prototype,"rows",void 0),b([S({type:Number,json:{write:!0}})],kn.prototype,"scale",void 0),kn=Kw=b([H("esri.layers.support.LOD")],kn);const b4=kn;var va;const Ex=new ot({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Ei=va=class extends ge{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:i,size:s=256,spatialReference:l=it.WebMercator,numLODs:d=24}=e;if(!Cr(l)){const O=[];if(i)for(let P=0;P<i.length;P++){const j=i[P];O.push({level:P,scale:j,resolution:j})}else{let P=5e-4;for(let j=d-1;j>=0;j--)O.unshift({level:j,scale:P,resolution:P}),P*=2}return new va({dpi:96,lods:O,origin:new Be(0,0,l),size:[s,s],spatialReference:l})}const y=ln(l),g=e.origin?new Be({x:e.origin.x,y:e.origin.y,spatialReference:l}):new Be(y?{x:y.origin[0],y:y.origin[1],spatialReference:l}:{x:0,y:0,spatialReference:l}),_=96,M=1/(tp(l)*39.37*_),E=[];if(i)for(let O=0;O<i.length;O++){const P=i[O],j=P*M;E.push({level:O,scale:P,resolution:j})}else{let O=O$(l)?512/s*5916575275917094e-7:256/s*591657527591555e-6;const P=Math.ceil(d/t);E.push({level:0,scale:O,resolution:O*M});for(let j=1;j<P;j++){const R=O/2**t,z=R*M;E.push({level:j,scale:R,resolution:z}),O=R}}return new va({dpi:_,lods:E,origin:g,size:[s,s],spatialReference:l})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=ln(e);return e.isWrappable&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return Be.fromJSON(J({spatialReference:t.spatialReference},e))}set lods(e){let t=0,i=0;const s=[];this._levelToLOD={},e&&(t=-1/0,i=1/0,e.forEach(l=>{s.push(l.scale),t=l.scale>t?l.scale:t,i=l.scale<i?l.scale:i,this._levelToLOD[l.level]=l})),this._set("scales",s),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const i=Math.floor(e),s=i+1;return t[i]/(t[i]/t[s])**(e-i)}}scaleToZoom(e){const t=this.scales,i=t.length-1;let s=0;for(;s<i;s++){const l=t[s],d=t[s+1];if(l<=e)return s;if(d===e)return s+1;if(l>e&&d<e)return s+Math.log(l/e)/Math.log(l/d)}return s}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,s){const l=this.lodAt(e);if(!l)return null;let d,y;if(typeof t=="number")d=t,y=i;else if(jr(t.spatialReference,this.spatialReference))d=t.x,y=t.y,s=i;else{const M=pg(t,this.spatialReference);if(ce(M))return null;d=M.x,y=M.y,s=i}const g=l.resolution*this.size[0],_=l.resolution*this.size[1];return s||(s={id:null,level:0,row:0,col:0,extent:zu()}),s.level=e,s.row=Math.floor((this.origin.y-y)/_+.001),s.col=Math.floor((d-this.origin.x)/g+.001),this.updateTileInfo(s),s}updateTileInfo(e,t=va.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===va.ExtrapolateOptions.POWER_OF_TWO){const y=this.lods[this.lods.length-1];y.level<e.level&&(i=y)}if(!i)return;const s=e.level-i.level,l=i.resolution*this.size[0]/2**s,d=i.resolution*this.size[1]/2**s;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=zu()),e.extent[0]=this.origin.x+e.col*l,e.extent[1]=this.origin.y-(e.row+1)*d,e.extent[2]=e.extent[0]+l,e.extent[3]=e.extent[1]+d}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:i}=this.lodAt(t.level),s=i*this.size[0],l=i*this.size[1];return e[0]=this.origin.x+t.col*s,e[1]=this.origin.y-(t.row+1)*l,e[2]=e[0]+s,e[3]=e[1]+l,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return va.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const i=[],s=this.lods.length;for(let l=0;l<s;l++){const d=this.lods[l],y=d.resolution*t;i.push(new b4({level:d.level,scale:d.scale,resolution:y}))}return new va({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const s=e[i];this._upsampleLevels[s.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/s.resolution:0},t=s}}};b([S({type:Number,json:{write:!0}})],Ei.prototype,"compressionQuality",void 0),b([S({type:Number,json:{write:!0}})],Ei.prototype,"dpi",void 0),b([S({type:String,json:{read:Ex.read,write:Ex.write,origins:{"web-scene":{read:!1,write:!1}}}})],Ei.prototype,"format",void 0),b([S({readOnly:!0})],Ei.prototype,"isWrappable",null),b([S({type:Be,json:{write:!0}})],Ei.prototype,"origin",void 0),b([$e("origin")],Ei.prototype,"readOrigin",null),b([S({type:[b4],value:null,json:{write:!0}})],Ei.prototype,"lods",null),b([S({readOnly:!0})],Ei.prototype,"minScale",void 0),b([S({readOnly:!0})],Ei.prototype,"maxScale",void 0),b([S({readOnly:!0})],Ei.prototype,"scales",void 0),b([S({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Ei.prototype,"size",void 0),b([$e("size",["rows","cols"])],Ei.prototype,"readSize",null),b([ke("size",{cols:{type:Lt},rows:{type:Lt}})],Ei.prototype,"writeSize",null),b([S({type:it,json:{write:!0}})],Ei.prototype,"spatialReference",void 0),Ei=va=b([H("esri.layers.support.TileInfo")],Ei),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(Ei||(Ei={}));const hU=Ei,W1={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,s=this.values;return t<=i.xsmall?s.xsmall:t<=i.small?s.small:t<=i.medium?s.medium:t<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,s=this.values;return t<=i.xsmall?s.xsmall:t<=i.small?s.small:t<=i.medium?s.medium:t<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],s=t[1],l=this.values;return s>=i?l.portrait:l.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Rv={xsmall:544,small:768,medium:992,large:1200};function cU(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function Lv(e,t){return t?W1[e].valueToClassName[t].split(" "):[]}const pU=e=>{let t=class extends e{constructor(...i){super(...i),this._breakpointsHandles=new yr,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Rv}initialize(){this._breakpointsHandles.add(Ft(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Gn))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=Dn(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const s=cU(i);if(!s){const l=JSON.stringify(Rv,null,2);console.warn("provided breakpoints are not valid, using defaults:"+l)}i=s?i:Rv,this._set("breakpoints",J({},i))}_updateClassNames(){if(!this.container)return;const i=ur.acquire(),s=ur.acquire();let l,d=!1;for(l in W1){const y=this[l],g=W1[l].getValue({viewSize:this.size,breakpoints:this.breakpoints});y!==g&&(d=!0,this[l]=g,Lv(l,y).forEach(_=>s.push(_)),Lv(l,g).forEach(_=>i.push(_)))}d&&(this._applyClassNameChanges(i,s),ur.release(i),ur.release(s))}_applyClassNameChanges(i,s){const l=this.container;l&&(s.forEach(d=>l.classList.remove(d)),i.forEach(d=>l.classList.add(d)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let s;for(s in W1)Lv(s,this[s]).forEach(l=>i.classList.remove(l))}};return b([S()],t.prototype,"breakpoints",null),b([S()],t.prototype,"orientation",void 0),b([S()],t.prototype,"widthBreakpoint",void 0),b([S()],t.prototype,"heightBreakpoint",void 0),t=b([H("esri.views.BreakpointsOwner")],t),t};function w4(e){return typeof e=="string"?document.getElementById(e):e}function aE(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function kx(e,t){const i=t.parentNode;i&&i.insertBefore(e,t)}function Ax(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}/*!
 * @esri/arcgis-html-sanitizer - v2.9.0 - Mon Dec 13 2021 15:07:01 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2021 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */var dU="[object Object]";function fU(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function yU(e,t){return function(i){return e(t(i))}}var mU=Function.prototype,lE=Object.prototype,uE=mU.toString,gU=lE.hasOwnProperty,vU=uE.call(Object),bU=lE.toString,wU=yU(Object.getPrototypeOf,Object);function _U(e){return!!e&&typeof e=="object"}function xU(e){if(!_U(e)||bU.call(e)!=dU||fU(e))return!1;var t=wU(e);if(t===null)return!0;var i=gU.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&uE.call(i)==vU}var SU=xU,sc={exports:{}},si={},vd={exports:{}},ih={};function hE(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function MU(e,t,i){}function $U(e,t,i){}var IU=/javascript\s*\:/img;function TU(e,t){return IU.test(t)?"":t}ih.whiteList=hE();ih.getDefaultWhiteList=hE;ih.onAttr=MU;ih.onIgnoreAttr=$U;ih.safeAttrValue=TU;var EU={indexOf:function(e,t){var i,s;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var s,l;if(Array.prototype.forEach)return e.forEach(t,i);for(s=0,l=e.length;s<l;s++)t.call(i,e[s],s,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},xp=EU;function kU(e,t){e=xp.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,s=!1,l=0,d=0,y="";function g(){if(!s){var E=xp.trim(e.slice(l,d)),O=E.indexOf(":");if(O!==-1){var P=xp.trim(E.slice(0,O)),j=xp.trim(E.slice(O+1));if(P){var R=t(l,y.length,P,j,E);R&&(y+=R+"; ")}}}l=d+1}for(;d<i;d++){var _=e[d];if(_==="/"&&e[d+1]==="*"){var M=e.indexOf("*/",d+2);if(M===-1)break;d=M+1,l=d+1,s=!1}else _==="("?s=!0:_===")"?s=!1:_===";"?s||g():_===`
`&&g()}return xp.trim(y)}var AU=kU,Rf=ih,OU=AU;function Ox(e){return e==null}function CU(e){var t={};for(var i in e)t[i]=e[i];return t}function cE(e){e=CU(e||{}),e.whiteList=e.whiteList||Rf.whiteList,e.onAttr=e.onAttr||Rf.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Rf.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Rf.safeAttrValue,this.options=e}cE.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,s=i.whiteList,l=i.onAttr,d=i.onIgnoreAttr,y=i.safeAttrValue,g=OU(e,function(_,M,E,O,P){var j=s[E],R=!1;if(j===!0?R=j:typeof j=="function"?R=j(O):j instanceof RegExp&&(R=j.test(O)),R!==!0&&(R=!1),O=y(E,O),!!O){var z={position:M,sourcePosition:_,source:P,isWhite:R};if(R){var q=l(E,O,z);return Ox(q)?E+":"+O:q}else{var q=d(E,O,z);if(!Ox(q))return q}}});return g};var PU=cE;(function(e,t){var i=ih,s=PU;function l(y,g){var _=new s(g);return _.process(y)}t=e.exports=l,t.FilterCSS=s;for(var d in i)t[d]=i[d]})(vd,vd.exports);var _4={indexOf:function(e,t){var i,s;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var s,l;if(Array.prototype.forEach)return e.forEach(t,i);for(s=0,l=e.length;s<l;s++)t.call(i,e[s],s,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},NU=vd.exports.FilterCSS,jU=vd.exports.getDefaultWhiteList,dm=_4;function pE(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var dE=new NU;function FU(e,t,i){}function RU(e,t,i){}function LU(e,t,i){}function DU(e,t,i){}function fE(e){return e.replace(VU,"&lt;").replace(GU,"&gt;")}function zU(e,t,i,s){if(i=wE(i),t==="href"||t==="src"){if(i=dm.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(Lf.lastIndex=0,Lf.test(i))return""}else if(t==="style"){if(Cx.lastIndex=0,Cx.test(i)||(Px.lastIndex=0,Px.test(i)&&(Lf.lastIndex=0,Lf.test(i))))return"";s!==!1&&(s=s||dE,i=s.process(i))}return i=_E(i),i}var VU=/</g,GU=/>/g,qU=/"/g,UU=/&quot;/g,BU=/&#([a-zA-Z0-9]*);?/gim,HU=/&colon;?/gim,WU=/&newline;?/gim,Lf=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,Cx=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Px=/u\s*r\s*l\s*\(.*/gi;function yE(e){return e.replace(qU,"&quot;")}function mE(e){return e.replace(UU,'"')}function gE(e){return e.replace(BU,function(i,s){return s[0]==="x"||s[0]==="X"?String.fromCharCode(parseInt(s.substr(1),16)):String.fromCharCode(parseInt(s,10))})}function vE(e){return e.replace(HU,":").replace(WU," ")}function bE(e){for(var t="",i=0,s=e.length;i<s;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return dm.trim(t)}function wE(e){return e=mE(e),e=gE(e),e=vE(e),e=bE(e),e}function _E(e){return e=yE(e),e=fE(e),e}function JU(){return""}function KU(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function s(y){return i?!0:dm.indexOf(e,y)!==-1}var l=[],d=!1;return{onIgnoreTag:function(y,g,_){if(s(y))if(_.isClosing){var M="[/removed]",E=_.position+M.length;return l.push([d!==!1?d:_.position,E]),d=!1,M}else return d||(d=_.position),"[removed]";else return t(y,g,_)},remove:function(y){var g="",_=0;return dm.forEach(l,function(M){g+=y.slice(_,M[0]),_=M[1]}),g+=y.slice(_),g}}}function YU(e){for(var t="",i=0;i<e.length;){var s=e.indexOf("<!--",i);if(s===-1){t+=e.slice(i);break}t+=e.slice(i,s);var l=e.indexOf("-->",s);if(l===-1)break;i=l+3}return t}function XU(e){var t=e.split("");return t=t.filter(function(i){var s=i.charCodeAt(0);return s===127?!1:s<=31?s===10||s===13:!0}),t.join("")}si.whiteList=pE();si.getDefaultWhiteList=pE;si.onTag=FU;si.onIgnoreTag=RU;si.onTagAttr=LU;si.onIgnoreTagAttr=DU;si.safeAttrValue=zU;si.escapeHtml=fE;si.escapeQuote=yE;si.unescapeQuote=mE;si.escapeHtmlEntities=gE;si.escapeDangerHtml5Entities=vE;si.clearNonPrintableCharacter=bE;si.friendlyAttrValue=wE;si.escapeAttrValue=_E;si.onIgnoreTagStripAll=JU;si.StripTagBody=KU;si.stripCommentTag=YU;si.stripBlankChar=XU;si.cssFilter=dE;si.getDefaultCSSWhiteList=jU;var $g={},ja=_4;function ZU(e){var t=ja.spaceIndex(e);if(t===-1)var i=e.slice(1,-1);else var i=e.slice(1,t+1);return i=ja.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function QU(e){return e.slice(0,2)==="</"}function eB(e,t,i){var s="",l=0,d=!1,y=!1,g=0,_=e.length,M="",E="";e:for(g=0;g<_;g++){var O=e.charAt(g);if(d===!1){if(O==="<"){d=g;continue}}else if(y===!1){if(O==="<"){s+=i(e.slice(l,g)),d=g,l=g;continue}if(O===">"){s+=i(e.slice(l,d)),E=e.slice(d,g+1),M=ZU(E),s+=t(d,s.length,M,E,QU(E)),l=g+1,d=!1;continue}if(O==='"'||O==="'")for(var P=1,j=e.charAt(g-P);j.trim()===""||j==="=";){if(j==="="){y=O;continue e}j=e.charAt(g-++P)}}else if(O===y){y=!1;continue}}return l<e.length&&(s+=i(e.substr(l))),s}var tB=/[^a-zA-Z0-9_:\.\-]/gim;function iB(e,t){var i=0,s=[],l=!1,d=e.length;function y(O,P){if(O=ja.trim(O),O=O.replace(tB,"").toLowerCase(),!(O.length<1)){var j=t(O,P||"");j&&s.push(j)}}for(var g=0;g<d;g++){var _=e.charAt(g),M,E;if(l===!1&&_==="="){l=e.slice(i,g),i=g+1;continue}if(l!==!1&&g===i&&(_==='"'||_==="'")&&e.charAt(g-1)==="="){if(E=e.indexOf(_,g+1),E===-1)break;M=ja.trim(e.slice(i+1,E)),y(l,M),l=!1,g=E,i=g+1;continue}if(/\s|\n|\t/.test(_))if(e=e.replace(/\s|\n|\t/g," "),l===!1)if(E=rB(e,g),E===-1){M=ja.trim(e.slice(i,g)),y(M),l=!1,i=g+1;continue}else{g=E-1;continue}else if(E=sB(e,g-1),E===-1){M=ja.trim(e.slice(i,g)),M=Nx(M),y(l,M),l=!1,i=g+1;continue}else continue}return i<e.length&&(l===!1?y(e.slice(i)):y(l,Nx(ja.trim(e.slice(i))))),ja.trim(s.join(" "))}function rB(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function sB(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function nB(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function Nx(e){return nB(e)?e.substr(1,e.length-2):e}$g.parseTag=eB;$g.parseAttr=iB;var oB=vd.exports.FilterCSS,Qs=si,xE=$g,aB=xE.parseTag,lB=xE.parseAttr,J1=_4;function Df(e){return e==null}function uB(e){var t=J1.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=J1.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=J1.trim(e.slice(0,-1))),{html:e,closing:i}}function hB(e){var t={};for(var i in e)t[i]=e[i];return t}function SE(e){e=hB(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Qs.onIgnoreTagStripAll),e.whiteList=e.whiteList||Qs.whiteList,e.onTag=e.onTag||Qs.onTag,e.onTagAttr=e.onTagAttr||Qs.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Qs.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Qs.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Qs.safeAttrValue,e.escapeHtml=e.escapeHtml||Qs.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new oB(e.css))}SE.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,s=i.whiteList,l=i.onTag,d=i.onIgnoreTag,y=i.onTagAttr,g=i.onIgnoreTagAttr,_=i.safeAttrValue,M=i.escapeHtml,E=t.cssFilter;i.stripBlankChar&&(e=Qs.stripBlankChar(e)),i.allowCommentTag||(e=Qs.stripCommentTag(e));var O=!1;if(i.stripIgnoreTagBody){var O=Qs.StripTagBody(i.stripIgnoreTagBody,d);d=O.onIgnoreTag}var P=aB(e,function(j,R,z,q,Y){var te={sourcePosition:j,position:R,isClosing:Y,isWhite:s.hasOwnProperty(z)},ne=l(z,q,te);if(!Df(ne))return ne;if(te.isWhite){if(te.isClosing)return"</"+z+">";var he=uB(q),se=s[z],ue=lB(he.html,function(Oe,Le){var Ne=J1.indexOf(se,Oe)!==-1,je=y(z,Oe,Le,Ne);if(!Df(je))return je;if(Ne)return Le=_(z,Oe,Le,E),Le?Oe+'="'+Le+'"':Oe;var je=g(z,Oe,Le,Ne);return Df(je)?void 0:je}),q="<"+z;return ue&&(q+=" "+ue),he.closing&&(q+=" /"),q+=">",q}else{var ne=d(z,q,te);return Df(ne)?M(q):ne}},M);return O&&(P=O.remove(P)),P};var cB=SE;(function(e,t){var i=si,s=$g,l=cB;function d(_,M){var E=new l(M);return E.process(_)}t=e.exports=d,t.filterXSS=d,t.FilterXSS=l;for(var y in i)t[y]=i[y];for(var y in s)t[y]=s[y];function g(){return typeof self!="undefined"&&typeof DedicatedWorkerGlobalScope!="undefined"&&self instanceof DedicatedWorkerGlobalScope}g()&&(self.filterXSS=e.exports)})(sc,sc.exports);var pB=function(){function e(t,i){var s=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(d,y,g,_){return d==="a"&&y==="href"||(d==="img"||d==="source")&&y==="src"?s.sanitizeUrl(g):sc.exports.safeAttrValue(d,y,g,_)}};var l;t&&!i?l=t:t&&i?(l=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(d){d==="whiteList"?l.whiteList=s._extendObjectOfArrays([s.arcgisWhiteList,t.whiteList||{}]):l[d]=t[d]})):(l=Object.create(this.arcgisFilterOptions),l.whiteList=this.arcgisWhiteList),this.xssFilterOptions=l,this._xssFilter=new sc.exports.FilterXSS(l)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t=="undefined"?void 0:null}},e.prototype.sanitizeUrl=function(t){var i=this._trim(t.substring(0,t.indexOf(":")));return t==="/"||t==="#"||t[0]==="#"||this.allowedProtocols.indexOf(i.toLowerCase())>-1?sc.exports.escapeAttrValue(t):""},e.prototype.sanitizeHTMLAttribute=function(t,i,s,l){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,s,l):sc.exports.safeAttrValue(t,i,s,l)},e.prototype.validate=function(t,i){i===void 0&&(i={});var s=this.sanitize(t,i);return{isValid:t===s,sanitized:s}},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(s){Object.keys(s).forEach(function(l){Array.isArray(s[l])&&Array.isArray(i[l])?i[l]=i[l].concat(s[l]):i[l]=s[l]})}),i},e.prototype._iterateOverObject=function(t,i){var s=this;i===void 0&&(i={});try{var l=!1,d=void 0;if(Array.isArray(t))d=t.reduce(function(g,_){var M=s.validate(_,i);return M.isValid?g.concat([_]):(l=!0,g.concat([M.sanitized]))},[]);else if(SU(t)){var y=Object.keys(t);d=y.reduce(function(g,_){var M=t[_],E=s.validate(M,i);return E.isValid?g[_]=M:(l=!0,g[_]=E.sanitized),g},{})}else return i.allowUndefined&&typeof t=="undefined"?void 0:null;return l?d:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const Ig=new Map;function ME(){Ig.clear()}function dB(e){return Ig.get(e)}function fB(e,t){Ig.set(e,t)}function Dv(e){Ig.delete(e)}var Uu,Fc,yB=function(e){if("WebkitTransition"in e.style)Uu="webkitTransitionEnd",Fc="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");Uu="transitionend",Fc="animationend"}},$E=function(e){Uu||yB(e)},mB=function(e,t){return t===void 0&&(t=e+"-active"),function(i){$E(i);var s=!1,l=function(d){s||(s=!0,i.removeEventListener(Uu,l),i.removeEventListener(Fc,l),i.classList.remove(e),i.classList.remove(t))};i.classList.add(e),i.addEventListener(Uu,l),i.addEventListener(Fc,l),requestAnimationFrame(function(){i.classList.add(t)})}},gB=function(e,t){return t===void 0&&(t=e+"-active"),function(i,s){$E(i);var l=!1,d=function(y){l||(l=!0,i.removeEventListener(Uu,d),i.removeEventListener(Fc,d),s())};i.classList.add(e),i.addEventListener(Uu,d),i.addEventListener(Fc,d),requestAnimationFrame(function(){i.classList.add(t)})}};const vB=Se.getLogger("esri.widgets.support.widgetUtils");function IE(e){const t=ur.acquire();for(let s=0;s<arguments.length;s++){const l=arguments[s],d=typeof l;if(d==="string")t.push(l);else if(Array.isArray(l))t.push.apply(t,l);else if(d==="object")for(const y in l)l[y]&&t.push(y)}const i=t.join(" ");return ur.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(i=>{ME();for(const s of i)e.get(s.target)(s)});return(i,s,l)=>(e.has(i)&&vB.error("Already observing element",i),e.set(i,s),t.observe(i,l),qc(()=>{t.unobserve(i),e.delete(i)}))})();function Ka(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function jx(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function Yw(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function bB(e,t){return(e==="enter"?mB:gB)(t)}const wB=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],_B=wB.reduce((e,t)=>(e[t]=[],e),{}),xB=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],TE=new pB({whiteList:_B,onTagAttr:(e,t,i)=>{const s=`${t}="${i}"`;if(xB.includes(t))return s},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function SB(e){return e==="Enter"||e===" "}const EE="http://www.w3.org/",Tg=`${EE}2000/svg`,kE=`${EE}1999/xlink`;let fm,Fx=[],x4=(e,t)=>{let i={};return Object.keys(e).forEach(s=>{i[s]=e[s]}),t&&Object.keys(t).forEach(s=>{i[s]=t[s]}),i},S4=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),AE=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},MB=(e,t,i)=>{if(t.vnodeSelector!==""){for(let s=i;s<e.length;s++)if(S4(e[s],t))return s}return-1},zv=(e,t,i,s)=>{let l=e[t];if(l.vnodeSelector==="")return;let d=l.properties;if(!(d&&(d.key===void 0?d.bind:d.key))){for(let y=0;y<e.length;y++)if(y!==t){let g=e[y];if(S4(g,l))throw new Error(`${i.vnodeSelector} had a ${l.vnodeSelector} child ${s==="added"?s:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},$B=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},Xw=[],Zw=!1,OE=e=>{(e.children||[]).forEach(OE),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},Rx=()=>{Zw=!1,Xw.forEach(OE),Xw.length=0},Lx=e=>{Xw.push(e),Zw||(Zw=!0,typeof window!="undefined"&&"requestIdleCallback"in window?window.requestIdleCallback(Rx,{timeout:16}):setTimeout(Rx,16))},Dx=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),Lx(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),Lx(e))},IB=(e,t,i)=>{if(!t)return;let s=i.eventHandlerInterceptor,l=Object.keys(t),d=l.length;for(let y=0;y<d;y++){let g=l[y],_=t[g];if(g==="className")throw new Error('Property "className" is not supported, use "class".');if(g==="class")Qw(e,_,!0);else if(g==="classes"){let M=Object.keys(_),E=M.length;for(let O=0;O<E;O++){let P=M[O];_[P]&&e.classList.add(P)}}else if(g==="styles"){let M=Object.keys(_),E=M.length;for(let O=0;O<E;O++){let P=M[O],j=_[P];j&&(AE(j),i.styleApplyer(e,P,j))}}else if(g!=="key"&&_!=null){let M=typeof _;M==="function"?(g.lastIndexOf("on",0)===0&&(s&&(_=s(g,_,e,t)),g==="oninput"&&function(){let E=_;_=function(O){E.apply(this,[O]),O.target["oninput-value"]=O.target.value}}()),e[g]=_):i.namespace===Tg?g==="href"?e.setAttributeNS(kE,g,_):e.setAttribute(g,_):M==="string"&&g!=="value"?g==="innerHTML"?e[g]=TE.sanitize(_):e.setAttribute(g,_):e[g]=_}}},TB=(e,t,i)=>{if(t)for(let s of t)nc(s,e,void 0,i)},CE=(e,t,i)=>{TB(e,t.children,i),t.text&&(e.textContent=t.text),IB(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},nc=(e,t,i,s)=>{let l,d=0,y=e.vnodeSelector,g=t.ownerDocument;if(y==="")l=e.domNode=g.createTextNode(e.text),i!==void 0?t.insertBefore(l,i):t.appendChild(l);else{for(let _=0;_<=y.length;++_){let M=y.charAt(_);if(_===y.length||M==="."||M==="#"){let E=y.charAt(d-1),O=y.slice(d,_);E==="."?l.classList.add(O):E==="#"?l.id=O:(O==="svg"&&(s=x4(s,{namespace:Tg})),s.namespace!==void 0?l=e.domNode=g.createElementNS(s.namespace,O):(l=e.domNode=e.domNode||g.createElement(O),O==="input"&&e.properties&&e.properties.type!==void 0&&l.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(l,i):l.parentNode!==t&&t.appendChild(l)),d=_+1}}CE(l,e,s)}},Qw=(e,t,i)=>{t&&t.split(" ").forEach(s=>{s&&e.classList.toggle(s,i)})},EB=(e,t,i,s)=>{if(!i)return;let l=!1,d=Object.keys(i),y=d.length;for(let g=0;g<y;g++){let _=d[g],M=i[_],E=t[_];if(_==="class")E!==M&&(Qw(e,E,!1),Qw(e,M,!0));else if(_==="classes"){let O=e.classList,P=Object.keys(M),j=P.length;for(let R=0;R<j;R++){let z=P[R],q=!!M[z];q!==!!E[z]&&(l=!0,q?O.add(z):O.remove(z))}}else if(_==="styles"){let O=Object.keys(M),P=O.length;for(let j=0;j<P;j++){let R=O[j],z=M[R];z!==E[R]&&(l=!0,z?(AE(z),s.styleApplyer(e,R,z)):s.styleApplyer(e,R,""))}}else if(M||typeof E!="string"||(M=""),_==="value"){let O=e[_];O!==M&&(e["oninput-value"]?O===e["oninput-value"]:M!==E)&&(e[_]=M,e["oninput-value"]=void 0),M!==E&&(l=!0)}else if(M!==E){let O=typeof M;O==="function"&&s.eventHandlerInterceptor||(s.namespace===Tg?_==="href"?e.setAttributeNS(kE,_,M):e.setAttribute(_,M):O==="string"?_==="innerHTML"?e[_]=TE.sanitize(M):_==="role"&&M===""?e.removeAttribute(_):e.setAttribute(_,M):e[_]!==M&&(e[_]=M),l=!0)}}return l},kB=(e,t,i,s,l)=>{if(i===s)return!1;s=s||Fx;let d,y=(i=i||Fx).length,g=s.length,_=0,M=0,E=!1;for(;M<g;){let O=_<y?i[_]:void 0,P=s[M];if(O!==void 0&&S4(O,P))E=fm(O,P,l)||E,_++;else{let j=MB(i,P,_+1);if(j>=0){for(d=_;d<j;d++)Dx(i[d]),zv(i,d,e,"removed");E=fm(i[j],P,l)||E,_=j+1}else nc(P,t,_<y?i[_].domNode:void 0,l),$B(P),zv(s,M,e,"added")}M++}if(y>_)for(d=_;d<y;d++)Dx(i[d]),zv(i,d,e,"removed");return E};fm=(e,t,i)=>{let s=e.domNode,l=!1;if(e===t)return!1;let d=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let y=s.ownerDocument.createTextNode(t.text);return s.parentNode.replaceChild(y,s),t.domNode=y,l=!0,l}t.domNode=s}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=x4(i,{namespace:Tg})),e.text!==t.text&&(d=!0,t.text===void 0?s.removeChild(s.firstChild):s.textContent=t.text),t.domNode=s,d=kB(t,s,e.children,t.children,i)||d,d=EB(s,e.properties,t.properties,i)||d,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[s,i,t.vnodeSelector,t.properties,t.children]);return d&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(s,t.properties,e.properties),l};let Sp=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let s=e;e=i,fm(s,i,t)},domNode:e.domNode});const AB={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let Eh=e=>x4(AB,e),Ya={create:(e,t)=>(t=Eh(t),nc(e,document.createElement("div"),void 0,t),Sp(e,t)),append:(e,t,i)=>(i=Eh(i),nc(t,e,void 0,i),Sp(t,i)),insertBefore:(e,t,i)=>(i=Eh(i),nc(t,e.parentNode,e,i),Sp(t,i)),merge:(e,t,i)=>(i=Eh(i),t.domNode=e,CE(e,t,i),Sp(t,i)),replace:(e,t,i)=>(i=Eh(i),nc(t,e.parentNode,e,i),e.parentNode.removeChild(e),Sp(t,i))},PE,OB=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};PE=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let CB=(e,t)=>{let i=e;return t.forEach(s=>{i=i&&i.children?PE(i.children,l=>l.domNode===s):void 0}),i},PB=(e,t,i)=>{let s=function(l){i("domEvent",l);let d=t(),y=OB(l.currentTarget,d.domNode);y.reverse();let g,_=CB(d.getLastRender(),y);return e.scheduleRender(),_&&(g=_.properties[`on${l.type}`].apply(_.properties.bind||this,arguments)),i("domEventProcessed",l),g};return(l,d,y,g)=>s},zx=e=>{let t,i,s=Eh(e),l=s.performanceLogger,d=!0,y=!1,g=[],_=[],M=(O,P,j)=>{let R,z=()=>R;s.eventHandlerInterceptor=PB(t,z,l),R=O(P,j(),s),g.push(R),_.push(j)},E=()=>{if(i=void 0,d){d=!1,l("renderStart",void 0);for(let O=0;O<g.length;O++){let P=_[O]();l("rendered",void 0),g[O].update(P),l("patched",void 0)}l("renderDone",void 0),d=!0}};return t={renderNow:E,scheduleRender:()=>{i||y||(i=requestAnimationFrame(E))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),y=!0},resume:()=>{y=!1,d=!0,t.scheduleRender()},append:(O,P)=>{M(Ya.append,O,P)},insertBefore:(O,P)=>{M(Ya.insertBefore,O,P)},merge:(O,P)=>{M(Ya.merge,O,P)},replace:(O,P)=>{M(Ya.replace,O,P)},detach:O=>{for(let P=0;P<_.length;P++)if(_[P]===O)return _.splice(P,1),g.splice(P,1)[0];throw new Error("renderFunction was not found")}},t},ba=class extends Fe{constructor(){super(...arguments),this.items=new qe,this._watchUpdatingTracking=new mc,this._callbacks=new Map,this._projector=zx(),this._hiddenProjector=zx()}get needsRender(){return this.items.length>0}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const i of t.added){const s=()=>i.render();this._callbacks.set(i,s),this._projector.append(this.surface,s)}for(const i of t.removed){const s=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(s.domNode),this._callbacks.delete(i)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,i=this._hiddenProjector;let s=null;const l=()=>(s=e.render(),s);i.append(t,l),i.renderNow();const d={left:0,top:0,right:0,bottom:0};if(s&&s.domNode){const y=s.domNode.getBoundingClientRect();d.left=y.left,d.top=y.top,d.right=y.right,d.bottom=y.bottom}for(i.detach(l);t.firstChild;)t.removeChild(t.firstChild);return d}overlaps(e,t){const i=this.computeBoundingRect(e),s=this.computeBoundingRect(t);return Math.max(i.left,s.left)<=Math.min(i.right,s.right)&&Math.max(i.top,s.top)<=Math.min(i.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}renderCanvas(e){if(!this.items.some(i=>i.visible))return;const t=e.getContext("2d");t.save(),t.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach(i=>{t.save(),i.renderCanvas(t),t.restore()}),t.restore()}};b([S({readOnly:!0})],ba.prototype,"surface",void 0),b([S({readOnly:!0})],ba.prototype,"items",void 0),b([S({readOnly:!0})],ba.prototype,"needsRender",null),b([S({readOnly:!0})],ba.prototype,"_watchUpdatingTracking",void 0),b([S({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],ba.prototype,"updating",void 0),ba=b([H("esri.views.overlay.ViewOverlay")],ba);const Vx=ba;function M4(e,t,i,s){let l=null,d=1e3;typeof t=="number"?(d=t,s=i):(l=t!=null?t:null,d=i);let y,g=0;const _=()=>{g=0,e.apply(s,y)},M=(...E)=>{l&&l.apply(s,E),y=E,d?g||(g=setTimeout(_,d)):_()};return M.remove=()=>{g&&(clearTimeout(g),g=0)},M.forceUpdate=()=>{g&&(clearTimeout(g),_())},M.hasPendingUpdates=()=>!!g,M}const NB=/\?(\.|$)/g;function ri(e,t,i,s){const l=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],d=Nt(e,t,i,s);for(const y of l){const g=y.trim().replace(NB,"$1"),_=e.get(g);i.call(e,_,_,g,e)}return d}function Nt(e,t,i,s){return e.watch(t,i,s)}function NE(e,t,i,s){return Kd(e,t,DB,i,s)}function jB(e,t,i,s){return Kd(e,t,jE,i,s)}function mhe(e,t,i,s){return LB(e,t,jE,i,s)}function FB(e,t,i,s){return Kd(e,t,zB,i,s)}function e3(e,t,i,s){return Kd(e,t,VB,i,s)}function RB(e,t,i,s){let l=!1;const d=e.watch(t,(y,g,_,M)=>{l||i.call(e,y,g,_,M)},s);return{remove(){d.remove()},pause(){l=!0},resume(){l=!1}}}function Eg(e,t,i,s,l,d,y){const g={};function _(E){const O=g[E];O&&(d&&d(O.target,E,e,i),O.handle.remove(),delete g[E])}const M=ri(e,t,(E,O,P)=>{_(P),Qm(E)&&(g[P]={handle:eg(E,i,s),target:E},l&&l(E,P,e,i))},y);return{remove(){M.remove();for(const E in g)_(E)}}}function Kd(e,t,i,s,l){const d=e.watch(t,(y,g,_,M)=>{i&&!i(y)||s==null||s.call(e,y,g,_,M)},l);if(Array.isArray(t))for(const y of t){const g=e.get(y);i&&i(g)&&(s==null||s.call(e,g,g,t,e))}else{const y=e.get(t);i&&i(y)&&(s==null||s.call(e,y,y,t,e))}return d}function LB(e,t,i,s,l){const d=typeof s=="function"?s:null,y=typeof s=="object"?s:null;typeof s=="boolean"&&(l=s);let g,_=!1;function M(){g&&(g.remove(),g=null)}const E=Vo();cn(y,()=>{M(),E.reject(yi())});const O={then:E.promise.then.bind(E.promise),catch:E.promise.catch.bind(E.promise),remove:M};return Object.freeze(O),g=Kd(e,t,i,(P,j,R,z)=>{_=!0,M(),d&&d.call(e,P,j,R,z),E.resolve({value:P,oldValue:j,propertyName:R,target:z})},l),_&&M(),O}function DB(e){return!!e}function jE(e){return!e}function zB(e){return e===!0}function VB(e){return e===!1}function Ge(e,t){const i=t?Te(J({},t),{source:e}):e;return S({aliasOf:i})}function GB(){const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const qB={handleInterceptedEvent:(e,t,i,s)=>(e.scheduleRender(),t.properties[`on${s.type}`].apply(t.properties.bind||i,[s]))},UB={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{e.style[t]=i}},BB=e=>J(J({},UB),e),HB=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},WB=(e,t)=>e.find(t),Gx=(e,t,i=!1)=>{let s=e;return t.forEach((l,d)=>{var y;const g=(y=s)!=null&&y.children?WB(s.children,_=>_.domNode===l):void 0;i&&!g&&d!==t.length-1||(s=g)}),s},JB=e=>{let t;const i=J(J({},qB),e),s=BB(i),l=s.performanceLogger;let d,y=!0,g=!1;const _=[],M=[],E=(P,j,R)=>{let z;s.eventHandlerInterceptor=(Y,te,ne,he)=>function(se){let ue;l("domEvent",se);const Ee=HB(se.currentTarget,z.domNode),Oe=Ee.some(Ne=>{var je;return customElements.get(Ne==null||(je=Ne.tagName)==null?void 0:je.toLowerCase())});if(se.eventPhase===Event.CAPTURING_PHASE||!Oe)Ee.reverse(),ue=Gx(z.getLastRender(),Ee);else{const Ne=se.composedPath(),je=Ne.slice(Ne.indexOf(se.currentTarget),Ne.indexOf(z.domNode)).filter(De=>De.getRootNode()===De.ownerDocument).reverse();ue=Gx(z.getLastRender(),je,!0)}let Le;return ue&&(Le=i.handleInterceptedEvent(t,ue,this,se)),l("domEventProcessed",se),Le},i.postProcessProjectionOptions==null||i.postProcessProjectionOptions(s);const q=R();z=P(j,q,s),_.push(z),M.push(R),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(z,q)};let O=()=>{if(d=void 0,y){y=!1,l("renderStart",void 0);for(let P=0;P<_.length;P++){const j=M[P]();l("rendered",void 0),_[P].update(j),l("patched",void 0)}l("renderDone",void 0),y=!0}};return i.modifyDoRenderImplementation&&(O=i.modifyDoRenderImplementation(O,_,M)),t={renderNow:O,scheduleRender:()=>{d||g||(d=requestAnimationFrame(O))},stop:()=>{d&&(cancelAnimationFrame(d),d=void 0),g=!0},resume:()=>{g=!1,y=!0,t.scheduleRender()},append:(P,j)=>{E(Ya.append,P,j)},insertBefore:(P,j)=>{E(Ya.insertBefore,P,j)},merge:(P,j)=>{E(Ya.merge,P,j)},replace:(P,j)=>{E(Ya.replace,P,j)},detach:P=>{for(let j=0;j<M.length;j++)if(M[j]===P)return M.splice(j,1),_.splice(j,1)[0];throw new Error("renderFunction was not found")}},t},Rt={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let kh,FE,kg,RE=!1,ym=!1,$4=!1,Wr=!1,qx=null,t3=!1;const ip=typeof window!="undefined"?window:{};Rt.cssVarShim&&ip.CSS;const un=ip.document||{head:{}},ghe=ip.HTMLElement||class{},Ui={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,s)=>e.addEventListener(t,i,s),rel:(e,t,i,s)=>e.removeEventListener(t,i,s),ce:(e,t)=>new CustomEvent(e,t)},mm=Rt.shadowDomShim&&Rt.shadowDom?(()=>(un.head.attachShadow+"").indexOf("[native")>-1)():!0,KB=(()=>{let e=!1;try{un.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),YB=e=>Promise.resolve(e),XB=Rt.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replace=="function"}catch{}return!1})():!1,LE=(e,t,i,s)=>{i&&i.map(([l,d,y])=>{const g=QB(e,l),_=ZB(t,y),M=eH(l);Ui.ael(g,d,_,M),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Ui.rel(g,d,_,M))})},ZB=(e,t)=>i=>{try{Rt.lazyLoad||e.$hostElement$[t](i)}catch(s){Yd(s)}},QB=(e,t)=>t&4?un:t&8?ip:t&16?un.body:e,eH=e=>KB?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,Ux="http://www.w3.org/1999/xlink",Bu=(e,t="")=>()=>{},Bx=new WeakMap,tH=(e,t,i)=>{let s=bm.get(e);XB&&i?(s=s||new CSSStyleSheet,s.replace(t)):s=t,bm.set(e,s)},iH=(e,t,i,s)=>{let l=DE(t,i),d=bm.get(l);if(e=e.nodeType===11?e:un,d)if(typeof d=="string"){e=e.head||e;let y=Bx.get(e),g;y||Bx.set(e,y=new Set),y.has(l)||(g=un.createElement("style"),g.innerHTML=d,e.insertBefore(g,e.querySelector("link")),y&&y.add(l))}else e.adoptedStyleSheets.includes(d)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,d]);return l},rH=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,s=t.$flags$,l=Bu("attachStyles",t.$tagName$),d=iH(mm&&i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);s&10&&(i["s-sc"]=d,i.classList.add(d+"-h"),s&2&&i.classList.add(d+"-s")),l()},DE=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),sH=e=>NH.map(t=>t(e)).find(t=>!!t),Hx={},nH="http://www.w3.org/2000/svg",oH="http://www.w3.org/1999/xhtml",aH=e=>e!=null,I4=e=>(e=typeof e,e==="object"||e==="function"),zE=(e,t,...i)=>{let s=null,l=null,d=null,y=!1,g=!1,_=[];const M=O=>{for(let P=0;P<O.length;P++)s=O[P],Array.isArray(s)?M(s):s!=null&&typeof s!="boolean"&&((y=typeof e!="function"&&!I4(s))&&(s=String(s)),y&&g?_[_.length-1].$text$+=s:_.push(y?gm(null,s):s),g=y)};if(M(i),t&&(Rt.isDev&&e==="input"&&cH(t),Rt.vdomKey&&t.key&&(l=t.key),Rt.slotRelocation&&t.name&&(d=t.name),Rt.vdomClass)){const O=t.className||t.class;O&&(t.class=typeof O!="object"?O:Object.keys(O).filter(P=>O[P]).join(" "))}if(Rt.isDev&&_.some(VE)&&PH(`The <Host> must be the single root component. Make sure:
- You are NOT using hostData() and <Host> in the same component.
- <Host> is used once, and it's the single root component of the render() function.`),Rt.vdomFunctional&&typeof e=="function")return e(t===null?{}:t,_,uH);const E=gm(e,null);return E.$attrs$=t,_.length>0&&(E.$children$=_),Rt.vdomKey&&(E.$key$=l),Rt.slotRelocation&&(E.$name$=d),E},gm=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return Rt.vdomAttribute&&(i.$attrs$=null),Rt.vdomKey&&(i.$key$=null),Rt.slotRelocation&&(i.$name$=null),i},lH={},VE=e=>e&&e.$tag$===lH,uH={forEach:(e,t)=>e.map(Wx).forEach(t),map:(e,t)=>e.map(Wx).map(t).map(hH)},Wx=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),hH=e=>{if(typeof e.vtag=="function"){const i=Object.assign({},e.vattrs);return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),zE(e.vtag,i,...e.vchildren||[])}const t=gm(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},cH=e=>{const t=Object.keys(e),i=t.indexOf("value");if(i===-1)return;const s=t.indexOf("type"),l=t.indexOf("min"),d=t.indexOf("max"),y=t.indexOf("step");(i<s||i<l||i<d||i<y)&&XE('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},Jx=(e,t,i,s,l,d)=>{if(i!==s){let y=Zx(e,t),g=t.toLowerCase();if(t==="class"){const _=e.classList,M=Kx(i),E=Kx(s);_.remove(...M.filter(O=>O&&!E.includes(O))),_.add(...E.filter(O=>O&&!M.includes(O)))}else if(t==="style"){for(const _ in i)(!s||s[_]==null)&&(_.includes("-")?e.style.removeProperty(_):e.style[_]="");for(const _ in s)(!i||s[_]!==i[_])&&(_.includes("-")?e.style.setProperty(_,s[_]):e.style[_]=s[_])}else if(t!=="key")if(t==="ref")s&&s(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):Zx(ip,g)?t=g.slice(2):t=g[2]+t.slice(3),i&&Ui.rel(e,t,i,!1),s&&Ui.ael(e,t,s,!1);else{const _=I4(s);if((y||_&&s!==null)&&!l)try{if(e.tagName.includes("-"))e[t]=s;else{let E=s==null?"":s;t==="list"?y=!1:(i==null||e[t]!=E)&&(e[t]=E)}}catch{}let M=!1;g!==(g=g.replace(/^xlink\:?/,""))&&(t=g,M=!0),s==null||s===!1?(s!==!1||e.getAttribute(t)==="")&&(M?e.removeAttributeNS(Ux,t):e.removeAttribute(t)):(!y||d&4||l)&&!_&&(s=s===!0?"":s,M?e.setAttributeNS(Ux,t,s):e.setAttribute(t,s))}}},pH=/\s/,Kx=e=>e?e.split(pH):[],GE=(e,t,i,s)=>{const l=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,d=e&&e.$attrs$||Hx,y=t.$attrs$||Hx;for(s in d)s in y||Jx(l,s,d[s],void 0,i,t.$flags$);for(s in y)Jx(l,s,d[s],y[s],i,t.$flags$)},vm=(e,t,i,s)=>{let l=t.$children$[i],d=0,y,g,_;if(RE||($4=!0,l.$tag$==="slot"&&(kh&&s.classList.add(kh+"-s"),l.$flags$|=l.$children$?2:1)),l.$text$!==null)y=l.$elm$=un.createTextNode(l.$text$);else if(l.$flags$&1)y=l.$elm$=un.createTextNode("");else{if(Wr||(Wr=l.$tag$==="svg"),y=l.$elm$=un.createElementNS(Wr?nH:oH,l.$flags$&2?"slot-fb":l.$tag$),Wr&&l.$tag$==="foreignObject"&&(Wr=!1),GE(null,l,Wr),aH(kh)&&y["s-si"]!==kh&&y.classList.add(y["s-si"]=kh),l.$children$)for(d=0;d<l.$children$.length;++d)g=vm(e,l,d,y),g&&y.appendChild(g);l.$tag$==="svg"?Wr=!1:y.tagName==="foreignObject"&&(Wr=!0)}return y["s-hn"]=kg,l.$flags$&3&&(y["s-sr"]=!0,y["s-cr"]=FE,y["s-sn"]=l.$name$||"",_=e&&e.$children$&&e.$children$[i],_&&_.$tag$===l.$tag$&&e.$elm$&&bd(e.$elm$,!1)),y},bd=(e,t)=>{Ui.$flags$|=1;const i=e.childNodes;for(let s=i.length-1;s>=0;s--){const l=i[s];l["s-hn"]!==kg&&l["s-ol"]&&(BE(l).insertBefore(l,T4(l)),l["s-ol"].remove(),l["s-ol"]=void 0,$4=!0),t&&bd(l,t)}Ui.$flags$&=-2},qE=(e,t,i,s,l,d)=>{let y=e["s-cr"]&&e["s-cr"].parentNode||e,g;for(y.shadowRoot&&y.tagName===kg&&(y=y.shadowRoot);l<=d;++l)s[l]&&(g=vm(null,i,l,e),g&&(s[l].$elm$=g,y.insertBefore(g,T4(t))))},UE=(e,t,i,s,l)=>{for(;t<=i;++t)(s=e[t])&&(l=s.$elm$,JE(s),ym=!0,l["s-ol"]?l["s-ol"].remove():bd(l,!0),l.remove())},dH=(e,t,i,s)=>{let l=0,d=0,y=0,g=0,_=t.length-1,M=t[0],E=t[_],O=s.length-1,P=s[0],j=s[O],R,z;for(;l<=_&&d<=O;)if(M==null)M=t[++l];else if(E==null)E=t[--_];else if(P==null)P=s[++d];else if(j==null)j=s[--O];else if(zf(M,P))Ah(M,P),M=t[++l],P=s[++d];else if(zf(E,j))Ah(E,j),E=t[--_],j=s[--O];else if(zf(M,j))(M.$tag$==="slot"||j.$tag$==="slot")&&bd(M.$elm$.parentNode,!1),Ah(M,j),e.insertBefore(M.$elm$,E.$elm$.nextSibling),M=t[++l],j=s[--O];else if(zf(E,P))(M.$tag$==="slot"||j.$tag$==="slot")&&bd(E.$elm$.parentNode,!1),Ah(E,P),e.insertBefore(E.$elm$,M.$elm$),E=t[--_],P=s[++d];else{for(y=-1,g=l;g<=_;++g)if(t[g]&&t[g].$key$!==null&&t[g].$key$===P.$key$){y=g;break}y>=0?(z=t[y],z.$tag$!==P.$tag$?R=vm(t&&t[d],i,y,e):(Ah(z,P),t[y]=void 0,R=z.$elm$),P=s[++d]):(R=vm(t&&t[d],i,d,e),P=s[++d]),R&&BE(M.$elm$).insertBefore(R,T4(M.$elm$))}l>_?qE(e,s[O+1]==null?null:s[O+1].$elm$,i,s,d,O):d>O&&UE(t,l,_)},zf=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,T4=e=>e&&e["s-ol"]||e,BE=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Ah=(e,t)=>{const i=t.$elm$=e.$elm$,s=e.$children$,l=t.$children$,d=t.$tag$,y=t.$text$;let g;y===null?(Wr=d==="svg"?!0:d==="foreignObject"?!1:Wr,d==="slot"||GE(e,t,Wr),s!==null&&l!==null?dH(i,s,t,l):l!==null?(e.$text$!==null&&(i.textContent=""),qE(i,null,t,l,0,l.length-1)):s!==null&&UE(s,0,s.length-1),Wr&&d==="svg"&&(Wr=!1)):(g=i["s-cr"])?g.parentNode.textContent=y:e.$text$!==y&&(i.data=y)},HE=e=>{let t=e.childNodes,i,s,l,d,y,g;for(s=0,l=t.length;s<l;s++)if(i=t[s],i.nodeType===1){if(i["s-sr"]){for(y=i["s-sn"],i.hidden=!1,d=0;d<l;d++)if(g=t[d].nodeType,t[d]["s-hn"]!==i["s-hn"]||y!==""){if(g===1&&y===t[d].getAttribute("slot")){i.hidden=!0;break}}else if(g===1||g===3&&t[d].textContent.trim()!==""){i.hidden=!0;break}}HE(i)}},rn=[],WE=e=>{let t,i,s,l,d,y,g=0,_=e.childNodes,M=_.length;for(;g<M;g++){if(t=_[g],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(s=i.parentNode.childNodes,l=t["s-sn"],y=s.length-1;y>=0;y--)i=s[y],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==t["s-hn"]&&(Yx(i,l)?(d=rn.find(E=>E.$nodeToRelocate$===i),ym=!0,i["s-sn"]=i["s-sn"]||l,d?d.$slotRefNode$=t:rn.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&rn.map(E=>{Yx(E.$nodeToRelocate$,i["s-sn"])&&(d=rn.find(O=>O.$nodeToRelocate$===i),d&&!E.$slotRefNode$&&(E.$slotRefNode$=d.$slotRefNode$))})):rn.some(E=>E.$nodeToRelocate$===i)||rn.push({$nodeToRelocate$:i}));t.nodeType===1&&WE(t)}},Yx=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",JE=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(JE)},fH=(e,t)=>{const i=e.$hostElement$,s=e.$cmpMeta$,l=e.$vnode$||gm(null,null),d=VE(t)?t:zE(null,null,t);kg=i.tagName,s.$attrsToReflect$&&(d.$attrs$=d.$attrs$||{},s.$attrsToReflect$.map(([y,g])=>d.$attrs$[g]=i[y])),d.$tag$=null,d.$flags$|=4,e.$vnode$=d,d.$elm$=l.$elm$=i.shadowRoot||i,kh=i["s-sc"],FE=i["s-cr"],RE=mm&&(s.$flags$&1)!==0,ym=!1,Ah(l,d);{if(Ui.$flags$|=1,$4){WE(d.$elm$);let y,g,_,M,E,O,P=0;for(;P<rn.length;P++)y=rn[P],g=y.$nodeToRelocate$,g["s-ol"]||(_=un.createTextNode(""),_["s-nr"]=g,g.parentNode.insertBefore(g["s-ol"]=_,g));for(P=0;P<rn.length;P++)if(y=rn[P],g=y.$nodeToRelocate$,y.$slotRefNode$){for(M=y.$slotRefNode$.parentNode,E=y.$slotRefNode$.nextSibling,_=g["s-ol"];_=_.previousSibling;)if(O=_["s-nr"],O&&O["s-sn"]===g["s-sn"]&&M===O.parentNode&&(O=O.nextSibling,!O||!O["s-nr"])){E=O;break}(!E&&M!==g.parentNode||g.nextSibling!==E)&&g!==E&&(!g["s-hn"]&&g["s-ol"]&&(g["s-hn"]=g["s-ol"].parentNode.nodeName),M.insertBefore(g,E))}else g.nodeType===1&&(g.hidden=!0)}ym&&HE(d.$elm$),Ui.$flags$&=-2,rn.length=0}},yH=e=>Rt.lazyLoad?rp(e).$hostElement$:e,vhe=(e,t,i)=>{const s=yH(e);return{emit:l=>(Rt.isDev&&!s.isConnected&&XE(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),mH(s,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:l}))}},mH=(e,t,i)=>{const s=Ui.ce(t,i);return e.dispatchEvent(s),s},gH=(e,t)=>{},E4=(e,t)=>(e.$flags$|=16,gH(e,e.$ancestorComponent$),RH(()=>vH(e,t))),vH=(e,t)=>{const i=e.$hostElement$,s=Bu("scheduleUpdate",e.$cmpMeta$.$tagName$),l=i;let d;return t?d=wc(l,"componentWillLoad"):d=wc(l,"componentWillUpdate"),d=Xx(d,()=>wc(l,"componentWillRender")),s(),Xx(d,()=>bH(e,l,t))},bH=async(e,t,i)=>{const s=e.$hostElement$,l=Bu("update",e.$cmpMeta$.$tagName$);s["s-rc"],i&&rH(e);const d=Bu("render",e.$cmpMeta$.$tagName$);wH(e,t,s),d(),l(),_H(e)},wH=(e,t,i)=>{try{qx=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(Rt.hasRenderFn||Rt.reflect)&&(Rt.vdomRender||Rt.reflect)&&(Rt.hydrateServerSide||fH(e,t))}catch(g){Yd(g,e.$hostElement$)}return qx=null,null},_H=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,s=Bu("postUpdate",t),l=i;e.$ancestorComponent$,wc(l,"componentDidRender"),e.$flags$&64?(wc(l,"componentDidUpdate"),s()):(e.$flags$|=64,wc(l,"componentDidLoad"),s())},bhe=e=>{if(Rt.updatable){const t=rp(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&E4(t,!1),i}return!1},wc=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(s){Yd(s)}},Xx=(e,t)=>e&&e.then?e.then(t):t(),xH=(e,t)=>e!=null&&!I4(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,SH=(e,t)=>rp(e).$instanceValues$.get(t),MH=(e,t,i,s)=>{const l=rp(e),d=e,y=l.$instanceValues$.get(t),g=l.$flags$,_=d;if(i=xH(i,s.$members$[t][0]),i!==y){l.$instanceValues$.set(t,i);{if(s.$watchers$&&g&128){const M=s.$watchers$[t];M&&M.map(E=>{try{_[E](i,y,t)}catch(O){Yd(O,d)}})}if((g&18)===2){if(_.componentShouldUpdate&&_.componentShouldUpdate(i,y,t)===!1)return;E4(l,!1)}}}},$H=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const s=Object.entries(t.$members$),l=e.prototype;s.map(([d,[y]])=>{(y&31||y&32)&&Object.defineProperty(l,d,{get(){return SH(this,d)},set(g){MH(this,d,g,t)},configurable:!0,enumerable:!0})});{const d=new Map;l.attributeChangedCallback=function(y,g,_){Ui.jmp(()=>{const M=d.get(y);if(this.hasOwnProperty(M))_=this[M],delete this[M];else if(l.hasOwnProperty(M)&&typeof this[M]=="number"&&this[M]==_)return;this[M]=_===null&&typeof this[M]=="boolean"?!1:_})},e.observedAttributes=s.filter(([y,g])=>g[0]&15).map(([y,g])=>{const _=g[1]||y;return d.set(_,y),g[0]&512&&t.$attrsToReflect$.push([y,_]),_})}}return e},IH=async(e,t,i,s,l)=>{if((t.$flags$&32)===0&&(l=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),l.style)){let y=l.style;typeof y!="string"&&(y=y[t.$modeName$=sH(e)]);const g=DE(i,t.$modeName$);if(!bm.has(g)){const _=Bu("registerStyles",i.$tagName$);tH(g,y,!!(i.$flags$&1)),_()}}t.$ancestorComponent$,(()=>E4(t,!0))()},TH=e=>{},EH=e=>{if((Ui.$flags$&1)===0){const t=rp(e),i=t.$cmpMeta$,s=Bu("connectedCallback",i.$tagName$);t.$flags$&1?(LE(e,t,i.$listeners$),TH(t.$lazyInstance$)):(t.$flags$|=1,i.$flags$&12&&kH(e),i.$members$&&Object.entries(i.$members$).map(([l,[d]])=>{if(d&31&&e.hasOwnProperty(l)){const y=e[l];delete e[l],e[l]=y}}),IH(e,t,i)),s()}},kH=e=>{const t=e["s-cr"]=un.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},AH=e=>{if((Ui.$flags$&1)===0){const t=rp(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},whe=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[],!mm&&i.$flags$&1&&(i.$flags$|=8);const s=e.prototype.connectedCallback,l=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){CH(this,i)},connectedCallback(){EH(this),s&&s.call(this)},disconnectedCallback(){AH(this),l&&l.call(this)},__attachShadow(){mm?this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)}):this.shadowRoot=this}}),e.is=i.$tagName$,$H(e,i)},_he=e=>{const t=new URL(e,Ui.$resourcesUrl$);return t.origin!==ip.location.origin?t.href:t.pathname},OH=e=>Ui.$resourcesUrl$=e,KE=new WeakMap,rp=e=>KE.get(e),CH=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return LE(e,i,t.$listeners$),KE.set(e,i)},Zx=(e,t)=>t in e,Yd=(e,t)=>(0,console.error)(e,t),YE=Rt.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],PH=(...e)=>console.error(...YE,...e),XE=(...e)=>console.warn(...YE,...e),bm=new Map,NH=[],Qx=[],ZE=[],jH=(e,t)=>i=>{e.push(i),t3||(t3=!0,t&&Ui.$flags$&4?FH(i3):Ui.raf(i3))},e7=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){Yd(i)}e.length=0},i3=()=>{e7(Qx),e7(ZE),(t3=Qx.length>0)&&Ui.raf(i3)},FH=e=>YB().then(e),RH=jH(ZE,!0),xhe={isDev:!!Rt.isDev,isBrowser:!0,isServer:!1,isTesting:!!Rt.isTesting};let QE;function LH(){OH(sn(bt(QE)))}QE="components/assets";const ek=Symbol("widget"),DH=[],zH={},wm=new WeakMap;function tk(e,t){let i=t.children;if(i&&i.length)for(let l=0;l<i.length;++l)i[l]=tk(e,i[l]);else i=DH;const s=t.vnodeSelector;if(k4(s)){const l=t.properties||zH,d=l.key||s;return{vnodeSelector:"div",properties:{key:d,afterCreate:VH,afterUpdate:GH,afterRemoved:ik,parentWidget:e,widgetConstructor:s,widgetProperties:Te(J({},l),{key:d,children:i})},children:void 0,text:void 0,domNode:null}}return t}function VH(e,t,i,{parentWidget:s,widgetConstructor:l,widgetProperties:d}){const y=new l(d);y.container=e,wm.set(e,y),y.afterCreate==null||y.afterCreate(y,e),s._internalHandles.add(qc(()=>ik(e)))}function GH(e,t,i,{widgetProperties:s}){const l=wm.get(e);l&&(l.set(s),l.afterUpdate==null||l.afterUpdate(l,e))}function ik(e){const t=wm.get(e);t&&(t.destroy(),wm.delete(e))}function k4(e){return typeof e=="function"&&e[ek]}function rk(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function sk(){return rk().startsWith("dark")}function qH(){return"calcite-theme-"+(sk()?"dark":"light")}const nk="esri.widgets.Widget",t7=Se.getLogger(nk);let UH=0;const BH={widgetIcon:"esri-icon-checkbox-unchecked"};function ok(e,t){for(const i in t)e[i]!=null&&(typeof e[i]=="object"&&typeof t[i]=="object"?ok(e[i],t[i]):e[i]=t[i]);return e}const HH=JB({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(s,l,d,y)=>{const g=t(s,l,d,y),_=i.test(s);if(!((s=s.replace(i,"")).toLowerCase()in d)||_){const M=s[2].toLowerCase()+s.slice(3),E=j=>g.call(d,j);d.addEventListener(M,E,_);const O=()=>d.removeEventListener(M,E,_),P=y.afterRemoved;y.afterRemoved=j=>{P==null||P(j),O()}}return g}},handleInterceptedEvent(e,t,i,s){const{eventPhase:l,type:d}=s,y=l===Event.CAPTURING_PHASE;let g=`on${d}${y?"capture":""}`;const _=t.properties;(g in _||(g=`on${d[0].toUpperCase()}${d.slice(1)}${y?"Capture":""}`,g in _))&&(ME(),e.scheduleRender(),_[g].call(_.bind||i,s))}});let Vv=!1,wi=class extends og(hl.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new yr,this._projector=HH,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=BH.widgetIcon,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=DM(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const g=await Or(this._messageBundleProps.map(async({bundlePath:_,propertyName:M})=>{let E=await U$(_);this.uiStrings&&Object.keys(this.uiStrings)&&(E=ok(le(E),this.uiStrings)),this[M]=E}));for(const _ of g)_.error&&t7.error("widget-intl:locale-error",this.declaredClass,_.error)}await this.loadLocale()}),LH();const i=["light","dark"],s=rk()||"light";i.includes(s)||Jm(t7,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});const l="esri-widget-uid-"+GB(),d=this.render.bind(this);this._trackingTarget=new rg(()=>this.scheduleRender());const y=()=>{var g;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:l,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const _=d();let{properties:M}=_;M||(_.properties=M={});let{key:E,styles:O}=M;E||(M.key=l),O||(M.styles=O={}),O.display||(O.display="");let P=0;return(g=_.children)==null||g.forEach(j=>{if(k4(j.vnodeSelector))return;let{properties:R}=j;R||(j.properties=R={}),R.key||(R.key=`${this.id}--${P++}`)}),tk(this,_)};this.render=()=>{if(Vv)return y();let g=dB(this);if(g)return g;this._trackingTarget.clear(),Vv=!0;try{g=zo(this._trackingTarget,y)}finally{Vv=!1}return fB(this,g),g},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()}))}normalizeCtorArgs(e,t){const i=J({},e);return t&&(i.container=t),i}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(Y2)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(this._trackingTarget=Dn(this._trackingTarget),this.viewModel=Dn(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,Dv(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return w4(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+UH++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector,handles:this._internalHandles}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(Dv(this),this._projector.scheduleRender())}classes(...e){return IE.apply(this,e)}own(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this._internalHandles.add(e)}renderNow(){Dv(this),this._projector.renderNow()}_postInitialize(){var e;if(this.destroyed)return;this.scheduleRender(),(e=this._delegatedEventNames)!=null&&e.length&&this._internalHandles.add(Ft(()=>this.viewModel,(i,s)=>{s&&this._internalHandles.remove("delegated-events"),i&&this._internalHandles.add(this._delegatedEventNames.map(l=>i.on(l,d=>{this.emit(l,d)})),"delegated-events")},Gn)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(Y2),this.scheduleRender()};this._internalHandles.add([jR(t),Ft(()=>this.uiStrings,t),fg(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};wi[ek]=!0,b([S()],wi.prototype,"_readyForTrueRender",void 0),b([S({value:null})],wi.prototype,"container",null),b([yt("container")],wi.prototype,"castContainer",null),b([S({aliasOf:"container"})],wi.prototype,"domNode",void 0),b([S()],wi.prototype,"iconClass",void 0),b([S()],wi.prototype,"id",null),b([S()],wi.prototype,"label",void 0),b([S()],wi.prototype,"renderable",null),b([S()],wi.prototype,"uiStrings",void 0),b([S()],wi.prototype,"viewModel",void 0),b([S()],wi.prototype,"visible",void 0),b([S()],wi.prototype,"key",void 0),b([S()],wi.prototype,"children",void 0),b([S()],wi.prototype,"afterCreate",void 0),b([S()],wi.prototype,"afterUpdate",void 0),b([S()],wi.prototype,"afterRemoved",void 0),wi=b([H(nk)],wi);const mr=wi;function WH(e){return 32+e.length}function JH(){return 16}function She(e){if(!e)return 0;let t=32;for(const i in e)if(e.hasOwnProperty(i)){const s=e[i];switch(typeof s){case"string":t+=WH(s);break;case"number":t+=JH();break;case"boolean":t+=4}}return t}function Mhe(e,t){return 32+e.length*t}var _m;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(_m||(_m={}));const i7=["B","kB","MB","GB","TB"];function KH(e,t){let i=t===0?0:Math.floor(Math.log(t)/Math.log(_m.KILOBYTES));i=Is(i,0,i7.length-1);const s=Du(t/_m.KILOBYTES**i,{maximumFractionDigits:2});return Un(e.units.bytes[i7[i]],{fileSize:s})}function YH(e){const{exifInfo:t,exifName:i,tagName:s}=e;if(!t||!i||!s)return null;const l=t.find(d=>d.name===i);return l?XH({tagName:s,tags:l.tags}):null}function XH(e){const{tagName:t,tags:i}=e;if(!i||!t)return null;const s=i.find(l=>l.name===t);return s&&s.value||null}var r3;const ZH={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let br=r3=class extends ge{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=YH({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return ZH[t]||null}clone(){return new r3({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};b([S({type:String})],br.prototype,"contentType",void 0),b([S()],br.prototype,"exifInfo",void 0),b([S({readOnly:!0})],br.prototype,"orientationInfo",null),b([S({type:Lt})],br.prototype,"id",void 0),b([S({type:String})],br.prototype,"globalId",void 0),b([S({type:String})],br.prototype,"keywords",void 0),b([S({type:String})],br.prototype,"name",void 0),b([S({json:{read:!1}})],br.prototype,"parentGlobalId",void 0),b([S({json:{read:!1}})],br.prototype,"parentObjectId",void 0),b([S({type:Lt})],br.prototype,"size",void 0),b([S({json:{read:!1}})],br.prototype,"url",void 0),br=r3=b([H("esri.layers.support.AttachmentInfo")],br);const ak=br;var s3;let Vi=s3=class extends ge{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new s3(le({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};b([S({type:[String],json:{write:!0}})],Vi.prototype,"attachmentTypes",void 0),b([S({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Vi.prototype,"attachmentsWhere",void 0),b([S({type:[String],json:{write:!0}})],Vi.prototype,"keywords",void 0),b([S({type:[Number],json:{write:!0}})],Vi.prototype,"globalIds",void 0),b([S({json:{write:!0}})],Vi.prototype,"name",void 0),b([S({type:Number,json:{read:{source:"resultRecordCount"}}})],Vi.prototype,"num",void 0),b([S({type:[Number],json:{write:!0}})],Vi.prototype,"objectIds",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],Vi.prototype,"returnMetadata",void 0),b([S({type:[Number],json:{write:!0}})],Vi.prototype,"size",void 0),b([S({type:Number,json:{read:{source:"resultOffset"}}})],Vi.prototype,"start",void 0),b([ke("start"),ke("num")],Vi.prototype,"writeStart",null),b([S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Vi.prototype,"where",void 0),Vi=s3=b([H("esri.rest.support.AttachmentQuery")],Vi),Vi.from=gi(Vi);const xm=Vi,QH="esri.widgets.Feature.support.featureUtils",r7=Se.getLogger(QH),eW=/href=(""|'')/gi,tW=/(\{([^\{\r\n]+)\})/g,iW=/\'/g,lk=/^\s*expression\//i,rW=/(\n)/gi,sW=/[\u00A0-\u9999<>\&]/gim,nW=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,oW=/^(?:mailto:|tel:)/,uk="relationships/",n3=BI("short-date-short-time");function hk(e){if(!ce(e))return e.get("sourceLayer")||e.get("layer")}async function Sm(e,t){return typeof e=="function"?e.call(null,t):e}function ck(e=""){if(e)return!oW.test(e.trim().toLowerCase())}function pk(e){return!!e&&lk.test(e)}function aW(e,t){if(!pk(t)||!e)return null;const i=t.replace(lk,"").toLowerCase();let s;return e.some(l=>l.name.toLowerCase()===i&&(s=l,!0)),s}function dk(e,t){const i=aW(t,e==null?void 0:e.fieldName);return i?i.title||null:e?e.label||e.fieldName:null}function lW(e,t){const i=t.get(e.toLowerCase());return`{${i&&i.fieldName||e}}`}function uW(e){return e.replace(eW,"")}function Mm(e,t){const i=A4(t,e);return i?i.name:e}function hW(e,t){return e&&e.map(i=>Mm(i,t))}function A4(e,t){return e&&typeof e.getField=="function"?e.getField(t):null}function fk(e){return`${e}`.trim()}function vu({attributes:e,globalAttributes:t,layer:i,text:s,expressionAttributes:l,fieldInfoMap:d}){return s?o3({formattedAttributes:t,template:fW(s,J(J(J({},t),l),e),i),fieldInfoMap:d}):""}function o3({formattedAttributes:e,template:t,fieldInfoMap:i}){return fk(uW(Un(Un(t,s=>lW(s,i)),e)))}function cW(e,t,i=!1){const s=t[e];if(typeof s=="string"){const l="%27",d=(i?encodeURIComponent(s):s).replace(iW,l);t[e]=d}}function pW(e,t=!1){const i=J({},e);return Object.keys(i).forEach(s=>cW(s,i,t)),i}function dW(e,t,i){const s=(t=fk(t))&&t[0]!=="{";return Un(e,pW(i,s))}function a3(e,t){return e.replace(tW,(i,s,l)=>{const d=A4(t,l);return d?`{${d.name}}`:s})}function fW(e,t,i){const s=a3(e,i);return s&&s.replace(nW,(l,d,y)=>dW(l,d||y,t))}function yW(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const i=Number(e);if(!isNaN(i))return i}return e}function mW(e){return(e==null?void 0:e.type)==="feature"}function gW(e){return(e==null?void 0:e.type)==="map-image"}function vW(e){return!(e==null||!e.layer)}function yk(e,t){const i=t.fieldInfos,s=t.fieldName,l=mk(i,s),d=l==null?void 0:l.clone(),y=t.preventPlacesFormatting,g=t.layer,_=A4(g,s);if(d&&(_==null?void 0:_.type)==="date"){const E=d.format||new D0;E.dateFormat=E.dateFormat||"short-date-short-time",E.dateTimeFormatOptions=mW(g)&&g.datesInUnknownTimezone||vW(g)&&gW(g.layer)&&g.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,d.format=E}const M=d&&d.format;return typeof(e=yW(e,M))=="string"||e==null||M==null?Xd(e):y?Du(e,Te(J({},WI(M)),{minimumFractionDigits:0,maximumFractionDigits:20})):M.format(e)}function mk(e,t){if(!e||!e.length||!t)return;const i=t.toLowerCase();let s;return e.some(l=>!(!l.fieldName||l.fieldName.toLowerCase()!==i)&&(s=l,!0)),s}function bW({fieldName:e,graphic:t,layer:i}){if(Fo(e)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:s}=i;if(!s||e!==s)return null;const l=i.getFeatureType(t);return l?l.name:null}function wW({fieldName:e,value:t,graphic:i,layer:s}){if(Fo(e)||!s||typeof s.getFieldDomain!="function")return null;const l=s.getFieldDomain(e,{feature:i});return l&&l.type==="coded-value"?l.getName(t):null}function _W(e,t){const{creatorField:i,creationDateField:s,editorField:l,editDateField:d}=e;if(!t)return;const y=t[d];if(typeof y=="number"){const _=t[l];return{type:"edit",date:ol(y,n3),user:_}}const g=t[s];if(typeof g=="number"){const _=t[i];return{type:"create",date:ol(g,n3),user:_}}return null}function xW(e,t){const i=new Map;return e&&e.forEach(s=>{const l=Mm(s.fieldName,t);s.fieldName=l,i.set(l.toLowerCase(),s)}),i}function s7(e){const t=[];if(!e)return t;const{fieldInfos:i,content:s}=e;return i&&t.push(...i),s&&Array.isArray(s)&&s.forEach(l=>{if(l.type==="fields"){const d=l&&l.fieldInfos;d&&t.push(...d)}}),t}function O4(e){return e.replace(sW,t=>`&#${t.charCodeAt(0)};`)}function Xd(e){return typeof e=="string"?e.replace(rW,'<br class="esri-text-new-line" />'):e}function SW(e){const{value:t,fieldName:i,fieldInfos:s,fieldInfoMap:l,layer:d,graphic:y}=e;if(t==null)return"";const g=wW({fieldName:i,value:t,graphic:y,layer:d});if(g)return g;const _=bW({fieldName:i,graphic:y,layer:d});if(_)return _;if(l.get(i.toLowerCase()))return yk(t,{fieldInfos:s,fieldName:i,layer:d});const M=d&&d.fieldsIndex;return M&&M.isDateField(i)?ol(t,n3):Xd(t)}function Gv({fieldInfos:e,attributes:t,layer:i,graphic:s,fieldInfoMap:l,relatedInfos:d}){const y={};return d==null||d.forEach(g=>EW(y,g)),Object.keys(t).forEach(g=>{const _=t[g];y[g]=SW({fieldName:g,fieldInfos:e,fieldInfoMap:l,layer:i,value:_,graphic:s})}),y}async function MW(e,t){var i,s;const{layer:l,graphic:d,outFields:y,objectIds:g,returnGeometry:_,spatialReference:M}=e,E=g[0];if(typeof E!="number"&&typeof E!="string"){const P="Could not query required fields for the specified feature. The feature's ID is invalid.",j={layer:l,graphic:d,objectId:E,requiredFields:y};return r7.warn(P,j),null}if((i=l.capabilities)==null||(s=i.operations)==null||!s.supportsQuery){const P="The specified layer cannot be queried. The following fields will not be available.",j={layer:l,graphic:d,requiredFields:y,returnGeometry:_};return r7.warn(P,j),null}const O=l.createQuery();return O.objectIds=g,O.outFields=y!=null&&y.length?y:[l.objectIdField],O.returnGeometry=!!_,O.returnZ=!!_,O.returnM=!!_,O.outSpatialReference=M,(await l.queryFeatures(O,t)).features[0]}async function $W(e){var t;if((t=e.expressionInfos)==null||!t.length)return!1;const i=await qo(),{arcadeUtils:{hasGeometryFunctions:s}}=i;return s(e)}async function IW({graphic:e,popupTemplate:t,layer:i,spatialReference:s},l){if(!i||!t||(typeof i.load=="function"&&await i.load(l),!e.attributes))return;const d=e.attributes[i.objectIdField];if(d==null)return;const y=[d],g=await t.getRequiredFields(i.fieldsIndex),_=kz(g,e),M=_?[]:g,E=t.returnGeometry||await $W(t);if(_&&!E)return;const O=await MW({layer:i,graphic:e,outFields:M,objectIds:y,returnGeometry:E,spatialReference:s},l);O&&(O.geometry&&(e.geometry=O.geometry),O.attributes&&(e.attributes=J(J({},e.attributes),O.attributes)))}function Fo(e=""){return!!e&&e.indexOf(uk)!==-1}function TW(e){return e?`${uk}${e.layerId}/${e.fieldName}`:""}function n7({attributes:e,graphic:t,relatedInfo:i}){e&&t&&i&&Object.keys(t.attributes).forEach(s=>{const l=TW({layerId:i.relation.id.toString(),fieldName:s});e[l]=t.attributes[s]})}function EW(e,t){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach(i=>n7({attributes:e,graphic:i,relatedInfo:t})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach(i=>n7({attributes:e,graphic:i,relatedInfo:t})))}const o7=e=>{if(!e)return!1;const t=e.toUpperCase();return t.indexOf("CURRENT_TIMESTAMP")>-1||t.indexOf("CURRENT_DATE")>-1||t.indexOf("CURRENT_TIME")>-1},gk=({layer:e,method:t,query:i,definitionExpression:s})=>{var l,d;if((l=e.capabilities)==null||(d=l.query)==null||!d.supportsCacheHint||t==="attachments")return;const y=X(i.where)&&i.where,g=X(i.geometry)&&i.geometry;o7(s)||o7(y)||(g==null?void 0:g.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},kW=({query:e,layer:t,method:i})=>{gk({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},AW=({queryPayload:e,layer:t,method:i})=>{gk({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},a7={editing:!1,operations:{add:!0,update:!0,delete:!0}},vk=qe.ofType(ak),OW="graphic.layer.capabilities.operations.supportsResizeAttachments";let qs=class extends Ic{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities=J({},a7),this.activeAttachmentInfo=null,this.attachmentInfos=new vk,this.graphic=null,this.mode="view",this.handles.add([ri(this,"graphic",()=>this._graphicChanged())])}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return J(J({},a7),e)}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get(OW)||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new re("invalid-layer","getAttachments(): A valid layer is required.");const i=this._getFeatureId(),s=new xm({objectIds:[i],returnMetadata:!0}),l=[],d=e.queryAttachments(s).then(g=>g[i]||l).catch(()=>l);this._getAttachmentsPromise=d,this.notifyChange("state");const y=await d;return t.removeAll(),y.length&&t.addMany(y),this._getAttachmentsPromise=null,this.notifyChange("state"),y}async addAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:s,abilities:l}=this;if(!e)throw new re("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!l.operations.add)throw new re("invalid-abilities","addAttachment(): add abilities are required.");if(!t||typeof t.addAttachment!="function")throw new re("invalid-layer","addAttachment(): A valid layer is required.");const d=t.addAttachment(s,e).then(g=>this._queryAttachment(g.objectId)),y=await d;return i.add(y),y}async deleteAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:s,abilities:l}=this;if(!e)throw new re("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!l.operations.delete)throw new re("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new re("invalid-layer","deleteAttachment(): A valid layer is required.");const d=t.deleteAttachments(s,[e.id]).then(()=>e),y=await d;return i.remove(y),y}async updateAttachment(e,t=this.activeAttachmentInfo){const{_attachmentLayer:i,attachmentInfos:s,graphic:l,abilities:d}=this;if(!e)throw new re("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new re("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!d.operations.update)throw new re("invalid-abilities","updateAttachment(): Update abilities are required.");const y=s.findIndex(M=>M===t);if(!i||typeof i.updateAttachment!="function")throw new re("invalid-layer","updateAttachment(): A valid layer is required.");const g=i.updateAttachment(l,t.id,e).then(M=>this._queryAttachment(M.objectId)),_=await g;return s.splice(y,1,_),_}async _queryAttachment(e){if(!e)throw new re("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:t}=this,i=this._getFeatureId(),s=new xm({objectIds:[i],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return t.queryAttachments(s).then(l=>l[i][0])}_getFeatureId(){const{_attachmentLayer:e,graphic:t}=this;if(!e||!t)return null;const{objectIdField:i}=e,{attributes:s}=t;return s&&s[i]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=hk(e);this._attachmentLayer=t?t.type==="scene"&&X(t.associatedLayer)?t.associatedLayer:t:null}};b([S()],qs.prototype,"abilities",void 0),b([yt("abilities")],qs.prototype,"castAbilities",null),b([S()],qs.prototype,"activeAttachmentInfo",void 0),b([S({readOnly:!0,type:vk})],qs.prototype,"attachmentInfos",void 0),b([S({type:rs})],qs.prototype,"graphic",void 0),b([S()],qs.prototype,"mode",void 0),b([S({readOnly:!0})],qs.prototype,"state",null),b([S({readOnly:!0})],qs.prototype,"supportsResizeAttachments",null),qs=b([H("esri.widgets.Attachments.AttachmentsViewModel")],qs);const C4=qs;function CW(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function PW(e){const t=bt("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.indexOf("image/")!==-1?`${t}image-32.svg`:e.indexOf("audio/")!==-1?`${t}sound-32.svg`:e.indexOf("video/")!==-1?`${t}video-32.svg`:e.indexOf("msexcel")!==-1||e.indexOf("ms-excel")!==-1||e.indexOf("spreadsheetml")!==-1?`${t}excel-32.svg`:e.indexOf("msword")!==-1||e.indexOf("ms-word")!==-1||e.indexOf("wordprocessingml")!==-1?`${t}word-32.svg`:e.indexOf("powerpoint")!==-1||e.indexOf("presentationml")!==-1?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}function kr(e){return function(t,i){t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var NW=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},bk=function(e,t){for(var i=0,s=e.length;i<s;i++){var l=e[i];Array.isArray(l)?bk(l,t):l!=null&&l!==!1&&(l.hasOwnProperty("vnodeSelector")||(l=NW(l)),t.push(l))}},jW=function(e,t){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var l=[];return bk(i,l),{vnodeSelector:e,properties:t||void 0,children:l,text:void 0,domNode:null}};function oe(e,t,...i){return typeof e!="function"||k4(e)?jW(e,t,...i):e(t,...i)}const l7={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Ce={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},qv=window.CSS;let Yi=class extends mr{constructor(e,t){super(e,t),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new C4,this.visibleElements=J({},l7),this._supportsImageOrientation=qv&&qv.supports&&qv.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own(Eg(this,"viewModel.attachmentInfos","change",()=>this.scheduleRender()),ri(this,"viewModel.mode",()=>this._modeChanged()))}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}castVisibleElements(e){return J(J({},l7),e)}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new re("attachments:add-attachment",this.messages.addErrorMessage,i)),i})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new re("attachments:delete-attachment",this.messages.deleteErrorMessage,i)),i})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(i=>(this._set("submitting",!1),this._set("error",null),e.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new re("attachments:update-attachment",this.messages.updateErrorMessage,i)),i})}render(){const{submitting:e,viewModel:t}=this,{state:i}=t;return oe("div",{class:this.classes(Ce.base,Ce.esriWidget)},e?this.renderProgressBar():null,i==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?oe("div",{key:"error-message",class:Ce.errorMessage},e.message):null}renderAttachments(){const{mode:e,activeAttachmentInfo:t}=this.viewModel;return e==="add"?this.renderAddForm():e==="edit"?this.renderDetailsForm(t):this.renderAttachmentContainer()}renderLoading(){return oe("div",{class:Ce.loaderContainer,key:"loader"},oe("div",{class:Ce.loader}))}renderProgressBar(){return this.visibleElements.progressBar?oe("div",{class:Ce.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,i=e||!t,s=this.visibleElements.cancelAddButton?oe("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(Ce.esriButton,Ce.esriButtonTertiary,Ce.esriButtonSmall,Ce.esriButtonHalf,e&&Ce.buttonDisabled)},this.messages.cancel):null,l=this.visibleElements.addSubmitButton?oe("button",{type:"submit",disabled:i,class:this.classes(Ce.esriButton,Ce.esriButtonSecondary,Ce.esriButtonSmall,Ce.esriButtonHalf,{[Ce.buttonDisabled]:i})},this.messages.add):null,d=t?oe("span",{key:"file-name",class:Ce.fileName},t.name):null,y=oe("form",{bind:this,afterCreate:Yw,afterRemoved:jx,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},oe("fieldset",{class:Ce.fileFieldset},d,oe("label",{class:this.classes(Ce.fileLabel,Ce.esriButton,Ce.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,oe("input",{class:Ce.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),l,s);return oe("div",{key:"add-form-container",class:Ce.formNode},y)}renderDetailsForm(e){const{visibleElements:t,viewModel:i,selectedFile:s,submitting:l}=this,{contentType:d,size:y,url:g}=e,{abilities:_}=i,M=l||!s,E=_.editing&&_.operations.delete&&t.deleteButton?oe("button",{key:"delete-button",type:"button",disabled:l,bind:this,onclick:te=>this._submitDeleteAttachment(te,e),class:this.classes(Ce.esriButton,Ce.esriButtonSmall,Ce.esriButtonTertiary,Ce.deleteButton,{[Ce.buttonDisabled]:l})},this.messages.delete):null,O=_.editing&&_.operations.update&&t.updateButton?oe("button",{disabled:M,key:"update-button",type:"submit",class:this.classes(Ce.esriButton,Ce.esriButtonSmall,Ce.esriButtonThird,{[Ce.buttonDisabled]:M})},this.messages.update):null,P=this.visibleElements.cancelUpdateButton?oe("button",{disabled:l,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(Ce.esriButton,Ce.esriButtonSmall,Ce.esriButtonTertiary,Ce.esriButtonThird,{[Ce.buttonDisabled]:l})},this.messages.cancel):null,j=s?oe("span",{key:"file-name",class:Ce.fileName},s.name):null,R=_.editing&&_.operations.update?oe("fieldset",{key:"file",class:Ce.fileFieldset},j,oe("label",{class:this.classes(Ce.fileLabel,Ce.esriButton,Ce.esriButtonSecondary)},this.messages.changeFile,oe("input",{class:Ce.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,z=oe("fieldset",{key:"size",class:Ce.metadataFieldset},oe("label",null,KH(this.messagesUnits,y))),q=oe("fieldset",{key:"content-type",class:Ce.metadataFieldset},oe("label",null,d)),Y=oe("form",{bind:this,afterCreate:Yw,afterRemoved:jx,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},oe("div",{class:Ce.metadata},z,q),R,oe("div",{class:Ce.actions},E,P,O));return oe("div",{key:"edit-form-container",class:Ce.formNode},oe("a",{class:Ce.itemLink,href:g,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),oe("div",{class:Ce.itemLinkOverlay},oe("span",{class:Ce.itemLinkOverlayIcon},oe("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},oe("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),oe("path",{fill:"none",d:"M0 0h32v32H0z"}))))),Y)}renderImageMask({attachmentInfo:e,size:t}){const{supportsResizeAttachments:i}=this.viewModel,{contentType:s,name:l,url:d}=e,y=i&&CW(s),g=this._getCSSTransform(e,y),_=g?{transform:g,"image-orientation":"none"}:{},M=d.indexOf("?")===-1?"?":"&",E=y?`${d}${M}w=${t}`:PW(s),O={[Ce.itemMaskIcon]:!y},P={[Ce.itemImageResizable]:i};return oe("div",{class:this.classes(O,Ce.itemMask)},oe("img",{styles:_,alt:l,src:E,class:this.classes(P,Ce.itemImage)}))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:i}=this,{abilities:s}=i,{name:l,url:d}=e,y=this.renderImageMask({attachmentInfo:e,size:t==="list"?48:400}),g=s.editing?oe("span",{"aria-hidden":"true",class:this.classes(Ce.itemChevronIcon,Ka(this.container)?Ce.iconLeft:Ce.iconRight)}):null,_=[y,oe("label",{class:Ce.itemLabel},oe("span",{class:Ce.itemFilename},l||this.messages.noTitle),g)],M=s.editing?oe("button",{key:"details-button",bind:this,class:Ce.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},_):oe("a",{key:"details-link",class:Ce.itemButton,href:d,target:"_blank"},_);return oe("li",{class:Ce.item,key:e},M)}renderAttachmentContainer(){const{effectiveDisplayType:e,viewModel:t,visibleElements:i}=this,{attachmentInfos:s,abilities:l}=t,d=s&&s.length,y={[Ce.containerList]:e!=="preview",[Ce.containerPreview]:e==="preview"},g=l.editing&&l.operations.add&&i.addButton?oe("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(Ce.esriButton,Ce.esriButtonTertiary,Ce.addAttachmentButton),type:"button"},oe("span",{"aria-hidden":"true",class:this.classes(Ce.itemAddIcon,Ce.iconPlus)}),this.messages.add):null,_=d?oe("ul",{class:Ce.items},s.toArray().map(M=>this.renderAttachmentInfo({attachmentInfo:M,displayType:e}))):oe("div",{class:Ce.empty},this.messages.noAttachments);return oe("div",{key:"attachments-container",class:this.classes(Ce.container,y)},_,g)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,i=t&&t.files&&t.files.item(0);this._set("selectedFile",i)}_submitDeleteAttachment(e,t){e.preventDefault(),this.deleteAttachment(t)}_submitAddAttachment(e){e.preventDefault(),this.addAttachment()}_submitUpdateAttachment(e){e.preventDefault(),this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeAttachmentInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e,t){const{orientationInfo:i}=e;return!this._supportsImageOrientation&&t&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};b([Ge("viewModel.abilities")],Yi.prototype,"abilities",void 0),b([S()],Yi.prototype,"displayType",void 0),b([S({readOnly:!0})],Yi.prototype,"effectiveDisplayType",null),b([Ge("viewModel.graphic")],Yi.prototype,"graphic",void 0),b([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Yi.prototype,"label",void 0),b([S(),kr("esri/widgets/Attachments/t9n/Attachments")],Yi.prototype,"messages",void 0),b([S(),kr("esri/core/t9n/Units")],Yi.prototype,"messagesUnits",void 0),b([S({readOnly:!0})],Yi.prototype,"selectedFile",void 0),b([S({readOnly:!0})],Yi.prototype,"submitting",void 0),b([S({readOnly:!0})],Yi.prototype,"error",void 0),b([S({type:C4})],Yi.prototype,"viewModel",void 0),b([S()],Yi.prototype,"visibleElements",void 0),b([yt("visibleElements")],Yi.prototype,"castVisibleElements",null),Yi=b([H("esri.widgets.Attachments")],Yi);const FW=Yi;let u0=class extends C4{constructor(e){super(e),this.description=null,this.title=null}};b([S()],u0.prototype,"description",void 0),b([S()],u0.prototype,"title",void 0),u0=b([H("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],u0);const P4=u0,RW={heading:"esri-widget__heading"};function N4(e,t){const i=LW(e.level),s=`h${i}`;return delete e.level,oe(s,Te(J({},e),{class:IE(RW.heading,e.class),role:"heading","aria-level":String(i)}),t)}function LW(e){return Is(Math.ceil(e),1,6)}const Uv={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let Oh=class extends mr{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return oe("div",{class:Uv.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?oe(N4,{level:this.headingLevel,class:Uv.title},e):null}renderDescription(){const{description:e}=this;return e?oe("div",{key:"description",class:Uv.description},e):null}};b([S()],Oh.prototype,"description",void 0),b([S()],Oh.prototype,"headingLevel",void 0),b([S()],Oh.prototype,"title",void 0),Oh=b([H("esri.widgets.Feature.support.FeatureElementInfo")],Oh);const j4=Oh,DW={base:"esri-feature-attachments"};let An=class extends mr{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new FW,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new P4}initialize(){this._featureElementInfo=new j4,ri(this,["viewModel.description","viewModel.title","headingLevel"],()=>this._setupFeatureElementInfo()),ri(this,"viewModel.graphic",e=>this.attachmentsWidget.graphic=e)}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}render(){var e;const{attachmentsWidget:t}=this;return oe("div",{class:DW.base},(e=this._featureElementInfo)==null?void 0:e.render(),t==null?void 0:t.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:i}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:i})}};b([S({readOnly:!0})],An.prototype,"attachmentsWidget",void 0),b([Ge("viewModel.description")],An.prototype,"description",void 0),b([Ge("attachmentsWidget.displayType")],An.prototype,"displayType",void 0),b([Ge("viewModel.graphic")],An.prototype,"graphic",void 0),b([S()],An.prototype,"headingLevel",void 0),b([Ge("viewModel.title")],An.prototype,"title",void 0),b([S({type:P4})],An.prototype,"viewModel",void 0),An=b([H("esri.widgets.Feature.FeatureAttachments")],An);const zW=An;let wa=class extends Yu(Fe){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(ri(this,"creator",t=>{this._destroyContent(),this._createContent(t)}))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:i}=this;e&&(Sm(i,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const{graphic:t}=this,i=Sm(e,{graphic:t}).catch(()=>null);this._loadingPromise=i,this.notifyChange("state");const s=await i;i===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",s))}};b([S({readOnly:!0})],wa.prototype,"created",void 0),b([S()],wa.prototype,"creator",void 0),b([S()],wa.prototype,"destroyer",void 0),b([S({type:rs})],wa.prototype,"graphic",void 0),b([S({readOnly:!0})],wa.prototype,"state",null),wa=b([H("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],wa);const $m=wa;function bs(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:GW(e[t])}}}function VW(e){const{type:t}=e;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function GW(e){return function(t,...i){VW(t)?SB(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function qW(e){return e.split(",").map(t=>t.trim())}function UW(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,s=Array.isArray(e)?e:qW(e);i.push(...s)}}function wk(e){return e&&typeof e.render=="function"}function BW(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const Bv={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let Ch=class extends mr{constructor(e,t){super(e,t),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=i=>{Array.from(i.querySelectorAll("a")).forEach(s=>{ck(s.href)&&!s.hasAttribute("target")&&s.setAttribute("target","_blank")})}}renderLoading(){return oe("div",{class:Bv.loaderContainer,key:"loader"},oe("div",{class:Bv.loader}))}renderCreated(){var e;const t=(e=this.viewModel)==null?void 0:e.created;return t?t instanceof HTMLElement?oe("div",{key:t,bind:t,afterCreate:this._attachToNode}):wk(t)?oe("div",{key:t},!t.destroyed&&t.render()):oe("div",{key:t,innerHTML:t,afterCreate:this._addTargetToAnchors}):null}render(){var e;const t=(e=this.viewModel)==null?void 0:e.state;return oe("div",{class:Bv.base},t==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};b([Ge("viewModel.creator")],Ch.prototype,"creator",void 0),b([Ge("viewModel.graphic")],Ch.prototype,"graphic",void 0),b([S({type:$m})],Ch.prototype,"viewModel",void 0),Ch=b([H("esri.widgets.Feature.FeatureContent")],Ch);const K1=Ch;let mo=class extends Fe{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,i=[];return t==null||t.forEach(s=>{if(!(!s.hasOwnProperty("visible")||s.visible))return;const l=s.clone();l.label=dk(l,e),i.push(l)}),i}};b([S()],mo.prototype,"attributes",void 0),b([S({type:[tT]})],mo.prototype,"expressionInfos",void 0),b([S()],mo.prototype,"description",void 0),b([S({type:[Gd]})],mo.prototype,"fieldInfos",void 0),b([S({readOnly:!0})],mo.prototype,"formattedFieldInfos",null),b([S()],mo.prototype,"title",void 0),mo=b([H("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],mo);const Ag=mo,HW=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function WW(e){let t=null;return HW.some(i=>(i.pattern.test(e)&&(t=i),!!t)),t}function JW(e,t){if(typeof t!="string"||!t)return t;const i=WW(t);if(!i)return t;const s=t.match(i.pattern),l=s&&s[2],d=Un(Un(i.label,{messages:e,hierPart:l}),{appName:i.appName}),y=i.target?` target="${i.target}"`:"",g=i.target==="_blank"?' rel="noreferrer"':"";return t.replace(i.pattern,`<a${y} href="$1"${g}>${d}</a>`)}const Mp={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let Us=class extends mr{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new Ag,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new j4,ri(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo())}destroy(){this._featureElementInfo.destroy()}renderFieldInfo(e,t){const{attributes:i}=this.viewModel,s=e.fieldName,l=e.label||s,d=i?i[s]==null?"":i[s]:"",y=!(!e.format||!e.format.dateFormat),g=typeof d=="number"&&!y?this._forceLTR(d):JW(this.messagesURIUtils,d),_={[Mp.fieldDataDate]:y};return oe("tr",{key:`fields-element-info-row-${s}-${t}`},oe("th",{key:`fields-element-info-row-header-${s}-${t}`,class:Mp.fieldHeader,innerHTML:l}),oe("td",{key:`fields-element-info-row-data-${s}-${t}`,class:this.classes(Mp.fieldData,_),innerHTML:g}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?oe("table",{class:Mp.esriTable,summary:this.messages.fieldsSummary},oe("tbody",null,e.map((t,i)=>this.renderFieldInfo(t,i)))):null}render(){var e;return oe("div",{class:Mp.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};b([Ge("viewModel.attributes")],Us.prototype,"attributes",void 0),b([Ge("viewModel.description")],Us.prototype,"description",void 0),b([Ge("viewModel.expressionInfos")],Us.prototype,"expressionInfos",void 0),b([Ge("viewModel.fieldInfos")],Us.prototype,"fieldInfos",void 0),b([Ge("viewModel.title")],Us.prototype,"title",void 0),b([S({type:Ag})],Us.prototype,"viewModel",void 0),b([S(),kr("esri/widgets/Feature/t9n/Feature")],Us.prototype,"messages",void 0),b([S(),kr("esri/widgets/support/t9n/uriUtils")],Us.prototype,"messagesURIUtils",void 0),Us=b([H("esri.widgets.Feature.FeatureFields")],Us);const _k=Us,u7={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},KW={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function YW(e,t){const i=new Date(e,t+1,1);return i.setDate(0),i.getDate()}function Tu(e,t,i){const s=new Date(e.getTime());if(t&&i){const l=KW[i],{getter:d,setter:y,multiplier:g}=l;if(i==="months"){const _=YW(s.getFullYear(),s.getMonth()+t);s.getDate()>_&&s.setDate(_)}s[y](s[d]()+t*g)}return s}function h7(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function XW(e,t,i){return e===0?0:e*u7[t]/u7[i]}var Bs;let Hr=Bs=class extends ge{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return c7}static get empty(){return ZW}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(Bs.allTime)}get isEmpty(){return this.equals(Bs.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new Bs({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=X(this.start)?this.start.getTime():this.start,i=X(this.end)?this.end.getTime():this.end,s=X(e.start)?e.start.getTime():e.start,l=X(e.end)?e.end.getTime():e.end;return t===s&&i===l}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=za(this.start,s=>h7(s,e)),i=za(this.end,s=>Tu(h7(s,e),1,e));return new Bs({start:t,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Bs.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=Rp(this.start,-1/0,g=>g.getTime()),i=Rp(this.end,1/0,g=>g.getTime()),s=Rp(e.start,-1/0,g=>g.getTime()),l=Rp(e.end,1/0,g=>g.getTime());let d,y;if(s>=t&&s<=i?d=s:t>=s&&t<=l&&(d=t),i>=s&&i<=l?y=i:l>=t&&l<=i&&(y=l),!isNaN(d)&&!isNaN(y)){const g=new Bs;return g.start=d===-1/0?null:new Date(d),g.end=y===1/0?null:new Date(y),g}return Bs.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const i=new Bs,{start:s,end:l}=this;return X(s)&&(i.start=Tu(s,e,t)),X(l)&&(i.end=Tu(l,e,t)),i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return c7.clone();const t=X(this.start)&&X(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=X(this.end)&&X(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Bs({start:t,end:i})}};b([S({type:Date,json:{write:{allowNull:!0}}})],Hr.prototype,"end",void 0),b([$e("end")],Hr.prototype,"readEnd",null),b([ke("end")],Hr.prototype,"writeEnd",null),b([S({readOnly:!0,json:{read:!1}})],Hr.prototype,"isAllTime",null),b([S({readOnly:!0,json:{read:!1}})],Hr.prototype,"isEmpty",null),b([S({type:Date,json:{write:{allowNull:!0}}})],Hr.prototype,"start",void 0),b([$e("start")],Hr.prototype,"readStart",null),b([ke("start")],Hr.prototype,"writeStart",null),Hr=Bs=b([H("esri.TimeExtent")],Hr);const c7=new Hr,ZW=new Hr({start:void 0,end:void 0}),Qn=Hr;var l3;let h0=l3=class extends ge{constructor(e){super(e),this.name=null,this.code=null}clone(){return new l3({name:this.name,code:this.code})}};b([S({type:String,json:{write:!0}})],h0.prototype,"name",void 0),b([S({type:[String,Number],json:{write:!0}})],h0.prototype,"code",void 0),h0=l3=b([H("esri.layers.support.CodedValue")],h0);const QW=h0,eJ=new ot({inherited:"inherited",codedValue:"coded-value",range:"range"});let c0=class extends ge{constructor(e){super(e),this.name=null,this.type=null}};b([S({type:String,json:{write:!0}})],c0.prototype,"name",void 0),b([Ue(eJ)],c0.prototype,"type",void 0),c0=b([H("esri.layers.support.Domain")],c0);const Og=c0;var u3;let p0=u3=class extends Og{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(s=>(String(s.code)===i&&(t=s.name),!!t))}return t}clone(){return new u3({codedValues:le(this.codedValues),name:this.name})}};b([S({type:[QW],json:{write:!0}})],p0.prototype,"codedValues",void 0),b([Ue({codedValue:"coded-value"})],p0.prototype,"type",void 0),p0=u3=b([H("esri.layers.support.CodedValueDomain")],p0);const xk=p0;var h3;let Y1=h3=class extends Og{constructor(e){super(e),this.type="inherited"}clone(){return new h3}};b([Ue({inherited:"inherited"})],Y1.prototype,"type",void 0),Y1=h3=b([H("esri.layers.support.InheritedDomain")],Y1);const Sk=Y1;var c3;let Ph=c3=class extends Og{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new c3({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};b([S({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],Ph.prototype,"maxValue",void 0),b([S({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],Ph.prototype,"minValue",void 0),b([Ue({range:"range"})],Ph.prototype,"type",void 0),Ph=c3=b([H("esri.layers.support.RangeDomain")],Ph);const Mk=Ph,$k={key:"type",base:Og,typeMap:{range:Mk,"coded-value":xk,inherited:Sk}};function F4(e){if(!e||!e.type)return null;switch(e.type){case"range":return Mk.fromJSON(e);case"codedValue":return xk.fromJSON(e);case"inherited":return Sk.fromJSON(e)}return null}const tJ=new ot({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var p3;const iJ=new ot({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let sr=p3=class extends ge{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let i;try{i=JSON.parse(t)}catch{}return i?i.value:null}readValueType(e,{description:t}){let i;try{i=JSON.parse(t)}catch{}return i?iJ.fromJSON(i.fieldValueType):null}clone(){return new p3({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};b([S({type:String,json:{write:!0}})],sr.prototype,"alias",void 0),b([S({type:[String,Number],json:{write:{allowNull:!0}}})],sr.prototype,"defaultValue",void 0),b([S()],sr.prototype,"description",void 0),b([$e("description")],sr.prototype,"readDescription",null),b([S({types:$k,json:{read:{reader:F4},write:!0}})],sr.prototype,"domain",void 0),b([S({type:Boolean,json:{write:!0}})],sr.prototype,"editable",void 0),b([S({type:Lt,json:{write:!0}})],sr.prototype,"length",void 0),b([S({type:String,json:{write:!0}})],sr.prototype,"name",void 0),b([S({type:Boolean,json:{write:!0}})],sr.prototype,"nullable",void 0),b([Ue(tJ)],sr.prototype,"type",void 0),b([S()],sr.prototype,"valueType",void 0),b([$e("valueType",["description"])],sr.prototype,"readValueType",null),sr=p3=b([H("esri.layers.support.Field")],sr);const Cg=sr;var d3;let Nh=d3=class extends ge{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new d3({mapLayerId:e,gdbVersion:t})}};b([Ue({mapLayer:"map-layer"})],Nh.prototype,"type",void 0),b([S({type:Lt,json:{write:!0}})],Nh.prototype,"mapLayerId",void 0),b([S({type:String,json:{write:!0}})],Nh.prototype,"gdbVersion",void 0),Nh=d3=b([H("esri.layers.support.source.MapLayerSource")],Nh);var f3;let go=f3=class extends ge{constructor(e){super(e),this.type="query-table"}clone(){var e;const{workspaceId:t,query:i,oidFields:s,spatialReference:l,geometryType:d}=this,y={workspaceId:t,query:i,oidFields:s,spatialReference:(e=l==null?void 0:l.clone())!=null?e:void 0,geometryType:d};return new f3(y)}};b([Ue({queryTable:"query-table"})],go.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],go.prototype,"workspaceId",void 0),b([S({type:String,json:{write:!0}})],go.prototype,"query",void 0),b([S({type:String,json:{write:!0}})],go.prototype,"oidFields",void 0),b([S({type:it,json:{write:!0}})],go.prototype,"spatialReference",void 0),b([Ue(XD)],go.prototype,"geometryType",void 0),go=f3=b([H("esri.layers.support.source.QueryTableDataSource")],go);var y3;let jh=y3=class extends ge{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new y3({workspaceId:e,dataSourceName:t})}};b([Ue({raster:"raster"})],jh.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],jh.prototype,"dataSourceName",void 0),b([S({type:String,json:{write:!0}})],jh.prototype,"workspaceId",void 0),jh=y3=b([H("esri.layers.support.source.RasterDataSource")],jh);var m3;let Ll=m3=class extends ge{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new m3({workspaceId:e,gdbVersion:t,dataSourceName:i})}};b([Ue({table:"table"})],Ll.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Ll.prototype,"workspaceId",void 0),b([S({type:String,json:{write:!0}})],Ll.prototype,"gdbVersion",void 0),b([S({type:String,json:{write:!0}})],Ll.prototype,"dataSourceName",void 0),Ll=m3=b([H("esri.layers.support.source.TableDataSource")],Ll);var g3,v3;const rJ=Hi()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Vr=g3=class extends ge{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return p7()(e,t,i)}castLeftTableSource(e){return Hn(b3(),e)}readRightTableSource(e,t,i){return p7()(e,t,i)}castRightTableSource(e){return Hn(b3(),e)}clone(){var e,t;const{leftTableKey:i,rightTableKey:s,leftTableSource:l,rightTableSource:d,joinType:y}=this,g={leftTableKey:i,rightTableKey:s,leftTableSource:(e=l==null?void 0:l.clone())!=null?e:void 0,rightTableSource:(t=d==null?void 0:d.clone())!=null?t:void 0,joinType:y};return new g3(g)}};b([Ue({joinTable:"join-table"})],Vr.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Vr.prototype,"leftTableKey",void 0),b([S({type:String,json:{write:!0}})],Vr.prototype,"rightTableKey",void 0),b([S({json:{write:!0}})],Vr.prototype,"leftTableSource",void 0),b([$e("leftTableSource")],Vr.prototype,"readLeftTableSource",null),b([yt("leftTableSource")],Vr.prototype,"castLeftTableSource",null),b([S({json:{write:!0}})],Vr.prototype,"rightTableSource",void 0),b([$e("rightTableSource")],Vr.prototype,"readRightTableSource",null),b([yt("rightTableSource")],Vr.prototype,"castRightTableSource",null),b([Ue(rJ)],Vr.prototype,"joinType",void 0),Vr=g3=b([H("esri.layers.support.source.JoinTableDataSource")],Vr);let Hv=null;function p7(){return Hv||(Hv=Uc({types:b3()})),Hv}let Wv=null;function b3(){return Wv||(Wv={key:"type",base:null,typeMap:{"data-layer":Jr,"map-layer":Nh}}),Wv}const sJ={key:"type",base:null,typeMap:{"join-table":Vr,"query-table":go,raster:jh,table:Ll}};let Jr=v3=class extends ge{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new v3({fields:e,dataSource:t})}};b([Ue({dataLayer:"data-layer"})],Jr.prototype,"type",void 0),b([S({type:[Cg],json:{write:!0}})],Jr.prototype,"fields",void 0),b([S({types:sJ,json:{write:!0}})],Jr.prototype,"dataSource",void 0),Jr=v3=b([H("esri.layers.support.source.DataLayerSource")],Jr),Jr.from=gi(Jr);var w3;const d7=new ot({upperLeft:"upper-left",lowerLeft:"lower-left"});let Dl=w3=class extends ge{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new w3(le({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};b([S({type:Mt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Dl.prototype,"extent",void 0),b([S({type:["view","edit"],json:{write:!0}})],Dl.prototype,"mode",void 0),b([S({type:String,json:{read:d7.read,write:d7.write}})],Dl.prototype,"originPosition",void 0),b([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Dl.prototype,"tolerance",void 0),Dl=w3=b([H("esri.rest.support.QuantizationParameters")],Dl);const Ik=Dl;var _3;const f7=new ot({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Hs=_3=class extends ge{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=le(e))}clone(){return new _3({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:le(this.statisticParameters)})}};b([S({type:Number,json:{write:!0}})],Hs.prototype,"maxPointCount",void 0),b([S({type:Number,json:{write:!0}})],Hs.prototype,"maxRecordCount",void 0),b([S({type:Number,json:{write:!0}})],Hs.prototype,"maxVertexCount",void 0),b([S({type:String,json:{write:!0}})],Hs.prototype,"onStatisticField",void 0),b([S({type:String,json:{write:!0}})],Hs.prototype,"outStatisticFieldName",void 0),b([S({type:String,json:{read:{source:"statisticType",reader:f7.read},write:{target:"statisticType",writer:f7.write}}})],Hs.prototype,"statisticType",void 0),b([S({type:Object})],Hs.prototype,"statisticParameters",void 0),b([ke("statisticParameters")],Hs.prototype,"writeStatisticParameters",null),Hs=_3=b([H("esri.rest.support.StatisticDefinition")],Hs);const Tk=Hs;var _c;const nJ=new ot({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),oJ=new ot({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let He=_c=class extends ge{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return f5(_c,e)}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const s in e){const l=e[s];Array.isArray(l)?i[s]=l.map(d=>d instanceof Date?d.getTime():d):l instanceof Date?i[s]=l.getTime():i[s]=l}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new _c(le({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:X(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};He.MAX_MAX_RECORD_COUNT_FACTOR=5,b([S({json:{write:!0}})],He.prototype,"aggregateIds",void 0),b([S({type:Boolean,json:{write:!0}})],He.prototype,"cacheHint",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],He.prototype,"compactGeometryEnabled",void 0),b([S({json:{write:!0}})],He.prototype,"datumTransformation",void 0),b([yt("datumTransformation")],He.prototype,"castDatumTransformation",null),b([S({type:Boolean,json:{default:!1,write:!0}})],He.prototype,"defaultSpatialReferenceEnabled",void 0),b([S({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],He.prototype,"distance",void 0),b([S({type:Jr,json:{write:!0}})],He.prototype,"dynamicDataSource",void 0),b([S({type:String,json:{write:!0}})],He.prototype,"formatOf3DObjects",void 0),b([S({type:String,json:{write:!0}})],He.prototype,"gdbVersion",void 0),b([S({types:Zu,json:{read:nl,write:!0}})],He.prototype,"geometry",void 0),b([S({type:Number,json:{write:!0}})],He.prototype,"geometryPrecision",void 0),b([S({type:[String],json:{write:!0}})],He.prototype,"groupByFieldsForStatistics",void 0),b([S({type:String,json:{write:!0}})],He.prototype,"having",void 0),b([S({type:Date})],He.prototype,"historicMoment",void 0),b([ke("historicMoment")],He.prototype,"writeHistoricMoment",null),b([S({type:Number,json:{write:!0}})],He.prototype,"maxAllowableOffset",void 0),b([S({type:Number,cast:e=>e<1?1:e>_c.MAX_MAX_RECORD_COUNT_FACTOR?_c.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],He.prototype,"maxRecordCountFactor",void 0),b([S({type:["xyFootprint"],json:{write:!0}})],He.prototype,"multipatchOption",void 0),b([S({type:Number,json:{read:{source:"resultRecordCount"}}})],He.prototype,"num",void 0),b([S({json:{write:!0}})],He.prototype,"objectIds",void 0),b([S({type:[String],json:{write:!0}})],He.prototype,"orderByFields",void 0),b([S({type:[String],json:{write:!0}})],He.prototype,"outFields",void 0),b([S({type:it,json:{name:"outSR",write:!0}})],He.prototype,"outSpatialReference",void 0),b([S({type:[Tk],json:{write:{enabled:!0,overridePolicy(){return{enabled:X(this.outStatistics)&&this.outStatistics.length>0}}}}})],He.prototype,"outStatistics",void 0),b([S({json:{write:!0}})],He.prototype,"parameterValues",void 0),b([ke("parameterValues")],He.prototype,"writeParameterValues",null),b([S({type:Be,json:{write:!0}})],He.prototype,"pixelSize",void 0),b([S({type:Ik,json:{write:!0}})],He.prototype,"quantizationParameters",void 0),b([S({type:[Object],json:{write:!0}})],He.prototype,"rangeValues",void 0),b([S({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],He.prototype,"relationParameter",void 0),b([S({type:String,json:{write:!0}})],He.prototype,"resultType",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],He.prototype,"returnCentroid",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],He.prototype,"returnDistinctValues",void 0),b([S({type:Boolean,json:{default:!0,write:!0}})],He.prototype,"returnExceededLimitFeatures",void 0),b([S({type:Boolean,json:{write:!0}})],He.prototype,"returnGeometry",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],He.prototype,"returnQueryGeometry",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],He.prototype,"returnM",void 0),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],He.prototype,"returnZ",void 0),b([S({type:it,json:{write:!0}})],He.prototype,"sourceSpatialReference",void 0),b([Ue(nJ,{ignoreUnknown:!1,name:"spatialRel"})],He.prototype,"spatialRelationship",void 0),b([S({type:Number,json:{read:{source:"resultOffset"}}})],He.prototype,"start",void 0),b([ke("start"),ke("num")],He.prototype,"writeStart",null),b([S({type:String,json:{write:!0}})],He.prototype,"sqlFormat",void 0),b([S({type:String,json:{write:!0}})],He.prototype,"text",void 0),b([S({type:Qn,json:{write:!0}})],He.prototype,"timeExtent",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],He.prototype,"timeReferenceUnknownClient",void 0),b([Ue(oJ,{ignoreUnknown:!1}),S({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],He.prototype,"units",void 0),b([S({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start>0}}}}})],He.prototype,"where",void 0),b([ke("where")],He.prototype,"writeWhere",null),He=_c=b([H("esri.rest.support.Query")],He);const hr=He;var x3;let Qt=x3=class extends ge{constructor(e){super(e),this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new x3(le({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};b([S({type:Jr,json:{write:!0}})],Qt.prototype,"dynamicDataSource",void 0),b([S({type:String,json:{write:!0}})],Qt.prototype,"gdbVersion",void 0),b([S({type:Number,json:{write:!0}})],Qt.prototype,"geometryPrecision",void 0),b([S({type:Date})],Qt.prototype,"historicMoment",void 0),b([ke("historicMoment")],Qt.prototype,"_writeHistoricMoment",null),b([S({type:Number,json:{write:!0}})],Qt.prototype,"maxAllowableOffset",void 0),b([S({type:[Number],json:{write:!0}})],Qt.prototype,"objectIds",void 0),b([S({type:[String],json:{write:!0}})],Qt.prototype,"orderByFields",void 0),b([S({type:[String],json:{write:!0}})],Qt.prototype,"outFields",void 0),b([S({type:it,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Qt.prototype,"outSpatialReference",void 0),b([S({json:{write:!0}})],Qt.prototype,"relationshipId",void 0),b([S({type:Number,json:{read:{source:"resultOffset"}}})],Qt.prototype,"start",void 0),b([ke("start"),ke("num")],Qt.prototype,"writeStart",null),b([S({type:Number,json:{read:{source:"resultRecordCount"}}})],Qt.prototype,"num",void 0),b([S({json:{write:!0}})],Qt.prototype,"returnGeometry",void 0),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Qt.prototype,"returnM",void 0),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Qt.prototype,"returnZ",void 0),b([S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Qt.prototype,"where",void 0),Qt=x3=b([H("esri.rest.support.RelationshipQuery")],Qt),Qt.from=gi(Qt);const Hu=Qt,aJ=96;function $he(e,t){const i=t||e.extent,s=e.width,l=tp(i&&i.spatialReference);return i&&s?i.width/s*l*CG*aJ:0}function Ihe(e){var t;const i=e.layer;return"floorInfo"in i&&(t=i.floorInfo)!=null&&t.floorField&&"floors"in e.view?Ek(e.view.floors,i.floorInfo.floorField):null}function The(e,t){var i;return"floorInfo"in t&&(i=t.floorInfo)!=null&&i.floorField?Ek(e,t.floorInfo.floorField):null}function Ehe(e,t){const{definitionExpression:i}=t;return e?i?`(${i}) AND (${e})`:e:i}function Ek(e,t){if(e==null||!e.length)return null;const i=e.filter(s=>s!=="").map(s=>`'${s}'`);return i.push("''"),`${t} IN (${i.join(",")}) OR ${t} IS NULL`}function khe(e,t){return t?Te(J({},t),{query:J(J({},e),t.query)}):{query:e}}function As(e){return typeof e=="string"?Ri(e):e}function lJ(e,t,i){const s={};for(const l in e){if(l==="declaredClass")continue;const d=e[l];if(d!=null&&typeof d!="function")if(Array.isArray(d)){s[l]=[];for(let y=0;y<d.length;y++)s[l][y]=lJ(d[y])}else if(typeof d=="object")if(d.toJSON){const y=d.toJSON(i&&i[l]);s[l]=t?y:JSON.stringify(y)}else s[l]=t?d:JSON.stringify(d);else s[l]=d}return s}function Zd(e){const t={};for(const i in e){if(i==="declaredClass")continue;const s=e[i];if(s!=null&&typeof s!="function")if(Array.isArray(s)){t[i]=[];for(let l=0;l<s.length;l++)t[i][l]=Zd(s[l])}else typeof s=="object"?s.toJSON&&(t[i]=JSON.stringify(s)):t[i]=s}return t}function uJ(e){const t=e.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.keywords&&(t.keywords=t.keywords.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}function hJ(e,t){const i={};for(const s of e){const{parentObjectId:l,parentGlobalId:d,attachmentInfos:y}=s;for(const g of y){const{id:_}=g,M=$F(ZF(`${t}/${l}/attachments/${_}`)),E=ak.fromJSON(g);E.set({url:M,parentObjectId:l,parentGlobalId:d}),i[l]?i[l].push(E):i[l]=[E]}}return i}function cJ(e,t,i){let s={query:Zd(J(Te(J({},e.query),{f:"json"}),uJ(t)))};return i&&(s=Te(J(J({},i),s),{query:J(J({},i.query),s.query)})),Ht(e.path+"/queryAttachments",s)}async function pJ(e,t,i){const s=As(e);return cJ(s,xm.from(t),J({},i)).then(l=>hJ(l.data.attachmentGroups,s.path))}const oc={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Ir({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:it.WebMercator}),minus180Line:new Ir({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:it.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Ir({paths:[[[180,-180],[180,180]]],spatialReference:it.WGS84}),minus180Line:new Ir({paths:[[[-180,-180],[-180,180]]],spatialReference:it.WGS84})}};function bu(e,t){return Math.ceil((e-t)/(2*t))}function kk(e,t){const i=B0(e);for(const s of i)for(const l of s)l[0]+=t;return e}function B0(e){return Mu(e)?e.rings:e.paths}function Ahe(e){const t=e!=null&&e.isWebMercator?102100:4326;return[oc[t].minX,oc[t].maxX]}async function dJ(e,t,i,s){const l=typeof e=="string"?Ri(e):e,d=t[0].spatialReference,y=Te(J({},s),{query:Te(J({},l.query),{f:"json",sr:JSON.stringify(d),target:JSON.stringify({geometryType:zd(t[0]),geometries:t}),cutter:JSON.stringify(i)})}),g=await Ht(l.path+"/cut",y),{cutIndexes:_,geometries:M=[]}=g.data;return{cutIndexes:_,geometries:M.map(E=>{const O=nl(E);return O.spatialReference=d,O})}}async function fJ(e,t,i){const s=typeof e=="string"?Ri(e):e,l=t[0].spatialReference,d=zd(t[0]),y=Te(J({},i),{query:Te(J({},s.query),{f:"json",sr:l.wkid?l.wkid:JSON.stringify(l),geometries:JSON.stringify(yJ(t))})});return mJ((await Ht(s.path+"/simplify",y)).data,d,l)}function yJ(e){return{geometryType:zd(e[0]),geometries:e.map(t=>t.toJSON())}}function mJ(e,t,i){const s=QD(t);return e.map(l=>{const d=s.fromJSON(l);return d.spatialReference=i,d})}const gJ=Se.getLogger("esri.geometry.support.normalizeUtils");function vJ(e){return e.type==="polygon"}function bJ(e){return e[0].type==="polygon"}function wJ(e){return e[0].type==="polyline"}function _J(e,t){if(!(e instanceof Ir||e instanceof Ts)){const l="straightLineDensify: the input geometry is neither polyline nor polygon";throw gJ.error(l),new re(l)}const i=B0(e),s=[];for(const l of i){const d=[];s.push(d),d.push([l[0][0],l[0][1]]);for(let y=0;y<l.length-1;y++){const g=l[y][0],_=l[y][1],M=l[y+1][0],E=l[y+1][1],O=Math.sqrt((M-g)*(M-g)+(E-_)*(E-_)),P=(E-_)/O,j=(M-g)/O,R=O/t;if(R>1){for(let te=1;te<=R-1;te++){const ne=te*t,he=j*ne+g,se=P*ne+_;d.push([he,se])}const z=(O+Math.floor(R-1)*t)/2,q=j*z+g,Y=P*z+_;d.push([q,Y])}d.push([M,E])}}return vJ(e)?new Ts({rings:s,spatialReference:e.spatialReference}):new Ir({paths:s,spatialReference:e.spatialReference})}function y7(e,t,i){if(t){const s=_J(e,1e6);e=zp(s,!0)}return i&&(e=kk(e,i)),e}function m7(e,t,i){if(Array.isArray(e)){const s=e[0];if(s>t){const l=bu(s,t);e[0]=s+l*(-2*t)}else if(s<i){const l=bu(s,i);e[0]=s+l*(-2*i)}}else{const s=e.x;if(s>t){const l=bu(s,t);e=e.clone().offset(l*(-2*t),0)}else if(s<i){const l=bu(s,i);e=e.clone().offset(l*(-2*i),0)}}return e}function xJ(e,t){let i=-1;for(let s=0;s<t.cutIndexes.length;s++){const l=t.cutIndexes[s],d=t.geometries[s],y=B0(d);for(let g=0;g<y.length;g++){const _=y[g];_.some(M=>{if(M[0]<180)return!0;{let E=0;for(let P=0;P<_.length;P++){const j=_[P][0];E=j>E?j:E}E=Number(E.toFixed(9));const O=-360*bu(E,180);for(let P=0;P<_.length;P++){const j=d.getPoint(g,P);d.setPoint(g,P,j.clone().offset(O,0))}return!0}})}if(l===i){if(bJ(e))for(const g of B0(d))e[l]=e[l].addRing(g);else if(wJ(e))for(const g of B0(d))e[l]=e[l].addPath(g)}else i=l,e[l]=d}return e}async function R4(e,t,i){var s;if(!Array.isArray(e))return R4([e],t);const l=(s=t==null?void 0:t.url)!=null?s:Ct.geometryServiceUrl;let d,y,g,_,M,E,O,P,j=0;const R=[],z=[];for(const se of e)if(ce(se))z.push(se);else if(d||(d=se.spatialReference,y=ln(d),g=d.isWebMercator,E=g?102100:4326,_=oc[E].maxX,M=oc[E].minX,O=oc[E].plus180Line,P=oc[E].minus180Line),y)if(se.type==="mesh")z.push(se);else if(se.type==="point")z.push(m7(se.clone(),_,M));else if(se.type==="multipoint"){const ue=se.clone();ue.points=ue.points.map(Ee=>m7(Ee,_,M)),z.push(ue)}else if(se.type==="extent"){const ue=se.clone()._normalize(!1,!1,y);z.push(ue.rings?new Ts(ue):ue)}else if(se.extent){const ue=se.extent,Ee=bu(ue.xmin,M)*(2*_);let Oe=Ee===0?se.clone():kk(se.clone(),Ee);ue.offset(Ee,0),ue.intersects(O)&&ue.xmax!==_?(j=ue.xmax>j?ue.xmax:j,Oe=y7(Oe,g),R.push(Oe),z.push("cut")):ue.intersects(P)&&ue.xmin!==M?(j=ue.xmax*(2*_)>j?ue.xmax*(2*_):j,Oe=y7(Oe,g,360),R.push(Oe),z.push("cut")):z.push(Oe)}else z.push(se.clone());else z.push(se);let q=bu(j,_),Y=-90;const te=q,ne=new Ir;for(;q>0;){const se=360*q-180;ne.addPath([[se,Y],[se,-1*Y]]),Y*=-1,q--}if(R.length>0&&te>0){const se=xJ(R,await dJ(l,R,ne,i)),ue=[],Ee=[];for(let Ne=0;Ne<z.length;Ne++){const je=z[Ne];if(je!=="cut")Ee.push(je);else{const De=se.shift(),rt=e[Ne];X(rt)&&rt.type==="polygon"&&rt.rings&&rt.rings.length>1&&De.rings.length>=rt.rings.length?(ue.push(De),Ee.push("simplify")):Ee.push(g?Qa(De):De)}}if(!ue.length)return Ee;const Oe=await fJ(l,ue,i),Le=[];for(let Ne=0;Ne<Ee.length;Ne++){const je=Ee[Ne];je!=="simplify"?Le.push(je):Le.push(g?Qa(Oe.shift()):Oe.shift())}return Le}const he=[];for(let se=0;se<z.length;se++){const ue=z[se];if(ue!=="cut")he.push(ue);else{const Ee=R.shift();he.push(g===!0?Qa(Ee):Ee)}}return Promise.resolve(he)}function Ohe(e,t){const i=ln(t);if(i){const[s,l]=i.valid,d=l-s;if(e<s)for(;e<s;)e+=d;if(e>l)for(;e>l;)e-=d}return e}var Fa;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(Fa||(Fa={}));const g7=4294967296,SJ=new TextDecoder("utf-8"),MJ=de("safari")||de("ios")?6:de("ff")?12:32;class Eu{constructor(t,i,s=0,l=t?t.byteLength:0){this._tag=0,this._dataType=Fa.unknown,this._init(t,i,s,l)}_init(t,i,s,l){this._data=t,this._dataView=i,this._pos=s,this._end=l}clone(){return new Eu(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,i=this._pos,s=t.getUint32(i,!0)+t.getUint32(i+4,!0)*g7;return this._skip(8),s}getSFixed64(){const t=this._dataView,i=this._pos,s=t.getUint32(i,!0)+t.getInt32(i+4,!0)*g7;return this._skip(8),s}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),i=this._pos,s=this._toString(this._data,i,i+t);return this._skip(t),s}getBytes(){const t=this._getLength(),i=this._pos,s=this._toBytes(this._data,i,i+t);return this._skip(t),s}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,i,s,l){const d=this.getMessage(),y=t(d,i,s,l);return d.release(),y}processMessage(t){const i=this.getMessage(),s=t(i);return i.release(),s}getMessage(){const t=this._getLength(),i=Eu.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),i}release(){Eu.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case Fa.varint:this._decodeVarint();break;case Fa.fixed64:this._skip(8);break;case Fa.delimited:this._skip(this._getLength());break;case Fa.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let i,s=this._pos,l=0;if(this._end-s>=10)do{if(i=t[s++],l|=127&i,(128&i)==0||(i=t[s++],l|=(127&i)<<7,(128&i)==0)||(i=t[s++],l|=(127&i)<<14,(128&i)==0)||(i=t[s++],l|=(127&i)<<21,(128&i)==0)||(i=t[s++],l+=268435456*(127&i),(128&i)==0)||(i=t[s++],l+=34359738368*(127&i),(128&i)==0)||(i=t[s++],l+=4398046511104*(127&i),(128&i)==0)||(i=t[s++],l+=562949953421312*(127&i),(128&i)==0)||(i=t[s++],l+=72057594037927940*(127&i),(128&i)==0)||(i=t[s++],l+=9223372036854776e3*(127&i),(128&i)==0))break;throw new Error("Varint too long!")}while(0);else{let d=1;for(;s!==this._end&&(i=t[s],(128&i)!=0);)++s,l+=(127&i)*d,d*=128;if(s===this._end)throw new Error("Varint overrun!");++s,l+=i*d}return this._pos=s,l}_decodeSVarint(){const t=this._decodeVarint();return t%2?-(t+1)/2:t/2}_getLength(){if(this._dataType!==Fa.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,i,s){if((s=Math.min(this._end,s))-i>MJ){const y=t.subarray(i,s);return SJ.decode(y)}let l="",d="";for(let y=i;y<s;++y){const g=t[y];128&g?d+="%"+g.toString(16):(l+=decodeURIComponent(d)+String.fromCharCode(g),d="")}return d.length&&(l+=decodeURIComponent(d)),l}_toBytes(t,i,s){return s=Math.min(this._end,s),new Uint8Array(t.buffer,i,s-i)}}Eu.pool=new hn(Eu,null,e=>{e._data=null,e._dataView=null});class Nr{constructor(t=[],i=[],s=!1){this.lengths=t!=null?t:[],this.coords=i!=null?i:[],this.hasIndeterminateRingOrder=s}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,i)=>t+i)}forEachVertex(t){let i=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let s=0;s<this.lengths.length;s++){const l=this.lengths[s];for(let d=0;d<l;d++)t(this.coords[2*(d+i)],this.coords[2*(d+i)+1]);i+=l}}clone(t){return t?(t.set(this.coords),new Nr(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new Nr(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}class Kn{constructor(t=null,i={},s,l){this.geometry=t,this.attributes=i,this.centroid=s,this.objectId=l,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new Kn(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function $J(e){return!(ce(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class Che extends Kn{}class Pg{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new Pg;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}const Ak=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class Phe{constructor(t){this.options=t,this.geometryTypes=Ak,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new Pg}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this.options.sourceSpatialReference||!t.spatialReference||jr(t.spatialReference,this.options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const i=Cc(this.options.sourceSpatialReference)/Cc(t.spatialReference);if(i!==1)for(const s of t.features){if(!$J(s))continue;const l=s.geometry.coords;for(let d=2;d<l.length;d+=3)l[d]*=i}}addFeature(t,i){t.features.push(i)}createFeature(){return new Kn}createSpatialReference(){return{wkid:0}}createGeometry(){return new Nr}addField(t,i){t.fields.push(i)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((i,s)=>i+s,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,i){t.coords[this._coordinatePtr++]=i}addCoordinatePoint(t,i){t.coords.push(i)}addLength(t,i){t.lengths.push(i)}addQueryGeometry(t,i){t.queryGeometry=i.queryGeometry,t.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new Nr}}const v7=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],b7=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],w7=["upperLeft","lowerLeft"];function _7(e){return e>=v7.length?null:v7[e]}function IJ(e){return e>=b7.length?null:b7[e]}function x7(e){return e>=w7.length?null:w7[e]}function S7(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function TJ(e,t,i){const l=t.createPointGeometry(i);for(;e.next();)switch(e.tag()){case 3:{const d=e.getUInt32(),y=e.pos()+d;let g=0;for(;e.pos()<y;)t.addCoordinatePoint(l,e.getSInt64(),g++);break}default:e.skip()}return l}function EJ(e,t,i){const d=t.createGeometry(i),y=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const g=e.getUInt32(),_=e.pos()+g;let M=0;for(;e.pos()<_;)t.addLength(d,e.getUInt32(),M++);break}case 3:{const g=e.getUInt32(),_=e.pos()+g;let M=0;for(t.allocateCoordinates(d);e.pos()<_;)t.addCoordinate(d,e.getSInt64(),M),M++,M===y&&(M=0);break}default:e.skip()}return d}function kJ(e){const l=new Nr;let d="esriGeometryPoint";for(;e.next();)switch(e.tag()){case 2:{const y=e.getUInt32(),g=e.pos()+y;for(;e.pos()<g;)l.lengths.push(e.getUInt32());break}case 3:{const y=e.getUInt32(),g=e.pos()+y;for(;e.pos()<g;)l.coords.push(e.getSInt64());break}case 1:d=Ak[e.getEnum()];break;default:e.skip()}return{queryGeometry:l,queryGeometryType:d}}function AJ(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function OJ(e){const g={type:_7(0)};for(;e.next();)switch(e.tag()){case 1:g.name=e.getString();break;case 2:g.type=_7(e.getEnum());break;case 3:g.alias=e.getString();break;case 4:g.sqlType=IJ(e.getEnum());break;case 5:e.skip();break;case 6:g.defaultValue=e.getString();break;default:e.skip()}return g}function CJ(e){const s={};for(;e.next();)switch(e.tag()){case 1:s.name=e.getString();break;case 2:s.isSystemMaintained=e.getBool();break;default:e.skip()}return s}function PJ(e,t,i,s){const g=t.createFeature(i);let _=0;for(;e.next();)switch(e.tag()){case 1:{const M=s[_++].name;g.attributes[M]=e.processMessage(AJ);break}case 2:g.geometry=e.processMessageWithArgs(EJ,t,i);break;case 4:g.centroid=e.processMessageWithArgs(TJ,t,i);break;default:e.skip()}return g}function NJ(e){const d=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:d[0]=e.getDouble();break;case 2:d[1]=e.getDouble();break;case 4:d[2]=e.getDouble();break;case 3:d[3]=e.getDouble();break;default:e.skip()}return d}function jJ(e){const d=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:d[0]=e.getDouble();break;case 2:d[1]=e.getDouble();break;case 4:d[2]=e.getDouble();break;case 3:d[3]=e.getDouble();break;default:e.skip()}return d}function FJ(e){const l={originPosition:x7(0)};for(;e.next();)switch(e.tag()){case 1:l.originPosition=x7(e.getEnum());break;case 2:l.scale=e.processMessage(NJ);break;case 3:l.translate=e.processMessage(jJ);break;default:e.skip()}return l}function RJ(e){const l={};for(;e.next();)switch(e.tag()){case 1:l.shapeAreaFieldName=e.getString();break;case 2:l.shapeLengthFieldName=e.getString();break;case 3:l.units=e.getString();break;default:e.skip()}return l}function LJ(e,t){const g=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:g.wkid=e.getUInt32();break;case 5:g.wkt=e.getString();break;case 2:g.latestWkid=e.getUInt32();break;case 3:g.vcsWkid=e.getUInt32();break;case 4:g.latestVcsWkid=e.getUInt32();break;default:e.skip()}return g}function DJ(e,t){const z=t.createFeatureResult();z.geometryType=S7(t,0);let q=!1;for(;e.next();)switch(e.tag()){case 1:z.objectIdFieldName=e.getString();break;case 3:z.globalIdFieldName=e.getString();break;case 4:z.geohashFieldName=e.getString();break;case 5:z.geometryProperties=e.processMessage(RJ);break;case 7:z.geometryType=S7(t,e.getEnum());break;case 8:z.spatialReference=e.processMessageWithArgs(LJ,t);break;case 10:z.hasZ=e.getBool();break;case 11:z.hasM=e.getBool();break;case 12:z.transform=e.processMessage(FJ);break;case 9:{const Y=e.getBool();z.exceededTransferLimit=Y;break}case 13:t.addField(z,e.processMessage(OJ));break;case 15:q||(t.prepareFeatures(z),q=!0),t.addFeature(z,e.processMessageWithArgs(PJ,t,z,z.fields));break;case 2:z.uniqueIdField=e.processMessage(CJ);break;default:e.skip()}return t.finishFeatureResult(z),z}function zJ(e,t){const l={};let d=null;for(;e.next();)switch(e.tag()){case 4:d=e.processMessageWithArgs(kJ);break;case 1:l.featureResult=e.processMessageWithArgs(DJ,t);break;default:e.skip()}return X(d)&&l.featureResult&&t.addQueryGeometry(l,d),l}function VJ(e,t){try{const s=new Eu(new Uint8Array(e),new DataView(e)),l={};for(;s.next();)s.tag()===2?l.queryResult=s.processMessageWithArgs(zJ,t):s.skip();return l}catch(i){throw new re("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function GJ(e,t){const i=VJ(e,t),s=i.queryResult.featureResult,l=i.queryResult.queryGeometry,d=i.queryResult.queryGeometryType;if(s&&s.features&&s.features.length&&s.objectIdFieldName){const y=s.objectIdFieldName;for(const g of s.features)g.attributes&&(g.objectId=g.attributes[y])}return s&&(s.queryGeometry=l,s.queryGeometryType=d),s}function Im(e,t,i){if(!i||!i.features||!i.hasZ)return;const s=eE(i.geometryType,t,e.outSpatialReference);if(!ce(s))for(const l of i.features)s(l.geometry)}const M7="Layer does not support extent calculation.";function Ok(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function Ck(e,t){const i=e.geometry,s=e.toJSON();delete s.compactGeometryEnabled,delete s.defaultSpatialReferenceEnabled;const l=s,d=e.outSpatialReference;let y,g;if(X(i)&&(y=i.spatialReference,g=i.spatialReference.wkid||JSON.stringify(i.spatialReference),l.geometryType=zd(i),l.geometry=Ok(i,e.compactGeometryEnabled),l.inSR=g),s.groupByFieldsForStatistics&&(l.groupByFieldsForStatistics=s.groupByFieldsForStatistics.join(",")),s.objectIds&&(l.objectIds=s.objectIds.join(",")),s.orderByFields&&(l.orderByFields=s.orderByFields.join(",")),!s.outFields||!s.returnDistinctValues&&(t!=null&&t.returnCountOnly||t!=null&&t.returnExtentOnly||t!=null&&t.returnIdsOnly)?delete l.outFields:s.outFields.indexOf("*")!==-1?l.outFields="*":l.outFields=s.outFields.join(","),s.outSR?l.outSR=s.outSR.wkid||JSON.stringify(s.outSR):i&&(s.returnGeometry||s.returnCentroid)&&(l.outSR=l.inSR),s.returnGeometry&&delete s.returnGeometry,s.outStatistics&&(l.outStatistics=JSON.stringify(s.outStatistics)),s.pixelSize&&(l.pixelSize=JSON.stringify(s.pixelSize)),s.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&X(y)&&X(e.quantizationParameters)&&X(e.quantizationParameters.extent)&&y.equals(e.quantizationParameters.extent.spatialReference)&&delete s.quantizationParameters.extent.spatialReference,l.quantizationParameters=JSON.stringify(s.quantizationParameters)),s.parameterValues&&(l.parameterValues=JSON.stringify(s.parameterValues)),s.rangeValues&&(l.rangeValues=JSON.stringify(s.rangeValues)),s.dynamicDataSource&&(l.layer=JSON.stringify({source:s.dynamicDataSource}),delete s.dynamicDataSource),s.timeExtent){const _=s.timeExtent,{start:M,end:E}=_;M==null&&E==null||(l.time=M===E?M:`${M==null?"null":M},${E==null?"null":E}`),delete s.timeExtent}return e.defaultSpatialReferenceEnabled&&X(y)&&X(d)&&y.equals(d)&&(l.defaultSR=l.inSR,delete l.inSR,delete l.outSR),l}async function Pk(e,t,i,s){const l=X(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await sp(e,t,"json",s);return Im(t,i,l.data),l}async function Nk(e,t,i,s){if(X(t.timeExtent)&&t.timeExtent.isEmpty)return Promise.resolve({data:i.createFeatureResult()});const l=await jk(e,t,s),d=l;return d.data=GJ(l.data,i),d}function jk(e,t,i){return sp(e,t,"pbf",i)}function Fk(e,t,i){return X(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):sp(e,t,"json",i,{returnIdsOnly:!0})}function Rk(e,t,i){return X(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):sp(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function Lk(e,t,i){return X(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):sp(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(s=>{const l=s.data;if(l.hasOwnProperty("extent"))return s;if(l.features)throw new Error(M7);if(l.hasOwnProperty("count"))throw new Error(M7);return s})}function sp(e,t,i,s={},l={}){const d=typeof e=="string"?Ri(e):e,y=t.geometry?[t.geometry]:[];return s.responseType=i==="pbf"?"array-buffer":"json",R4(y,null,s).then(g=>{const _=g&&g[0];X(_)&&((t=t.clone()).geometry=_);const M=Zd(J(J(Te(J({},d.query),{f:i}),l),Ck(t,l)));return Ht(rl(d.path,"query"),Te(J({},s),{query:J(J({},M),s.query)}))})}var Nhe=Object.freeze(Object.defineProperty({__proto__:null,encodeGeometry:Ok,executeQuery:Pk,executeQueryForCount:Rk,executeQueryForExtent:Lk,executeQueryForIds:Fk,executeQueryPBF:Nk,executeQueryPBFBuffer:jk,queryToQueryStringParameters:Ck,runQuery:sp},Symbol.toStringTag,{value:"Module"}));async function qJ(e,t,i){const s=As(e);return Rk(s,hr.from(t),J({},i)).then(l=>l.data.count)}async function UJ(e,t,i){const s=As(e);return Lk(s,hr.from(t),J({},i)).then(l=>({count:l.data.count,extent:Mt.fromJSON(l.data.extent)}))}async function BJ(e,t,i){const s=As(e);return Fk(s,hr.from(t),J({},i)).then(l=>l.data.objectIds)}var S3;const M3=new ot({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Ni=S3=class extends ge{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const i=it.fromJSON(t.spatialReference),s=[];for(let l=0;l<e.length;l++){const d=e[l],y=rs.fromJSON(d),g=d.geometry&&d.geometry.spatialReference;X(y.geometry)&&!g&&(y.geometry.spatialReference=i);const _=d.aggregateGeometries,M=y.aggregateGeometries;if(_&&X(M))for(const E in M){const O=M[E],P=_[E],j=P==null?void 0:P.spatialReference;X(O)&&!j&&(O.spatialReference=i)}s.push(y)}return s}writeGeometryType(e,t,i,s){if(e)return void M3.write(e,t,i,s);const{features:l}=this;if(l){for(const d of l)if(d&&X(d.geometry))return void M3.write(d.geometry.type,t,i,s)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,s=nl(e);return!i&&t.spatialReference&&(s.spatialReference=it.fromJSON(t.spatialReference)),s}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const s of i)if(s&&X(s.geometry)&&s.geometry.spatialReference)return void(t.spatialReference=s.geometry.spatialReference.toJSON())}}clone(){return new S3(this.cloneProperties())}cloneProperties(){return le({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const s=t.features[i];if(s.geometry){const l=e&&e[i];s.geometry=l&&l.toJSON()||s.geometry}}return t}quantize(e){const{scale:[t,i],translate:[s,l]}=e,d=M=>Math.round((M-s)/t),y=M=>Math.round((l-M)/i),g=this.features,_=this._getQuantizationFunction(this.geometryType,d,y);for(let M=0,E=g.length;M<E;M++)_(g[M].geometry)||(g.splice(M,1),M--,E--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[s,l],scale:[d,y]}=i,g=E=>E*d+s,_=E=>l-E*y,M=this._getHydrationFunction(e,g,_);for(const{geometry:E}of t)X(E)&&M(E);return this.transform=null,this}_quantizePoints(e,t,i){let s,l;const d=[];for(let y=0,g=e.length;y<g;y++){const _=e[y];if(y>0){const M=t(_[0]),E=i(_[1]);M===s&&E===l||(d.push([M-s,E-l]),s=M,l=E)}else s=t(_[0]),l=i(_[1]),d.push([s,l])}return d.length>0?d:null}_getQuantizationFunction(e,t,i){return e==="point"?s=>(s.x=t(s.x),s.y=i(s.y),s):e==="polyline"||e==="polygon"?s=>{const l=Mu(s)?s.rings:s.paths,d=[];for(let y=0,g=l.length;y<g;y++){const _=l[y],M=this._quantizePoints(_,t,i);M&&d.push(M)}return d.length>0?(Mu(s)?s.rings=d:s.paths=d,s):null}:e==="multipoint"?s=>{const l=this._quantizePoints(s.points,t,i);return l.length>0?(s.points=l,s):null}:e==="extent"?s=>s:null}_getHydrationFunction(e,t,i){return e==="point"?s=>{s.x=t(s.x),s.y=i(s.y)}:e==="polyline"||e==="polygon"?s=>{const l=Mu(s)?s.rings:s.paths;let d,y;for(let g=0,_=l.length;g<_;g++){const M=l[g];for(let E=0,O=M.length;E<O;E++){const P=M[E];E>0?(d+=P[0],y+=P[1]):(d=P[0],y=P[1]),P[0]=t(d),P[1]=i(y)}}}:e==="extent"?s=>{s.xmin=t(s.xmin),s.ymin=i(s.ymin),s.xmax=t(s.xmax),s.ymax=i(s.ymax)}:e==="multipoint"?s=>{const l=s.points;let d,y;for(let g=0,_=l.length;g<_;g++){const M=l[g];g>0?(d+=M[0],y+=M[1]):(d=M[0],y=M[1]),M[0]=t(d),M[1]=i(y)}}:void 0}};b([S({type:String,json:{write:!0}})],Ni.prototype,"displayFieldName",void 0),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ni.prototype,"exceededTransferLimit",void 0),b([S({type:[rs],json:{write:!0}})],Ni.prototype,"features",void 0),b([$e("features")],Ni.prototype,"readFeatures",null),b([S({type:[Cg],json:{write:!0}})],Ni.prototype,"fields",void 0),b([S({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:M3.read}}})],Ni.prototype,"geometryType",void 0),b([ke("geometryType")],Ni.prototype,"writeGeometryType",null),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ni.prototype,"hasM",void 0),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ni.prototype,"hasZ",void 0),b([S({types:Zu,json:{write:!0}})],Ni.prototype,"queryGeometry",void 0),b([$e("queryGeometry")],Ni.prototype,"readQueryGeometry",null),b([S({type:it,json:{write:!0}})],Ni.prototype,"spatialReference",void 0),b([ke("spatialReference")],Ni.prototype,"writeSpatialReference",null),b([S({json:{write:!0}})],Ni.prototype,"transform",void 0),Ni=S3=b([H("esri.rest.support.FeatureSet")],Ni),Ni.prototype.toJSON.isDefaultToJSON=!0;const rh=Ni;var jhe=Object.freeze(Object.defineProperty({__proto__:null,default:rh},Symbol.toStringTag,{value:"Module"}));async function Fhe(e,t,i){const s=await Dk(e,t,i);return rh.fromJSON(s)}async function Dk(e,t,i){const s=As(e),l=J({},i),d=hr.from(t),{data:y}=await Pk(s,d,d.sourceSpatialReference,l);return y}function Bi(e,t){return e?t?4:3:t?3:2}const np=Se.getLogger("esri.layers.graphics.featureConversionUtils"),zk={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Vk=(e,t,i,s,l,d)=>{e[i]=l,e[i+1]=d},Tm=(e,t,i,s,l,d)=>{e[i]=l,e[i+1]=d,e[i+2]=t[s+2]},HJ=(e,t,i,s,l,d)=>{e[i]=l,e[i+1]=d,e[i+2]=t[s+3]},Gk=(e,t,i,s,l,d)=>{e[i]=l,e[i+1]=d,e[i+2]=t[s+2],e[i+3]=t[s+3]};function L4(e,t,i,s){if(e){if(i)return t&&s?Gk:Tm;if(t&&s)return HJ}else if(t&&s)return Tm;return Vk}function Jv({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function Kv({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function $7({scale:e,translate:t},i){return i*e[0]+t[0]}function I7({scale:e,translate:t},i){return t[1]-i*e[1]}function Rhe(e,t,i){return e?t?i?V4(e):D4(e):i?z4(e):Ng(e):null}function Ng(e){const t=e.coords;return{x:t[0],y:t[1]}}function qk(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function D4(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function WJ(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function z4(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function JJ(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function V4(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function KJ(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function YJ(e,t,i,s){let l=Ng;i&&s?l=V4:i?l=D4:s&&(l=z4);for(const d of t){const{geometry:y,attributes:g}=d,_=X(y)?l(y):null;e.push({attributes:g,geometry:_})}return e}function Uk(e,t){return e&&t?KJ:e?WJ:t?JJ:qk}function Bk(e,t,i,s,l){const d=Uk(i,s);for(const y of t){const{geometry:g,attributes:_}=y;let M;g&&(M=d(new Nr,g)),e.push(new Kn(M,_,null,_[l]))}return e}function XJ(e,t,i,s){for(const l of t){const{geometry:d,attributes:y}=l;let g;d&&(g=Hk(d,i,s)),e.push({attributes:y,geometry:g})}return e}function Hk(e,t,i){if(ce(e))return null;const s=Bi(t,i),l=[];for(let d=0;d<e.coords.length;d+=s){const y=[];for(let g=0;g<s;g++)y.push(e.coords[d+g]);l.push(y)}return t?i?{points:l,hasZ:t,hasM:i}:{points:l,hasZ:t}:i?{points:l,hasM:i}:{points:l}}function Wk(e,t,i,s,l){const d=Bi(i,s);for(const y of t){const g=y.geometry,_=y.attributes;let M;g&&(M=Jk(new Nr,g,d)),e.push(new Kn(M,_,null,_[l]))}return e}function Jk(e,t,i=Bi(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const s=e.coords;let l=0;for(const d of t.points)for(let y=0;y<i;y++)s[l++]=d[y];return e}function ZJ(e,t,i,s){for(const l of t){const{geometry:d,attributes:y}=l;let g;X(d)&&(g=Kk(d,i,s)),e.push({attributes:y,geometry:g})}return e}function Kk(e,t,i){if(!e)return null;const s=Bi(t,i),{coords:l,lengths:d}=e,y=[];let g=0;for(const _ of d){const M=[];for(let E=0;E<_;E++){const O=[];for(let P=0;P<s;P++)O.push(l[g++]);M.push(O)}y.push(M)}return t?i?{paths:y,hasZ:t,hasM:i}:{paths:y,hasZ:t}:i?{paths:y,hasM:i}:{paths:y}}function Yk(e,t,i,s,l){const d=Bi(i,s);for(const y of t){const g=y.geometry,_=y.attributes;let M;g&&(M=Xk(new Nr,g,d)),e.push(new Kn(M,_,null,_[l]))}return e}function Xk(e,t,i=Bi(t.hasZ,t.hasM)){const{lengths:s,coords:l}=e;let d=0;for(const y of t.paths){for(const g of y)for(let _=0;_<i;_++)l[d++]=g[_];s.push(y.length)}return e}function QJ(e,t,i,s){for(const l of t){const{geometry:d,attributes:y,centroid:g}=l;let _;if(X(d)&&(_=Zk(d,i,s)),X(g)){const M=Ng(g);e.push({attributes:y,centroid:M,geometry:_})}else e.push({attributes:y,geometry:_})}return e}function Zk(e,t,i){if(!e)return null;const s=Bi(t,i),{coords:l,lengths:d}=e,y=[];let g=0;for(const _ of d){const M=[];for(let E=0;E<_;E++){const O=[];for(let P=0;P<s;P++)O.push(l[g++]);M.push(O)}y.push(M)}return t?i?{rings:y,hasZ:t,hasM:i}:{rings:y,hasZ:t}:i?{rings:y,hasM:i}:{rings:y}}function Qk(e,t,i,s,l){for(const d of t){const y=d.geometry,g=d.centroid,_=d.attributes;let M;y&&(M=eA(new Nr,y,i,s)),X(g)?e.push(new Kn(M,_,qk(new Nr,g),_[l])):e.push(new Kn(M,_,null,_[l]))}return e}function eA(e,t,i=t.hasZ,s=t.hasM){return eK(e,t.rings,i,s),e}function eK(e,t,i,s){const l=Bi(i,s),{lengths:d,coords:y}=e;let g=0;d.length=y.length=0;for(const _ of t){for(const M of _)for(let E=0;E<l;E++)y[g++]=M[E];d.push(_.length)}return e}const xc=[],H0=[];function Lhe(e,t,i,s,l){xc[0]=e;const[d]=tA(H0,xc,t,i,s,l);return xc.length=H0.length=0,d}function tA(e,t,i,s,l,d){if(e.length=0,!i){for(const y of t){const g=y.attributes[d];e.push(new Kn(null,y.attributes,null,g))}return e}switch(i){case"esriGeometryPoint":return Bk(e,t,s,l,d);case"esriGeometryMultipoint":return Wk(e,t,s,l,d);case"esriGeometryPolyline":return Yk(e,t,s,l,d);case"esriGeometryPolygon":return Qk(e,t,s,l,d);default:np.error("convertToFeatureSet:unknown-geometry",new re(`Unable to parse unknown geometry type '${i}'`)),e.length=0}return e}function Dhe(e,t,i,s,l,d){const y=e.length;switch(i){case"esriGeometryPoint":Bk(e,t,s,l,d);break;case"esriGeometryMultipoint":Wk(e,t,s,l,d);break;case"esriGeometryPolyline":Yk(e,t,s,l,d);break;case"esriGeometryPolygon":Qk(e,t,s,l,d);break;default:np.error("convertToFeatureSet:unknown-geometry",new re(`Unable to parse unknown geometry type '${i}'`))}for(let g=0;g<t.length;g++)e[g+y].geometryType=i,e[g+y].insertAfter=t[g].insertAfter,e[g+y].groupId=t[g].groupId;return e}function zhe(e,t,i,s){H0[0]=e,rA(xc,H0,t,i,s);const l=xc[0];return xc.length=H0.length=0,l}function Vhe(e,t,i){if(ce(e))return null;const s=new Nr;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&i==null&&(i=e.hasM),U5(e)?Uk(t!=null?t:e.z!=null,i!=null?i:e.m!=null)(s,e):Mu(e)?eA(s,e,t,i):B5(e)?Xk(s,e,Bi(t,i)):q5(e)?Jk(s,e,Bi(t,i)):void np.error("convertFromGeometry:unknown-geometry",new re(`Unable to parse unknown geometry type '${e}'`))}function iA(e,t,i,s){const l=e&&("coords"in e?e:e.geometry);if(ce(l))return null;switch(t){case"esriGeometryPoint":{let d=Ng;return i&&s?d=V4:i?d=D4:s&&(d=z4),d(l)}case"esriGeometryMultipoint":return Hk(l,i,s);case"esriGeometryPolyline":return Kk(l,i,s);case"esriGeometryPolygon":return Zk(l,i,s);default:return void np.error("convertToGeometry:unknown-geometry",new re(`Unable to parse unknown geometry type '${t}'`))}}function tK(e,t){for(const i of t)e.push({attributes:i.attributes});return e}function rA(e,t,i,s,l){if(e.length=0,ce(i))return tK(e,t);switch(i){case"esriGeometryPoint":return YJ(e,t,s,l);case"esriGeometryMultipoint":return XJ(e,t,s,l);case"esriGeometryPolyline":return ZJ(e,t,s,l);case"esriGeometryPolygon":return QJ(e,t,s,l);default:np.error("convertToFeatureSet:unknown-geometry",new re(`Unable to parse unknown geometry type '${i}'`))}return e}function Ghe(e){const{objectIdFieldName:t,spatialReference:i,transform:s,fields:l,hasM:d,hasZ:y,features:g,geometryType:_,exceededTransferLimit:M,uniqueIdField:E,queryGeometry:O,queryGeometryType:P}=e,j={features:rA([],g,_,y,d),fields:l,geometryType:_,objectIdFieldName:t,spatialReference:i,uniqueIdField:E,queryGeometry:iA(O,P,!1,!1)};return s&&(j.transform=s),M&&(j.exceededTransferLimit=M),d&&(j.hasM=d),y&&(j.hasZ=y),j}function qhe(e,t){const i=new Pg,{hasM:s,hasZ:l,features:d,objectIdFieldName:y,spatialReference:g,geometryType:_,exceededTransferLimit:M,transform:E,fields:O}=e;return O&&(i.fields=O),i.geometryType=_,i.objectIdFieldName=y||t,i.spatialReference=g,i.objectIdFieldName?(d&&tA(i.features,d,_,l,s,i.objectIdFieldName),M&&(i.exceededTransferLimit=M),s&&(i.hasM=s),l&&(i.hasZ=l),E&&(i.transform=E),i):(np.error(new re("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function Uhe(e){const{transform:t,features:i,hasM:s,hasZ:l}=e;if(!t)return e;for(const d of i)X(d.geometry)&&I3(d.geometry,d.geometry,s,l,t),X(d.centroid)&&I3(d.centroid,d.centroid,s,l,t);return e.transform=null,e}function Bhe(e,t){const{geometryType:i,features:s,hasM:l,hasZ:d}=t;if(!e)return t;for(let y=0;y<s.length;y++){const g=s[y],_=g.weakClone();_.geometry=new Nr,T7(_.geometry,g.geometry,l,d,i,e),g.centroid&&(_.centroid=new Nr,T7(_.centroid,g.centroid,l,d,"esriGeometryPoint",e)),s[y]=_}return t.transform=e,t}function T7(e,t,i,s,l,d,y=i,g=s){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),ce(t)||!t.coords.length)return null;const _=zk[l],{coords:M,lengths:E}=t,O=Bi(i,s),P=Bi(i&&y,s&&g),j=L4(i,s,y,g);if(!E.length)return j(e.coords,M,0,0,Jv(d,M[0]),Kv(d,M[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=O,e;let R,z,q,Y,te=0,ne=0,he=ne;for(const se of E){if(se<_)continue;let ue=0;ne=he,q=R=Jv(d,M[te]),Y=z=Kv(d,M[te+1]),j(e.coords,M,ne,te,q,Y),ue++,te+=O,ne+=P;for(let Ee=1;Ee<se;Ee++,te+=O)q=Jv(d,M[te]),Y=Kv(d,M[te+1]),q===R&&Y===z||(j(e.coords,M,ne,te,q-R,Y-z),ne+=P,ue++,R=q,z=Y);ue>=_&&(e.lengths.push(ue),he=ne)}return e.coords.length=he,e.coords.length?e:null}function Hhe(e,t,i,s,l,d,y=i,g=s){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const _=zk[l],{coords:M,lengths:E}=t,O=Bi(i,s),P=Bi(i&&y,s&&g),j=L4(i,s,y,g);if(!E.length)return j(e.coords,M,0,0,M[0],M[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=O,e;let R=0;const z=d*d;for(const q of E){if(q<_){R+=q*O;continue}const Y=e.coords.length/P,te=R,ne=R+(q-1)*O;j(e.coords,M,e.coords.length,te,M[te],M[te+1]),$3(e.coords,M,O,z,j,te,ne),j(e.coords,M,e.coords.length,ne,M[ne],M[ne+1]);const he=e.coords.length/P-Y;he>=_?e.lengths.push(he):e.coords.length=Y*P,R+=q*O}return e.coords.length?e:null}function iK(e,t,i,s){const l=e[t],d=e[t+1],y=e[i],g=e[i+1],_=e[s],M=e[s+1];let E=y,O=g,P=_-E,j=M-O;if(P!==0||j!==0){const R=((l-E)*P+(d-O)*j)/(P*P+j*j);R>1?(E=_,O=M):R>0&&(E+=P*R,O+=j*R)}return P=l-E,j=d-O,P*P+j*j}function $3(e,t,i,s,l,d,y){let g,_=s,M=0;for(let E=d+i;E<y;E+=i)g=iK(t,E,d,y),g>_&&(M=E,_=g);_>s&&(M-d>i&&$3(e,t,i,s,l,d,M),l(e,t,e.length,M,t[M],t[M+1]),y-M>i&&$3(e,t,i,s,l,M,y))}function Whe(e,t,i,s){if(ce(t)||!t.coords||!t.coords.length)return null;const l=Bi(i,s);let d=Number.POSITIVE_INFINITY,y=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,_=Number.NEGATIVE_INFINITY;if(t&&t.coords){const M=t.coords;for(let E=0;E<M.length;E+=l){const O=M[E],P=M[E+1];d=Math.min(d,O),g=Math.max(g,O),y=Math.min(y,P),_=Math.max(_,P)}}return e[0]=d,e[1]=y,e[2]=g,e[3]=_,e}function I3(e,t,i,s,l){const{coords:d,lengths:y}=t,g=i?s?Gk:Tm:s?Tm:Vk,_=Bi(i,s);if(!d.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!y.length)return g(e.coords,d,0,0,$7(l,d[0]),I7(l,d[1])),e!==t&&(e.lengths.length=0,e.coords.length=_),e;const[M,E]=l.scale;let O=0;for(let P=0;P<y.length;P++){const j=y[P];e.lengths[P]=j;let R=$7(l,d[O]),z=I7(l,d[O+1]);g(e.coords,d,O,O,R,z),O+=_;for(let q=1;q<j;q++,O+=_)R+=d[O]*M,z-=d[O+1]*E,g(e.coords,d,O,O,R,z)}return e!==t&&(e.lengths.length=y.length,e.coords.length=d.length),e}function Jhe(e,t,i,s,l,d){const y=Bi(i,s),g=L4(i,s,l,d),_=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let M=0;M<_.length;M+=y)g(e.coords,_,e.coords.length,M,_[M],_[M+1]);return e}function rK(e,t,i,s){let l=0,d=e[s*t],y=e[s*(t+1)];for(let g=1;g<i;g++){const _=d+e[s*(t+g)],M=y+e[s*(t+g)+1],E=(_-d)*(M+y);d=_,y=M,l+=E}return .5*l}function Khe(e,t){const{coords:i,lengths:s}=e;let l=0,d=0;for(let y=0;y<s.length;y++)d+=rK(i,l,s[y],t),l+=y;return Math.abs(d)}function Yhe(e,t){if(ce(e))return null;const i=e.clone(),s=e.coords,l=e.lengths;let d=0;for(let y=0;y<l.length;y++){const g=l[y];let _=s[t*d],M=s[t*d+1];for(let E=1;E<g;E++){const O=_+s[t*(d+E)],P=M+s[t*(d+E)+1];i.coords[t*(d+E)]=O,i.coords[t*(d+E)+1]=P,_=O,M=P}d+=g}return i}function sK(e,t){return t}function G4(e,t,i,s){switch(i){case 0:return wd(e,t+s,0);case 1:return e.originPosition==="lowerLeft"?wd(e,t+s,1):aK(e,t+s,1)}}function sA(e,t,i,s){return i===2?wd(e,t,2):G4(e,t,i,s)}function nK(e,t,i,s){return i===2?wd(e,t,3):G4(e,t,i,s)}function oK(e,t,i,s){return i===3?wd(e,t,3):sA(e,t,i,s)}function wd({translate:e,scale:t},i,s){return e[s]+i*t[s]}function aK({translate:e,scale:t},i,s){return e[s]-i*t[s]}class lK{constructor(t){this.options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=sK,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this._attributesConstructor=function(){}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(t){if(this.options.applyTransform&&(t.transform=null),this._attributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,!t.hasZ)return;const i=eE(t.geometryType,this.options.sourceSpatialReference,t.spatialReference);if(!ce(i))for(const s of t.features)i(s.geometry)}createSpatialReference(){return{}}addField(t,i){t.fields.push(i);const s=t.fields.map(l=>l.name);this._attributesConstructor=function(){for(const l of s)this[l]=null}}addFeature(t,i){t.features.push(i)}prepareFeatures(t){switch(this.transform=t.transform,this.options.applyTransform&&t.transform&&(this.applyTransform=this._deriveApplyTransform(t)),this.vertexDimension=2,t.hasZ&&this.vertexDimension++,t.hasM&&this.vertexDimension++,t.geometryType){case"esriGeometryPoint":this.addCoordinate=(i,s,l)=>this.addCoordinatePoint(i,s,l),this.createGeometry=i=>this.createPointGeometry(i);break;case"esriGeometryPolygon":this.addCoordinate=(i,s,l)=>this._addCoordinatePolygon(i,s,l),this.createGeometry=i=>this._createPolygonGeometry(i);break;case"esriGeometryPolyline":this.addCoordinate=(i,s,l)=>this._addCoordinatePolyline(i,s,l),this.createGeometry=i=>this._createPolylineGeometry(i);break;case"esriGeometryMultipoint":this.addCoordinate=(i,s,l)=>this._addCoordinateMultipoint(i,s,l),this.createGeometry=i=>this._createMultipointGeometry(i);break;default:t.geometryType}}createFeature(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(t,i,s){this.lengths.length===0&&(this.toAddInCurrentPath=i),this.lengths.push(i)}addQueryGeometry(t,i){const{queryGeometry:s,queryGeometryType:l}=i,d=I3(s.clone(),s,!1,!1,this.transform),y=iA(d,l,!1,!1);t.queryGeometryType=l,t.queryGeometry=J({},y)}createPointGeometry(t){const i={x:0,y:0,spatialReference:t.spatialReference};return t.hasZ&&(i.z=0),t.hasM&&(i.m=0),i}addCoordinatePoint(t,i,s){switch(i=this.applyTransform(this.transform,i,s,0),s){case 0:t.x=i;break;case 1:t.y=i;break;case 2:"z"in t?t.z=i:t.m=i;break;case 3:t.m=i}}_transformPathLikeValue(t,i){let s=0;return i<=1&&(s=this.previousCoordinate[i],this.previousCoordinate[i]+=t),this.applyTransform(this.transform,t,i,s)}_addCoordinatePolyline(t,i,s){this._dehydratedAddPointsCoordinate(t.paths,i,s)}_addCoordinatePolygon(t,i,s){this._dehydratedAddPointsCoordinate(t.rings,i,s)}_addCoordinateMultipoint(t,i,s){s===0&&t.points.push([]);const l=this._transformPathLikeValue(i,s);t.points[t.points.length-1].push(l)}_createPolygonGeometry(t){return{rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createPolylineGeometry(t){return{paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createMultipointGeometry(t){return{points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_dehydratedAddPointsCoordinate(t,i,s){s===0&&this.toAddInCurrentPath--==0&&(t.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);const l=this._transformPathLikeValue(i,s),d=t[t.length-1];s===0&&(this.coordinateBufferPtr=0,this.coordinateBuffer=new Array(this.vertexDimension),d.push(this.coordinateBuffer)),this.coordinateBuffer[this.coordinateBufferPtr++]=l}_deriveApplyTransform(t){const{hasZ:i,hasM:s}=t;return i&&s?oK:i?sA:s?nK:G4}}async function uK(e,t,i){const s=As(e),l=J({},i),d=hr.from(t),y=!d.quantizationParameters,{data:g}=await Nk(s,d,new lK({sourceSpatialReference:d.sourceSpatialReference,applyTransform:y}),l);return g}function hK(e,t){const i=e.toJSON();return i.objectIds&&(i.objectIds=i.objectIds.join(",")),i.orderByFields&&(i.orderByFields=i.orderByFields.join(",")),!i.outFields||t!=null&&t.returnCountOnly?delete i.outFields:i.outFields.indexOf("*")!==-1?i.outFields="*":i.outFields=i.outFields.join(","),i.outSpatialReference&&(i.outSR=i.outSR.wkid||JSON.stringify(i.outSR.toJSON()),delete i.outSpatialReference),i.dynamicDataSource&&(i.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i}async function cK(e,t,i){const s=await nA(e,t,i),l=s.data,d=l.geometryType,y=l.spatialReference,g={};for(const _ of l.relatedRecordGroups){const M={fields:void 0,objectIdFieldName:void 0,geometryType:d,spatialReference:y,hasZ:!!l.hasZ,hasM:!!l.hasM,features:_.relatedRecords};if(_.objectId!=null)g[_.objectId]=M;else for(const E in _)_.hasOwnProperty(E)&&E!=="relatedRecords"&&(g[_[E]]=M)}return Te(J({},s),{data:g})}async function pK(e,t,i){const s=await nA(e,t,i,{returnCountOnly:!0}),l=s.data,d={};for(const y of l.relatedRecordGroups)y.objectId!=null&&(d[y.objectId]=y.count);return Te(J({},s),{data:d})}async function nA(e,t,i={},s){const l=Zd(J(J(Te(J({},e.query),{f:"json"}),s),hK(t,s)));return Ht(e.path+"/queryRelatedRecords",Te(J({},i),{query:J(J({},i.query),l)}))}async function dK(e,t,i){t=Hu.from(t);const s=As(e);return cK(s,t,i).then(l=>{const d=l.data,y={};return Object.keys(d).forEach(g=>y[g]=rh.fromJSON(d[g])),y})}async function fK(e,t,i){t=Hu.from(t);const s=As(e);return pK(s,t,J({},i)).then(l=>l.data)}const E7="Layer does not support extent calculation.";function yK(e,t){var i,s;const l=e.geometry,d=e.toJSON(),y=d;if(X(l)&&(y.geometry=JSON.stringify(l),y.geometryType=zd(l),y.inSR=l.spatialReference.wkid||JSON.stringify(l.spatialReference)),(i=d.topFilter)!=null&&i.groupByFields&&(y.topFilter.groupByFields=d.topFilter.groupByFields.join(",")),(s=d.topFilter)!=null&&s.orderByFields&&(y.topFilter.orderByFields=d.topFilter.orderByFields.join(",")),d.topFilter&&(y.topFilter=JSON.stringify(y.topFilter)),d.objectIds&&(y.objectIds=d.objectIds.join(",")),d.orderByFields&&(y.orderByFields=d.orderByFields.join(",")),d.outFields&&!(t!=null&&t.returnCountOnly||t!=null&&t.returnExtentOnly||t!=null&&t.returnIdsOnly)?d.outFields.indexOf("*")!==-1?y.outFields="*":y.outFields=d.outFields.join(","):delete y.outFields,d.outSR?y.outSR=d.outSR.wkid||JSON.stringify(d.outSR):l&&d.returnGeometry&&(y.outSR=y.inSR),d.returnGeometry&&delete d.returnGeometry,d.timeExtent){const g=d.timeExtent,{start:_,end:M}=g;_==null&&M==null||(y.time=_===M?_:`${_==null?"null":_},${M==null?"null":M}`),delete d.timeExtent}return y}async function mK(e,t,i,s){const l=await jg(e,t,"json",s);return Im(t,i,l.data),l}async function gK(e,t,i){return X(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):jg(e,t,"json",i,{returnIdsOnly:!0})}async function vK(e,t,i){return X(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):jg(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(s=>{const l=s.data;if(l.hasOwnProperty("extent"))return s;if(l.features)throw new Error(E7);if(l.hasOwnProperty("count"))throw new Error(E7);return s})}function bK(e,t,i){return X(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):jg(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function jg(e,t,i,s={},l={}){const d=typeof e=="string"?Ri(e):e,y=t.geometry?[t.geometry]:[];return s.responseType=i==="pbf"?"array-buffer":"json",R4(y,null,s).then(g=>{const _=g&&g[0];X(_)&&((t=t.clone()).geometry=_);const M=Zd(J(J(Te(J({},d.query),{f:i}),l),yK(t,l)));return Ht(rl(d.path,"queryTopFeatures"),Te(J({},s),{query:J(J({},M),s.query)}))})}var T3;let Fh=T3=class extends ge{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new T3({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};b([S({type:[String],json:{write:!0}})],Fh.prototype,"groupByFields",void 0),b([S({type:Number,json:{write:!0}})],Fh.prototype,"topCount",void 0),b([S({type:[String],json:{write:!0}})],Fh.prototype,"orderByFields",void 0),Fh=T3=b([H("esri.rest.support.TopFilter")],Fh);const wK=Fh;var E3;const k7=new ot({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),A7=new ot({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let zt=E3=class extends ge{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new E3(le({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};b([S({type:Boolean,json:{write:!0}})],zt.prototype,"cacheHint",void 0),b([S({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],zt.prototype,"distance",void 0),b([S({types:Zu,json:{read:nl,write:!0}})],zt.prototype,"geometry",void 0),b([S({type:Number,json:{write:!0}})],zt.prototype,"geometryPrecision",void 0),b([S({type:Number,json:{write:!0}})],zt.prototype,"maxAllowableOffset",void 0),b([S({type:Number,json:{read:{source:"resultRecordCount"}}})],zt.prototype,"num",void 0),b([S({json:{write:!0}})],zt.prototype,"objectIds",void 0),b([S({type:[String],json:{write:!0}})],zt.prototype,"orderByFields",void 0),b([S({type:[String],json:{write:!0}})],zt.prototype,"outFields",void 0),b([S({type:it,json:{read:{source:"outSR"},write:{target:"outSR"}}})],zt.prototype,"outSpatialReference",void 0),b([S({type:String,json:{write:!0}})],zt.prototype,"resultType",void 0),b([S({json:{write:!0}})],zt.prototype,"returnGeometry",void 0),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],zt.prototype,"returnM",void 0),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],zt.prototype,"returnZ",void 0),b([S({type:Number,json:{read:{source:"resultOffset"}}})],zt.prototype,"start",void 0),b([ke("start"),ke("num")],zt.prototype,"writeStart",null),b([S({type:String,json:{read:{source:"spatialRel",reader:k7.read},write:{target:"spatialRel",writer:k7.write}}})],zt.prototype,"spatialRelationship",void 0),b([S({type:Qn,json:{write:!0}})],zt.prototype,"timeExtent",void 0),b([S({type:wK,json:{write:!0}})],zt.prototype,"topFilter",void 0),b([S({type:String,json:{read:A7.read,write:{writer:A7.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],zt.prototype,"units",void 0),b([S({type:String,json:{write:!0}})],zt.prototype,"where",void 0),zt=E3=b([H("esri.rest.support.TopFeaturesQuery")],zt),zt.from=gi(zt);const Xa=zt;async function _K(e,t,i,s){const l=As(e),d=J({},s),{data:y}=await mK(l,Xa.from(t),i,d);return rh.fromJSON(y)}async function xK(e,t,i){const s=As(e);return(await gK(s,Xa.from(t),J({},i))).data.objectIds}async function SK(e,t,i){const s=As(e),l=await vK(s,Xa.from(t),J({},i));return{count:l.data.count,extent:Mt.fromJSON(l.data.extent)}}async function MK(e,t,i){const s=As(e);return(await bK(s,Xa.from(t),J({},i))).data.count}let Rh=class extends Fe{constructor(...e){super(...e),this.requestOptions=null,this.url=null}normalizeCtorArgs(e,t){return typeof e!="string"?e:J({url:e},t)}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(e){return e?Ri(e):null}_encode(e,t,i){const s={};for(const l in e){if(l==="declaredClass")continue;const d=e[l];if(d!=null&&typeof d!="function")if(Array.isArray(d)){s[l]=[];for(let y=0;y<d.length;y++)s[l][y]=this._encode(d[y])}else if(typeof d=="object")if(d.toJSON){const y=d.toJSON(i&&i[l]);s[l]=t?y:JSON.stringify(y)}else s[l]=t?d:JSON.stringify(d);else s[l]=d}return s}};b([S({readOnly:!0})],Rh.prototype,"parsedUrl",null),b([S()],Rh.prototype,"requestOptions",void 0),b([S({type:String})],Rh.prototype,"url",void 0),Rh=b([H("esri.tasks.Task")],Rh);const $K=Rh;let vo=class extends $K{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.format="json",this.gdbVersion=null,this.infoFor3D=null,this.sourceSpatialReference=null}execute(e,t){return this.executeJSON(e,t).then(i=>this.featureSetFromJSON(e,i,t))}async executeJSON(e,t){var i;const s=J(J({},this.requestOptions),t),l=this._normalizeQuery(e),d=((i=e.outStatistics)==null?void 0:i[0])!=null,y=de("featurelayer-pbf-statistics"),g=!d||y;let _;if(this.format==="pbf"&&g)try{_=await uK(this.url,l,s)}catch(M){if(M.name!=="query:parsing-pbf")throw M;this.format="json"}return this.format!=="json"&&g||(_=await Dk(this.url,l,s)),this._normalizeFields(_.fields),_}async featureSetFromJSON(e,t,i){if(!(this._queryIs3DObjectFormat(e)&&X(this.infoFor3D)&&t.features&&t.features.length))return rh.fromJSON(t);const{meshFeatureSetFromJSON:s}=await LM(import("./meshFeatureSet.940b068c.js").then(function(l){return l.a}),i);return s(e,this.infoFor3D,t)}executeForCount(e,t){const i=J(J({},this.requestOptions),t),s=this._normalizeQuery(e);return qJ(this.url,s,i)}executeForExtent(e,t){const i=J(J({},this.requestOptions),t),s=this._normalizeQuery(e);return UJ(this.url,s,i)}executeForIds(e,t){const i=J(J({},this.requestOptions),t),s=this._normalizeQuery(e);return BJ(this.url,s,i)}executeRelationshipQuery(e,t){e=Hu.from(e);const i=J(J({},this.requestOptions),t);return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),dK(this.url,e,i)}executeRelationshipQueryForCount(e,t){e=Hu.from(e);const i=J(J({},this.requestOptions),t);return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),fK(this.url,e,i)}executeAttachmentQuery(e,t){const i=J(J({},this.requestOptions),t);return pJ(this.url,e,i)}executeTopFeaturesQuery(e,t){const i=J(J({},this.requestOptions),t);return _K(this.parsedUrl,e,this.sourceSpatialReference,i)}executeForTopIds(e,t){const i=J(J({},this.requestOptions),t);return xK(this.parsedUrl,e,i)}executeForTopExtents(e,t){const i=J(J({},this.requestOptions),t);return SK(this.parsedUrl,e,i)}executeForTopCount(e,t){const i=J(J({},this.requestOptions),t);return MK(this.parsedUrl,e,i)}_normalizeQuery(e){let t=hr.from(e);if(t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(t=t===e?t.clone():t,t.gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?Jr.from(e.dynamicDataSource):this.dynamicDataSource),X(this.infoFor3D)&&this._queryIs3DObjectFormat(e)){t=t===e?t.clone():t,t.formatOf3DObjects=null;for(const i of this.infoFor3D.queryFormats){if(i.id==="3D_glb"){t.formatOf3DObjects=i.id;break}i.id!=="3D_gltf"||t.formatOf3DObjects||(t.formatOf3DObjects=i.id)}if(!t.formatOf3DObjects)throw new re("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(ce(t.outFields)||!t.outFields.includes("*")){t=t===e?t.clone():t,ce(t.outFields)&&(t.outFields=[]);const{originX:i,originY:s,originZ:l,translationX:d,translationY:y,translationZ:g,scaleX:_,scaleY:M,scaleZ:E,rotationX:O,rotationY:P,rotationZ:j,rotationDeg:R}=this.infoFor3D.transformFieldRoles;t.outFields.push(i,s,l,d,y,g,_,M,E,O,P,j,R)}}return t}_normalizeFields(e){if(X(this.fieldsIndex)&&X(e))for(const t of e){const i=this.fieldsIndex.get(t.name);i&&Object.assign(t,i.toJSON())}}_queryIs3DObjectFormat(e){return X(this.infoFor3D)&&e.returnGeometry&&e.multipatchOption!=="xyFootprint"&&!e.outStatistics}};b([S({type:Jr})],vo.prototype,"dynamicDataSource",void 0),b([S()],vo.prototype,"fieldsIndex",void 0),b([S()],vo.prototype,"format",void 0),b([S()],vo.prototype,"gdbVersion",void 0),b([S()],vo.prototype,"infoFor3D",void 0),b([S()],vo.prototype,"sourceSpatialReference",void 0),vo=b([H("esri.tasks.QueryTask")],vo);const IK=vo,TK="esri.widgets.Feature.support.relatedFeatureUtils",O7=Se.getLogger(TK),C7=new Map;function d0(e){if(!Fo(e))return null;const[t,i]=e.split("/").slice(1);return{layerId:t,fieldName:i}}function EK(e,t){if(!t.relationships)return null;let i=null;const{relationships:s}=t;return s.some(l=>l.id===parseInt(e,10)&&(i=l,!0)),i}function kK({originRelationship:e,relationships:t,layerId:i}){let s;return t&&t.some(l=>(`${l.relatedTableId}`===i&&l.id===e.id&&(s=l),!!s)),s}function AK(e,t){const i=t.toLowerCase();for(const s in e)if(s.toLowerCase()===i)return e[s];return null}function OK(e,t){const i=EK(e,t);if(!i)return;const s=`${t.url}/${i.relatedTableId}`;return{url:s,queryTask:new IK({url:s,sourceSpatialReference:t.spatialReference}),relation:i,relatedFields:[],outStatistics:[]}}function CK(e,t){if(!t||!e)return;const{features:i,statsFeatures:s}=e,l=i&&i.value;t.relatedFeatures=l?l.features:[];const d=s&&s.value;t.relatedStatsFeatures=d?d.features:[]}function PK(e,t,i,s){const l=new Hu;return l.outFields=["*"],l.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),l.objectIds=[e.attributes[i.objectIdField]],i.queryRelatedFeatures(l,s)}function NK(e,t,i){let s=0;const l=[];for(;s<t.length;)l.push(`${e} IN (${t.slice(s,i+s)})`),s+=i;return l.join(" OR ")}async function jK(e,t,i,s){const l=i.layerId.toString(),{layerInfo:d,queryTask:y,relation:g,relatedFields:_,outStatistics:M}=t,E=kK({originRelationship:g,relationships:d.relationships,layerId:l});if(E.relationshipTableId&&E.keyFieldInRelationshipTable){const P=(await PK(e,E,i,s))[e.attributes[i.objectIdField]];if(!P)return null;const j=P.features.map(R=>R.attributes[d.objectIdField]);if((M==null?void 0:M.length)>0&&d.supportsStatistics){const R=new hr;R.where=NK(d.objectIdField,j,1e3),R.outFields=_,R.outStatistics=M;const z={features:Promise.resolve(P),statsFeatures:y.execute(R)};return Or(z)}}const O=E==null?void 0:E.keyField;if(O){const P=J5(zK(d.fields,O)),j=AK(e.attributes,g.keyField),R=P?`${O}=${j}`:`${O}='${j}'`,z=y.execute(new hr({where:R,outFields:t.relatedFields}),s),q=t.outStatistics&&t.outStatistics.length>0&&d.supportsStatistics?y.execute(new hr({where:R,outFields:t.relatedFields,outStatistics:t.outStatistics}),s):null,Y={features:z};return q&&(Y.statsFeatures=q),Or(Y)}return null}function FK(e,t){return Ht(e,{query:{f:"json"},signal:t&&t.signal})}function RK({relatedInfos:e,layer:t},i){const s={};return e.forEach((l,d)=>{const{relation:y}=l;if(!y){const O=new re("relation-required","A relation is required on a layer to retrieve related records.");throw O7.error(O),O}const{relatedTableId:g}=y;if(typeof g!="number"){const O=new re("A related table ID is required on a layer to retrieve related records.");throw O7.error(O),O}const _=`${t.url}/${g}`,M=C7.get(_),E=M||FK(_,i);M||C7.set(_,E),s[d]=E}),Or(s)}function LK({graphic:e,relatedInfos:t,layer:i},s){const l={};return t.forEach((d,y)=>{d.layerInfo&&(l[y]=jK(e,d,i,s))}),Or(l)}function DK({relatedInfo:e,fieldName:t,fieldInfo:i}){if(e.relatedFields.push(t),i.statisticType){const s=new Tk({statisticType:i.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(s)}}function zK(e,t){if(e!=null){t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return i}return null}const P7={chartAnimation:!0};let ki=class extends Fe{constructor(e){super(e),this.abilities=J({},P7),this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return J(J({},P7),e)}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,i=(e+t)%t;this.activeMediaInfoIndex=i}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,i=t+e;this._setContentElementMedia(i)}_formatMediaInfos(){const{attributes:e,mediaInfos:t,formattedAttributes:i,expressionAttributes:s,fieldInfoMap:l,layer:d}=this;return t==null?void 0:t.map(y=>{const g=y==null?void 0:y.clone();if(!g)return null;if(g.title=vu({attributes:e,fieldInfoMap:l,globalAttributes:i,expressionAttributes:s,layer:d,text:g.title}),g.caption=vu({attributes:e,fieldInfoMap:l,globalAttributes:i,expressionAttributes:s,layer:d,text:g.caption}),g.altText=vu({attributes:e,fieldInfoMap:l,globalAttributes:i,expressionAttributes:s,layer:d,text:g.altText}),g.type==="image"){const{value:_}=g;return this._setImageValue({value:_,formattedAttributes:i,layer:d}),g.value.sourceURL?g:void 0}if(g.type==="pie-chart"||g.type==="line-chart"||g.type==="column-chart"||g.type==="bar-chart"){const{value:_}=g;return this._setChartValue({value:_,chartType:g.type,attributes:e,formattedAttributes:i,layer:d}),g}return null}).filter(Boolean)}_setImageValue(e){const{fieldInfoMap:t}=this,{value:i,formattedAttributes:s,layer:l}=e,{linkURL:d,sourceURL:y}=i;if(y){const g=a3(y,l);i.sourceURL=o3({formattedAttributes:s,template:g,fieldInfoMap:t})}if(d){const g=a3(d,l);i.linkURL=o3({formattedAttributes:s,template:g,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:i,formattedAttributes:s,chartType:l,layer:d}=e,{popupTemplate:y,relatedInfos:g}=this,{fields:_,normalizeField:M}=t;if(t.fields=hW(_,d),M&&(t.normalizeField=Mm(M,d)),!_.some(O=>!!(s[O]!=null||Fo(O)&&g.size)))return;const E=y==null?void 0:y.fieldInfos;_.forEach(O=>{if(Fo(O))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:E,fieldName:O,formattedAttributes:s,chartType:l,value:t})]);const P=this._getChartOption({value:t,attributes:i,chartType:l,formattedAttributes:s,fieldName:O,fieldInfos:E});t.series.push(P)})}_getRelatedChartInfos(e){var t;const{fieldInfos:i,fieldName:s,formattedAttributes:l,chartType:d,value:y}=e,g=[],_=d0(s),{layerId:M,fieldName:E}=_,O=(t=this.relatedInfos)==null?void 0:t.get(M.toString());if(!O)return g;const{relatedFeatures:P,relation:j}=O;if(!j||!P)return g;const{cardinality:R}=j;return P.forEach(z=>{const{attributes:q}=z;q&&Object.keys(q).forEach(Y=>{Y===E&&g.push(this._getChartOption({value:y,attributes:q,formattedAttributes:l,fieldName:s,chartType:d,relatedFieldName:Y,fieldInfos:i}))})}),R==="one-to-many"||R==="many-to-many"?g:[g[0]]}_getTooltip({label:e,value:t,chartType:i}){return i==="pie-chart"?e:`${e}: ${t}`}_getChartOption(e){var t;const{value:i,attributes:s,formattedAttributes:l,fieldName:d,relatedFieldName:y,fieldInfos:g,chartType:_}=e,{layer:M}=this,{normalizeField:E,tooltipField:O}=i,P=E?Fo(E)?s[d0(E).fieldName]:s[E]:null,j=y&&s[y]!==void 0?s[y]:s[d]!==void 0?s[d]:l[d],R=j===void 0?null:j&&P?j/P:j,z=new JI({value:R});if(Fo(d)){const he=d0(d),se=d0(O),ue=se?se.fieldName:null,Ee=yk(R,{fieldInfos:g,fieldName:y,layer:M,preventPlacesFormatting:!!P}),Oe=he?he.label||he.fieldName:y,Le=ue&&s[ue]!==void 0?s[ue]:Oe;return z.tooltip=this._getTooltip({label:Le,value:Ee,chartType:_}),z}const q=mk(g,d),Y=Mm(d,M),te=O&&l[O]!==void 0?l[O]:dk(q||new Gd({fieldName:Y}),(t=this.popupTemplate)==null?void 0:t.expressionInfos),ne=l[Y];return z.tooltip=this._getTooltip({label:te,value:ne,chartType:_}),z}};b([S()],ki.prototype,"abilities",void 0),b([yt("abilities")],ki.prototype,"castAbilities",null),b([S()],ki.prototype,"activeMediaInfoIndex",void 0),b([S({readOnly:!0})],ki.prototype,"activeMediaInfo",null),b([S()],ki.prototype,"attributes",void 0),b([S()],ki.prototype,"description",void 0),b([S()],ki.prototype,"fieldInfoMap",void 0),b([S()],ki.prototype,"formattedAttributes",void 0),b([S()],ki.prototype,"expressionAttributes",void 0),b([S({readOnly:!0})],ki.prototype,"formattedMediaInfos",null),b([S()],ki.prototype,"layer",void 0),b([S({readOnly:!0})],ki.prototype,"formattedMediaInfoCount",null),b([S()],ki.prototype,"mediaInfos",void 0),b([S()],ki.prototype,"popupTemplate",void 0),b([S()],ki.prototype,"relatedInfos",void 0),b([S()],ki.prototype,"title",void 0),ki=b([H("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],ki);const wu=ki;var N7=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],VK=[].concat(N7.slice(30,39),N7.slice(28,30).reverse()),GK=[{name:"default",colors:VK},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const j7="en-us",q4=new Map([["ar",()=>import("./ar.a1d9b678.js").then(e=>e.a)],["bg-bg",()=>import("./bg_BG.c35cb47a.js").then(e=>e.b)],["bs-ba",()=>import("./bs_BA.b2afc04e.js").then(e=>e.b)],["ca-es",()=>import("./ca_ES.fdd427e5.js").then(e=>e.c)],["cs-cz",()=>import("./cs_CZ.f74517dd.js").then(e=>e.c)],["da-dk",()=>import("./da_DK.2230a810.js").then(e=>e.d)],["de-de",()=>import("./de_DE.3006cc31.js").then(e=>e.d)],["de-ch",()=>import("./de_CH.ddbd9071.js").then(e=>e.d)],["el-gr",()=>import("./el_GR.19c89944.js").then(e=>e.e)],["en-us",()=>import("./en_US.c96547db.js").then(e=>e.e)],["en-ca",()=>import("./en_CA.3ba844be.js").then(e=>e.e)],["es-es",()=>import("./es_ES.07a4efdf.js").then(e=>e.e)],["et-ee",()=>import("./et_EE.dc020900.js").then(e=>e.e)],["fi-fi",()=>import("./fi_FI.c1c8c744.js").then(e=>e.f)],["fr-fr",()=>import("./fr_FR.db763bfb.js").then(e=>e.f)],["he-il",()=>import("./he_IL.b27870cb.js").then(e=>e.h)],["hr-hr",()=>import("./hr_HR.c6b42517.js").then(e=>e.h)],["hu-hu",()=>import("./hu_HU.7820f9fb.js").then(e=>e.h)],["id-id",()=>import("./id_ID.d6ad87aa.js").then(e=>e.i)],["it-it",()=>import("./it_IT.c7aef6ed.js").then(e=>e.i)],["ja-jp",()=>import("./ja_JP.2eae4c48.js").then(e=>e.j)],["ko-kr",()=>import("./ko_KR.a6e71a66.js").then(e=>e.k)],["lt-lt",()=>import("./lt_LT.200f7177.js").then(e=>e.l)],["lv-lv",()=>import("./lv_LV.68631a4d.js").then(e=>e.l)],["nb-no",()=>import("./nb_NO.986f79ab.js").then(e=>e.n)],["nl-nl",()=>import("./nl_NL.78208c12.js").then(e=>e.n)],["pl-pl",()=>import("./pl_PL.bfef3f8c.js").then(e=>e.p)],["pt-br",()=>import("./pt_BR.296bcf97.js").then(e=>e.p)],["pt-pt",()=>import("./pt_PT.fcf84b18.js").then(e=>e.p)],["ro-ro",()=>import("./ro_RO.d8c57790.js").then(e=>e.r)],["ru-ru",()=>import("./ru_RU.75220e93.js").then(e=>e.r)],["sk-sk",()=>import("./sk_SK.3091595f.js").then(e=>e.s)],["sl-sl",()=>import("./sl_SL.54cce6f8.js").then(e=>e.s)],["sr-rs",()=>import("./sr_RS.7c0347d0.js").then(e=>e.s)],["sv-se",()=>import("./sv_SE.6b84c666.js").then(e=>e.s)],["th-th",()=>import("./th_TH.5c649162.js").then(e=>e.t)],["tr-tr",()=>import("./tr_TR.7f7526a2.js").then(e=>e.t)],["uk-ua",()=>import("./uk_UA.bdd84d21.js").then(e=>e.u)],["vi-vn",()=>import("./vi_VN.b5ce920c.js").then(e=>e.v)],["zh-cn",()=>import("./zh_Hans.bffb1b2d.js").then(e=>e.z)],["zh-hk",()=>import("./zh_Hant.6bc26759.js").then(e=>e.z)],["zh-tw",()=>import("./zh_Hant.6bc26759.js").then(e=>e.z)]]);function qK(e){const t=e.split("-")[0].toLowerCase();let i=null;for(const s of q4.keys())if(s.startsWith(t)){i=s;break}return i}function UK(e){return e?q4.has(e.toLowerCase())?e.toLowerCase():qK(e)||j7:j7}let ch,$p;async function BK(e=Xr()){if(e=UK(e),ch&&e===$p)return ch;ch=import("./index.afdbb37c.js").then(t=>t.i),$p=e;try{const[t,i]=await Promise.all([ch,q4.get($p)()]);$p===e&&(t.am4core.options.defaultLocale=i.default),t.am4core.options.suppressWarnings=!0,t.am4core.options.autoDispose=!0}catch{return ch=null,$p=null,null}return ch}function HK(e,t="default"){const i=GK.find(s=>s.name===t);return i?i.colors.map(s=>e.color(s)):null}const Zt={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},Yv=.05,Xv=.95,Zv=15;let wr=class extends mr{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new wu,this.messages=null,this._getChartDependencies=async i=>{const s=await BK(),{destroyed:l,viewModel:d}=this;if(l||!d||!i)return;const{activeMediaInfo:y}=d;this._renderChart({chartDiv:i,mediaInfo:y,chartsModule:s})}}initialize(){this._featureElementInfo=new j4,this.own(ri(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],()=>this._setupMediaRefreshTimer()),ri(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo()))}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){var e;return oe("div",{bind:this,class:Zt.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?oe("div",{key:"media-element-container",class:Zt.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:s}=this.viewModel,{value:l,refreshInterval:d,altText:y,title:g,type:_}=e,{sourceURL:M,linkURL:E}=l,O=ck(E)?"_blank":"_self",P=O==="_blank"?"noreferrer":"",j=d?t:null,R=j?j.timestamp:0,z=j?j.sourceURL:M,q=oe("img",{alt:y||g,key:`media-${_}-${i}-${s}-${R}`,src:z});return(E?oe("a",{title:g,href:E,rel:P,target:O},q):null)||q}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return oe("div",{key:`media-${e.type}-${t}-${i}`,bind:this,class:Zt.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.indexOf("chart")!==-1?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?oe("div",{key:"media-title",class:Zt.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?oe("div",{key:"media-caption",class:Zt.mediaItemCaption,innerHTML:e.caption}):null;return oe("div",{key:"media-container",class:Zt.mediaItemContainer},oe("div",{key:"media-item-container",class:Zt.mediaItem},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=e==="previous",i=t?this.messages.previous:this.messages.next,s=t?this.classes(Zt.mediaButton,Zt.mediaPrevious):this.classes(Zt.mediaButton,Zt.mediaNext),l=t?this.classes(Zt.mediaIcon,Zt.mediaPreviousIconLTR,Zt.iconLeftTriangleArrow):this.classes(Zt.mediaIcon,Zt.mediaNextIconLTR,Zt.iconRightTriangleArrow),d=t?this.classes(Zt.mediaIcon,Zt.mediaPreviousIconRTL,Zt.iconRightTriangleArrow):this.classes(Zt.mediaIcon,Zt.mediaNextIconRTL,Zt.iconLeftTriangleArrow),y=t?"media-previous":"media-next",g=t?this._previous:this._next;return oe("button",{type:"button",key:y,title:i,"aria-label":i,tabIndex:0,class:s,bind:this,onclick:g},oe("span",{"aria-hidden":"true",class:l}),oe("span",{"aria-hidden":"true",class:d}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_handleMediaKeyup(e){const t=ru(e);t==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:i,chartDiv:s,mediaInfo:l}=e,{value:d,type:y}=l,{am4core:g}=i,_=HK(g);function M(P){P instanceof g.ColorSet&&_&&(P.list=_)}sk()&&g.useTheme(i.am4themes_dark);const E=window.matchMedia("(prefers-reduced-motion: reduce)");t.chartAnimation&&!E.matches?g.useTheme(i.am4themes_animated):g.unuseTheme(i.am4themes_animated),g.useTheme(M);const O=y==="pie-chart"?this._createPieChart(e):this._createXYChart(e);s.setAttribute("aria-label",l.altText||l.title),O.data=d.series.map(P=>({tooltip:P.tooltip,value:P.value})).filter(P=>y!=="pie-chart"||P.value>0)}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:s,am4charts:l}=i,d=s.create(t,l.PieChart);d.rtl=Ka(this.container);const y=d.series.push(new l.PieSeries);return y.labels.template.disabled=!0,y.ticks.template.disabled=!0,y.dataFields.value="value",y.dataFields.category="tooltip",this._customizeChartTooltip(y.tooltip,s),y.slices.template.tooltipText=d.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%",d}_getMinSeriesValue(e){let t=0;return e.forEach(i=>t=Math.min(i.value,t)),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:s}=t,{value:l}=s,{am4core:d,am4charts:y}=i,g=e.xAxes.push(new y.CategoryAxis);g.dataFields.category="tooltip",g.renderer.labels.template.disabled=!0,this._customizeChartTooltip(g.tooltip,d),g.tooltip.events.on("sizechanged",()=>{g.tooltip.dy=-g.tooltip.contentHeight});const _=e.yAxes.push(new y.ValueAxis),M=_.renderer.labels.template;_.renderer.minLabelPosition=Yv,_.renderer.maxLabelPosition=Xv,_.min=this._getMinSeriesValue(l.series),this._customizeChartTooltip(_.tooltip,d),M.wrap=!0;const E=e.series.push(new y.ColumnSeries);E.dataFields.valueY="value",E.dataFields.categoryX="tooltip",e.cursor=new y.XYCursor,l.series.length>Zv&&(e.scrollbarX=new d.Scrollbar)}_createBarChart(e,t){const{chartsModule:i,mediaInfo:s}=t,{value:l}=s,{am4core:d,am4charts:y}=i,g=e.yAxes.push(new y.CategoryAxis);g.dataFields.category="tooltip",g.renderer.inversed=!0,g.renderer.labels.template.disabled=!0,this._customizeChartTooltip(g.tooltip,d),g.tooltip.events.on("sizechanged",()=>{g.tooltip.dx=g.tooltip.contentWidth});const _=e.xAxes.push(new y.ValueAxis),M=_.renderer.labels.template;_.renderer.minLabelPosition=Yv,_.renderer.maxLabelPosition=Xv,_.min=this._getMinSeriesValue(l.series),this._customizeChartTooltip(_.tooltip,d),M.wrap=!0;const E=e.series.push(new y.ColumnSeries);E.dataFields.valueX="value",E.dataFields.categoryY="tooltip",e.cursor=new y.XYCursor,l.series.length>Zv&&(e.scrollbarY=new d.Scrollbar)}_createLineChart(e,t){const{chartsModule:i,mediaInfo:s}=t,{value:l}=s,{am4core:d,am4charts:y}=i,g=e.xAxes.push(new y.CategoryAxis);g.dataFields.category="tooltip",g.renderer.labels.template.disabled=!0,this._customizeChartTooltip(g.tooltip,d),g.tooltip.events.on("sizechanged",()=>{g.tooltip.dy=-g.tooltip.contentHeight});const _=e.yAxes.push(new y.ValueAxis),M=_.renderer.labels.template;_.renderer.minLabelPosition=Yv,_.renderer.maxLabelPosition=Xv,_.min=this._getMinSeriesValue(l.series),this._customizeChartTooltip(_.tooltip,d),M.wrap=!0;const E=e.series.push(new y.LineSeries);E.dataFields.categoryX="tooltip",E.dataFields.valueY="value",e.cursor=new y.XYCursor,l.series.length>Zv&&(e.scrollbarX=new d.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:s}=e,{type:l}=s,{am4core:d,am4charts:y}=i,g=d.create(t,y.XYChart);return g.rtl=Ka(this.container),l==="column-chart"&&this._createColumnChart(g,e),l==="bar-chart"&&this._createBarChart(g,e),l==="line-chart"&&this._createLineChart(g,e),g}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const s=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const l=setInterval(()=>{this._updateMediaInfoTimestamp(i.sourceURL)},s);this._refreshTimer=l}_getImageSource(e,t){const i=e.indexOf("?")!==-1?"&":"?",[s,l=""]=e.split("#");return`${s}${i}timestamp=${t}${l?"#":""}${l}`}};b([Ge("viewModel.attributes")],wr.prototype,"attributes",void 0),b([Ge("viewModel.activeMediaInfoIndex")],wr.prototype,"activeMediaInfoIndex",void 0),b([Ge("viewModel.description")],wr.prototype,"description",void 0),b([Ge("viewModel.fieldInfoMap")],wr.prototype,"fieldInfoMap",void 0),b([Ge("viewModel.layer")],wr.prototype,"layer",void 0),b([Ge("viewModel.mediaInfos")],wr.prototype,"mediaInfos",void 0),b([Ge("viewModel.popupTemplate")],wr.prototype,"popupTemplate",void 0),b([Ge("viewModel.relatedInfos")],wr.prototype,"relatedInfos",void 0),b([Ge("viewModel.title")],wr.prototype,"title",void 0),b([S({type:wu})],wr.prototype,"viewModel",void 0),b([S(),kr("esri/widgets/Feature/t9n/Feature")],wr.prototype,"messages",void 0),wr=b([H("esri.widgets.Feature.FeatureMedia")],wr);const oA=wr;class WK{constructor(t,i){this.definition=null,this.context=null,this.definition=t,this.context=i}}class eo{constructor(t=[]){this._elements=t}length(){return this._elements.length}get(t){return this._elements[t]}toArray(){const t=[];for(let i=0;i<this.length();i++)t.push(this.get(i));return t}}class sh extends eo{constructor(t,i,s,l,d,y){super(t),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=i,this._hasZ=s,this._hasM=l,this._cacheId=d,this._partId=y}get(t){if(this._lazyPt[t]===void 0){const i=this._elements[t];if(i===void 0)return;const s=this._hasZ,l=this._hasM;let d=null;d=s&&!l?new Be(i[0],i[1],i[2],void 0,this._spRef):l&&!s?new Be(i[0],i[1],void 0,i[2],this._spRef):s&&l?new Be(i[0],i[1],i[2],i[3],this._spRef):new Be(i[0],i[1],this._spRef),d.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+t.toString(),this._lazyPt[t]=d}return this._lazyPt[t]}equalityTest(t){return t===this||t!==null&&t instanceof sh&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}class U4 extends eo{constructor(t,i,s,l,d){super(t),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=s,this._hasM=l,this._spRef=i,this._cacheId=d}get(t){if(this._lazyPath[t]===void 0){const i=this._elements[t];if(i===void 0)return;this._lazyPath[t]=new sh(i,this._spRef,this._hasZ,this._hasM,this._cacheId,t)}return this._lazyPath[t]}equalityTest(t){return t===this||t!==null&&t instanceof U4&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}class nh extends Error{}class JK extends nh{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class KK extends nh{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class YK extends nh{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class f0 extends nh{}class aA extends nh{constructor(t){super(`Invalid unit ${t}`)}}class xs extends nh{}class ta extends nh{constructor(){super("Zone is an abstract class")}}const Ae="numeric",pn="short",Qr="long",k3={year:Ae,month:Ae,day:Ae},lA={year:Ae,month:pn,day:Ae},XK={year:Ae,month:pn,day:Ae,weekday:pn},uA={year:Ae,month:Qr,day:Ae},hA={year:Ae,month:Qr,day:Ae,weekday:Qr},cA={hour:Ae,minute:Ae},pA={hour:Ae,minute:Ae,second:Ae},dA={hour:Ae,minute:Ae,second:Ae,timeZoneName:pn},fA={hour:Ae,minute:Ae,second:Ae,timeZoneName:Qr},yA={hour:Ae,minute:Ae,hourCycle:"h23"},mA={hour:Ae,minute:Ae,second:Ae,hourCycle:"h23"},gA={hour:Ae,minute:Ae,second:Ae,hourCycle:"h23",timeZoneName:pn},vA={hour:Ae,minute:Ae,second:Ae,hourCycle:"h23",timeZoneName:Qr},bA={year:Ae,month:Ae,day:Ae,hour:Ae,minute:Ae},wA={year:Ae,month:Ae,day:Ae,hour:Ae,minute:Ae,second:Ae},_A={year:Ae,month:pn,day:Ae,hour:Ae,minute:Ae},xA={year:Ae,month:pn,day:Ae,hour:Ae,minute:Ae,second:Ae},ZK={year:Ae,month:pn,day:Ae,weekday:pn,hour:Ae,minute:Ae},SA={year:Ae,month:Qr,day:Ae,hour:Ae,minute:Ae,timeZoneName:pn},MA={year:Ae,month:Qr,day:Ae,hour:Ae,minute:Ae,second:Ae,timeZoneName:pn},$A={year:Ae,month:Qr,day:Ae,weekday:Qr,hour:Ae,minute:Ae,timeZoneName:Qr},IA={year:Ae,month:Qr,day:Ae,weekday:Qr,hour:Ae,minute:Ae,second:Ae,timeZoneName:Qr};function gt(e){return typeof e=="undefined"}function ku(e){return typeof e=="number"}function Fg(e){return typeof e=="number"&&e%1===0}function QK(e){return typeof e=="string"}function eY(e){return Object.prototype.toString.call(e)==="[object Date]"}function TA(){try{return typeof Intl!="undefined"&&!!Intl.RelativeTimeFormat}catch{return!1}}function tY(e){return Array.isArray(e)?e:[e]}function F7(e,t,i){if(e.length!==0)return e.reduce((s,l)=>{const d=[t(l),l];return s&&i(s[0],d[0])===s[0]?s:d},null)[1]}function iY(e,t){return t.reduce((i,s)=>(i[s]=e[s],i),{})}function Rc(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ro(e,t,i){return Fg(e)&&e>=t&&e<=i}function rY(e,t){return e-t*Math.floor(e/t)}function xi(e,t=2){const i=e<0;let s;return i?s="-"+(""+-e).padStart(t,"0"):s=(""+e).padStart(t,"0"),s}function Ra(e){if(!(gt(e)||e===null||e===""))return parseInt(e,10)}function yl(e){if(!(gt(e)||e===null||e===""))return parseFloat(e)}function B4(e){if(!(gt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function H4(e,t,i=!1){const s=10**t;return(i?Math.trunc:Math.round)(e*s)/s}function Qd(e){return e%4===0&&(e%100!==0||e%400===0)}function W0(e){return Qd(e)?366:365}function Em(e,t){const i=rY(t-1,12)+1,s=e+(t-i)/12;return i===2?Qd(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function W4(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900)),+t}function km(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,i=e-1,s=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return t===4||s===3?53:52}function A3(e){return e>99?e:e>60?1900+e:2e3+e}function EA(e,t,i,s=null){const l=new Date(e),d={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(d.timeZone=s);const y=J({timeZoneName:t},d),g=new Intl.DateTimeFormat(i,y).formatToParts(l).find(_=>_.type.toLowerCase()==="timezonename");return g?g.value:null}function Rg(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const s=parseInt(t,10)||0,l=i<0||Object.is(i,-0)?-s:s;return i*60+l}function kA(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new xs(`Invalid unit value ${e}`);return t}function Am(e,t){const i={};for(const s in e)if(Rc(e,s)){const l=e[s];if(l==null)continue;i[t(s)]=kA(l)}return i}function Om(e,t){const i=Math.trunc(Math.abs(e/60)),s=Math.trunc(Math.abs(e%60)),l=e>=0?"+":"-";switch(t){case"short":return`${l}${xi(i,2)}:${xi(s,2)}`;case"narrow":return`${l}${i}${s>0?`:${s}`:""}`;case"techie":return`${l}${xi(i,2)}${xi(s,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Lg(e){return iY(e,["hour","minute","second","millisecond"])}const sY=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/,nY=["January","February","March","April","May","June","July","August","September","October","November","December"],AA=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],oY=["J","F","M","A","M","J","J","A","S","O","N","D"];function OA(e){switch(e){case"narrow":return[...oY];case"short":return[...AA];case"long":return[...nY];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const CA=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],PA=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],aY=["M","T","W","T","F","S","S"];function NA(e){switch(e){case"narrow":return[...aY];case"short":return[...PA];case"long":return[...CA];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const jA=["AM","PM"],lY=["Before Christ","Anno Domini"],uY=["BC","AD"],hY=["B","A"];function FA(e){switch(e){case"narrow":return[...hY];case"short":return[...uY];case"long":return[...lY];default:return null}}function cY(e){return jA[e.hour<12?0:1]}function pY(e,t){return NA(t)[e.weekday-1]}function dY(e,t){return OA(t)[e.month-1]}function fY(e,t){return FA(t)[e.year<0?0:1]}function yY(e,t,i="always",s=!1){const l={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},d=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&d){const O=e==="days";switch(t){case 1:return O?"tomorrow":`next ${l[e][0]}`;case-1:return O?"yesterday":`last ${l[e][0]}`;case 0:return O?"today":`this ${l[e][0]}`}}const y=Object.is(t,-0)||t<0,g=Math.abs(t),_=g===1,M=l[e],E=s?_?M[1]:M[2]||M[1]:_?l[e][0]:e;return y?`${g} ${E} ago`:`in ${g} ${E}`}function R7(e,t){let i="";for(const s of e)s.literal?i+=s.val:i+=t(s.val);return i}const mY={D:k3,DD:lA,DDD:uA,DDDD:hA,t:cA,tt:pA,ttt:dA,tttt:fA,T:yA,TT:mA,TTT:gA,TTTT:vA,f:bA,ff:_A,fff:SA,ffff:$A,F:wA,FF:xA,FFF:MA,FFFF:IA};class Er{static create(t,i={}){return new Er(t,i)}static parseFormat(t){let i=null,s="",l=!1;const d=[];for(let y=0;y<t.length;y++){const g=t.charAt(y);g==="'"?(s.length>0&&d.push({literal:l,val:s}),i=null,s="",l=!l):l||g===i?s+=g:(s.length>0&&d.push({literal:!1,val:s}),s=g,i=g)}return s.length>0&&d.push({literal:l,val:s}),d}static macroTokenToFormatOpts(t){return mY[t]}constructor(t,i){this.opts=i,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,J(J({},this.opts),i)).format()}formatDateTime(t,i={}){return this.loc.dtFormatter(t,J(J({},this.opts),i)).format()}formatDateTimeParts(t,i={}){return this.loc.dtFormatter(t,J(J({},this.opts),i)).formatToParts()}resolvedOptions(t,i={}){return this.loc.dtFormatter(t,J(J({},this.opts),i)).resolvedOptions()}num(t,i=0){if(this.opts.forceSimple)return xi(t,i);const s=J({},this.opts);return i>0&&(s.padTo=i),this.loc.numberFormatter(s).format(t)}formatDateTimeFromString(t,i){const s=this.loc.listingMode()==="en",l=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",d=(j,R)=>this.loc.extract(t,j,R),y=j=>t.isOffsetFixed&&t.offset===0&&j.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,j.format):"",g=()=>s?cY(t):d({hour:"numeric",hourCycle:"h12"},"dayperiod"),_=(j,R)=>s?dY(t,j):d(R?{month:j}:{month:j,day:"numeric"},"month"),M=(j,R)=>s?pY(t,j):d(R?{weekday:j}:{weekday:j,month:"long",day:"numeric"},"weekday"),E=j=>{const R=Er.macroTokenToFormatOpts(j);return R?this.formatWithSystemDefault(t,R):j},O=j=>s?fY(t,j):d({era:j},"era"),P=j=>{switch(j){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return y({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return y({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return y({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return g();case"d":return l?d({day:"numeric"},"day"):this.num(t.day);case"dd":return l?d({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return M("short",!0);case"cccc":return M("long",!0);case"ccccc":return M("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return M("short",!1);case"EEEE":return M("long",!1);case"EEEEE":return M("narrow",!1);case"L":return l?d({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return l?d({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return _("short",!0);case"LLLL":return _("long",!0);case"LLLLL":return _("narrow",!0);case"M":return l?d({month:"numeric"},"month"):this.num(t.month);case"MM":return l?d({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return _("short",!1);case"MMMM":return _("long",!1);case"MMMMM":return _("narrow",!1);case"y":return l?d({year:"numeric"},"year"):this.num(t.year);case"yy":return l?d({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return l?d({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return l?d({year:"numeric"},"year"):this.num(t.year,6);case"G":return O("short");case"GG":return O("long");case"GGGGG":return O("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return E(j)}};return R7(Er.parseFormat(i),P)}formatDurationFromString(t,i){const s=_=>{switch(_[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},l=_=>M=>{const E=s(M);return E?this.num(_.get(E),M.length):M},d=Er.parseFormat(i),y=d.reduce((_,{literal:M,val:E})=>M?_:_.concat(E),[]),g=t.shiftTo(...y.map(s).filter(_=>_));return R7(d,l(g))}}class on{constructor(t,i){this.reason=t,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class ef{get type(){throw new ta}get name(){throw new ta}get isUniversal(){throw new ta}offsetName(t,i){throw new ta}formatOffset(t,i){throw new ta}offset(t){throw new ta}equals(t){throw new ta}get isValid(){throw new ta}}let Qv=null;class J4 extends ef{static get instance(){return Qv===null&&(Qv=new J4),Qv}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:i,locale:s}){return EA(t,i,s)}formatOffset(t,i){return Om(this.offset(t),i)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let X1={};function gY(e){return X1[e]||(X1[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),X1[e]}const vY={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function bY(e,t){const i=e.format(t).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,l,d,y,g,_,M,E]=s;return[y,l,d,g,_,M,E]}function wY(e,t){const i=e.formatToParts(t),s=[];for(let l=0;l<i.length;l++){const{type:d,value:y}=i[l],g=vY[d];d==="era"?s[g]=y:gt(g)||(s[g]=parseInt(y,10))}return s}let Vf={};class Uo extends ef{static create(t){return Vf[t]||(Vf[t]=new Uo(t)),Vf[t]}static resetCache(){Vf={},X1={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super();this.zoneName=t,this.valid=Uo.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:i,locale:s}){return EA(t,i,s,this.name)}formatOffset(t,i){return Om(this.offset(t),i)}offset(t){const i=new Date(t);if(isNaN(i))return NaN;const s=gY(this.name);let[l,d,y,g,_,M,E]=s.formatToParts?wY(s,i):bY(s,i);g==="BC"&&(l=-Math.abs(l)+1);const P=W4({year:l,month:d,day:y,hour:_===24?0:_,minute:M,second:E,millisecond:0});let j=+i;const R=j%1e3;return j-=R>=0?R:1e3+R,(P-j)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let e2=null;class cr extends ef{static get utcInstance(){return e2===null&&(e2=new cr(0)),e2}static instance(t){return t===0?cr.utcInstance:new cr(t)}static parseSpecifier(t){if(t){const i=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new cr(Rg(i[1],i[2]))}return null}constructor(t){super();this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Om(this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,i){return Om(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class _Y extends ef{constructor(t){super();this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Ga(e,t){if(gt(e)||e===null)return t;if(e instanceof ef)return e;if(QK(e)){const i=e.toLowerCase();return i==="local"||i==="system"?t:i==="utc"||i==="gmt"?cr.utcInstance:cr.parseSpecifier(i)||Uo.create(e)}else return ku(e)?cr.instance(e):typeof e=="object"&&e.offset&&typeof e.offset=="number"?e:new _Y(e)}let L7=()=>Date.now(),D7="system",z7=null,V7=null,G7=null,q7;class Oi{static get now(){return L7}static set now(t){L7=t}static set defaultZone(t){D7=t}static get defaultZone(){return Ga(D7,J4.instance)}static get defaultLocale(){return z7}static set defaultLocale(t){z7=t}static get defaultNumberingSystem(){return V7}static set defaultNumberingSystem(t){V7=t}static get defaultOutputCalendar(){return G7}static set defaultOutputCalendar(t){G7=t}static get throwOnInvalid(){return q7}static set throwOnInvalid(t){q7=t}static resetCaches(){ii.resetCache(),Uo.resetCache()}}let U7={};function xY(e,t={}){const i=JSON.stringify([e,t]);let s=U7[i];return s||(s=new Intl.ListFormat(e,t),U7[i]=s),s}let O3={};function C3(e,t={}){const i=JSON.stringify([e,t]);let s=O3[i];return s||(s=new Intl.DateTimeFormat(e,t),O3[i]=s),s}let P3={};function SY(e,t={}){const i=JSON.stringify([e,t]);let s=P3[i];return s||(s=new Intl.NumberFormat(e,t),P3[i]=s),s}let N3={};function MY(e,t={}){const y=t,{base:i}=y,s=pv(y,["base"]),l=JSON.stringify([e,s]);let d=N3[l];return d||(d=new Intl.RelativeTimeFormat(e,t),N3[l]=d),d}let y0=null;function $Y(){return y0||(y0=new Intl.DateTimeFormat().resolvedOptions().locale,y0)}function IY(e){const t=e.indexOf("-u-");if(t===-1)return[e];{let i;const s=e.substring(0,t);try{i=C3(e).resolvedOptions()}catch{i=C3(s).resolvedOptions()}const{numberingSystem:l,calendar:d}=i;return[s,l,d]}}function TY(e,t,i){return(i||t)&&(e+="-u",i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`)),e}function EY(e){const t=[];for(let i=1;i<=12;i++){const s=Qe.utc(2016,i,1);t.push(e(s))}return t}function kY(e){const t=[];for(let i=1;i<=7;i++){const s=Qe.utc(2016,11,13+i);t.push(e(s))}return t}function Gf(e,t,i,s,l){const d=e.listingMode(i);return d==="error"?null:d==="en"?s(t):l(t)}function AY(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class OY{constructor(t,i,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const g=s,{padTo:l,floor:d}=g,y=pv(g,["padTo","floor"]);if(!i||Object.keys(y).length>0){const _=J({useGrouping:!1},s);s.padTo>0&&(_.minimumIntegerDigits=s.padTo),this.inf=SY(t,_)}}format(t){if(this.inf){const i=this.floor?Math.floor(t):t;return this.inf.format(i)}else{const i=this.floor?Math.floor(t):H4(t,3);return xi(i,this.padTo)}}}class CY{constructor(t,i,s){this.opts=s;let l;if(t.zone.isUniversal){const y=-1*(t.offset/60),g=y>=0?`Etc/GMT+${y}`:`Etc/GMT${y}`;t.offset!==0&&Uo.create(g).valid?(l=g,this.dt=t):(l="UTC",s.timeZoneName?this.dt=t:this.dt=t.offset===0?t:Qe.fromMillis(t.ts+t.offset*60*1e3))}else t.zone.type==="system"?this.dt=t:(this.dt=t,l=t.zone.name);const d=J({},this.opts);l&&(d.timeZone=l),this.dtf=C3(i,d)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class PY{constructor(t,i,s){this.opts=J({style:"long"},s),!i&&TA()&&(this.rtf=MY(t,s))}format(t,i){return this.rtf?this.rtf.format(t,i):yY(i,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,i){return this.rtf?this.rtf.formatToParts(t,i):[]}}class ii{static fromOpts(t){return ii.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,i,s,l=!1){const d=t||Oi.defaultLocale,y=d||(l?"en-US":$Y()),g=i||Oi.defaultNumberingSystem,_=s||Oi.defaultOutputCalendar;return new ii(y,g,_,d)}static resetCache(){y0=null,O3={},P3={},N3={}}static fromObject({locale:t,numberingSystem:i,outputCalendar:s}={}){return ii.create(t,i,s)}constructor(t,i,s,l){const[d,y,g]=IY(t);this.locale=d,this.numberingSystem=i||y||null,this.outputCalendar=s||g||null,this.intl=TY(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=l,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=AY(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:ii.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone(Te(J({},t),{defaultToEN:!0}))}redefaultToSystem(t={}){return this.clone(Te(J({},t),{defaultToEN:!1}))}months(t,i=!1,s=!0){return Gf(this,t,s,OA,()=>{const l=i?{month:t,day:"numeric"}:{month:t},d=i?"format":"standalone";return this.monthsCache[d][t]||(this.monthsCache[d][t]=EY(y=>this.extract(y,l,"month"))),this.monthsCache[d][t]})}weekdays(t,i=!1,s=!0){return Gf(this,t,s,NA,()=>{const l=i?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},d=i?"format":"standalone";return this.weekdaysCache[d][t]||(this.weekdaysCache[d][t]=kY(y=>this.extract(y,l,"weekday"))),this.weekdaysCache[d][t]})}meridiems(t=!0){return Gf(this,void 0,t,()=>jA,()=>{if(!this.meridiemCache){const i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Qe.utc(2016,11,13,9),Qe.utc(2016,11,13,19)].map(s=>this.extract(s,i,"dayperiod"))}return this.meridiemCache})}eras(t,i=!0){return Gf(this,t,i,FA,()=>{const s={era:t};return this.eraCache[t]||(this.eraCache[t]=[Qe.utc(-40,1,1),Qe.utc(2017,1,1)].map(l=>this.extract(l,s,"era"))),this.eraCache[t]})}extract(t,i,s){const l=this.dtFormatter(t,i),d=l.formatToParts(),y=d.find(g=>g.type.toLowerCase()===s);return y?y.value:null}numberFormatter(t={}){return new OY(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,i={}){return new CY(t,this.intl,i)}relFormatter(t={}){return new PY(this.intl,this.isEnglish(),t)}listFormatter(t={}){return xY(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}function op(...e){const t=e.reduce((i,s)=>i+s.source,"");return RegExp(`^${t}$`)}function oh(...e){return t=>e.reduce(([i,s,l],d)=>{const[y,g,_]=d(t,l);return[J(J({},i),y),s||g,_]},[{},null,1]).slice(0,2)}function ap(e,...t){if(e==null)return[null,null];for(const[i,s]of t){const l=i.exec(e);if(l)return s(l)}return[null,null]}function RA(...e){return(t,i)=>{const s={};let l;for(l=0;l<e.length;l++)s[e[l]]=Ra(t[i+l]);return[s,null,i+l]}}const LA=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,K4=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,DA=RegExp(`${K4.source}${LA.source}?`),Y4=RegExp(`(?:T${DA.source})?`),NY=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,jY=/(\d{4})-?W(\d\d)(?:-?(\d))?/,FY=/(\d{4})-?(\d{3})/,RY=RA("weekYear","weekNumber","weekDay"),LY=RA("year","ordinal"),DY=/(\d{4})-(\d\d)-(\d\d)/,zA=RegExp(`${K4.source} ?(?:${LA.source}|(${sY.source}))?`),zY=RegExp(`(?: ${zA.source})?`);function Sc(e,t,i){const s=e[t];return gt(s)?i:Ra(s)}function VA(e,t){return[{year:Sc(e,t),month:Sc(e,t+1,1),day:Sc(e,t+2,1)},null,t+3]}function ah(e,t){return[{hours:Sc(e,t,0),minutes:Sc(e,t+1,0),seconds:Sc(e,t+2,0),milliseconds:B4(e[t+3])},null,t+4]}function lp(e,t){const i=!e[t]&&!e[t+1],s=Rg(e[t+1],e[t+2]),l=i?null:cr.instance(s);return[{},l,t+3]}function GA(e,t){const i=e[t]?Uo.create(e[t]):null;return[{},i,t+1]}const VY=RegExp(`^T?${K4.source}$`),GY=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function qY(e){const[t,i,s,l,d,y,g,_,M]=e,E=t[0]==="-",O=_&&_[0]==="-",P=(j,R=!1)=>j!==void 0&&(R||j&&E)?-j:j;return[{years:P(yl(i)),months:P(yl(s)),weeks:P(yl(l)),days:P(yl(d)),hours:P(yl(y)),minutes:P(yl(g)),seconds:P(yl(_),_==="-0"),milliseconds:P(B4(M),O)}]}const UY={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function X4(e,t,i,s,l,d,y){const g={year:t.length===2?A3(Ra(t)):Ra(t),month:AA.indexOf(i)+1,day:Ra(s),hour:Ra(l),minute:Ra(d)};return y&&(g.second=Ra(y)),e&&(g.weekday=e.length>3?CA.indexOf(e)+1:PA.indexOf(e)+1),g}const BY=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function HY(e){const[,t,i,s,l,d,y,g,_,M,E,O]=e,P=X4(t,l,s,i,d,y,g);let j;return _?j=UY[_]:M?j=0:j=Rg(E,O),[P,new cr(j)]}function WY(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const JY=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,KY=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,YY=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function B7(e){const[,t,i,s,l,d,y,g]=e;return[X4(t,l,s,i,d,y,g),cr.utcInstance]}function XY(e){const[,t,i,s,l,d,y,g]=e;return[X4(t,g,i,s,l,d,y),cr.utcInstance]}const ZY=op(NY,Y4),QY=op(jY,Y4),eX=op(FY,Y4),tX=op(DA),iX=oh(VA,ah,lp),rX=oh(RY,ah,lp),sX=oh(LY,ah,lp),nX=oh(ah,lp);function oX(e){return ap(e,[ZY,iX],[QY,rX],[eX,sX],[tX,nX])}function aX(e){return ap(WY(e),[BY,HY])}function lX(e){return ap(e,[JY,B7],[KY,B7],[YY,XY])}function uX(e){return ap(e,[GY,qY])}const hX=oh(ah);function cX(e){return ap(e,[VY,hX])}const pX=op(DY,zY),dX=op(zA),fX=oh(VA,ah,lp,GA),yX=oh(ah,lp,GA);function mX(e){return ap(e,[pX,fX],[dX,yX])}const gX="Invalid Duration",qA={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},vX=J({years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3}},qA),as=146097/400,ph=146097/4800,bX=J({years:{quarters:4,months:12,weeks:as/7,days:as,hours:as*24,minutes:as*24*60,seconds:as*24*60*60,milliseconds:as*24*60*60*1e3},quarters:{months:3,weeks:as/28,days:as/4,hours:as*24/4,minutes:as*24*60/4,seconds:as*24*60*60/4,milliseconds:as*24*60*60*1e3/4},months:{weeks:ph/7,days:ph,hours:ph*24,minutes:ph*24*60,seconds:ph*24*60*60,milliseconds:ph*24*60*60*1e3}},qA),zl=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],wX=zl.slice(0).reverse();function ml(e,t,i=!1){const s={values:i?t.values:J(J({},e.values),t.values||{}),loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy};return new wt(s)}function _X(e){return e<0?Math.floor(e):Math.ceil(e)}function UA(e,t,i,s,l){const d=e[l][i],y=t[i]/d,g=Math.sign(y)===Math.sign(s[l]),_=!g&&s[l]!==0&&Math.abs(y)<=1?_X(y):Math.trunc(y);s[l]+=_,t[i]-=_*d}function xX(e,t){wX.reduce((i,s)=>gt(t[s])?i:(i&&UA(e,t,i,t,s),s),null)}class wt{constructor(t){const i=t.conversionAccuracy==="longterm"||!1;this.values=t.values,this.loc=t.loc||ii.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i?bX:vX,this.isLuxonDuration=!0}static fromMillis(t,i){return wt.fromObject({milliseconds:t},i)}static fromObject(t,i={}){if(t==null||typeof t!="object")throw new xs(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new wt({values:Am(t,wt.normalizeUnit),loc:ii.fromObject(i),conversionAccuracy:i.conversionAccuracy})}static fromDurationLike(t){if(ku(t))return wt.fromMillis(t);if(wt.isDuration(t))return t;if(typeof t=="object")return wt.fromObject(t);throw new xs(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,i){const[s]=uX(t);return s?wt.fromObject(s,i):wt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,i){const[s]=cX(t);return s?wt.fromObject(s,i):wt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,i=null){if(!t)throw new xs("need to specify a reason the Duration is invalid");const s=t instanceof on?t:new on(t,i);if(Oi.throwOnInvalid)throw new YK(s);return new wt({invalid:s})}static normalizeUnit(t){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!i)throw new aA(t);return i}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,i={}){const s=Te(J({},i),{floor:i.round!==!1&&i.floor!==!1});return this.isValid?Er.create(this.loc,s).formatDurationFromString(this,t):gX}toHuman(t={}){const i=zl.map(s=>{const l=this.values[s];return gt(l)?null:this.loc.numberFormatter(Te(J({style:"unit",unitDisplay:"long"},t),{unit:s.slice(0,-1)})).format(l)}).filter(s=>s);return this.loc.listFormatter(J({type:"conjunction",style:t.listStyle||"narrow"},t)).format(i)}toObject(){return this.isValid?J({},this.values):{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=H4(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const i=this.toMillis();if(i<0||i>=864e5)return null;t=J({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},t);const s=this.shiftTo("hours","minutes","seconds","milliseconds");let l=t.format==="basic"?"hhmm":"hh:mm";(!t.suppressSeconds||s.seconds!==0||s.milliseconds!==0)&&(l+=t.format==="basic"?"ss":":ss",(!t.suppressMilliseconds||s.milliseconds!==0)&&(l+=".SSS"));let d=s.toFormat(l);return t.includePrefix&&(d="T"+d),d}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const i=wt.fromDurationLike(t),s={};for(const l of zl)(Rc(i.values,l)||Rc(this.values,l))&&(s[l]=i.get(l)+this.get(l));return ml(this,{values:s},!0)}minus(t){if(!this.isValid)return this;const i=wt.fromDurationLike(t);return this.plus(i.negate())}mapUnits(t){if(!this.isValid)return this;const i={};for(const s of Object.keys(this.values))i[s]=kA(t(this.values[s],s));return ml(this,{values:i},!0)}get(t){return this[wt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const i=J(J({},this.values),Am(t,wt.normalizeUnit));return ml(this,{values:i})}reconfigure({locale:t,numberingSystem:i,conversionAccuracy:s}={}){const l=this.loc.clone({locale:t,numberingSystem:i}),d={loc:l};return s&&(d.conversionAccuracy=s),ml(this,d)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return xX(this.matrix,t),ml(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(y=>wt.normalizeUnit(y));const i={},s={},l=this.toObject();let d;for(const y of zl)if(t.indexOf(y)>=0){d=y;let g=0;for(const M in s)g+=this.matrix[M][y]*s[M],s[M]=0;ku(l[y])&&(g+=l[y]);const _=Math.trunc(g);i[y]=_,s[y]=(g*1e3-_*1e3)/1e3;for(const M in l)zl.indexOf(M)>zl.indexOf(y)&&UA(this.matrix,l,M,i,y)}else ku(l[y])&&(s[y]=l[y]);for(const y in s)s[y]!==0&&(i[d]+=y===d?s[y]:s[y]/this.matrix[d][y]);return ml(this,{values:i},!0).normalize()}negate(){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=this.values[i]===0?0:-this.values[i];return ml(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function i(s,l){return s===void 0||s===0?l===void 0||l===0:s===l}for(const s of zl)if(!i(this.values[s],t.values[s]))return!1;return!0}}const Ip="Invalid Interval";function SX(e,t){return!e||!e.isValid?hi.invalid("missing or invalid start"):!t||!t.isValid?hi.invalid("missing or invalid end"):t<e?hi.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class hi{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,i=null){if(!t)throw new xs("need to specify a reason the Interval is invalid");const s=t instanceof on?t:new on(t,i);if(Oi.throwOnInvalid)throw new KK(s);return new hi({invalid:s})}static fromDateTimes(t,i){const s=kp(t),l=kp(i),d=SX(s,l);return d==null?new hi({start:s,end:l}):d}static after(t,i){const s=wt.fromDurationLike(i),l=kp(t);return hi.fromDateTimes(l,l.plus(s))}static before(t,i){const s=wt.fromDurationLike(i),l=kp(t);return hi.fromDateTimes(l.minus(s),l)}static fromISO(t,i){const[s,l]=(t||"").split("/",2);if(s&&l){let d,y;try{d=Qe.fromISO(s,i),y=d.isValid}catch{y=!1}let g,_;try{g=Qe.fromISO(l,i),_=g.isValid}catch{_=!1}if(y&&_)return hi.fromDateTimes(d,g);if(y){const M=wt.fromISO(l,i);if(M.isValid)return hi.after(d,M)}else if(_){const M=wt.fromISO(s,i);if(M.isValid)return hi.before(g,M)}}return hi.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const i=this.start.startOf(t),s=this.end.startOf(t);return Math.floor(s.diff(i,t).get(t))+1}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:i}={}){return this.isValid?hi.fromDateTimes(t||this.s,i||this.e):this}splitAt(...t){if(!this.isValid)return[];const i=t.map(kp).filter(y=>this.contains(y)).sort(),s=[];let{s:l}=this,d=0;for(;l<this.e;){const y=i[d]||this.e,g=+y>+this.e?this.e:y;s.push(hi.fromDateTimes(l,g)),l=g,d+=1}return s}splitBy(t){const i=wt.fromDurationLike(t);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s}=this,l=1,d;const y=[];for(;s<this.e;){const g=this.start.plus(i.mapUnits(_=>_*l));d=+g>+this.e?this.e:g,y.push(hi.fromDateTimes(s,d)),s=d,l+=1}return y}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const i=this.s>t.s?this.s:t.s,s=this.e<t.e?this.e:t.e;return i>=s?null:hi.fromDateTimes(i,s)}union(t){if(!this.isValid)return this;const i=this.s<t.s?this.s:t.s,s=this.e>t.e?this.e:t.e;return hi.fromDateTimes(i,s)}static merge(t){const[i,s]=t.sort((l,d)=>l.s-d.s).reduce(([l,d],y)=>d?d.overlaps(y)||d.abutsStart(y)?[l,d.union(y)]:[l.concat([d]),y]:[l,y],[[],null]);return s&&i.push(s),i}static xor(t){let i=null,s=0;const l=[],d=t.map(_=>[{time:_.s,type:"s"},{time:_.e,type:"e"}]),y=Array.prototype.concat(...d),g=y.sort((_,M)=>_.time-M.time);for(const _ of g)s+=_.type==="s"?1:-1,s===1?i=_.time:(i&&+i!=+_.time&&l.push(hi.fromDateTimes(i,_.time)),i=null);return hi.merge(l)}difference(...t){return hi.xor([this].concat(t)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Ip}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Ip}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ip}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Ip}toFormat(t,{separator:i=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(t)}${i}${this.e.toFormat(t)}`:Ip}toDuration(t,i){return this.isValid?this.e.diff(this.s,t,i):wt.invalid(this.invalidReason)}mapEndpoints(t){return hi.fromDateTimes(t(this.s),t(this.e))}}class qf{static hasDST(t=Oi.defaultZone){const i=Qe.now().setZone(t).set({month:12});return!t.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(t){return Uo.isValidZone(t)}static normalizeZone(t){return Ga(t,Oi.defaultZone)}static months(t="long",{locale:i=null,numberingSystem:s=null,locObj:l=null,outputCalendar:d="gregory"}={}){return(l||ii.create(i,s,d)).months(t)}static monthsFormat(t="long",{locale:i=null,numberingSystem:s=null,locObj:l=null,outputCalendar:d="gregory"}={}){return(l||ii.create(i,s,d)).months(t,!0)}static weekdays(t="long",{locale:i=null,numberingSystem:s=null,locObj:l=null}={}){return(l||ii.create(i,s,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:i=null,numberingSystem:s=null,locObj:l=null}={}){return(l||ii.create(i,s,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return ii.create(t).meridiems()}static eras(t="short",{locale:i=null}={}){return ii.create(i,null,"gregory").eras(t)}static features(){return{relative:TA()}}}function H7(e,t){const i=l=>l.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=i(t)-i(e);return Math.floor(wt.fromMillis(s).as("days"))}function MX(e,t,i){const s=[["years",(g,_)=>_.year-g.year],["quarters",(g,_)=>_.quarter-g.quarter],["months",(g,_)=>_.month-g.month+(_.year-g.year)*12],["weeks",(g,_)=>{const M=H7(g,_);return(M-M%7)/7}],["days",H7]],l={};let d,y;for(const[g,_]of s)if(i.indexOf(g)>=0){d=g;let M=_(e,t);y=e.plus({[g]:M}),y>t?(e=e.plus({[g]:M-1}),M-=1):e=y,l[g]=M}return[e,l,y,d]}function $X(e,t,i,s){let[l,d,y,g]=MX(e,t,i);const _=t-l,M=i.filter(O=>["hours","minutes","seconds","milliseconds"].indexOf(O)>=0);M.length===0&&(y<t&&(y=l.plus({[g]:1})),y!==l&&(d[g]=(d[g]||0)+_/(y-l)));const E=wt.fromObject(d,s);return M.length>0?wt.fromMillis(_,s).shiftTo(...M).plus(E):E}const Z4={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},W7={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},IX=Z4.hanidec.replace(/[\[|\]]/g,"").split("");function TX(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);if(e[i].search(Z4.hanidec)!==-1)t+=IX.indexOf(e[i]);else for(const l in W7){const[d,y]=W7[l];s>=d&&s<=y&&(t+=s-d)}}return parseInt(t,10)}else return t}function js({numberingSystem:e},t=""){return new RegExp(`${Z4[e||"latn"]}${t}`)}const EX="missing Intl.DateTimeFormat.formatToParts support";function It(e,t=i=>i){return{regex:e,deser:([i])=>t(TX(i))}}const kX=String.fromCharCode(160),BA=`( |${kX})`,HA=new RegExp(BA,"g");function AX(e){return e.replace(/\./g,"\\.?").replace(HA,BA)}function J7(e){return e.replace(/\./g,"").replace(HA," ").toLowerCase()}function Fs(e,t){return e===null?null:{regex:RegExp(e.map(AX).join("|")),deser:([i])=>e.findIndex(s=>J7(i)===J7(s))+t}}function K7(e,t){return{regex:e,deser:([,i,s])=>Rg(i,s),groups:t}}function t2(e){return{regex:e,deser:([t])=>t}}function OX(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function CX(e,t){const i=js(t),s=js(t,"{2}"),l=js(t,"{3}"),d=js(t,"{4}"),y=js(t,"{6}"),g=js(t,"{1,2}"),_=js(t,"{1,3}"),M=js(t,"{1,6}"),E=js(t,"{1,9}"),O=js(t,"{2,4}"),P=js(t,"{4,6}"),j=q=>({regex:RegExp(OX(q.val)),deser:([Y])=>Y,literal:!0}),z=(q=>{if(e.literal)return j(q);switch(q.val){case"G":return Fs(t.eras("short",!1),0);case"GG":return Fs(t.eras("long",!1),0);case"y":return It(M);case"yy":return It(O,A3);case"yyyy":return It(d);case"yyyyy":return It(P);case"yyyyyy":return It(y);case"M":return It(g);case"MM":return It(s);case"MMM":return Fs(t.months("short",!0,!1),1);case"MMMM":return Fs(t.months("long",!0,!1),1);case"L":return It(g);case"LL":return It(s);case"LLL":return Fs(t.months("short",!1,!1),1);case"LLLL":return Fs(t.months("long",!1,!1),1);case"d":return It(g);case"dd":return It(s);case"o":return It(_);case"ooo":return It(l);case"HH":return It(s);case"H":return It(g);case"hh":return It(s);case"h":return It(g);case"mm":return It(s);case"m":return It(g);case"q":return It(g);case"qq":return It(s);case"s":return It(g);case"ss":return It(s);case"S":return It(_);case"SSS":return It(l);case"u":return t2(E);case"uu":return t2(g);case"uuu":return It(i);case"a":return Fs(t.meridiems(),0);case"kkkk":return It(d);case"kk":return It(O,A3);case"W":return It(g);case"WW":return It(s);case"E":case"c":return It(i);case"EEE":return Fs(t.weekdays("short",!1,!1),1);case"EEEE":return Fs(t.weekdays("long",!1,!1),1);case"ccc":return Fs(t.weekdays("short",!0,!1),1);case"cccc":return Fs(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return K7(new RegExp(`([+-]${g.source})(?::(${s.source}))?`),2);case"ZZZ":return K7(new RegExp(`([+-]${g.source})(${s.source})?`),2);case"z":return t2(/[a-z_+-/]{1,256}?/i);default:return j(q)}})(e)||{invalidReason:EX};return z.token=e,z}const PX={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function NX(e,t,i){const{type:s,value:l}=e;if(s==="literal")return{literal:!0,val:l};const d=i[s];let y=PX[s];if(typeof y=="object"&&(y=y[d]),y)return{literal:!1,val:y}}function jX(e){return[`^${e.map(i=>i.regex).reduce((i,s)=>`${i}(${s.source})`,"")}$`,e]}function FX(e,t,i){const s=e.match(t);if(s){const l={};let d=1;for(const y in i)if(Rc(i,y)){const g=i[y],_=g.groups?g.groups+1:1;!g.literal&&g.token&&(l[g.token.val[0]]=g.deser(s.slice(d,d+_))),d+=_}return[s,l]}else return[s,{}]}function RX(e){const t=d=>{switch(d){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,s;return gt(e.z)||(i=Uo.create(e.z)),gt(e.Z)||(i||(i=new cr(e.Z)),s=e.Z),gt(e.q)||(e.M=(e.q-1)*3+1),gt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),gt(e.u)||(e.S=B4(e.u)),[Object.keys(e).reduce((d,y)=>{const g=t(y);return g&&(d[g]=e[y]),d},{}),i,s]}let i2=null;function LX(){return i2||(i2=Qe.fromMillis(1555555555555)),i2}function DX(e,t){if(e.literal)return e;const i=Er.macroTokenToFormatOpts(e.val);if(!i)return e;const d=Er.create(t,i).formatDateTimeParts(LX()).map(y=>NX(y,t,i));return d.includes(void 0)?e:d}function zX(e,t){return Array.prototype.concat(...e.map(i=>DX(i,t)))}function WA(e,t,i){const s=zX(Er.parseFormat(i),e),l=s.map(y=>CX(y,e)),d=l.find(y=>y.invalidReason);if(d)return{input:t,tokens:s,invalidReason:d.invalidReason};{const[y,g]=jX(l),_=RegExp(y,"i"),[M,E]=FX(t,_,g),[O,P,j]=E?RX(E):[null,null,void 0];if(Rc(E,"a")&&Rc(E,"H"))throw new f0("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:s,regex:_,rawMatches:M,matches:E,result:O,zone:P,specificOffset:j}}}function VX(e,t,i){const{result:s,zone:l,specificOffset:d,invalidReason:y}=WA(e,t,i);return[s,l,d,y]}const JA=[0,31,59,90,120,151,181,212,243,273,304,334],KA=[0,31,60,91,121,152,182,213,244,274,305,335];function Ss(e,t){return new on("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function YA(e,t,i){const s=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const l=s.getUTCDay();return l===0?7:l}function XA(e,t,i){return i+(Qd(e)?KA:JA)[t-1]}function ZA(e,t){const i=Qd(e)?KA:JA,s=i.findIndex(d=>d<t),l=t-i[s];return{month:s+1,day:l}}function j3(e){const{year:t,month:i,day:s}=e,l=XA(t,i,s),d=YA(t,i,s);let y=Math.floor((l-d+10)/7),g;return y<1?(g=t-1,y=km(g)):y>km(t)?(g=t+1,y=1):g=t,J({weekYear:g,weekNumber:y,weekday:d},Lg(e))}function Y7(e){const{weekYear:t,weekNumber:i,weekday:s}=e,l=YA(t,1,4),d=W0(t);let y=i*7+s-l-3,g;y<1?(g=t-1,y+=W0(g)):y>d?(g=t+1,y-=W0(t)):g=t;const{month:_,day:M}=ZA(g,y);return J({year:g,month:_,day:M},Lg(e))}function r2(e){const{year:t,month:i,day:s}=e,l=XA(t,i,s);return J({year:t,ordinal:l},Lg(e))}function X7(e){const{year:t,ordinal:i}=e,{month:s,day:l}=ZA(t,i);return J({year:t,month:s,day:l},Lg(e))}function GX(e){const t=Fg(e.weekYear),i=Ro(e.weekNumber,1,km(e.weekYear)),s=Ro(e.weekday,1,7);return t?i?s?!1:Ss("weekday",e.weekday):Ss("week",e.week):Ss("weekYear",e.weekYear)}function qX(e){const t=Fg(e.year),i=Ro(e.ordinal,1,W0(e.year));return t?i?!1:Ss("ordinal",e.ordinal):Ss("year",e.year)}function QA(e){const t=Fg(e.year),i=Ro(e.month,1,12),s=Ro(e.day,1,Em(e.year,e.month));return t?i?s?!1:Ss("day",e.day):Ss("month",e.month):Ss("year",e.year)}function eO(e){const{hour:t,minute:i,second:s,millisecond:l}=e,d=Ro(t,0,23)||t===24&&i===0&&s===0&&l===0,y=Ro(i,0,59),g=Ro(s,0,59),_=Ro(l,0,999);return d?y?g?_?!1:Ss("millisecond",l):Ss("second",s):Ss("minute",i):Ss("hour",t)}const s2="Invalid DateTime",Z7=864e13;function Uf(e){return new on("unsupported zone",`the zone "${e.name}" is not supported`)}function n2(e){return e.weekData===null&&(e.weekData=j3(e.c)),e.weekData}function Tp(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Qe(Te(J(J({},i),t),{old:i}))}function tO(e,t,i){let s=e-t*60*1e3;const l=i.offset(s);if(t===l)return[s,t];s-=(l-t)*60*1e3;const d=i.offset(s);return l===d?[s,l]:[e-Math.min(l,d)*60*1e3,Math.max(l,d)]}function Q7(e,t){e+=t*60*1e3;const i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function Z1(e,t,i){return tO(W4(e),t,i)}function e8(e,t){const i=e.o,s=e.c.year+Math.trunc(t.years),l=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,d=Te(J({},e.c),{year:s,month:l,day:Math.min(e.c.day,Em(s,l))+Math.trunc(t.days)+Math.trunc(t.weeks)*7}),y=wt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),g=W4(d);let[_,M]=tO(g,i,e.zone);return y!==0&&(_+=y,M=e.zone.offset(_)),{ts:_,o:M}}function Ep(e,t,i,s,l,d){const{setZone:y,zone:g}=i;if(e&&Object.keys(e).length!==0){const _=t||g,M=Qe.fromObject(e,Te(J({},i),{zone:_,specificOffset:d}));return y?M:M.setZone(g)}else return Qe.invalid(new on("unparsable",`the input "${l}" can't be parsed as ${s}`))}function Bf(e,t,i=!0){return e.isValid?Er.create(ii.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function o2(e,t){const i=e.c.year>9999||e.c.year<0;let s="";return i&&e.c.year>=0&&(s+="+"),s+=xi(e.c.year,i?6:4),t?(s+="-",s+=xi(e.c.month),s+="-",s+=xi(e.c.day)):(s+=xi(e.c.month),s+=xi(e.c.day)),s}function t8(e,t,i,s,l){let d=xi(e.c.hour);return t?(d+=":",d+=xi(e.c.minute),(e.c.second!==0||!i)&&(d+=":")):d+=xi(e.c.minute),(e.c.second!==0||!i)&&(d+=xi(e.c.second),(e.c.millisecond!==0||!s)&&(d+=".",d+=xi(e.c.millisecond,3))),l&&(e.isOffsetFixed&&e.offset===0?d+="Z":e.o<0?(d+="-",d+=xi(Math.trunc(-e.o/60)),d+=":",d+=xi(Math.trunc(-e.o%60))):(d+="+",d+=xi(Math.trunc(e.o/60)),d+=":",d+=xi(Math.trunc(e.o%60)))),d}const iO={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},UX={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},BX={ordinal:1,hour:0,minute:0,second:0,millisecond:0},rO=["year","month","day","hour","minute","second","millisecond"],HX=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],WX=["year","ordinal","hour","minute","second","millisecond"];function i8(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new aA(e);return t}function r8(e,t){const i=Ga(t.zone,Oi.defaultZone),s=ii.fromObject(t),l=Oi.now();let d,y;if(gt(e.year))d=l;else{for(const M of rO)gt(e[M])&&(e[M]=iO[M]);const g=QA(e)||eO(e);if(g)return Qe.invalid(g);const _=i.offset(l);[d,y]=Z1(e,_,i)}return new Qe({ts:d,zone:i,loc:s,o:y})}function s8(e,t,i){const s=gt(i.round)?!0:i.round,l=(y,g)=>(y=H4(y,s||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(y,g)),d=y=>i.calendary?t.hasSame(e,y)?0:t.startOf(y).diff(e.startOf(y),y).get(y):t.diff(e,y).get(y);if(i.unit)return l(d(i.unit),i.unit);for(const y of i.units){const g=d(y);if(Math.abs(g)>=1)return l(g,y)}return l(e>t?-0:0,i.units[i.units.length-1])}function n8(e){let t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}class Qe{constructor(t){const i=t.zone||Oi.defaultZone;let s=t.invalid||(Number.isNaN(t.ts)?new on("invalid input"):null)||(i.isValid?null:Uf(i));this.ts=gt(t.ts)?Oi.now():t.ts;let l=null,d=null;if(!s)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(i))[l,d]=[t.old.c,t.old.o];else{const g=i.offset(this.ts);l=Q7(this.ts,g),s=Number.isNaN(l.year)?new on("invalid input"):null,l=s?null:l,d=s?null:g}this._zone=i,this.loc=t.loc||ii.create(),this.invalid=s,this.weekData=null,this.c=l,this.o=d,this.isLuxonDateTime=!0}static now(){return new Qe({})}static local(){const[t,i]=n8(arguments),[s,l,d,y,g,_,M]=i;return r8({year:s,month:l,day:d,hour:y,minute:g,second:_,millisecond:M},t)}static utc(){const[t,i]=n8(arguments),[s,l,d,y,g,_,M]=i;return t.zone=cr.utcInstance,r8({year:s,month:l,day:d,hour:y,minute:g,second:_,millisecond:M},t)}static fromJSDate(t,i={}){const s=eY(t)?t.valueOf():NaN;if(Number.isNaN(s))return Qe.invalid("invalid input");const l=Ga(i.zone,Oi.defaultZone);return l.isValid?new Qe({ts:s,zone:l,loc:ii.fromObject(i)}):Qe.invalid(Uf(l))}static fromMillis(t,i={}){if(ku(t))return t<-Z7||t>Z7?Qe.invalid("Timestamp out of range"):new Qe({ts:t,zone:Ga(i.zone,Oi.defaultZone),loc:ii.fromObject(i)});throw new xs(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,i={}){if(ku(t))return new Qe({ts:t*1e3,zone:Ga(i.zone,Oi.defaultZone),loc:ii.fromObject(i)});throw new xs("fromSeconds requires a numerical input")}static fromObject(t,i={}){t=t||{};const s=Ga(i.zone,Oi.defaultZone);if(!s.isValid)return Qe.invalid(Uf(s));const l=Oi.now(),d=gt(i.specificOffset)?s.offset(l):i.specificOffset,y=Am(t,i8),g=!gt(y.ordinal),_=!gt(y.year),M=!gt(y.month)||!gt(y.day),E=_||M,O=y.weekYear||y.weekNumber,P=ii.fromObject(i);if((E||g)&&O)throw new f0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(M&&g)throw new f0("Can't mix ordinal dates with month/day");const j=O||y.weekday&&!E;let R,z,q=Q7(l,d);j?(R=HX,z=UX,q=j3(q)):g?(R=WX,z=BX,q=r2(q)):(R=rO,z=iO);let Y=!1;for(const Oe of R){const Le=y[Oe];gt(Le)?Y?y[Oe]=z[Oe]:y[Oe]=q[Oe]:Y=!0}const te=j?GX(y):g?qX(y):QA(y),ne=te||eO(y);if(ne)return Qe.invalid(ne);const he=j?Y7(y):g?X7(y):y,[se,ue]=Z1(he,d,s),Ee=new Qe({ts:se,zone:s,o:ue,loc:P});return y.weekday&&E&&t.weekday!==Ee.weekday?Qe.invalid("mismatched weekday",`you can't specify both a weekday of ${y.weekday} and a date of ${Ee.toISO()}`):Ee}static fromISO(t,i={}){const[s,l]=oX(t);return Ep(s,l,i,"ISO 8601",t)}static fromRFC2822(t,i={}){const[s,l]=aX(t);return Ep(s,l,i,"RFC 2822",t)}static fromHTTP(t,i={}){const[s,l]=lX(t);return Ep(s,l,i,"HTTP",i)}static fromFormat(t,i,s={}){if(gt(t)||gt(i))throw new xs("fromFormat requires an input string and a format");const{locale:l=null,numberingSystem:d=null}=s,y=ii.fromOpts({locale:l,numberingSystem:d,defaultToEN:!0}),[g,_,M,E]=VX(y,t,i);return E?Qe.invalid(E):Ep(g,_,s,`format ${i}`,t,M)}static fromString(t,i,s={}){return Qe.fromFormat(t,i,s)}static fromSQL(t,i={}){const[s,l]=mX(t);return Ep(s,l,i,"SQL",t)}static invalid(t,i=null){if(!t)throw new xs("need to specify a reason the DateTime is invalid");const s=t instanceof on?t:new on(t,i);if(Oi.throwOnInvalid)throw new JK(s);return new Qe({invalid:s})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?n2(this).weekYear:NaN}get weekNumber(){return this.isValid?n2(this).weekNumber:NaN}get weekday(){return this.isValid?n2(this).weekday:NaN}get ordinal(){return this.isValid?r2(this.c).ordinal:NaN}get monthShort(){return this.isValid?qf.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?qf.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?qf.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?qf.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return Qd(this.year)}get daysInMonth(){return Em(this.year,this.month)}get daysInYear(){return this.isValid?W0(this.year):NaN}get weeksInWeekYear(){return this.isValid?km(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:i,numberingSystem:s,calendar:l}=Er.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:i,numberingSystem:s,outputCalendar:l}}toUTC(t=0,i={}){return this.setZone(cr.instance(t),i)}toLocal(){return this.setZone(Oi.defaultZone)}setZone(t,{keepLocalTime:i=!1,keepCalendarTime:s=!1}={}){if(t=Ga(t,Oi.defaultZone),t.equals(this.zone))return this;if(t.isValid){let l=this.ts;if(i||s){const d=t.offset(this.ts),y=this.toObject();[l]=Z1(y,d,t)}return Tp(this,{ts:l,zone:t})}else return Qe.invalid(Uf(t))}reconfigure({locale:t,numberingSystem:i,outputCalendar:s}={}){const l=this.loc.clone({locale:t,numberingSystem:i,outputCalendar:s});return Tp(this,{loc:l})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const i=Am(t,i8),s=!gt(i.weekYear)||!gt(i.weekNumber)||!gt(i.weekday),l=!gt(i.ordinal),d=!gt(i.year),y=!gt(i.month)||!gt(i.day),g=d||y,_=i.weekYear||i.weekNumber;if((g||l)&&_)throw new f0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(y&&l)throw new f0("Can't mix ordinal dates with month/day");let M;s?M=Y7(J(J({},j3(this.c)),i)):gt(i.ordinal)?(M=J(J({},this.toObject()),i),gt(i.day)&&(M.day=Math.min(Em(M.year,M.month),M.day))):M=X7(J(J({},r2(this.c)),i));const[E,O]=Z1(M,this.o,this.zone);return Tp(this,{ts:E,o:O})}plus(t){if(!this.isValid)return this;const i=wt.fromDurationLike(t);return Tp(this,e8(this,i))}minus(t){if(!this.isValid)return this;const i=wt.fromDurationLike(t).negate();return Tp(this,e8(this,i))}startOf(t){if(!this.isValid)return this;const i={},s=wt.normalizeUnit(t);switch(s){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(s==="weeks"&&(i.weekday=1),s==="quarters"){const l=Math.ceil(this.month/3);i.month=(l-1)*3+1}return this.set(i)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,i={}){return this.isValid?Er.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,t):s2}toLocaleString(t=k3,i={}){return this.isValid?Er.create(this.loc.clone(i),t).formatDateTime(this):s2}toLocaleParts(t={}){return this.isValid?Er.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:i=!1,suppressMilliseconds:s=!1,includeOffset:l=!0}={}){if(!this.isValid)return null;const d=t==="extended";let y=o2(this,d);return y+="T",y+=t8(this,d,i,s,l),y}toISODate({format:t="extended"}={}){return this.isValid?o2(this,t==="extended"):null}toISOWeekDate(){return Bf(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:i=!1,includeOffset:s=!0,includePrefix:l=!1,format:d="extended"}={}){return this.isValid?(l?"T":"")+t8(this,d==="extended",i,t,s):null}toRFC2822(){return Bf(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Bf(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?o2(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:i=!1,includeOffsetSpace:s=!0}={}){let l="HH:mm:ss.SSS";return(i||t)&&(s&&(l+=" "),i?l+="z":t&&(l+="ZZ")),Bf(this,l,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():s2}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const i=J({},this.c);return t.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,i="milliseconds",s={}){if(!this.isValid||!t.isValid)return wt.invalid("created by diffing an invalid DateTime");const l=J({locale:this.locale,numberingSystem:this.numberingSystem},s),d=tY(i).map(wt.normalizeUnit),y=t.valueOf()>this.valueOf(),g=y?this:t,_=y?t:this,M=$X(g,_,d,l);return y?M.negate():M}diffNow(t="milliseconds",i={}){return this.diff(Qe.now(),t,i)}until(t){return this.isValid?hi.fromDateTimes(this,t):this}hasSame(t,i){if(!this.isValid)return!1;const s=t.valueOf(),l=this.setZone(t.zone,{keepLocalTime:!0});return l.startOf(i)<=s&&s<=l.endOf(i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const i=t.base||Qe.fromObject({},{zone:this.zone}),s=t.padding?this<i?-t.padding:t.padding:0;let l=["years","months","days","hours","minutes","seconds"],d=t.unit;return Array.isArray(t.unit)&&(l=t.unit,d=void 0),s8(i,this.plus(s),Te(J({},t),{numeric:"always",units:l,unit:d}))}toRelativeCalendar(t={}){return this.isValid?s8(t.base||Qe.fromObject({},{zone:this.zone}),this,Te(J({},t),{numeric:"auto",units:["years","months","days"],calendary:!0})):null}static min(...t){if(!t.every(Qe.isDateTime))throw new xs("min requires all arguments be DateTimes");return F7(t,i=>i.valueOf(),Math.min)}static max(...t){if(!t.every(Qe.isDateTime))throw new xs("max requires all arguments be DateTimes");return F7(t,i=>i.valueOf(),Math.max)}static fromFormatExplain(t,i,s={}){const{locale:l=null,numberingSystem:d=null}=s,y=ii.fromOpts({locale:l,numberingSystem:d,defaultToEN:!0});return WA(y,t,i)}static fromStringExplain(t,i,s={}){return Qe.fromFormatExplain(t,i,s)}static get DATE_SHORT(){return k3}static get DATE_MED(){return lA}static get DATE_MED_WITH_WEEKDAY(){return XK}static get DATE_FULL(){return uA}static get DATE_HUGE(){return hA}static get TIME_SIMPLE(){return cA}static get TIME_WITH_SECONDS(){return pA}static get TIME_WITH_SHORT_OFFSET(){return dA}static get TIME_WITH_LONG_OFFSET(){return fA}static get TIME_24_SIMPLE(){return yA}static get TIME_24_WITH_SECONDS(){return mA}static get TIME_24_WITH_SHORT_OFFSET(){return gA}static get TIME_24_WITH_LONG_OFFSET(){return vA}static get DATETIME_SHORT(){return bA}static get DATETIME_SHORT_WITH_SECONDS(){return wA}static get DATETIME_MED(){return _A}static get DATETIME_MED_WITH_SECONDS(){return xA}static get DATETIME_MED_WITH_WEEKDAY(){return ZK}static get DATETIME_FULL(){return SA}static get DATETIME_FULL_WITH_SECONDS(){return MA}static get DATETIME_HUGE(){return $A}static get DATETIME_HUGE_WITH_SECONDS(){return IA}}function kp(e){if(Qe.isDateTime(e))return e;if(e&&e.valueOf&&ku(e.valueOf()))return Qe.fromJSDate(e);if(e&&typeof e=="object")return Qe.fromObject(e);throw new xs(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const a2={ar:[".",","],bg:[",","\xA0"],bs:[",","."],ca:[",","."],cs:[",","\xA0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xA0"],fi:[",","\xA0"],fr:[",","\u202F"],"fr-ch":[",","\u202F"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xA0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xA0"],lv:[",","\xA0"],mk:[",","."],nb:[",","\xA0"],nl:[",","."],pl:[",","\xA0"],pt:[",","."],"pt-pt":[",","\xA0"],ro:[",","."],ru:[",","\xA0"],sk:[",","\xA0"],sl:[",","."],sr:[",","."],sv:[",","\xA0"],th:[".",","],tr:[",","."],uk:[",","\xA0"],vi:[",","."],zh:[".",","]};function sO(e){e||(e=Xr());let t=e in a2;if(!t){const d=e.split("-");d.length>1&&d[0]in a2&&(e=d[0],t=!0),t||(e="en")}const[i,s,l="#,##0.###"]=a2[e];return{decimal:i,group:s,pattern:l}}function JX(e,t){const i=sO((t=J({},t)).locale);t.customs=i;const s=t.pattern||i.pattern;return isNaN(e)||Math.abs(e)===1/0?null:KX(e,s,t)}const nO=/[#0,]*[#0](?:\.0*#*)?/;function KX(e,t,i){const s=(i=i||{}).customs.group,l=i.customs.decimal,d=t.split(";"),y=d[0];if((t=d[e<0?1:0]||"-"+y).indexOf("%")!==-1)e*=100;else if(t.indexOf("\u2030")!==-1)e*=1e3;else{if(t.indexOf("\xA4")!==-1)throw new Error("currency notation not supported");if(t.indexOf("E")!==-1)throw new Error("exponential notation not supported")}const g=nO,_=y.match(g);if(!_)throw new Error("unable to find a number expression in pattern: "+t);return i.fractional===!1&&(i.places=0),t.replace(g,YX(e,_[0],{decimal:l,group:s,places:i.places,round:i.round}))}function YX(e,t,i){(i=i||{}).places===!0&&(i.places=0),i.places===1/0&&(i.places=6);const s=t.split("."),l=typeof i.places=="string"&&i.places.indexOf(",");let d=i.places;l?d=i.places.substring(l+1):d>=0||(d=(s[1]||[]).length),i.round<0||(e=Number(e.toFixed(Number(d))));const y=String(Math.abs(e)).split("."),g=y[1]||"";if(s[1]||i.places){l&&(i.places=i.places.substring(0,l));const R=i.places!==void 0?i.places:s[1]&&s[1].lastIndexOf("0")+1;R>g.length&&(y[1]=g.padEnd(Number(R),"0")),d<g.length&&(y[1]=g.substr(0,Number(d)))}else y[1]&&y.pop();const _=s[0].replace(",","");let M=_.indexOf("0");M!==-1&&(M=_.length-M,M>y[0].length&&(y[0]=y[0].padStart(M,"0")),_.indexOf("#")===-1&&(y[0]=y[0].substr(y[0].length-M)));let E,O,P=s[0].lastIndexOf(",");if(P!==-1){E=s[0].length-P-1;const R=s[0].substr(0,P);P=R.lastIndexOf(","),P!==-1&&(O=R.length-P-1)}const j=[];for(let R=y[0];R;){const z=R.length-E;j.push(z>0?R.substr(z):R),R=z>0?R.slice(0,z):"",O&&(E=O,O=void 0)}return y[0]=j.reverse().join(i.group||","),y.join(i.decimal||".")}function XX(e){const t=sO((e=e||{}).locale),i=e.pattern||t.pattern,s=t.group,l=t.decimal;let d=1;if(i.indexOf("%")!==-1)d/=100;else if(i.indexOf("\u2030")!==-1)d/=1e3;else if(i.indexOf("\xA4")!==-1)throw new Error("currency notation not supported");const y=i.split(";");return y.length===1&&y.push("-"+y[0]),{regexp:_d(y,function(_){return(_="(?:"+$M(_,".")+")").replace(nO,function(M){const E={signed:!1,separator:e.strict?s:[s,""],fractional:e.fractional,decimal:l,exponent:!1},O=M.split(".");let P=e.places;O.length===1&&d!==1&&(O[1]="###"),O.length===1||P===0?E.fractional=!1:(P===void 0&&(P=e.pattern?O[1].lastIndexOf("0")+1:1/0),P&&e.fractional==null&&(E.fractional=!0),!e.places&&P<O[1].length&&(P+=","+O[1].length),E.places=P);const j=O[0].split(",");return j.length>1&&(E.groupSize=j.pop().length,j.length>1&&(E.groupSize2=j.pop().length)),"("+QX(E)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:s,decimal:l,factor:d}}function ZX(e,t){const i=XX(t),s=new RegExp("^"+i.regexp+"$").exec(e);if(!s)return NaN;let l=s[1];if(!s[1]){if(!s[2])return NaN;l=s[2],i.factor*=-1}return l=l.replace(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),Number(l)*i.factor}function QX(e){"places"in(e=e||{})||(e.places=1/0),typeof e.decimal!="string"&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=o8(e),i=_d(e.fractional,function(l){let d="";return l&&e.places!==0&&(d="\\"+e.decimal,e.places===1/0?d="(?:"+d+"\\d+)?":d+="\\d{"+e.places+"}"),d},!0);let s=t+i;return i&&(s="(?:(?:"+s+")|(?:"+i+"))"),s+_d(e.exponent,function(l){return l?"([eE]"+o8({signed:e.eSigned})+")":""})}function o8(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",_d(e.signed,function(t){return t?"[-+]":""},!0)+_d(e.separator,function(t){if(!t)return"(?:\\d+)";(t=$M(t))===" "?t="\\s":t==="\xA0"&&(t="\\s\\xa0");const i=e.groupSize,s=e.groupSize2;if(s){const l="(?:0|[1-9]\\d{0,"+(s-1)+"}(?:["+t+"]\\d{"+s+"})*["+t+"]\\d{"+i+"})";return i-s>0?"(?:"+l+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":l}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*)"},!0)}const _d=function(e,t,i){if(!(e instanceof Array))return t(e);const s=[];for(let l=0;l<e.length;l++)s.push(t(e[l]));return eZ(s.join("|"),i)},eZ=function(e,t){return"("+(t?"?:":"")+e+")"};var a8,l8;function Xhe(e){return Cg.fromJSON(e.toJSON())}function tZ(e){return e.toJSON?e.toJSON():e}function Zhe(e){return typeof e=="string"||e instanceof String}function Qhe(e){return typeof e=="number"}function u8(e){return e instanceof Date}function ece(e,t){return e===t||!(!u8(e)||!u8(t))&&e.getTime()===t.getTime()}function tce(e){if(e===void 0)return null;if(typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109413;case"kilometers":case"kilometer":case"km":return 109414}return null}function ice(e){if(e===null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new Mt({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function rce(e){if(e===void 0)return null;if(typeof e=="number"||typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9035;case"kilometers":case"kilometer":case"km":return 9036}return null}(function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"})(a8||(a8={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(l8||(l8={}));const sce=1e3,nce={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},h8={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},oce={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function ace(e,t){return c5((i,s)=>{const l=ec(!0);e.reduce((d,y,g,_)=>d.then(M=>{try{return t(M,y,g,_)}catch(E){return n6(E)}},M=>n6(M)),l).then(i,s)})}function lce(e){return e===void 0?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function uce(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,s=t.cmp&&(l=t.cmp,function(y){return function(g,_){const M={key:g,value:y[g]},E={key:_,value:y[_]};return l(M,E)}});var l;const d=[];return function y(g){if(g&&g.toJSON&&typeof g.toJSON=="function"&&(g=g.toJSON()),g===void 0)return;if(typeof g=="number")return isFinite(g)?""+g:"null";if(typeof g!="object")return JSON.stringify(g);let _,M;if(Array.isArray(g)){for(M="[",_=0;_<g.length;_++)_&&(M+=","),M+=y(g[_])||"null";return M+"]"}if(g===null)return"null";if(d.indexOf(g)!==-1){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const E=d.push(g)-1,O=Object.keys(g).sort(s&&s(g));for(M="",_=0;_<O.length;_++){const P=O[_],j=y(g[P]);j&&(M&&(M+=","),M+=JSON.stringify(P)+":"+j)}return d.splice(E,1),"{"+M+"}"}(e)}class oO{constructor(t){this.value=t}}class aO{constructor(t){this.value=t}}class Q4{constructor(t){this.fn=t}}class e_{constructor(t,i){this.paramCount=i,this.fn=t}}const iZ=Q4,rZ=aO,sZ=oO,nZ=e_,Kr={type:"VOID"},oZ={type:"BREAK"},aZ={type:"CONTINUE"};function xd(e,t,i){return t===""||t==null||t===i||t===i?e:e=e.split(t).join(i)}function t_(e){return e instanceof Q4||e instanceof WK||e instanceof e_}function Cm(e){return!!qi(e)||!!lr(e)||!!Qi(e)||!!ar(e)||e===null||e===Kr||typeof e=="number"}function lZ(e,t){return e===void 0?t:e}function qi(e){return typeof e=="string"||e instanceof String}function ar(e){return typeof e=="boolean"}function lr(e){return typeof e=="number"}function uZ(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function Es(e){return e instanceof Array}function hZ(e){return(e==null?void 0:e.arcadeDeclaredClass)==="esri.arcade.Feature"}function cZ(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureset.support.FeatureSet")===!0}function pZ(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureSetCollection")===!0}function Wu(e){return e instanceof eo}function Qi(e){return e instanceof Date}function dZ(e,t,i){if(e.length<t||e.length>i)throw new Error("Function called with wrong number of Parameters")}function fZ(e){return e<0?-Math.round(-e):Math.round(e)}function yZ(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(t==="x"?i:3&i|8).toString(16)})}function i_(e,t){return isNaN(e)===!1?t==null||t===""?e.toString():(t=xd(t,"\u2030",""),t=xd(t,"\xA4",""),JX(e,{pattern:t})):e.toString()}function Dg(e,t){const i=Qe.fromJSDate(e);return t==null||t===""?i.toISO({suppressMilliseconds:!0}):i.toFormat(lO(t),{locale:Xr(),numberingSystem:"latn"})}function lO(e){e=e.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let t="";const i=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const s of e.match(i))switch(s){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"Z":t+="ZZ";break;case"ZZ":t+="ZZZ";break;case"S":t+="'S'";break;case"SS":t+="'SS'";break;case"SSS":t+="u";break;case"A":case"a":t+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":t+=s;break;default:s.length>=2&&s.slice(0,1)==="["&&s.slice(-1)==="]"?t+=`'${s.slice(1,-1)}'`:t+=`'${s}'`}return t}function Et(e,t,i){switch(i){case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}return!1}function mZ(e,t,i){if(e===null){if(t===null||t===Kr)return Et(null,null,i);if(lr(t))return Et(0,t,i);if(qi(t)||ar(t))return Et(0,ti(t),i);if(Qi(t))return Et(0,t.getTime(),i)}if(e===Kr){if(t===null||t===Kr)return Et(null,null,i);if(lr(t))return Et(0,t,i);if(qi(t)||ar(t))return Et(0,ti(t),i);if(Qi(t))return Et(0,t.getTime(),i)}else if(lr(e)){if(lr(t))return Et(e,t,i);if(ar(t))return Et(e,ti(t),i);if(t===null||t===Kr)return Et(e,0,i);if(qi(t))return Et(e,ti(t),i);if(Qi(t))return Et(e,t.getTime(),i)}else if(qi(e)){if(qi(t))return Et(el(e),el(t),i);if(Qi(t))return Et(ti(e),t.getTime(),i);if(lr(t))return Et(ti(e),t,i);if(t===null||t===Kr)return Et(ti(e),0,i);if(ar(t))return Et(ti(e),ti(t),i)}else if(Qi(e)){if(Qi(t))return Et(e,t,i);if(t===null||t===Kr)return Et(e.getTime(),0,i);if(lr(t))return Et(e.getTime(),t,i);if(ar(t)||qi(t))return Et(e.getTime(),ti(t),i)}else if(ar(e)){if(ar(t))return Et(e,t,i);if(lr(t))return Et(ti(e),ti(t),i);if(Qi(t))return Et(ti(e),t.getTime(),i);if(t===null||t===Kr)return Et(ti(e),0,i);if(qi(t))return Et(ti(e),ti(t),i)}return!!uO(e,t)&&(i==="<="||i===">=")}function uO(e,t){if(e===t||e===null&&t===Kr||t===null&&e===Kr)return!0;if(Qi(e)&&Qi(t))return e.getTime()===t.getTime();if(e instanceof U4||e instanceof sh)return e.equalityTest(t);if(e instanceof Be&&t instanceof Be){const i=e.cache._arcadeCacheId,s=t.cache._arcadeCacheId;if(i!=null)return i===s}return e!==void 0&&t!==void 0&&e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"&&(e._arcadeCacheId===t._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===t._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null)}function el(e,t){if(qi(e))return e;if(e===null)return"";if(lr(e))return i_(e,t);if(ar(e))return e.toString();if(Qi(e))return Dg(e,t);if(e instanceof Pr)return JSON.stringify(e.toJSON());if(Es(e)){const i=[];for(let s=0;s<e.length;s++)i[s]=Pm(e[s]);return"["+i.join(",")+"]"}if(e instanceof eo){const i=[];for(let s=0;s<e.length();s++)i[s]=Pm(e.get(s));return"["+i.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():t_(e)?"object, Function":""}function gZ(e){const t=[];if(Es(e)===!1)return null;if(e instanceof eo){for(let i=0;i<e.length();i++)t[i]=ti(e.get(i));return t}for(let i=0;i<e.length;i++)t[i]=ti(e[i]);return t}function Q1(e,t){if(qi(e))return e;if(e===null)return"";if(lr(e))return i_(e,t);if(ar(e))return e.toString();if(Qi(e))return Dg(e,t);if(e instanceof Pr)return e instanceof Mt?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+F3(e.spatialReference)+"}":F3(e.toJSON(),(i,s)=>i.key===s.key?0:i.key==="spatialReference"?1:s.key==="spatialReference"||i.key<s.key?-1:i.key>s.key?1:0);if(Es(e)){const i=[];for(let s=0;s<e.length;s++)i[s]=Pm(e[s]);return"["+i.join(",")+"]"}if(e instanceof eo){const i=[];for(let s=0;s<e.length();s++)i[s]=Pm(e.get(s));return"["+i.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():t_(e)?"object, Function":""}function Pm(e){if(e===null)return"null";if(ar(e)||lr(e)||qi(e))return JSON.stringify(e);if(e instanceof Pr||e instanceof eo||e instanceof Array)return Q1(e);if(e instanceof Date)return JSON.stringify(Dg(e,""));if(e!==null&&typeof e=="object"){if(e.castToText!==void 0)return e.castToText()}else if(e===Kr)return"null";return"null"}function ti(e,t){return lr(e)?e:e===null||e===""?0:Qi(e)?NaN:ar(e)?e?1:0:Es(e)||e===""||e===void 0?NaN:t!==void 0&&qi(e)?(t=xd(t,"\u2030",""),t=xd(t,"\xA4",""),ZX(e,{pattern:t})):e===Kr?0:Number(e)}function vZ(e){if(Qi(e))return e;if(qi(e)){const t=hO(e);if(t)return t.toJSDate()}return null}function bZ(e){return Qi(e)?Qe.fromJSDate(e):qi(e)?hO(e):null}function hO(e){const t=/ (\d\d)/;let i=Qe.fromISO(e);return i.isValid||t.test(e)&&(e=e.replace(t,"T$1"),i=Qe.fromISO(e),i.isValid)?i:null}function wZ(e){return ar(e)?e:qi(e)?(e=e.toLowerCase())==="true":!!lr(e)&&e!==0&&!isNaN(e)}function _Z(e,t){return ce(e)?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=t),e)}function xZ(e){if(e===null)return null;if(e instanceof Be)return e.x==="NaN"||e.x===null||isNaN(e.x)?null:e;if(e instanceof Ts){if(e.rings.length===0)return null;for(const t of e.rings)if(t.length>0)return e;return null}if(e instanceof Ir){if(e.paths.length===0)return null;for(const t of e.paths)if(t.length>0)return e;return null}return e instanceof Xu?e.points.length===0?null:e:e instanceof Mt?e.xmin==="NaN"||e.xmin===null||isNaN(e.xmin)?null:e:null}function cO(e,t){if(!e||!e.domain)return t;let i=null;if(e.field.type==="string"||e.field.type==="esriFieldTypeString")t=el(t);else{if(t==null)return null;if(t==="")return t;t=ti(t)}for(let s=0;s<e.domain.codedValues.length;s++){const l=e.domain.codedValues[s];l.code===t&&(i=l)}return i===null?t:i.name}function pO(e,t){if(!e||!e.domain)return t;let i=null;t=el(t);for(let s=0;s<e.domain.codedValues.length;s++){const l=e.domain.codedValues[s];l.name===t&&(i=l)}return i===null?t:i.code}function zg(e,t,i=null,s=null){if(!t||!t.fields)return null;let l,d,y=null;for(let g=0;g<t.fields.length;g++){const _=t.fields[g];_.name.toLowerCase()===e.toString().toLowerCase()&&(y=_)}if(y===null)throw new Error("Field not found");return s===null&&i&&t.typeIdField&&(s=i.hasField(t.typeIdField)?i.field(t.typeIdField):null),s!=null&&t.types.some(function(g){return g.id===s&&(l=g.domains&&g.domains[y.name],l&&l.type==="inherited"&&(l=c8(y.name,t),d=!0),!0)}),d||l||(l=c8(e,t)),{field:y,domain:l}}function c8(e,t){let i;return t.fields.some(function(s){return s.name.toLowerCase()===e.toLowerCase()&&(i=s.domain),!!i}),i}function F3(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,s=t.cmp&&(l=t.cmp,function(y){return function(g,_){const M={key:g,value:y[g]},E={key:_,value:y[_]};return l(M,E)}});var l;const d=[];return function y(g){if(g&&g.toJSON&&typeof g.toJSON=="function"&&(g=g.toJSON()),g===void 0)return;if(typeof g=="number")return isFinite(g)?""+g:"null";if(typeof g!="object")return JSON.stringify(g);let _,M;if(Array.isArray(g)){for(M="[",_=0;_<g.length;_++)_&&(M+=","),M+=y(g[_])||"null";return M+"]"}if(g===null)return"null";if(d.indexOf(g)!==-1){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const E=d.push(g)-1,O=Object.keys(g).sort(s&&s(g));for(M="",_=0;_<O.length;_++){const P=O[_],j=y(g[P]);j&&(M&&(M+=","),M+=JSON.stringify(P)+":"+j)}return d.splice(E,1),"{"+M+"}"}(e)}function SZ(e){if(e===null)return null;const t=[];for(const i of e)i&&i.arcadeDeclaredClass&&i.arcadeDeclaredClass==="esri.arcade.Feature"?t.push(i.geometry()):t.push(i);return t}function Lc(e,t){if(!(t instanceof Be))throw new Error("Invalid Argument");e.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}function MZ(e,t){if(Es(e)||Wu(e)){let i=!1,s=!1,l=[],d=t;if(Es(e)){for(const y of e)Lc(l,y);l.length>0&&(d=e[0].spatialReference,i=e[0].hasZ,s=e[0].hasM)}else if(e instanceof sh)l=e._elements,l.length>0&&(i=e._hasZ,s=e._hasM,d=e.get(0).spatialReference);else{if(!Wu(e))throw new Error("Invalid Argument");for(const y of e.toArray())Lc(l,y);l.length>0&&(d=e.get(0).spatialReference,i=e.get(0).hasZ===!0,s=e.get(0).hasM===!0)}return l.length===0?null:(D5(l,s,i)===!1&&(l=l.slice(0).reverse()),new Ts({rings:[l],spatialReference:d,hasZ:i,hasM:s}))}return e}function $Z(e,t){if(Es(e)||Wu(e)){let i=!1,s=!1,l=[],d=t;if(Es(e)){for(const y of e)Lc(l,y);l.length>0&&(d=e[0].spatialReference,i=e[0].hasZ===!0,s=e[0].hasM===!0)}else if(e instanceof sh)l=e._elements,l.length>0&&(i=e._hasZ,s=e._hasM,d=e.get(0).spatialReference);else if(Wu(e)){for(const y of e.toArray())Lc(l,y);l.length>0&&(d=e.get(0).spatialReference,i=e.get(0).hasZ===!0,s=e.get(0).hasM===!0)}return l.length===0?null:new Ir({paths:[l],spatialReference:d,hasZ:i,hasM:s})}return e}function IZ(e,t){if(Es(e)||Wu(e)){let i=!1,s=!1,l=[],d=t;if(Es(e)){for(const y of e)Lc(l,y);l.length>0&&(d=e[0].spatialReference,i=e[0].hasZ===!0,s=e[0].hasM===!0)}else if(e instanceof sh)l=e._elements,l.length>0&&(i=e._hasZ,s=e._hasM,d=e.get(0).spatialReference);else if(Wu(e)){for(const y of e.toArray())Lc(l,y);l.length>0&&(d=e.get(0).spatialReference,i=e.get(0).hasZ===!0,s=e.get(0).hasM===!0)}return l.length===0?null:new Xu({points:l,spatialReference:d,hasZ:i,hasM:s})}return e}function TZ(e,t=!1){const i=[];if(e===null)return i;if(Es(e)===!0){for(let s=0;s<e.length;s++){const l=el(e[s]);l===""&&t!==!0||i.push(l)}return i}if(e instanceof eo){for(let s=0;s<e.length();s++){const l=el(e.get(s));l===""&&t!==!0||i.push(l)}return i}if(Cm(e)){const s=el(e);return s===""&&t!==!0||i.push(s),i}return[]}let l2=0;function EZ(e){return l2++,l2%100==0?(l2=0,c5(t=>{setTimeout(()=>{t(e)},0)})):e}function kZ(e,t,i){switch(i){case"&":return e&t;case"|":return e|t;case"^":return e^t;case"<<":return e<<t;case">>":return e>>t;case">>>":return e>>>t}}function Sd(e,t=null){return e==null?null:ar(e)||lr(e)||qi(e)?e:e instanceof Pr?(t==null?void 0:t.keepGeometryType)===!0?e:e.toJSON():e instanceof eo?e.toArray().map(i=>Sd(i,t)):e instanceof Array?e.map(i=>Sd(i,t)):e instanceof Date?e:e!==null&&typeof e=="object"&&e.castAsJson!==void 0?e.castAsJson(t):null}function AZ(e,t,i,s,l){return r_(e,t,i).then(d=>{l[s]=d})}function r_(e,t=null,i=null){if(e instanceof eo&&(e=e.toArray()),e==null)return ec(null);if(Cm(e)||e instanceof Pr||e instanceof Date)return ec(Sd(e,i));if(e instanceof Array){const s=[],l=[];for(const d of e)d===null||Cm(d)||d instanceof Pr||d instanceof Date?l.push(Sd(d,i)):(l.push(null),s.push(AZ(d,t,i,l.length-1,l)));return s.length>0?RM(s).then(()=>l):ec(l)}return e!==null&&typeof e=="object"&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(t,i):ec(null)}function OZ(e,t,i){const s=e.fullSchema();return s===null||!s.fields?null:zg(t,s,e,i)}function CZ(e){const t=e.fullSchema();return t===null?null:t.fields&&t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map(i=>({name:i.name,code:i.id})):[]}:null}function PZ(e,t,i,s){const l=e.fullSchema();if(l===null||!l.fields)return null;const d=zg(t,l,e,s);if(i===void 0)try{i=e.field(t)}catch{return null}return cO(d,i)}function NZ(e,t,i,s){const l=e.fullSchema();if(l===null||!l.fields)return null;if(i===void 0){try{i=e.field(t)}catch{return null}return i}return pO(zg(t,l,e,s),i)}function jZ(e){const t=e.fullSchema();if(t===null||!t.fields)return null;const i=[];for(const s of t.fields)i.push(tZ(s));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField,geometryType:h8[t.geometryType]===void 0?"":h8[t.geometryType],fields:i}}const hce=Object.freeze({__proto__:null,ReturnResultE:oO,ImplicitResultE:aO,NativeFunctionE:Q4,SizzleFunctionE:e_,NativeFunction:iZ,ImplicitResult:rZ,ReturnResult:sZ,SizzleFunction:nZ,voidOperation:Kr,breakResult:oZ,continueResult:aZ,multiReplace:xd,isFunctionParameter:t_,isSimpleType:Cm,defaultUndefined:lZ,isString:qi,isBoolean:ar,isNumber:lr,isInteger:uZ,isArray:Es,isFeature:hZ,isFeatureSet:cZ,isFeatureSetCollection:pZ,isImmutableArray:Wu,isDate:Qi,pcCheck:dZ,absRound:fZ,generateUUID:yZ,formatNumber:i_,formatDate:Dg,standardiseDateFormat:lO,greaterThanLessThan:mZ,equalityTest:uO,toString:el,toNumberArray:gZ,toStringExplicit:Q1,toNumber:ti,toDate:vZ,toDateTime:bZ,toBoolean:wZ,fixSpatialReference:_Z,fixNullGeometry:xZ,getDomainValue:cO,getDomainCode:pO,getDomain:zg,stableStringify:F3,autoCastFeatureToGeometry:SZ,autoCastArrayOfPointsToPolygon:MZ,autoCastArrayOfPointsToPolyline:$Z,autoCastArrayOfPointsToMultiPoint:IZ,toStringArray:TZ,tick:EZ,binaryOperator:kZ,castAsJson:Sd,castAsJsonAsync:r_,featureFullDomain:OZ,featureSubtypes:CZ,featureDomainValueLookup:PZ,featureDomainCodeLookup:NZ,featureSchema:jZ});var R3;let m0=R3=class extends ge{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new R3({minValue:this.minValue,maxValue:this.maxValue})}};b([S({type:Number,json:{write:!0}})],m0.prototype,"minValue",void 0),b([S({type:Number,json:{write:!0}})],m0.prototype,"maxValue",void 0),m0=R3=b([H("esri.renderer.support.AuthoringInfoClassBreakInfo")],m0);const FZ=m0;var L3;let Vl=L3=class extends ge{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new L3({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:le(this.classBreakInfos)})}};b([S({type:String,json:{write:!0}})],Vl.prototype,"field",void 0),b([S({type:String,json:{write:!0}})],Vl.prototype,"normalizationField",void 0),b([S({type:String,json:{write:!0}})],Vl.prototype,"label",void 0),b([S({type:[FZ],json:{write:!0}})],Vl.prototype,"classBreakInfos",void 0),Vl=L3=b([H("esri.renderers.support.AuthoringInfoFieldInfo")],Vl);const p8=Vl;var D3;const Hf=new ot({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),Wf=new ot({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),d8={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},f8=["high-to-low","above-and-below","centered-on","extremes"],y8=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],m8=["seconds","minutes","hours","days","months","years"];let _r=D3=class extends ge{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new D3({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};b([S({types:d8,json:{write:!0}})],_r.prototype,"endTime",void 0),b([yt("endTime")],_r.prototype,"castEndTime",null),b([S({type:String,json:{write:!0}})],_r.prototype,"field",void 0),b([S({type:Number,json:{write:!0}})],_r.prototype,"maxSliderValue",void 0),b([S({type:Number,json:{write:!0}})],_r.prototype,"minSliderValue",void 0),b([S({types:d8,json:{write:!0}})],_r.prototype,"startTime",void 0),b([yt("startTime")],_r.prototype,"castStartTime",null),b([S({type:Hf.apiValues,value:null,json:{type:Hf.jsonValues,read:Hf.read,write:Hf.write}})],_r.prototype,"style",null),b([S({type:y8,value:null,json:{type:y8,origins:{"web-scene":{type:f8,write:{writer:(e,t)=>{f8.indexOf(e)>-1&&(t.theme=e)}}}},write:!0}})],_r.prototype,"theme",null),b([S({type:Wf.apiValues,json:{type:Wf.jsonValues,read:Wf.read,write:Wf.write}})],_r.prototype,"type",void 0),b([S({type:m8,json:{type:m8,write:!0}})],_r.prototype,"units",void 0),_r=D3=b([H("esri.renderers.support.AuthoringInfoVisualVariable")],_r);const RZ=_r;let ey=class extends ge{constructor(e){super(e),this.type=null}};b([S({readOnly:!0,json:{read:!1,write:!0}})],ey.prototype,"type",void 0),ey=b([H("esri.rest.support.ColorRamp")],ey);const s_=ey;var z3;let Gl=z3=class extends s_{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new z3({fromColor:le(this.fromColor),toColor:le(this.toColor),algorithm:this.algorithm})}};b([Ue({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Gl.prototype,"algorithm",void 0),b([S({type:Ze,json:{type:[Lt],write:!0}})],Gl.prototype,"fromColor",void 0),b([S({type:Ze,json:{type:[Lt],write:!0}})],Gl.prototype,"toColor",void 0),b([S({type:["algorithmic"]})],Gl.prototype,"type",void 0),Gl=z3=b([H("esri.rest.support.AlgorithmicColorRamp")],Gl);const n_=Gl;var V3;let g0=V3=class extends s_{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new V3({colorRamps:le(this.colorRamps)})}};b([S({type:[n_],json:{write:!0}})],g0.prototype,"colorRamps",void 0),b([S({type:["multipart"]})],g0.prototype,"type",void 0),g0=V3=b([H("esri.rest.support.MultipartColorRamp")],g0);const dO=g0,LZ={key:"type",base:s_,typeMap:{algorithmic:n_,multipart:dO}};function DZ(e){return e&&e.type?e.type==="algorithmic"?n_.fromJSON(e):e.type==="multipart"?dO.fromJSON(e):null:null}var G3;const gl=new ot({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),Jf=new ot({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),g8=new ot({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),v8=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],zZ=["high-to-low","above-and-below","above","below","90-10"],VZ=["flow-line","wave-front"],GZ=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let di=G3=class extends ge{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){if(e)return DZ(e)}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new G3({classificationMethod:this.classificationMethod,colorRamp:le(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:le(this.field1),field2:le(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};b([S({type:gl.apiValues,value:null,json:{type:gl.jsonValues,read:gl.read,write:gl.write,origins:{"web-document":{default:"manual",type:gl.jsonValues,read:gl.read,write:gl.write}}}})],di.prototype,"classificationMethod",null),b([S({types:LZ,json:{write:!0}})],di.prototype,"colorRamp",void 0),b([$e("colorRamp")],di.prototype,"readColorRamp",null),b([S({type:[String],value:null,json:{write:!0}})],di.prototype,"fields",null),b([S({type:p8,value:null,json:{write:!0}})],di.prototype,"field1",null),b([S({type:p8,value:null,json:{write:!0}})],di.prototype,"field2",null),b([S({type:VZ,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],di.prototype,"flowTheme",null),b([S({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],di.prototype,"focus",null),b([S({type:Number,value:null,json:{type:Lt,write:!0}})],di.prototype,"numClasses",null),b([S({type:v8,json:{type:v8,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],di.prototype,"lengthUnit",void 0),b([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],di.prototype,"maxSliderValue",void 0),b([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],di.prototype,"minSliderValue",void 0),b([S({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],di.prototype,"statistics",null),b([S({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],di.prototype,"standardDeviationInterval",null),b([S({type:Jf.apiValues,value:null,json:{type:Jf.jsonValues,read:Jf.read,write:Jf.write,origins:{"web-scene":{type:g8.jsonValues,write:{writer:g8.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],di.prototype,"type",null),b([S({type:[RZ],json:{write:!0}})],di.prototype,"visualVariables",void 0),b([S({type:GZ,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],di.prototype,"univariateSymbolStyle",null),b([S({type:zZ,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],di.prototype,"univariateTheme",null),di=G3=b([H("esri.renderers.support.AuthoringInfo")],di);const qZ=di,u2=new ot({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});let v0=class extends ge{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};b([S({type:qZ,json:{write:!0}})],v0.prototype,"authoringInfo",void 0),b([S({type:u2.apiValues,readOnly:!0,json:{type:u2.jsonValues,read:!1,write:{writer:u2.write,ignoreOrigin:!0}}})],v0.prototype,"type",void 0),v0=b([H("esri.renderers.Renderer")],v0);const dl=v0;var q3;let ty=q3=class extends ge{constructor(){super(...arguments),this.title=null}clone(){return new q3({title:this.title})}};b([S({type:String,json:{write:!0}})],ty.prototype,"title",void 0),ty=q3=b([H("esri.renderers.support.LegendOptions")],ty);const o_=ty;var U3;let iy=U3=class extends o_{constructor(){super(...arguments),this.showLegend=null}clone(){return new U3({title:this.title,showLegend:this.showLegend})}};b([S({type:Boolean,json:{write:!0}})],iy.prototype,"showLegend",void 0),iy=U3=b([H("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],iy);const fO=iy,UZ=Se.getLogger("esri.renderers.visualVariables.VisualVariable"),h2=new ot({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Ws=class extends ge{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(UZ.error(".field: field must be a string value"),null):Ld(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};b([S()],Ws.prototype,"index",void 0),b([S({type:h2.apiValues,readOnly:!0,json:{read:h2.read,write:h2.write}})],Ws.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Ws.prototype,"field",void 0),b([yt("field")],Ws.prototype,"castField",null),b([S({type:String,json:{write:!0}})],Ws.prototype,"valueExpression",void 0),b([S({type:String,json:{write:!0}})],Ws.prototype,"valueExpressionTitle",void 0),b([S({readOnly:!0})],Ws.prototype,"arcadeRequired",null),b([S({type:fO,json:{write:!0}})],Ws.prototype,"legendOptions",void 0),Ws=b([H("esri.renderers.visualVariables.VisualVariable")],Ws);const tf=Ws;var B3;let ql=B3=class extends ge{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e==null?0:e}clone(){return new B3({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};b([S({type:Ze,json:{type:[Lt],write:!0}})],ql.prototype,"color",void 0),b([S({type:String,json:{write:!0}})],ql.prototype,"label",void 0),b([S({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],ql.prototype,"value",void 0),b([ke("value")],ql.prototype,"writeValue",null),ql=B3=b([H("esri.renderers.visualVariables.support.ColorStop")],ql);const BZ=ql;var H3;let Ul=H3=class extends tf{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new H3({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};b([S({readOnly:!0})],Ul.prototype,"cache",null),b([S({type:["color"],json:{type:["colorInfo"]}})],Ul.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Ul.prototype,"normalizationField",void 0),b([S({type:[BZ],json:{write:!0}})],Ul.prototype,"stops",null),Ul=H3=b([H("esri.renderers.visualVariables.ColorVariable")],Ul);const yO=Ul;var W3;let _a=W3=class extends ge{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return ad(t.transparency)}writeOpacity(e,t,i){t[i]=F5(e)}clone(){return new W3({label:this.label,opacity:this.opacity,value:this.value})}};b([S({type:String,json:{write:!0}})],_a.prototype,"label",void 0),b([S({type:Number,json:{type:Lt,write:{target:"transparency"}}})],_a.prototype,"opacity",void 0),b([$e("opacity",["transparency"])],_a.prototype,"readOpacity",null),b([ke("opacity")],_a.prototype,"writeOpacity",null),b([S({type:Number,json:{write:!0}})],_a.prototype,"value",void 0),_a=W3=b([H("esri.renderers.visualVariables.support.OpacityStop")],_a);const HZ=_a;var J3;let Bl=J3=class extends tf{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new J3({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};b([S({readOnly:!0})],Bl.prototype,"cache",null),b([S({type:["opacity"],json:{type:["transparencyInfo"]}})],Bl.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Bl.prototype,"normalizationField",void 0),b([S({type:[HZ],json:{write:!0}})],Bl.prototype,"stops",null),Bl=J3=b([H("esri.renderers.visualVariables.OpacityVariable")],Bl);const mO=Bl;var K3;let bo=K3=class extends tf{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,i,s){if(s&&s.messages){const l=`visualVariables[${this.index}]`;s.messages.push(new re("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:l+".valueExpressionTitle",context:s}))}}clone(){return new K3({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};b([S({readOnly:!0})],bo.prototype,"cache",null),b([S({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],bo.prototype,"axis",void 0),b([S({type:["rotation"],json:{type:["rotationInfo"]}})],bo.prototype,"type",void 0),b([S({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],bo.prototype,"rotationType",void 0),b([S({type:String,json:{write:!0}})],bo.prototype,"valueExpressionTitle",void 0),b([ke("web-scene","valueExpressionTitle")],bo.prototype,"writeValueExpressionTitleWebScene",null),bo=K3=b([H("esri.renderers.visualVariables.RotationVariable")],bo);const gO=bo;var Y3;let Lh=Y3=class extends ge{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new Y3({label:this.label,size:this.size,value:this.value})}};b([S({type:String,json:{write:!0}})],Lh.prototype,"label",void 0),b([S({type:Number,cast:St,json:{write:!0}})],Lh.prototype,"size",void 0),b([S({type:Number,json:{write:!0}})],Lh.prototype,"value",void 0),Lh=Y3=b([H("esri.renderers.visualVariables.support.SizeStop")],Lh);const WZ=Lh;var X3;let ry=X3=class extends fO{constructor(){super(...arguments),this.customValues=null}clone(){return new X3({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};b([S({type:[Number],json:{write:!0}})],ry.prototype,"customValues",void 0),ry=X3=b([H("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],ry);const JZ=ry;var Do,Ci;function ac(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function Md(e){return e!=null&&!isNaN(e)&&isFinite(e)}function vO(e){return e.valueExpression?Do.Expression:e.field&&typeof e.field=="string"?Do.Field:Do.Unknown}function KZ(e,t){const i=t||vO(e),s=e.valueUnit||"unknown";return i===Do.Unknown?Ci.Constant:e.stops?Ci.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Ci.ClampedLinear:s==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Ci.Proportional:Ci.Additive:Ci.Identity:Ci.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(Do||(Do={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Ci||(Ci={}));const bO={inches:ys(1,"meters","inches"),feet:ys(1,"meters","feet"),"us-feet":ys(1,"meters","us-feet"),yards:ys(1,"meters","yards"),miles:ys(1,"meters","miles"),"nautical-miles":ys(1,"meters","nautical-miles"),millimeters:ys(1,"meters","millimeters"),centimeters:ys(1,"meters","centimeters"),decimeters:ys(1,"meters","decimeters"),meters:ys(1,"meters","meters"),kilometers:ys(1,"meters","kilometers"),"decimal-degrees":1/DG(1,"meters",Vt.radius)},ll=Se.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),b8=new rs,sy=Math.PI,wO=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function _O(e,t,i){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(R=>R.type==="color"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void ll.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const l=typeof t=="number",d=l?null:t,y=d&&d.attributes;let g=l?t:null;const _=s.field,{ipData:M,hasExpression:E}=s.cache;let O=s.cache.compiledFunc;if(!_&&!E){const R=s.stops;return R&&R[0]&&R[0].color}if(typeof g!="number")if(E){if(!X(i)||!X(i.arcade))return void ll.error("Use of arcade expressions requires an arcade context");const R={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},z=i.arcade.arcadeUtils,q=z.getViewInfo(R),Y=z.createExecContext(d,q);if(!O){const te=z.createSyntaxTree(s.valueExpression);O=z.createFunction(te),s.cache.compiledFunc=O}g=z.executeFunction(O,Y)}else y&&(g=y[_]);const P=s.normalizationField,j=y?parseFloat(y[P]):void 0;if(g!=null&&(!P||l||!isNaN(j)&&j!==0)){isNaN(j)||l||(g/=j);const R=a_(g,M);if(R){const z=R[0],q=R[1],Y=z===q?s.stops[z].color:Ze.blendColors(s.stops[z].color,s.stops[q].color,R[2],X(i)?i.color:void 0);return new Ze(Y)}}}function xO(e,t,i){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(R=>R.type==="opacity"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void ll.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const l=typeof t=="number",d=l?null:t,y=d&&d.attributes;let g=l?t:null;const _=s.field,{ipData:M,hasExpression:E}=s.cache;let O=s.cache.compiledFunc;if(!_&&!E){const R=s.stops;return R&&R[0]&&R[0].opacity}if(typeof g!="number")if(E){if(ce(i)||ce(i.arcade))return void ll.error("Use of arcade expressions requires an arcade context");const R={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},z=i.arcade.arcadeUtils,q=z.getViewInfo(R),Y=z.createExecContext(d,q);if(!O){const te=z.createSyntaxTree(s.valueExpression);O=z.createFunction(te),s.cache.compiledFunc=O}g=z.executeFunction(O,Y)}else y&&(g=y[_]);const P=s.normalizationField,j=y?parseFloat(y[P]):void 0;if(g!=null&&(!P||l||!isNaN(j)&&j!==0)){isNaN(j)||l||(g/=j);const R=a_(g,M);if(R){const z=R[0],q=R[1];if(z===q)return s.stops[z].opacity;{const Y=s.stops[z].opacity;return Y+(s.stops[q].opacity-Y)*R[2]}}}}function SO(e,t,i){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(j=>j.type==="rotation"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void ll.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const l=s.axis||"heading",d=l==="heading"&&s.rotationType==="arithmetic"?90:0,y=l==="heading"&&s.rotationType==="arithmetic"?-1:1,g=typeof t=="number"?null:t,_=g&&g.attributes,M=s.field,{hasExpression:E}=s.cache;let O=s.cache.compiledFunc,P=0;if(!M&&!E)return P;if(E){if(ce(i)||ce(i.arcade))return void ll.error("Use of arcade expressions requires an arcade context");const j={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},R=i.arcade.arcadeUtils,z=R.getViewInfo(j),q=R.createExecContext(g,z);if(!O){const Y=R.createSyntaxTree(s.valueExpression);O=R.createFunction(Y),s.cache.compiledFunc=O}P=R.executeFunction(O,q)}else _&&(P=_[M]||0);return P=typeof P!="number"||isNaN(P)?null:d+y*P,P}function YZ(e,t,i){const s=typeof t=="number",l=s?null:t,d=l&&l.attributes;let y=s?t:null;const{isScaleDriven:g}=e.cache;let _=e.cache.compiledFunc;if(g){const E=X(i)?i.scale:void 0,O=X(i)?i.view:void 0;y=E==null||O==="3d"?XZ(e):E}else if(!s)switch(e.inputValueType){case Do.Expression:{if(ce(i)||ce(i.arcade))return void ll.error("Use of arcade expressions requires an arcade context");const E={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},O=i.arcade.arcadeUtils,P=O.getViewInfo(E),j=O.createExecContext(l,P);if(!_){const R=O.createSyntaxTree(e.valueExpression);_=O.createFunction(R),e.cache.compiledFunc=_}y=O.executeFunction(_,j);break}case Do.Field:d&&(y=d[e.field]);break;case Do.Unknown:y=null}if(!Md(y))return null;if(s||!e.normalizationField)return y;const M=d?parseFloat(d[e.normalizationField]):null;return Md(M)&&M!==0?y/M:null}function XZ(e){let t=null,i=null;const s=e.stops;return s?(t=s[0].value,i=s[s.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function Vg(e,t,i){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(d=>d.type==="size"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void ll.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const l=$O(YZ(s,t,i),s,t,i,s.cache.ipData);return l==null||isNaN(l)?0:l}function Ar(e,t,i){return e==null?null:ac(e)?Vg(e,t,i):Md(e)?e:null}function MO(e,t,i){return Md(i)&&e>i?i:Md(t)&&e<t?t:e}function ZZ(e,t,i,s){return e+(Ar(t.minSize,i,s)||t.minDataValue)}function QZ(e,t,i){const s=e.stops;let l=s&&s.length&&s[0].size;return l==null&&(l=e.minSize),Ar(l,t,i)}function eQ(e,t,i,s){const l=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),d=Ar(t.minSize,i,s),y=Ar(t.maxSize,i,s),g=X(s)?s.shape:void 0;if(e<=t.minDataValue)return d;if(e>=t.maxDataValue)return y;if(t.scaleBy==="area"&&g){const _=g==="circle",M=_?sy*(d/2)**2:d*d,E=M+l*((_?sy*(y/2)**2:y*y)-M);return _?2*Math.sqrt(E/sy):Math.sqrt(E)}return d+l*(y-d)}function tQ(e,t,i,s){const l=X(s)?s.shape:void 0,d=e/t.minDataValue,y=Ar(t.minSize,i,s),g=Ar(t.maxSize,i,s);let _=null;return _=l==="circle"?2*Math.sqrt(d*(y/2)**2):l==="square"||l==="diamond"||l==="image"?Math.sqrt(d*y**2):d*y,MO(_,y,g)}function iQ(e,t,i,s,l){const[d,y,g]=a_(e,l);if(d===y)return Ar(t.stops[d].size,i,s);{const _=Ar(t.stops[d].size,i,s);return _+(Ar(t.stops[y].size,i,s)-_)*g}}function rQ(e,t,i,s){const l=(X(s)&&s.resolution?s.resolution:1)*bO[t.valueUnit],d=Ar(t.minSize,i,s),y=Ar(t.maxSize,i,s),{valueRepresentation:g}=t;let _=null;return _=g==="area"?2*Math.sqrt(e/sy)/l:g==="radius"||g==="distance"?2*e/l:e/l,MO(_,d,y)}function $O(e,t,i,s,l){switch(t.transformationType){case Ci.Additive:return ZZ(e,t,i,s);case Ci.Constant:return QZ(t,i,s);case Ci.ClampedLinear:return eQ(e,t,i,s);case Ci.Proportional:return tQ(e,t,i,s);case Ci.Stops:return iQ(e,t,i,s,l);case Ci.RealWorldSize:return rQ(e,t,i,s);case Ci.Identity:return e;case Ci.Unknown:return null}}function sQ(e,t,i){const{isScaleDriven:s}=e.cache;if(!(s&&i==="3d"||t))return null;const l={scale:t,view:i};let d=Ar(e.minSize,b8,l),y=Ar(e.maxSize,b8,l);if(d!=null||y!=null){if(d>y){const g=y;y=d,d=g}return{minSize:d,maxSize:y}}}function nQ(e,t,i){if(!e.visualVariables)return;const s=[],l=[],d=[],y=[],g=[];for(const _ of e.visualVariables)switch(_.type){case"color":l.push(_);break;case"opacity":d.push(_);break;case"rotation":g.push(_);break;case"size":y.push(_)}return l.forEach(_=>{const M=_O(_,t,i);s.push({variable:_,value:M})}),d.forEach(_=>{const M=xO(_,t,i);s.push({variable:_,value:M})}),g.forEach(_=>{const M=SO(_,t,i);s.push({variable:_,value:M})}),y.forEach(_=>{const M=Vg(_,t,i);s.push({variable:_,value:M})}),s.filter(_=>_.value!=null)}function a_(e,t){if(!t)return;let i=0,s=t.length-1;return t.some((l,d)=>e<l?(s=d,!0):(i=d,!1)),[i,s,(e-t[i])/(t[s]-t[i])]}function oQ(e,t,i){const s=["proportional","proportional","proportional"];for(const l of e){const d=l.useSymbolValue?"symbol-value":Vg(l,t,i);switch(l.axis){case"width":s[0]=d;break;case"depth":s[1]=d;break;case"height":s[2]=d;break;case"width-and-depth":s[0]=d,s[1]=d;break;case"all":case void 0:case null:s[0]=d,s[1]=d,s[2]=d;break;default:l.axis}}return s}var aQ=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:oQ,getColor:_O,getOpacity:xO,getRotationAngle:SO,getSize:Vg,getSizeForValue:$O,getSizeFromNumberOrVariable:Ar,getSizeRangeAtScale:sQ,getVisualVariableValues:nQ,viewScaleRE:wO},Symbol.toStringTag,{value:"Module"})),Z3;const dh=Se.getLogger("esri.renderers.visualVariables.SizeVariable"),Kf=new ot({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),Q3=new ot({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function w8(e){if(e!=null)return typeof e=="string"||typeof e=="number"?St(e):e.type==="size"?ac(e)?e:(delete(e=J({},e)).type,new vt(e)):void 0}function _8(e,t,i){if(typeof e!="object")return e;const s=new vt;return s.read(e,i),s}let vt=Z3=class extends tf{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:wO.test(this.valueExpression)}}set expression(e){dh.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){ac(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),ac(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return vO(this)}set maxDataValue(e){e&&this.stops&&(dh.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(dh.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return w8(e)}readMaxSize(e,t,i){return _8(e,t,i)}set minDataValue(e){e&&this.stops&&(dh.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(dh.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return w8(e)}readMinSize(e,t,i){return _8(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(dh.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return KZ(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,s){if(e==="$view.scale"){if(s&&s.messages){const l=this.index,d=typeof l=="string"?l:`visualVariables[${l}]`;s.messages.push(new re("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:d+".valueExpression",context:s}))}}else t[i]=e}readValueUnit(e){return e?Q3.read(e):null}clone(){return new Z3({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:ac(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:ac(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===Ci.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Ci.Stops){const e=this.stops,t=e.map(s=>s.size).reverse(),i=e.length;for(let s=0;s<i;s++)e[s].size=t[s];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};b([S({readOnly:!0})],vt.prototype,"cache",null),b([S({type:Kf.apiValues,json:{type:Kf.jsonValues,origins:{"web-map":{read:!1}},read:Kf.read,write:Kf.write}})],vt.prototype,"axis",void 0),b([S({type:String,value:null,json:{read:!1}})],vt.prototype,"expression",null),b([S()],vt.prototype,"index",null),b([S({type:String,readOnly:!0})],vt.prototype,"inputValueType",null),b([S({type:JZ,json:{write:!0}})],vt.prototype,"legendOptions",void 0),b([S({type:Number,value:null,json:{write:!0}})],vt.prototype,"maxDataValue",null),b([S({type:Number,value:null,json:{write:!0}})],vt.prototype,"maxSize",null),b([yt("maxSize")],vt.prototype,"castMaxSize",null),b([$e("maxSize")],vt.prototype,"readMaxSize",null),b([S({type:Number,value:null,json:{write:!0}})],vt.prototype,"minDataValue",null),b([S({type:Number,value:null,json:{write:!0}})],vt.prototype,"minSize",null),b([yt("minSize")],vt.prototype,"castMinSize",null),b([$e("minSize")],vt.prototype,"readMinSize",null),b([S({type:String,json:{write:!0}})],vt.prototype,"normalizationField",void 0),b([S({readOnly:!0})],vt.prototype,"arcadeRequired",null),b([S({type:String})],vt.prototype,"scaleBy",void 0),b([S({type:[WZ],value:null,json:{write:!0}})],vt.prototype,"stops",null),b([S({type:["outline"],json:{write:!0}})],vt.prototype,"target",void 0),b([S({type:String,readOnly:!0})],vt.prototype,"transformationType",null),b([S({type:["size"],json:{type:["sizeInfo"]}})],vt.prototype,"type",void 0),b([S({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],vt.prototype,"useSymbolValue",void 0),b([S({type:String,json:{write:!0}})],vt.prototype,"valueExpression",void 0),b([$e("valueExpression",["valueExpression","expression"])],vt.prototype,"readValueExpression",null),b([ke("web-scene","valueExpression")],vt.prototype,"writeValueExpressionWebScene",null),b([S({type:["radius","diameter","area","width","distance"],json:{write:!0}})],vt.prototype,"valueRepresentation",void 0),b([S({type:Q3.apiValues,json:{write:Q3.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],vt.prototype,"valueUnit",void 0),b([$e("valueUnit")],vt.prototype,"readValueUnit",null),vt=Z3=b([H("esri.renderers.visualVariables.SizeVariable")],vt);const IO=vt,lQ=Se.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),uQ={color:yO,size:IO,opacity:mO,rotation:gO},hQ=new ot({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),cQ=/^\[([^\]]+)\]$/i;let ny=class extends Fe{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(t=>!!t))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&e.sort((t,i)=>{let s=null;return s=t.target===i.target?0:t.target?1:-1,s});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,i){const{rotationExpression:s,rotationType:l}=t,d=s&&s.match(cQ),y=d&&d[1];if(y&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:l,field:y})),e)return e.map(g=>{const _=hQ.read(g.type),M=uQ[_];M||(lQ.warn(`Unknown variable type: ${_}`),i&&i.messages&&i.messages.push(new fr("visual-variable:unsupported",`visualVariable of type '${_}' is not supported`,{definition:g,context:i})));const E=new M;return E.read(g,i),E})}writeVariables(e,t){const i=[];for(const s of e){const l=s.toJSON(t);l&&i.push(l)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};b([S()],ny.prototype,"visualVariables",null),ny=b([H("esri.renderers.visualVariables.VisualVariableFactory")],ny);const pQ=ny,dQ={base:tf,key:"type",typeMap:{opacity:mO,color:yO,rotation:gO,size:IO}},rf=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new pQ}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,s,l){return this._vvFactory.readVariables(i,s,l)}writeVisualVariables(i,s,l,d){s[l]=this._vvFactory.writeVariables(i,d)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,s){return i?this.getVisualVariablesForType(i,s).length>0:this.getVisualVariablesForType("size",s).length>0||this.getVisualVariablesForType("color",s).length>0||this.getVisualVariablesForType("opacity",s).length>0||this.getVisualVariablesForType("rotation",s).length>0}getVisualVariablesForType(i,s){const l=this.visualVariables;return l?l.filter(d=>d.type===i&&(typeof s=="string"?d.target===s:s!==!1||!d.target)):[]}async collectVVRequiredFields(i,s){let l=[];this.visualVariables&&(l=l.concat(this.visualVariables));for(const d of l)d&&(d.field&&$s(i,s,d.field),d.normalizationField&&$s(i,s,d.normalizationField),d.valueExpression&&await is(i,s,d.valueExpression))}};return b([S({types:[dQ],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),b([$e("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),b([ke("visualVariables")],t.prototype,"writeVisualVariables",null),t=b([H("esri.renderers.mixins.VisualVariablesMixin")],t),t},Ap={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function fQ(e,t=Ap){if(!e)return{symbol:null};const{retainId:i=Ap.retainId,ignoreDrivers:s=Ap.ignoreDrivers,hasLabelingContext:l=Ap.hasLabelingContext,retainCIM:d=Ap.retainCIM}=t;let y;if(fd(e)||e instanceof th)y=e.clone();else if(e.type==="cim"){var g,_;const M=(g=e.data)==null||(_=g.symbol)==null?void 0:_.type;if(M!=="CIMPointSymbol")return{error:new re("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${M||"unknown"}' is unsupported in 3D`,{symbol:e})};y=d?e.clone():hu.fromCIMSymbol(e)}else if(e instanceof dn)y=Sg.fromSimpleLineSymbol(e);else if(e instanceof Qc)y=hu.fromSimpleMarkerSymbol(e);else if(e instanceof Mg)y=hu.fromPictureMarkerSymbol(e);else if(e instanceof eh)y=Hd.fromSimpleFillSymbol(e);else{if(!(e instanceof ep))return{error:new re("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};y=l?xg.fromTextSymbol(e):hu.fromTextSymbol(e)}if(i&&y.type!=="cim"&&(y.id=e.id),s&&fd(y))for(let M=0;M<y.symbolLayers.length;++M)y.symbolLayers.getItemAt(M)._ignoreDrivers=!0;return{symbol:y}}function Nm(e,t,i,s){const l=TO(e,{},{context:s,isLabelSymbol:!1});X(l)&&(t[i]=l)}function x8(e,t,i,s){const l=TO(e,{},{context:s,isLabelSymbol:!0});X(l)&&(t[i]=l)}function TO(e,t,i){if(ce(e))return null;const{context:s,isLabelSymbol:l}=i;if(s&&s.origin==="web-scene"&&!(e instanceof Zc)&&!(e instanceof th)){const d=fQ(e,{retainCIM:!0,hasLabelingContext:l});return X(d.symbol)?d.symbol.write(t,s):(s.messages&&s.messages.push(new re("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:s,error:d.error})),null)}return s&&s.origin==="web-map"&&e.type==="web-style"?(s.messages&&s.messages.push(new re("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:e,context:s})),null):e.write(t,s)}function cce(e,t){return KV(e,null,t)}const sf={types:OT,json:{write:{writer:Nm},origins:{"web-scene":{types:rx,write:{writer:Nm},read:{reader:Uc({types:rx})}}}}},EO={types:{base:Fr,key:"type",typeMap:{"simple-fill":$u.typeMap["simple-fill"],"picture-fill":$u.typeMap["picture-fill"],"polygon-3d":$u.typeMap["polygon-3d"]}},json:{write:{writer:Nm},origins:{"web-scene":{type:Hd,write:{writer:Nm}}}}};var e9;let xa=e9=class extends ge{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new e9({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};b([S({type:String,json:{write:!0}})],xa.prototype,"description",void 0),b([S({type:String,json:{write:!0}})],xa.prototype,"label",void 0),b([S({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],xa.prototype,"minValue",void 0),b([S({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],xa.prototype,"maxValue",void 0),b([S(sf)],xa.prototype,"symbol",void 0),xa=e9=b([H("esri.renderers.support.ClassBreakInfo")],xa);const jm=xa;var t9;const Yf=Se.getLogger("esri.renderers.ClassBreaksRenderer"),kO="log",oy="percent-of-total",ay="field",Xf=new ot({esriNormalizeByLog:kO,esriNormalizeByPercentOfTotal:oy,esriNormalizeByField:ay}),yQ=gi(jm);let _i=t9=class extends rf(dl){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let s=t.minValue;return e.map(l=>{const d=new jm;return d.read(l,i),d.minValue==null&&(d.minValue=s),d.maxValue==null&&(d.maxValue=d.minValue),s=d.maxValue,d})}writeClassBreakInfos(e,t,i,s){const l=e.map(d=>d.write({},s));this._areClassBreaksConsecutive()&&l.forEach(d=>delete d.classMinValue),t[i]=l}castField(e){return e==null?e:typeof e=="function"?(Yf.error(".field: field must be a string value"),null):Ld(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&ay||i&&oy||null,t&&i&&Yf.warn("warning: both normalizationField and normalizationTotal are set!")):e!==ay&&e!==oy||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let s=null;s=typeof e=="number"?new jm({minValue:e,maxValue:t,symbol:CT(i)}):yQ(le(e)),this.classBreakInfos.push(s),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let s=0;s<i;s++){const l=[this.classBreakInfos[s].minValue,this.classBreakInfos[s].maxValue];if(l[0]===e&&l[1]===t){this.classBreakInfos.splice(s,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(ce(t)||ce(t.arcade))&&Yf.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(ce(t)||ce(t.arcade))&&(i=Te(J({},i),{arcade:await qo()}));const s=this.getBreakIndex(e,i);return s!==-1?this.classBreakInfos[s]:null}getSymbol(e,t){if(this.valueExpression&&(ce(t)||ce(t.arcade)))return void Yf.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(ce(t)||ce(t.arcade))){const l=await qo(),{arcadeUtils:d}=l;d.hasGeometryOperations(this.valueExpression)&&await d.enableGeometryOperations(),i=Te(J({},i),{arcade:l})}const s=this.getBreakIndex(e,i);return s>-1?this.classBreakInfos[s].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((s,l)=>s+l.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new t9({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:le(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:le(this.visualVariables),legendOptions:le(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(s=>s.collectRequiredFields(e,t)),is(e,t,this.valueExpression)];$s(e,t,this.field),$s(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:s,spatialReference:l,arcade:d}=a5(t,{});let y=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const g=d.arcadeUtils;if(!y){const M=g.createSyntaxTree(this.valueExpression);y=g.createFunction(M),this._compiledValueExpression.compiledFunction=y}this._compiledValueExpression.valueExpression=this.valueExpression;const _=g.executeFunction(y,g.createExecContext(e,g.getViewInfo({viewingMode:i,scale:s,spatialReference:l})));return this._getBreakIndexfromInfos(_)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,s=this.normalizationType;let l=parseFloat(i[t]);if(s){const d=this.normalizationTotal,y=parseFloat(i[this.normalizationField]);if(s===kO)l=Math.log(l)*Math.LOG10E;else if(s!==oy||isNaN(d)){if(s===ay&&!isNaN(y)){if(isNaN(l)||isNaN(y))return-1;l/=y}}else l=l/d*100}return this._getBreakIndexfromInfos(l)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const s=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(s[0]<=e&&(t?e<=s[1]:e<s[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};b([S(EO)],_i.prototype,"backgroundFillSymbol",void 0),b([S({type:[jm]})],_i.prototype,"classBreakInfos",void 0),b([$e("classBreakInfos")],_i.prototype,"readClassBreakInfos",null),b([ke("classBreakInfos")],_i.prototype,"writeClassBreakInfos",null),b([S({type:String,json:{write:!0}})],_i.prototype,"defaultLabel",void 0),b([S(sf)],_i.prototype,"defaultSymbol",void 0),b([S({type:String,json:{write:!0}})],_i.prototype,"field",void 0),b([yt("field")],_i.prototype,"castField",null),b([S({type:Boolean})],_i.prototype,"isMaxInclusive",void 0),b([S({type:o_,json:{write:!0}})],_i.prototype,"legendOptions",void 0),b([S({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],_i.prototype,"minValue",null),b([S({type:String,json:{write:!0}})],_i.prototype,"normalizationField",void 0),b([S({type:Number,cast:e=>_s(e),json:{write:!0}})],_i.prototype,"normalizationTotal",void 0),b([S({type:Xf.apiValues,value:null,json:{type:Xf.jsonValues,read:Xf.read,write:Xf.write}})],_i.prototype,"normalizationType",null),b([Ue({classBreaks:"class-breaks"})],_i.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],_i.prototype,"valueExpression",void 0),b([S({type:String,json:{write:!0}})],_i.prototype,"valueExpressionTitle",void 0),_i=t9=b([H("esri.renderers.ClassBreaksRenderer")],_i);const AO=_i,c2=-3;var La;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(La||(La={}));class pce{constructor(t,i,s){this._namespace=t,this._storage=i,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",s&&(this._storage.registerRemoveFunc(this._namespace,s),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,i,s,l=0){this._storage.put(this._namespace+t,i,s,l)}get(t){const i=this._storage.get(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}pop(t){const i=this._storage.pop(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}updateSize(t,i,s){this._storage.updateSize(this._namespace+t,i,s)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class OO{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Su,this._users=new Su}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,i,s,l){const d=this._db.get(t);if(d&&(this._size-=d.size,this._db.delete(t),d.entry!==i&&this._notifyRemove(t,d.entry,La.ALL)),s>this._maxSize)return void this._notifyRemove(t,i,La.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return void console.warn("Refusing to cache entry with invalid size "+s);const y=1+Math.max(l,c2)-c2;this._db.set(t,{entry:i,size:s,lifetime:y,lives:y}),this._size+=s,this._checkSizeLimit()}updateSize(t,i,s){const l=this._db.get(t);if(l&&l.entry===i){for(this._size-=l.size;s>this._maxSize;){const d=this._notifyRemove(t,i,La.SOME);if(!(X(d)&&d>0))return void this._db.delete(t);s=d}l.size=s,this._size+=s,this._checkSizeLimit()}}pop(t){const i=this._db.get(t);if(i)return this._size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(t){const i=this._db.get(t);if(i!==void 0)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},s=new Array;this._db.forEach((y,g)=>{const _=y.lifetime;s[_]=(s[_]||0)+y.size,this._users.forAll(M=>{const E=M.namespace;if(g.startsWith(E)){const O=i[E]||0;i[E]=O+y.size}})});const l={};this._users.forAll(y=>{const g=y.namespace;if(!isNaN(y.hitRate)&&y.hitRate>0){const _=i[g]||0;i[g]=_,l[g]=Math.round(100*y.hitRate)+"%"}else l[g]="0%"});const d=Object.keys(i);d.sort((y,g)=>i[g]-i[y]),d.forEach(y=>t[y]=Math.round(i[y]/2**20)+"MB / "+l[y]);for(let y=s.length-1;y>=0;--y){const g=s[y];g&&(t["Priority "+(y+c2-1)]=Math.round(g/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((i,s)=>{s.startsWith(t)&&(this._size-=i.size,this._db.delete(s),this._notifyRemove(s,i.entry,La.ALL))})}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,La.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,s){let l;return this._removeFuncs.some(d=>{if(t.startsWith(d[0])){const y=d[1](i,s);return typeof y=="number"&&(l=y),!0}return!1}),l}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,i]of this._db){if(this._db.delete(t),i.lives<=1){this._size-=i.size;const s=this._notifyRemove(t,i.entry,La.SOME);X(s)&&s>0&&(this._size+=s,i.lives=i.lifetime,i.size=s,this._db.set(t,i))}else--i.lives,this._db.set(t,i);if(this._size<=.9*this.maxSize)return}}}class mQ{constructor(t,i){this._storage=new OO,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i,s){this._storage.put(t,i,s,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}const S8=Se.getLogger("esri.renderers.support.DictionaryLoader"),gQ={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class l_{constructor(t,i,s){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new mQ(100),this.url=t,this.config=i,this.fieldMap=s}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){let s;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{s=await this._dictionaryPromise}catch(j){if(ks(j))return this._dictionaryPromise=null,null}const l={};if(this.fieldMap)for(const j of this._symbolFields){const R=this.fieldMap[j];if(R&&t.attributes[R]!=null){const z=""+t.attributes[R];l[j]=z}else l[j]=""}const d=s(l,i);if(!d||typeof d!="string")return null;const y=l5(d).toString(),g=this._symbolCache.get(y);if(g)return g.catch(()=>{this._symbolCache.pop(y)}),g;const _=d.split(";"),M=[],E=[];for(const j of _)if(j)if(j.includes("po:")){const R=j.substr(3).split("|");if(R.length===3){const z=R[0],q=R[1];let Y=R[2];if(q==="DashTemplate")Y=Y.split(" ").map(te=>Number(te));else if(q==="Color"){const te=new Ze(Y).toRgba();Y=[te[0],te[1],te[2],255*te[3]]}else Y=Number(Y);E.push({primitiveName:z,propertyName:q,value:Y})}}else if(j.includes("|")){for(const R of j.split("|"))if(this._itemNames.has(R)){M.push(R);break}}else this._itemNames.has(j)&&M.push(j);const O=!X(t.geometry)||!t.geometry.hasZ&&t.geometry.type==="point",P=this._cimPartsToCIMSymbol(M,E,O,i);return this._symbolCache.put(y,P,1),P}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void S8.error("no valid URL!");const i=X(t)?t.abortOptions:null,s=Ht(this.url+"/resources/styles/dictionary-info.json",J({responseType:"json",query:{f:"json"}},i)),[{data:l}]=await Promise.all([s,qo()]);if(!l)throw this._dictionaryPromise=null,new re("esri.renderers.DictionaryRenderer","Bad dictionary data!");const d=l.expression,y=l.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+l.cimRefTemplateUrl,this._itemNames=new Set(l.itemsNames),this._symbolFields=y.symbol;const g={};if(this.config){const M=this.config;for(const E in M)g[E]=M[E]}if(y.configuration)for(const M of y.configuration)g.hasOwnProperty(M.name)||(g[M.name]=M.value);const _=[];if(X(t)&&t.fields&&this.fieldMap)for(const M of this._symbolFields){const E=this.fieldMap[M],O=t.fields.filter(P=>P.name===E);O.length>0&&_.push(Te(J({},O[0]),{name:M}))}return this._dictionaryPromise=uz(d,X(t)?t.spatialReference:null,_,g).then(M=>{const E={scale:0};return(O,P)=>{const j=M.repurposeFeature({geometry:null,attributes:O});return E.scale=X(P)?P.scale:void 0,M.evaluate({$feature:j,$view:E})}}).catch(M=>(S8.error("Creating dictinoary expression failed:",M),null)),this._dictionaryPromise}async _cimPartsToCIMSymbol(t,i,s,l){const d=new Array(t.length);for(let _=0;_<t.length;_++)d[_]=this._getSymbolPart(t[_],l);const y=await Promise.all(d),g=this.fieldMap;for(const _ of y)CO(_,g);return new qd({data:this._combineSymbolParts(y,i,s)})}async _getSymbolPart(t,i){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(d=>d.data);const s=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),l=Ht(s,J({responseType:"json",query:{f:"json"}},i));this._ongoingRequests.set(t,l);try{return(await l).data}catch(d){return this._ongoingRequests.delete(t),Promise.reject(d)}}_combineSymbolParts(t,i,s){if(!t||t.length===0)return null;const l=J({},t[0]);if(t.length>1){l.symbolLayers=[];for(const d of t){const y=d;l.symbolLayers.unshift(...y.symbolLayers)}}return s&&(l.callout=gQ),{type:"CIMSymbolReference",symbol:l,primitiveOverrides:i}}}function CO(e,t){if(!e)return;const i=e.symbolLayers;if(!i)return;let s=i.length;for(;s--;){const l=i[s];l&&l.enable!==!1&&l.type==="CIMVectorMarker"&&vQ(l,t)}}function vQ(e,t){const i=e.markerGraphics;if(i)for(const s of i){if(!s)continue;const l=s.symbol;if(l)switch(l.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":CO(l,t);break;case"CIMTextSymbol":l.fieldMap=t}}}var dce=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:l_},Symbol.toStringTag,{value:"Module"})),i9;let Js=i9=class extends rf(dl){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new l_(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,s){s!=null&&s.origin||super.writeVisualVariables(e,t,i,s)}clone(){return new i9({config:le(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:le(this.fieldMap),url:le(this.url),visualVariables:le(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await is(e,t,this.scaleExpression);for(const i in this.fieldMap){const s=this.fieldMap[i];t.has(s)&&e.add(s)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};b([S({type:l_})],Js.prototype,"_loader",null),b([S({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Js.prototype,"config",void 0),b([S({type:Object,json:{write:!0}})],Js.prototype,"fieldMap",void 0),b([S({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Js.prototype,"scaleExpression",void 0),b([ke("scaleExpression")],Js.prototype,"writeData",null),b([S({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Js.prototype,"scaleExpressionTitle",void 0),b([S({type:String,json:{write:!0}})],Js.prototype,"url",void 0),b([ke("visualVariables")],Js.prototype,"writeVisualVariables",null),Js=i9=b([H("esri.renderers.DictionaryRenderer")],Js);const bQ=Js;var r9;const wQ=Se.getLogger("esri.renderers.support.AttributeColorInfo");let wo=r9=class extends ge{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(wQ.error(".field: field must be a string value"),null):Ld(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new r9({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};b([S({type:Ze,json:{type:[Number],write:!0}})],wo.prototype,"color",void 0),b([S({type:String,json:{write:!0}})],wo.prototype,"field",void 0),b([yt("field")],wo.prototype,"castField",null),b([S({type:String,json:{write:!0}})],wo.prototype,"label",void 0),b([S({type:String,json:{write:!0}})],wo.prototype,"valueExpression",void 0),b([S({type:String,json:{write:!0}})],wo.prototype,"valueExpressionTitle",void 0),wo=r9=b([H("esri.renderers.support.AttributeColorInfo")],wo);const _Q=wo;var s9;let ly=s9=class extends ge{constructor(){super(...arguments),this.unit=null}clone(){return new s9({unit:this.unit})}};b([S({type:String,json:{write:!0}})],ly.prototype,"unit",void 0),ly=s9=b([H("esri.renderers.support.DotDensityLegendOptions")],ly);const xQ=ly;var n9;let Xi=n9=class extends rf(dl){constructor(e){super(e),this.attributes=null,this.backgroundColor=new Ze([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new dn,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new eh({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new n9({attributes:le(this.attributes),backgroundColor:le(this.backgroundColor),dotBlendingEnabled:le(this.dotBlendingEnabled),dotShape:le(this.dotShape),dotSize:le(this.dotSize),dotValue:le(this.dotValue),legendOptions:le(this.legendOptions),outline:le(this.outline),referenceScale:le(this.referenceScale),visualVariables:le(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await is(e,t,i.valueExpression),i.field&&e.add(i.field)}};b([S({type:[_Q],json:{write:!0}})],Xi.prototype,"attributes",void 0),b([S({type:Ze,json:{write:!0}})],Xi.prototype,"backgroundColor",void 0),b([S({type:Boolean}),Ge("dotBlendingEnabled")],Xi.prototype,"blendDots",void 0),b([S({type:Boolean,json:{write:!0}})],Xi.prototype,"dotBlendingEnabled",void 0),b([S({type:String,json:{write:!1}})],Xi.prototype,"dotShape",void 0),b([S({type:Number,json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1}}}})],Xi.prototype,"dotSize",void 0),b([S({type:xQ,json:{write:!0}})],Xi.prototype,"legendOptions",void 0),b([S({type:dn,json:{default:null,write:!0}})],Xi.prototype,"outline",void 0),b([S({type:Number,json:{write:!0}})],Xi.prototype,"dotValue",void 0),b([S({type:Number}),Ge("dotValue")],Xi.prototype,"referenceDotValue",void 0),b([S({type:Number,json:{write:!0}})],Xi.prototype,"referenceScale",void 0),b([S({type:Number,json:{write:!0}})],Xi.prototype,"seed",void 0),b([Ue({dotDensity:"dot-density"})],Xi.prototype,"type",void 0),Xi=n9=b([H("esri.renderers.DotDensityRenderer")],Xi);const SQ=Xi;var o9;let b0=o9=class extends ge{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new o9({color:this.color,ratio:this.ratio})}};b([S({type:Ze,json:{write:!0}})],b0.prototype,"color",void 0),b([S({type:Number,json:{write:!0}})],b0.prototype,"ratio",void 0),b0=o9=b([H("esri.renderers.support.HeatmapColorStop")],b0);const uy=b0;var a9;let Ks=a9=class extends dl{constructor(e){super(e),this.blurRadius=10,this.referenceScale=0,this.colorStops=[new uy({ratio:0,color:new Ze("rgba(255, 140, 0, 0)")}),new uy({ratio:.75,color:new Ze("rgba(255, 140, 0, 1)")}),new uy({ratio:.9,color:new Ze("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.maxPixelIntensity=100,this.minPixelIntensity=0,this.type="heatmap"}async collectRequiredFields(e,t){const i=this.field;i&&typeof i=="string"&&$s(e,t,i)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new a9({blurRadius:this.blurRadius,referenceScale:this.referenceScale,colorStops:le(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}};b([S({type:Number,json:{write:!0}})],Ks.prototype,"blurRadius",void 0),b([S({type:Number})],Ks.prototype,"referenceScale",void 0),b([S({type:[uy],json:{write:!0}})],Ks.prototype,"colorStops",void 0),b([S({type:String,json:{write:!0}})],Ks.prototype,"field",void 0),b([S({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:i==null})}}})],Ks.prototype,"fieldOffset",void 0),b([S({type:Number,json:{write:!0}})],Ks.prototype,"maxPixelIntensity",void 0),b([S({type:Number,json:{write:!0}})],Ks.prototype,"minPixelIntensity",void 0),b([Ue({heatmap:"heatmap"})],Ks.prototype,"type",void 0),Ks=a9=b([H("esri.renderers.HeatmapRenderer")],Ks);const MQ=Ks;var l9;let Hl=l9=class extends rf(dl){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new l9({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:le(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};b([S({type:String,json:{write:!0}})],Hl.prototype,"description",void 0),b([S({type:String,json:{write:!0}})],Hl.prototype,"label",void 0),b([S(sf)],Hl.prototype,"symbol",void 0),b([Ue({simple:"simple"})],Hl.prototype,"type",void 0),Hl=l9=b([H("esri.renderers.SimpleRenderer")],Hl);const u_=Hl,$Q=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function u9(e){return e instanceof Fe}function M8(e){return e instanceof qe?Object.keys(e.items):u9(e)?dr(e).keys():e?Object.keys(e):[]}function Zf(e,t){return e instanceof qe?e.items[t]:e[t]}function IQ(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function J0(e){return e?e.declaredClass:null}function PO(e,t){const i=e.diff;if(i&&typeof i=="function")return i(e,t);const s=M8(e),l=M8(t);if(s.length===0&&l.length===0)return;if(!s.length||!l.length||IQ(e,t))return{type:"complete",oldValue:e,newValue:t};const d=l.filter(O=>s.indexOf(O)===-1),y=s.filter(O=>l.indexOf(O)===-1),g=s.filter(O=>l.indexOf(O)>-1&&Zf(e,O)!==Zf(t,O)).concat(d,y).sort(),_=J0(e);if(_&&$Q.indexOf(_)>-1&&g.length)return{type:"complete",oldValue:e,newValue:t};let M;const E=u9(e)&&u9(t);for(const O of g){const P=Zf(e,O),j=Zf(t,O);let R;(E||typeof P!="function"&&typeof j!="function")&&P!==j&&(P==null&&j==null||(R=i&&i[O]&&typeof i[O]=="function"?i[O](P,j):typeof P=="object"&&typeof j=="object"&&J0(P)===J0(j)?PO(P,j):{type:"complete",oldValue:P,newValue:j},X(R)&&(X(M)?M.diff[O]=R:M={type:"partial",diff:{[O]:R}})))}return M}function TQ(e,t){if(ce(e))return!1;const i=t.split(".");let s=e;for(const l of i){if(s.type==="complete")return!0;if(s.type!=="partial")return!1;{const d=s.diff[l];if(!d)return!1;s=d}}return!0}function fce(e,t){for(const i of t)if(TQ(e,i))return!0;return!1}function EQ(e,t){if(!(typeof e=="function"||typeof t=="function"||ce(e)&&ce(t)))return ce(e)||ce(t)||typeof e=="object"&&typeof t=="object"&&J0(e)!==J0(t)?{type:"complete",oldValue:e,newValue:t}:PO(e,t)}var h9;let Sa=h9=class extends ge{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}castValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new h9({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};b([S({type:String,json:{write:!0}})],Sa.prototype,"description",void 0),b([S({type:String,json:{write:!0}})],Sa.prototype,"label",void 0),b([S(sf)],Sa.prototype,"symbol",void 0),b([S({json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}})],Sa.prototype,"value",void 0),b([yt("value")],Sa.prototype,"castValue",null),Sa=h9=b([H("esri.renderers.support.UniqueValueInfo")],Sa);const Fm=Sa,kQ=()=>!!de("enable-feature:force-wosr"),p2={};async function AQ(e,t){try{return{data:(await NQ(e,t)).data,baseUrl:FF(e),styleUrl:e}}catch(i){return Fd(i),null}}function OQ(e,t,i){const s=t&&t.portal||ts.getDefault();let l;const d=`${s.url} - ${s.user&&s.user.username} - ${e}`;return p2[d]||(p2[d]=CQ(e,s,i).then(y=>(l=y,y.fetchData())).then(y=>({data:y,baseUrl:l.itemUrl,styleName:e}))),p2[d]}function CQ(e,t,i){return t.load(i).then(()=>{const s=new No({disableExtraQuery:!0,query:`owner:${$8} AND type:${I8} AND typekeywords:"${e}"`});return t.queryItems(s,i)}).then(({results:s})=>{let l=null;const d=e.toLowerCase();if(s&&Array.isArray(s)){for(const y of s)if(y.typeKeywords.some(g=>g.toLowerCase()===d)&&y.type===I8&&y.owner===$8){l=y;break}}if(!l)throw new re("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return l.load(i)})}function PQ(e,t,i){return e.styleUrl?AQ(e.styleUrl,i):e.styleName?OQ(e.styleName,t,i):Promise.reject(new re("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function yce(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function mce(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!kQ()){for(const i of e.formatInfos)if(i.type==="gltf")return i.href}return e.webRef}function NQ(e,t){const i=J({responseType:"json",query:{f:"json"}},t);return Ht(an(e),i)}const $8="esri_en",I8="Style",gce="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var w0;const vl=Se.getLogger("esri.renderers.UniqueValueRenderer"),jQ=gi(Fm);let ei=w0=class extends rf(dl){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let s=!1;const l={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let d=0;d<i.length;d++){const y=t.find(g=>g.value===i[d].value);y?EQ(y,i[d])?(l.changed.push({type:"complete",oldValue:y,newValue:i[d]}),s=!0):l.unchanged.push({oldValue:y,newValue:i[d]}):(l.added.push(i[d]),s=!0)}for(let d=0;d<t.length;d++)i.find(y=>y.value===t[d].value)||(l.removed.push(t[d]),s=!0);return s?l:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(e){return e==null||typeof e=="function"?e:Ld(e)}writeField(e,t,i,s){typeof e=="string"?t[i]=e:s&&s.messages?s.messages.push(new re("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):vl.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}readPortal(e,t,i){return i.portal||ts.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const s=Kc(t.styleUrl,i);return Object.freeze({styleUrl:s})}}writeStyleOrigin(e,t,i,s){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=Bd(e.styleUrl,s))}set uniqueValueInfos(e){this.styleOrigin?vl.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void vl.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?jQ(e):new Fm({value:e,symbol:CT(t)}),this.uniqueValueInfos.push(i),this._valueInfoMap[i.value]=i}removeUniqueValueInfo(e){if(this.styleOrigin)vl.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(ce(t)||ce(t.arcade))&&(i=Te(J({},i),{arcade:await qo()})),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(ce(t)||ce(t.arcade)))return void vl.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(ce(i)||ce(i.arcade))){const l=await qo(),{arcadeUtils:d}=l;d.hasGeometryOperations(this.valueExpression)&&await d.enableGeometryOperations(),i=Te(J({},i),{arcade:l})}const s=this._getUniqueValueInfo(e,i);return s&&s.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((e,t)=>e+t.getMeshHash(),"")}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new w0({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:le(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:le(this.visualVariables),legendOptions:le(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:le(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=le(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(le(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(s=>s.collectRequiredFields(e,t)),is(e,t,this.valueExpression)];$s(e,t,this.field),$s(e,t,this.field2),$s(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return PQ(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(i=>{const s=new th({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=s,this._isDefaultSymbolDerived=!0);const l=new Fm({value:i.name,symbol:s});t.push(l),this._valueInfoMap[i.name]=l}),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(e=>this._valueInfoMap[e.value+""]=e)}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:s,spatialReference:l,arcade:d}=a5(t,{});let y=this._cache.compiledFunc;const g=d.arcadeUtils;if(!y){const M=g.createSyntaxTree(this.valueExpression);y=g.createFunction(M),this._cache.compiledFunc=y}const _=g.executeFunction(y,g.createExecContext(e,g.getViewInfo({viewingMode:i,scale:s,spatialReference:l})));return this._valueInfoMap[_+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let s;if(typeof t!="function"&&this.field2){const l=this.field2,d=this.field3,y=[];t&&y.push(i[t]),l&&y.push(i[l]),d&&y.push(i[d]),s=y.join(this.fieldDelimiter||"")}else typeof t=="function"?s=t(e):t&&(s=i[t]);return this._valueInfoMap[s+""]}static fromPortalStyle(e,t){const i=new w0(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||ts.getDefault());const s=i.populateFromStyle();return s.catch(l=>{vl.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",l)}),s}static fromStyleUrl(e,t){const i=new w0(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const s=i.populateFromStyle();return s.catch(l=>{vl.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",l)}),s}};b([S({readOnly:!0})],ei.prototype,"_cache",null),b([Ue({uniqueValue:"unique-value"})],ei.prototype,"type",void 0),b([S(EO)],ei.prototype,"backgroundFillSymbol",void 0),b([S({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],ei.prototype,"field",void 0),b([yt("field")],ei.prototype,"castField",null),b([ke("field")],ei.prototype,"writeField",null),b([S({type:String,json:{write:!0}})],ei.prototype,"field2",void 0),b([S({type:String,json:{write:!0}})],ei.prototype,"field3",void 0),b([S({type:String,json:{write:!0}})],ei.prototype,"valueExpression",void 0),b([S({type:String,json:{write:!0}})],ei.prototype,"valueExpressionTitle",void 0),b([S({type:o_,json:{write:!0}})],ei.prototype,"legendOptions",void 0),b([S({type:String,json:{write:!0}})],ei.prototype,"defaultLabel",void 0),b([S(xM(J({},sf),{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],ei.prototype,"defaultSymbol",null),b([S({type:String,json:{write:!0}})],ei.prototype,"fieldDelimiter",void 0),b([S({type:ts,readOnly:!0})],ei.prototype,"portal",void 0),b([$e("portal",["styleName"])],ei.prototype,"readPortal",null),b([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],ei.prototype,"styleOrigin",void 0),b([$e("styleOrigin",["styleName","styleUrl"])],ei.prototype,"readStyleOrigin",null),b([ke("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],ei.prototype,"writeStyleOrigin",null),b([S({type:[Fm],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ei.prototype,"uniqueValueInfos",null),ei=w0=b([H("esri.renderers.UniqueValueRenderer")],ei);const h_=ei,NO={key:"type",base:dl,typeMap:{heatmap:MQ,simple:u_,"unique-value":h_,"class-breaks":AO,"dot-density":SQ,dictionary:bQ},errorContext:"renderer"},FQ={key:"type",base:dl,typeMap:{simple:u_,"unique-value":h_,"class-breaks":AO},errorContext:"renderer"};function vce(e,t){return jO(e,null,t)}const RQ=Uc({types:NO});function jO(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new fr("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):RQ(e,t,i):null}class c_{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(J2),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new c_,s=this._originStores[lt.DEFAULTS];s&&s.forEach((l,d)=>{i.set(d,le(l),lt.DEFAULTS)});for(let l=lt.SERVICE;l<J2;l++){const d=this._originStores[l];d&&d.forEach((y,g)=>{t&&t.has(g)||i.set(g,le(y),l)})}return i}get(t,i){const s=i===void 0?this._values:this._originStores[i];return s?s.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,s=lt.USER){let l=this._originStores[s];if(l||(l=new Map,this._originStores[s]=l),l.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=s){const d=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,s),d!==i}return!1}delete(t,i=lt.USER){const s=this._originStores[i];if(!s)return;const l=s.get(t);if(s.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let d=i-1;d>=0;d--){const y=this._originStores[d];if(y&&y.has(t)){this._values.set(t,y.get(t)),this._propertyOriginMap.set(t,d);break}}}return l}has(t,i){const s=i===void 0?this._values:this._originStores[i];return!!s&&s.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const s=this._originStores[i],l=s&&s.get(t),d=this._values.get(t);return this._values.set(t,l),this._propertyOriginMap.set(t,i),d!==l}originOf(t){return this._propertyOriginMap.get(t)||lt.DEFAULTS}forEach(t){this._values.forEach(t)}}const FO=e=>{let t=class extends e{constructor(...i){super(...i);const s=dr(this),l=s.store,d=new c_;s.store=d,c$(s,l,d)}read(i,s){d$(this,i,s)}getAtOrigin(i,s){const l=d2(this),d=qa(s);if(typeof i=="string")return l.get(i,d);const y={};return i.forEach(g=>{y[g]=l.get(g,d)}),y}originOf(i){return Ny(this.originIdOf(i))}originIdOf(i){return d2(this).originOf(i)}revert(i,s){const l=d2(this),d=qa(s),y=dr(this);let g;g=typeof i=="string"?i==="*"?l.keys(d):[i]:i,g.forEach(_=>{y.invalidate(_),l.revert(_,d),y.commit(_)})}};return t=b([H("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function d2(e){return dr(e).store}let T8=class extends FO(Fe){};T8=b([H("esri.core.ReadOnlyMultiOriginJSONSupport")],T8);const LQ=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,s="user"){return f2(this).delete(i,qa(s))}write(i={},s){return y$(this,i=i||{},s),i}setAtOrigin(i,s,l){dr(this).setAtOrigin(i,s,qa(l))}removeOrigin(i){const s=f2(this),l=qa(i),d=s.keys(l);for(const y of d)s.originOf(y)===l&&s.set(y,s.get(y,l),lt.USER)}updateOrigin(i,s){const l=f2(this),d=qa(s),y=this.get(i);for(let g=d+1;g<J2;++g)l.delete(i,g);l.set(i,y,d)}toJSON(i){return this.write({},i)}};return t=b([H("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function f2(e){return dr(e).store}const RO=e=>{let t=class extends LQ(FO(e)){constructor(...i){super(...i)}};return t=b([H("esri.core.MultiOriginJSONSupport")],t),t};let E8=class extends RO(Fe){};E8=b([H("esri.core.MultiOriginJSONSupport")],E8);async function DQ(e,t){const{WhereClause:i}=await import("./WhereClause.064f498e.js");return i.create(e,t)}var c9;let Wl=c9=class extends ge{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new c9({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};b([S({type:String,json:{write:!0}})],Wl.prototype,"expression",void 0),b([S({type:String,json:{write:!0}})],Wl.prototype,"name",void 0),b([S({type:["boolean","date","number","string"],json:{write:!0}})],Wl.prototype,"returnType",void 0),b([S({type:String,json:{write:!0}})],Wl.prototype,"title",void 0),Wl=c9=b([H("esri.form.ExpressionInfo")],Wl);const zQ=Wl;let Jl=class extends ge{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};b([S({type:String,json:{write:!0}})],Jl.prototype,"description",void 0),b([S({type:String,json:{write:!0}})],Jl.prototype,"label",void 0),b([S()],Jl.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Jl.prototype,"visibilityExpression",void 0),Jl=b([H("esri.form.elements.Element")],Jl);const Dc=Jl;var p9;let hy=p9=class extends ge{constructor(e){super(e),this.type=null}clone(){return new p9({type:this.type})}};b([S({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],hy.prototype,"type",void 0),hy=p9=b([H("esri.form.elements.inputs.AttachmentInput")],hy);const VQ=hy;var d9;let Kl=d9=class extends Dc{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new d9({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};b([S({type:String,json:{write:!0}})],Kl.prototype,"attachmentKeyword",void 0),b([S({type:Boolean,json:{write:!0}})],Kl.prototype,"editable",void 0),b([S({type:VQ,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Kl.prototype,"input",void 0),b([S({type:["attachment"],json:{read:!1,write:!0}})],Kl.prototype,"type",void 0),Kl=d9=b([H("esri.form.elements.AttachmentElement")],Kl);const k8=Kl;let cy=class extends ge{constructor(e){super(e),this.type=null}};b([S()],cy.prototype,"type",void 0),cy=b([H("esri.form.elements.inputs.Input")],cy);const up=cy;let _0=class extends up{constructor(e){super(e),this.maxLength=null,this.minLength=0}};b([S({type:Number,json:{write:!0}})],_0.prototype,"maxLength",void 0),b([S({type:Number,json:{write:!0}})],_0.prototype,"minLength",void 0),_0=b([H("esri.form.elements.inputs.TextInput")],_0);const p_=_0;var f9;let py=f9=class extends p_{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new f9({maxLength:this.maxLength,minLength:this.minLength})}};b([S({type:["barcode-scanner"],json:{read:!1,write:!0}})],py.prototype,"type",void 0),py=f9=b([H("esri.form.elements.inputs.BarcodeScannerInput")],py);const GQ=py;var y9;let Dh=y9=class extends up{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new y9({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};b([S({type:String,json:{write:!0}})],Dh.prototype,"noValueOptionLabel",void 0),b([S({type:Boolean,json:{write:!0}})],Dh.prototype,"showNoValueOption",void 0),b([S({type:["combo-box"],json:{read:!1,write:!0}})],Dh.prototype,"type",void 0),Dh=y9=b([H("esri.form.elements.inputs.ComboBoxInput")],Dh);const qQ=Dh;var m9;function A8(e){return e!=null?new Date(e):null}function O8(e){return e?e.getTime():null}let Ys=m9=class extends up{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return A8(t.max)}writeMax(e,t){t.max=O8(e)}readMin(e,t){return A8(t.min)}writeMin(e,t){t.min=O8(e)}clone(){return new m9({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};b([S({type:Boolean,json:{write:!0}})],Ys.prototype,"includeTime",void 0),b([S({type:Date,json:{type:Number,write:!0}})],Ys.prototype,"max",void 0),b([$e("max")],Ys.prototype,"readMax",null),b([ke("max")],Ys.prototype,"writeMax",null),b([S({type:Date,json:{type:Number,write:!0}})],Ys.prototype,"min",void 0),b([$e("min")],Ys.prototype,"readMin",null),b([ke("min")],Ys.prototype,"writeMin",null),b([S({type:["datetime-picker"],json:{read:!1,write:!0}})],Ys.prototype,"type",void 0),Ys=m9=b([H("esri.form.elements.inputs.DateTimePickerInput")],Ys);const UQ=Ys;var g9;let zh=g9=class extends up{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new g9({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};b([S({type:String,json:{write:!0}})],zh.prototype,"noValueOptionLabel",void 0),b([S({type:Boolean,json:{write:!0}})],zh.prototype,"showNoValueOption",void 0),b([S({type:["radio-buttons"],json:{read:!1,write:!0}})],zh.prototype,"type",void 0),zh=g9=b([H("esri.form.elements.inputs.RadioButtonsInput")],zh);const BQ=zh;var v9;let Vh=v9=class extends up{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new v9({offValue:this.offValue,onValue:this.onValue})}};b([S({type:[String,Number],json:{write:!0}})],Vh.prototype,"offValue",void 0),b([S({type:[String,Number],json:{write:!0}})],Vh.prototype,"onValue",void 0),b([S({type:["switch"],json:{read:!1,write:!0}})],Vh.prototype,"type",void 0),Vh=v9=b([H("esri.form.elements.inputs.SwitchInput")],Vh);const HQ=Vh;var b9;let dy=b9=class extends p_{constructor(e){super(e),this.type="text-area"}clone(){return new b9({maxLength:this.maxLength,minLength:this.minLength})}};b([S({type:["text-area"],json:{read:!1,write:!0}})],dy.prototype,"type",void 0),dy=b9=b([H("esri.form.elements.inputs.TextAreaInput")],dy);const WQ=dy;var w9;let fy=w9=class extends p_{constructor(e){super(e),this.type="text-box"}clone(){return new w9({maxLength:this.maxLength,minLength:this.minLength})}};b([S({type:["text-box"],json:{read:!1,write:!0}})],fy.prototype,"type",void 0),fy=w9=b([H("esri.form.elements.inputs.TextBoxInput")],fy);const JQ=fy,KQ={base:up,key:"type",typeMap:{"barcode-scanner":GQ,"combo-box":qQ,"datetime-picker":UQ,"radio-buttons":BQ,switch:HQ,"text-area":WQ,"text-box":JQ}};var _9;let ms=_9=class extends Dc{constructor(e){super(e),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new _9({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};b([S({types:$k,json:{read:{reader:F4},write:!0}})],ms.prototype,"domain",void 0),b([S({type:Boolean,json:{write:!0}})],ms.prototype,"editable",void 0),b([S({type:String,json:{write:!0}})],ms.prototype,"editableExpression",void 0),b([S({type:String,json:{write:!0}})],ms.prototype,"fieldName",void 0),b([S({type:String,json:{write:!0}})],ms.prototype,"hint",void 0),b([S({types:KQ,json:{read:{source:"inputType"},write:{target:"inputType"}}})],ms.prototype,"input",void 0),b([S({type:String,json:{write:!0}})],ms.prototype,"requiredExpression",void 0),b([S({type:String,json:{read:!1,write:!0}})],ms.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],ms.prototype,"valueExpression",void 0),ms=_9=b([H("esri.form.elements.FieldElement")],ms);const C8=ms;var x9;let _o=x9=class extends Dc{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new x9({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:le(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};b([S({type:Number,json:{write:!0}})],_o.prototype,"displayCount",void 0),b([S({type:["list"],json:{write:!0}})],_o.prototype,"displayType",void 0),b([S({type:Boolean,json:{write:!0}})],_o.prototype,"editable",void 0),b([S({type:[iT],json:{write:!0}})],_o.prototype,"orderByFields",void 0),b([S({type:Number,json:{write:!0}})],_o.prototype,"relationshipId",void 0),b([S({type:["relationship"],json:{read:!1,write:!0}})],_o.prototype,"type",void 0),_o=x9=b([H("esri.form.elements.RelationshipElement")],_o);const P8=_o;function LO(e){return{typesWithGroup:{base:Dc,key:"type",typeMap:{attachment:k8,field:C8,group:e,relationship:P8}},typesWithoutGroup:{base:Dc,key:"type",typeMap:{attachment:k8,field:C8,relationship:P8}}}}function DO(e,t,i=!0){if(!e)return null;const s=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(l=>s[l.type]).map(l=>s[l.type].fromJSON(l))}function zO(e,t,i=!0){if(!e)return null;const s=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(l=>s[l.type]).map(l=>l.toJSON())}function VO(e,t,i=!0){return e?e.map(s=>Hn(i?t.typesWithGroup:t.typesWithoutGroup,s)):null}var S9;let Fn=S9=class extends Dc{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return VO(e,y2,!1)}readElements(e,t){return DO(t.formElements,y2,!1)}writeElements(e,t){t.formElements=zO(e,y2,!1)}clone(){return new S9({description:this.description,elements:le(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};b([S({json:{write:!0}})],Fn.prototype,"elements",void 0),b([yt("elements")],Fn.prototype,"castElements",null),b([$e("elements",["formElements"])],Fn.prototype,"readElements",null),b([ke("elements")],Fn.prototype,"writeElements",null),b([S({type:["collapsed","expanded"],json:{write:!0}})],Fn.prototype,"initialState",void 0),b([S({type:String,json:{read:!1,write:!0}})],Fn.prototype,"type",void 0),Fn=S9=b([H("esri.form.elements.GroupElement")],Fn);const y2=LO(Fn),YQ=Fn;var M9;const m2=LO(YQ);let On=M9=class extends ge{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(e){return VO(e,m2)}readElements(e,t){return DO(t.formElements,m2)}writeElements(e,t){t.formElements=zO(e,m2)}clone(){return new M9({description:this.description,expressionInfos:le(this.expressionInfos),elements:le(this.elements),title:this.title})}};b([S({type:String,json:{write:!0}})],On.prototype,"description",void 0),b([S({json:{write:!0}})],On.prototype,"elements",void 0),b([yt("elements")],On.prototype,"castElements",null),b([$e("elements",["formElements"])],On.prototype,"readElements",null),b([ke("elements")],On.prototype,"writeElements",null),b([S({type:[zQ],json:{write:!0}})],On.prototype,"expressionInfos",void 0),b([S({type:String,json:{write:!0}})],On.prototype,"title",void 0),On=M9=b([H("esri.form.FormTemplate")],On);const XQ=On;var x0;const Rm=Hi()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),GO=Rm.jsonValues.slice();mM(GO,"orthometric");const K0=Hi()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Xs=x0=class extends ge{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return Rm.write(e,t,i)}readHeightModel(e,t,i){return Rm.read(e)||(i&&i.messages&&i.messages.push(ZQ(e,{context:i})),null)}readHeightUnit(e,t,i){return K0.read(e)||(i&&i.messages&&i.messages.push(N8(e,{context:i})),null)}readHeightUnitService(e,t,i){return zT(e)||K0.read(e)||(i&&i.messages&&i.messages.push(N8(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new x0({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=zG(t);return new x0({heightModel:e.heightModel,heightUnit:i,vertCRS:e.vertCRS})}write(e,t){return t=J({origin:"web-scene"},t),super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new x0;return t.read(e,{origin:"web-scene"}),t}};function N8(e,t){return new fr("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function ZQ(e,t){return new fr("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}b([S({type:Rm.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:GO,default:"ellipsoidal"}}}})],Xs.prototype,"heightModel",void 0),b([ke("web-scene","heightModel")],Xs.prototype,"writeHeightModel",null),b([$e(["web-scene","service"],"heightModel")],Xs.prototype,"readHeightModel",null),b([S({type:K0.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:K0.jsonValues,write:K0.write}}}})],Xs.prototype,"heightUnit",void 0),b([$e("web-scene","heightUnit")],Xs.prototype,"readHeightUnit",null),b([$e("service","heightUnit")],Xs.prototype,"readHeightUnitService",null),b([S({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Xs.prototype,"vertCRS",void 0),b([$e("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Xs.prototype,"readVertCRS",null),Xs=x0=b([H("esri.geometry.HeightModelInfo")],Xs);const Gg=Xs;function j8(e,t,i){if(e.hasM==null||e.hasZ)for(const s of t)for(const l of s)l.length>2&&(l[2]*=i)}function QQ(e,t,i){if(!e&&!t||!i)return;const s=Cc(i);F8(e,i,s),F8(t,i,s)}function F8(e,t,i){if(e)for(const s of e)eee(s.geometry,t,i)}function eee(e,t,i){if(ce(e)||!e.spatialReference||jr(e.spatialReference,t))return;const s=Cc(e.spatialReference)/i;if(s!==1){if("x"in e)e.z!=null&&(e.z*=s);else if("rings"in e)j8(e,e.rings,s);else if("paths"in e)j8(e,e.paths,s);else if("points"in e&&(e.hasM==null||e.hasZ))for(const l of e.points)l.length>2&&(l[2]*=s)}}let tee=0;const g2=Se.getLogger("esri.layers.graphics.sources.MemorySource");let Ma=class extends Go.LoadableMixin(og(Yu(qe))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=X(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get workerGeometryType(){var e;const t=(e=this.layer)==null?void 0:e.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);Im(e,this.layer.spatialReference,i);const s=rh.fromJSON(i);if(!this._requiresClientGraphicMapping())return s;const l=this.layer.objectIdField;for(const d of s.features){const y=d.attributes[l],g=this._idToClientGraphic.get(y);g&&(d.geometry=g.geometry)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new re("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return Im(e,this.layer.spatialReference,i),i}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(i=>({count:i.count,extent:Mt.fromJSON(i.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async _applyEdits(e){if(!this._connection)throw new re("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let i=null;const s=[],l=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const d=M=>"objectId"in M&&M.objectId!=null?M.objectId:"attributes"in M&&M.attributes[t]!=null?M.attributes[t]:null;if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const M of e.deleteFeatures){const E=d(M);E!=null&&s.push(E)}const y=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const M of e.updateFeatures)if(l.push(this._serializeFeature(M)),y){const E=d(M);E!=null&&y.set(E,M)}}QQ(i?i.features:null,l,this.layer.spatialReference);const{fullExtent:g,featureEditResults:_}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:l,deletes:s});return this.fullExtent=g,i&&i.finish(_.uidToObjectId),this._updateClientGraphicIds(y,_),this._createEditsResult(_)}async _prepareClientMapping(e,t){if(this.layerOrSourceGeometryType!=="mesh"||ce(e))return;const i=[];for(const{geometry:s}of e)!X(s)||s.type!=="mesh"||s.hasExtent||s.loaded||i.push(s.load({signal:t}));i.length&&await Promise.all(i)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const i of t.updateResults){if(!i.success)continue;const s=e.get(i.objectId);s!=null&&this._addIdToClientGraphic(s)}for(const i of t.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new re("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,i=new Array(e.length);let s=null;for(let d=0;d<e.length;d++){const y=e[d],g=this._serializeFeature(y);!s&&X(y.geometry)&&(s=y.geometry.type),i[d]=g,t.set(`${g.uid}`,y)}const l=this;return{features:i,inferredGeometryType:s,finish(d){const y=l.sourceJSON.objectIdField;for(const g in d){const _=d[g],M=t.get(g);M&&(M.attributes||(M.attributes={}),_===-1?delete M.attributes[y]:M.attributes[y]=_,l._addIdToClientGraphic(M))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,i=e.attributes&&e.attributes[t];i!=null&&this._idToClientGraphic.set(i,e)}get layerOrSourceGeometryType(){var e,t,i;return(e=(t=this.layer)==null?void 0:t.geometryType)!=null?e:(i=this.sourceJSON)==null?void 0:i.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e),s=(tee++).toString();return i?{uid:s,geometry:i.toJSON(),attributes:t}:{uid:s,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return ce(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?Ts.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await kG("MemorySourceWorker",{strategy:de("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:i,objectIdField:s,hasM:l,hasZ:d,timeInfo:y}=this.layer,g=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const _=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",P=>{g2.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),P.preventDefault()}));const M={features:_.features,fields:t&&t.map(P=>P.toJSON()),geometryType:B6.toJSON(this.workerGeometryType),hasM:this.layerOrSourceGeometryType!=="mesh"&&l,hasZ:this.layerOrSourceGeometryType==="mesh"||d,objectIdField:s,spatialReference:g?null:i&&i.toJSON(),timeInfo:y?y.toJSON():null},E=await this._connection.invoke("load",M,{signal:e});for(const P of E.warnings)g2.warn(P.message,{layer:this.layer,warning:P});E.featureErrors.length&&g2.warn(`Encountered ${E.featureErrors.length} validation errors while loading features`,E.featureErrors);const O=E.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(_.inferredGeometryType)&&(O.geometryType=B6.toJSON(_.inferredGeometryType)),this.sourceJSON=O,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),_.finish(E.assignedObjectIds)}};b([v5({Type:rs,ensureType:gi(rs)})],Ma.prototype,"itemType",void 0),b([S()],Ma.prototype,"type",void 0),b([S({constructOnly:!0})],Ma.prototype,"layer",void 0),b([S({readOnly:!0})],Ma.prototype,"workerGeometryType",null),b([S()],Ma.prototype,"sourceJSON",void 0),Ma=b([H("esri.layers.graphics.sources.MemorySource")],Ma);const R8=Ma;function iee(e){return"portalItem"in e}const ree=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):iee(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return b([S({type:String})],t.prototype,"apiKey",null),t=b([H("esri.layers.mixins.APIKeyMixin")],t),t},qO={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},UO=Object.values(qO),BO=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${UO.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),see=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${UO.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),nee=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function bce(e){return!!BO.test(e)}function nf(e){const t=Ri(e),i=t.path.match(BO)||t.path.match(see);if(!i)return null;const[,s,l,d,y]=i,g=l.indexOf("/");return{title:d_(g!==-1?l.slice(g+1):l),serverType:qO[d.toLowerCase()],sublayer:y!=null&&y!==""?parseInt(y,10):null,url:{path:s}}}function oee(e){const t=Ri(e).path.match(nee);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function d_(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function aee(e,t){const i=[];if(e){const s=nf(e);X(s)&&s.title&&i.push(s.title)}if(t){const s=d_(t);i.push(s)}if(i.length===2){if(i[0].toLowerCase().indexOf(i[1].toLowerCase())!==-1)return i[0];if(i[1].toLowerCase().indexOf(i[0].toLowerCase())!==-1)return i[1]}return i.join(" - ")}function HO(e){if(!e)return!1;const t=".arcgis.com/",i="//services",s="//tiles",l="//features",d=(e=e.toLowerCase()).indexOf(t)!==-1,y=e.indexOf(i)!==-1||e.indexOf(s)!==-1||e.indexOf(l)!==-1;return d&&y}function lee(e,t){return e&&T$(E$(e,t))}function uee(e){let{url:t}=e;if(!t)return{url:t};t=E$(t,e.logger);const i=Ri(t),s=nf(i.path);let l;if(X(s))s.sublayer!=null&&e.layer.layerId==null&&(l=s.sublayer),t=s.url.path;else if(e.nonStandardUrlAllowed){const d=oee(i.path);X(d)&&(t=d.serviceUrl,l=d.sublayerId)}return{url:T$(t),layerId:l}}function hee(e,t,i,s,l){Vu(t,s,"url",l),s.url&&e.layerId!=null&&(s.url=rl(s.url,i,e.layerId.toString()))}function wce(e){if(!e)return!1;const t=e.toLowerCase(),i=t.indexOf("/services/")!==-1,s=t.indexOf("/mapserver/wmsserver")!==-1,l=t.indexOf("/imageserver/wmsserver")!==-1,d=t.indexOf("/wmsserver")!==-1;return i&&(s||l||d)}const cee=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=nf(this.url);if(X(i)&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",lee(i,Se.getLogger(this.declaredClass)))}};return b([S()],t.prototype,"title",null),b([S({type:String})],t.prototype,"url",null),t=b([H("esri.layers.mixins.ArcGISService")],t),t};function qg(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function pee(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function dee(e,t,i,s,l,d,y,g,_,M,E,O,P,j,R,z){const q=new Float32Array(16);return q[0]=e,q[1]=t,q[2]=i,q[3]=s,q[4]=l,q[5]=d,q[6]=y,q[7]=g,q[8]=_,q[9]=M,q[10]=E,q[11]=O,q[12]=P,q[13]=j,q[14]=R,q[15]=z,q}function fee(e,t){return new Float32Array(e,t,16)}const yee=qg();Object.freeze({__proto__:null,create:qg,clone:pee,fromValues:dee,createView:fee,IDENTITY:yee});const mee=(e,t)=>{const i=pl(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return Ho(i,i)},gee=(e,t)=>{const i=pl(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return Ho(i,i)},vee=(e,t)=>{const i=1-t,s=pl(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Ho(s,s)},bee=(e,t)=>{const i=Math.sin(t*Math.PI/180),s=Math.cos(t*Math.PI/180),l=pl(e,.213+.787*s-.213*i,.715-.715*s-.715*i,.072-.072*s+.928*i,0,.213-.213*s+.143*i,.715+.285*s+.14*i,.072-.072*s-.283*i,0,.213-.213*s-.787*i,.715-.715*s+.715*i,.072+.928*s+.072*i,0,0,0,0,1);return Ho(l,l)},wee=(e,t)=>{const i=1-2*t,s=pl(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return Ho(s,s)},_ee=(e,t)=>{const i=pl(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return Ho(i,i)},xee=(e,t)=>{const i=1-t,s=pl(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Ho(s,s)};class Ug{constructor(t,i,s){this.strength=t,this.radius=i,this.threshold=s,this.type="bloom"}interpolate(t,i,s){this.strength=Sr(t.strength,i.strength,s),this.radius=Sr(t.radius,i.radius,s),this.threshold=Sr(t.threshold,i.threshold,s)}clone(){return new Ug(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Y0(this.radius),strength:this.strength,threshold:this.threshold}}}class Bg{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,s){this.radius=Math.round(Sr(t.radius,i.radius,s))}clone(){return new Bg(this.radius)}toJSON(){return{type:"blur",radius:Y0(this.radius)}}}class $d{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,s){this.amount=Sr(t.amount,i.amount,s),this._updateMatrix()}clone(){return new $d(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||qg();switch(this.type){case"brightness":this._colorMatrix=mee(t,this.amount);break;case"contrast":this._colorMatrix=gee(t,this.amount);break;case"grayscale":this._colorMatrix=vee(t,this.amount);break;case"invert":this._colorMatrix=wee(t,this.amount);break;case"saturate":this._colorMatrix=_ee(t,this.amount);break;case"sepia":this._colorMatrix=xee(t,this.amount)}}}class Hg{constructor(t,i,s,l){this.offsetX=t,this.offsetY=i,this.blurRadius=s,this.color=l,this.type="drop-shadow"}interpolate(t,i,s){this.offsetX=Sr(t.offsetX,i.offsetX,s),this.offsetY=Sr(t.offsetY,i.offsetY,s),this.blurRadius=Sr(t.blurRadius,i.blurRadius,s),this.color[0]=Math.round(Sr(t.color[0],i.color[0],s)),this.color[1]=Math.round(Sr(t.color[1],i.color[1],s)),this.color[2]=Math.round(Sr(t.color[2],i.color[2],s)),this.color[3]=Sr(t.color[3],i.color[3],s)}clone(){return new Hg(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:Y0(this.offsetX),yoffset:Y0(this.offsetY),blurRadius:Y0(this.blurRadius),color:t}}}class Wg{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,s){this.angle=Sr(t.angle,i.angle,s),this._updateMatrix()}clone(){return new Wg(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||qg();this._colorMatrix=bee(t,this.angle)}}class Jg{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,s){this.amount=Sr(t.amount,i.amount,s)}clone(){return new Jg(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function Sr(e,t,i){return e+(t-e)*i}function Y0(e){return Math.round(1e3*al(e))/1e3}function See(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new $d(e.type,0);case"saturate":case"brightness":case"contrast":return new $d(e.type,1);case"opacity":return new Jg(1);case"hue-rotate":return new Wg(0);case"blur":return new Bg(0);case"drop-shadow":return new Hg(0,0,0,[...P5("transparent")]);case"bloom":return new Ug(0,0,1)}}var _ce=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function xce(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Sce(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function Mee(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((s,l)=>s.type===i[l].type)}function $ee(e,t){const i=e.length>t.length?e:t,s=e.length>t.length?t:e;for(let l=s.length;l<i.length;l++)s.push(See(i[l]))}function Iee(e){const t=e[0];return!!t&&"type"in t}var L8,D8,WO={exports:{}};function JO(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=z8(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new re("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:z8(i.value)}});t.sort((i,s)=>s.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!Mee(t[i].effects,t[i+1].effects))throw new re("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});$ee(t[i].effects,t[i+1].effects)}return t.sort((i,s)=>s.scale-i.scale),t}function z8(e){let t;if(!e)return[];try{t=WO.exports.parse(e)}catch(i){throw new re("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>Tee(i))}function Tee(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Eee(e);case"opacity":return kee(e);case"hue-rotate":return Aee(e);case"blur":return Oee(e);case"drop-shadow":return Cee(e);case"bloom":return Pee(e)}}catch(t){throw t.details.filter=e,t}throw new re("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function Eee(e){let t=1;return hp(e.parameters,1),e.parameters.length===1&&(t=en(e.parameters[0])),new $d(e.name,t)}function kee(e){let t=1;return hp(e.parameters,1),e.parameters.length===1&&(t=en(e.parameters[0])),new Jg(t)}function Aee(e){let t=0;return hp(e.parameters,1),e.parameters.length===1&&(t=Dee(e.parameters[0])),new Wg(t)}function Oee(e){let t=0;return hp(e.parameters,1),e.parameters.length===1&&(t=m_(e.parameters[0]),of(t,e.parameters[0])),new Bg(t)}function Cee(e){const t=[];let i=null;for(const s of e.parameters)if(s.type==="color"){if(t.length&&Object.freeze(t),i)throw new re("effect:type-error","Accepts only one color",{});i=zee(s)}else{const l=m_(s);if(Object.isFrozen(t))throw new re("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(l),t.length===3&&of(l,s)}if(t.length<2||t.length>3)throw new re("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new Hg(t[0],t[1],t[2]||0,i||KO("black"))}function Pee(e){let t=1,i=0,s=0;return hp(e.parameters,3),e.parameters[0]&&(t=en(e.parameters[0])),e.parameters[1]&&(i=m_(e.parameters[1]),of(i,e.parameters[1])),e.parameters[2]&&(s=en(e.parameters[2])),new Ug(t,i,s)}function hp(e,t){if(e.length>t)throw new re("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function Kg(e){if(e.type==="color")return"<color>";if(e.unit){if(y_[e.unit])return"<length>";if(f_[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function of(e,t){if(e<0)throw new re("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function Nee(e){if(e.type!=="quantity"||e.unit!==null)throw new re("effect:type-error",`Expected <double>, Actual: ${Kg(e)}`,{term:e})}function jee(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new re("effect:type-error",`Expected <double> or <percentage>, Actual: ${Kg(e)}`,{term:e})}D8=function(){function e(l,d){function y(){this.constructor=l}y.prototype=d.prototype,l.prototype=new y}function t(l,d,y,g){var _=Error.call(this,l);return Object.setPrototypeOf&&Object.setPrototypeOf(_,t.prototype),_.expected=d,_.found=y,_.location=g,_.name="SyntaxError",_}function i(l,d,y){return y=y||" ",l.length>d?l:(d-=l.length,l+(y+=y.repeat(d)).slice(0,d))}function s(l,d){var y,g={},_=(d=d!==void 0?d:{}).grammarSource,M={start:et},E=et,O="none",P=")",j=",",R="(",z="%",q="px",Y="cm",te="mm",ne="in",he="pt",se="pc",ue="deg",Ee="rad",Oe="grad",Le="turn",Ne="#",je=".",De="e",rt=/^[ \t\n\r]/,Ve=/^[a-z\-]/,ni=/^[0-9a-fA-F]/,Rr=/^[+\-]/,Jt=/^[0-9]/,Wi=ht("none"),Lr=Pe("none",!1),iv=Pe(")",!1),hf=Pe(",",!1),rv=ht("whitespace"),cf=Re([" ","	",`
`,"\r"],!1,!1),sv=ht("function"),nv=Pe("(",!1),ov=ht("identifier"),pf=Re([["a","z"],"-"],!1,!1),av=ht("percentage"),lv=Pe("%",!1),uv=ht("length"),hv=Pe("px",!1),cv=Pe("cm",!1),df=Pe("mm",!1),vi=Pe("in",!1),G=Pe("pt",!1),Ji=Pe("pc",!1),ff=ht("angle"),ft=Pe("deg",!1),Kt=Pe("rad",!1),Os=Pe("grad",!1),yn=Pe("turn",!1),mn=ht("number"),to=ht("color"),yf=Pe("#",!1),pp=Re([["0","9"],["a","f"],["A","F"]],!1,!1),lh=Re(["+","-"],!1,!1),_e=Re([["0","9"]],!1,!1),h=Pe(".",!1),k=Pe("e",!1),v=function(){return[]},u=function(Z,ye){return{type:"function",name:Z,parameters:ye||[]}},o=function(Z,ye){return ye.length>0?YP(Z,ye,3):[Z]},r=function(Z){return{type:"quantity",value:Z.value,unit:Z.unit}},n=function(Z){return{type:"color",colorType:Z.type,value:Z.value}},a=function(Z){return Z},c=function(){return be()},p=function(Z){return{value:Z,unit:"%"}},f=function(Z){return{value:Z,unit:"px"}},m=function(Z){return{value:Z,unit:"cm"}},w=function(Z){return{value:Z,unit:"mm"}},x=function(Z){return{value:Z,unit:"in"}},$=function(Z){return{value:Z,unit:"pt"}},T=function(Z){return{value:Z,unit:"pc"}},A=function(Z){return{value:Z,unit:"deg"}},C=function(Z){return{value:Z,unit:"rad"}},N=function(Z){return{value:Z,unit:"grad"}},L=function(Z){return{value:Z,unit:"turn"}},D=function(Z){return{value:Z,unit:null}},F=function(){return{type:"hex",value:be()}},V=function(Z){return{type:"function",value:Z}},W=function(){return{type:"named",value:be()}},K=function(){return parseFloat(be())},B=0,ee=0,ae=[{line:1,column:1}],me=0,fe=[],pe=0;if("startRule"in d){if(!(d.startRule in M))throw new Error(`Can't start parsing from rule "`+d.startRule+'".');E=M[d.startRule]}function be(){return l.substring(ee,B)}function Pe(Z,ye){return{type:"literal",text:Z,ignoreCase:ye}}function Re(Z,ye,ve){return{type:"class",parts:Z,inverted:ye,ignoreCase:ve}}function ut(){return{type:"end"}}function ht(Z){return{type:"other",description:Z}}function oi(Z){var ye,ve=ae[Z];if(ve)return ve;for(ye=Z-1;!ae[ye];)ye--;for(ve={line:(ve=ae[ye]).line,column:ve.column};ye<Z;)l.charCodeAt(ye)===10?(ve.line++,ve.column=1):ve.column++,ye++;return ae[Z]=ve,ve}function Tt(Z,ye){var ve=oi(Z),nt=oi(ye);return{source:_,start:{offset:Z,line:ve.line,column:ve.column},end:{offset:ye,line:nt.line,column:nt.column}}}function Ie(Z){B<me||(B>me&&(me=B,fe=[]),fe.push(Z))}function mt(Z,ye,ve){return new t(t.buildMessage(Z,ye),Z,ye,ve)}function et(){var Z;return(Z=Gt())===g&&(Z=jt()),Z}function Gt(){var Z,ye;return pe++,Z=B,Je(),l.substr(B,4)===O?(ye=O,B+=4):(ye=g,pe===0&&Ie(Lr)),ye!==g?(Je(),ee=Z,Z=v()):(B=Z,Z=g),pe--,Z===g&&pe===0&&Ie(Wi),Z}function jt(){var Z,ye;if(Z=[],(ye=Yt())!==g)for(;ye!==g;)Z.push(ye),ye=Yt();else Z=g;return Z}function Yt(){var Z,ye,ve,nt;return Z=B,Je(),(ye=uh())!==g?(Je(),(ve=at())===g&&(ve=null),Je(),l.charCodeAt(B)===41?(nt=P,B++):(nt=g,pe===0&&Ie(iv)),nt!==g?(Je(),ee=Z,Z=u(ye,ve)):(B=Z,Z=g)):(B=Z,Z=g),Z}function at(){var Z,ye,ve,nt,Di,Xt,ns,mf;if(Z=B,(ye=Mi())!==g){for(ve=[],nt=B,Di=Je(),l.charCodeAt(B)===44?(Xt=j,B++):(Xt=g,pe===0&&Ie(hf)),Xt===g&&(Xt=null),ns=Je(),(mf=Mi())!==g?nt=Di=[Di,Xt,ns,mf]:(B=nt,nt=g);nt!==g;)ve.push(nt),nt=B,Di=Je(),l.charCodeAt(B)===44?(Xt=j,B++):(Xt=g,pe===0&&Ie(hf)),Xt===g&&(Xt=null),ns=Je(),(mf=Mi())!==g?nt=Di=[Di,Xt,ns,mf]:(B=nt,nt=g);ee=Z,Z=o(ye,ve)}else B=Z,Z=g;return Z}function Mi(){var Z,ye;return Z=B,(ye=hh())===g&&(ye=dp())===g&&(ye=HP())===g&&(ye=WP()),ye!==g&&(ee=Z,ye=r(ye)),(Z=ye)===g&&(Z=B,(ye=JP())!==g&&(ee=Z,ye=n(ye)),Z=ye),Z}function Je(){var Z,ye;for(pe++,Z=[],rt.test(l.charAt(B))?(ye=l.charAt(B),B++):(ye=g,pe===0&&Ie(cf));ye!==g;)Z.push(ye),rt.test(l.charAt(B))?(ye=l.charAt(B),B++):(ye=g,pe===0&&Ie(cf));return pe--,ye=g,pe===0&&Ie(rv),Z}function uh(){var Z,ye,ve;return pe++,Z=B,(ye=fl())!==g?(l.charCodeAt(B)===40?(ve=R,B++):(ve=g,pe===0&&Ie(nv)),ve!==g?(ee=Z,Z=a(ye)):(B=Z,Z=g)):(B=Z,Z=g),pe--,Z===g&&(ye=g,pe===0&&Ie(sv)),Z}function fl(){var Z,ye,ve;if(pe++,Z=B,ye=[],Ve.test(l.charAt(B))?(ve=l.charAt(B),B++):(ve=g,pe===0&&Ie(pf)),ve!==g)for(;ve!==g;)ye.push(ve),Ve.test(l.charAt(B))?(ve=l.charAt(B),B++):(ve=g,pe===0&&Ie(pf));else ye=g;return ye!==g&&(ee=Z,ye=c()),pe--,(Z=ye)===g&&(ye=g,pe===0&&Ie(ov)),Z}function hh(){var Z,ye,ve;return pe++,Z=B,Je(),(ye=ss())!==g?(l.charCodeAt(B)===37?(ve=z,B++):(ve=g,pe===0&&Ie(lv)),ve!==g?(ee=Z,Z=p(ye)):(B=Z,Z=g)):(B=Z,Z=g),pe--,Z===g&&pe===0&&Ie(av),Z}function dp(){var Z,ye,ve;return pe++,Z=B,Je(),(ye=ss())!==g?(l.substr(B,2)===q?(ve=q,B+=2):(ve=g,pe===0&&Ie(hv)),ve!==g?(ee=Z,Z=f(ye)):(B=Z,Z=g)):(B=Z,Z=g),Z===g&&(Z=B,Je(),(ye=ss())!==g?(l.substr(B,2)===Y?(ve=Y,B+=2):(ve=g,pe===0&&Ie(cv)),ve!==g?(ee=Z,Z=m(ye)):(B=Z,Z=g)):(B=Z,Z=g),Z===g&&(Z=B,Je(),(ye=ss())!==g?(l.substr(B,2)===te?(ve=te,B+=2):(ve=g,pe===0&&Ie(df)),ve!==g?(ee=Z,Z=w(ye)):(B=Z,Z=g)):(B=Z,Z=g),Z===g&&(Z=B,Je(),(ye=ss())!==g?(l.substr(B,2)===ne?(ve=ne,B+=2):(ve=g,pe===0&&Ie(vi)),ve!==g?(ee=Z,Z=x(ye)):(B=Z,Z=g)):(B=Z,Z=g),Z===g&&(Z=B,Je(),(ye=ss())!==g?(l.substr(B,2)===he?(ve=he,B+=2):(ve=g,pe===0&&Ie(G)),ve!==g?(ee=Z,Z=$(ye)):(B=Z,Z=g)):(B=Z,Z=g),Z===g&&(Z=B,Je(),(ye=ss())!==g?(l.substr(B,2)===se?(ve=se,B+=2):(ve=g,pe===0&&Ie(Ji)),ve!==g?(ee=Z,Z=T(ye)):(B=Z,Z=g)):(B=Z,Z=g)))))),pe--,Z===g&&pe===0&&Ie(uv),Z}function HP(){var Z,ye,ve;return pe++,Z=B,(ye=ss())!==g?(l.substr(B,3)===ue?(ve=ue,B+=3):(ve=g,pe===0&&Ie(ft)),ve!==g?(ee=Z,Z=A(ye)):(B=Z,Z=g)):(B=Z,Z=g),Z===g&&(Z=B,(ye=ss())!==g?(l.substr(B,3)===Ee?(ve=Ee,B+=3):(ve=g,pe===0&&Ie(Kt)),ve!==g?(ee=Z,Z=C(ye)):(B=Z,Z=g)):(B=Z,Z=g),Z===g&&(Z=B,(ye=ss())!==g?(l.substr(B,4)===Oe?(ve=Oe,B+=4):(ve=g,pe===0&&Ie(Os)),ve!==g?(ee=Z,Z=N(ye)):(B=Z,Z=g)):(B=Z,Z=g),Z===g&&(Z=B,(ye=ss())!==g?(l.substr(B,4)===Le?(ve=Le,B+=4):(ve=g,pe===0&&Ie(yn)),ve!==g?(ee=Z,Z=L(ye)):(B=Z,Z=g)):(B=Z,Z=g)))),pe--,Z===g&&(ye=g,pe===0&&Ie(ff)),Z}function WP(){var Z,ye;return pe++,Z=B,Je(),(ye=ss())!==g?(ee=Z,Z=D(ye)):(B=Z,Z=g),pe--,Z===g&&pe===0&&Ie(mn),Z}function JP(){var Z,ye,ve,nt;if(pe++,Z=B,l.charCodeAt(B)===35?(ye=Ne,B++):(ye=g,pe===0&&Ie(yf)),ye!==g){if(ve=[],ni.test(l.charAt(B))?(nt=l.charAt(B),B++):(nt=g,pe===0&&Ie(pp)),nt!==g)for(;nt!==g;)ve.push(nt),ni.test(l.charAt(B))?(nt=l.charAt(B),B++):(nt=g,pe===0&&Ie(pp));else ve=g;ve!==g?(ee=Z,Z=F()):(B=Z,Z=g)}else B=Z,Z=g;return Z===g&&(Z=B,(ye=Yt())!==g&&(ee=Z,ye=V(ye)),(Z=ye)===g&&(Z=B,(ye=fl())!==g&&(ee=Z,ye=W()),Z=ye)),pe--,Z===g&&(ye=g,pe===0&&Ie(to)),Z}function ss(){var Z,ye,ve,nt,Di,Xt,ns;for(Z=B,Rr.test(l.charAt(B))?(l.charAt(B),B++):pe===0&&Ie(lh),ye=B,ve=[],Jt.test(l.charAt(B))?(nt=l.charAt(B),B++):(nt=g,pe===0&&Ie(_e));nt!==g;)ve.push(nt),Jt.test(l.charAt(B))?(nt=l.charAt(B),B++):(nt=g,pe===0&&Ie(_e));if(l.charCodeAt(B)===46?(nt=je,B++):(nt=g,pe===0&&Ie(h)),nt!==g){if(Di=[],Jt.test(l.charAt(B))?(Xt=l.charAt(B),B++):(Xt=g,pe===0&&Ie(_e)),Xt!==g)for(;Xt!==g;)Di.push(Xt),Jt.test(l.charAt(B))?(Xt=l.charAt(B),B++):(Xt=g,pe===0&&Ie(_e));else Di=g;Di!==g?ye=ve=[ve,nt,Di]:(B=ye,ye=g)}else B=ye,ye=g;if(ye===g)if(ye=[],Jt.test(l.charAt(B))?(ve=l.charAt(B),B++):(ve=g,pe===0&&Ie(_e)),ve!==g)for(;ve!==g;)ye.push(ve),Jt.test(l.charAt(B))?(ve=l.charAt(B),B++):(ve=g,pe===0&&Ie(_e));else ye=g;if(ye!==g){if(ve=B,l.charCodeAt(B)===101?(nt=De,B++):(nt=g,pe===0&&Ie(k)),nt!==g){if(Rr.test(l.charAt(B))?(Di=l.charAt(B),B++):(Di=g,pe===0&&Ie(lh)),Di===g&&(Di=null),Xt=[],Jt.test(l.charAt(B))?(ns=l.charAt(B),B++):(ns=g,pe===0&&Ie(_e)),ns!==g)for(;ns!==g;)Xt.push(ns),Jt.test(l.charAt(B))?(ns=l.charAt(B),B++):(ns=g,pe===0&&Ie(_e));else Xt=g;Xt!==g?ve=nt=[nt,Di,Xt]:(B=ve,ve=g)}else B=ve,ve=g;ve===g&&(ve=null),ee=Z,Z=K()}else B=Z,Z=g;return Z}function KP(Z,ye){return Z.map(function(ve){return ve[ye]})}function YP(Z,ye,ve){return[Z].concat(KP(ye,ve))}if((y=E())!==g&&B===l.length)return y;throw y!==g&&B<l.length&&Ie(ut()),mt(fe,me<l.length?l.charAt(me):null,me<l.length?Tt(me,me+1):Tt(me,me))}return e(t,Error),t.prototype.format=function(l){var d="Error: "+this.message;if(this.location){var y,g=null;for(y=0;y<l.length;y++)if(l[y].source===this.location.source){g=l[y].text.split(/\r\n|\n|\r/g);break}var _=this.location.start,M=this.location.source+":"+_.line+":"+_.column;if(g){var E=this.location.end,O=i("",_.line.toString().length),P=g[_.line-1],j=_.line===E.line?E.column:P.length+1;d+=`
 --> `+M+`
`+O+` |
`+_.line+" | "+P+`
`+O+" | "+i("",_.column-1)+i("",j-_.column,"^")}else d+=`
 at `+M}return d},t.buildMessage=function(l,d){var y={literal:function(j){return'"'+_(j.text)+'"'},class:function(j){var R=j.parts.map(function(z){return Array.isArray(z)?M(z[0])+"-"+M(z[1]):M(z)});return"["+(j.inverted?"^":"")+R+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(j){return j.description}};function g(j){return j.charCodeAt(0).toString(16).toUpperCase()}function _(j){return j.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(R){return"\\x0"+g(R)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(R){return"\\x"+g(R)})}function M(j){return j.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(R){return"\\x0"+g(R)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(R){return"\\x"+g(R)})}function E(j){return y[j.type](j)}function O(j){var R,z,q=j.map(E);if(q.sort(),q.length>0){for(R=1,z=1;R<q.length;R++)q[R-1]!==q[R]&&(q[z]=q[R],z++);q.length=z}switch(q.length){case 1:return q[0];case 2:return q[0]+" or "+q[1];default:return q.slice(0,-1).join(", ")+", or "+q[q.length-1]}}function P(j){return j?'"'+_(j)+'"':"end of input"}return"Expected "+O(l)+" but "+P(d)+" found."},{SyntaxError:t,parse:s}},(L8=WO).exports&&(L8.exports=D8());const f_={deg:1,grad:.9,rad:180/Math.PI,turn:360};function Fee(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&f_[e.unit]!=null))throw new re("effect:type-error",`Expected <angle>, Actual: ${Kg(e)}`,{term:e})}const y_={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function Ree(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&y_[e.unit]!=null))throw new re("effect:type-error",`Expected <length>, Actual: ${Kg(e)}`,{term:e})}function en(e){jee(e);const t=e.value;return of(t,e),e.unit==="%"?.01*t:t}function Lee(e){return Nee(e),of(e.value,e),e.value}function Dee(e){return Fee(e),e.value*f_[e.unit]||0}function m_(e){return Ree(e),e.value*y_[e.unit]||0}function zee(e){switch(e.colorType){case"hex":return oL(e.value);case"named":return KO(e.value);case"function":return qee(e.value)}}function KO(e){if(!H$(e))throw new re("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return nL(e)}const Vee=/^rgba?/i,Gee=/^hsla?/i;function qee(e){if(hp(e.parameters,4),Vee.test(e.name))return[en(e.parameters[0]),en(e.parameters[1]),en(e.parameters[2]),e.parameters[3]?en(e.parameters[3]):1];if(Gee.test(e.name))return W$(Lee(e.parameters[0]),en(e.parameters[1]),en(e.parameters[2]),e.parameters[3]?en(e.parameters[3]):1);throw new re("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function $9(e,t,i){try{return Bee(e)}catch(l){var s;i==null||(s=i.messages)==null||s.push(l)}return null}function I9(e,t,i,s){try{const l=Uee(e);es(i,l,t)}catch(l){s.messages&&s.messages.push(l)}}function Uee(e){const t=JO(e);return t?Iee(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:s})=>({scale:i,value:s.map(l=>l.toJSON())})):null}function Bee(e){if(!e||e.length===0)return null;if(Hee(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:V8(i.value)});return t}return V8(e)}function Hee(e){const t=e[0];return!!t&&"scale"in t}function V8(e){if(!e||!e.length)return"";const t=[];for(const i of e){let s=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":s=[ro(i,"amount")];break;case"blur":s=[ro(i,"radius","pt")];break;case"hue-rotate":s=[ro(i,"angle","deg")];break;case"drop-shadow":s=[ro(i,"xoffset","pt"),ro(i,"yoffset","pt"),ro(i,"blurRadius","pt"),Wee(i,"color")];break;case"bloom":s=[ro(i,"strength"),ro(i,"radius","pt"),ro(i,"threshold")]}const l=`${i.type}(${s.filter(Boolean).join(" ")})`;JO(l),t.push(l)}return t.join(" ")}function ro(e,t,i){if(e[t]==null)throw new re("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function Wee(e,t){if(e[t]==null)throw new re("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const YO=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return b([S({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),b([S({json:{read:!1,write:!1,origins:{"web-map":{read:{reader:$9},write:{allowNull:!0,writer:I9}}}}})],t.prototype,"effect",void 0),t=b([H("esri.layers.mixins.BlendLayer")],t),t},Jee=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return b([S({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=b([H("esri.layers.mixins.CustomParametersMixin")],t),t};var T9;const v2=new ot({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),b2=new ot({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Cn=T9=class extends ge{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:s,timeExtent:l,objectIds:d,units:y,distance:g}=this;return new hr(J({geometry:le(i),objectIds:le(d),spatialRelationship:s,timeExtent:le(l),where:t,units:y,distance:g},e))}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:s,objectIds:l,units:d,distance:y}=this;return new T9({geometry:le(t),objectIds:le(l),spatialRelationship:i,timeExtent:le(s),where:e,units:d,distance:y})}};b([S({type:String,json:{write:!0}})],Cn.prototype,"where",void 0),b([S({types:Zu,json:{write:!0}})],Cn.prototype,"geometry",void 0),b([S({type:v2.apiValues,json:{name:"spatialRel",read:{reader:v2.read},write:{allowNull:!1,writer:v2.write,overridePolicy(){return{enabled:X(this.geometry)}}}}})],Cn.prototype,"spatialRelationship",void 0),b([S({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Cn.prototype,"distance",void 0),b([S({type:[Number],json:{write:!0}})],Cn.prototype,"objectIds",void 0),b([S({type:b2.apiValues,json:{read:b2.read,write:{writer:b2.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Cn.prototype,"units",void 0),b([S({type:Qn,json:{write:!0}})],Cn.prototype,"timeExtent",void 0),Cn=T9=b([H("esri.layers.support.FeatureFilter")],Cn);const Kee=Cn;var E9;let Yl=E9=class extends ge{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){const i=super.write(e,t);if(t!=null&&t.origin){if(i.filter){const d=Object.keys(i.filter);var s;if(d.length>1||d[0]!=="where")return(s=t.messages)==null||s.push(new re("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}var l;if("showExcludedLabels"in i)return(l=t.messages)==null||l.push(new re("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new E9({filter:X(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};b([S({type:Kee,json:{write:{allowNull:!0,writer(e,t,i,s){const l=e==null?void 0:e.write({},s);l&&Object.keys(l).length!==0?es(i,l,t):es(i,null,t)}}}})],Yl.prototype,"filter",void 0),b([S({json:{write:!0,origins:{"web-map":{read:{reader:$9},write:{writer:I9,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}}}}})],Yl.prototype,"includedEffect",void 0),b([S({json:{write:!0,origins:{"web-map":{read:{reader:$9},write:{writer:I9,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}}}}})],Yl.prototype,"excludedEffect",void 0),b([S({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":{name:"showExcludedLabels",default:!0}}}})],Yl.prototype,"excludedLabelsVisible",void 0),Yl=E9=b([H("esri.layers.support.FeatureEffect")],Yl);const Yee=Yl,Xee=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return b([S({type:Yee,json:{origins:{"web-map":{write:{allowNull:!0}}}}})],t.prototype,"featureEffect",void 0),t=b([H("esri.layers.mixins.FeatureEffectLayer")],t),t},Zee={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};function Qee(e){if(!e)return e;const{start:t,end:i}=e;return new Qn({start:X(t)?Tu(t,-t.getTimezoneOffset(),"minutes"):t,end:X(i)?Tu(i,-i.getTimezoneOffset(),"minutes"):i})}function ete(e){if(!e)return e;const{start:t,end:i}=e;return new Qn({start:X(t)?Tu(t,t.getTimezoneOffset(),"minutes"):t,end:X(i)?Tu(i,i.getTimezoneOffset(),"minutes"):i})}var k9;let S0=k9=class extends ge{async collectRequiredFields(e,t){return is(e,t,this.expression)}clone(){return new k9({expression:this.expression,title:this.title})}};b([S({type:String,json:{write:!0}})],S0.prototype,"expression",void 0),b([S({type:String,json:{write:!0}})],S0.prototype,"title",void 0),S0=k9=b([H("esri.layers.support.FeatureExpressionInfo")],S0);const G8=S0;function tte(){const e=Object.keys(bO);return e.sort(),e}const ite=tte();var A9;const Qf=Hi()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),q8=new ot({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let xo=A9=class extends ge{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return e!=null?e:t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,i,s){t[i]=e.write({},s),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):X(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new A9({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};b([S({type:G8,json:{write:!0}})],xo.prototype,"featureExpressionInfo",void 0),b([$e("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],xo.prototype,"readFeatureExpressionInfo",null),b([ke("featureExpressionInfo",{featureExpressionInfo:{type:G8},"featureExpression.value":{type:[0]}})],xo.prototype,"writeFeatureExpressionInfo",null),b([S({type:Qf.apiValues,nonNullable:!0,json:{type:Qf.jsonValues,read:Qf.read,write:{writer:Qf.write,isRequired:!0}}})],xo.prototype,"mode",null),b([S({type:Number,json:{write:!0}})],xo.prototype,"offset",void 0),b([S({type:ite,json:{type:String,read:q8.read,write:q8.write}})],xo.prototype,"unit",null),xo=A9=b([H("esri.layers.support.ElevationInfo")],xo);const XO=xo,rte={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},ZO={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},QO={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},ste={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Vu}}},nte={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},ote={value:null,type:XO,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function Mce(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const yy={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},ate=Te(J({},yy),{json:Te(J({},yy.json),{origins:{"web-document":Te(J({},yy.json.origins["web-document"]),{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?ad(t.layerDefinition.drawingInfo.transparency):void 0:ad(t.drawingInfo.transparency)}})}),$ce={type:Qn,readOnly:!0,get(){var e,t;if((e=this.layer)==null||!e.timeInfo)return null;const{datesInUnknownTimezone:i,timeOffset:s,useViewTime:l}=this.layer,d=(t=this.view)==null?void 0:t.timeExtent;let y=this.layer.timeExtent;i&&(y=ete(y));let g=l?d&&y?d.intersection(y):d||y:y;if(!g||g.isEmpty||g.isAllTime)return g;s&&(g=g.offset(-s.value,s.unit)),i&&(g=Qee(g));const _=this._get("timeExtent");return g.equals(_)?_:g}},Ice={type:Mt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=Mt.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=it.fromJSON(t.spatialReference)),i}}}},read:!1}},lte={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},ute={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},hte={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},cte=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(i,s,l,d){(d&&d.layerContainerType==="ground"||i&&sF(this,l,{},d))&&(s[l]=i)}writeOperationalLayerType(i,s,l,d){!i||d&&d.layerContainerType==="tables"||(s.layerType=i)}writeTitle(i,s){s.title=i||"Layer"}read(i,s){s&&(s.layer=this),eF(this,i,l=>super.read(i,l),s)}write(i,s){if(s!=null&&s.origin){const _=`${s.origin}/${s.layerContainerType||"operational-layers"}`,M=Zee[_];let E=M&&M[this.operationalLayerType];var l;if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&_==="web-scene/operational-layers"&&(E=!1),!E)return(l=s.messages)==null||l.push(new re("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${_}'`,{layer:this})),null}const d=super.write(i,Te(J({},s),{layer:this})),y=!!s&&!!s.messages&&!!s.messages.filter(_=>_ instanceof re&&_.name==="web-document-write:property-required").length;var g;return ug(d==null?void 0:d.url)?(s==null||(g=s.messages)==null||g.push(new re("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&y?null:d}beforeSave(){}};return b([S({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),b([S({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],t.prototype,"listMode",void 0),b([ke("listMode")],t.prototype,"writeListMode",null),b([S({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),b([ke("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),b([S(yy)],t.prototype,"opacity",void 0),b([S({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),b([ke("title")],t.prototype,"writeTitle",null),b([S({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=b([H("esri.layers.mixins.OperationalLayer")],t),t};var O9;const w2=new ot({asc:"ascending",desc:"descending"});let Gh=O9=class extends ge{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new O9({field:this.field,valueExpression:this.valueExpression,order:this.order})}};b([S({type:String,json:{write:!0}})],Gh.prototype,"field",void 0),b([S({type:String,json:{write:!0}})],Gh.prototype,"valueExpression",void 0),b([S({type:w2.apiValues,json:{read:w2.read,write:w2.write}})],Gh.prototype,"order",void 0),Gh=O9=b([H("esri.layers.support.OrderByInfo")],Gh);const eC=Gh;function pte(e,t,i){if(!e)return null;const s=e.find(d=>!!d.field);if(!s)return null;const l=new eC;return l.read(s,i),[l]}function dte(e,t,i,s){const l=e.find(d=>!!d.field);l&&es(i,[l.toJSON()],t)}const fte=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return b([S({type:[eC],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:pte},write:{target:"layerDefinition.orderBy",writer:dte}}})],t.prototype,"orderBy",void 0),t=b([H("esri.layers.mixins.OrderedLayer")],t),t},yte=Se.getLogger("esri.layers.mixins.PortalLayer"),mte=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var i;(i=this.portalItem)==null||i.destroy(),this.portalItem=null}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,s,l){if(s.itemId)return new Zy({id:s.itemId,portal:l&&l.portal})}writePortalItem(i,s){i&&i.id&&(s.itemId=i.id)}async loadFromPortal(i,s){if(this.portalItem&&this.portalItem.id)try{const l=await import("./layersLoader.d9de6b3f.js").then(function(d){return d.l});return mi(s),await l.load({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData},s)}catch(l){throw ks(l)||yte.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${l}`),l}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(s=>(Fd(s),!0)))}async _fetchUserHasEditingPrivileges(i){const s=this.url?ci==null?void 0:ci.findCredential(this.url):null;if(!s)return!0;const l=e1.credential===s?e1.user:await this._fetchEditingUser(i);return e1.credential=s,e1.user=l,ce(l)||l.privileges==null||l.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var s,l;const d=(s=this.portalItem)==null||(l=s.portal)==null?void 0:l.user;if(d)return d;const y=ci.findServerInfo(this.url);if(y==null||!y.owningSystemUrl)return null;const g=`${y.owningSystemUrl}/sharing/rest`,_=ts.getDefault();if(_&&_.loaded&&an(_.restUrl)===an(g))return _.user;const M=`${g}/community/self`,E=X(i)?i.signal:null,O=await ag(Ht(M,{authMode:"no-prompt",query:{f:"json"},signal:E}));return O.ok?O5.fromJSON(O.value.data):null}read(i,s){s&&(s.layer=this),super.read(i,s)}write(i,s){const l=s&&s.portal,d=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||ts.getDefault());return l&&d&&!S$(d.restUrl,l.restUrl)?(s.messages&&s.messages.push(new re("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,Te(J({},s),{layer:this}))}};return b([S({type:Zy})],t.prototype,"portalItem",null),b([$e("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),b([ke("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),b([S({clonable:!1})],t.prototype,"resourceReferences",void 0),b([S({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=b([H("esri.layers.mixins.PortalLayer")],t),t},e1={credential:null,user:null},Id=new qe,X0=new WeakMap;function gte(e){tC(e)&&Id.push(e)}function vte(e){tC(e)&&Id.includes(e)&&Id.remove(e)}function tC(e){return e&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function iC(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:iC(t,e%t):0}let _2=0,t1=0;function bte(){const e=Date.now();for(const i of Id)if(i.refreshInterval){var t;e-((t=X0.get(i))!=null?t:0)+5>=6e4*i.refreshInterval&&(X0.set(i,e),i.refresh(e))}}HM(()=>{const e=Date.now();let t=0;for(const i of Id)t=iC(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?X0.get(i)||X0.set(i,e):X0.delete(i);if(t!==t1){if(t1=t,clearInterval(_2),t1===0)return void(_2=0);_2=setInterval(bte,t1)}});const wte=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=DM(()=>this.hasDataChanged()),this.when().then(()=>{gte(this)},()=>{})}destroy(){vte(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){X2(this._debounceHasDataChanged()).then(s=>{s&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:s})},s=>{Se.getLogger(this.declaredClass).error(s),this.emit("refresh",{dataChanged:!1,error:s})})}async hasDataChanged(){return!0}};return b([S({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),b([S({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),b([S()],t.prototype,"refreshParameters",null),t=b([H("esri.layers.mixins.RefreshableLayer")],t),t},rC=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},s=this.parent;s&&"effectiveScaleRange"in s&&_te(i,s.effectiveScaleRange);const l=this._get("effectiveScaleRange");return l&&l.minScale===i.minScale&&l.maxScale===i.maxScale?l:i}};return b([S({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),b([S({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),b([S({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=b([H("esri.layers.mixins.ScaleRangeLayer")],t),t};function _te(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const _u=Hi()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var C9;let M0=C9=class extends ge{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return XW(this.value,this.unit,"milliseconds")}clone(){return new C9({value:this.value,unit:this.unit})}};b([S({type:Number,json:{write:!0},nonNullable:!0})],M0.prototype,"value",void 0),b([S({type:_u.apiValues,json:{type:_u.jsonValues,read:_u.read,write:_u.write},nonNullable:!0})],M0.prototype,"unit",void 0),M0=C9=b([H("esri.TimeInterval")],M0);const Td=M0;var P9;let qh=P9=class extends ge{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return t.respectsDaylightSaving!==void 0?t.respectsDaylightSaving:t.respectDaylightSaving!==void 0&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new P9({respectsDaylightSaving:e,timezone:t})}};b([S({type:Boolean,json:{write:!0}})],qh.prototype,"respectsDaylightSaving",void 0),b([$e("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],qh.prototype,"readRespectsDaylightSaving",null),b([S({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],qh.prototype,"timezone",void 0),qh=P9=b([H("esri.layers.support.TimeReference")],qh);const xte=qh;var N9;let Zi=N9=class extends ge{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||t.timeExtent.length!==2)return null;const i=new Date(t.timeExtent[0]),s=new Date(t.timeExtent[1]);return new Qn({start:i,end:s})}writeFullTimeExtent(e,t){e&&X(e.start)&&X(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new Td({value:t.timeInterval,unit:_u.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new Td({value:t.defaultTimeInterval,unit:_u.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const i=e.toJSON();t.timeInterval=i.value,t.timeIntervalUnits=i.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:i,interval:s,startField:l,timeReference:d,fullTimeExtent:y,trackIdField:g,useTime:_}=this;return new N9({cumulative:e,endField:t,hasLiveData:i,interval:s,startField:l,timeReference:le(d),fullTimeExtent:le(y),trackIdField:g,useTime:_})}};b([S({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],Zi.prototype,"cumulative",void 0),b([S({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],Zi.prototype,"endField",void 0),b([S({type:Qn,json:{write:{enabled:!0,allowNull:!0}}})],Zi.prototype,"fullTimeExtent",void 0),b([$e("fullTimeExtent",["timeExtent"])],Zi.prototype,"readFullTimeExtent",null),b([ke("fullTimeExtent")],Zi.prototype,"writeFullTimeExtent",null),b([S({type:Boolean,json:{write:!0}})],Zi.prototype,"hasLiveData",void 0),b([S({type:Td,json:{write:{enabled:!0,allowNull:!0}}})],Zi.prototype,"interval",void 0),b([$e("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Zi.prototype,"readInterval",null),b([ke("interval")],Zi.prototype,"writeInterval",null),b([S({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],Zi.prototype,"startField",void 0),b([S({type:xte,json:{write:{enabled:!0,allowNull:!0}}})],Zi.prototype,"timeReference",void 0),b([S({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Zi.prototype,"trackIdField",void 0),b([S({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],Zi.prototype,"useTime",void 0),Zi=N9=b([H("esri.layers.support.TimeInfo")],Zi);const sC=Zi,Ste=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,s){const l=s.timeInfo.exportOptions;if(!l)return null;const d=l.timeOffset,y=_u.fromJSON(l.timeOffsetUnits);return d&&y?new Td({value:d,unit:y}):null}set timeInfo(i){FI(i,this.fieldsIndex),this._set("timeInfo",i)}};return b([S({type:Qn,json:{write:!1}})],t.prototype,"timeExtent",void 0),b([S({type:Td})],t.prototype,"timeOffset",void 0),b([$e("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),b([S({value:null,type:sC,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),b([S({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=b([H("esri.layers.mixins.TemporalLayer")],t),t};var j9;let Oo=j9=class extends ge{constructor(e){super(e)}clone(){const{name:e,fields:t,isAscending:i,isUnique:s,description:l}=this;return new j9({name:e,fields:t,isAscending:i,isUnique:s,description:l})}};b([S({constructOnly:!0})],Oo.prototype,"name",void 0),b([S({constructOnly:!0})],Oo.prototype,"fields",void 0),b([S({constructOnly:!0})],Oo.prototype,"isAscending",void 0),b([S({constructOnly:!0})],Oo.prototype,"isUnique",void 0),b([S({constructOnly:!0})],Oo.prototype,"description",void 0),Oo=j9=b([H("esri.layers.support.FeatureIndex")],Oo);let my=class extends ge{constructor(){super(...arguments),this.type=null}};b([S({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],my.prototype,"type",void 0),my=b([H("esri.layers.support.FeatureReduction")],my);const gy=my;var F9;let Uh=F9=class extends ge{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new F9({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};b([S({type:String,json:{write:!0}})],Uh.prototype,"statisticType",void 0),b([S({type:String,json:{write:!0}})],Uh.prototype,"onStatisticField",void 0),b([S({type:String,json:{write:!0}})],Uh.prototype,"onStatisticValueExpression",void 0),Uh=F9=b([H("esri.layers.support.OutStatistic")],Uh);const Mte=Uh;var R9;let $0=R9=class extends ge{constructor(){super(...arguments),this.name=null}clone(){return new R9({name:this.name,outStatistic:this.outStatistic.clone()})}};b([S({type:String,json:{write:!0}})],$0.prototype,"name",void 0),b([S({type:Mte,json:{write:!0}})],$0.prototype,"outStatistic",void 0),$0=R9=b([H("esri.layers.support.AggregateField")],$0);const $te=$0,g_="__begin__",v_="__end__",Ite=new RegExp(g_,"ig"),Tte=new RegExp(v_,"ig"),U8=new RegExp("^"+g_,"i"),B8=new RegExp(v_+"$","i"),Lm='"',Ete=Lm+" + ",kte=" + "+Lm;function Ate(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function Ote(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function b_(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=Ate(e.labelExpression),t.type="conventional"),t}function Cte(e){const t=b_(e);if(!t)return null;switch(t.type){case"conventional":return L9(t.expression);case"arcade":return t.expression}return null}function Pte(e){const t=b_(e);if(!t)return null;switch(t.type){case"conventional":return jte(t.expression);case"arcade":return nC(t.expression)}return null}function L9(e){let t;return e?(t=Un(e,i=>g_+'$feature["'+i+'"]'+v_),t=U8.test(t)?t.replace(U8,""):Lm+t,t=B8.test(t)?t.replace(B8,""):t+Lm,t=t.replace(Ite,Ete).replace(Tte,kte)):t='""',t}const Nte=/^\s*\{([^}]+)\}\s*$/i;function jte(e){const t=e.match(Nte);return t&&t[1].trim()||null}const Fte=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,Rte=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,Lte=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function nC(e){if(!e)return null;let t=Fte.exec(e)||Rte.exec(e);return t?t[1]||t[3]:(t=Lte.exec(e),t?t[2]:null)}var D9;let $a=D9=class extends ge{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?L9(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=L9(this.value)),e!=null&&(t[i]=e)}clone(){return new D9({expression:this.expression,title:this.title,value:this.value})}};b([S({type:String,json:{write:{writerEnsuresNonNull:!0}}})],$a.prototype,"expression",void 0),b([$e("expression",["expression","value"])],$a.prototype,"readExpression",null),b([ke("expression")],$a.prototype,"writeExpression",null),b([S({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],$a.prototype,"title",void 0),b([S({json:{read:!1,write:!1}})],$a.prototype,"value",void 0),$a=D9=b([H("esri.layers.support.LabelExpressionInfo")],$a);const oC=$a,aC=[252,146,31,255],Dte={type:"esriSMS",style:"esriSMSCircle",size:6,color:aC,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},zte={type:"esriSLS",style:"esriSLSSolid",width:.75,color:aC},Vte={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},Gte={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},qte={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Ute={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Bte={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};Qc.fromJSON(Dte);dn.fromJSON(zte);eh.fromJSON(Vte);const Hte=ep.fromJSON(Gte),Tce=Qc.fromJSON(qte),Ece=dn.fromJSON(Ute),kce=eh.fromJSON(Bte);var z9;const i1=new ot({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function lC(e){return!e||e.origin!=="service"&&!uC(e.layer)}function uC(e){return(e==null?void 0:e.type)==="map-image"}function hC(e){var t,i;return!!uC(e)&&!((t=e.capabilities)==null||(i=t.exportMap)==null||!i.supportsArcadeExpressionForLabeling)}function Wte(e){return lC(e)||hC(e.layer)}let li=z9=class extends ge{constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Hte,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const i=function(s,l,d){switch(l){case"=":return s==d;case"<>":return s!=d;case">":return s>d;case">=":return s>=d;case"<":return s<d;case"<=":return s<=d}return!1};try{if(e==null)return!0;const s=e.split(" ");if(s.length===3)return i(t[s[0]],s[1],s[2]);if(s.length===7){const l=i(t[s[0]],s[1],s[2]),d=s[3],y=i(t[s[4]],s[5],s[6]);switch(d){case"AND":return l&&y;case"OR":return l||y}}return!1}catch{console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=Ote(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const s=nC(this.labelExpressionInfo.expression);s&&(e="["+s+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,s){if(e==null&&this.labelExpression!=null&&lC(s))e=new oC({expression:this.getLabelExpressionArcade()});else if(!e)return;const l=e.toJSON(s);l.expression&&(t[i]=l)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return b_(this)}getLabelExpressionArcade(){return Cte(this)}getLabelExpressionSingleField(){return Pte(this)}hash(){return JSON.stringify(this)}clone(){return new z9({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:le(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:le(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};b([S({type:String,json:{write:!0}})],li.prototype,"name",void 0),b([S({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],li.prototype,"allowOverrun",void 0),b([S({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],li.prototype,"deconflictionStrategy",void 0),b([S({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&hC(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],li.prototype,"labelExpression",void 0),b([$e("labelExpression")],li.prototype,"readLabelExpression",null),b([ke("labelExpression")],li.prototype,"writeLabelExpression",null),b([S({type:oC,json:{write:{overridePolicy:(e,t,i)=>Wte(i)?{allowNull:!0}:{enabled:!1}}}})],li.prototype,"labelExpressionInfo",void 0),b([ke("labelExpressionInfo")],li.prototype,"writeLabelExpressionInfo",null),b([S({type:i1.apiValues,json:{type:i1.jsonValues,read:i1.read,write:i1.write}})],li.prototype,"labelPlacement",void 0),b([S({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],li.prototype,"labelPosition",void 0),b([S({type:Number})],li.prototype,"maxScale",void 0),b([ke("maxScale")],li.prototype,"writeMaxScale",null),b([S({type:Number})],li.prototype,"minScale",void 0),b([ke("minScale")],li.prototype,"writeMinScale",null),b([S({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],li.prototype,"repeatLabel",void 0),b([S({type:Number,cast:St,json:{write:!0,origins:{"web-scene":{write:!1}}}})],li.prototype,"repeatLabelDistance",void 0),b([S({types:YV,json:{origins:{"web-scene":{types:XV,write:x8,default:null}},write:x8,default:null}})],li.prototype,"symbol",void 0),b([S({type:Boolean,json:{write:!0}})],li.prototype,"useCodedValues",void 0),b([S({type:String,json:{write:!0}})],li.prototype,"where",void 0),li=z9=b([H("esri.layers.support.LabelClass")],li);const w_=li;var V9;let Gr=V9=class extends ge{constructor(e){super(e),this.type="cluster",this.clusterRadius=St("80px"),this.clusterMinSize=St("12px"),this.clusterMaxSize=St("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new V9({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:le(this.labelingInfo),labelsVisible:this.labelsVisible,fields:le(this.fields),popupEnabled:this.popupEnabled,popupTemplate:le(this.popupTemplate)})}};b([S({type:["cluster"],readOnly:!0,json:{write:!0}})],Gr.prototype,"type",void 0),b([S({type:Number,cast:e=>e==="auto"?e:St(e),json:{write:!0}})],Gr.prototype,"clusterRadius",void 0),b([S({type:Number,cast:St,json:{write:!0}})],Gr.prototype,"clusterMinSize",void 0),b([S({type:Number,cast:St,json:{write:!0}})],Gr.prototype,"clusterMaxSize",void 0),b([S(ZO)],Gr.prototype,"popupEnabled",void 0),b([S({type:bg,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Gr.prototype,"popupTemplate",void 0),b([S({types:JV})],Gr.prototype,"symbol",void 0),b([S({type:[w_],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Gr.prototype,"labelingInfo",void 0),b([S(QO)],Gr.prototype,"labelsVisible",void 0),b([S({type:[$te],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Gr.prototype,"fields",void 0),Gr=V9=b([H("esri.layers.support.FeatureReductionCluster")],Gr);const H8=Gr;var G9;let vy=G9=class extends gy{constructor(e){super(e),this.type="selection"}clone(){return new G9}};b([S({type:["selection"]})],vy.prototype,"type",void 0),vy=G9=b([H("esri.layers.support.FeatureReductionSelection")],vy);const W8=vy,Jte={types:{key:"type",base:gy,typeMap:{selection:W8,cluster:H8}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:{key:"type",base:gy,typeMap:{selection:H8}}},"web-scene":{types:{key:"type",base:gy,typeMap:{selection:W8}}}}}},J8=new ot({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Ia=class extends Zn(ge){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};b([S({json:{write:!0}})],Ia.prototype,"name",void 0),b([S({json:{write:!0}})],Ia.prototype,"description",void 0),b([S({json:{read:J8.read,write:J8.write}})],Ia.prototype,"drawingTool",void 0),b([S({json:{write:!0}})],Ia.prototype,"prototype",void 0),b([S({json:{write:!0}})],Ia.prototype,"thumbnail",void 0),Ia=b([H("esri.layers.support.FeatureTemplate")],Ia);const __=Ia;let So=class extends Zn(ge){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const i of Object.keys(e))t[i]=F4(e[i]);return t}writeDomains(e,t){const i={};for(const l of Object.keys(e)){var s;e[l]&&(i[l]=(s=e[l])==null?void 0:s.toJSON())}t.domains=i}};b([S({json:{write:!0}})],So.prototype,"id",void 0),b([S({json:{write:!0}})],So.prototype,"name",void 0),b([S({json:{write:!0}})],So.prototype,"domains",void 0),b([$e("domains")],So.prototype,"readDomains",null),b([ke("domains")],So.prototype,"writeDomains",null),b([S({type:[__],json:{write:!0}})],So.prototype,"templates",void 0),So=b([H("esri.layers.support.FeatureType")],So);const cC=So;function Kte(e){return e.type==="date"||e.type==="esriFieldTypeDate"}function K8(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function Y8(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}class Yte{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;const i=[];for(const s of t){const l=s&&s.name;if(l){const d=X8(l);this._fieldsMap.set(l,s),this._fieldsMap.set(d,s),i.push(d),Kte(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):J5(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),K8(s)||Y8(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)K8(t)||Y8(t)||t.nullable||gz(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){return t!=null?this._fieldsMap.get(t)||this._fieldsMap.get(X8(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const i=this.get(t);if(i)return i.name}}function X8(e){return e.toLowerCase().trim()}const Xte=Se.getLogger("esri.layers.support.fieldProperties");function Zte(){return{fields:{type:[Cg],value:null},fieldsIndex:{readOnly:!0,get(){return new Yte(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex.has(t)||Xte.error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return RI(this.fieldsIndex,e)}}}}let Bh=class extends Zn(ge){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};b([S({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Bh.prototype,"shapeAreaField",void 0),b([S({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Bh.prototype,"shapeLengthField",void 0),b([S({type:String,json:{read:e=>BG.read(e)||HG.read(e)}})],Bh.prototype,"units",void 0),Bh=b([H("esri.layers.support.GeometryFieldsInfo")],Bh);const Qte=Bh,eie=/\[([^\[\]]+)\]/gi;function Z8(e,t,i){return e?e.map(s=>{const l=new w_;if(l.read(s,i),l.labelExpression){const d=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;l.labelExpression=l.labelExpression.replace(eie,(y,g)=>`[${tie(g,d)}]`)}return l}):null}function tie(e,t){if(!t)return e;const i=e.toLowerCase();for(let s=0;s<t.length;s++){const l=t[s].name;if(l.toLowerCase()===i)return l}return e}var q9;let Hh=q9=class extends ge{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new qe}clone(){return new q9({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};b([S({type:String,json:{write:!0}})],Hh.prototype,"floorField",void 0),b([S({json:{read:!1,write:!1}})],Hh.prototype,"viewAllMode",void 0),b([S({json:{read:!1,write:!1}})],Hh.prototype,"viewAllLevelIds",void 0),Hh=q9=b([H("esri.layers.support.LayerFloorInfo")],Hh);const iie=Hh,Q8=new ot({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),eS=new ot({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let gs=class extends Zn(ge){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};b([S({json:{read:Q8.read,write:Q8.write}})],gs.prototype,"cardinality",void 0),b([S({json:{read:!0,write:!0}})],gs.prototype,"composite",void 0),b([S({json:{read:!0,write:!0}})],gs.prototype,"id",void 0),b([S({json:{read:!0,write:!0}})],gs.prototype,"keyField",void 0),b([S({json:{read:!0,write:!0}})],gs.prototype,"keyFieldInRelationshipTable",void 0),b([S({json:{read:!0,write:!0}})],gs.prototype,"name",void 0),b([S({json:{read:!0,write:!0}})],gs.prototype,"relatedTableId",void 0),b([S({json:{read:!0,write:!0}})],gs.prototype,"relationshipTableId",void 0),b([S({json:{read:eS.read,write:eS.write}})],gs.prototype,"role",void 0),gs=b([H("esri.layers.support.Relationship")],gs);const rie=gs,Zs=[];function sie(e,t){if(HO(e.url))return!0;const{wkid:i}=t;for(const s of Zs){if(e.version>=s[0])return!0;if(typeof s[1]=="function"&&(s[1]=s[1]()),s[1].has(i))return!1}return!0}Zs.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102960;t++)e.add(t);return e}]),Zs.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),Zs.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),Zs.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),Zs.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);for(let t=103696;t<=103698;t++)e.add(t);return e}]),Zs.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),Zs.push([10.61,()=>new Set([102497])]),Zs.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),Zs.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),Zs.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);async function nie(e,t,i){const s=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(s&&s.type==="unique-value"&&s.styleOrigin){const l=await ag(s.populateFromStyle());if(mi(i),l.ok===!1){const d=l.error;t&&t.messages&&t.messages.push(new fr("renderer:style-reference",`Failed to create unique value renderer from style reference: ${d.message}`,{error:d,context:t})),e.clear("renderer",t.origin)}}}const oie=["oid","global-id"],aie=["oid","global-id","guid"];function lie({displayField:e,editFieldsInfo:t,fields:i,objectIdField:s,title:l},d){if(!i)return null;const y=fie({editFieldsInfo:t,fields:i,objectIdField:s},d);if(!y.length)return null;const g=gie({titleBase:l,fields:i,displayField:e}),_=mie();return new bg({title:g,content:_,fieldInfos:y})}const uie=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],hie=(e,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:s})=>s?s.has(e.name):!pC(e.name,t)&&(!i||e.name!==i)&&!(oie.indexOf(e.type)>-1)&&!uie.some(l=>l.test(e.name));function cie(e,t){const i=e;return t&&(e=e.filter(s=>t.indexOf(s.type)===-1)),e===i&&(e=e.slice()),e.sort(pie),e}function pie(e,t){return e.type==="oid"?-1:t.type==="oid"?1:tS(e)?-1:tS(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function pC(e,t){if(!e||!t)return!1;const{creationDateField:i,creatorField:s,editDateField:l,editorField:d}=t;return[i&&i.toLowerCase(),s&&s.toLowerCase(),l&&l.toLowerCase(),d&&d.toLowerCase()].indexOf(e.toLowerCase())!==-1}function die(e,t){return e.editable&&aie.indexOf(e.type)===-1&&!pC(e.name,t)}function fie({editFieldsInfo:e,fields:t,objectIdField:i},s){return cie(t,(s==null?void 0:s.ignoreFieldTypes)||vie).map(l=>new Gd({fieldName:l.name,isEditable:die(l,e),label:l.alias,format:yie(l),visible:hie(l,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:s==null?void 0:s.visibleFieldNames})}))}function yie(e){switch(e.type){case"small-integer":case"integer":case"single":return new D0({digitSeparator:!0,places:0});case"double":return new D0({digitSeparator:!0,places:2});case"date":return new D0({dateFormat:"long-month-day-year"});default:return null}}function mie(){return[new Ac,new ud]}function gie(e){const t=pz(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i}function tS(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"||void 0}const vie=["geometry","blob","raster","guid","xml"],x2=new ot({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),bie={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},ai="FeatureLayer",iS=Se.getLogger("esri.layers.FeatureLayer");function rS(e){return e&&e instanceof qe}function Xe(e,t,i){return!!(e&&e.hasOwnProperty(t)?e[t]:i)}function r1(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}function wie(e){var t;const i=e==null||(t=e.supportedSpatialAggregationStatistics)==null?void 0:t.map(s=>s.toLowerCase());return{envelope:!(i==null||!i.includes("envelopeaggregate")),centroid:!(i==null||!i.includes("centroidaggregate")),convexHull:!(i==null||!i.includes("convexhullaggregate"))}}const S2=Zte();function M2(e,t,i){const s=!(i==null||!i.writeLayerSchema);return{enabled:s,ignoreOrigin:s}}let xe=class extends Xee(YO(fte(Ste(rC(wte(cee(cte(mte(RO(Jee(ree(Zn(yg))))))))))))){constructor(...e){super(...e),this._handles=new yr,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=it.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(qe.ofType(Oo)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=Dn(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?J({url:e},t):e}load(e){const t=X(e)?e.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(t).then(s=>this._initLayerProperties(s)));const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(Fd).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstLayerId(t);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new re("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this.finishLoadEditablePortalLayer(e));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){e!=null?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,s){this._writeEditingEnabled(e,t,!0,s)}readEditingInfo(e,t){const{editingInfo:i}=t;return i?{lastEditDate:i.lastEditDate!=null?new Date(i.lastEditDate):null}:null}readIsTable(e,t){return(t=t&&t.layerDefinition||t).type==="Table"||!t.geometryType}writeIsTable(e,t,i,s){s!=null&&s.writeLayerSchema&&es(i,e?"Table":"Feature Layer",t)}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeOID")return i.name}}get parsedUrl(){const e=this.url?Ri(this.url):null;return e!=null&&(this.dynamicDataSource!=null?e.path=rl(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=rl(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){K6(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){const s=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(s){const l=jO(s,t,i)||void 0;return l||iS.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),l}if(t.defaultSymbol)return t.types&&t.types.length?new h_({defaultSymbol:$2(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(l=>({id:l.id,symbol:$2(l.symbol,l,i)}))}):new u_({symbol:$2(t.defaultSymbol,t,i)})}set source(e){const t=this._get("source");t!==e&&(rS(t)&&this._resetMemorySource(t),rS(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof qe?new R8({layer:this,items:e}):e:null}readSource(e,t){const i=rh.fromJSON(t.featureSet);return new R8({layer:this,items:i&&i.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){const i=t.editFieldsInfo,s=i&&i.creatorField,l=i&&i.editorField;return e=e&&e.map(d=>__.fromJSON(d)),this._fixTemplates(e,s),this._fixTemplates(e,l),e}readTitle(e,t){const i=t.layerDefinition&&t.layerDefinition.name||t.name,s=t.title||t.layerDefinition&&t.layerDefinition.title;if(i){const l=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?aee(this.url,i):i;let d=i;if(!d&&this.url){const y=nf(this.url);X(y)&&(d=y.title)}return d?(this.sublayerTitleMode==="item-title-and-service-name"&&l&&l!==d&&(d=l+" - "+d),d_(d)):void 0}if(this.sublayerTitleMode==="item-title"&&s)return s}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const s=t.fields.find(l=>l.name.toLowerCase()===i);s&&(i=s.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,s=i&&i.creatorField,l=i&&i.editorField;return e&&e.map(d=>(d=cC.fromJSON(d),this._fixTemplates(d.templates,s),this._fixTemplates(d.templates,l),d))}set url(e){const t=uee({layer:this,url:e,nonStandardUrlAllowed:!0,logger:iS});this._set("url",t.url),t.layerId!=null&&this._set("layerId",t.layerId)}writeUrl(e,t,i,s){hee(this,e,null,t,s)}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}addAttachment(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("addAttachment"in this.source))throw new re(ai,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)})}updateAttachment(e,t,i){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("updateAttachment"in this.source))throw new re(ai,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,i)})}async applyEdits(e,t){const i=await import("./editingSupport.6e59ec5c.js");return await this.load(),i.applyEdits(this,this.source,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return lie(this,e)}async createGraphicsSource(e){if(this._hasMemorySource())return this.source.load({signal:e});const{default:t}=await LM(import("./FeatureLayerSource.b0e815a5.js"),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=new hr,t=this.get("capabilities.data"),i=this.get("capabilities.query");e.dynamicDataSource=this.dynamicDataSource,e.historicMoment=this.historicMoment,e.gdbVersion=this.gdbVersion,e.returnGeometry=!0,i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),t&&(t.supportsZ&&this.returnZ!=null&&(e.returnZ=this.returnZ),t.supportsM&&this.returnM!=null&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:s,timeExtent:l}=this;return e.timeExtent=s!=null&&l!=null?l.offset(-s.value,s.unit):l||null,e.multipatchOption=this.geometryType==="multipatch"?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("deleteAttachments"in this.source))throw new re(ai,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)})}fetchRecomputedExtents(e){return this.load({signal:e==null?void 0:e.signal}).then(()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new re(ai,"Layer source does not support fetchUpdates capability")})}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const s=e.attributes?e.attributes[t]:void 0;if(s==null)return null;let l=null;return i.some(d=>{const{id:y}=d;return y!=null&&(y.toString()===s.toString()&&(l=d),!!l)}),l}getFieldDomain(e,t){const i=t&&t.feature,s=this.getFeatureType(i);if(s){const l=s.domains&&s.domains[e];if(l&&l.type!=="inherited")return l}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=xm.from(e),this.load().then(()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new re(ai,"this layer doesn't support attachments");const{attachmentTypes:i,objectIds:s,globalIds:l,num:d,size:y,start:g,where:_}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){const M=s&&s.length>1,E=i&&i.length,O=l&&l.length,P=y&&y.length;if(M||E||O||P||d||g||_)throw new re(ai,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(s&&s.length||_))throw new re(ai,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new re(ai,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)})}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(hr.from(e)||this.createQuery(),t)).then(i=>{if(i!=null&&i.features)for(const s of i.features)s.layer=s.sourceLayer=this;return i})}queryObjectIds(e,t){return this.load().then(()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(hr.from(e)||this.createQuery(),t);throw new re(ai,"Layer source does not support queryObjectIds capability")})}queryFeatureCount(e,t){return this.load().then(()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(hr.from(e)||this.createQuery(),t);throw new re(ai,"Layer source does not support queryFeatureCount capability")})}queryExtent(e,t){return this.load().then(()=>{if(this.source.queryExtent)return this.source.queryExtent(hr.from(e)||this.createQuery(),t);throw new re(ai,"Layer source does not support queryExtent capability")})}queryRelatedFeatures(e,t){return this.load().then(()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(Hu.from(e),t);throw new re(ai,"Layer source does not support queryRelatedFeatures capability")})}queryRelatedFeaturesCount(e,t){return this.load().then(()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(Hu.from(e),t);throw new re(ai,"Layer source does not support queryRelatedFeaturesCount capability")})}queryTopFeatures(e,t){return this.load().then(()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(Xa.from(e),t).then(i=>{if(i!=null&&i.features)for(const s of i.features)s.layer=s.sourceLayer=this;return i});throw new re(ai,"Layer source does not support queryTopFeatures capability")})}queryTopObjectIds(e,t){return this.load().then(()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(Xa.from(e),t);throw new re(ai,"Layer source does not support queryTopObjectIds capability")})}queryTopFeaturesExtent(e,t){return this.load().then(()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(Xa.from(e),t);throw new re(ai,"Layer source does not support queryTopExtents capability")})}queryTopFeatureCount(e,t){return this.load().then(()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(Xa.from(e),t);throw new re(ai,"Layer source does not support queryFeatureCount capability")})}read(e,t){const i=e.featureCollection;if(i){const s=i.layers;s&&s.length===1&&(super.read(s[0],t),i.showLegend!=null&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){var i,s;const l=(t=Te(J({},t),{writeLayerSchema:(i=(s=t)==null?void 0:s.writeLayerSchema)!=null?i:this._hasMemorySource()})).origin,d=t.layerContainerType,y=t.messages;if(this.isTable){if(l==="web-scene"||l==="web-map"&&d!=="tables")return y&&y.push(new re("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Table source cannot be written to web scenes and web maps`,{layer:this})),null;if(this._hasMemorySource())return y&&y.push(new re("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using an in-memory Table source cannot be written to web scenes and web maps`,{layer:this})),null}else if(this.loaded&&l==="web-map"&&d==="tables")return y&&y.push(new re("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a non-table source cannot be written to tables in web maps`,{layer:this})),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new re(ai,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source.type==="memory"||sie(this,e))}_readEditingEnabled(e,t,i){var s;let l=(s=e.layerDefinition)==null?void 0:s.capabilities;return l?this._hasEditingCapability(l):(l=e.capabilities,t&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&l?this._hasEditingCapability(l):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,i,s){if(!e){var l,d;const y=(l=this.capabilities)!=null&&(d=l.operations)!=null&&d.supportsSync?"Query,Sync":"Query";es("layerDefinition.capabilities",y,t),!i||s!=null&&s.writeLayerSchema||(t.capabilities=y)}}_checkAttachmentSupport(e){const{attributes:t}=e,{objectIdField:i}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[i]?void 0:Promise.reject(new re(ai,`feature is missing the identifying attribute ${i}`)):Promise.reject(new re(ai,"'attributes' are required on a feature to query attachments")):Promise.reject(new re(ai,"A feature is required to add/delete/update attachments")):Promise.reject(new re(ai,"this layer doesn't support attachments"))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return Ht(this.url,{query:Te(J({f:"json"},this.customParameters),{token:this.apiKey}),responseType:"json",signal:e}).then(t=>{const i=t.data;if(i)return Array.isArray(i.layers)&&i.layers.length>0?i.layers[0].id:Array.isArray(i.tables)&&i.tables.length>0?i.tables[0].id:void 0})}async _initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),K6(this.renderer,this.fieldsIndex),FI(this.timeInfo,this.fieldsIndex),nie(this,{origin:"service"})}async hasDataChanged(){var e;if((e=this.source)!=null&&e.refresh)try{var t;const{dataChanged:i,updates:s}=await((t=this.source)==null?void 0:t.refresh());if(X(s)&&(this.sourceJSON=J(J({},this.sourceJSON),s),this.read(s,{origin:"service",url:this.parsedUrl})),i)return!0}catch{}if(this.definitionExpression)try{return(await DQ(this.definitionExpression,this.fieldsIndex)).hasDateFunctions}catch{}return!1}_verifyFields(){const e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||this.fields&&this.fields.some(function(t){return t.type==="geometry"})||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(i=>{const s=i.prototype&&i.prototype.attributes;s&&t&&delete s[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new re("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new re("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAttachmentCapabilities(e){const t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach(i=>{const s=bie[i.name];s&&(t[s]=!!i.isEnabled)}),t}_readDataCapabilities(e){return{isVersioned:Xe(e,"isDataVersioned",!1),supportsAttachment:Xe(e,"hasAttachments",!1),supportsM:Xe(e,"hasM",!1),supportsZ:Xe(e,"hasZ",!1)}}_readMetadataCapabilities(e){return{supportsAdvancedFieldProperties:Xe(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){const i=e?e.toLowerCase().split(",").map(_=>_.trim()):[],s=i.includes("editing")&&!t.datesInUnknownTimezone;let l=s&&i.includes("create"),d=s&&i.includes("delete"),y=s&&i.includes("update");const g=i.includes("changetracking");return s&&!(l||d||y)&&(l=d=y=!0),{supportsCalculate:Xe(t,"supportsCalculate",!1),supportsTruncate:Xe(t,"supportsTruncate",!1),supportsValidateSql:Xe(t,"supportsValidateSql",!1),supportsAdd:l,supportsDelete:d,supportsEditing:s,supportsChangeTracking:g,supportsQuery:i.includes("query"),supportsQueryAttachments:Xe(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:Xe(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:y,supportsExceedsLimitStatistics:Xe(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){var t;const i=e.advancedQueryCapabilities,s=e.ownershipBasedAccessControlForFeatures,l=e.archivingInfo,d=(t=this.url)==null?void 0:t.includes("MapServer"),y=!de("mapserver-pbf-enabled")&&d&&this.version<10.81,g=HO(this.url),_=(e.supportedQueryFormats||"").split(",").reduce((M,E)=>{const O=E.toLowerCase().trim();return O&&M.add(O),M},new Set);return{supportsStatistics:Xe(i,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Xe(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Xe(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:wie(i),supportsCentroid:Xe(i,"supportsReturningGeometryCentroid",!1),supportsDistance:Xe(i,"supportsQueryWithDistance",!1),supportsDistinct:Xe(i,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Xe(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Xe(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Xe(i,"supportsHavingClause",!1),supportsOrderBy:Xe(i,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Xe(i,"supportsPagination",!1),supportsQuantization:Xe(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Xe(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Xe(e,"supportsReturningQueryGeometry",!1),supportsResultType:Xe(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Xe(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Xe(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Xe(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Xe(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Xe(s,"allowOthersToQuery",!0),supportsHistoricMoment:Xe(l,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!y&&_.has("pbf"),supportsDisjointSpatialRelationship:Xe(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:Xe(i,"supportsQueryWithCacheHint",!1),supportsDefaultSpatialReference:Xe(i,"supportsDefaultSR",!1),supportsCompactGeometry:g,maxRecordCountFactor:r1(e,"maxRecordCountFactor",void 0),maxRecordCount:r1(e,"maxRecordCount",void 0),standardMaxRecordCount:r1(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:r1(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){const t=e.advancedQueryCapabilities,i=Xe(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Xe(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i}}_readEditingCapabilities(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Xe(e,"allowGeometryUpdates",!0),supportsGlobalId:Xe(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Xe(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Xe(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Xe(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Xe(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Xe(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Xe(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Xe(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Xe(t,"allowOthersToUpdate",!0)}}};b([S({readOnly:!0,json:{read:!1}})],xe.prototype,"capabilities",void 0),b([$e("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],xe.prototype,"readCapabilities",null),b([S({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],xe.prototype,"charts",void 0),b([S({readOnly:!0})],xe.prototype,"createQueryVersion",null),b([S({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],xe.prototype,"copyright",void 0),b([S({type:Boolean})],xe.prototype,"datesInUnknownTimezone",void 0),b([S({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],xe.prototype,"displayField",void 0),b([S({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],xe.prototype,"definitionExpression",void 0),b([S({types:$u,readOnly:!0})],xe.prototype,"defaultSymbol",void 0),b([S({type:Jr})],xe.prototype,"dynamicDataSource",void 0),b([S({readOnly:!0})],xe.prototype,"editFieldsInfo",void 0),b([S({type:Boolean})],xe.prototype,"editingEnabled",null),b([$e(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],xe.prototype,"readEditingEnabled",null),b([$e("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],xe.prototype,"readEditingEnabledFromWebMap",null),b([ke(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],xe.prototype,"writeEditingEnabled",null),b([ke("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],xe.prototype,"writeEditingEnabledToWebMap",null),b([S({readOnly:!0})],xe.prototype,"editingInfo",void 0),b([$e("editingInfo")],xe.prototype,"readEditingInfo",null),b([S(ote)],xe.prototype,"elevationInfo",void 0),b([S(Jte)],xe.prototype,"featureReduction",void 0),b([S(Te(J({},S2.fields),{json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:M2}}}}}))],xe.prototype,"fields",void 0),b([S(S2.fieldsIndex)],xe.prototype,"fieldsIndex",void 0),b([S({type:iie,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],xe.prototype,"floorInfo",void 0),b([S({type:XQ,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],xe.prototype,"formTemplate",void 0),b([S({type:Mt,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],xe.prototype,"fullExtent",void 0),b([S()],xe.prototype,"gdbVersion",void 0),b([S({readOnly:!0,type:Qte,json:{read:{source:"geometryProperties"}}})],xe.prototype,"geometryFieldsInfo",void 0),b([S({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:x2.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:M2,writer(e,t,i){const s=e?x2.toJSON(e):null;s&&es(i,s,t)}}}},read:{source:"layerDefinition.geometryType",reader:x2.read}}})],xe.prototype,"geometryType",void 0),b([S({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],xe.prototype,"hasM",void 0),b([S({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],xe.prototype,"hasZ",void 0),b([S({readOnly:!0,type:Gg})],xe.prototype,"heightModelInfo",void 0),b([S({type:Date})],xe.prototype,"historicMoment",void 0),b([S(lte)],xe.prototype,"id",void 0),b([S({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],xe.prototype,"infoFor3D",void 0),b([S({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],xe.prototype,"isTable",void 0),b([$e("service","isTable",["type","geometryType"]),$e("isTable",["layerDefinition.type","layerDefinition.geometryType"])],xe.prototype,"readIsTable",null),b([ke("web-map","isTable")],xe.prototype,"writeIsTable",null),b([S(QO)],xe.prototype,"labelsVisible",void 0),b([S({type:[w_],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Z8},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Z8},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],xe.prototype,"labelingInfo",void 0),b([S(ate)],xe.prototype,"opacity",void 0),b([S({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],xe.prototype,"layerId",void 0),b([S(nte)],xe.prototype,"legendEnabled",void 0),b([S({type:["show","hide"]})],xe.prototype,"listMode",void 0),b([S(ute)],xe.prototype,"minScale",void 0),b([$e("service","minScale",["minScale","effectiveMinScale"])],xe.prototype,"readMinScale",null),b([S(hte)],xe.prototype,"maxScale",void 0),b([$e("service","maxScale",["maxScale","effectiveMaxScale"])],xe.prototype,"readMaxScale",null),b([S({type:String})],xe.prototype,"globalIdField",void 0),b([$e("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),$e("service","globalIdField",["globalIdField","fields"])],xe.prototype,"readGlobalIdFieldFromService",null),b([S({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:M2}}}}})],xe.prototype,"objectIdField",void 0),b([$e("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),$e("service","objectIdField",["objectIdField","fields"])],xe.prototype,"readObjectIdFieldFromService",null),b([S({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],xe.prototype,"operationalLayerType",void 0),b([S(S2.outFields)],xe.prototype,"outFields",void 0),b([S({readOnly:!0})],xe.prototype,"parsedUrl",null),b([S({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],xe.prototype,"path",void 0),b([S(ZO)],xe.prototype,"popupEnabled",void 0),b([S({type:bg,json:{name:"popupInfo",write:!0}})],xe.prototype,"popupTemplate",void 0),b([S({readOnly:!0})],xe.prototype,"defaultPopupTemplate",null),b([S({type:[rie],readOnly:!0})],xe.prototype,"relationships",void 0),b([S({types:NO,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:FQ,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],xe.prototype,"renderer",null),b([$e("service","renderer",["drawingInfo.renderer","defaultSymbol"]),$e("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],xe.prototype,"readRenderer",null),b([S()],xe.prototype,"sourceJSON",void 0),b([S({type:Boolean})],xe.prototype,"returnM",void 0),b([S({type:Boolean})],xe.prototype,"returnZ",void 0),b([S(rte)],xe.prototype,"screenSizePerspectiveEnabled",void 0),b([S({clonable:!1})],xe.prototype,"source",null),b([yt("source")],xe.prototype,"castSource",null),b([$e("portal-item","source",["featureSet"]),$e("web-map","source",["featureSet"])],xe.prototype,"readSource",null),b([S({readOnly:!0})],xe.prototype,"serviceDefinitionExpression",void 0),b([$e("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],xe.prototype,"readServiceDefinitionExpression",null),b([S({type:it,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],xe.prototype,"spatialReference",void 0),b([S({type:Number})],xe.prototype,"subtypeCode",void 0),b([S({type:[__]})],xe.prototype,"templates",void 0),b([$e("templates",["editFieldsInfo","creatorField","editorField","templates"])],xe.prototype,"readTemplates",null),b([S({type:sC})],xe.prototype,"timeInfo",void 0),b([S()],xe.prototype,"title",void 0),b([$e("service","title",["name"]),$e("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],xe.prototype,"readTitle",null),b([$e("web-map","title",["layerDefinition.name","title"])],xe.prototype,"readTitleFromWebMap",null),b([S({type:String})],xe.prototype,"sublayerTitleMode",void 0),b([S({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],xe.prototype,"trackIdField",void 0),b([S({json:{read:!1}})],xe.prototype,"type",void 0),b([S({type:String})],xe.prototype,"typeIdField",void 0),b([$e("service","typeIdField"),$e("typeIdField",["layerDefinition.typeIdField"])],xe.prototype,"readTypeIdField",null),b([S({type:[cC]})],xe.prototype,"types",void 0),b([$e("service","types",["types"]),$e("types",["layerDefinition.types"])],xe.prototype,"readTypes",null),b([S({readOnly:!0,json:{write:!1}})],xe.prototype,"serverGens",void 0),b([S({type:qe.ofType(Oo),readOnly:!0})],xe.prototype,"indexes",void 0),b([S(ste)],xe.prototype,"url",null),b([ke("url")],xe.prototype,"writeUrl",null),b([S({readOnly:!0})],xe.prototype,"userIsAdmin",void 0),b([S({json:{origins:{service:{read:!0}},read:!1}})],xe.prototype,"version",void 0),b([$e("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],xe.prototype,"readVersion",null),b([S({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],xe.prototype,"visible",void 0),b([$e("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],xe.prototype,"readVisible",null),xe=b([H("esri.layers.FeatureLayer")],xe);const $2=Uc({types:OT}),dC=xe;var Ace=Object.freeze(Object.defineProperty({__proto__:null,default:dC},Symbol.toStringTag,{value:"Module"}));const _ie=["$datastore","$map","$layer","$aggregatedfeatures"],xie="esri.widgets.Feature.support.arcadeFeatureUtils",Sie=Se.getLogger(xie);function Mie(e){return typeof e=="string"?Xd(O4(e)):Array.isArray(e)?$ie(e):(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"?Iie(e):e}function $ie(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?Xd(O4(t)):t}</li>`).join("")}</ul>`}function Iie(e){return`<table class="esri-widget__table">${e.keys().map(t=>{const i=e.field(t);return`<tr><th>${t}</th><td>${typeof i=="string"?Xd(O4(i)):i}</td></tr>`}).join("")}</table>`}function Tie({aggregatedFeatures:e,arcadeUtils:t,featureSetVars:i,context:s,viewInfo:l,map:d,graphic:y,interceptor:g}){i.forEach(_=>{const M=_.toLowerCase(),E={map:d,spatialReference:l.sr,interceptor:g};if(M==="$map"&&(s.vars[M]=t.convertMapToFeatureSetCollection(E)),M==="$layer"&&(s.vars[M]=t.convertFeatureLayerToFeatureSet({layer:y.sourceLayer,spatialReference:l.sr,interceptor:g})),M==="$datastore"&&(s.vars[M]=t.convertServiceUrlToWorkspace({url:y.sourceLayer.url,spatialReference:l.sr,interceptor:g})),M==="$aggregatedfeatures"){const O=y.layer,{fields:P,objectIdField:j,geometryType:R,spatialReference:z,displayField:q}=O,Y=new dC(Te(J({fields:P,objectIdField:j,geometryType:R,spatialReference:z,displayField:q},O.type==="feature"?{templates:O.templates,typeIdField:O.typeIdField,types:O.types}:null),{source:e}));s.vars[M]=t.convertFeatureLayerToFeatureSet({layer:Y,spatialReference:l.sr,interceptor:g})}})}function fC(){return import("./arcadeUtils.0781186f.js").then(function(e){return e.q})}async function Eie({graphic:e,view:t}){const{isAggregate:i,layer:s}=e;if(!i||!s||(t==null?void 0:t.type)!=="2d")return[];const l=await t.whenLayerView(s);if(!l.createQuery||!l.queryFeatures)return[];const d=l.createQuery();d.aggregateIds=[e.getObjectId()];const{features:y}=await l.queryFeatures(d);return y}async function yC({expressionInfo:e,arcadeUtils:t,interceptor:i,spatialReference:s,map:l,graphic:d,view:y}){if(!e||!e.expression)return null;const g=t.createSyntaxTree(e.expression),_=_ie.filter(j=>t.hasVariable(g,j)),[M]=await RM([Eie({graphic:d,view:y}),t.loadScriptDependencies(g,!0,_)]),E=t.getViewInfo({spatialReference:s}),O=t.createExecContext(d,E);O.interceptor=i,O.useAsync=!0,Tie({aggregatedFeatures:M,arcadeUtils:t,featureSetVars:_,context:O,viewInfo:E,map:l,graphic:d,interceptor:i});const P=t.createFunction(g,O);return t.executeAsyncFunction(P,O).catch(j=>Sie.error("arcade-execution-error",{error:j,graphic:d,expressionInfo:e}))}async function kie({expressionInfos:e,spatialReference:t,graphic:i,interceptor:s,map:l,view:d}){if(!e||!e.length)return{};const y=await fC(),g={};for(const E of e)g[`expression/${E.name}`]=yC({expressionInfo:E,arcadeUtils:y,interceptor:s,spatialReference:t,map:l,graphic:i,view:d});const _=await Or(g),M={};for(const E in _)M[E]=Mie(_[E].value);return M}const Aie=1;let qr=class extends Yu(Fe){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{var t,i;const s=(t=this.contentElement)==null?void 0:t.type;(i=this.contentElementViewModel)==null||i.destroy();const l=s==="fields"?new Ag:s==="media"?new wu:s==="text"?new $m:null;this._set("contentElementViewModel",l)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=M4(this._compile,Aie,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:i,interceptor:s,spatialReference:l,map:d,view:y,_abortController:g}=this;if(!(t&&i&&l&&d))return void this._set("contentElement",null);const _=await fC();if(g!==this._abortController)return;const M=await yC({arcadeUtils:_,expressionInfo:t,graphic:i,interceptor:s,map:d,spatialReference:l,view:y});if(!M||M.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const E=await r_(M,g.signal),O=E==null?void 0:E.type,P=O==="media"?pd.fromJSON(E):O==="text"?Oc.fromJSON(E):O==="fields"?Ac.fromJSON(E):null;this._set("contentElement",P)},this.handles.add([ri(this,["expressionInfo","graphic","map","spatialReference","view"],this._compileThrottled),ri(this,"contentElement",this._createVM)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:i}=this;return e?"loading":t||i?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}};b([S()],qr.prototype,"_abortController",void 0),b([S({type:qI})],qr.prototype,"expressionInfo",void 0),b([S({type:rs})],qr.prototype,"graphic",void 0),b([S({readOnly:!0})],qr.prototype,"contentElement",void 0),b([S({readOnly:!0})],qr.prototype,"contentElementViewModel",void 0),b([S()],qr.prototype,"interceptor",void 0),b([S()],qr.prototype,"spatialReference",null),b([S({readOnly:!0})],qr.prototype,"state",null),b([S()],qr.prototype,"map",null),b([S()],qr.prototype,"view",void 0),qr=b([H("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],qr);const x_=qr,s1={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let by=class extends mr{constructor(e,t){super(e,t),this.viewModel=new x_}initialize(){ri(this,"viewModel.contentElementViewModel",()=>this._setupExpressionWidget())}destroy(){this._destroyContentWidget()}renderLoading(){return oe("div",{key:"loading-container",class:s1.loadingSpinnerContainer},oe("span",{class:this.classes(s1.iconLoading,s1.spinner)}))}render(){var e;const{state:t}=this.viewModel;return oe("div",{class:s1.base},t==="loading"?this.renderLoading():t==="disabled"?null:(e=this._contentWidget)==null?void 0:e.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,i=t==null?void 0:t.type;this._destroyContentWidget();const s=e?i==="fields"?new _k({viewModel:e}):i==="media"?new oA({viewModel:e}):i==="text"?new K1({viewModel:e}):null:null;this._contentWidget=s,this.scheduleRender()}};b([S({type:x_})],by.prototype,"viewModel",void 0),by=b([H("esri.widgets.Feature.FeatureExpression")],by);const Oie=by;class Cie{constructor(t,i){this.preLayerQueryCallback=t,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=s=>{}),this.preRequestCallback||(this.preLayerQueryCallback=s=>{})}}var wy;const Pie=1,sS="content-view-models",mC="esri.widgets.FeatureViewModel",Nie=Se.getLogger(mC),nS={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let Wt=wy=class extends Fe{constructor(e){super(e),this._handles=new yr,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=M4(this._graphicChanged,Pie,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities=J({},nS),this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:i}=this;return t.type==="attachments"&&i.attachmentsContent||t.type==="custom"&&i.customContent||t.type==="fields"&&i.fieldsContent||t.type==="media"&&i.mediaContent||t.type==="text"&&i.textContent||t.type==="expression"&&i.expressionContent},this._handles.add(ri(this,["graphic","_effectivePopupTemplate","abilities"],()=>this.graphicChangedThrottled()))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return X(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return xW(s7(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return hk(this.graphic)}castAbilities(e){return J(J({},nS),e)}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get map(){return this.get("view.map")||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(e,t){const i=this.contentViewModels[e];i instanceof wu&&i.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof wu&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof wu&&t.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(i){ks(i)||(this._error=i,Nie.error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,i)=>this._compileContentElement(t,i)):typeof e=="string"?this._compileText(new Oc({text:e}),0).text:e}_destroyContentViewModels(){var e;(e=this._handles)==null||e.remove(sS),this.contentViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("contentViewModels",[])}_setExpressionContentVM(e,t){const{formattedAttributes:i}=this,{contentElement:s,contentElementViewModel:l}=e,d=s==null?void 0:s.type;l&&d&&(d==="fields"&&(this._createFieldsFormattedAttributes({contentElement:s,contentElementIndex:t,formattedAttributes:i}),l.set(this._createFieldsVMParams(s,t))),d==="media"&&(this._createMediaFormattedAttributes({contentElement:s,contentElementIndex:t,formattedAttributes:i}),l.set(this._createMediaVMParams(s,t))),d==="text"&&l.set(this._createTextVMParams(s)))}_compileExpression(e,t){const{expressionInfo:i}=e,{graphic:s,map:l,spatialReference:d,view:y}=this,g=new x_({expressionInfo:i,graphic:s,interceptor:wy.interceptor,map:l,spatialReference:d,view:y});return this.contentViewModels[t]=g,this._handles.add(ri(g,"contentElementViewModel",()=>this._setExpressionContentVM(g,t)),sS),e}_compileAttachments(e,t){const{graphic:i}=this,{description:s,title:l}=e;return this.contentViewModels[t]=new P4(J({graphic:i},this._compileTitleAndDesc({title:l,description:s}))),e}_compileCustom(e,t){const{graphic:i}=this,{creator:s,destroyer:l}=e;return this.contentViewModels[t]=new $m({graphic:i,creator:s,destroyer:l}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:i,_sourceLayer:s,graphic:l,formattedAttributes:d,_expressionAttributes:y}=this,{attributes:g}=l,_=d.global;return{title:vu({attributes:g,fieldInfoMap:i,globalAttributes:_,expressionAttributes:y,layer:s,text:e}),description:vu({attributes:g,fieldInfoMap:i,globalAttributes:_,expressionAttributes:y,layer:s,text:t})}}_createFieldsVMParams(e,t){const{_effectivePopupTemplate:i,formattedAttributes:s}=this,l=J(J({},s.global),s.content[t]),d=(e==null?void 0:e.fieldInfos)||(i==null?void 0:i.fieldInfos),y=d==null?void 0:d.filter(({fieldName:E})=>pk(E)||Fo(E)||l.hasOwnProperty(E)),g=i==null?void 0:i.expressionInfos,{description:_,title:M}=e;return J({attributes:l,expressionInfos:g,fieldInfos:y},this._compileTitleAndDesc({title:M,description:_}))}_compileFields(e,t){const i=e.clone(),s=new Ag(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=s,i.fieldInfos=s.formattedFieldInfos.slice(0),i}_createMediaVMParams(e,t){const{abilities:i,graphic:s,_fieldInfoMap:l,formattedAttributes:d,_effectivePopupTemplate:y,relatedInfos:g,_sourceLayer:_,_expressionAttributes:M}=this,{attributes:E}=s,{description:O,mediaInfos:P,title:j}=e;return J({abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:E,layer:_,fieldInfoMap:l,formattedAttributes:J(J({},d.global),d.content[t]),expressionAttributes:M,mediaInfos:P,popupTemplate:y,relatedInfos:g},this._compileTitleAndDesc({title:j,description:O}))}_compileMedia(e,t){const i=e.clone(),s=new wu(this._createMediaVMParams(e,t));return i.mediaInfos=s.formattedMediaInfos.slice(0),this.contentViewModels[t]=s,i}_createTextVMParams(e){const{graphic:t,_fieldInfoMap:i,_sourceLayer:s,_expressionAttributes:l}=this;if(e&&e.text){const{attributes:d}=t,y=this.formattedAttributes.global;e.text=vu({attributes:d,fieldInfoMap:i,globalAttributes:y,expressionAttributes:l,layer:s,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const i=e.clone();return this.contentViewModels[t]=new $m(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:i}=this;if(!e)return;const{lastEditInfoEnabled:s}=e,l=t==null?void 0:t.editFieldsInfo;return s&&l?_W(l,i.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:i,graphic:s,_expressionAttributes:l}=this,{attributes:d}=s,y=this.formattedAttributes.global;return vu({attributes:d,fieldInfoMap:t,globalAttributes:y,expressionAttributes:l,layer:i,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.title;return Sm(i,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.content;return Sm(i,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:i,graphic:s,_effectivePopupTemplate:l,spatialReference:d,map:y,view:g}=this,{content:{value:_},title:{value:M}}=await Or({content:this._getContent(),title:this._getTitle()});if(t!==this._featureAbortController||!s)return;await IW({graphic:s,popupTemplate:l,layer:i,spatialReference:d},e);const{expressionAttributes:{value:E}}=await Or({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:kie({expressionInfos:l==null?void 0:l.expressionInfos,spatialReference:d,graphic:s,map:y,interceptor:wy.interceptor,view:g})});t===this._featureAbortController&&s&&(this._expressionAttributes=E,this._graphicExpressionAttributes=J(J({},s.attributes),E),this._set("formattedAttributes",this._createFormattedAttributes(_)),this._set("title",this._compileTitle(M)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(_)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){const{_effectivePopupTemplate:s,graphic:l,relatedInfos:d,_sourceLayer:y,_fieldInfoMap:g,_graphicExpressionAttributes:_}=this;i.content[t]=Gv({fieldInfos:s==null?void 0:s.fieldInfos,graphic:l,attributes:J(J({},_),e.attributes),layer:y,fieldInfoMap:g,relatedInfos:d})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){if(e.fieldInfos){const{graphic:s,relatedInfos:l,_sourceLayer:d,_fieldInfoMap:y,_graphicExpressionAttributes:g}=this;i.content[t]=Gv({fieldInfos:e.fieldInfos,graphic:s,attributes:J(J({},g),e.attributes),layer:d,fieldInfoMap:y,relatedInfos:l})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:i,relatedInfos:s,_sourceLayer:l,_fieldInfoMap:d,_graphicExpressionAttributes:y}=this,g=t==null?void 0:t.fieldInfos,_={global:Gv({fieldInfos:g,graphic:i,attributes:y,layer:l,fieldInfoMap:d,relatedInfos:s}),content:[]};return Array.isArray(e)&&e.forEach((M,E)=>{M.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:M,contentElementIndex:E,formattedAttributes:_}),M.type==="media"&&this._createMediaFormattedAttributes({contentElement:M,contentElementIndex:E,formattedAttributes:_})}),_}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(t,s7(i),e)}async _queryRelatedInfos(e,t,i){const{relatedInfos:s,_sourceLayer:l}=this;s.clear();const d=X(l.associatedLayer)?await l.associatedLayer.load(i):l;if(!d)return;const y=t.filter(M=>M&&Fo(M.fieldName));if(!y||!y.length)return;t.forEach(M=>this._configureRelatedInfo(M,d));const g=await RK({relatedInfos:s,layer:d},i);Object.keys(g).forEach(M=>{var E;const O=s.get(M.toString()),P=(E=g[M])==null?void 0:E.value;O&&P&&(O.layerInfo=P.data)});const _=await LK({graphic:e,relatedInfos:s,layer:d},i);Object.keys(_).forEach(M=>{var E;CK((E=_[M])==null?void 0:E.value,s.get(M.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:i}=this,s=d0(e.fieldName);if(!s)return;const{layerId:l,fieldName:d}=s;if(!l)return;const y=i.get(l.toString())||OK(l,t);y&&(DK({relatedInfo:y,fieldName:d,fieldInfo:e}),this.relatedInfos.set(l,y))}};Wt.interceptor=new Cie(kW,AW),b([S()],Wt.prototype,"_error",void 0),b([S()],Wt.prototype,"_featureAbortController",void 0),b([S({readOnly:!0})],Wt.prototype,"_effectivePopupTemplate",null),b([S({readOnly:!0})],Wt.prototype,"_fieldInfoMap",null),b([S({readOnly:!0})],Wt.prototype,"_sourceLayer",null),b([S()],Wt.prototype,"abilities",void 0),b([yt("abilities")],Wt.prototype,"castAbilities",null),b([S({readOnly:!0})],Wt.prototype,"content",void 0),b([S({readOnly:!0})],Wt.prototype,"contentViewModels",void 0),b([S({type:Boolean})],Wt.prototype,"defaultPopupTemplateEnabled",void 0),b([S({readOnly:!0})],Wt.prototype,"state",null),b([S({readOnly:!0})],Wt.prototype,"formattedAttributes",void 0),b([S({type:rs,value:null})],Wt.prototype,"graphic",null),b([S({readOnly:!0})],Wt.prototype,"lastEditInfo",void 0),b([S({readOnly:!0})],Wt.prototype,"relatedInfos",void 0),b([S()],Wt.prototype,"spatialReference",null),b([S({readOnly:!0})],Wt.prototype,"title",void 0),b([S()],Wt.prototype,"map",null),b([S({readOnly:!0})],Wt.prototype,"waitingForContent",null),b([S()],Wt.prototype,"view",void 0),Wt=wy=b([H(mC)],Wt);const S_=Wt,gC=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=i=>wk(i)&&!i.destroyed?oe("div",{key:i},i.render()):i instanceof HTMLElement?oe("div",{key:i,bind:i,afterCreate:this._attachToNode}):BW(i)?oe("div",{key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const s=this;i.appendChild(s)}};return t=b([H("esri.widgets.Feature.ContentMixin")],t),t},zi={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},oS={title:!0,content:!0,lastEditedInfo:!0};let Gi=class extends gC(mr){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements=J({},oS),this.map=null,this.view=null,this.viewModel=new S_}initialize(){this.own(ri(this,"viewModel.contentViewModels",()=>this._setupContentWidgets()))}loadDependencies(){return import("./calcite-notice.b11207d2.js")}destroy(){this._destroyContentWidgets()}castVisibleElements(e){return J(J({},oS),e)}render(){const{state:e}=this.viewModel,t=oe("div",{class:zi.container,key:"container"},this.renderTitle(),e==="error"?this.renderError():e==="loading"?this.renderLoading():this.renderContentContainer());return oe("div",{class:this.classes(zi.base,zi.esriWidget)},t)}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t)}nextMedia(e){this.viewModel.nextMedia(e)}previousMedia(e){this.viewModel.previousMedia(e)}renderError(){const{messagesCommon:e,messages:t,visibleElements:i}=this;return oe("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},i.title?oe("div",{key:"error-title",slot:"title"},e.errorMessage):null,oe("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return oe("div",{key:"loading-container",class:zi.loadingSpinnerContainer},oe("span",{class:this.classes(zi.iconLoading,zi.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?oe("div",{class:zi.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?oe(N4,{level:this.headingLevel,class:zi.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?oe("div",{key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if(typeof e=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:oe("div",{key:`${t}-content`},i.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!i.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:i,attachmentInfos:s}=t.viewModel;return i==="loading"||s.length>0?oe("div",{key:this._buildKey("attachments-element",e),class:this.classes(zi.contentElement)},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:oe("div",{key:this._buildKey("expression-element",e),class:zi.contentElement},t.render())}renderCustom(e,t){const{creator:i}=e,s=this._contentWidgets[t];return!s||s.destroyed?null:i?oe("div",{key:this._buildKey("custom-element",t),class:zi.contentElement},s.render()):null}renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:oe("div",{key:this._buildKey("fields-element",e),class:zi.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:oe("div",{key:this._buildKey("media-element",e),class:zi.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:i}=this.viewModel;if(!i||!e.lastEditedInfo)return null;const{date:s,user:l}=i,d=i.type==="edit"?l?t.lastEditedByUser:t.lastEdited:l?t.lastCreatedByUser:t.lastCreated,y=yo(d,{date:s,user:l});return oe("div",{key:"edit-info-element",class:this.classes(zi.lastEditedInfo,zi.contentElement)},y)}renderText(e,t){const i=e.text,s=this._contentWidgets[t];return!s||s.destroyed?null:i?oe("div",{key:this._buildKey("text-element",t),class:this.classes(zi.contentElement,zi.text)},s.render()):null}_buildKey(e,...t){return`${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(e=>this._destroyContentWidget(e)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,i=this.get("viewModel.content"),{contentViewModels:s}=this.viewModel;if(Array.isArray(i))i.forEach((l,d)=>{l.type==="attachments"&&(this._contentWidgets[d]=new zW({displayType:l.displayType,headingLevel:t.title?e+1:e,viewModel:s[d]})),l.type==="fields"&&(this._contentWidgets[d]=new _k({viewModel:s[d]})),l.type==="media"&&(this._contentWidgets[d]=new oA({viewModel:s[d]})),l.type==="text"&&(this._contentWidgets[d]=new K1({viewModel:s[d]})),l.type==="custom"&&(this._contentWidgets[d]=new K1({viewModel:s[d]})),l.type==="expression"&&(this._contentWidgets[d]=new Oie({viewModel:s[d]}))},this);else{const l=s[0];l&&!l.destroyed&&(this._contentWidgets[0]=new K1({viewModel:l}))}this.scheduleRender()}};b([Ge("viewModel.graphic")],Gi.prototype,"graphic",void 0),b([Ge("viewModel.defaultPopupTemplateEnabled")],Gi.prototype,"defaultPopupTemplateEnabled",void 0),b([S()],Gi.prototype,"headingLevel",void 0),b([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Gi.prototype,"label",void 0),b([S(),kr("esri/widgets/Feature/t9n/Feature")],Gi.prototype,"messages",void 0),b([S(),kr("esri/t9n/common")],Gi.prototype,"messagesCommon",void 0),b([S(),kr("esri/widgets/support/t9n/uriUtils")],Gi.prototype,"messagesURIUtils",void 0),b([Ge("viewModel.spatialReference")],Gi.prototype,"spatialReference",void 0),b([Ge("viewModel.title")],Gi.prototype,"title",void 0),b([S()],Gi.prototype,"visibleElements",void 0),b([yt("visibleElements")],Gi.prototype,"castVisibleElements",null),b([Ge("viewModel.map")],Gi.prototype,"map",void 0),b([Ge("viewModel.view")],Gi.prototype,"view",void 0),b([S({type:S_})],Gi.prototype,"viewModel",void 0),Gi=b([H("esri.widgets.Feature")],Gi);const jie=Gi;let Xl=class extends hl.EventedAccessor{constructor(e){super(e),this._anchorHandles=new yr,this.location=null,this.screenLocation=null,this.screenLocationEnabled=!1,this.view=null,this._anchorHandles.add([Nt(this,["screenLocationEnabled","location","view.size","view.stationary"],()=>this._updateScreenPointAndHandle()),Nt(this,["view","view.ready"],()=>this._wireUpView())])}destroy(){this.view=null,this._anchorHandles&&this._anchorHandles.destroy(),this._anchorHandles=null,this._viewpointHandle=null}_wireUpView(){const e="view";if(this._anchorHandles.remove(e),this._viewpointHandle=null,!this.get("view.ready"))return;this._setScreenLocation();const{view:t}=this,i=t.type==="3d"?"camera":"viewpoint",s=RB(t,i,()=>this._viewpointChange());this._anchorHandles.add(s,e),this._viewpointHandle=s,this._toggleWatchingViewpoint()}_viewpointChange(){this._setScreenLocation(),this.emit("view-change")}_updateScreenPointAndHandle(){this._setScreenLocation(),this._toggleWatchingViewpoint()}_toggleWatchingViewpoint(){const{_viewpointHandle:e,location:t,screenLocationEnabled:i}=this;!e||(t&&i?e.resume():e.pause())}_setScreenLocation(){const{location:e,view:t,screenLocationEnabled:i}=this,s=this.get("view.ready"),l=i&&s&&X(e)?t.toScreen(e):null;this._set("screenLocation",l)}};b([S()],Xl.prototype,"location",void 0),b([S({readOnly:!0})],Xl.prototype,"screenLocation",void 0),b([S()],Xl.prototype,"screenLocationEnabled",void 0),b([S()],Xl.prototype,"view",void 0),Xl=b([H("esri.widgets.support.AnchorElementViewModel")],Xl);const vC=Xl,Fie="esri.widgets.CompassViewModel";let _y=class extends vC{constructor(e){super(e),this.visible=!1}};b([S()],_y.prototype,"visible",void 0),_y=b([H(Fie)],_y);const bC=_y,I2={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let Zl=class extends mr{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new bC,this.visible=!1}initialize(){this.own([Nt(this,"visible",e=>this._visibleChange(e))])}destroy(){this._animationPromise=null}show(e){const{location:t,promise:i}=e;t&&(this.viewModel.location=t),this.visible=!0;const s=()=>this.hide();i&&i.catch(()=>{}).then(s)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,i=!!t,s=e&&i,l=!e&&i,d={[I2.spinnerStart]:s,[I2.spinnerFinish]:l},y=this._getPositionStyles();return oe("div",{class:this.classes(I2.base,d),styles:y})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=p5(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(!t||ce(e))return{};const{padding:i}=t;return{left:e.x-i.left+"px",top:e.y-i.top+"px"}}};b([Ge("viewModel.location")],Zl.prototype,"location",void 0),b([Ge("viewModel.view")],Zl.prototype,"view",void 0),b([S({type:bC})],Zl.prototype,"viewModel",void 0),b([Ge("viewModel.visible")],Zl.prototype,"visible",void 0),Zl=b([H("esri.widgets.Spinner")],Zl);const Rie=Zl;var aS;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(aS||(aS={}));class Lie{constructor(t,i){this._storage=new OO,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i){this._storage.put(t,i,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}function Die(e){return typeof e=="function"}function Oce(e,t,i,s){return Die(e)?e(t,i,s):e}function Cce(e,t,i){const s=` /-,
`,l=_=>{let M=_.length;for(;M--;)if(s.indexOf(_.charAt(M))===-1)return!1;return!0},d=[];let y=0,g=-1;do if(g=t.indexOf("[",y),g>=y){if(g>y){const _=t.substr(y,g-y);d.push([_,null,l(_)])}if(y=g+1,g=t.indexOf("]",y),g>=y){if(g>y){const _=e[t.substr(y,g-y)];_&&d.push([null,_,!1])}y=g+1}}while(g!==-1);if(y<t.length-1){const _=t.substr(y);d.push([_,null,l(_)])}return _=>{let M="",E=null;for(const O of d){const[P,j,R]=O;if(P)R?E=P:(E&&(M+=E,E=null),M+=P);else{const z=_.attributes[j];z&&(E&&(M+=E,E=null),M+=z)}}return zie(M,i)}}function zie(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function Pce(e,t,i,s,l,d,y=!0){const g=t/l,_=i/d,M=Math.ceil(g/2),E=Math.ceil(_/2);for(let O=0;O<d;O++)for(let P=0;P<l;P++){const j=4*(P+(y?d-O-1:O)*l);let R=0,z=0,q=0,Y=0,te=0,ne=0,he=0;const se=(O+.5)*_;for(let ue=Math.floor(O*_);ue<(O+1)*_;ue++){const Ee=Math.abs(se-(ue+.5))/E,Oe=(P+.5)*g,Le=Ee*Ee;for(let Ne=Math.floor(P*g);Ne<(P+1)*g;Ne++){let je=Math.abs(Oe-(Ne+.5))/M;const De=Math.sqrt(Le+je*je);De>=-1&&De<=1&&(R=2*De*De*De-3*De*De+1,R>0&&(je=4*(Ne+ue*t),he+=R*e[je+3],q+=R,e[je+3]<255&&(R=R*e[je+3]/250),Y+=R*e[je],te+=R*e[je+1],ne+=R*e[je+2],z+=R))}}s[j]=Y/z,s[j+1]=te/z,s[j+2]=ne/z,s[j+3]=he/q}}function Nce(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}const jce=e=>isNaN(e)||!e?0:e,Fce=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":return!0}return!1};function Rce(){return import("./geometryEngineJSON.36e577a6.js")}new Lie(1e3);new Ze([128,128,128]);const Vie=new Ze("white");function Dm(e,t){if(t==null)return e;const i=e.toRgba();return i[3]=i[3]*t,new Ze(i)}function Gie(e,t,i){const s=e.symbolLayers;if(!s)return;const l=d=>{const y=X(d)?d:null;return Dm(t=t||y||i!=null&&Vie,i)};s.forEach(d=>{if(d.type!=="object"||d.resource.href==null||t)if(d.type==="water")d.color=l(d.color);else{const y=X(d.material)?d.material.color:null,g=l(y);ce(d.material)?d.material=new Zr({color:g}):d.material.color=g,i!=null&&"outline"in d&&X(d.outline)&&X(d.outline.color)&&(d.outline.color=Dm(d.outline.color,i))}})}function qie(e,t,i){(t=t||e.color)&&(e.color=Dm(t,i)),i!=null&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=Dm(e.outline.color,i))}function T2(e,t,i){e&&(t||i!=null)&&(t&&(t=new Ze(t)),fd(e)?Gie(e,t,i):u4(e)&&qie(e,t,i))}async function Uie(e,t){const i=e.symbolLayers;i&&await hF(i,async s=>Bie(s,t))}async function Bie(e,t){switch(e.type){case"extrude":Wie(e,t);break;case"icon":case"line":case"text":Hie(e,t);break;case"path":Kie(e,t);break;case"object":await Jie(e,t)}}function Hie(e,t){const i=wC(t);X(i)&&(e.size=i)}function wC(e){for(const t of e)if(typeof t=="number")return t;return null}function Wie(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function Jie(e,t){const{resourceSize:i,symbolSize:s}=await Yie(e),l=_C(t,i,s);e.width=Z0(t[0],s[0],i[0],l),e.depth=Z0(t[1],s[1],i[1],l),e.height=Z0(t[2],s[2],i[2],l)}function Kie(e,t){const i=_C(t,Q$,[e.width,void 0,e.height]);e.width=Z0(t[0],e.width,1,i),e.height=Z0(t[2],e.height,1,i)}function _C(e,t,i){for(let s=0;s<3;s++){const l=e[s];switch(l){case"symbol-value":return i[s]!=null?i[s]/t[s]:1;case"proportional":break;default:if(l&&t[s])return l/t[s]}}return 1}async function Yie(e){const t=await import("./symbolLayerUtils.2be57ef1.js"),i=await t.computeObjectLayerResourceSize(e,10),{width:s,height:l,depth:d}=e,y=[s,d,l];let g=1;for(let _=0;_<3;_++)if(y[_]!=null){g=y[_]/i[_];break}for(let _=0;_<3;_++)y[_]==null&&(y[_]=i[_]*g);return{resourceSize:i,symbolSize:y}}function Z0(e,t,i,s){switch(e){case"proportional":return i*s;case"symbol-value":return t!=null?t:i;default:return e}}function Xie(e,t){const i=wC(t);if(!ce(i))switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const s=e.width/e.height;s>1?(e.width=i,e.height=i*s):(e.width=i*s,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}async function Zie(e,t){if(e&&t)return fd(e)?Uie(e,t):void(u4(e)&&Xie(e,t))}function Qie(e,t,i){if(e&&t!=null)if(fd(e)){const s=e.symbolLayers;s&&s.forEach(l=>{if(l&&l.type==="object")switch(i){case"tilt":l.tilt=t;break;case"roll":l.roll=t;break;default:l.heading=t}})}else u4(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle=t))}function xC(e){return e&&"opacity"in e?e.opacity*xC(e.parent):1}async function ere(e,t){var i,s;if(!e)return;const l=e.sourceLayer,d=(i=X(t)&&(s=t.useSourceLayer)!=null&&s?l:e.layer)!=null?i:l,y=xC(d);if(X(e.symbol)&&(!X(t)||t.ignoreGraphicSymbol!==!0)){const te=e.symbol.type==="web-style"?await e.symbol.fetchSymbol(X(t)?t.abortOptions:null):e.symbol.clone();return T2(te,null,y),te}const g=X(t)&&t.renderer||d&&"renderer"in d&&d.renderer;let _=g&&"getSymbolAsync"in g?await g.getSymbolAsync(e,t):null;if(!_)return;if(_=_.type==="web-style"?await _.fetchSymbol(X(t)?t.abortOptions:null):_.clone(),!("visualVariables"in g)||!g.visualVariables||!g.visualVariables.length)return T2(_,null,y),_;if("arcadeRequiredForVisualVariables"in g&&g.arcadeRequiredForVisualVariables&&(ce(t)||ce(t.arcade))){const te=J({},t);te.arcade=await qo(),t=te}const M=await Promise.resolve().then(function(){return aQ}),E=[],O=[],P=[],j=[];for(const te of g.visualVariables)switch(te.type){case"color":E.push(te);break;case"opacity":O.push(te);break;case"rotation":j.push(te);break;case"size":te.target||P.push(te)}const R=!!E.length&&E[E.length-1],z=R?M.getColor(R,e,t):null,q=!!O.length&&O[O.length-1];let Y=q?M.getOpacity(q,e,t):null;if(y!=null&&(Y=Y!=null?Y*y:y),T2(_,z,Y),P.length){const te=M.getAllSizes(P,e,t);await Zie(_,te)}for(const te of j)Qie(_,M.getRotationAngle(te,e,t),te.axis);return _}class U9{constructor(t=i=>i.values().next().value){this._peeker=t,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let t;for(t of this._items);return t}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t)}contains(t){return this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),t}remove(t){this._items.delete(t)}filter(t){return this._items.forEach(i=>{t(i)||this._items.delete(i)}),this}}const tre=de("mac")?"Meta":"Ctrl",Yg={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)Yg[e]=String.fromCharCode(e);for(let e=1;e<25;e++)Yg[111+e]=`F${e}`;for(let e=65;e<91;e++)Yg[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function ire(e){if(e.key!==void 0)return ru(e);const t=Yg[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function rre(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class sre{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const s of this.keyModifiers)if(!i.has(s))return!1;return!0}}const lS=Se.getLogger("esri.views.input.InputHandler");class Li{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const s of i)this._incomingEventMatches.push(s.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?lS.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,s){let l;typeof i=="function"?(s=i,l=[]):l=i||[];const d=typeof t=="string"?new sre(t,l):t,y=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},g=E=>{const O=this._incoming[E.match.eventType];if(O){const P=O.indexOf(E);O.splice(P,1),y(),this._manager&&this._manager.updateDependencies()}},_=new nre(d,s,{onPause:g,onRemove:g,onResume:E=>{const O=this._incoming[E.match.eventType];O&&O.indexOf(E)===-1&&(O.push(E),y(),this._manager&&this._manager.updateDependencies())}});let M=this._incoming[d.eventType];return M||(M=[],this._incoming[d.eventType]=M),M.push(_),y(),this._manager&&this._manager.updateDependencies(),_}registerOutgoing(t){if(this._outgoing[t])throw Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new ore(t,{onEmit:(s,l,d,y)=>{this._manager.emit(s.eventType,l,d,y)},onRemove:s=>{delete this._outgoing[s.eventType],this._manager.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){this._manager.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):lS.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){const i=this._incoming[t.type];if(i){for(const s of i)if(s.match.matches(t)&&(s.callback(t),t.shouldStopPropagation()))break}}}class nre{constructor(t,i,s){this.match=t,this._callback=i,this._handler=s}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class ore{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,s){this._removed||this._handler.onEmit(this,t,i,s)}remove(){this._removed=!0,this._handler.onRemove(this)}}class are extends Li{constructor(t){super(!0),this._onChange=t,this._value="mouse",this.registerIncoming("pointer-down",i=>{const s=i.data.native.pointerType==="touch";this._setValue(s?"touch":"mouse")}),this._moveHandler=this.registerIncoming("pointer-move",i=>{const s=i.data.native.pointerType==="touch";this._setValue(s?"touch":"mouse")}),this._moveHandler.pause()}_setValue(t){t!==this._value&&(t==="touch"?this._moveHandler.resume():this._moveHandler.pause(),this._value=t,this._onChange(t))}}const E2=Se.getLogger("esri.views.input.InputManager");let Ql=class extends Fe{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=tre,this.latestPointerType="mouse",this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource=null,this._currentPropagation=null}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}installHandlers(e,t,i=tl.INTERNAL){if(this._nameToGroup[e])return void E2.error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void E2.error("Can't register a group of zero handlers");const s={name:e,handlers:t.map(l=>({handler:l,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=s;for(let l=s.handlers.length-1;l>=0;l--){const d=s.handlers[l];this._handlers.push(d),d.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(y,g,_,M,E)=>{this._emitInputEvent(d.priorityIndex+1,y,g,_,E,M)},setPointerCapture:(y,g)=>{this._setPointerCapture(s,d,y,g)},setEventCallback:y=>{d.eventCallback=y},setUninstallCallback:y=>{d.uninstallCallback=y},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(i=>{i.removed=!0,i.uninstallCallback()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):E2.error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const s=this._handlers[i];s.priorityIndex=i,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const s=this._handlersPriority[i];s.priorityIndex=i;let l=s.handler.hasSideEffects;if(!l){for(const d of s.handler.outgoingEventTypes)if(e.has(d)){l=!0;break}}if(l)for(const d of s.handler.incomingEventMatches){e.add(d.eventType);for(const y of d.keyModifiers)rre(y)||t.add(y)}s.active=l}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointerType(e){this._set("latestPointerType",e)}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const l=t;this._pointerCaptures.delete(l.native.pointerId)}this._updateKeyModifiers(e,t);const i=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,s=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,i,s)}_updateKeyModifiers(e,t){if(!t)return;let i=!1;const s=()=>{if(!i){const y=new Set;this._activeKeyModifiers.forEach(g=>{y.add(g)}),this._activeKeyModifiers=y,i=!0}},l=(y,g)=>{g&&!this._activeKeyModifiers.has(y)?(s(),this._activeKeyModifiers.add(y)):!g&&this._activeKeyModifiers.has(y)&&(s(),this._activeKeyModifiers.delete(y))};if(e==="key-down"||e==="key-up"){const y=t.key;this._keyModifiers.has(y)&&l(y,e==="key-down")}const d=t.native;l("Alt",!(!d||!d.altKey)),l("Ctrl",!(!d||!d.ctrlKey)),l("Shift",!(!d||!d.shiftKey)),l("Meta",!(!d||!d.metaKey)),l("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerTypeHandler=new are(e=>this._setLatestPointerType(e)),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,tl.INTERNAL),this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler],tl.INTERNAL)}_setPointerCapture(e,t,i,s){const l=e.name+"-"+t.priorityIndex,d=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,d),s?(d.add(l),d.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):d.has(l)&&(d.delete(l),d.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,i,s){this._emitInputEvent(0,e,t,i,s)}_emitInputEvent(e,t,i,s,l,d){const y=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),g=l!==void 0&&l,_={event:new lre(t,i,y,d||this._activeKeyModifiers,g),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(_):this._doNewPropagation(_)}_doNewPropagation(e){this._currentPropagation={events:new U9,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){const e=this._currentPropagation;if(e){for(;this._currentPropagation.events.length>0;){const{event:t,priorityIndex:i}=this._currentPropagation.events.pop(),s=t.data&&t.data.eventId;if(!(s!=null&&this._stoppedPropagationEventIds.has(s)))for(e.currentHandler=this._handlersPriority[i];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback(t),t.shouldStopPropagation()){s!=null&&this._stoppedPropagationEventIds.add(s);break}if(t.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new U9;for(t.push(e);this._currentPropagation.events.length;)t.push(this._currentPropagation.events.pop());this._currentPropagation.events=t,this._currentPropagation.currentHandler=null}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const s of t.handler.incomingEventMatches){if(i.eventType!==s.eventType)continue;const l=i.keyModifiers.filter(d=>s.keyModifiers.indexOf(d)!==-1);if(l.length===i.keyModifiers.length!=(l.length===s.keyModifiers.length))return i.keyModifiers.length>s.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const i of e){let s=0;for(;s<t.length&&this._compareHandlerPriority(i,t[s])>=0;)s++;t.splice(s,0,i)}return t}get debug(){const e=t=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=i};return{injectEvent:(t,i)=>{e(()=>{this._onEventReceived(t,i)})},disablePointerCapture:e}}};b([S({readOnly:!0})],Ql.prototype,"hasPendingInputs",null),b([S()],Ql.prototype,"eventSource",void 0),b([S()],Ql.prototype,"recognizers",void 0),b([S({readOnly:!0})],Ql.prototype,"latestPointerType",void 0),Ql=b([H("esri.views.input.InputManager")],Ql);class lre{constructor(t,i,s,l,d){this.type=t,this.data=i,this.timestamp=s,this.modifiers=l,this.cancelable=d,this._propagationState=Da.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Da.STOPPED}shouldStopPropagation(){return(this._propagationState&Da.STOPPED)!=0}async(t){this._propagationState|=Da.PAUSED;const i=(s,l)=>{this._propagationState&=~Da.PAUSED;const d=this._resumeCallback;if(this._resumeCallback=null,d&&d(),l)throw s;return s};return(typeof t=="function"?t():t).then(s=>i(s,!1),s=>i(s,!0))}shouldPausePropagation(t){return!!(this._propagationState&Da.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}}var Da;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(Da||(Da={}));const tl={DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};function ure(e){return e&&typeof e.highlight=="function"}const Xg={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},xu=new Jc({id:"zoom-to-feature",title:"{messages.zoom}",className:Xg.iconZoom}),uS=new Jc({id:"remove-selected-feature",title:"{messages.remove}",className:Xg.iconTrash}),lc=new Jc({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:Xg.iconZoom}),uc=new Jc({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:Xg.iconBrowseClusteredFeatures}),hre="esri.widgets.Popup.PopupViewModel",ul=Se.getLogger(hre),cre=function(e){const{event:t,view:i}=e,{action:s}=t,l=i&&i.popup;if(!s)return Promise.reject(new re("trigger-action:missing-arguments","Event has no action"));if(!l)return Promise.reject(new re("trigger-action:missing-arguments","view.popup is missing"));const{disabled:d,id:y}=s;if(!y)return Promise.reject(new re("trigger-action:invalid-action","action.id is missing"));if(d)return Promise.reject(new re("trigger-action:invalid-action","Action is disabled"));if(y===xu.id)return dre(l.viewModel).catch(Y2);if(y===lc.id)return fre(l.viewModel);if(y===uc.id)return l.featureMenuOpen=!l.featureMenuOpen,l.viewModel.browseClusterEnabled=!l.viewModel.browseClusterEnabled,Promise.resolve();if(l.viewModel.browseClusterEnabled=!1,y===uS.id){l.close();const{selectedFeature:g}=l;if(!g)return Promise.reject(new re(`trigger-action:${uS.id}`,"selectedFeature is required",{selectedFeature:g}));const{sourceLayer:_}=g;return _?_.remove(g):i.graphics.remove(g),Promise.resolve()}return Promise.resolve()};function SC(e){const{selectedFeature:t,location:i,view:s}=e;return s?s.type==="3d"?t||i:e.get("selectedFeature.geometry")||i:null}function pre(e,t){if((t==null?void 0:t.type)!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const i=t.getViewForGraphic(e);if(i&&"whenGraphicBounds"in i){let s=!1;return i.whenGraphicBounds(e,{useViewElevation:!0}).then(l=>{s=!l||!l.boundingBox||l.boundingBox[0]===l.boundingBox[3]&&l.boundingBox[1]===l.boundingBox[4]&&l.boundingBox[2]===l.boundingBox[5]}).catch(()=>{const l=new re("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:e});ul.error(l)}),s}return!0}async function dre(e){const{location:t,selectedFeature:i,view:s,zoomFactor:l}=e,d=SC(e);if(!d){const M=new re("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:d,view:s});return ul.error(M),Promise.reject(M)}const y=s.scale/l,g=e.get("selectedFeature.geometry")||t,_=g&&g.type==="point"&&pre(i,s);xu.active=!0,xu.disabled=!0;try{await e.view.goTo({target:d,scale:_?y:void 0})}finally{xu.active=!1,xu.disabled=!1,e.zoomToLocation=null,_&&(e.location=g)}}async function fre(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const g=new re("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw ul.error(g),g}if(!t.isAggregate){const g=new re("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw ul.error(g),g}const s=t.sourceLayer,l=await i.whenLayerView(s),d=l.createQuery();d.aggregateIds=[t.getObjectId()],lc.active=!0,lc.disabled=!0;const{extent:y}=await l.queryExtent(d);await i.goTo({target:y}),lc.active=!1,lc.disabled=!1}async function yre(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const g=new re("displayClusterExtent:invalid-view","View must be 2d MapView.",{view:i});throw ul.error(g),g}if(!t.isAggregate){const g=new re("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw ul.error(g),g}const s=t.sourceLayer,l=await i.whenLayerView(s),d=l.createQuery();d.aggregateIds=[t.getObjectId()];const{extent:y}=await l.queryExtent(d);e.selectedClusterBoundaryFeature.geometry=y,i.graphics.add(e.selectedClusterBoundaryFeature)}async function mre(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const g=new re("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:i});throw ul.error(g),g}if(!t.isAggregate){const g=new re("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw ul.error(g),g}const s=t.sourceLayer,l=await i.whenLayerView(s),d=l.createQuery();d.aggregateIds=[t.getObjectId()],uc.active=!0,uc.disabled=!0;const{features:y}=await l.queryFeatures(d);uc.active=!1,uc.disabled=!1,i.popup.open({features:[t].concat(y),featureMenuOpen:!0})}function gre(e){var t;(t=e.selectedFeature)!=null&&t.isAggregate&&(e.features=e.features.filter(i=>i.isAggregate))}const MC=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:s}=this;return this.goToOverride?this.goToOverride(s,i):s.goTo(i.target,i.options)}};return b([S()],t.prototype,"goToOverride",void 0),b([S()],t.prototype,"view",void 0),t=b([H("esri.widgets.support.GoTo")],t),t},Q0=qe.ofType({key:"type",defaultKeyValue:"button",base:vg,typeMap:{button:Jc,toggle:rT}}),vre=()=>[xu.clone()],bre=()=>[lc.clone(),uc.clone()],$C="esri.widgets.Popup.PopupViewModel",hS=Se.getLogger($C);let ct=class extends MC(vC){constructor(e){super(e),this._handles=new yr,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new Q0,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new rs({symbol:new eh({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}initialize(){this._handles.add([ri(this,["autoOpenEnabled","view"],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),Nt(this,["highlightEnabled","selectedFeature","visible","view"],()=>this._highlightFeature()),Nt(this,"view.animation.state",e=>this._animationStateChange(e)),Nt(this,"location",e=>this._locationChange(e)),Nt(this,"selectedFeature",e=>this._selectedFeatureChange(e)),Nt(this,["selectedFeatureIndex","featureCount","featuresPerPage"],()=>this._selectedFeatureIndexChange()),Nt(this,["featurePage","selectedFeatureIndex","featureCount","featuresPerPage, featureViewModels"],()=>this._setGraphicOnFeatureViewModels()),Nt(this,"featureViewModels",()=>this._featureViewModelsChange()),this.on("trigger-action",e=>cre({event:e,view:this.view})),e3(this,"waitingForResult",()=>this._waitingForResultChange(),!0),Nt(this,["features","view","view.map","view.spatialReference"],()=>this._updateFeatureVMs()),Nt(this,["view.scale"],this._viewScaleChange),e3(this,"visible",()=>this.browseClusterEnabled=!1),Nt(this,"browseClusterEnabled",e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new Q0;e.removeAll();const{actions:t,defaultActions:i,defaultPopupTemplateEnabled:s,includeDefaultActions:l,selectedFeature:d}=this,y=l?i.concat(t):t,g=d&&(typeof d.getEffectivePopupTemplate=="function"&&d.getEffectivePopupTemplate(s)||d.popupTemplate),_=g&&g.actions,M=g&&g.overwriteActions?_:_?_.concat(y):y;return M&&M.filter(Boolean).forEach(E=>e.add(E)),e}get defaultActions(){var e;const t=this._get("defaultActions")||new Q0;return t.removeAll(),t.addMany((e=this.selectedFeature)!=null&&e.isAggregate?bre():vre()),t}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:i,promiseCount:s,selectedFeatureIndex:l}=this,d=s&&t.length;d&&i&&l===-1?this.selectedFeatureIndex=0:d&&l!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=Qa(e)),this._set("location",e)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const i=l=>{this._pendingPromises.has(t)&&this._updateFeatures(l),this._updatePendingPromises(t)},s=()=>this._updatePendingPromises(t);t.then(i,s)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=SC(this);if(!t){const i=new re("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return hS.error(i),Promise.reject(i)}return this.callGoTo({target:{target:t,scale:e.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null})}fetchFeatures(e,t){const{view:i}=this;if(!i||!e){const s=new re("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:i});return hS.error(s),Promise.reject(s)}return i.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t=Te(J({updateLocationEnabled:!1,promises:[],fetchFeatures:!1},e),{visible:!0}),{fetchFeatures:i}=t;delete t.fetchFeatures,i&&this._setFetchFeaturesPromises(t.location);const s=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const l of s)delete t[l];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){gre(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){await yre(this),await mre(this)}_animationStateChange(e){this.zoomToLocation||(xu.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var e;const t=(e=this.view)==null?void 0:e.graphics;t&&(t.remove(this.selectedClusterBoundaryFeature),t.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){var e;if((e=this.selectedFeature)!=null&&e.isAggregate)return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.browseClusterEnabled=!1,this.features=[this.selectedFeature])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:i}=this;i&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:i,featuresPerPage:s,featureViewModels:l}=this;if(i===null)return;const d=((i-1)*s+t)%t,y=d+s;l.slice(d,y).forEach((g,_)=>{g&&!g.graphic&&(g.graphic=e[d+_])})}async _selectedFeatureChange(e){if(!e)return;const{location:t,updateLocationEnabled:i,view:s}=this;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(s.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),e.isAggregate?void 0:(e.symbol=await ere(e),this._selectedClusterFeature=e,void s.graphics.add(this._selectedClusterFeature));!i&&t||!e.geometry?i&&!e.geometry&&this.centerAtLocation().then(()=>{this.location=s.center.clone()}):this.location=this._getPointFromGeometry(e.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:i,promisesPerLayerView:s}=t,l=Promise.resolve(i),d=s.map(y=>y.promise);this.promises=[l,...d]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:i}=this;if(e!=null&&e.isAggregate||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const s=i.slice(0),l=[];t.forEach((d,y)=>{if(!d)return;let g=null;if(s.some((E,O)=>(E&&E.graphic===d&&(g=E,s.splice(O,1)),!!g)),g)l[y]=g;else{var _,M;const E=new S_({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(_=this.view)==null?void 0:_.spatialReference,graphic:d===e?d:null,map:(M=this.view)==null?void 0:M.map,view:this.view});l[y]=E}}),s.forEach(d=>d&&!d.destroyed&&d.destroy()),this._set("featureViewModels",l)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:i}=this;if(t.remove(e),i&&this.view){const s=this.view.on("click",l=>{l.pointerType==="mouse"&&l.button!==0||this._fetchFeaturesAndOpen(l)},tl.WIDGET);t.add(s,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const i=new AbortController,{signal:s}=i;this._fetchFeaturesController=i,this.notifyChange("waitingForResult");const l=this.fetchFeatures(e,{signal:s,event:t});return l.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),l}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:i}=e,{view:s}=this;this._fetchFeaturesWithController(t,e).then(l=>{const{clientOnlyGraphics:d,promisesPerLayerView:y,location:g}=l,_=[Promise.resolve(d),...y.map(M=>M.promise)];return s.popup.open({location:g||i,promises:_}),l})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(e){return ce(e)?null:e.type==="point"?e:e.type==="extent"?e.center:e.type==="polygon"?e.centroid:e.type==="multipoint"||e.type==="polyline"?e.extent.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}async _highlightFeature(){const e="highlight";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:i,view:s,visible:l}=this;if(!(t&&s&&i&&l))return;let{layer:d,sourceLayer:y}=t;if((y==null?void 0:y.type)!=="map-notes"&&(y==null?void 0:y.type)!=="subtype-group"||(d=y),!(d&&d instanceof yg))return;const g=this._getLayerView(s,d);this._highlightPromise=g;const _=await g;if(!(_&&ure(_)&&this._highlightPromise===g&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const M=d.type==="imagery"?void 0:"objectIdField"in d&&d.objectIdField,E=t.attributes,O=E&&M&&E[M],P=_.highlight(O||t);this._handles.add(P,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const i=e.filter(s=>t.indexOf(s)===-1);this.features=t.concat(i)}};b([S()],ct.prototype,"featurePage",void 0),b([S()],ct.prototype,"isLoadingFeature",null),b([S({type:Q0})],ct.prototype,"actions",void 0),b([S({readOnly:!0})],ct.prototype,"active",null),b([S({readOnly:!0})],ct.prototype,"allActions",null),b([S({type:Boolean})],ct.prototype,"defaultPopupTemplateEnabled",void 0),b([S()],ct.prototype,"autoCloseEnabled",void 0),b([S()],ct.prototype,"autoOpenEnabled",void 0),b([S()],ct.prototype,"browseClusterEnabled",void 0),b([S()],ct.prototype,"content",void 0),b([S({type:Q0,readOnly:!0})],ct.prototype,"defaultActions",null),b([S({readOnly:!0})],ct.prototype,"featureCount",null),b([S()],ct.prototype,"features",null),b([S()],ct.prototype,"featuresPerPage",void 0),b([S()],ct.prototype,"featureViewModelAbilities",void 0),b([S({readOnly:!0})],ct.prototype,"featureViewModels",void 0),b([S()],ct.prototype,"highlightEnabled",void 0),b([S()],ct.prototype,"includeDefaultActions",void 0),b([S({type:Be})],ct.prototype,"location",null),b([S({readOnly:!0})],ct.prototype,"pendingPromisesCount",null),b([S({readOnly:!0})],ct.prototype,"selectedClusterBoundaryFeature",void 0),b([S({readOnly:!0})],ct.prototype,"waitingForResult",null),b([S({readOnly:!0})],ct.prototype,"promiseCount",null),b([S()],ct.prototype,"promises",null),b([S({value:null,readOnly:!0})],ct.prototype,"selectedFeature",null),b([S({value:-1})],ct.prototype,"selectedFeatureIndex",null),b([S({readOnly:!0})],ct.prototype,"selectedFeatureViewModel",null),b([S({readOnly:!0})],ct.prototype,"state",null),b([S()],ct.prototype,"title",void 0),b([S()],ct.prototype,"updateLocationEnabled",void 0),b([S()],ct.prototype,"view",void 0),b([S()],ct.prototype,"visible",void 0),b([S()],ct.prototype,"zoomFactor",void 0),b([S()],ct.prototype,"zoomToLocation",void 0),b([S()],ct.prototype,"centerAtLocation",null),ct=b([H($C)],ct);const IC=ct,cS="selected-index",wre=0,pS="popup-spinner",we={iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button"},dS={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},fS="esri-popup";function so(e,t){return t===void 0?`${fS}__${e}`:`${fS}__${e}-${t}`}const TC="esri.widgets.Popup",yS=Se.getLogger(TC),mS={closeButton:!0,featureNavigation:!0};let ze=class extends gC(mr){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new yr,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([i])=>{i!=null&&i.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=M4(()=>this._displaySpinner(),wre),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new IC,this.visible=null,this.visibleElements=J({},mS),this._addSelectedFeatureIndexHandle(),this.own([Nt(this,"viewModel.screenLocation",()=>this._positionContainer()),Nt(this,["viewModel.active","dockEnabled"],()=>this._toggleScreenLocationEnabled()),Nt(this,"viewModel.screenLocation",(i,s)=>{!!i!=!!s&&this.reposition()}),Nt(this,["viewModel.view.padding","viewModel.view.size","viewModel.active","viewModel.location","alignment"],()=>this.reposition()),Nt(this,"spinnerEnabled",i=>this._spinnerEnabledChange(i)),Nt(this,"viewModel.view.size",(i,s)=>this._updateDockEnabledForViewSize(i,s)),Nt(this,"viewModel.view",(i,s)=>this._viewChange(i,s)),Nt(this,"viewModel.view.ready",(i,s)=>this._viewReadyChange(i,s)),Nt(this,["viewModel.waitingForResult","viewModel.location"],()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),Nt(this,["selectedFeatureWidget.viewModel.title","selectedFeatureWidget.viewModel.state"],()=>this._setTitleFromFeatureWidget()),Nt(this,["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.state"],()=>this._setContentFromFeatureWidget()),e3(this,"collapsed",()=>{var i,s;((i=this.viewModel)==null||(s=i.view)==null?void 0:s.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),Eg(this,"viewModel.allActions","change",()=>this._watchActions()),ri(this,"viewModel.allActions",()=>this._watchActions()),Nt(this,"viewModel.featureViewModels",()=>this._featureMenuViewportScrollTop())])}destroy(){var e,t;this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){var e,t,i,s,l,d,y;return!!(this.selectedFeatureWidget?((e=this.selectedFeatureWidget)==null||(t=e.viewModel)==null?void 0:t.waitingForContent)||((i=this.selectedFeatureWidget)==null||(s=i.viewModel)==null?void 0:s.state)==="error"||((l=this.selectedFeatureWidget)==null||(d=l.viewModel)==null?void 0:d.content):(y=this.viewModel)==null?void 0:y.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||dS}set dockOptions(e){const t=J({},dS),i=this.get("viewModel.view.breakpoints"),s={};i&&(s.width=i.xsmall,s.height=i.xsmall);const l=J(J({},t),e),d=J(J({},t.breakpoint),s),{breakpoint:y}=l;y===!0?l.breakpoint=d:typeof y=="object"&&(l.breakpoint=J(J({},d),y)),this._set("dockOptions",l),this._setCurrentDockPosition(),this.reposition()}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:i}=this,{selectedFeatureViewModel:s}=this.viewModel,l=Te(J({},t),{title:!1});return s?(e?(e.viewModel=s,e.visibleElements=l):this._feature=new jie({headingLevel:i+1,viewModel:s,visibleElements:l}),this._feature):null}castVisibleElements(e){return J(J({},mS),e)}blur(){const{active:e}=this.viewModel;e||yS.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||yS.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var t,i;this._handles.remove(cS);const s=!!e&&!!e.featureMenuOpen,l=!!e&&!!e.actionsMenuOpen,d={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:l,featureMenuOpen:s};((t=this.viewModel)==null||(i=t.view)==null?void 0:i.widthBreakpoint)==="xsmall"&&(d.collapsed=!0),this.set(d),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){this.viewModel.triggerAction(e)}render(){var e,t,i,s;const{actionsMenuOpen:l,dockEnabled:d,featureMenuVisible:y,dividedActions:g,currentAlignment:_,currentDockPosition:M}=this,{active:E}=this.viewModel,{menuActions:O}=g,P=E&&O.length>1&&l,j=E&&d,R=E&&!d,z=(e=this.selectedFeature)==null||(t=e.layer)==null?void 0:t.title,q=(i=this.selectedFeature)==null||(s=i.layer)==null?void 0:s.id,Y={[we.alignTopCenter]:_==="top-center",[we.alignBottomCenter]:_==="bottom-center",[we.alignTopLeft]:_==="top-left",[we.alignBottomLeft]:_==="bottom-left",[we.alignTopRight]:_==="top-right",[we.alignBottomRight]:_==="bottom-right",[we.isDocked]:j,[we.shadow]:R,[we.isDockedTopLeft]:M==="top-left",[we.isDockedTopCenter]:M==="top-center",[we.isDockedTopRight]:M==="top-right",[we.isDockedBottomLeft]:M==="bottom-left",[we.isDockedBottomCenter]:M==="bottom-center",[we.isDockedBottomRight]:M==="bottom-right",[we.isFeatureMenuOpen]:y,[we.isActionsMenuOpen]:P};return oe("div",{class:this.classes(we.base,Y),role:"presentation","data-layer-title":z,"data-layer-id":q,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},E?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return oe("span",{"aria-hidden":"true",class:this.classes(we.icon,we.iconLoading,we.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?oe("div",{key:so("loading-container"),role:"presentation",class:we.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=Ka(this.container),t={[we.iconRightTriangleArrow]:e,[we.paginationPreviousIconRTL]:e,[we.iconLeftTriangleArrow]:!e,[we.paginationPreviousIconLTR]:!e};return oe("span",{"aria-hidden":"true",class:this.classes(we.icon,t)})}renderPreviousButton(){const{messages:e}=this;return oe("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(we.button,we.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=Ka(this.container),t={[we.iconLeftTriangleArrow]:e,[we.paginationNextIconRTL]:e,[we.iconRightTriangleArrow]:!e,[we.paginationNextIconLTR]:!e};return oe("span",{"aria-hidden":"true",class:this.classes(we.icon,t)})}renderNextButton(){const{messages:e}=this;return oe("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(we.button,we.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:i}=this,{featureCount:s,selectedFeatureIndex:l}=this.viewModel;return oe("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(we.button,we.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":i.menu,title:i.menu},this._getPageText(s,l))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),i={[we.iconUndock]:e,[we.iconDock]:!e,[we.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[we.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[we.iconDockToTop]:!e&&t==="top-center",[we.iconDockToBottom]:!e&&t==="bottom-center"};return oe("span",{"aria-hidden":"true",class:this.classes(i,we.icon)})}renderDockButton(){var e,t,i;const{dockEnabled:s,messages:l}=this,d=(e=this.viewModel)==null||(t=e.view)==null?void 0:t.widthBreakpoint,y=s?l.undock:l.dock;return d!=="xsmall"&&(i=this.dockOptions)!=null&&i.buttonEnabled?oe("div",{role:"button","aria-label":y,title:y,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(we.button,we.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:i,contentCollapsed:s,messagesCommon:l}=this,d={[we.headerContainerButton]:i},y=oe(N4,{level:this.headingLevel,class:we.headerTitle,innerHTML:e}),g=i?oe("button",{key:`${e}--collapsible`,id:t,title:s?l.expand:l.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(we.headerContainer,d),"aria-expanded":s?"false":"true",onclick:this._toggleCollapsed,type:"button"},y):oe("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(we.headerContainer,d)},y);return e?g:null}renderCloseIcon(){return oe("span",{"aria-hidden":"true",class:this.classes(we.icon,we.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?oe("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:we.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return oe("header",{class:we.header},this.renderTitle(),oe("div",{class:we.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:i}=this,{content:s}=this.viewModel;return t&&!i?oe("article",{key:s,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:we.content},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:s,messagesCommon:l}=this,d=i?l.close:l.open,{menuActions:y}=s;return y.length?oe("div",{key:so("actions-menu-button"),class:this.classes(we.button,we.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":i?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":d,title:d},oe("span",{"aria-hidden":"true",class:we.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:s}=this,{menuActions:l}=s;return l.length&&i?oe("ul",{id:e,role:"menu","aria-labelledby":t,key:so("actions"),class:we.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},l.toArray().map(d=>this.renderAction({action:d,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return!!e.length&&e.toArray().map(t=>this.renderAction({action:t,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,i=!!e.length,s=!!t.length;return i||s?oe("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":s.toString(),class:we.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?oe("section",{key:so("navigation"),class:this.classes(we.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:i,menuActions:s}=t,l=!!i.length,d=!!s.length,y={[we.footerHasPagination]:e,[we.footerHasActions]:l,[we.footerHasActionsMenu]:d};return e||l?oe("div",{key:so("feature-buttons"),class:this.classes(we.footer,y)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:i}=this.viewModel,s=yo(e.selectedFeatures,{total:t.length});return oe("section",{key:so("menu"),class:we.featureMenu},oe("strong",{class:we.featureMenuHeader},s),oe("nav",{bind:this,class:we.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:Yw},this.renderFeatureMenu(),oe("div",{class:we.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?oe("div",{class:we.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:oe("div",{key:so("pointer"),class:we.pointer,role:"presentation"},oe("div",{class:this.classes(we.pointerDirection,we.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:i,titleId:s,contentId:l,collapsible:d,hasContent:y,contentCollapsed:g,visibleElements:_}=this,{title:M}=this.viewModel,E=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right",O=t==="top-left"||t==="top-center"||t==="top-right"||i==="bottom-left"||i==="bottom-center"||i==="bottom-right",P={[we.shadow]:e,[we.isCollapsible]:d,[we.isCollapsed]:g};return oe("div",{class:this.classes(we.main,we.widget,P),tabIndex:_.closeButton?null:-1,role:"dialog","aria-labelledby":M?s:"","aria-describedby":y&&!g?l:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},E?this.renderFooter():null,E?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),O?this.renderFooter():null,O?this.renderFeatureMenuContainer():null)}renderContent(){var e;const t=(e=this.viewModel)==null?void 0:e.content;return t?typeof t=="string"?oe("div",{key:t,innerHTML:t}):this.renderNodeContent(t):null}renderActionText(e){return oe("span",{key:"text",class:we.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),i=this._getActionImage(e),s={[we.iconLoading]:e.active,[we.rotating]:e.active,[we.icon]:!!t,[we.actionImage]:!e.active&&!!i};return t&&(s[t]=!e.active),oe("span",{key:"icon","aria-hidden":"true",class:this.classes(we.icon,s),styles:this._getIconStyles(i)})}renderAction(e){const{action:t,type:i}=e,s=this._getActionTitle(t),l={[we.action]:t.type!=="toggle",[we.actionToggle]:t.type==="toggle",[we.actionToggleOn]:t.type==="toggle"&&t.value,[we.buttonDisabled]:t.disabled},d=[this.renderActionIcon(t),this.renderActionText(s)],y=i==="menu-item"?oe("li",{key:t.uid,role:"menuitem",tabIndex:0,title:s,"aria-label":s,class:this.classes(we.button,l),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},d):oe("div",{key:t.uid,role:"button",tabIndex:0,title:s,"aria-label":s,class:this.classes(we.button,l),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},d);return t.visible?y:null}renderFeatureMenuItem(e,t){const{messages:i,messagesCommon:s}=this,{selectedFeatureIndex:l,selectedFeatureViewModel:d}=this.viewModel,y=e===d,g={[we.featureMenuSelected]:y},_=y?oe("span",{key:so(`feature-menu-selected-feature-${l}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:we.iconCheckMark}):null,M=oe("span",{innerHTML:e.title||s.untitled});return oe("li",{role:"menuitem",tabIndex:-1,key:so(`feature-menu-feature-${l}`),class:this.classes(g,we.featureMenuItem),bind:this,"data-feature-index":t,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},oe("span",{class:we.featureMenuTitle},M,_))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?oe("ol",{class:we.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(i=>!!i.graphic).map((i,s)=>this.renderFeatureMenuItem(i,s))):null}_getActionTitle(e){const{messages:t,selectedFeature:i,messagesCommon:s}=this,{id:l}=e,d=i==null?void 0:i.attributes,y=l==="zoom-to-feature"?yo(e.title,{messages:t}):l==="remove-selected-feature"?yo(e.title,{messages:s}):l==="zoom-to-clustered-features"||l==="browse-clustered-features"?yo(e.title,{messages:t}):e.title;return y&&d?yo(y,d):y}_getActionClass(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{className:s,image:l}=e,d=l||s?s:we.iconDefaultAction;return d&&i?yo(d,i):d}_getActionImage(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{image:s}=e;return s&&i?yo(s,i):s}_createFeatureUpdatedAnimation(){return bB("enter",we.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const i=Math.round(e);return Math.max(t?i-1:i,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(i=>{this._handles.add(Nt(i,["uid","active","className","disabled","id","title","image","visible"],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(d=>d.visible),i=this._getInlineActionCount(),s=i===null,l=i===0;return{inlineActions:s?t.slice(0):l?new qe:t.slice(0,i),menuActions:s?new qe:l?t.slice(0):t.slice(i)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:e,messagesCommon:t}=this;var i,s;e&&(this.viewModel.title=((i=e.viewModel)==null?void 0:i.state)==="error"?t.errorMessage:((s=e.viewModel)==null?void 0:s.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){ru(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){ru(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_handleFeatureMenuItemKeyup(e){const t=ru(e),{_featureMenuNode:i}=this,s=e.currentTarget["data-feature-index"];if(!i)return;const l=i.querySelectorAll("li"),d=l.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),l[l.length-1].focus()):(e.stopPropagation(),l[0].focus()):(e.stopPropagation(),l[(s+1+d)%d].focus()):(e.stopPropagation(),l[(s-1+d)%d].focus())}_handleActionMenuItemKeyup(e){const t=ru(e),{_actionsMenuNode:i}=this,s=e.currentTarget.dataset.actionUid,{menuActions:l}=this.dividedActions,d=l.findIndex(_=>_.uid===s);if(!i)return;const y=i.querySelectorAll("li"),g=y.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),y[y.length-1].focus()):(e.stopPropagation(),y[0].focus()):(e.stopPropagation(),y[(d+1+g)%g].focus()):(e.stopPropagation(),y[(d-1+g)%g].focus())}_handleMainKeyup(e){const t=ru(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:i}=this.viewModel;i?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e.shouldFocus&&(await L5(()=>{var t;return((t=this.viewModel)==null?void 0:t.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=Nt(this,"viewModel.selectedFeatureIndex",(t,i)=>this._selectedFeatureIndexUpdated(t,i));this._handles.add(e,cS)}_selectedFeatureIndexUpdated(e,t){const{featureCount:i}=this;i&&e!==t&&e!==-1&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:i,screenLocation:s,side:l,view:d}=e;if(isNaN(i)||isNaN(t)||!d||!s)return!1;const y=d.padding;return l==="right"&&s.x+i/2>d.width-y.right||l==="left"&&s.x-i/2<y.left||l==="top"&&s.y-t<y.top||l==="bottom"&&s.y+t>d.height-y.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:i,_mainContainerNode:s,viewModel:l}=this,{screenLocation:d,view:y}=l;if(ce(d)||!y||!i)return"top-center";if(!this._isScreenLocationWithinView(d,y))return this._get("currentAlignment")||"top-center";function g(ne){return parseInt(ne.replace(/[^-\d\.]/g,""),10)}const _=s?window.getComputedStyle(s,null):null,M=_?g(_.getPropertyValue("max-height")):0,E=_?g(_.getPropertyValue("height")):0,{height:O,width:P}=i.getBoundingClientRect(),j=P+t,R=Math.max(O,M,E)+t,z=this._isOutsideView({popupHeight:R,popupWidth:j,screenLocation:d,side:"right",view:y}),q=this._isOutsideView({popupHeight:R,popupWidth:j,screenLocation:d,side:"left",view:y}),Y=this._isOutsideView({popupHeight:R,popupWidth:j,screenLocation:d,side:"top",view:y}),te=this._isOutsideView({popupHeight:R,popupWidth:j,screenLocation:d,side:"bottom",view:y});return q?Y?"bottom-right":"top-right":z?Y?"bottom-left":"top-left":Y?te?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return Ka(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var t;if(e!=="auto")return e;const i=(t=this.viewModel)==null?void 0:t.view,s=Ka(this.container)?"top-left":"top-right";if(!i)return s;const l=i.padding||{left:0,right:0,top:0,bottom:0},d=i.width-l.left-l.right,{breakpoints:y}=i;return y&&d<=y.xsmall?"bottom-center":s}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:i}=e.getBoundingClientRect(),s=this._calculatePositionStyle(t,i);s&&(e.style.top=s.top,e.style.left=s.left,e.style.bottom=s.bottom,e.style.right=s.right)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:i}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+i:e}_calculateAlignmentPosition(e,t,i,s){const{currentAlignment:l,_pointerOffsetInPx:d}=this,y=s/2,g=i.height-t,_=i.width-e,{padding:M}=this.view;return l==="bottom-center"?{top:t+d-M.top,left:e-y-M.left}:l==="top-left"?{bottom:g+d-M.bottom,right:_+d-M.right}:l==="bottom-left"?{top:t+d-M.top,right:_+d-M.right}:l==="top-right"?{bottom:g+d-M.bottom,left:e+d-M.left}:l==="bottom-right"?{top:t+d-M.top,left:e+d-M.left}:l==="top-center"?{bottom:g+d-M.bottom,left:e-y-M.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:i,view:s}=this;if(!s)return;if(i)return{left:"",top:"",right:"",bottom:""};if(ce(e)||!t)return;const l=this._calculateFullWidth(t),d=this._calculateAlignmentPosition(e.x,e.y,s,l);return d?{top:d.top!==void 0?`${d.top}px`:"auto",left:d.left!==void 0?`${d.left}px`:"auto",bottom:d.bottom!==void 0?`${d.bottom}px`:"auto",right:d.right!==void 0?`${d.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const i=this.get("viewModel.view");this._wireUpView(i)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,i){const[s,l]=e,[d,y]=t,{width:g,height:_}=i;return s<=g&&d>g||s>g&&d<=g||l<=_&&y>_||l>_&&y<=_}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},s=i.left+i.right,l=i.top+i.bottom,d=[],y=[];d[0]=e[0]-s,d[1]=e[1]-l,y[0]=t[0]-s,y[1]=t[1]-l;const{dockOptions:g}=this,_=g.breakpoint;this._dockingThresholdCrossed(d,y,_)&&this._setDockEnabledForViewSize(g),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const i=t.active&&!e;t.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(e){var t,i;const s=e.breakpoint,l=(t=this.viewModel)==null||(i=t.view)==null?void 0:i.ui;if(!l)return!1;const{width:d,height:y}=l;if(isNaN(d)||isNaN(y))return!1;const g=s.hasOwnProperty("width")&&d<=s.width,_=s.hasOwnProperty("height")&&y<=s.height;return g||_}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?yo(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,pS),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new Rie({view:e}),e.ui.add(this._spinner,{key:pS,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:i}=this.viewModel,s=i.findIndex(d=>d.uid===t),l=i.getItemAt(s);l&&l.type==="toggle"&&(l.value=!l.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(s)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};b([S({readOnly:!0})],ze.prototype,"actionsMenuId",null),b([S({readOnly:!0})],ze.prototype,"actionsMenuButtonId",null),b([S({readOnly:!0})],ze.prototype,"featureMenuId",null),b([S({readOnly:!0})],ze.prototype,"titleId",null),b([S({readOnly:!0})],ze.prototype,"contentId",null),b([S({readOnly:!0})],ze.prototype,"hasContent",null),b([S({readOnly:!0})],ze.prototype,"featureNavigationVisible",null),b([S({readOnly:!0})],ze.prototype,"collapsible",null),b([S({readOnly:!0})],ze.prototype,"featureMenuVisible",null),b([S({readOnly:!0})],ze.prototype,"contentCollapsed",null),b([S({readOnly:!0})],ze.prototype,"dividedActions",null),b([Ge("viewModel.actions")],ze.prototype,"actions",void 0),b([S()],ze.prototype,"actionsMenuOpen",null),b([S()],ze.prototype,"alignment",void 0),b([Ge("viewModel.autoCloseEnabled")],ze.prototype,"autoCloseEnabled",void 0),b([Ge("viewModel.autoOpenEnabled")],ze.prototype,"autoOpenEnabled",void 0),b([Ge("viewModel.defaultPopupTemplateEnabled")],ze.prototype,"defaultPopupTemplateEnabled",void 0),b([Ge("viewModel.content")],ze.prototype,"content",void 0),b([S()],ze.prototype,"collapsed",void 0),b([S()],ze.prototype,"collapseEnabled",void 0),b([S({readOnly:!0})],ze.prototype,"currentAlignment",null),b([S({readOnly:!0})],ze.prototype,"currentDockPosition",null),b([S()],ze.prototype,"dockOptions",null),b([S()],ze.prototype,"dockEnabled",void 0),b([Ge("viewModel.featureCount")],ze.prototype,"featureCount",void 0),b([S()],ze.prototype,"featureMenuOpen",void 0),b([Ge("viewModel.features")],ze.prototype,"features",void 0),b([Ge("viewModel.goToOverride")],ze.prototype,"goToOverride",void 0),b([S()],ze.prototype,"headingLevel",void 0),b([Ge("viewModel.highlightEnabled")],ze.prototype,"highlightEnabled",void 0),b([Ge("viewModel.location")],ze.prototype,"location",void 0),b([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ze.prototype,"label",void 0),b([S()],ze.prototype,"maxInlineActions",void 0),b([S(),kr("esri/widgets/Popup/t9n/Popup")],ze.prototype,"messages",void 0),b([S(),kr("esri/t9n/common")],ze.prototype,"messagesCommon",void 0),b([Ge("viewModel.promises")],ze.prototype,"promises",void 0),b([Ge("viewModel.selectedFeature")],ze.prototype,"selectedFeature",void 0),b([Ge("viewModel.selectedFeatureIndex")],ze.prototype,"selectedFeatureIndex",void 0),b([S({readOnly:!0})],ze.prototype,"selectedFeatureWidget",null),b([S()],ze.prototype,"spinnerEnabled",void 0),b([Ge("viewModel.title")],ze.prototype,"title",void 0),b([Ge("viewModel.updateLocationEnabled")],ze.prototype,"updateLocationEnabled",void 0),b([Ge("viewModel.view")],ze.prototype,"view",void 0),b([S({type:IC}),UW(["triggerAction","trigger-action"])],ze.prototype,"viewModel",void 0),b([Ge("viewModel.visible")],ze.prototype,"visible",void 0),b([S()],ze.prototype,"visibleElements",void 0),b([yt("visibleElements")],ze.prototype,"castVisibleElements",null),b([bs()],ze.prototype,"_close",null),b([bs()],ze.prototype,"_toggleDockEnabled",null),b([bs()],ze.prototype,"_toggleFeatureMenu",null),b([bs()],ze.prototype,"_toggleActionsMenu",null),b([bs()],ze.prototype,"_triggerAction",null),b([bs()],ze.prototype,"_selectFeature",null),b([bs()],ze.prototype,"_next",null),b([bs()],ze.prototype,"_previous",null),ze=b([H(TC)],ze);const gS=ze,k2=[0,0];function _re(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return k2[0]=i.left+t.pageXOffset,k2[1]=i.top+t.pageYOffset,k2}function vS(e){e&&(aE(e),e.parentNode&&e.parentNode.removeChild(e))}function xre(e){const t=document.createElement("div");return e.appendChild(t),t}const Op=16,n1=750,Sre=512,Mre=2,$re=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:Op,time:n1},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([this.watch("cursor",s=>{const l=this.surface;l&&l.setAttribute("data-cursor",s)}),this.watch("interacting",s=>{const l=this.surface;l&&l.setAttribute("data-interacting",s.toString())})])}initialize(){this.handles.add(this.watch("ui",(i,s)=>this._handleUIChange(i,s))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}set container(i){const s=this._get("container");if(s===i)return;const l="dom-size";if(this.handles.remove(l),this._stopMeasuring(),s&&(s.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),vS(this.root),this._set("root",null),Ax(this.userContent,s),vS(this.userContent),this._set("userContent",null)),i){i.classList.add("esri-view");const d=document.createElement("div");d.className="esri-view-user-storage",Ax(i,d),i.appendChild(d),this._set("userContent",d);const y=document.createElement("div");y.className="esri-view-root",i.insertBefore(y,i.firstChild),this._set("root",y);const g=document.createElement("div");g.className="esri-view-surface",g.setAttribute("role","application"),g.tabIndex=0,y.appendChild(g),this._set("surface",g);const _=new Vx;y.appendChild(_.surface),this._set("overlay",_),_.watch("needsRender",M=>{M&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Mc({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)}),this.forceDOMReadyCycle(),this.handles.add(Ft(()=>this.size,M=>{const[E,O]=M,P="esri-view-surface--inset-outline";E>=document.body.clientWidth||O>=document.body.clientHeight?g.classList.add(P):g.classList.remove(P)},Gn),l),this._set("container",i),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get popup(){return this._get("popup")||new gS({view:this})}set popup(i){const s=this._get("popup");s&&s!==i&&s.destroy(),this._set("popup",i)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(i,s,l){const d=this.position;return i-=d[0],s-=d[1],l?(l[0]=i,l[1]=s):l=[i,s],l}containerToPage(i,s,l){const d=this.position;return i+=d[0],s+=d[1],l?(l[0]=i,l[1]=s):l=[i,s],l}_handleUIChange(i,s){s&&(this.handles.remove("ui"),s.destroy()),i&&this._wireUI(i),this._set("ui",i)}_wireUI(i){this.handles.remove("ui"),i&&(i.view=this,this.handles.add([Ft(()=>this.root,s=>{i.container=s?xre(s):null},Gn),Ft(()=>this.popup,(s,l)=>{const d="popup",y="manual";l&&i.remove(l,d),s&&(s.view=i.view,i.add(s,{key:d,position:y}))},Gn)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=Op,i.time=n1,this.handles.add([(()=>{const s=()=>{i.freq=Op,i.time=n1};return window.addEventListener("resize",s),{remove(){window.removeEventListener("resize",s)}}})(),Mc({prepare:s=>{const l=this._measure(),d=this._freqInfo;if(d.time+=s.deltaTime,l&&(d.freq=Op,this._get("resizing")||this._set("resizing",!0)),d.time<d.freq)return;d.time=0;const y=this._position();d.freq=y||l?Op:Math.min(n1,d.freq*Mre),!l&&d.freq>=Sre&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,s=i?i.clientWidth:0,l=i?i.clientHeight:0;if(s===0||l===0)return this.suspended||this._set("suspended",!0),!1;const d=this.width,y=this.height;return s===d&&l===y?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",s),this._set("height",l),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:d,oldHeight:y,width:s,height:l}),!0)}_position(){const i=this.container,s=this.position,l=_re(i);return(!s||l[0]!==s[0]||l[1]!==s[1])&&(this._set("position",[l[0],l[1]]),!0)}forceDOMReadyCycle(){}};return b([S({value:null,cast:i=>w4(i)})],t.prototype,"container",null),b([S({readOnly:!0})],t.prototype,"focused",null),b([S({readOnly:!0})],t.prototype,"height",void 0),b([S({type:gS})],t.prototype,"popup",null),b([S({type:Vx})],t.prototype,"overlay",void 0),b([S({readOnly:!0})],t.prototype,"position",void 0),b([S({readOnly:!0})],t.prototype,"resizing",void 0),b([S({readOnly:!0})],t.prototype,"root",void 0),b([S({value:null,readOnly:!0})],t.prototype,"size",null),b([S({readOnly:!0})],t.prototype,"surface",void 0),b([S({readOnly:!0})],t.prototype,"suspended",void 0),b([S()],t.prototype,"ui",void 0),b([S({readOnly:!0})],t.prototype,"userContent",void 0),b([S({readOnly:!0})],t.prototype,"width",void 0),b([S()],t.prototype,"widthBreakpoint",void 0),t=b([H("esri.views.DOMContainer")],t),t},Ire=e=>{let t=class extends e{async fetchPopupFeatures(i,s){await this.when();const{location:l,queryArea:d,layerViewsAndGraphics:y,clientOnlyGraphics:g}=await this._prepareFetchPopupFeatures(i,s),_=Promise.resolve(g),M=this._queryLayerPopupFeatures(d,y,s),E=M.map(O=>O.promise);return{location:l,clientOnlyGraphics:g,allGraphicsPromise:BN([_,...E]).then(O=>Array.from(new Set(O.flat()))),promisesPerLayerView:M}}_queryLayerPopupFeatures(i,s,l){return s.map(({layerView:d,graphics:y})=>{const g={clientGraphics:y,event:X(l)?l.event:null,signal:X(l)?l.signal:null,defaultPopupTemplateEnabled:!!X(l)&&!!l.defaultPopupTemplateEnabled},_=d.fetchPopupFeatures(i,g);return{layerView:d,promise:_}})}_isValidPopupGraphic(i,s){return i&&!!i.getEffectivePopupTemplate(X(s)&&s.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,s){const{clientGraphics:l,queryArea:d,location:y}=await this._popupHitTestGraphics(i,s),g=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:_,clientOnlyGraphics:M}=this._graphicsPerFetchPopupLayerView(l,g);return{clientOnlyGraphics:M,layerViewsAndGraphics:_,queryArea:d,location:y}}async _popupHitTestGraphics(i,s){const{results:l,mapPoint:d}=await this.popupHitTest(i),y=l.filter(_=>this._isValidPopupGraphic(_.graphic,s)),g=y.length?y[0].mapPoint:null;return{clientGraphics:y.map(_=>_.graphic),queryArea:d,location:d||g}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(s=>{this._isValidPopupLayerView(s)&&i.push(s)}),X(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return X(i)&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,s){const l=[],d=new Map,y=s.map(g=>{const _=[];return"layer"in g?d.set(g.layer,_):d.set(g.graphics,_),{layerView:g,graphics:_}});for(const g of i){const _=d.get(g.layer)||d.get(g.sourceLayer)||null;_?_.push(g):l.push(g)}return{layerViewsAndGraphics:y,clientOnlyGraphics:l}}};return t=b([H("esri.views.PopupView")],t),t};Se.getLogger("esri.core.support.OwningCollection");let ed=class extends Yu(qe){constructor(e){super(e),this.handles.add([this.on("before-add",t=>{ce(t.item)&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(qe.ofType(this.itemType.Type))(e):new qe(e)}};function B9(e,t){return{type:e,cast:h$,set(i){const s=Cu(i,this._get(t),e);s.owner=this,this._set(t,s)}}}b([S()],ed.prototype,"owner",null),ed=b([H("esri.core.support.OwningCollection")],ed);const Tre=Se.getLogger("esri.support.AnalysesCollection");let zm=class extends ed{constructor(e){super(e),this.handles.add(this.on("before-add",t=>{ce(t.item)||t.item.parent===this.owner&&(Tre.warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};zm=b([H("esri.support.AnalysesCollection")],zm);let Au=class extends ed{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};b([v5({Type:rs,ensureType:gi(rs)})],Au.prototype,"itemType",void 0),Au=b([H("esri.support.GraphicsCollection")],Au);let Ta=class extends Fe{constructor(e){super(e),this.view=null,this.baseLayerViews=new qe,this.referenceLayerViews=new qe,this._loadingHandle=ri(this,"view.map.basemap",t=>{t&&t.load().catch(()=>{})})}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var e,t;if(this.view&&this.view.suspended)return!1;const i=(e=this.view)==null||(t=e.map)==null?void 0:t.basemap;return!!i&&!!i.loaded&&(this.baseLayerViews.some(s=>s.updating)||this.referenceLayerViews.some(s=>s.updating))}};b([S({constructOnly:!0})],Ta.prototype,"view",void 0),b([S({readOnly:!0})],Ta.prototype,"baseLayerViews",void 0),b([S({readOnly:!0})],Ta.prototype,"referenceLayerViews",void 0),b([S({readOnly:!0})],Ta.prototype,"suspended",null),b([S({type:Boolean,readOnly:!0})],Ta.prototype,"updating",null),Ta=b([H("esri.views.BasemapView")],Ta);const Ere=Se.getLogger("esri.views.LayerViewManager");class kre{constructor(t,i,s){this.layer=t,this.view=i,this.layerViewImporter=s,this._controller=new AbortController,this._deferred=Vo(),this._started=!1,this.done=!1,cn(this._controller.signal,()=>{const l=new re("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(l)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:t}=this;if(!t)return;const{layer:i,view:s}=this;i.emit("layerview-destroy",{view:s,layerView:t}),s.emit("layerview-destroy",{layer:i,layerView:t}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:s}=this;this._map=s.map;try{var l,d;let y,g;if(await i.load({signal:t}),"prefetchResources"in i&&await i.prefetchResources({signal:t}),i.createLayerView)y=await i.createLayerView(s,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new re("layer:view-not-supported","No layerview implementation was found");const M=await this.layerViewImporter.importLayerView(i);mi(t),y="default"in M?new M.default({layer:i,view:s}):new M({layer:i,view:s})}const _=()=>{g=Ju(g),y.destroyed||y.destroy(),y.layer=null,y.parent=null,y.view=null,this.done=!0};g=cn(t,_),mi(t);try{await y.when()}catch(M){throw _(),M}if(!(!((l=this._map)==null||(d=l.allLayers)==null)&&d.includes(i)))return _(),void this._deferred.reject(new re("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=y,i.emit("layerview-create",{view:s,layerView:y}),s.emit("layerview-create",{layer:i,layerView:y}),this.done=!0,this._deferred.resolve(y)}catch(y){i.emit("layerview-create-error",{view:s,error:y}),s.emit("layerview-create-error",{layer:i,error:y}),this.done=!0,this._deferred.reject(new re("layerview:create-error","layerview creation failed",{layer:i,error:y}))}}}let vs=class extends Ic{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new mc,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var t;const i=(t=this.view.map)==null?void 0:t.allLayers;if(i)for(const s of i)this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>(ce(this._workPromise)&&(this._workPromise=Vo()),this.handles.remove("reschedule"),this.handles.add(Rd(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var t,i,s;const l=this.view.map;if(this._map!==l&&(this.clear(),this._map=l),ce(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const d=new gc({getCollections:()=>this._rootCollectionNames.map(_=>this.get(_)),getChildrenFunction:_=>_&&"layers"in _?_.layers:null});if(!d)return this._workPromise.resolve(),void(this._workPromise=null);for(const _ of d)this._createLayerView(_);this._refreshCollections();for(const[_,M]of this._layerLayerViewInfoMap)d.includes(_)||(this._layerLayerViewInfoMap.delete(M.layer),M.destroy());const y=d.filter(_=>_.type==="group").map(_=>_.layers),g=[l==null||(t=l.ground)==null?void 0:t.layers,l==null||(i=l.basemap)==null?void 0:i.baseLayers,l==null||(s=l.basemap)==null?void 0:s.referenceLayers,l==null?void 0:l.layers,...y].filter(_=>!!_);this.handles.add(g.map(_=>this._watchUpdatingTracking.addOnCollectionChange(()=>_,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.handles.add([$b(()=>{var e,t;return(e=this.view)==null||(t=e.map)==null?void 0:t.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Ft(()=>{const e=this.view,t=e==null?void 0:e.map;return[t==null?void 0:t.basemap,t==null?void 0:t.ground,t==null?void 0:t.layers,e==null?void 0:e.ready]},()=>this._reschedule(),Ml)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return X(this._workPromise)||this._watchUpdatingTracking.updating||sg(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new re("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,i){if(!e||!t)return void(t&&t.removeAll());let s=0;for(const l of e){const d=this._layerLayerViewInfoMap.get(l);if(!d||!d.layerView)continue;const y=d.layerView;y.layer=l,y.parent=i,t.getItemAt(s)!==y&&t.splice(s,0,y),l.layers&&this._populateLayerViewsOwners(l.layers,y.layerViews,y),s+=1}s<t.length&&t.splice(s,t.length)}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new kre(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),i=>{var s,l;i&&(ks(i)||i.name==="cancelled:layerview-create")||Ere.error(`Failed to create layerview for layer title:'${(s=e.title)!=null?s:"no title"}', id:'${(l=e.id)!=null?l:"no id"}' of type '${e.type}'.`,{layer:e,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};b([S()],vs.prototype,"_workPromise",void 0),b([S({readOnly:!0})],vs.prototype,"_watchUpdatingTracking",void 0),b([S({readOnly:!0})],vs.prototype,"_layersToLayerViews",null),b([S({readOnly:!0})],vs.prototype,"_rootCollectionNames",null),b([S()],vs.prototype,"layerViewImporter",void 0),b([S()],vs.prototype,"supportsGround",void 0),b([S({readOnly:!0})],vs.prototype,"updating",null),b([S({readOnly:!0})],vs.prototype,"updatingRemaining",null),b([S({constructOnly:!0})],vs.prototype,"view",void 0),vs=b([H("esri.views.LayerViewManager")],vs);const Are=vs;let Ur=class extends Fe{constructor(e){super(e),this.factor=1.5,this.offset=Tr(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};b([S({type:Number})],Ur.prototype,"factor",void 0),b([S({nonNullable:!0})],Ur.prototype,"offset",void 0),b([S()],Ur.prototype,"position",void 0),b([S({type:Number,range:{min:0}})],Ur.prototype,"size",void 0),b([S()],Ur.prototype,"maskUrl",void 0),b([S()],Ur.prototype,"maskEnabled",void 0),b([S()],Ur.prototype,"overlayUrl",void 0),b([S()],Ur.prototype,"overlayEnabled",void 0),b([S({readOnly:!0})],Ur.prototype,"version",null),b([S({type:Boolean})],Ur.prototype,"visible",void 0),Ur=b([H("esri.views.Magnifier")],Ur);const EC=Ur;let xy=class extends Fe{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,i){return this.running=!0,new Promise((s,l)=>this._tasks.push(new bS(s,l,e,t,i)))}unshift(e,t,i){return this.running=!0,new Promise((s,l)=>this._tasks.unshift(new bS(s,l,e,t,i)))}_process(e){if(this._tasks.length===0)return!1;const t=this._tasks.shift();try{const i=Bn(t.signal);if(i&&!t.abortCallback)t.reject(yi());else{const s=i?t.abortCallback(yi()):t.callback(e);Bo(s)?s.then(t.resolve,t.reject):t.resolve(s)}}catch(i){t.reject(i)}return this.running=this._tasks.length>0,!0}cancelAll(){const e=yi();for(const t of this._tasks)if(t.abortCallback){const i=t.abortCallback(e);t.resolve(i)}else t.reject(e);this._tasks.length=0,this.running=!1}};b([S()],xy.prototype,"running",void 0),xy=b([H("esri.layers.support.PromiseQueue")],xy);class bS{constructor(t,i,s,l,d){this.resolve=t,this.reject=i,this.callback=s,this.signal=l,this.abortCallback=d}}let I0=class extends Fe{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};b([S()],I0.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),b([S()],I0.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),I0=b([H("esri.views.support.DebugFlags")],I0);const Ore=new I0,Cre=Se.getLogger("esri.views.support.Scheduler");var pt;(function(e){e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="cloud generator",e[e.TEST_PRIO=1]="TEST_PRIO"})(pt||(pt={}));const Rn=0,wS=new Map([[pt.RESOURCE_CONTROLLER,Rn],[pt.SLIDE,Rn],[pt.STREAM_DATA_LOADER,Rn],[pt.ELEVATION_QUERY,Rn],[pt.TERRAIN_SURFACE,1],[pt.SURFACE_GEOMETRY_UPDATES,1],[pt.GRAPHICS_CORE,2],[pt.I3S_CONTROLLER,2],[pt.POINT_CLOUD_LAYER,2],[pt.FEATURE_TILE_FETCHER,2],[pt.OVERLAY,4],[pt.STAGE,4],[pt.GRAPHICS_DECONFLICTOR,4],[pt.FILTER_VISIBILITY,4],[pt.SCALE_VISIBILITY,4],[pt.FRUSTUM_VISIBILITY,4],[pt.POINT_OF_INTEREST_FREQUENT,6],[pt.POINT_OF_INTEREST_INFREQUENT,30],[pt.LABELER,8],[pt.FEATURE_QUERY_ENGINE,8],[pt.FEATURE_TILE_TREE,16],[pt.FEATURE_TILE_TREE_ACTIVE,Rn],[pt.ELEVATION_ALIGNMENT,12],[pt.TEXT_TEXTURE_ATLAS,12],[pt.CLOUDS_GENERATOR,12],[pt.TEXTURE_UNLOAD,12],[pt.LINE_OF_SIGHT_TOOL,16],[pt.LINE_OF_SIGHT_TOOL_INTERACTIVE,Rn],[pt.SNAPPING,Rn],[pt.SHADOW_ACCUMULATOR,30]]);function _S(e){return wS.has(e)?wS.get(e):typeof e=="number"?e:1}var Br;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(Br||(Br={}));const xS=6.5,SS=1,Pre=30,MS=1e3/30,$S=100,IS=.9;var H9,bl;(function(e){let t=class extends Fe{constructor(l){super(l),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new P0("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=null,this._state=Br.INTERACTING,this._tasks=new Su,this._runQueue=new Su,this._load=0,this._idleStateCallbacks=new Su,this._idleUpdatesStartFired=!1,this._maxReschedule=o1,this._forceTask=!1,this._debug=!1,this._debugHandle=Ft(()=>Ore.SCHEDULER_LOG_SLOW_TASKS,g=>this._debug=g,Gn),this._budget=new s(l.nowFunc);for(const g of Object.keys(pt))this.performanceInfo.tasks.set(pt[g],new P0(pt[g]));let d;const y=this;this._test={get state(){return a5(d,y._state)},set state(g){d=g},FRAME_SAFETY_BUDGET:xS,INTERACTING_BUDGET:MS,IDLE_BUDGET:$S,get budget(){return y._budget.budget},usedBudget:0,setBudget:g=>y._budget=g,updateTask:g=>this._updateTask(g),getState:g=>this._getState(g),getRuntime:g=>this._getRuntime(g),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(l=>l.remove()),this._tasks.clear(),Ju(this._debugHandle),this._microTaskQueued=!1,this.updating=!1}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=o1,this._schedule(),this.frame()))}))}registerTask(l,d){const y=_S(l),g=new i(this,l,d,y);return this._tasks.push(g),this.performanceInfo.tasks.has(l)||this.performanceInfo.tasks.set(l,new P0(l)),g}registerIdleStateCallbacks(l,d){const y={idleBegin:l,idleEnd:d};this._idleStateCallbacks.push(y),this.state===Br.IDLE&&this._idleUpdatesStartFired&&y.idleBegin();const g=this;return{remove:()=>this._removeIdleStateCallbacks(y),set idleBegin(_){g._idleUpdatesStartFired&&(y.idleEnd(),g._state===Br.IDLE&&_()),y.idleBegin=_},set idleEnd(_){y.idleEnd=_}}}get now(){return this.nowFunc()}get load(){return this._load}set state(l){this._state!==l&&(this._state=l,this.state!==Br.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(d=>d.idleEnd())))}get state(){return ce(this._test.state)?this._state:this._test.state}updateBudget(l){this._test.usedBudget=0;let d=xS,y=l.frameDuration,g=SS;switch(this.state){case Br.IDLE:d=0,y=Math.max($S,l.frameDuration),g=Pre;break;case Br.INTERACTING:y=Math.max(MS,l.frameDuration);case Br.ANIMATING:}return y=y-l.elapsedFrameTime-d,this.state!==Br.IDLE&&y<SS&&!this._forceTask?(this._forceTask=!0,!1):(y=Math.max(y,g),this._budget.reset(y,this.state),this._maxReschedule=o1,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Br.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(l=>l.idleBegin())),this._runIdle();break;case Br.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(l){this._idleUpdatesStartFired&&l.idleEnd(),this._idleStateCallbacks.removeUnordered(l)}removeTask(l){this._tasks.removeUnordered(l),this._runQueue.removeUnordered(l)}_updateTask(l){this._tasks.forAll(d=>{d.name===l&&d.setPriority(l)})}_getState(l){if(this._runQueue.some(y=>y.name===l))return bl.SCHEDULED;let d=bl.IDLE;return this._tasks.forAll(y=>{y.name===l&&y.needsUpdate&&(y.schedulePriority<=1?d=bl.READY:d!==bl.READY&&(d=bl.WAITING))}),d}_getRuntime(l){let d=0;return this._tasks.forAll(y=>{y.name===l&&(d+=y.runtime)}),d}_resetRuntimes(){this._tasks.forAll(l=>l.runtime=0)}_getRunning(){const l=new Map;if(this._tasks.forAll(y=>{y.needsUpdate&&l.set(y.name,(l.get(y.name)||0)+1)}),l.size===0)return null;let d="";return l.forEach((y,g)=>{d+=y>1?` ${y}x ${g}`:` ${g}`}),d}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const l=this._tasks.reduce((d,y)=>y.needsUpdate?++d:d,0);this._load=this._load*IS+l*(1-IS)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(l=>!!l.needsUpdate||(l.schedulePriority=l.basePriority,!1)),this._tasks.forAll(l=>{l.basePriority===Rn&&l.needsUpdate&&!this._runQueue.some(d=>d===l)&&this._runQueue.unshift(l)});this._runQueue.length===0;){let l=!1,d=0;if(this._tasks.forAll(y=>{y.needsUpdate&&y.schedulePriority!==0&&y.basePriority!==Rn&&(l=!0,d=Math.max(d,y.basePriority),y.schedulePriority===1?(y.schedulePriority=0,this._runQueue.push(y)):--y.schedulePriority)}),!l)return this.updating=!1,!1;this._maxReschedule===o1&&(this._maxReschedule=d),--this._maxReschedule}return this.updating=!0,!0}_run(){const l=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const d=this._budget.now(),y=this._runQueue.pop();this._budget.resetProgress();try{y.task.runTask(this._budget)}catch(_){Cre.error(`Exception in task "${y.name}"`,_)}y.schedulePriority=y.basePriority;const g=this._budget.now()-d;if(y.runtime+=g,this._frameTaskTimes.set(y.priority,this._frameTaskTimes.get(y.priority)+g),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",y.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this.updating=this._tasks.some(_=>_.needsUpdate),void this._recordFrameTaskTimes(this._budget.now()-l)}while(this._schedule());this.updating=this._tasks.some(d=>d.needsUpdate),this._recordFrameTaskTimes(this._budget.now()-l)}_startFrameTaskTimes(){for(const l of Object.keys(pt))this._frameTaskTimes.set(pt[l],0)}_recordFrameTaskTimes(l){this._frameTaskTimes.forEach((d,y)=>this.performanceInfo.tasks.get(y).record(d)),this.performanceInfo.total.record(l)}get test(){return this._test}};b([S()],t.prototype,"updating",void 0),b([S()],t.prototype,"nowFunc",void 0),t=b([H("esri.views.support.Scheduler")],t),e.Scheduler=t;let i=class extends Fe{constructor(l,d,y,g){super({}),this._scheduler=l,this.name=d,this._basePriority=g,this.runtime=0,this._queue=new xy,this._handles=new yr,this.schedulePriority=this._basePriority,this.task=X(y)?y:this._queue,this._handles.add(fg(()=>this.task.running,()=>l.activate()))}get updating(){return this._queue.running}normalizeCtorArgs(){return{}}remove(){this.processQueue(kC),this._scheduler.removeTask(this),this.schedule=W9.schedule,this.reschedule=W9.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(l){this.name=l;const d=_S(l);this._basePriority!==Rn&&this.schedulePriority===0||(this.schedulePriority=d),this._basePriority=d}get priority(){return this.name}set priority(l){this.setPriority(l)}get needsUpdate(){return this.updating||this.task.running}schedule(l,d,y){return this._queue.push(l,d,y)}reschedule(l,d,y){return this._queue.unshift(l,d,y)}processQueue(l){this._queue.runTask(l)}};b([S({constructOnly:!0})],i.prototype,"task",void 0),b([S({readOnly:!0})],i.prototype,"updating",null),i=b([H("esri.views.support.SchedulerTask")],i);class s{constructor(d){this.now=d,this._begin=0,this._budget=0,this._state=Br.IDLE,this._didWork=!1,this._enabled=!0}run(d){return!this.done&&(d()===!0&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(d){this._enabled=d}reset(d,y){this._begin=this.now(),this._budget=d,this._state=y,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}get elapsed(){return this.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}e.Budget=s})(H9||(H9={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(bl||(bl={}));const kC=(()=>{const e=new H9.Budget(()=>performance.now());return e.enabled=!1,e})();class Nre{remove(){}processQueue(){}schedule(t,i,s){try{if(Bn(i)){const l=yi();return s?Promise.resolve(s(l)):Promise.reject(l)}return Z2(t(kC))}catch(l){return Promise.reject(l)}}reschedule(t,i,s){return this.schedule(t,i,s)}}const W9=new Nre,o1=Number.MAX_SAFE_INTEGER;let T0=class extends Fe{constructor(e,t){var i;super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i=t==null?void 0:t.registerTask(pt.TEXTURE_UNLOAD))!=null?i:W9}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,i){const s=this.makeUid(e);let l=this._textureRequests.get(s);return l||(l={referenceCount:0,texture:t(),textureAsync:null,abortController:null,onRemove:i},this._stage&&(this._stage.add(l.texture),this._stage.loadImmediate(l.texture)),this._textureRequests.set(s,l)),l.referenceCount++,{uid:s,texture:l.texture,release:()=>this._release(s)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){var t;e.onRemove&&e.onRemove(),e.texture?(t=this._stage)==null||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return X(t)?`${e}.${t}px`:e}};b([S()],T0.prototype,"_frameTask",void 0),b([S()],T0.prototype,"updating",null),T0=b([H("esri.views.3d.support.TextureCollection")],T0);var TS;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(TS||(TS={}));const AC=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],OC={};function CC(e){return!!OC[e]}function jre(e){for(const t of e)if(!CC(t))return!1;return!0}AC.forEach(e=>{OC[e]=!0});class Fre{constructor(t){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this.handlers.forEach(({handler:i,priority:s},l)=>this.inputManager.installHandlers(l,[i],s))}disconnect(){this.inputManager&&this.handlers.forEach((t,i)=>this.inputManager.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(t,i,s,l){const d=Array.isArray(t)?t:t.split(",");if(!jre(d))return d.some(CC)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let y,g;Array.isArray(i)?g=i:(y=i,g=[]),typeof s=="function"?y=s:l=s,l=l!=null?l:tl.DEFAULT;const _=this._createUniqueGroupName(),M=new Rre(this.view,d,g,y);this.handlers.set(_,{handler:M,priority:l});for(const E of d){const O=this.handlerCounts.get(E)||0;this.handlerCounts.set(E,O+1)}return this.inputManager&&this.inputManager.installHandlers(_,[M],l),{remove:()=>this._removeHandler(_,d)}}hasHandler(t){return!!this.handlerCounts.get(t)}_removeHandler(t,i){if(this.handlers.has(t)){this.handlers.delete(t);for(const s of i){const l=this.handlerCounts.get(s);l===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",s):l===1?this.handlerCounts.delete(s):this.handlerCounts.set(s,l-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class Rre extends Li{constructor(t,i,s,l){super(!0),this.view=t;for(const d of i)switch(d){case"click":this.registerIncoming("click",s,y=>l(this._wrapClick(y)));break;case"double-click":this.registerIncoming("double-click",s,y=>l(this._wrapDoubleClick(y)));break;case"immediate-click":this.registerIncoming("immediate-click",s,y=>l(this._wrapImmediateClick(y)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",s,y=>l(this._wrapImmediateDoubleClick(y)));break;case"hold":this.registerIncoming("hold",s,y=>l(this._wrapHold(y)));break;case"drag":this.registerIncoming("drag",s,y=>{const g=this._wrapDrag(y);g&&l(g)});break;case"key-down":this.registerIncoming("key-down",s,y=>l(this._wrapKeyDown(y)));break;case"key-up":this.registerIncoming("key-up",s,y=>l(this._wrapKeyUp(y)));break;case"pointer-down":this.registerIncoming("pointer-down",s,y=>l(this._wrapPointer(y,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",s,y=>l(this._wrapPointer(y,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",s,y=>l(this._wrapPointer(y,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",s,y=>l(this._wrapPointerDrag(y)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",s,y=>l(this._wrapMouseWheel(y)));break;case"pointer-enter":this.registerIncoming("pointer-enter",s,y=>l(this._wrapPointer(y,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",s,y=>l(this._wrapPointer(y,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",s,y=>{l(this._wrapGamepad(y))});break;case"focus":this.registerIncoming("focus",s,y=>{l(this._wrapFocus(y))});break;case"blur":this.registerIncoming("blur",s,y=>{l(this._wrapBlur(y))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:i,button:s,buttons:l,x:d,y,native:g,eventId:_}=t.data,{cancelable:M,timestamp:E}=t;return{type:"click",pointerType:i,button:s,buttons:l,x:d,y,native:g,timestamp:E,screenPoint:Tr(d,y),mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:M,stopPropagation:()=>t.stopPropagation(),async:O=>t.async(O),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:i,button:s,buttons:l,x:d,y,native:g,eventId:_}=t.data,{cancelable:M,timestamp:E}=t;return{type:"double-click",pointerType:i,button:s,buttons:l,x:d,y,native:g,timestamp:E,mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:M,stopPropagation:()=>t.stopPropagation(),async:O=>t.async(O),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:i,button:s,buttons:l,x:d,y,native:g,eventId:_}=t.data,M=g.pointerId,{cancelable:E,timestamp:O}=t;return{type:"immediate-click",pointerId:M,pointerType:i,button:s,buttons:l,x:d,y,native:g,timestamp:O,mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:E,stopPropagation:()=>t.stopPropagation(),async:P=>t.async(P),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:i,button:s,buttons:l,x:d,y,native:g,eventId:_}=t.data,M=g.pointerId,{cancelable:E,timestamp:O}=t;return{type:"immediate-double-click",pointerId:M,pointerType:i,button:s,buttons:l,x:d,y,native:g,timestamp:O,mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:E,stopPropagation:()=>t.stopPropagation(),async:P=>t.async(P),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:i,button:s,buttons:l,x:d,y,native:g}=t.data,{cancelable:_,timestamp:M}=t;return{type:"hold",pointerType:i,button:s,buttons:l,x:d,y,native:g,timestamp:M,mapPoint:this._getMapPoint(d,y),cancelable:_,stopPropagation:()=>t.stopPropagation(),async:E=>t.async(E),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,i){return this.view.toMap(Tr(t,i),{exclude:[]})}_wrapDrag(t){const i=t.data,{x:s,y:l}=i.center,{action:d,pointerType:y,button:g}=i;if(d==="start"&&(this.latestDragStart=i),!this.latestDragStart)return;const _=i.pointer.native,M=i.buttons,{cancelable:E,timestamp:O}=t,P={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return d==="end"&&(this.latestDragStart=void 0),{type:"drag",action:d,x:s,y:l,origin:P,pointerType:y,button:g,buttons:M,radius:i.radius,angle:mI(i.angle),native:_,timestamp:O,cancelable:E,stopPropagation:()=>t.stopPropagation(),async:j=>t.async(j),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:i,repeat:s,native:l}=t.data,{cancelable:d,timestamp:y}=t;return{type:"key-down",key:i,repeat:s,native:l,timestamp:y,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:i,native:s}=t.data,{cancelable:l,timestamp:d}=t;return{type:"key-up",key:i,native:s,timestamp:d,cancelable:l,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,i){const{x:s,y:l,button:d,buttons:y,native:g,eventId:_}=t.data,M=g.pointerId,E=g.pointerType,{cancelable:O,timestamp:P}=t;return{type:i,x:s,y:l,pointerId:M,pointerType:E,button:d,buttons:y,native:g,timestamp:P,eventId:_,cancelable:O,stopPropagation:()=>t.stopPropagation(),async:j=>t.async(j),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:i,y:s,buttons:l,native:d,eventId:y}=t.data.currentEvent,{button:g}=t.data.startEvent,_=t.data.startEvent.native.pointerId,M=t.data.startEvent.native.pointerType,E=t.data.action,O={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:P,timestamp:j}=t;return{type:"pointer-drag",x:i,y:s,pointerId:_,pointerType:M,button:g,buttons:l,action:E,origin:O,native:d,timestamp:j,eventId:y,cancelable:P,stopPropagation:()=>t.stopPropagation(),async:R=>t.async(R),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:i,data:s,timestamp:l}=t,{x:d,y,deltaY:g,native:_}=s;return{type:"mouse-wheel",x:d,y,deltaY:g,native:_,timestamp:l,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:M=>t.async(M),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:i,state:s,device:l}=t.data,{cancelable:d,timestamp:y}=t,{buttons:g,axes:_}=s;return{type:"gamepad",device:l,timestamp:y,action:i,buttons:g,axes:_,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:M=>t.async(M),preventDefault:()=>t.preventDefault()}}}var Ed,ES,kS;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Ed||(Ed={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(ES||(ES={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(kS||(kS={}));const Lre=Se.getLogger("esri.views.interactive.interactiveToolUtils");function Dre(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return Lre.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault()}),e.on("after-remove",t=>{const i=t.item;i.visible=!1,i.active&&(i.view.activeTool=null),i.destroy()})]}function Vm(e){return e.visible&&e.getEditableFlag(Ed.USER)&&e.getEditableFlag(Ed.MANAGER)}function Pn(e){return Tr(e.x,e.y)}function PC(e,t){const i=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return Tr(t.clientX-i.left,t.clientY-i.top)}function AS(e,t){return t instanceof Event?PC(e,t):Pn(t)}function OS(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class zre{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(t,i){const s=()=>t.stopPropagation();switch(t.type){case"pointer-move":CS(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(s(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!PS(t))break;const l=Pn(t),d=this._intersect(l,t.pointerType,i.forEachTool);if(ce(d))break;const y=this._findToolAndManipulatorByKey(d,i.forEachTool,a1),g=za(y,M=>M.manipulator),_=za(y,M=>M.tool);!(X(g)&&X(_)&&g.interactive)||g.grabbable&&g.grabbableForEvent(t)||!g.grabbing||g.dragging||this._ungrabManipulatorBeforeDragging(g,_,t),X(g)&&g.interactive&&g.grabbable&&g.grabbableForEvent(t)&&!g.grabbing&&(this._grabbedManipulators.set(t.pointerId,{key:d,start:l,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&i.activeTool!==d.tool&&(this._currentlyActiveTool=i.activeTool,this._revertToActiveTool=!0,i.setActiveTool(d.tool)),g.grabbing=!0,g.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:l}),s());break}case"pointer-up":this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!PS(t))break;const l=this._grabbedManipulators.get(t.pointerId),d=this._draggedManipulators.get(t.pointerId),y=za(l||d,({key:E})=>E),g=this._findManipulatorByKey(y,i.forEachTool);if(ce(g))break;const _=Pn(t);_.x=Is(_.x,0,i.view.width),_.y=Is(_.y,0,i.view.height);const M=(l||d).start;switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(g.dragging=!0,d?g.events.emit("drag",{action:"update",start:M,screenPoint:_}):g.events.emit("drag",{action:"start",start:M,screenPoint:_,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{key:y,start:M}));break;case"end":g.dragging=!1,d&&g.events.emit("drag",{action:"end",start:M,screenPoint:_}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}s();break}case"immediate-click":{const l=Pn(t),d=this._intersect(l,t.pointerType,i.forEachTool),y=this._findToolAndManipulatorByKey(d,i.forEachTool,a1);if(Vre(t)||i.forEachTool(E=>{if((!X(y)||y.tool!==E||E.automaticManipulatorSelection)&&E.manipulators){let O=!1;E.manipulators.forEach(({manipulator:P})=>{P.selected&&(P.selected=!1,O=!0)}),O&&E.manipulatorSelectionChanged&&E.manipulatorSelectionChanged()}}),ce(y))break;const{manipulator:g,tool:_}=y;if(!g.interactive)break;g.selectable&&_.automaticManipulatorSelection&&(g.selected=!g.selected,_.manipulatorSelectionChanged&&_.manipulatorSelectionChanged());const M=t.native.shiftKey;g.events.emit("immediate-click",{screenPoint:l,button:t.button,pointerType:t.pointerType,shiftKey:M,stopPropagation:s});break}case"click":{const l=Pn(t),d=this._intersect(l,t.pointerType,i.forEachTool),y=this._findManipulatorByKey(d,i.forEachTool);if(ce(y)||!y.interactive)break;const g=t.native.shiftKey;y.events.emit(t.type,{screenPoint:l,button:t.button,pointerType:t.pointerType,shiftKey:g}),s();break}case"double-click":{const l=Pn(t),d=this._intersect(l,t.pointerType,i.forEachTool),y=this._findManipulatorByKey(d,i.forEachTool);if(ce(y)||!y.interactive)break;const g=t.native.shiftKey;y.events.emit("double-click",{screenPoint:l,button:t.button,pointerType:t.pointerType,shiftKey:g,stopPropagation:s});break}case"immediate-double-click":{const l=Pn(t),d=this._intersect(l,t.pointerType,i.forEachTool),y=this._findManipulatorByKey(d,i.forEachTool);if(ce(y)||!y.interactive)break;const g=t.native.shiftKey;y.events.emit("immediate-double-click",{screenPoint:l,button:t.button,pointerType:t.pointerType,shiftKey:g,stopPropagation:s});break}}this._updateCursor(i.forEachTool)}_ungrabManipulatorBeforeDragging(t,i,s){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:s.pointerType,screenPoint:Pn(s)}),this._grabbedManipulators.forEach(({key:l},d)=>{l.tool===i&&i.manipulators.findById(l.manipulatorId)===t&&this._grabbedManipulators.delete(d)})}_handlePointerEnd(t,i){const s=za(this._grabbedManipulators.get(t.pointerId),({key:d})=>d),l=this._findManipulatorByKey(s,i.forEachTool);X(l)&&!l.dragging&&(this._grabbedManipulators.size===1&&this._draggedManipulators.size===0&&this._revertToActiveTool&&(i.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),l.grabbing&&(l.grabbing=!1,l.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Pn(t)})),this._grabbedManipulators.delete(t.pointerId))}_cursorFromMap(t,i){let s=null;return sg(t,({key:l})=>{const d=this._findManipulatorByKey(l,i);return!!(X(d)&&d.interactive&&"cursor"in d&&d.cursor)&&(s=d.cursor,!0)}),s}_updateCursor(t){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,t)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,t)||"pointer":this._cursor=null}clearPointers(t,i,s=!0,l){const d=y=>y.tool===t&&(ce(l)||y.manipulatorId===l);this._grabbedManipulators.forEach(({key:y,pointerType:g},_)=>{if(d(y)){this._grabbedManipulators.delete(_);const M=this._findManipulatorByKey(y,i);X(M)&&(M.grabbing=!1,M.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:g}))}}),this._draggedManipulators.forEach(({key:y},g)=>{if(d(y)){this._draggedManipulators.delete(g);const _=this._findManipulatorByKey(y,i);X(_)&&(_.dragging=!1,_.events.emit("drag",{action:"cancel"}))}}),s&&this._hoveredManipulators.forEach(({key:y},g)=>{if(d(y)){this._hoveredManipulators.delete(g);const _=this._findManipulatorByKey(y,i);X(_)&&(_.hovering=!1)}}),this._updateCursor(i)}_intersect(t,i,s){let l=null;return s(d=>{if(d.manipulators==null||!Vm(d))return!1;const y=d.manipulators.intersect(t,i);return!ce(y)&&(l={manipulatorId:y.id,tool:d},!0)}),l}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,s)=>{this._updateHoveredStateForPointerAtScreenPosition(Tr(i.x,i.y),s,i.pointerType,t)})}handleHoverEvent(t,i){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!CS(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Pn(t),t.pointerId,t.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(t,i,s,l){const d=this._intersect(t,s,l);let y=this._findManipulatorByKey(d,l);const g=za(this._hoveredManipulators.get(i),({key:M})=>M),_=this._findManipulatorByKey(g,l);X(y)&&!y.interactive&&(y=null),_!==y&&(X(_)&&(_.hovering=!1),X(y)?(y.hovering=!0,this._hoveredManipulators.set(i,{key:d})):this._hoveredManipulators.delete(i),this._updateCursor(l))}_findManipulatorByKey(t,i){return this._findToolAndManipulatorByKey(t,i,a1)?a1.manipulator:null}_findToolAndManipulatorByKey(t,i,s){return ce(t)?null:(s.tool=null,s.manipulator=null,i(l=>{if(l!==t.tool||l.manipulators==null||!Vm(l))return!1;const d=l.manipulators.findById(t.manipulatorId);return!!X(d)&&(s.manipulator=d,s.tool=l,!0)}),s.manipulator?s:null)}}function CS(e){return e==="mouse"}function PS(e){return e.pointerType!=="mouse"||e.button===0}function Vre(e){return!!e.native.shiftKey}const a1={manipulator:null,tool:null},NS=Se.getLogger("esri.views.ToolViewManager"),jS="attached",A2="tools";let Mo=class extends Ic{constructor(e){super(e),this._manipulatorState=new zre,this.tools=new qe,this.cursor=null,this._forEachTool=t=>{for(const i of this.tools.items)if(t(i))return}}initialize(){this.handles.add([this.view.on(AC,e=>{this._handleInputEvent(e)},tl.TOOL),...Dre(this.tools),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._forEachTool)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}set activeTool(e){if(X(e)&&!this.view.ready)return void NS.error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return void(X(e)&&NS.warn("Tool is already active - ignoring activation request."));const t=this.activeTool;this._set("activeTool",e),X(t)&&t.deactivate(),X(e)&&e.activate(),this._removeIncompleteTools(e);const i=ce(this.activeTool);for(const s of this.tools){s.setEditableFlag(Ed.MANAGER,i||s===this.activeTool);const l=Vm(s);!i&&l||this._manipulatorState.clearPointers(s,this._forEachTool,!l)}this._updateCursor()}get updating(){var e,t;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||(e=(t=this.textures)==null?void 0:t.updating)!=null&&e}attach(){this.view.type==="3d"?(this._set("textures",new T0(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([this.view.state.watch("camera",()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}),this.view.elevationProvider.on("elevation-change",e=>{this._forEachManipulator(t=>{t.onElevationChange!=null&&t.onElevationChange(e)})}),qc(()=>this._set("textures",Dn(this.textures)))],jS)):this.handles.add(this.view.watch("extent",()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}))}detach(){X(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(jS)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:i})=>e(i,t))})}_handleInputEvent(e){let t=!1;const i=Te(J({},e),{stopPropagation:()=>{t=!0,e.stopPropagation()}});X(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(s=>{!t&&s.visible&&s.handleInputEvent(i)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:s=>{this.activeTool=s},view:this.view}),!t&&X(this.activeTool)&&this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(A2),this._forEachTool(e=>{if(e instanceof Fe){const t=Nt(e,["cursor","visible","editable"],()=>{Vm(e)||this._manipulatorState.clearPointers(e,this._forEachTool),this._updateCursor()});this.handles.add(t,A2)}e.manipulators&&this.handles.add(e.manipulators.on("change",t=>{t.removed.forEach(({id:i})=>{this._manipulatorState.clearPointers(e,this._forEachTool,!0,i)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}),A2)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateCursor(){let e=this._manipulatorState.cursor;this._forEachTool(t=>!(!X(t.cursor)||!t.visible)&&(e=t.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(t=>(ce(e)||t!==e)&&!t.created).forEach(t=>{this.tools.remove(t)})}};b([S({constructOnly:!0,nonNullable:!0})],Mo.prototype,"view",void 0),b([S({readOnly:!0,nonNullable:!0})],Mo.prototype,"textures",void 0),b([S({value:null})],Mo.prototype,"activeTool",null),b([S({readOnly:!0,type:qe})],Mo.prototype,"tools",void 0),b([S({readOnly:!0})],Mo.prototype,"cursor",void 0),b([S({readOnly:!0})],Mo.prototype,"updating",null),Mo=b([H("esri.views.ToolViewManager")],Mo);const Gre=Mo;let Wh=class extends Fe{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":qre.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return Ure[this.deviceType]}};b([S({nonNullable:!0,readOnly:!0})],Wh.prototype,"nativeIndex",void 0),b([S({type:String,readOnly:!0})],Wh.prototype,"deviceType",null),b([S({type:Number,readOnly:!0})],Wh.prototype,"axisThreshold",null),Wh=b([H("esri.views.input.gamepad.GamepadInputDevice")],Wh);const qre=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Ure={standard:.15,spacemouse:.025,unknown:0},M_=Wh;let E0=class extends Fe{constructor(...e){super(...e),this.devices=new qe,this.enabledFocusMode="document"}};b([S({type:qe.ofType(M_),readOnly:!0})],E0.prototype,"devices",void 0),b([S({type:["document","view","none"]})],E0.prototype,"enabledFocusMode",void 0),E0=b([H("esri.views.input.gamepad.GamepadSettings")],E0);const Bre=E0;let Sy=class extends Fe{constructor(){super(...arguments),this.gamepad=new Bre}};b([S({readOnly:!0})],Sy.prototype,"gamepad",void 0),Sy=b([H("esri.views.input.Input")],Sy);const Hre=Sy;let Ea=class extends Fe{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};b([S({type:Boolean,nonNullable:!0})],Ea.prototype,"enabled",void 0),b([S({type:M_})],Ea.prototype,"device",void 0),b([S({type:["pan","zoom"],nonNullable:!0})],Ea.prototype,"mode",void 0),b([S({type:["forward-down","forward-up"],nonNullable:!0})],Ea.prototype,"tiltDirection",void 0),b([S({type:Number,nonNullable:!0})],Ea.prototype,"velocityFactor",void 0),Ea=b([H("esri.views.navigation.gamepad.GamepadSettings")],Ea);const NC=Ea;let eu=class extends Fe{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new NC,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};b([S({type:Boolean})],eu.prototype,"browserTouchPanEnabled",void 0),b([S({type:NC,nonNullable:!0})],eu.prototype,"gamepad",void 0),b([S({type:Boolean})],eu.prototype,"momentumEnabled",void 0),b([S({type:Boolean})],eu.prototype,"mouseWheelZoomEnabled",void 0),eu=b([H("esri.views.navigation.Navigation")],eu);const jC=eu;var FS;function Wre(e){const t=e.url&&nf(e.url);return!((e.spatialReference&&e.spatialReference.vcsWkid)==null&&X(t)&&t.serverType==="ImageServer")&&FC(e)&&e.heightModelInfo?e.heightModelInfo:Jre(e)?Gg.deriveUnitFromSR(Yre,e.spatialReference):null}function FC(e){return"heightModelInfo"in e}function RC(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function Jre(e){return RC(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):LC(e)}function Kre(e){return e.layers!=null||LC(e)||RC(e)||FC(e)}function LC(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"analysis":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(FS||(FS={}));const Yre=new Gg({heightModel:"gravity-related-height"});var kd;function RS(e){return e===kd.Global?"global":"local"}(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(kd||(kd={}));let J9,O2=null;async function Xre(e){O2||(O2=import("./geometryServiceUtils.60bd473e.js").then(t=>J9=t)),await O2,mi(e)}async function DC(e,t,i,s){if(!e)return null;const l=e.spatialReference;return Pc()||qu(l,t)?Wd(e,t):J9?J9.projectGeometry(e,t,i,s):(await Promise.race([Xre(s),Nc(s)]),DC(e,t,i,s))}const zC=Se.getLogger("esri.views.support.DefaultsFromMap");zC.level="info";let At=class extends Fe{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.logDebugInformation=!1,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._debug("Aborting project extent task"),this._projectExtentTask.task=H2(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return X(this.userSpatialReference)?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return ce(this.userSpatialReference)||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var e,t,i,s;const l=(e=this.map)==null?void 0:e.call(this),d=[];return X(this.priorityCollection)&&d.push(this.priorityCollection),d.push({parent:l==null?void 0:l.basemap,layers:l==null||(t=l.basemap)==null?void 0:t.baseLayers},{layers:l==null?void 0:l.layers},{parent:l==null?void 0:l.ground,layers:l==null||(i=l.ground)==null?void 0:i.layers},{parent:l==null?void 0:l.basemap,layers:l==null||(s=l.basemap)==null?void 0:s.referenceLayers}),d}get _allLayers(){var e,t;const i=this._collectLayers(this.mapCollections);return this._debug("Collected",(e=(t=i.layers)==null?void 0:t.length)!=null?e:0,"layers, updating",i.updating),i}get _spatialReferenceTask(){var e,t;if(this.suspended)return(t=this._get("_spatialReferenceTask"))!=null?t:{updating:!1};const{layers:i,updating:s}=this._allLayers,l={candidates:null};for(const y of i)if(this._processSpatialReferenceCandidates(y,l),l.candidates&&l.candidates.length===1)break;if(((e=l.candidates)==null?void 0:e.length)!==1&&s)return{updating:!0};const d=this._pickSpatialReferenceCandidate(l.candidates);return this._debug("Finished spatial reference",X(d)?`${d.spatialReference.wkid}:${X(d.viewingMode)?RS(d.viewingMode):"global/local"}`:"none available"),{spatialReference:X(d)?d.spatialReference:null,viewingMode:X(d)?d.viewingMode:null,updating:!1}}get _tileInfoTask(){var e,t,i,s,l,d,y,g;if(!this.required.tileInfo)return(g=this._get("_tileInfoTask"))!=null?g:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:_,updating:M}=this._collectLayers([{parent:(e=this.map)==null||(t=e.call(this))==null?void 0:t.basemap,layers:(i=this.map)==null||(s=i.call(this))==null||(l=s.basemap)==null?void 0:l.baseLayers},{layers:(d=this.map)==null||(y=d.call(this))==null?void 0:y.layers}]);if(_&&_.length>0&&"tileInfo"in _[0]){const E=_[0].tileInfo;return{tileInfo:E&&E.spatialReference.equals(this.spatialReference)?E:null,updating:!1}}return{updating:M}}get _heightModelInfoTask(){var e,t;if(!this.required.heightModelInfo||this.suspended&&(e=this._get("_heightModelInfoTask"))!=null&&e.heightModelInfo)return(t=this._get("_heightModelInfoTask"))!=null?t:{updating:!1};const{layers:i,updating:s}=this._allLayers;for(const _ of i){var l,d;if(this._debug("Considering",(l=(d=_.title)!=null?d:_.id)!=null?l:_.declaredClass,"for height model info"),Kre(_)){const M=Wre(_);var y,g;if(M)return this._debug("Derived height model info",M),{heightModelInfo:M,vcsWkid:(y=_.spatialReference)==null?void 0:y.vcsWkid,latestVcsWkid:(g=_.spatialReference)==null?void 0:g.latestVcsWkid,updating:!1}}this._debug("Layer does not support height models")}return this._debug("No height model info found,","updating",s),{updating:s}}get _extentCandidatesTask(){var e;if(this.suspended||!this.required.extent)return(e=this._get("_extentCandidatesTask"))!=null?e:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=this._allLayers,i=t.updating,s=[];for(const d of t.layers){var l;const y="fullExtents"in d&&d.fullExtents||(X(d.fullExtent)?[d.fullExtent]:[]),g=this.requiresExtentInSpatialReference?null:y[0],_=(l=y.find(M=>M.spatialReference.equals(this.spatialReference)))!=null?l:g;if(_)return{candidates:[{extent:_,layer:d}],updating:!1};if(this._getSupportedSpatialReferences(d).length>0)for(const M of y)s.push({extent:M,layer:d})}return{candidates:s,updating:i}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(ce(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),s=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:X(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(X(this._projectExtentTask.task)&&(this._debug("Aborting project extent task"),this._projectExtentTask.task=H2(this._projectExtentTask.task)),this._debug("Starting project extent task for",i.extent),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:s.clone(),task:zM(async l=>{try{const d=await DC(i.extent,s,i.layer.portalItem,l);this._debug("Project extent task finished",d),this._projectExtentTask=Te(J({},this._projectExtentTask),{task:null,output:d})}catch{if(Bn(l))return;this._projectExtentTask=Te(J({},this._projectExtentTask),{task:null})}})},{updating:!0})}_processSpatialReferenceCandidates(e,t){var i;const s=this._getSupportedSpatialReferences(e);if(s.length!==0)if(this._debug("Spatial reference candidates from",(i=e.title)!=null?i:e.id,":",s.map(l=>`${l.spatialReference.wkid}:${X(l.viewingMode)?RS(l.viewingMode):"global/local"}`).join(", ")),t.candidates){const l=[],d=(y,g)=>ce(y.viewingMode)?g.viewingMode:(ce(g.viewingMode)||y.viewingMode===g.viewingMode)&&y.viewingMode;for(const y of t.candidates)for(const g of s){if(!y.spatialReference.equals(g.spatialReference))continue;const _=d(y,g);if(_!==!1){l.push({spatialReference:y.spatialReference,viewingMode:_});break}}l.length>0&&(t.candidates=l)}else t.candidates=s}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return!e||e.length<1?X(t)?{spatialReference:t,viewingMode:null}:null:(X(t)&&e.length>1&&e.some(({spatialReference:i})=>i.equals(t))&&(e=e.filter(({spatialReference:i})=>i.equals(t))),e.length>1&&e.some(({viewingMode:i})=>i!==kd.Local)&&(e=e.filter(({viewingMode:i})=>i!==kd.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const i=[];for(const s of t){const l=this.getSpatialReferenceSupport({spatialReference:s,layer:e});if(X(l)){const d=X(l.constraints)?l.constraints:[{spatialReference:s}];for(const{spatialReference:y,viewingMode:g}of d)(!this.requiresExtentInSpatialReference||ce(this.userSpatialReference)||y.equals(this.userSpatialReference))&&i.push({spatialReference:y,viewingMode:g})}}return i}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:i})=>t.equals(i.spatialReference))||e[0]}_collectLayers(e){var t;if(this._loadMaybe((t=this.map)==null?void 0:t.call(this))!=="loaded")return{layers:[],updating:!0};const i={layers:[],preloading:-1,updating:!1};for(const s of e)if(this._collectCollection(s,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const l of e.layers){switch(this._loadMaybe(l)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":var i,s;t.updating||(this._debug("Considering layer",(i=(s=l.title)!=null?s:l.id)!=null?i:l.declaredClass),t.layers.push(l)),"layers"in l&&this._collectCollection({layers:l.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e?e.loadStatus==="not-loaded"?(this._debug("Triggering load",(t=(i=e.title)!=null?i:e.id)!=null?t:e.declaredClass),e.load(),"loading"):e.loadStatus:"loaded";var t,i}_debug(...e){this.logDebugInformation&&zC.info(...e)}};b([S()],At.prototype,"required",void 0),b([S({constructOnly:!0})],At.prototype,"map",void 0),b([S({constructOnly:!0})],At.prototype,"getSpatialReferenceSupport",void 0),b([S()],At.prototype,"defaultSpatialReference",void 0),b([S()],At.prototype,"userSpatialReference",void 0),b([S()],At.prototype,"sourcePreloadCount",void 0),b([S()],At.prototype,"priorityCollection",void 0),b([S()],At.prototype,"logDebugInformation",void 0),b([S()],At.prototype,"requiresExtentInSpatialReference",void 0),b([S()],At.prototype,"suspended",void 0),b([S({readOnly:!0})],At.prototype,"ready",null),b([S({readOnly:!0})],At.prototype,"heightModelInfoReady",null),b([S({readOnly:!0})],At.prototype,"spatialReference",null),b([S({readOnly:!0})],At.prototype,"extent",null),b([S({readOnly:!0})],At.prototype,"heightModelInfo",null),b([S({readOnly:!0})],At.prototype,"vcsWkid",null),b([S({readOnly:!0})],At.prototype,"latestVcsWkid",null),b([S({readOnly:!0})],At.prototype,"viewingMode",null),b([S({readOnly:!0})],At.prototype,"tileInfo",null),b([S({readOnly:!0})],At.prototype,"mapCollections",null),b([S({readOnly:!0})],At.prototype,"_allLayers",null),b([S({readOnly:!0})],At.prototype,"_spatialReferenceTask",null),b([S({readOnly:!0})],At.prototype,"_tileInfoTask",null),b([S({readOnly:!0})],At.prototype,"_heightModelInfoTask",null),b([S({readOnly:!0})],At.prototype,"_extentCandidatesTask",null),b([S()],At.prototype,"_extentTask",null),b([S()],At.prototype,"_projectExtentTask",void 0),At=b([H("esri.views.support.DefaultsFromMap")],At);const Zre=At;var My;const l1=Se.getLogger("esri.views.View");let We=My=class extends Yu(hl.EventedMixin(og(Fe))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new gc({getCollections:()=>{var t,i,s;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(s=this.basemapView)==null?void 0:s.referenceLayerViews]},getChildrenFunction:t=>t.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.fatalError=null,this.extent=null,this.graphics=new Au,this.analyses=new zm,this.navigating=!1,this.typeSpecificPreconditionsReady=!0,this.layerViews=new qe,this.magnifier=new EC,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new Hre,this.navigation=new jC,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Fre(this),this.persistableViewModels=new qe,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(this.watch("preconditionsReady",t=>{var i,s;t?(this._currentSpatialReference=this.spatialReference,My.views.add(this)):(this._currentSpatialReference=null,My.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?((i=this.layerViewManager)==null||i.clear(),(s=this.toolViewManager)==null||s.detach(),X(this.analysisViewManager)&&this.analysisViewManager.detach(),this._teardown()):t&&!this.ready&&(X(this.analysisViewManager)&&this.analysisViewManager.attach(),this._startup(),this.toolViewManager.attach())},!0))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,L5(()=>this.ready)))),this.basemapView=new Ta({view:this}),this.layerViewManager=new Are({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Gre({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([Ft(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required=Te(J({},this.defaultsFromMap.required),{extent:e}),{sync:!0,initial:!0}),Ft(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),Ft(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([Ft(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var i;const s=((i=this.map)==null?void 0:i.allLayers.length)>0;if(t&&!this.spatialReference&&s){if(X(e))return;const l=qc(()=>e=H2(e));e=zM(async d=>{try{await p5(this.spatialReferenceWarningDelay,null,d)}catch{return}finally{e=null}l1.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(l,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Dn(this.graphics),this.analyses=Dn(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.toolViewManager=Dn(this.toolViewManager),this.layerViewManager=Dn(this.layerViewManager),this.basemapView=Dn(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,e==null||e.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return l1.error("#toMap()","Not implemented on this instance of View"),null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Zre(J({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e)},this._defaultsFromMapSettings))}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Go.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!(this._currentSpatialReference||(e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}set map(e){var t;e!==this._get("map")&&((t=e)!=null&&t.destroyed&&(l1.warn("#map","The provided map is already destroyed",{map:e}),e=null),Go.isLoadable(e)&&e.load().catch(()=>{}),this.initialized&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){var e,t;let i=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return i&&(e=this.defaultsFromMap)!=null&&(t=e.required)!=null&&t.heightModelInfo&&(i=i.clone(),i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),i}set spatialReference(e){const t=!jr(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return X(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e,t,i;return(e=(t=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)!=null?t:(i=this.defaultsFromMap)==null?void 0:i.heightModelInfo)!=null?e:null}importLayerView(e){throw new re("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{}}_validateSpatialReference(e){return X(this.getSpatialReferenceSupport({spatialReference:e}))}when(e,t){return this.isResolved()&&!this.ready&&l1.warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(fg(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};We.views=new qe,b([S()],We.prototype,"_userSpatialReference",void 0),b([Ge("toolViewManager.activeTool")],We.prototype,"activeTool",void 0),b([S({readOnly:!0})],We.prototype,"allLayerViews",void 0),b([S()],We.prototype,"groundView",void 0),b([S()],We.prototype,"animation",void 0),b([S()],We.prototype,"basemapView",void 0),b([S({readOnly:!0})],We.prototype,"_defaultsFromMapSettings",null),b([S()],We.prototype,"defaultsFromMap",null),b([S()],We.prototype,"fatalError",void 0),b([S({type:Mt})],We.prototype,"extent",void 0),b([S(B9(Au,"graphics"))],We.prototype,"graphics",void 0),b([S(B9(zm,"analyses"))],We.prototype,"analyses",void 0),b([S({readOnly:!0,type:Gg})],We.prototype,"heightModelInfo",null),b([S({readOnly:!0})],We.prototype,"interacting",null),b([S({readOnly:!0})],We.prototype,"navigating",void 0),b([S({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],We.prototype,"preconditionsReady",null),b([S({readOnly:!0})],We.prototype,"typeSpecificPreconditionsReady",void 0),b([S({type:qe,readOnly:!0})],We.prototype,"layerViews",void 0),b([S({type:EC})],We.prototype,"magnifier",void 0),b([S({value:null,type:az})],We.prototype,"map",null),b([S()],We.prototype,"padding",void 0),b([S({readOnly:!0})],We.prototype,"ready",void 0),b([S({type:it})],We.prototype,"spatialReference",null),b([S()],We.prototype,"spatialReferenceWarningDelay",void 0),b([S()],We.prototype,"stationary",null),b([S({readOnly:!0})],We.prototype,"supportsGround",void 0),b([S({type:Qn})],We.prototype,"timeExtent",void 0),b([Ge("toolViewManager.tools")],We.prototype,"tools",void 0),b([S()],We.prototype,"toolViewManager",void 0),b([S({readOnly:!0})],We.prototype,"type",void 0),b([S({type:Number})],We.prototype,"scale",void 0),b([S({readOnly:!0})],We.prototype,"updating",void 0),b([S({readOnly:!0})],We.prototype,"initialExtentRequired",void 0),b([S({readOnly:!0})],We.prototype,"initialExtent",null),b([S()],We.prototype,"cursor",null),b([S({readOnly:!0})],We.prototype,"input",void 0),b([S({type:jC,nonNullable:!0})],We.prototype,"navigation",void 0),b([S()],We.prototype,"layerViewManager",void 0),b([S()],We.prototype,"analysisViewManager",void 0),b([S()],We.prototype,"width",void 0),b([S()],We.prototype,"height",void 0),b([S({readOnly:!0})],We.prototype,"resizing",void 0),b([S({value:null,readOnly:!0})],We.prototype,"size",null),b([S({readOnly:!0})],We.prototype,"suspended",void 0),b([S({readOnly:!0})],We.prototype,"viewEvents",void 0),b([S({readOnly:!0})],We.prototype,"persistableViewModels",void 0),b([S()],We.prototype,"_isValid",void 0),b([S()],We.prototype,"_readyCycleForced",void 0),b([S()],We.prototype,"_currentSpatialReference",void 0),We=My=b([H("esri.views.View")],We);const Qre=We;let ka=class extends Wy{constructor(e){super(e),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._dfd.reject(new re("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._dfd.resolve())}update(e,t){t||(t=Bo(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};b([S({readOnly:!0})],ka.prototype,"done",null),b([S({readOnly:!0,type:String})],ka.prototype,"state",void 0),b([S()],ka.prototype,"target",void 0),ka=b([H("esri.views.ViewAnimation")],ka),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(ka||(ka={}));const K9=ka;function lu(e,t,i,s){const l=3*e,d=3*(i-e)-l,y=1-l-d,g=3*t,_=3*(s-t)-g,M=1-g-_;function E(R){return((y*R+d)*R+l)*R}function O(R){return((M*R+_)*R+g)*R}function P(R){return(3*y*R+2*d)*R+l}function j(R,z){let q,Y,te,ne,he,se;for(te=R,se=0;se<8;se++){if(ne=E(te)-R,Math.abs(ne)<z)return te;if(he=P(te),Math.abs(he)<1e-6)break;te-=ne/he}if(q=0,Y=1,te=R,te<q)return q;if(te>Y)return Y;for(;q<Y;){if(ne=E(te),Math.abs(ne-R)<z)return te;R>ne?q=te:Y=te,te=.5*(Y-q)+q}return te}return function(R,z=1e-6){return O(j(R,z))}}const ese=/^cubic-bezier\((.*)\)/,ws={};function tse(e){let t=ws[e]||null;if(!t){const i=ese.exec(e);if(i){const s=i[1].split(",").map(l=>parseFloat(l.trim()));s.length!==4||s.some(l=>isNaN(l))||(t=lu.apply(lu,s))}}return t}ws.ease=lu(.25,.1,.25,1),ws.linear=lu(0,0,1,1),ws.easeIn=ws["ease-in"]=lu(.42,0,1,1),ws.easeOut=ws["ease-out"]=lu(0,0,.58,1),ws.easeInOut=ws["ease-in-out"]=lu(.42,0,.58,1);function ise(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function rse(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function sse(e,t,i,s,l,d,y){return e[0]=t,e[1]=i,e[2]=s,e[3]=l,e[4]=d,e[5]=y,e}function $_(e,t){const i=t[0],s=t[1],l=t[2],d=t[3],y=t[4],g=t[5];let _=i*d-s*l;return _?(_=1/_,e[0]=d*_,e[1]=-s*_,e[2]=-l*_,e[3]=i*_,e[4]=(l*g-d*y)*_,e[5]=(s*y-i*g)*_,e):null}function nse(e){return e[0]*e[3]-e[1]*e[2]}function VC(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=t[4],_=t[5],M=i[0],E=i[1],O=i[2],P=i[3],j=i[4],R=i[5];return e[0]=s*M+d*E,e[1]=l*M+y*E,e[2]=s*O+d*P,e[3]=l*O+y*P,e[4]=s*j+d*R+g,e[5]=l*j+y*R+_,e}function Zg(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=t[4],_=t[5],M=Math.sin(i),E=Math.cos(i);return e[0]=s*E+d*M,e[1]=l*E+y*M,e[2]=s*-M+d*E,e[3]=l*-M+y*E,e[4]=g,e[5]=_,e}function I_(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=t[4],_=t[5],M=i[0],E=i[1];return e[0]=s*M,e[1]=l*M,e[2]=d*E,e[3]=y*E,e[4]=g,e[5]=_,e}function Ad(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=t[4],_=t[5],M=i[0],E=i[1];return e[0]=s,e[1]=l,e[2]=d,e[3]=y,e[4]=s*M+d*E+g,e[5]=l*M+y*E+_,e}function GC(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=i,e[2]=-i,e[3]=s,e[4]=0,e[5]=0,e}function qC(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function T_(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function ose(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function ase(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function lse(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function UC(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function use(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function hse(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e[4]=t[4]+i[4]*s,e[5]=t[5]+i[5]*s,e}function cse(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function pse(e,t){const i=e[0],s=e[1],l=e[2],d=e[3],y=e[4],g=e[5],_=t[0],M=t[1],E=t[2],O=t[3],P=t[4],j=t[5];return Math.abs(i-_)<=Ke*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(s-M)<=Ke*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(l-E)<=Ke*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(d-O)<=Ke*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(y-P)<=Ke*Math.max(1,Math.abs(y),Math.abs(P))&&Math.abs(g-j)<=Ke*Math.max(1,Math.abs(g),Math.abs(j))}const dse=VC,fse=UC;Object.freeze({__proto__:null,copy:ise,identity:rse,set:sse,invert:$_,determinant:nse,multiply:VC,rotate:Zg,scale:I_,translate:Ad,fromRotation:GC,fromScaling:qC,fromTranslation:T_,str:ose,frob:ase,add:lse,subtract:UC,multiplyScalar:use,multiplyScalarAndAdd:hse,exactEquals:cse,equals:pse,mul:dse,sub:fse});function il(){return[1,0,0,1,0,0]}function yse(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function mse(e,t,i,s,l,d){return[e,t,i,s,l,d]}function gse(e,t){return new Float64Array(e,t,6)}Object.freeze({__proto__:null,create:il,clone:yse,fromValues:mse,createView:gse});function Od(e,t){return e[0]=t[0],e[1]=t[1],e}function ji(e,t,i){return e[0]=t,e[1]=i,e}function BC(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function Cd(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function HC(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function WC(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function vse(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function bse(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function wse(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function _se(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function xse(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function af(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function Sse(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e}function lf(e,t){const i=t[0]-e[0],s=t[1]-e[1];return Math.sqrt(i*i+s*s)}function Gm(e,t){const i=t[0]-e[0],s=t[1]-e[1];return i*i+s*s}function qm(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function JC(e){const t=e[0],i=e[1];return t*t+i*i}function KC(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Mse(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function Y9(e,t){const i=t[0],s=t[1];let l=i*i+s*s;return l>0&&(l=1/Math.sqrt(l),e[0]=t[0]*l,e[1]=t[1]*l),e}function YC(e,t){return e[0]*t[0]+e[1]*t[1]}function XC(e,t,i){const s=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=s,e}function $se(e,t,i,s){const l=t[0],d=t[1];return e[0]=l+s*(i[0]-l),e[1]=d+s*(i[1]-d),e}function Ise(e,t){t=t||1;const i=2*Ua()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function Tse(e,t,i){const s=t[0],l=t[1];return e[0]=i[0]*s+i[2]*l,e[1]=i[1]*s+i[3]*l,e}function Ln(e,t,i){const s=t[0],l=t[1];return e[0]=i[0]*s+i[2]*l+i[4],e[1]=i[1]*s+i[3]*l+i[5],e}function Ese(e,t,i){const s=t[0],l=t[1];return e[0]=i[0]*s+i[3]*l+i[6],e[1]=i[1]*s+i[4]*l+i[7],e}function kse(e,t,i){const s=t[0],l=t[1];return e[0]=i[0]*s+i[4]*l+i[12],e[1]=i[1]*s+i[5]*l+i[13],e}function Ase(e,t,i,s){const l=t[0]-i[0],d=t[1]-i[1],y=Math.sin(s),g=Math.cos(s);return e[0]=l*g-d*y+i[0],e[1]=l*y+d*g+i[1],e}function Ose(e,t){const i=e[0],s=e[1],l=t[0],d=t[1];let y=i*i+s*s;y>0&&(y=1/Math.sqrt(y));let g=l*l+d*d;g>0&&(g=1/Math.sqrt(g));const _=(i*l+s*d)*y*g;return _>1?0:_<-1?Math.PI:Math.acos(_)}function Cse(e){return"vec2("+e[0]+", "+e[1]+")"}function Pse(e,t){return e[0]===t[0]&&e[1]===t[1]}function Nse(e,t){const i=e[0],s=e[1],l=t[0],d=t[1];return Math.abs(i-l)<=Ke*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-d)<=Ke*Math.max(1,Math.abs(s),Math.abs(d))}function jse(e,t,i,s,l){let d=t[0]-i[0],y=t[1]-i[1];const g=(s[0]*d+s[1]*y)*(l-1);return d=s[0]*g,y=s[1]*g,e[0]=t[0]+d,e[1]=t[1]+y,e}const Fse=qm,E_=Cd,Rse=HC,Lse=WC,Dse=lf,zse=Gm,Vse=JC;Object.freeze({__proto__:null,copy:Od,set:ji,add:BC,subtract:Cd,multiply:HC,divide:WC,ceil:vse,floor:bse,min:wse,max:_se,round:xse,scale:af,scaleAndAdd:Sse,distance:lf,squaredDistance:Gm,length:qm,squaredLength:JC,negate:KC,inverse:Mse,normalize:Y9,dot:YC,cross:XC,lerp:$se,random:Ise,transformMat2:Tse,transformMat2d:Ln,transformMat3:Ese,transformMat4:kse,rotate:Ase,angle:Ose,str:Cse,exactEquals:Pse,equals:Nse,projectAndScale:jse,len:Fse,sub:E_,mul:Rse,div:Lse,dist:Dse,sqrDist:zse,sqrLen:Vse});function pi(){return[0,0]}function Gse(e){return[e[0],e[1]]}function uf(e,t){return[e,t]}function qse(e){const t=pi(),i=Math.min(2,e.length);for(let s=0;s<i;++s)t[s]=e[s];return t}function Use(e,t){return new Float64Array(e,t,2)}function ZC(){return pi()}function QC(){return uf(1,1)}function eP(){return uf(1,0)}function tP(){return uf(0,1)}const Bse=ZC(),Hse=QC(),Wse=eP(),Jse=tP();Object.freeze({__proto__:null,create:pi,clone:Gse,fromValues:uf,fromArray:qse,createView:Use,zeros:ZC,ones:QC,unitX:eP,unitY:tP,ZEROS:Bse,ONES:Hse,UNIT_X:Wse,UNIT_Y:Jse});const iP=96,rP=39.37,Kse=180/Math.PI;function sP(e){return e.wkid?e:e.spatialReference||it.WGS84}function k_(e,t){return t.type?ji(e,t.x,t.y):Od(e,t)}function nP(e){return tp(e)}function td(e,t){return Math.max(e.width/t[0],e.height/t[1])*sne(e.spatialReference)}async function k0(e,t,i,s){let l,d;if(!e||Array.isArray(e)&&!e.length)return null;if(qe.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const g=e.every(E=>"attributes"in E),_=e.some(E=>!E.geometry);let M=e;if(g&&_&&t&&t.allLayerViews){const E=new Map;for(const R of e){const z=R.layer,q=E.get(z)||[],Y=R.attributes[z.objectIdField];Y!=null&&q.push(Y),E.set(z,q)}const O=[];E.forEach((R,z)=>{const q=t.allLayerViews.find(Y=>Y.layer.id===z.id);if("queryFeatures"in q){const Y=z.createQuery();Y.objectIds=R,Y.returnGeometry=!0,O.push(q.queryFeatures(Y))}});const P=await Promise.all(O),j=[];for(const R of P)if(R&&R.features&&R.features.length)for(const z of R.features)X(z.geometry)&&j.push(z.geometry);M=j}for(const E of M)s=await k0(E,t,i,s);return s}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")l=new Be(e);else if(e instanceof Pr)l=e;else if("geometry"in e){if(e.geometry)l=e.geometry;else if(e.layer){const g=e.layer,_=t.allLayerViews.find(M=>M.layer.id===g.id);if("queryFeatures"in _){const M=g.createQuery();M.objectIds=[e.attributes[g.objectIdField]],M.returnGeometry=!0;const E=await _.queryFeatures(M);l=cM(E,"features",0,"geometry")}}}if(ce(l)||(d=l.type==="point"?new Mt({xmin:l.x,ymin:l.y,xmax:l.x,ymax:l.y,spatialReference:l.spatialReference}):l.extent,!d))return null;Pc()||qu(d.spatialReference,i)||await Nc();const y=Wd(d,i);return y?s=s?s.union(y):y:null}function Yse(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,i=0;for(const s of e){const l=s.layer;l&&l.minScale&&l.maxScale&&(t=l.minScale<t?l.minScale:t,i=l.maxScale>i?l.maxScale:i)}return t&&i?{min:t,max:i}:null}}}function C2(e,t){return jr(sP(e),t)?e:Wd(e,t)}async function Xse(e,t){if(!e||!t)return new qn({targetGeometry:new Be,scale:0,rotation:0});let i=t.spatialReference;const{constraints:s,padding:l,viewpoint:d,size:y}=t,g=[l?y[0]-l.left-l.right:y[0],l?y[1]-l.top-l.bottom:y[1]];let _=null;e instanceof qn?_=e:e.viewpoint?_=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(_=e.target);let M=null;_&&_.targetGeometry?M=_.targetGeometry:e instanceof Mt?M=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(M=await k0(e.center,t,i)||await k0(e.extent,t,i)||await k0(e.target,t,i)||await k0(e,t,i)),!M&&d&&d.targetGeometry?M=d.targetGeometry:!M&&t.extent&&(M=t.extent),i||(i=sP(t.spatialReference||t.extent||M)),Pc()||jr(M.spatialReference,i)||qu(M,i)||await Nc();const E=C2(M.center?M.center:M,i);let O=null;if(_&&X(_.targetGeometry)&&_.targetGeometry.type==="point")O=_.scale;else if("scale"in e&&e.scale)O=e.scale;else if("zoom"in e&&e.zoom!==-1&&s&&s.effectiveLODs)O=s.zoomToScale(e.zoom);else if(Array.isArray(M)||M.type==="point"||M.type==="extent"&&M.width===0&&M.height===0){const z=C2(t.extent,i);O=X(z)?td(z,g):t.extent?td(t.extent,g):d.scale}else O=td(C2(M.extent,i),g);const P=Yse(e);P&&(P.min&&P.min>O?O=P.min:P.max&&P.max<O&&(O=P.max));let j=0;_?j=_.rotation:e.hasOwnProperty("rotation")?j=e.rotation:d&&(j=d.rotation);let R=new qn({targetGeometry:E,scale:O,rotation:j});return s&&(R=s.fit(R),s.constrainByGeometry(R),s.rotationEnabled||(R.rotation=j)),R}function fn(e,t){const i=e.targetGeometry,s=t.targetGeometry;return i.x=s.x,i.y=s.y,i.spatialReference=s.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function Zse(e,t,i){return i?ji(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):af(e,t,.5)}const Qse=function(){const e=pi();return function(t,i,s){const l=i.targetGeometry;k_(e,l);const d=.5*cp(i);return t.xmin=e[0]-d*s[0],t.ymin=e[1]-d*s[1],t.xmax=e[0]+d*s[0],t.ymax=e[1]+d*s[1],t.spatialReference=l.spatialReference,t}}();function ene(e,t,i,s,l){return X9(e,t,i.center),e.scale=td(i,s),l&&l.constraints&&l.constraints.constrain(e),e}function tne(e,t,i,s){return C_(e,t,i,s),$_(e,e)}const oP=function(){const e=pi();return function(t,i,s){return E_(t,nne(t,i),Zse(e,i,s))}}(),ine=function(){const e=il(),t=pi();return function(i,s,l,d){const y=cp(s),g=A_(s);return ji(t,y,y),qC(e,t),Zg(e,e,g),Ad(e,e,oP(t,l,d)),Ad(e,e,[0,d.top-d.bottom]),ji(i,e[4],e[5])}}();function cp(e){return e.scale*rne(e.targetGeometry)}function rne(e){return X(e)&&Cr(e.spatialReference)?1/(nP(e.spatialReference)*rP*iP):1}function A_(e){return N5(e.rotation)||0}function sne(e){return Cr(e)?nP(e)*rP*iP:1}function nne(e,t){return af(e,t,.5)}const O_=function(){const e=pi(),t=pi(),i=pi();return function(s,l,d,y,g,_){return KC(e,l),af(t,d,.5*_),ji(i,1/y*_,-1/y*_),T_(s,t),g&&Zg(s,s,g),I_(s,s,i),Ad(s,s,e),s}}(),C_=function(){const e=pi();return function(t,i,s,l){const d=cp(i),y=A_(i);return k_(e,i.targetGeometry),O_(t,e,s,d,y,l)}}(),one=function(){const e=pi();return function(t,i,s,l){const d=cp(i);return k_(e,i.targetGeometry),O_(t,e,s,d,0,l)}}();function ane(e){if(e.isWrappable){const t=ln(e);return t.valid[1]-t.valid[0]}return 0}function lne(e,t){return Math.round(ane(e)/t)}const une=function(){const e=pi(),t=pi(),i=[0,0,0];return function(s,l,d){Cd(e,s,l),Y9(e,e),Cd(t,s,d),Y9(t,t),XC(i,e,t);let y=Math.acos(YC(e,t)/(qm(e)*qm(t)))*Kse;return i[2]<0&&(y=-y),isNaN(y)&&(y=0),y}}(),hne=function(){const e=pi();return function(t,i,s,l){const d=t.targetGeometry;return fn(t,i),ine(e,i,s,l),d.x+=e[0],d.y+=e[1],t}}(),X9=function(e,t,i){fn(e,t);const s=e.targetGeometry;return s.x=i.x,s.y=i.y,s.spatialReference=i.spatialReference,e},cne=function(){const e=pi();return function(t,i,s,l,d){d||(d="center"),E_(e,s,l),af(e,e,.5);const y=e[0],g=e[1];switch(d){case"center":ji(e,0,0);break;case"left":ji(e,-y,0);break;case"top":ji(e,0,g);break;case"right":ji(e,y,0);break;case"bottom":ji(e,0,-g);break;case"top-left":ji(e,-y,g);break;case"bottom-left":ji(e,-y,-g);break;case"top-right":ji(e,y,g);break;case"bottom-right":ji(e,y,-g)}return Qg(t,i,e),t}}();function Lce(e,t,i){return fn(e,t),e.rotation+=i,e}function pne(e,t,i){return fn(e,t),e.rotation=i,e}const dne=function(){const e=pi();return function(t,i,s,l,d){return fn(t,i),isNaN(s)||s===0||(lP(e,l,i,d),t.scale=i.scale*s,uP(e,e,t,d),Qg(t,t,ji(e,e[0]-l[0],l[1]-e[1]))),t}}();function LS(e,t,i){return fn(e,t),e.scale=i,e}const aP=function(){const e=pi();return function(t,i,s,l,d,y){return fn(t,i),isNaN(s)||s===0||(lP(e,d,i,y),t.scale=i.scale*s,t.rotation+=l,uP(e,e,t,y),Qg(t,t,ji(e,e[0]-d[0],d[1]-e[1]))),t}}(),Dce=function(){const e=pi(),t=pi();return function(i,s,l,d,y,g,_){return oP(t,g,_),BC(e,y,t),d?aP(i,s,l,d,e,g):dne(i,s,l,e,g)}}(),lP=function(){const e=il();return function(t,i,s,l){return Ln(t,i,tne(e,s,l,1))}}(),uP=function(){const e=il();return function(t,i,s,l){return Ln(t,i,C_(e,s,l,1))}}(),Qg=function(){const e=pi(),t=il();return function(i,s,l){fn(i,s);const d=cp(s),y=i.targetGeometry;return GC(t,A_(s)),I_(t,t,uf(d,d)),Ln(e,l,t),y.x+=e[0],y.y+=e[1],i}}();class fne{constructor(t,i,s,l){const d=t.targetGeometry,y=i.targetGeometry;l?typeof l=="string"&&(l=tse(l)||ws.ease):l=ws.ease,this.easing=l,this.duration=s,this.sCenterX=d.x,this.sCenterY=d.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=y.x,this.tCenterY=y.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,i){const s=this.easing(i);let l,d,y,g;i>=1?(l=this.tCenterX,d=this.tCenterY,y=this.tRotation,g=this.tScale):(l=this.sCenterX+s*this.dCenterX,d=this.sCenterY+s*this.dCenterY,y=this.sRotation+s*this.dRotation,g=this.sScale+s*this.dScale),t.targetGeometry.x=l,t.targetGeometry.y=d,t.scale=g,t.rotation=y}}let $o=class extends Fe{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=ws.ease,this.view=null,this.viewpoint=null,this.viewpoint=new qn({targetGeometry:new Be,scale:0,rotation:0}),this._updateTask=Mc({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,i){this.stop();const s=this.viewpoint;fn(s,t),this.transition=new fne(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const l=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(l,l),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const i=new K9({target:e.clone()}),s=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==K9.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const i=(performance.now()-this._startTime)/this.transition.duration,s=i>=1;this.transition.applyRatio(this.viewpoint,i),s&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};b([S()],$o.prototype,"animation",void 0),b([S()],$o.prototype,"duration",void 0),b([S()],$o.prototype,"transition",void 0),b([S()],$o.prototype,"easing",void 0),b([S()],$o.prototype,"view",void 0),b([S()],$o.prototype,"viewpoint",void 0),$o=b([H("esri.views.2d.AnimationManager")],$o);const yne=$o;class mne{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:i,graphicsView:s,labelManager:l,layerViews:d,state:{id:y}}=this.view;i.baseLayerViews.forEach(this._updateLayerView,this),d.forEach(this._updateLayerView,this),i.referenceLayerViews.forEach(this._updateLayerView,this),X(l)&&(l.lastUpdateId!==y&&(l.viewChange(),l.lastUpdateId=y),l.updateRequested&&l.processUpdate(this._updateParameters)),X(s)&&(s.lastUpdateId!==y&&(s.viewChange(),s.lastUpdateId=y),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){this._frameTaskHandle||(this.stationary=this.view.stationary,this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions},this._stationaryHandle=this.view.watch("stationary",t=>{this.stationary=t,this.requestFrame()}),this._frameTaskHandle=Mc(this),this.requestUpdate())}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){const i=this.view.state,s=t.lastUpdateId;s!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),s!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}}function Ai(){return Promise.all([import("./webglDeps.904dcd18.js"),import("./mapViewDeps.1c43b8af.js")])}const Cp=()=>Ai().then(()=>import("./TileLayerView2D.c5b25500.js")),u1=()=>Ai().then(()=>import("./FeatureLayerView2D.5aad2127.js")),DS={"base-dynamic":()=>Ai().then(()=>import("./BaseDynamicLayerView2D.6e68130f.js")),"base-tile":Cp,"bing-maps":Cp,csv:u1,"geo-rss":()=>Ai().then(()=>import("./GeoRSSLayerView2D.bfb799da.js")),feature:u1,geojson:u1,graphics:()=>Ai().then(()=>import("./GraphicsLayerView2D.be609639.js")),group:()=>Ai().then(()=>import("./GroupLayerView2D.8d6d32f0.js")),imagery:()=>Ai().then(()=>import("./ImageryLayerView2D.6421004a.js")),"imagery-tile":()=>Ai().then(()=>import("./ImageryTileLayerView2D.5362f5b2.js")),kml:()=>Ai().then(()=>import("./KMLLayerView2D.97de4bf0.js")),"map-image":()=>Ai().then(()=>import("./MapImageLayerView2D.e63e3be9.js")),"map-notes":()=>Ai().then(()=>import("./MapNotesLayerView2D.9187c455.js")),"ogc-feature":()=>Ai().then(()=>import("./OGCFeatureLayerView2D.9357d4a3.js")),"open-street-map":Cp,route:()=>Ai().then(()=>import("./RouteLayerView2D.d1a962c3.js")),stream:()=>Ai().then(()=>import("./StreamLayerView2D.981dc993.js")),"subtype-group":()=>Ai().then(()=>import("./SubtypeGroupLayerView2D.01a00825.js")),tile:Cp,"vector-tile":()=>Ai().then(()=>import("./VectorTileLayerView2D.02ff9d95.js")),wcs:()=>Ai().then(()=>import("./ImageryTileLayerView2D.5362f5b2.js")),"web-tile":Cp,wfs:u1,wms:()=>Ai().then(()=>import("./WMSLayerView2D.ccf645d6.js")),wmts:()=>Ai().then(()=>import("./WMTSLayerView2D.14e1984c.js")),analysis:null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function gne(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new re(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const zS={hasLayerViewModule:e=>X(DS[e.type]),importLayerView:e=>{const t=DS[e.type];if(!X(t))throw gne(e);return t(e)}};function vne(e,t){const{spatialReference:i}=t,s=[t.x,t.y];let l=Number.POSITIVE_INFINITY,d=0,y=0;const g=[0,0],_=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const M of _)for(let E=0;E<M.length-1;E++){RD(g,s,M,E);const O=lf(s,g);O<l&&(l=O,d=g[0],y=g[1])}return{coordinate:new Be({x:d,y,spatialReference:i}),distance:l}}var Z9;const bne=Se.getLogger("esri.views.MapView");let uu=Z9=class extends Fe{constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(ce(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Wd(this.geometry,this.spatialReference)}catch(e){return bne.error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(ce(this.normalizedGeometry))return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?dg(this.normalizedGeometry,i):L$(this.normalizedGeometry,i))return e;const{coordinate:s}=vne(this.normalizedGeometry,i);return s&&(e.targetGeometry=s),e}clone(){var e,t;return new Z9({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};b([S({constructOnly:!0})],uu.prototype,"geometry",void 0),b([S({readOnly:!0})],uu.prototype,"normalizedGeometry",null),b([S({constructOnly:!0})],uu.prototype,"spatialReference",void 0),uu=Z9=b([H("esri.views.2d.constraints.GeometryConstraint")],uu);var Q9;let A0=Q9=class extends Fe{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new Q9({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};b([S()],A0.prototype,"enabled",void 0),b([S()],A0.prototype,"rotationEnabled",void 0),A0=Q9=b([H("esri.views.2d.constraints.RotationConstraint")],A0);const hP=A0;var e5;let xr=e5=class extends Fe{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:s,minZoom:l,maxZoom:d}=this,y=-1,g=-1,_=!1,M=!1;if(i!==0&&s!==0&&i<s&&([i,s]=[s,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",s);t=t.map(E=>E.clone()),t.sort((E,O)=>O.scale-E.scale),t.forEach((E,O)=>E.level=O);for(const E of t)!_&&i>0&&i>=E.scale&&(y=E.level,_=!0),!M&&s>0&&s>=E.scale&&(g=e?e.level:-1,M=!0),e=E;l===-1&&(l=i===0?0:y),d===-1&&(d=s===0?t.length-1:g),l=Math.max(l,0),l=Math.min(l,t.length-1),d=Math.max(d,0),d=Math.min(d,t.length-1),l>d&&([l,d]=[d,l]),i=t[l].scale,s=t[d].scale,t.splice(0,l),t.splice(d-l+1,t.length),t.forEach((E,O)=>{this._lodByScale[E.scale]=E,this._scales[O]=E.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",l),this._set("effectiveMaxZoom",d),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",s)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,s=this.effectiveMaxScale,l=e.targetGeometry,d=t&&t.targetGeometry,y=s!==0&&e.scale<s,g=i!==0&&e.scale>i;if(y||g){const _=g?i:s;if(d){const M=(_-t.scale)/(e.scale-t.scale);l.x=d.x+(l.x-d.x)*M,l.y=d.y+(l.y-d.y)*M}e.scale=_}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),s=Math.round(e);return t[s]+(s-e)*(t[i]-t[s])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,s;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let l=0;l<t.length-1;l++){if(i=t[l],s=t[l+1],s===e)return l+this.effectiveMinZoom+1;if(i>e&&s<e)return l+this.effectiveMinZoom+1-(e-s)/(i-s)}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new e5({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};b([S({readOnly:!0})],xr.prototype,"effectiveLODs",void 0),b([S({readOnly:!0})],xr.prototype,"effectiveMinZoom",void 0),b([S({readOnly:!0})],xr.prototype,"effectiveMaxZoom",void 0),b([S({readOnly:!0})],xr.prototype,"effectiveMinScale",void 0),b([S({readOnly:!0})],xr.prototype,"effectiveMaxScale",void 0),b([S()],xr.prototype,"lods",void 0),b([S()],xr.prototype,"minZoom",void 0),b([S()],xr.prototype,"maxZoom",void 0),b([S()],xr.prototype,"minScale",void 0),b([S()],xr.prototype,"maxScale",void 0),b([S()],xr.prototype,"snapToZoom",void 0),xr=e5=b([H("esri.views.2d.constraints.ZoomConstraint")],xr);const cP=xr,wne={base:null,key:"type",typeMap:{extent:Mt,polygon:Ts}};let ui=class extends Fe{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null),this._set("_geometry",null)}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e;return this.commitProperty("_zoom"),this.commitProperty("_rotation"),this.commitProperty("_geometry"),((e=this._get("version"))!=null?e:0)+1}get _defaultLODs(){var e,t,i;const s=(e=this.view)==null||(t=e.defaultsFromMap)==null?void 0:t.tileInfo,l=(i=this.view)==null?void 0:i.spatialReference;return s&&l&&s.spatialReference.equals(l)?s.lods:null}get _geometry(){var e;return new uu({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new hP({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,i=this.minZoom,s=this.maxZoom,l=this.minScale,d=this.maxScale,y=this.snapToZoom;return e&&e.lods===t&&e.minZoom===i&&e.maxZoom===s&&e.minScale===l&&e.maxScale===d&&e.snapToZoom===y?e:new cP({lods:t,minZoom:i,maxZoom:s,minScale:l,maxScale:d,snapToZoom:y})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};b([S({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],ui.prototype,"effectiveLODs",void 0),b([S({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],ui.prototype,"effectiveMinScale",void 0),b([S({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],ui.prototype,"effectiveMaxScale",void 0),b([S({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],ui.prototype,"effectiveMinZoom",void 0),b([S({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],ui.prototype,"effectiveMaxZoom",void 0),b([S({types:wne,value:null})],ui.prototype,"geometry",null),b([S({type:[b4]})],ui.prototype,"lods",void 0),b([S()],ui.prototype,"minScale",void 0),b([S()],ui.prototype,"maxScale",void 0),b([S()],ui.prototype,"minZoom",void 0),b([S()],ui.prototype,"maxZoom",void 0),b([S()],ui.prototype,"rotationEnabled",void 0),b([S()],ui.prototype,"snapToZoom",void 0),b([S()],ui.prototype,"view",void 0),b([S({readOnly:!0})],ui.prototype,"version",null),b([S()],ui.prototype,"_defaultLODs",null),b([S({type:uu})],ui.prototype,"_geometry",null),b([S({type:hP})],ui.prototype,"_rotation",null),b([S({readOnly:!0,type:cP})],ui.prototype,"_zoom",null),ui=b([H("esri.views.2d.MapViewConstraints")],ui);const pP=ui;function dP(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function _ne(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function xne(e,t,i,s,l,d){const y=new Float32Array(6);return y[0]=e,y[1]=t,y[2]=i,y[3]=s,y[4]=l,y[5]=d,y}function Sne(e,t){return new Float32Array(e,t,6)}function fP(e,t,i,s){const l=t[s],d=t[s+1];e[s]=i[0]*l+i[2]*d+i[4],e[s+1]=i[1]*l+i[3]*d+i[5]}function Mne(e,t,i,s=0,l=0,d=2){const y=l||t.length/d;for(let g=s;g<y;g++)fP(e,t,i,g*d)}Object.freeze({__proto__:null,create:dP,clone:_ne,fromValues:xne,createView:Sne,transform:fP,transformMany:Mne});function $ne(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Ine(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function yP(e,t,i,s,l,d,y,g,_,M){return e[0]=t,e[1]=i,e[2]=s,e[3]=l,e[4]=d,e[5]=y,e[6]=g,e[7]=_,e[8]=M,e}function mP(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Tne(e,t){if(e===t){const i=t[1],s=t[2],l=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=s,e[7]=l}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Ene(e,t){const i=t[0],s=t[1],l=t[2],d=t[3],y=t[4],g=t[5],_=t[6],M=t[7],E=t[8],O=E*y-g*M,P=-E*d+g*_,j=M*d-y*_;let R=i*O+s*P+l*j;return R?(R=1/R,e[0]=O*R,e[1]=(-E*s+l*M)*R,e[2]=(g*s-l*y)*R,e[3]=P*R,e[4]=(E*i-l*_)*R,e[5]=(-g*i+l*d)*R,e[6]=j*R,e[7]=(-M*i+s*_)*R,e[8]=(y*i-s*d)*R,e):null}function kne(e,t){const i=t[0],s=t[1],l=t[2],d=t[3],y=t[4],g=t[5],_=t[6],M=t[7],E=t[8];return e[0]=y*E-g*M,e[1]=l*M-s*E,e[2]=s*g-l*y,e[3]=g*_-d*E,e[4]=i*E-l*_,e[5]=l*d-i*g,e[6]=d*M-y*_,e[7]=s*_-i*M,e[8]=i*y-s*d,e}function Ane(e){const t=e[0],i=e[1],s=e[2],l=e[3],d=e[4],y=e[5],g=e[6],_=e[7],M=e[8];return t*(M*d-y*_)+i*(-M*l+y*g)+s*(_*l-d*g)}function P_(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=t[4],_=t[5],M=t[6],E=t[7],O=t[8],P=i[0],j=i[1],R=i[2],z=i[3],q=i[4],Y=i[5],te=i[6],ne=i[7],he=i[8];return e[0]=P*s+j*y+R*M,e[1]=P*l+j*g+R*E,e[2]=P*d+j*_+R*O,e[3]=z*s+q*y+Y*M,e[4]=z*l+q*g+Y*E,e[5]=z*d+q*_+Y*O,e[6]=te*s+ne*y+he*M,e[7]=te*l+ne*g+he*E,e[8]=te*d+ne*_+he*O,e}function t5(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=t[4],_=t[5],M=t[6],E=t[7],O=t[8],P=i[0],j=i[1];return e[0]=s,e[1]=l,e[2]=d,e[3]=y,e[4]=g,e[5]=_,e[6]=P*s+j*y+M,e[7]=P*l+j*g+E,e[8]=P*d+j*_+O,e}function gP(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=t[4],_=t[5],M=t[6],E=t[7],O=t[8],P=Math.sin(i),j=Math.cos(i);return e[0]=j*s+P*y,e[1]=j*l+P*g,e[2]=j*d+P*_,e[3]=j*y-P*s,e[4]=j*g-P*l,e[5]=j*_-P*d,e[6]=M,e[7]=E,e[8]=O,e}function One(e,t,i){const s=i[0],l=i[1],d=i[2];return e[0]=s*t[0],e[1]=s*t[1],e[2]=s*t[2],e[3]=l*t[3],e[4]=l*t[4],e[5]=l*t[5],e[6]=d*t[6],e[7]=d*t[7],e[8]=d*t[8],e}function Cne(e,t,i){const s=i[0],l=i[1];return e[0]=s*t[0],e[1]=s*t[1],e[2]=s*t[2],e[3]=l*t[3],e[4]=l*t[4],e[5]=l*t[5],e}function Pne(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Nne(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=i,e[2]=0,e[3]=-i,e[4]=s,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function jne(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Fne(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Rne(e,t){const i=t[0],s=t[1],l=t[2],d=t[3],y=i+i,g=s+s,_=l+l,M=i*y,E=s*y,O=s*g,P=l*y,j=l*g,R=l*_,z=d*y,q=d*g,Y=d*_;return e[0]=1-O-R,e[3]=E-Y,e[6]=P+q,e[1]=E+Y,e[4]=1-M-R,e[7]=j-z,e[2]=P-q,e[5]=j+z,e[8]=1-M-O,e}function Lne(e,t){const i=t[0],s=t[1],l=t[2],d=t[4],y=t[5],g=t[6],_=t[8],M=t[9],E=t[10],O=E*y-g*M,P=-E*d+g*_,j=M*d-y*_,R=i*O+s*P+l*j;if(!R)return null;const z=1/R;return e[0]=O*z,e[1]=(-E*s+l*M)*z,e[2]=(g*s-l*y)*z,e[3]=P*z,e[4]=(E*i-l*_)*z,e[5]=(-g*i+l*d)*z,e[6]=j*z,e[7]=(-M*i+s*_)*z,e[8]=(y*i-s*d)*z,e}function Dne(e,t){const i=t[0],s=t[1],l=t[2],d=t[3],y=t[4],g=t[5],_=t[6],M=t[7],E=t[8],O=t[9],P=t[10],j=t[11],R=t[12],z=t[13],q=t[14],Y=t[15],te=i*g-s*y,ne=i*_-l*y,he=i*M-d*y,se=s*_-l*g,ue=s*M-d*g,Ee=l*M-d*_,Oe=E*z-O*R,Le=E*q-P*R,Ne=E*Y-j*R,je=O*q-P*z,De=O*Y-j*z,rt=P*Y-j*q;let Ve=te*rt-ne*De+he*je+se*Ne-ue*Le+Ee*Oe;return Ve?(Ve=1/Ve,e[0]=(g*rt-_*De+M*je)*Ve,e[1]=(_*Ne-y*rt-M*Le)*Ve,e[2]=(y*De-g*Ne+M*Oe)*Ve,e[3]=(l*De-s*rt-d*je)*Ve,e[4]=(i*rt-l*Ne+d*Le)*Ve,e[5]=(s*Ne-i*De-d*Oe)*Ve,e[6]=(z*Ee-q*ue+Y*se)*Ve,e[7]=(q*he-R*Ee-Y*ne)*Ve,e[8]=(R*ue-z*he+Y*te)*Ve,e):null}function zne(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Vne(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Gne(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function qne(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function vP(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function Une(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function Bne(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e[4]=t[4]+i[4]*s,e[5]=t[5]+i[5]*s,e[6]=t[6]+i[6]*s,e[7]=t[7]+i[7]*s,e[8]=t[8]+i[8]*s,e}function Hne(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Wne(e,t){const i=e[0],s=e[1],l=e[2],d=e[3],y=e[4],g=e[5],_=e[6],M=e[7],E=e[8],O=t[0],P=t[1],j=t[2],R=t[3],z=t[4],q=t[5],Y=t[6],te=t[7],ne=t[8];return Math.abs(i-O)<=Ke*Math.max(1,Math.abs(i),Math.abs(O))&&Math.abs(s-P)<=Ke*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(l-j)<=Ke*Math.max(1,Math.abs(l),Math.abs(j))&&Math.abs(d-R)<=Ke*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(y-z)<=Ke*Math.max(1,Math.abs(y),Math.abs(z))&&Math.abs(g-q)<=Ke*Math.max(1,Math.abs(g),Math.abs(q))&&Math.abs(_-Y)<=Ke*Math.max(1,Math.abs(_),Math.abs(Y))&&Math.abs(M-te)<=Ke*Math.max(1,Math.abs(M),Math.abs(te))&&Math.abs(E-ne)<=Ke*Math.max(1,Math.abs(E),Math.abs(ne))}function Jne(e){const t=Ke,i=e[0],s=e[1],l=e[2],d=e[3],y=e[4],g=e[5],_=e[6],M=e[7],E=e[8];return Math.abs(1-(i*i+d*d+_*_))<=t&&Math.abs(1-(s*s+y*y+M*M))<=t&&Math.abs(1-(l*l+g*g+E*E))<=t}const Kne=P_,Yne=vP;Object.freeze({__proto__:null,fromMat4:$ne,copy:Ine,set:yP,identity:mP,transpose:Tne,invert:Ene,adjoint:kne,determinant:Ane,multiply:P_,translate:t5,rotate:gP,scale:One,scaleByVec2:Cne,fromTranslation:Pne,fromRotation:Nne,fromScaling:jne,fromMat2d:Fne,fromQuat:Rne,normalFromMat4Legacy:Lne,normalFromMat4:Dne,projection:zne,str:Vne,frob:Gne,add:qne,subtract:vP,multiplyScalar:Une,multiplyScalarAndAdd:Bne,exactEquals:Hne,equals:Wne,isOrthoNormal:Jne,mul:Kne,sub:Yne});function $y(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function Xne(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Zne(e,t,i,s,l,d,y,g,_){const M=new Float32Array(9);return M[0]=e,M[1]=t,M[2]=i,M[3]=s,M[4]=l,M[5]=d,M[6]=y,M[7]=g,M[8]=_,M}function Qne(e,t){return new Float32Array(e,t,9)}Object.freeze({__proto__:null,create:$y,clone:Xne,fromValues:Zne,createView:Qne});function bP(){return new Float32Array(2)}function eoe(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function zc(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function toe(e,t){return new Float32Array(e,t,2)}function wP(){return bP()}function _P(){return zc(1,1)}function xP(){return zc(1,0)}function SP(){return zc(0,1)}const ioe=wP(),roe=_P(),soe=xP(),noe=SP();Object.freeze({__proto__:null,create:bP,clone:eoe,fromValues:zc,createView:toe,zeros:wP,ones:_P,unitX:xP,unitY:SP,ZEROS:ioe,ONES:roe,UNIT_X:soe,UNIT_Y:noe});function ooe(e){return e instanceof Float32Array&&e.length>=2}function aoe(e){return Array.isArray(e)&&e.length>=2}function P2(e){return ooe(e)||aoe(e)}var i5;const no=[0,0];let Aa=i5=class extends ge{constructor(e){super(e),this._viewpoint2D={center:pi(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new Mt,this.id=0,this.inverseTransform=il(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=il(),this.transformNoRotation=il(),this.displayMat3=$y(),this.displayViewMat3=$y(),this.viewMat3=$y(),this.viewMat2d=dP(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=fn(i,e.viewpoint),this._set("size",Od(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new i5({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return P2(t)?Ln(e,t,this.inverseTransform):(no[0]=t,no[1]=i,Ln(e,no,this.inverseTransform))}toScreen(e,t,i){return P2(t)?Ln(e,t,this.transform):(no[0]=t,no[1]=i,Ln(e,no,this.transform))}toScreenNoRotation(e,t,i){return P2(t)?Ln(e,t,this.transformNoRotation):(no[0]=t,no[1]=i,Ln(e,no,this.transformNoRotation))}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,l=this._get("size");return O_(e,i,l,t,0,s),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:s}=this._viewpoint2D,l=this._get("pixelRatio")||1,d=this._get("size"),y=new qn({targetGeometry:new Be(e[0],e[1],t),scale:i,rotation:s});if(this._set("viewpoint",y),!d||!t||!i)return;this.resolution=cp(y),this.rotation=s,this.scale=i,this.spatialReference=t,Od(this.center,e);const g=d[0]!==0?2/d[0]:0,_=d[1]!==0?-2/d[1]:0;yP(this.displayMat3,g,0,0,0,_,0,-1,1,1);const M=mP(this.viewMat3),E=zc(d[0]/2,d[1]/2),O=zc(-d[0]/2,-d[1]/2),P=N5(s);t5(M,M,E),gP(M,M,P),t5(M,M,O),P_(this.displayViewMat3,this.displayMat3,M);const j=T_(this.viewMat2d,E);return Zg(j,j,P),Ad(j,j,O),Qse(this.extent,y,d),C_(this.transform,y,d,l),$_(this.inverseTransform,this.transform),one(this.transformNoRotation,y,d,l),this.worldScreenWidth=lne(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};b([S({readOnly:!0})],Aa.prototype,"id",void 0),b([S({value:1,json:{write:!0}})],Aa.prototype,"pixelRatio",null),b([S({json:{write:!0}})],Aa.prototype,"size",null),b([S()],Aa.prototype,"spatialReference",void 0),b([S({type:qn,json:{write:!0}})],Aa.prototype,"viewpoint",null),Aa=i5=b([H("esri.views.2d.ViewState")],Aa);const VS=Aa;var r5,s5;let Po=r5=class extends Fe{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new r5({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};b([S()],Po.prototype,"left",void 0),b([S()],Po.prototype,"top",void 0),b([S()],Po.prototype,"right",void 0),b([S()],Po.prototype,"bottom",void 0),Po=r5=b([H("esri.views.2d.PaddedViewState.Padding")],Po);let Jh=s5=class extends VS{constructor(...e){super(...e),this.paddedViewState=new VS,this._updateContent=(()=>{const t=pi();return()=>{const i=this._get("size"),s=this._get("padding");if(!i||!s)return;const l=this.paddedViewState;ji(t,s.left+s.right,s.top+s.bottom),Cd(t,i,t),Od(l.size,t);const d=l.viewpoint;d&&(this.viewpoint=d)}})(),this.watch(["size","padding"],this._updateContent,!0),this.padding=new Po,this.size=[0,0]}set padding(e){this._set("padding",e||new Po)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,hne(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,s=t.targetGeometry;i.center[0]=s.x,i.center[1]=s.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=s.spatialReference,this._update()}}clone(){return new s5({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};b([S()],Jh.prototype,"paddedViewState",void 0),b([S({type:Po})],Jh.prototype,"padding",null),b([S()],Jh.prototype,"viewpoint",null),Jh=s5=b([H("esri.views.2d.PaddedViewState")],Jh);const loe=Jh;class uoe{constructor(t,i){this.item=t,this.controller=i,this.promise=null}}class MP{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new U9(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&X(i)&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,s)=>t(s))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,i){const s=this.get(t);if(s)return s;const l=new AbortController;let d=null;i&&(d=cn(i,()=>l.abort()));const y=()=>{const E=this._processingItems.get(t);E&&E.controller.abort(),g(),M.reject(yi())},g=()=>{_.remove(),X(d)&&d.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},_=ig(l.signal,y),M=Vo();return this._deferreds.set(t,M),this._controllers.set(t,l),M.promise.then(g,g),this._queue.push(t),this._scheduleNext(),M.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(i=>t.push(i)),this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=Rd(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(ce(t))return;let i;const s=new AbortController,l=new uoe(t,s);this._processingItems.set(t,l);try{i=this.process(t,s.signal)}catch(d){this._processError(l,d)}Bo(i)?(l.promise=i,i.then(d=>this._processResult(l,d),d=>this._processError(l,d))):this._processResult(l,i)}get test(){return{update:t=>this.runTask(t)}}}function hoe(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const N2=new Set,h1=[],fh=new Map,GS=[0,0];let ia=class extends Fe{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new MP({concurrency:e,process:(i,s)=>{const l=this._keyToItem.get(i);return t(l,{signal:s})},peeker:i=>i.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const i=e.key.id+"-"+t;if(this.has(i))return this.get(i);const s=this._queue.push(i),l=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),s.then(l,l),this.notifyChange("updating"),s}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach(M=>{const E=this._keyToItem.get(M),O=this.tileInfoView.getTileScale(E.key);fh.has(O)||(fh.set(O,[]),i=Math.max(O,i),s=Math.min(O,s)),fh.get(O).push(E.key),N2.add(O)});let l=this.state.scale;fh.has(l)||(hoe(h1,N2),h1.sort((M,E)=>M-E),l=h1.reduce((M,E)=>Math.abs(E-l)<Math.abs(M-l)?E:M,h1[0])),l=Math.min(l,i),l=Math.max(l,s);const d=fh.get(l),y=t.getClosestInfoForScale(l),g=y.getColumnForX(this.state.center[0]),_=y.getRowForY(this.state.center[1]);return d.sort((M,E)=>{const O=y.denormalizeCol(M.col,M.world),P=y.denormalizeCol(E.col,E.world);return Math.sqrt((g-O)*(g-O)+(_-M.row)*(_-M.row))-Math.sqrt((g-P)*(g-P)+(_-E.row)*(_-E.row))}),N2.clear(),fh.clear(),d[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let s=Number.POSITIVE_INFINITY,l=null;return e.forEach(d=>{const y=this._keyToItem.get(d);t.getTileCoords(GS,y.key);const g=lf(GS,i);g<s&&(s=g,l=y.key)}),l.id}};b([S({constructOnly:!0})],ia.prototype,"concurrency",void 0),b([S({constructOnly:!0})],ia.prototype,"process",void 0),b([S()],ia.prototype,"state",void 0),b([S({constructOnly:!0})],ia.prototype,"strategy",void 0),b([S({constructOnly:!0})],ia.prototype,"tileInfoView",void 0),b([S({readOnly:!0})],ia.prototype,"updating",null),ia=b([H("esri.views.2d.tiling.PagedTileQueue")],ia);class Mr{constructor(t,i,s,l){this.set(t,i,s,l)}static getId(t,i,s,l){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${s}/${l}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,s=63&this.level;return(3&this.world)<<30|i<<22|t<<8|s}acquire(t,i,s,l){this.set(t,i,s,l)}contains(t){const i=t.level-this.level;return this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Mr(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,s,l){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[d,y,g,_]=t.split("/");this.level=parseFloat(d),this.row=parseFloat(y),this.col=parseFloat(g),this.world=parseFloat(_)}else this.level=+t,this.row=+i,this.col=+s,this.world=+l||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Mr(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,i=this.row<<1,s=this.col<<1,l=this.world;return[new Mr(t,i,s,l),new Mr(t,i,s+1,l),new Mr(t,i+1,s,l),new Mr(t,i+1,s+1,l)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}Mr.pool=new hn(Mr,null,null,25,50);function ra(e,t){return[e,t]}function wl(e,t,i){return e[0]=t,e[1]=i,e}function coe(e,t,i,s,l){return e[0]=t,e[1]=i,e[2]=s,e[3]=l,e}const Rs=new Mr("0/0/0/0");class N_{constructor(t,i,s,l,d,y,g,_,M,E,O,P){this.level=t,this.resolution=i,this.scale=s,this.origin=l,this.first=d,this.last=y,this.size=g,this.norm=_,this.worldStart=M,this.worldEnd=E,this.worldSize=O,this.wrap=P}static create(t,i,s=null){const l=ln(t.spatialReference),d=i.origin||ra(t.origin.x,t.origin.y),y=ra(t.size[0]*i.resolution,t.size[1]*i.resolution),g=ra(-1/0,-1/0),_=ra(1/0,1/0),M=ra(1/0,1/0);X(s)&&(wl(g,Math.max(0,Math.floor((s.xmin-d[0])/y[0])),Math.max(0,Math.floor((d[1]-s.ymax)/y[1]))),wl(_,Math.max(0,Math.floor((s.xmax-d[0])/y[0])),Math.max(0,Math.floor((d[1]-s.ymin)/y[1]))),wl(M,_[0]-g[0]+1,_[1]-g[1]+1));const{cols:E,rows:O}=i;let P,j,R,z;return!s&&E&&O&&(wl(g,E[0],O[0]),wl(_,E[1],O[1]),wl(M,E[1]-E[0]+1,O[1]-O[0]+1)),t.isWrappable?(P=ra(Math.ceil(Math.round((l.valid[1]-l.valid[0])/i.resolution)/t.size[0]),M[1]),j=ra(Math.floor((l.origin[0]-d[0])/y[0]),g[1]),R=ra(P[0]+j[0]-1,_[1]),z=!0):(j=g,R=_,P=M,z=!1),new N_(i.level,i.resolution,i.scale,d,g,_,M,y,j,R,P,z)}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,s=!1){Rs.set(i);const l=s?Rs.col:this.denormalizeCol(Rs.col,Rs.world),d=Rs.row;return coe(t,this.getXForColumn(l),this.getYForRow(d+1),this.getXForColumn(l+1),this.getYForRow(d)),t}getTileCoords(t,i,s=!1){Rs.set(i);const l=s?Rs.col:this.denormalizeCol(Rs.col,Rs.world);return Array.isArray(t)?wl(t,this.getXForColumn(l),this.getYForRow(Rs.row)):(t.x=this.getXForColumn(l),t.y=this.getYForRow(Rs.row)),t}}class Vc{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,i){const{spans:s,lodInfo:l}=this,{level:d}=l;if(s.length!==0)for(const{row:y,colFrom:g,colTo:_}of s)for(let M=g;M<=_;M++)t.call(i,d,y,l.normalizeCol(M),l.getWorldForColumn(M))}}Vc.pool=new hn(Vc);class j2{constructor(t,i,s){this.row=t,this.colFrom=i,this.colTo=s}}const qt=new Mr("0/0/0/0");class j_{constructor(t,i,s,l,d,y,g,_){this.x=t,this.ymin=i,this.ymax=s,this.invM=l,this.leftAdjust=d,this.rightAdjust=y,this.leftBound=g,this.rightBound=_}static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[s,l]=t,[d,y]=i,g=d-s,_=y-l,M=_!==0?g/_:0,E=(Math.ceil(l)-l)*M,O=(Math.floor(l)-l)*M;return new j_(s,Math.floor(l),Math.ceil(y),M,g<0?E:O,g<0?O:E,g<0?d:s,g<0?s:d)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const Dr=[[0,0],[0,0],[0,0],[0,0]],poe=1e-6;class doe{constructor(t,i=null){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const s=t.lods.slice();s.sort(function(d,y){return y.scale-d.scale});const l=this._lodInfos=s.map(d=>N_.create(t,d,i));s.forEach((d,y)=>{this._infoByLevel[d.level]=l[y],this._infoByScale[d.scale]=l[y],this.scales[y]=d.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,s=!1){qt.set(i);const l=this._infoByLevel[qt.level];return l?l.getTileBounds(t,qt,s):t}getTileCoords(t,i,s=!1){qt.set(i);const l=this._infoByLevel[qt.level];return l?l.getTileCoords(t,qt,s):t}getTileCoverage(t,i=192,s="closest"){const l=s==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),d=Vc.pool.acquire(l),y=this._wrap;let g,_,M,E=1/0,O=-1/0;const P=d.spans;Dr[0][0]=Dr[0][1]=Dr[1][1]=Dr[3][0]=-i,Dr[1][0]=Dr[2][0]=t.size[0]+i,Dr[2][1]=Dr[3][1]=t.size[1]+i;for(const q of Dr)t.toMap(q,q),q[0]=l.getColumnForX(q[0]),q[1]=l.getRowForY(q[1]);const j=[];let R=3;for(let q=0;q<4;q++){if(Dr[q][1]===Dr[R][1]){R=q;continue}const Y=j_.create(Dr[q],Dr[R]);E=Math.min(Y.ymin,E),O=Math.max(Y.ymax,O),j[Y.ymin]===void 0&&(j[Y.ymin]=[]),j[Y.ymin].push(Y),R=q}if(E==null||O==null||O-E>100)return null;let z=[];for(g=E;g<O;){j[g]!=null&&(z=z.concat(j[g])),_=1/0,M=-1/0;for(let q=z.length-1;q>=0;q--){const Y=z[q];_=Math.min(_,Y.getLeftCol()),M=Math.max(M,Y.getRightCol())}if(_=Math.floor(_),M=Math.floor(M),g>=l.first[1]&&g<=l.last[1])if(y)if(l.size[0]<l.worldSize[0]){const q=Math.floor(M/l.worldSize[0]);for(let Y=Math.floor(_/l.worldSize[0]);Y<=q;Y++)P.push(new j2(g,Math.max(l.getFirstColumnForWorld(Y),_),Math.min(l.getLastColumnForWorld(Y),M)))}else P.push(new j2(g,_,M));else _>l.last[0]||M<l.first[0]||(_=Math.max(_,l.first[0]),M=Math.min(M,l.last[0]),P.push(new j2(g,_,M)));g+=1;for(let q=z.length-1;q>=0;q--){const Y=z[q];Y.ymax>=g?Y.incrRow():z.splice(q,1)}}return d}getTileParentId(t){qt.set(t);const i=this._infoByLevel[qt.level],s=this._lodInfos.indexOf(i)-1;return s<0?null:(this._getTileIdAtLOD(qt,this._lodInfos[s],qt),qt.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){qt.set(i);const s=this._infoByLevel[qt.level],l=t.lodInfo;if(l.resolution>s.resolution){this._getTileIdAtLOD(qt,l,qt);const y=l.denormalizeCol(qt.col,qt.world);for(const g of t.spans)if(g.row===qt.row&&g.colFrom<=y&&g.colTo>=y)return!0}if(l.resolution<s.resolution){const[y,g,_,M]=t.spans.reduce((z,q)=>(z[0]=Math.min(z[0],q.row),z[1]=Math.max(z[1],q.row),z[2]=Math.min(z[2],q.colFrom),z[3]=Math.max(z[3],q.colTo),z),[1/0,-1/0,1/0,-1/0]),E=s.denormalizeCol(qt.col,qt.world),O=l.getColumnForX(s.getXForColumn(E)),P=l.getRowForY(s.getYForRow(qt.row)),j=l.getColumnForX(s.getXForColumn(E+1))-1,R=l.getRowForY(s.getYForRow(qt.row+1))-1;return!(O>M||j<_||P>g||R<y)}const d=l.denormalizeCol(qt.col,qt.world);return t.spans.some(y=>y.row===qt.row&&y.colFrom<=d&&y.colTo>=d)}normalizeBounds(t,i,s){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const l=ln(this.tileInfo.spatialReference),d=-s*(l.valid[1]-l.valid[0]);t[0]+=d,t[2]+=d}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let s=1;s<i.length-1;s++)if(t>i[s]+poe)return this._infoByScale[i[s-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((s,l)=>Math.abs(l-t)<Math.abs(s-t)?l:s,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let s=i.length-1;s>=0;s--)if(t<i[s])return s===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[s]].level+(i[s]-t)/(i[s]-i[s+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,i,s){const l=this._infoByLevel[s.level];return t.set(s),i.resolution<l.resolution?null:(i.resolution===l.resolution||(t.level=i.level,t.col=Math.floor(s.col*l.resolution/i.resolution+.01),t.row=Math.floor(s.row*l.resolution/i.resolution+.01)),t)}}function foe(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const F2=new Set,c1=[],yh=new Map,qS=[0,0];let Io=class extends Fe{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:i}=this;this._queue=new MP({concurrency:e,process:(s,l)=>{const d=this._keyToItem.get(s);return t(d,{signal:l})},peeker:i==="scale-first"?s=>this._peekByScaleFirst(s):s=>this._peekByCenterFirst(s)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const i=this._queue.push(t),s=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),i.then(s,s),this.notifyChange("updating"),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach(M=>{const E=this._keyToItem.get(M),O=this.tileInfoView.getTileScale(E.key);yh.has(O)||(yh.set(O,[]),i=Math.max(O,i),s=Math.min(O,s)),yh.get(O).push(E.key),F2.add(O)});let l=this.state.scale;yh.has(l)||(foe(c1,F2),c1.sort((M,E)=>M-E),l=c1.reduce((M,E)=>Math.abs(E-l)<Math.abs(M-l)?E:M,c1[0])),l=Math.min(l,i),l=Math.max(l,s);const d=yh.get(l),y=t.getClosestInfoForScale(l),g=y.getColumnForX(this.state.center[0]),_=y.getRowForY(this.state.center[1]);return d.sort((M,E)=>{const O=y.denormalizeCol(M.col,M.world),P=y.denormalizeCol(E.col,E.world);return Math.sqrt((g-O)*(g-O)+(_-M.row)*(_-M.row))-Math.sqrt((g-P)*(g-P)+(_-E.row)*(_-E.row))}),F2.clear(),yh.clear(),d[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let s=Number.POSITIVE_INFINITY,l=null;return e.forEach(d=>{const y=this._keyToItem.get(d);t.getTileCoords(qS,y.key);const g=lf(qS,i);g<s&&(s=g,l=y.key)}),l.id}};b([S({constructOnly:!0})],Io.prototype,"concurrency",void 0),b([S({constructOnly:!0})],Io.prototype,"process",void 0),b([S()],Io.prototype,"state",void 0),b([S({constructOnly:!0})],Io.prototype,"strategy",void 0),b([S({constructOnly:!0})],Io.prototype,"tileInfoView",void 0),b([S({readOnly:!0})],Io.prototype,"updating",null),Io=b([H("esri.views.2d.tiling.TileQueue")],Io);const zce=Io;class yoe{constructor(t,i,s){this.maxSize=t,this.tileInfoView=i,this.removedFunc=s,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return null;const s=i.key.level,l=this._tileKeysPerLevel[s];US(this._tilePerId,t);for(let d=0;d<l.length;d++)if(l[d].id===t){l.splice(d,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,s=i.id;if(this._tilePerId.has(s))return;this._tilePerId.set(s,t);const l=i.level;this._tileKeysPerLevel[l]||(this._tileKeysPerLevel[l]=[]),this._tileKeysPerLevel[l].push(i)}prune(t,i,s){let l=this._tilePerId.size;if(l<=this.maxSize)return;let d=this._tileKeysPerLevel.length-1;for(;l>this.maxSize&&d>=0;)d!==t&&(l=this._pruneAroundCenterTile(l,i,s,d)),d--;l>this.maxSize&&(l=this._pruneAroundCenterTile(l,i,s,t))}_pruneAroundCenterTile(t,i,s,l){const d=this._tileKeysPerLevel[l];if(!d||d.length===0)return t;const{size:y,origin:g}=this.tileInfoView.tileInfo,_=s*y[0],M=s*y[1],E=[0,0],O=[0,0];for(d.sort((P,j)=>(E[0]=g.x+_*(P.col+.5),E[1]=g.y-M*(P.row+.5),O[0]=g.x+_*(j.col+.5),O[1]=g.y-M*(j.row+.5),Gm(E,i)-Gm(O,i)));d.length>0;){const P=d.pop();if(this._removeTile(P.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this.removedFunc&&this.removedFunc(i),US(this._tilePerId,t)}}function US(e,t){e.delete(t)}const _l=new Mr(0,0,0,0),ls=new Map,mh=[],p1=[];class Vce{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=t.resampling==null||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new yoe(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:i,tileIndex:s}=this,l=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.coveragePolicy);if(p1.length=0,mh.length=0,ls.clear(),!l)return;const{minScale:d,maxScale:y}=this.tileInfoView.tileInfo,{spans:g,lodInfo:_}=l,{level:M}=_,{scale:E,center:O,resolution:P}=t.state,j=!t.stationary&&E>this._previousScale;if(this._previousScale=E,this.tiles.length=0,!i&&(E>d||E<y))return this.tiles.length=0,ls.clear(),s.forEach(Y=>{this.releaseTile(Y)}),s.clear(),p1.length=0,mh.length=0,ls.clear(),Vc.pool.release(l),!0;s.forEach(Y=>Y.visible=!0);let R=0,z=0;if(g.length>0)for(const{row:Y,colFrom:te,colTo:ne}of g)for(let he=te;he<=ne;he++){R++;const se=_l.set(M,Y,_.normalizeCol(he),_.getWorldForColumn(he)).id;if(s.has(se)){const ue=s.get(se);ue.isReady?(ls.set(se,ue),z++):j||this._addParentTile(se,ls)}else{let ue;if(this._tileCache&&this._tileCache.has(se)){if(ue=this._tileCache.pop(se),this.tileIndex.set(se,ue),ue.isReady){ls.set(se,ue),z++;continue}}else ue=this.acquireTile(_l),this.tileIndex.set(se,ue);j||this._addParentTile(se,ls)}}const q=z===R;s.forEach((Y,te)=>{if(_l.set(te),ls.has(te))return;const ne=this.tileInfoView.intersects(l,_l),he=this.cachePolicy==="purge"?_l.level!==M:_l.level>M;!ne||!j&&q?!he&&ne||mh.push(te):Y.isReady?he&&this.cachePolicy==="purge"&&this._hasReadyAncestor(_l,M)?mh.push(te):p1.push(te):he&&mh.push(te)});for(const Y of p1){const te=s.get(Y);te&&te.isReady&&ls.set(Y,te)}for(const Y of mh){const te=s.get(Y);this._tileCache?this._tileCache.add(te):this.releaseTile(te),s.delete(Y)}return ls.forEach(Y=>this.tiles.push(Y)),s.forEach(Y=>{ls.has(Y.key.id)||(Y.visible=!1)}),this._tileCache&&this._tileCache.prune(M,O,P),Vc.pool.release(l),ls.clear(),q}clear(t=!0){const{tileIndex:i}=this;t&&i.forEach(s=>{this.releaseTile(s)}),i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){let s=t,l=null;for(;s=this.tileInfoView.getTileParentId(s),s;)if(this.tileIndex.has(s)){if(l=this.tileIndex.get(s),l&&l.isReady){i.has(l.key.id)||i.set(l.key.id,l);break}}else if(this._tileCache&&this._tileCache.has(s)&&(l=this._tileCache.pop(s),this.tileIndex.set(s,l),l&&l.isReady)){i.has(l.key.id)||i.set(l.key.id,l);break}}_hasReadyAncestor(t,i){const s=zu();this.tileInfoView.getTileBounds(s,t,!0);for(const l of this.tileIndex.values())if(l.isReady&&l.key.level>=i&&l.key.level<t.level){const d=zu();if(this.tileInfoView.getTileBounds(d,l.key,!0),uV(d,s))return!0}return!1}}function F_(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}class BS extends Li{constructor(t,i){super(!0),this.view=t,this.registerIncoming("double-click",i,s=>this._handleDoubleClick(s,i))}_handleDoubleClick(t,i){F_(t.data,"primary")&&(t.stopPropagation(),i?this.view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this.view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class moe extends Li{constructor(t,i,s){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",s,l=>this._handleDoubleTapDrag(l))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:s}=i;if(s!==this.pointerType)return;t.stopPropagation();const{action:l,delta:d}=i,{view:y}=this,{mapViewNavigation:g}=y;switch(l){case"begin":{const{scale:_}=y;this._startScale=_,this._currentScale=_,this._previousDelta=d,g.begin();break}case"update":{if(this._previousDelta.y===d.y)return;this._previousDelta=d;const _=1.015**d.y,M=this._startScale*_,E=M/this._currentScale;g.setViewpointImmediate(E),this._currentScale=M;break}case"end":{const{constraints:_}=y,{effectiveLODs:M,snapToZoom:E}=_;if(!E||!M)return void g.end();const O=_.snapScale(this._currentScale),P=(d.y>0?Math.max(O,_.snapToPreviousScale(this._startScale)):Math.min(O,_.snapToNextScale(this._startScale)))/this._currentScale;g.zoom(P);break}}}}class ev{constructor(t){this.callbacks=t,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(t){const i=t.data,s=i.pointers.size;switch(i.action){case"start":this.currentCount=s,this._emitStart(t);break;case"added":this._emitEnd(this.previousEvent),this.currentCount=s,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this.startEvent&&this._emitEnd(this.previousEvent),this.currentCount=s,this._emitStart(t);break;case"end":this._emitEnd(t),this.currentCount=0}this.previousEvent=t}_emitStart(t){this.startEvent=t,this.callbacks.condition(this.currentCount,t)&&this.callbacks.start(this.currentCount,t,this.startEvent)}_emitUpdate(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.update(this.currentCount,t,this.startEvent)}_emitEnd(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.end(this.currentCount,t,this.startEvent),this.startEvent=null}}class goe extends Li{constructor(t,i,s){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",s,l=>this._handleDrag(l)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this.dragEventSeparator=new ev({start:(i,s)=>{this.view.mapViewNavigation.pan.begin(this.view,s.data),s.stopPropagation()},update:(i,s)=>{this.view.mapViewNavigation.pan.update(this.view,s.data),s.stopPropagation()},end:(i,s)=>{this.view.mapViewNavigation.pan.end(this.view,s.data),s.stopPropagation()},condition:(i,s)=>i===1&&F_(s.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class voe extends Li{constructor(t,i,s){super(!0),this.view=t,this.pointerAction=i;const l=this.view.mapViewNavigation;this.dragEventSeparator=new ev({start:(d,y)=>{l.rotate.begin(this.view,y.data),y.stopPropagation()},update:(d,y)=>{l.rotate.update(this.view,y.data),y.stopPropagation()},end:(d,y)=>{l.rotate.end(),y.stopPropagation()},condition:(d,y)=>d===1&&F_(y.data,this.pointerAction)}),this.registerIncoming("drag",s,d=>this.dragEventSeparator.handle(d))}}function Ls(e){let t=e*e;return e<0&&(t*=-1),t}function boe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function woe(e,t,i){const s=i,l=e.state,d=e.device,y=t.tiltDirection==="forward-down"?1:-1,g=1;return d.deviceType==="standard"?(s.translation[0]=Ls(l.axes[0]),s.translation[1]=Ls(l.axes[1]),s.translation[2]=Ls(l.buttons[7])-Ls(l.buttons[6]),s.heading=Ls(l.axes[2]),s.tilt=Ls(l.axes[3])):d.deviceType==="spacemouse"&&(s.translation[0]=1.2*Ls(l.axes[0]),s.translation[1]=1.2*Ls(l.axes[1]),s.translation[2]=2*-Ls(l.axes[2]),s.heading=1.2*Ls(l.axes[5]),s.tilt=1.2*Ls(l.axes[3])),s.tilt*=y,sI(s.translation,s.translation,g),s}function _oe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}class xoe extends Li{constructor(t){super(!0),this.view=t,this.frameTask=null,this.watchHandles=new yr,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this.handle.pause()}onInstall(t){super.onInstall(t),this.watchHandles.add([ri(this.view.navigation.gamepad,"enabled",i=>{i?(this.handle.resume(),this.frameTask||(this.frameTask=Mc({update:s=>this._frameUpdate(s.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))})])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this.view.navigation.gamepad.device;i&&t.data.device!==i||this.currentDevice&&this.currentDevice!==t.data.device||(t.data.action==="end"?(this.currentDevice=null,boe(this.transformation)):(this.currentDevice=t.data.device,woe(t.data,this.view.navigation.gamepad,this.transformation)))}_frameUpdate(t){const i=this.transformation;if(_oe(i))return;const s=this.view.viewpoint.clone(),l=this.view.navigation.gamepad.velocityFactor,d=Moe*l*t;Qg(s,s,[i.translation[0]*d,-i.translation[1]*d]);const y=1+i.translation[2]*$oe*t,g=this.view.constraints.rotationEnabled?-i.heading*Soe*t:0,_=this.view.size,M=[_[0]/2,_[1]];aP(s,s,y,g,M,_);const E=this.view.constraints.constrain(s,this.view.viewpoint);this.view.viewpoint=E}}const Soe=.06,Moe=.7,$oe=6e-4;class Ioe extends Li{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",s,l=>this._handleKeyDown(l)),this.registerIncoming("key-up",s,l=>this._handleKeyUp(l)),this.registerIncoming("blur",s,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const s=this._keyMap[t.data.key];if(this._pressed=s!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),s){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class Toe extends Li{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",s,l=>this._handleKeyDown(l)),this.registerIncoming("key-up",s,l=>this._handleKeyUp(l)),this.registerIncoming("blur",s,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const s=t.modifiers;if(s.size>0&&!s.has("Shift")||!this.view.constraints.rotationEnabled)return;const l=this._keyToDirection[t.data.key];if(this._pressed=l!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),l){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}var hc;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(hc||(hc={}));class Eoe extends Li{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",s,l=>this._handleKeyDown(l)),i.zoomIn.forEach(l=>this._keysToZoomAction[l]=hc.IN),i.zoomOut.forEach(l=>this._keysToZoomAction[l]=hc.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:s}=t.data;if(!(s in this._keysToZoomAction))return;const l=this._keysToZoomAction[s],{mapViewNavigation:d}=this.view;let y=null;switch(l){case hc.IN:y=d.zoomIn();break;case hc.OUT:y=d.zoomOut();break;default:return}d.begin(),y.then(()=>d.end()),t.stopPropagation()}}const koe=.6;class Aoe extends Li{constructor(t,i){super(!0),this.view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,s=>this._handleMouseWheel(s))}_handleMouseWheel(t){if(!this.view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this.view.mapViewNavigation,{x:s,y:l,deltaY:d}=t.data,y=1/koe**(1/60*d),g=i.zoom(y,[s,l]);g&&(this._canZoom=!1,g.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}}class Ooe extends Li{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this.dragEventSeparator=new ev({start:(s,l)=>{i.pinch.begin(this.view,l.data),l.stopPropagation()},update:(s,l)=>{i.pinch.update(this.view,l.data),l.stopPropagation()},end:(s,l)=>{i.pinch.end(this.view),l.stopPropagation()},condition:s=>s>=2})}_handleDrag(t){this.dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function HS(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value?i.value:1:0),axes:t.axes.map(i=>Noe(i,e.axisThreshold))}:{buttons:[],axes:[]}}function Coe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function Poe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function Noe(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}class joe{constructor(t,i){this.element=t,this.input=i,this._hasEventListeners=!1,this._onConnectGamepad=d=>{this._connectGamepad(d.gamepad)},this._onDisconnectGamepad=d=>{const y=d.gamepad,g=y.index,_=this.inputDevices[g];_&&(this._emitGamepadEvent(y,HS(_),!1),this.inputDevices.splice(g,1),this.latestUpdate.splice(g,1),this.input.gamepad.devices.remove(_),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const s="getGamepads"in window.navigator,l=window.isSecureContext;this.supported=s&&l,this.supported&&(this._forEachGamepad(d=>this._connectGamepad(d)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this.callback=t}_connectGamepad(t){const i=new M_(t);i.deviceType!=="unknown"&&(this.inputDevices[t.index]=i,this.input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this.frameTask==null&&(this.frameTask=Mc({update:()=>this._readGamepadState()}))}_stopPolling(){this.frameTask!=null&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this.element.contains(document.activeElement),s=this.input.gamepad.enabledFocusMode==="document"&&!t||this.input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(l=>{const d=this.inputDevices[l.index];if(!d)return;const y=this.latestUpdate[l.index],g=HS(d),_=s||Poe(g);y&&(y.timestamp===l.timestamp||!y.active&&_||Coe(y.state,g))||this._emitGamepadEvent(l,g,!_)})}_forEachGamepad(t){const i=window.navigator.getGamepads();for(let s=0;s<i.length;s++){const l=i[s];this._validate(l)&&t(l)}}_emitGamepadEvent(t,i,s){const l=this.latestUpdate[t.index],d=l&&l.active;if(!d&&!s)return;const y=!d&&s?"start":d&&s?"update":"end";this.latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:s},this.callback&&this.callback({device:this.inputDevices[t.index],state:i,action:y})}_validate(t){if(!t||!t.connected)return!1;for(let i=0;i<t.axes.length;i++)if(isNaN(t.axes[i]))return!1;return!0}}const WS=de("trident"),JS=de("edge"),Foe=de("chrome"),Roe=de("ff"),Loe=de("safari"),gh={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};class tv{constructor(t,i){this.input=i,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new joe(t,this.input),this._gamepadSource.onEvent=s=>this._callback("gamepad",s)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const s=this._active[i];this._element.removeEventListener(R2[i],s),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&R2[i]){const s=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(R2[i],s),this._active[i]=s}}),this._gamepadSource.hasEventListeners=t&&t.has("gamepad")}setPointerCapture(t,i){i?(this._element.setPointerCapture(t.pointerId),this._activePointerCaptures.add(t.pointerId)):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?gh.touchNone:gh.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?gh.touchPan:gh.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(gh.touchNone),this._element.classList.remove(gh.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const s=PC(this._element,t);return tv.test.disableSubpixelCoordinates&&(s.x=Math.round(s.x),s.y=Math.round(s.y)),i.x=s.x,i.y=s.y,i}_handleKey(t,i){const s=ire(i);s&&t==="key-up"&&this._keyDownState.delete(s);const l={native:i,key:s,repeat:s&&this._keyDownState.has(s)};s&&t==="key-down"&&this._keyDownState.add(l.key),this._callback(t,l)}_handlePointer(t,i){const s=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,s)}_handlePointerPreventDefault(t,i){const s=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,s)}_handleMouseWheel(t,i){let s=i.deltaY;switch(i.deltaMode){case 0:(WS||JS)&&(s=s/document.documentElement.clientHeight*600);break;case 1:s*=30;break;case 2:s*=900}WS||JS?s*=.7:Foe||Loe?s*=.6:Roe&&(s*=1.375);const l=100,d=Math.abs(s);d>l&&(s=s/d*200/(1+Math.exp(-.02*(d-l))));const y=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:s});this._callback(t,y)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const s={native:i};i.preventDefault(),this._callback(t,s)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}tv.test={disableSubpixelCoordinates:!1};const R2={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class Doe extends Li{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}}function R_(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function zoe(e,t){const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)}function Voe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Tr()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[ne,he]=e,[se,ue]=[he.x-ne.x,he.y-ne.y];return t.radius=Math.sqrt(se*se+ue*ue)/2,t.center.x=(ne.x+he.x)/2,t.center.y=(ne.y+he.y)/2,t}let i=0,s=0;for(let ne=0;ne<e.length;ne++)i+=e[ne].x,s+=e[ne].y;i/=e.length,s/=e.length;const l=e.map(ne=>ne.x-i),d=e.map(ne=>ne.y-s);let y=0,g=0,_=0,M=0,E=0,O=0,P=0;for(let ne=0;ne<l.length;ne++){const he=l[ne],se=d[ne],ue=he*he,Ee=se*se;y+=ue,g+=Ee,_+=he*se,M+=ue*he,E+=Ee*se,O+=he*Ee,P+=se*ue}const j=.5*(M+O),R=.5*(E+P),z=y*g-_*_,q=(j*g-R*_)/z,Y=(y*R-_*j)/z,te=Tr(q+i,Y+s);return{radius:Math.sqrt(q*q+Y*Y+(y+g)/e.length),center:te}}const Ms={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class Goe extends Li{constructor(t=Ms.maximumDoubleClickDelay,i=Ms.maximumDoubleClickDistance,s=Ms.maximumDoubleTouchDelay,l=Ms.maximumDoubleTouchDistance,d=jd){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=s,this.maximumDoubleTouchDistance=l,this._clock=d,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimeout=Ju(t.doubleClickTimeout))}get hasPendingInputs(){return sg(this._pointerState,t=>t.doubleClickTimeout!=null)}_pointerId(t){const i=t.native;return i.pointerType==="mouse"?`${i.pointerId}:${i.button}`:`${i.pointerType}`}_handleImmediateClick(t){const i=t.data,s=this._pointerId(i),l=this._pointerState.get(s);if(l){const d=i.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;R_(l.event.data,i)>d?(this._clearDoubleClickTimeout(s,!0),this._startClick(t)):(this._clearDoubleClickTimeout(s,!1),this._doubleClick.emit(l.event.data,void 0,l.event.modifiers))}else this._startClick(t)}_startClick(t){const i=this._pointerId(t.data),s=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(i,{event:t,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(i),s)}),this.refreshHasPendingInputs()}_handlePointerDrag(t){const i=this._pointerId(t.data.currentEvent);this._clearDoubleClickTimeout(i,!0)}_handleDrag(t){const i=this._pointerId(t.data.pointer);this._clearDoubleClickTimeout(i,!0)}_clearDoubleClickTimeout(t,i){const s=this._pointerState.get(t);s&&(s.doubleClickTimeout.remove(),s.doubleClickTimeout=null,i&&this._doubleClickTimeoutExceeded(t),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}}class qoe extends Li{constructor(t=Ms.maximumDoubleClickDelay,i=Ms.maximumDoubleClickDistance,s=Ms.maximumDoubleTouchDelay,l=Ms.maximumDoubleTouchDistance,d=jd){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=s,this.maximumDoubleTouchDistance=l,this._clock=d,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Tr(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new ev({start:(y,g)=>this._dragStart(y,g),update:(y,g)=>this._dragUpdate(g),end:(y,g)=>this._dragEnd(g)}),this.registerIncoming("drag",y=>this._dragEventSeparator.handle(y)),this.registerIncoming("pointer-down",y=>this._handlePointerDown(y)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout!=null&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null)})}get hasPendingInputs(){return sg(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout.remove(),i.doubleTapTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,i,s){const{button:l,buttons:d,pointer:y,pointers:g,pointerType:_,timestamp:M}=s;return{action:t,delta:i,button:l,buttons:d,pointer:y,pointers:g,pointerType:_,timestamp:M}}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:s,modifiers:l}=i,{center:d}=s;this._dragStartCenter=d;const y=this._createDoubleTapDragData("begin",Tr(0,0),s);this._doubleTapDrag.emit(y,void 0,l),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=t,{center:l}=i,d=Tr(l.x-this._dragStartCenter.x,l.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("update",d,i);this._doubleTapDrag.emit(y,void 0,s),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=t,{center:l}=i,d=Tr(l.x-this._dragStartCenter.x,l.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("end",d,i);this._doubleTapDrag.emit(y,void 0,s),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,s=this._pointerId(i),l=this._pointerState.get(s),{pointerType:d}=i.native;if(l){const y=d==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(s),R_(l.event.data,i)>y?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(t){const{native:i}=t,{pointerId:s,button:l,pointerType:d}=i;return d==="mouse"?`${s}:${l}`:`${d}`}_storePointerDown(t){const{data:i}=t,{pointerType:s}=i.native,l=this._pointerId(i),d=s==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,y=this._clock.setTimeout(()=>this._clearPointerDown(l),d);this._pointerState.set(l,{event:t,doubleTapTimeout:y}),this.refreshHasPendingInputs()}}class Uoe extends Li{constructor(t){super(!1),this.navigationTouch=t,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,s,l){return{action:t,pointerType:this.pointerType,button:this.mouseButton,buttons:i.buttons,timestamp:l,pointers:Boe(this.activePointerMap),pointer:i,angle:s.angle,radius:s.radius,center:s.center}}_addPointer(t){const i=t.native.pointerId,s=d1(this.activePointerMap).angle,l={event:t,initialAngle:0,lastAngle:0};this.activePointerMap.set(i,l);const d=Iy(l,$P(this.activePointerMap));l.initialAngle=d,l.lastAngle=d,this._updatePointerAngles(s)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,s=this.activePointerMap.get(i);s?s.event=t:this._addPointer(t)}_removePointer(t){const i=d1(this.activePointerMap).angle;this.activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=d1(this.activePointerMap);this.activePointerMap.forEach(s=>{s.initialAngle=Iy(s,i)-t,s.lastAngle=Iy(s,i)-t})}_emitEvent(t,i,s){const l=d1(this.activePointerMap);this.drag.emit(this._createPayload(t,i,l,s),void 0,this.startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,s=t.timestamp;this.activePointerMap.get(i)&&(this.activePointerMap.size===1?(this._updatePointer(t.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",t.data,s),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,s=i.currentEvent,l=t.timestamp;switch(i.action){case"start":case"update":this.isDragging?this.activePointerMap.has(s.native.pointerId)?(this._updatePointer(s),!this.isCurrentDragSuppressed&&this._emitEvent("update",s,l)):(this._addPointer(s),this._emitEvent("added",s,l),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(s),this.pointerType=t.data.startEvent.pointerType,this.mouseButton=t.data.startEvent.button,this.startStateModifiers=t.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",s,l))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&this.pointerType==="touch"&&this.activePointerMap.size===1}}function $P(e){const t=[];return e.forEach(i=>{t.push(Tr(i.event.x,i.event.y))}),Voe(t)}function d1(e){const t=$P(e);let i=0;return e.forEach(s=>{let l=Iy(s,t),d=l-s.lastAngle;for(;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;l=s.lastAngle+d,s.lastAngle=l,i+=l-s.initialAngle}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function Boe(e){const t=new Map;return e.forEach((i,s)=>t.set(s,i.event)),t}function Iy(e,t){const i=e.event,s=i.x-t.center.x,l=i.y-t.center.y;return Math.atan2(l,s)}var KS;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(KS||(KS={}));class Hoe extends Li{constructor(t=Ms.maximumDoubleClickDelay,i=Ms.maximumDoubleClickDistance,s=Ms.maximumDoubleTouchDelay,l=Ms.maximumDoubleTouchDistance,d=jd){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=s,this.maximumDoubleTouchDistance=l,this._clock=d,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",y=>{this._handlePointerLoss(y,"pointer-up")}),this.registerIncoming("pointer-capture-lost",y=>{this._handlePointerLoss(y,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",y=>{this._handlePointerLoss(y,"pointer-cancel")})}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,s=this._pointerId(i);if(!this._pointerState.has(s)){const l={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(s,l),this.startCapturingPointer(i.native)}}_handlePointerLoss(t,i){const s=t.data,l=this._pointerId(s),d=this._pointerState.get(l);if(d&&i==="pointer-up"&&d.downButton===s.native.button){const y=d.immediateDoubleClick;if(y){y.timeoutHandle.remove();const g=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;R_(y,t.data)>g?this._startImmediateDoubleClick(t,d):(this._immediateDoubleClick.emit(t.data,void 0,y.modifiers),this._removeState(s))}else this._startImmediateDoubleClick(t,d)}}_startImmediateDoubleClick(t,i){const s=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),s)}}_pointerId(t){const i=t.native;return i.pointerType==="mouse"?`${i.pointerId}:${i.button}`:`${i.pointerType}`}_removeState(t){const i=this._pointerId(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}const Pp={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class Woe extends Li{constructor(t=Pp.maximumClickDelay,i=Pp.movementUntilMouseDrag,s=Pp.movementUntilPenDrag,l=Pp.movementUntilTouchDrag,d=Pp.holdDelay,y=jd){super(!1),this.maximumClickDelay=t,this.movementUntilMouseDrag=i,this.movementUntilPenDrag=s,this.movementUntilTouchDrag=l,this.holdDelay=d,this._clock=y,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",g=>{this._handlePointerLoss(g,"pointer-up")}),this.registerIncoming("pointer-capture-lost",g=>{this._handlePointerLoss(g,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",g=>{this._handlePointerLoss(g,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout!=null&&(t.holdTimeout.remove(),t.holdTimeout=null)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,s=i.native.pointerId;let l=null;this._pointerState.size===0&&(l=this._clock.setTimeout(()=>{const y=this._pointerState.get(s);if(y){if(!y.isDragging){const g=y.previousEvent;this._pointerHold.emit(g,void 0,t.modifiers),y.holdEmitted=!0}y.holdTimeout=null}},this.holdDelay));const d={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:l,modifiers:new Set};this._pointerState.set(s,d),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,i,s){return{action:t,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:s}}_handlePointerMove(t){const i=t.data,s=i.native.pointerId,l=this._pointerState.get(s);l&&(l.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",l,i),void 0,l.modifiers):zoe(i,l.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),l.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}_startDragging(t){const i=t.data,s=i.native.pointerId;this._pointerState.forEach(l=>{l.holdTimeout!=null&&(l.holdTimeout.remove(),l.holdTimeout=null),l.isDragging||(l.modifiers=t.modifiers,l.isDragging=!0,s===l.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",l,i)):this._pointerDrag.emit(this._createPointerDragData("start",l,l.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const s=t.data,l=s.native.pointerId,d=this._pointerState.get(l);d&&(d.holdTimeout!=null&&(d.holdTimeout.remove(),d.holdTimeout=null),d.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",d,i==="pointer-up"?s:d.previousEvent),void 0,d.modifiers):i==="pointer-up"&&d.downButton===s.native.button&&t.timestamp-d.startTimestamp<=this.maximumClickDelay&&!d.holdEmitted&&this._immediateClick.emit(s),this._pointerState.delete(l),this.stopCapturingPointer(s.native),this._pointerState.size===0&&this._moveHandle.pause())}}const f1={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Ty=class extends Fe{constructor(){super(...arguments),this._handles=new yr}initialize(){this._handles.add([jB(this.view,"ready",()=>this._disconnect()),NE(this.view,"ready",()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const e=this.view.surface,t=new tv(e,this.view.input),i=[new Hoe,new Woe,new Goe,new Uoe(this.view.navigation),new qoe],s=new Ql({eventSource:t,recognizers:i});s.installHandlers("prevent-context-menu",[new Doe],tl.INTERNAL),s.installHandlers("navigation",[new Ooe(this.view),new xoe(this.view),new Aoe(this.view),new BS(this.view),new BS(this.view,[f1.counter]),new goe(this.view,"primary"),new Ioe(this.view,f1.pan),new Eoe(this.view,f1.zoom),new Toe(this.view,f1.rotate),new voe(this.view,"secondary"),new moe(this.view,"touch")],tl.INTERNAL),this.view.viewEvents.connect(s),this._source=t,this._inputManager=s,ri(this.view.navigation,"browserTouchPanEnabled",l=>{this._source.browserTouchPanningEnabled=!l})}get test(){return{inputManager:this._inputManager}}};b([S()],Ty.prototype,"view",void 0),Ty=b([H("esri.views.2d.input.MapViewInputManager")],Ty);const Joe=Ty;var YS,XS,ZS,IP={exports:{}};YS=IP,XS=function(){function e(l,d,y,g,_){t(l,d,y||0,g||l.length-1,_||s)}function t(l,d,y,g,_){for(;g>y;){if(g-y>600){var M=g-y+1,E=d-y+1,O=Math.log(M),P=.5*Math.exp(2*O/3),j=.5*Math.sqrt(O*P*(M-P)/M)*(E-M/2<0?-1:1);t(l,d,Math.max(y,Math.floor(d-E*P/M+j)),Math.min(g,Math.floor(d+(M-E)*P/M+j)),_)}var R=l[d],z=y,q=g;for(i(l,y,d),_(l[g],R)>0&&i(l,y,g);z<q;){for(i(l,z,q),z++,q--;_(l[z],R)<0;)z++;for(;_(l[q],R)>0;)q--}_(l[y],R)===0?i(l,y,q):i(l,++q,g),q<=d&&(y=q+1),d<=q&&(g=q-1)}}function i(l,d,y){var g=l[d];l[d]=l[y],l[y]=g}function s(l,d){return l<d?-1:l>d?1:0}return e},(ZS=XS())!==void 0&&(YS.exports=ZS);const Koe=IP.exports;function Um(e,t){if(!(this instanceof Um))return new Um(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function Yoe(e,t,i){if(!i)return t.indexOf(e);for(var s=0;s<t.length;s++)if(i(e,t[s]))return s;return-1}function vh(e,t){O0(e,0,e.children.length,t,e)}function O0(e,t,i,s,l){l||(l=Kh(null)),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0;for(var d,y=t;y<i;y++)d=e.children[y],C0(l,e.leaf?s(d):d);return l}function C0(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function QS(e,t){return e.minX-t.minX}function eM(e,t){return e.minY-t.minY}function L2(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function y1(e){return e.maxX-e.minX+(e.maxY-e.minY)}function Xoe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function Zoe(e,t){var i=Math.max(e.minX,t.minX),s=Math.max(e.minY,t.minY),l=Math.min(e.maxX,t.maxX),d=Math.min(e.maxY,t.maxY);return Math.max(0,l-i)*Math.max(0,d-s)}function D2(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function m1(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Kh(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function tM(e,t,i,s,l){for(var d,y=[t,i];y.length;)(i=y.pop())-(t=y.pop())<=s||(d=t+Math.ceil((i-t)/s/2)*s,Koe(e,d,t,i,l),y.push(t,d,d,i))}Um.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],s=this.toBBox;if(!m1(e,t))return i;for(var l,d,y,g,_=[];t;){for(l=0,d=t.children.length;l<d;l++)y=t.children[l],m1(e,g=t.leaf?s(y):y)&&(t.leaf?i.push(y):D2(e,g)?this._all(y,i):_.push(y));t=_.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!m1(e,t))return!1;for(var s,l,d,y,g=[];t;){for(s=0,l=t.children.length;s<l;s++)if(d=t.children[s],m1(e,y=t.leaf?i(d):d)){if(t.leaf||D2(e,y))return!0;g.push(d)}t=g.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var s=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===s.height)this._splitRoot(this.data,s);else{if(this.data.height<s.height){var l=this.data;this.data=s,s=l}this._insert(s,this.data.height-s.height-1,!0)}else this.data=s;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Kh([]),this},remove:function(e,t){if(!e)return this;for(var i,s,l,d,y=this.data,g=this.toBBox(e),_=[],M=[];y||_.length;){if(y||(y=_.pop(),s=_[_.length-1],i=M.pop(),d=!0),y.leaf&&(l=Yoe(e,y.children,t))!==-1)return y.children.splice(l,1),_.push(y),this._condense(_),this;d||y.leaf||!D2(y,g)?s?(i++,y=s.children[i],d=!1):y=null:(_.push(y),M.push(i),i=0,s=y,y=y.children[0])}return this},toBBox:function(e){return e},compareMinX:QS,compareMinY:eM,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,s){var l,d=i-t+1,y=this._maxEntries;if(d<=y)return vh(l=Kh(e.slice(t,i+1)),this.toBBox),l;s||(s=Math.ceil(Math.log(d)/Math.log(y)),y=Math.ceil(d/Math.pow(y,s-1))),(l=Kh([])).leaf=!1,l.height=s;var g,_,M,E,O=Math.ceil(d/y),P=O*Math.ceil(Math.sqrt(y));for(tM(e,t,i,P,this.compareMinX),g=t;g<=i;g+=P)for(tM(e,g,M=Math.min(g+P-1,i),O,this.compareMinY),_=g;_<=M;_+=O)E=Math.min(_+O-1,M),l.children.push(this._build(e,_,E,s-1));return vh(l,this.toBBox),l},_chooseSubtree:function(e,t,i,s){for(var l,d,y,g,_,M,E,O;s.push(t),!t.leaf&&s.length-1!==i;){for(E=O=1/0,l=0,d=t.children.length;l<d;l++)_=L2(y=t.children[l]),(M=Xoe(e,y)-_)<O?(O=M,E=_<E?_:E,g=y):M===O&&_<E&&(E=_,g=y);t=g||t.children[0]}return t},_insert:function(e,t,i){var s=this.toBBox,l=i?e:s(e),d=[],y=this._chooseSubtree(l,this.data,t,d);for(y.children.push(e),C0(y,l);t>=0&&d[t].children.length>this._maxEntries;)this._split(d,t),t--;this._adjustParentBBoxes(l,d,t)},_split:function(e,t){var i=e[t],s=i.children.length,l=this._minEntries;this._chooseSplitAxis(i,l,s);var d=this._chooseSplitIndex(i,l,s),y=Kh(i.children.splice(d,i.children.length-d));y.height=i.height,y.leaf=i.leaf,vh(i,this.toBBox),vh(y,this.toBBox),t?e[t-1].children.push(y):this._splitRoot(i,y)},_splitRoot:function(e,t){this.data=Kh([e,t]),this.data.height=e.height+1,this.data.leaf=!1,vh(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var s,l,d,y,g,_,M,E;for(_=M=1/0,s=t;s<=i-t;s++)y=Zoe(l=O0(e,0,s,this.toBBox),d=O0(e,s,i,this.toBBox)),g=L2(l)+L2(d),y<_?(_=y,E=s,M=g<M?g:M):y===_&&g<M&&(M=g,E=s);return E},_chooseSplitAxis:function(e,t,i){var s=e.leaf?this.compareMinX:QS,l=e.leaf?this.compareMinY:eM;this._allDistMargin(e,t,i,s)<this._allDistMargin(e,t,i,l)&&e.children.sort(s)},_allDistMargin:function(e,t,i,s){e.children.sort(s);var l,d,y=this.toBBox,g=O0(e,0,t,y),_=O0(e,i-t,i,y),M=y1(g)+y1(_);for(l=t;l<i-t;l++)d=e.children[l],C0(g,e.leaf?y(d):d),M+=y1(g);for(l=i-t-1;l>=t;l--)d=e.children[l],C0(_,e.leaf?y(d):d),M+=y1(_);return M},_adjustParentBBoxes:function(e,t,i){for(var s=i;s>=0;s--)C0(t[s],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():vh(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};class Bm{constructor(t,i){this.key=new Mr(0,0,0,0),this.bounds=zu(),this.objectIds=new Set,this.key.set(i);const s=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=s.resolution,this.scale=s.scale,this.level=s.level}get id(){return this.key.id}get extent(){return Mt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),i=ur.acquire();for(let s=0;s<t.length;s++)i[s]=new Bm(this.tileInfoView,t[s]);return i}getQuantizationParameters(){return Ik.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const xl={added:[],removed:[]},z2=new Set,Qoe=new Mr(0,0,0,0);class eae extends hl{constructor(t){super(),this._tiles=new Map,this._index=Um(9,de("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const s of t.added)if(!this.has(s)){const l=new Bm(this.tileScheme,s);this._tiles.set(s,l),this._index.insert(l),i.added.push(l)}for(const s of t.removed)if(this.has(s)){const l=this.get(s);this._tiles.delete(s),this._index.remove(l),i.removed.push(l)}this.tiles.length=0,this._tiles.forEach(s=>this.tiles.push(s)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:s,lodInfo:l}=i,{level:d}=l;if(s.length>0)for(const{row:y,colFrom:g,colTo:_}of s)for(let M=g;M<=_;M++){const E=Qoe.set(d,y,l.normalizeCol(M),l.getWorldForColumn(M)).id;if(z2.add(E),!this.has(E)){const O=new Bm(this.tileScheme,E);this._tiles.set(E,O),this._index.insert(O),this.tiles.push(O),xl.added.push(O)}}for(let y=this.tiles.length-1;y>=0;y--){const g=this.tiles[y];z2.has(g.id)||(this._tiles.delete(g.id),this.tiles.splice(y,1),this._index.remove(g),xl.removed.push(g))}(xl.added.length||xl.removed.length)&&this.emit("update",xl),Vc.pool.release(i),z2.clear(),xl.added.length=0,xl.removed.length=0}}let tae=0,Oa=class extends Fe{constructor(){super(...arguments),this.color=new Ze([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return tae++}};b([S({readOnly:!0})],Oa.prototype,"version",null),b([S({type:Ze})],Oa.prototype,"color",void 0),b([S({type:Ze})],Oa.prototype,"haloColor",void 0),b([S()],Oa.prototype,"haloOpacity",void 0),b([S()],Oa.prototype,"fillOpacity",void 0),Oa=b([H("esri.views.2d.support.HighlightOptions")],Oa);const TP=Oa,iae=e=>e.indexOf("Brush")!==-1;class EP{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),iae(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}function rae(e,t,i,s,l,d,y,g){let _;e.ignorePadding&&(s={left:0,right:0,top:0,bottom:0}),e.width!=null&&e.height!=null?_=[e.width,e.height]:e.width==null&&e.height!=null?_=[e.height,e.height]:e.width!=null&&e.height==null?_=[e.width,e.width]:e.width==null&&e.height==null&&(_=null);const M=i[0]-(s.left+s.right),E=i[1]-(s.top+s.bottom);let O,P,j=e.area||{x:0,y:0,width:M,height:E};if(_){const R=M/E,z=_[0]/_[1];if(z>R){const q=j.width/z;j={x:j.x,y:Math.round(j.y+(j.height-q)/2),width:j.width,height:Math.round(q)}}else{const q=j.height*z;j={x:Math.round(j.x+(j.width-q)/2),y:j.y,width:Math.round(q),height:j.height}}}else _=[j.width,j.height];return _[0]>j.width?(O=Math.min(_[0]/j.width,t),P=_[0]/j.width/O):(O=1,P=_[0]/j.width),{resolutionScale:O,cropArea:{x:Math.round((j.x+s.left)*O),y:Math.round((j.y+s.top)*O),width:Math.round(j.width*O),height:Math.round(j.height*O)},outputScale:P,format:l,quality:d,children:y,rotation:g}}function Gce(e,t,i,s){s.premultipliedAlpha&&hae(e),i.width=e.width,i.height=e.height;const l=i.getContext("2d");l.putImageData(e,0,0),s.flipY&&uae(l);const d=l.getImageData(0,0,e.width,e.height),y=sae(i,t);return i.width=0,i.height=0,{dataUrl:y,data:d}}function sae(e,t){const i=cae[t.format],s=t.quality/100;return e.toDataURL(i,s)}function nae(e,t){const i=lae(e),s=dae[i];return{format:i,quality:Is(t!=null?t:s,0,100)}}function oae(e,t){return t/Math.max(e[0],e[1])}function qce(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(Hm)try{return new ImageData(e,t)}catch{Hm=!1}return kP(e,t,i)}function Uce(e,t,i,s){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(Hm)try{return new ImageData(e,t,i)}catch{Hm=!1}const l=kP(t,i,s);return l.data.set(e,0),l}function Bce(e,t,i,s=0,l=0,d=e.width-s,y=e.height-l,g=!1){const{data:_}=e,{width:M,height:E,data:O}=t,P=d/M,j=y/E,R=Math.ceil(P/2),z=Math.ceil(j/2),q=e.width;for(let Y=0;Y<E;Y++)for(let te=0;te<M;te++){const ne=4*(te+(g?E-Y-1:Y)*M);let he=0,se=0,ue=0,Ee=0,Oe=0,Le=0;const Ne=(Y+.5)*j;for(let je=Math.floor(Y*j);je<(Y+1)*j;je++){const De=Math.abs(Ne-(je+.5))/z,rt=(te+.5)*P,Ve=De*De;for(let ni=Math.floor(te*P);ni<(te+1)*P;ni++){const Rr=Math.abs(rt-(ni+.5))/R,Jt=Math.sqrt(Ve+Rr*Rr);if(Jt>=1)continue;let Wi=2*Jt*Jt*Jt-3*Jt*Jt+1;const Lr=4*(s+ni+(l+je)*q);Le+=Wi*_[Lr+3],se+=Wi,!i&&_[Lr+3]<255&&(Wi=Wi*_[Lr+3]/255),ue+=Wi*_[Lr],Ee+=Wi*_[Lr+1],Oe+=Wi*_[Lr+2],he+=Wi}}O[ne]=ue/he,O[ne+1]=Ee/he,O[ne+2]=Oe/he,O[ne+3]=Le/se}return t}function kP(e,t,i){return i||(i=aae()),i.getContext("2d").createImageData(e,t)}let Np=null,Hm=!0;function aae(){return Np||(Np=document.createElement("canvas"),Np.width=1,Np.height=1),Np}function lae(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return pae}}function uae(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function hae(e){const t=e.data,i=t.length;for(let s=0;s<i;s+=4){const l=t[s+3];if(l>0){const d=l/255;t[s+0]=t[s+0]/d,t[s+1]=t[s+1]/d,t[s+2]=t[s+2]/d}}}const cae={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},iM=98,pae="png",dae={png:100,jpg:iM,jpeg:iM};var Fi;function Hce(e,t,i={}){const s=AP(e);for(;s.length>1;){const l=Wm(t,s.shift(),i);if(X(l))return l}return fae(t,s.shift(),i)}function AP(e){const t=de("esri-force-webgl");if(t===Fi.WEBGL1||t===Fi.WEBGL2)return[t];switch(e){case"2d":return[Fi.WEBGL1];case"3d":return[Fi.WEBGL2,Fi.WEBGL1]}}function fae(e,t,i={}){if(!window.WebGLRenderingContext)return rM(e,yae),null;const s=Wm(e,t,i);return ce(s)&&rM(e,mae),s}function Wm(e,t,i={}){const s=t===Fi.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let l=null;for(const d of s){try{l=e.getContext(d,i)}catch{}if(l)break}return l}function rM(e,t){const i=e.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}(function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"})(Fi||(Fi={}));const yae='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',mae=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let V2,G2;function sM(e){switch(e){case Fi.WEBGL1:return gae();case Fi.WEBGL2:return vae()}}function gae(){return V2||(V2=_ae()),V2}function vae(){return G2||(G2=xae()),G2}class OP{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1}}class bae extends OP{constructor(){super(...arguments),this.type=Fi.WEBGL1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1}}class wae extends OP{constructor(){super(...arguments),this.type=Fi.WEBGL2}}function CP(e,t){if(e===Fi.WEBGL1&&typeof WebGLRenderingContext===void 0||e===Fi.WEBGL2&&typeof WebGL2RenderingContext===void 0)return null;const i=document.createElement("canvas");if(!i)return null;let s=Wm(i,e,{failIfMajorPerformanceCaveat:!0});if(ce(s)&&(s=Wm(i,e),X(s)&&(t.majorPerformanceCaveat=!0)),ce(s))return s;if(e===Fi.WEBGL1){const d=s.getParameter(s.VERSION),y=d==null?void 0:d.match(/^WebGL\s+([\d.]*)/);if(y){const g=parseFloat(y[1]);t.available=g>=.94}}else t.available=!0;t.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const l=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT);return l&&(t.supportsHighPrecisionFragment=l.precision>0),s}function _ae(){const e=new bae,t=CP(Fi.WEBGL1,e);return ce(t)||(e.supportsElementIndexUint=t.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=t.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=t.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=t.getExtension("OES_texture_float")!==null),e}function xae(){const e=new wae,t=CP(Fi.WEBGL2,e);return ce(t),e}function Sae(e){const t=Mae(e);if(!t.available)return new re("webgl:required","WebGL is required but not supported.");if(e==="3d"&&t.majorPerformanceCaveat)return new re("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new re("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new re("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===Fi.WEBGL1){if(!t.supportsElementIndexUint)return new re("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new re("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new re("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function Mae(e){const t=AP(e);for(;t.length>1;){const i=sM(t.shift());if(i.available)return i}return sM(t.shift())}function $ae(e){return e&&"nodeType"in e}function Iae(e){return e&&typeof e.render=="function"}const nM={component:"esri-component"};let tu=class extends Fe{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(nM.component),t&&t.classList.remove(nM.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||$ae(e)?(this._set("widget",null),w4(e)):(Iae(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};b([S({dependsOn:[]})],tu.prototype,"id",null),b([S()],tu.prototype,"node",null),b([yt("node")],tu.prototype,"castNode",null),b([S({readOnly:!0})],tu.prototype,"widget",void 0),tu=b([H("esri.views.ui.Component")],tu);const Ey=tu,Tae={left:0,top:0,bottom:0,right:0},PP={bottom:30,top:15,right:15,left:15},q2="manual",tr={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function Eae(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function U2(e){const t=e,i=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(i===null||i===Object.prototype)&&("component"in t||"index"in t||"position"in t)?e:null}function B2(e,{top:t,bottom:i,left:s,right:l}){e.style.top=t,e.style.bottom=i,e.style.left=s,e.style.right=l}let To=class extends hl.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new yr,this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&B2(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&B2(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([Ft(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,Gn),Ft(()=>this.padding,this._applyUIPadding,Gn)])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(tr.ui),e.classList.add(qH()),this._attachContainers(e)),t&&(t.classList.remove(tr.ui),B2(t,{top:"",bottom:"",left:"",right:""}),aE(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.top+t.bottom;return Math.max(e-i,0)}get padding(){return this._get("padding")}set padding(e){e?this._override("padding",e):this._clearOverride("padding")}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:J(J({},PP),e)}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.left+t.right;return Math.max(e-i,0)}add(e,t){let i,s;if(Array.isArray(e))return void e.forEach(d=>this.add(d,t));const l=U2(e);l&&({index:i,position:t,component:e,key:s}=l),t&&typeof t=="object"&&({index:i,key:s,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,s)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,t));const i=this._find(e);if(i){const s=this._componentToKey;if(s.has(e)&&s.get(e)!==t)return;const l=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(e),this._components.splice(l,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,i)=>t.concat(i)):(e=e||q2)===q2?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(tr.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(d=>this.move(d,t)),!e)return;let i;const s=U2(e)||U2(t);if(s&&(i=s.index,t=s.position,e=s.component||e),t&&!this._isValidPosition(t))return;const l=this.remove(e);l&&this.add(l,{position:t,index:i})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,i,s){e instanceof Ey||(e=new Ey({node:e})),this._place({component:e,position:t,index:i}),this._components.push(e),s&&this._componentToKey.set(e,s)}_find(e){return e?e instanceof Ey?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||Tae}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(tr.innerContainer),e.classList.add(tr.cornerContainer);const t=document.createElement("div");t.classList.add(tr.innerContainer),t.classList.add(tr.manualContainer);const i=document.createElement("div");i.classList.add(tr.topLeft),i.classList.add(tr.corner),e.appendChild(i);const s=document.createElement("div");s.classList.add(tr.topRight),s.classList.add(tr.corner),e.appendChild(s);const l=document.createElement("div");l.classList.add(tr.bottomLeft),l.classList.add(tr.corner),e.appendChild(l);const d=document.createElement("div");d.classList.add(tr.bottomRight),d.classList.add(tr.corner),e.appendChild(d),this._innerContainer=e,this._manualContainer=t;const y=Ka();this._cornerNameToContainerLookup={"top-left":i,"top-right":s,"bottom-left":l,"bottom-right":d,"top-leading":y?s:i,"top-trailing":y?i:s,"bottom-leading":y?d:l,"bottom-trailing":y?l:d},this._positionNameToContainerLookup=J({manual:t},this._cornerNameToContainerLookup)}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,i=e.position||q2,s=e.index,l=this._positionNameToContainerLookup[i],d=s>-1;if(Eae(t.widget)&&t.widget.startup(),!d)return void l.appendChild(t.node);const y=Array.prototype.slice.call(l.children);if(s===0)return void(l.firstChild?kx(t.node,l.firstChild):l.appendChild(t.node));s>=y.length?l.appendChild(t.node):kx(t.node,y[s])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,i=null;return this._components.some(s=>(t=s===e,t&&(i=s),t)),i}_findById(e){let t,i=null;return this._components.some(s=>(t=s.id===e,t&&(i=s),t)),i}_findByNode(e){let t,i=null;return this._components.some(s=>(t=s.node===e,t&&(i=s),t)),i}};b([S()],To.prototype,"container",null),b([S()],To.prototype,"height",null),b([S({value:PP})],To.prototype,"padding",null),b([yt("padding")],To.prototype,"castPadding",null),b([S()],To.prototype,"view",void 0),b([S()],To.prototype,"width",null),To=b([H("esri.views.ui.UI")],To);const kae=To;function oM(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function Aae(e,t){return e.length!==t.length||e.some((i,s)=>i.text!==t[s].text)}function g1(e,t,i){!i||!t||e.find(s=>s.layerView===t&&s.text===i)||e.push({text:i,layerView:t})}function Oae(e){return e.type==="bing-maps"}const sa=[];let Yh=class extends Ic{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new qe,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const i=this.get("view.allLayerViews");i&&this.handles.add(i.map(s=>s.watch(["suspended","attributionVisible"],this._updateAttributionItems)),"suspension"),t&&t.removed&&t.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this._updateAttributionItems=()=>{const t=this.get("view.allLayerViews");sa.length=0,t?(t.forEach(i=>{if(i.suspended||!i.get("layer.attributionVisible"))return;const s=i.layer;if(oM(s,"user"))return void g1(sa,i,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(i)){const d=this._fetchedAttributionData.get(i);return void(d?g1(sa,i,this._getDynamicAttribution(d,this.view,s)):oM(s)&&g1(sa,i,s.copyright))}return void this._fetchAttributionData(i)}const l=s.get("portalItem.accessInformation");g1(sa,i,l||s.copyright)}),Aae(this.items,sa)&&(this.items.removeAll(),this.items.addMany(sa)),sa.length=0,this.notifyChange("state")):this._clear()},this.handles.add([Eg(this,"view.allLayerViews","change",this._allLayerViewsChange,this._allLayerViewsChange,this._clear),FB(this,"view.stationary",()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await ag(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=t.ok?this._createContributionIndex(t.value,Oae(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,t){const i=e.contributors,s={};if(!i)return s;for(let l=0;l<i.length;l++){const d=i[l],y=d.coverageAreas;if(!y)return;for(const g of y){const _=g.bbox,M=g.zoomMin-(t&&g.zoomMin?1:0),E=g.zoomMax-(t&&g.zoomMax?1:0),O={xmin:_[1],ymin:_[0],xmax:_[3],ymax:_[2],spatialReference:it.WGS84},P={extent:Qa(O),attribution:d.attribution||"",score:g.score!=null?g.score:100,id:l};for(let j=M;j<=E;j++)s[j]=s[j]||[],s[j].push(P)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(e,t,i){const{extent:s,scale:l}=t;let d=i.tileInfo.scaleToZoom(l);if(d=Math.min(e.maxKey,Math.round(d)),!s||d==null||d<=-1)return"";const y=e[d],g=pg(s.center.clone().normalize(),t.spatialReference),_={};return y?y.filter(M=>{const E=!_[M.id]&&g&&dg(M.extent,g);return E&&(_[M.id]=!0),E}).sort((M,E)=>E.score-M.score||M.objectId-E.objectId).map(M=>M.attribution).join(", "):""}};b([S({readOnly:!0,type:qe})],Yh.prototype,"items",void 0),b([S({readOnly:!0})],Yh.prototype,"state",null),b([S()],Yh.prototype,"view",void 0),Yh=b([H("esri.widgets.Attribution.AttributionViewModel")],Yh);const NP=Yh,na={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let nr=class extends mr{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this.iconClass=na.widgetIcon,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new NP}initialize(){this.own(Eg(this,"viewModel.items","change",()=>this.scheduleRender()))}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.indexOf(t.text)===-1&&e.push(t.text),e),[]).join(this.itemDelimiter)}render(){const e={[na.open]:this._isOpen};return oe("div",{bind:this,class:this.classes(na.base,e),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return oe("div",{class:na.poweredBy},"Powered by"," ",oe("a",{class:na.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?0:-1,{attributionText:s}=this,l=t?"button":void 0,d={[na.sourcesOpen]:e,[na.interactive]:t};return oe("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes(na.sources,d),innerHTML:s,role:l,tabIndex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth}_afterSourcesNodeUpdate(e){let t=!1;const{clientHeight:i,clientWidth:s,scrollWidth:l}=e,d=l>=s,y=this._attributionTextOverflowed!==d;if(this._attributionTextOverflowed=d,y&&(t=!0),this._isOpen){const g=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,g&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};b([S()],nr.prototype,"_isOpen",void 0),b([S()],nr.prototype,"_isInteractive",null),b([S()],nr.prototype,"_attributionTextOverflowed",void 0),b([S()],nr.prototype,"_prevSourceNodeHeight",void 0),b([S({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],nr.prototype,"attributionText",null),b([S()],nr.prototype,"iconClass",void 0),b([S()],nr.prototype,"itemDelimiter",void 0),b([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],nr.prototype,"label",void 0),b([S(),kr("esri/widgets/Attribution/t9n/Attribution")],nr.prototype,"messages",void 0),b([Ge("viewModel.view")],nr.prototype,"view",void 0),b([S({type:NP})],nr.prototype,"viewModel",void 0),b([bs()],nr.prototype,"_toggleState",null),nr=b([H("esri.widgets.Attribution")],nr);const Cae=nr,Pae="esri.widgets.CompassViewModel";let iu=class extends MC(Fe){constructor(e){super(e),this._handles=new yr,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(ri(this,"view",this._updateRotationWatcher))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};this.view.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&(e.type==="2d"?this._handles.add(ri(this,"view.rotation",this._updateForRotation)):this._handles.add(ri(this,"view.camera",this._updateForCamera)))}};b([S({readOnly:!0})],iu.prototype,"canShowNorth",null),b([S()],iu.prototype,"orientation",void 0),b([S({readOnly:!0})],iu.prototype,"state",null),b([S()],iu.prototype,"view",void 0),iu=b([H(Pae)],iu);const jP=iu,oa={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let Nn=class extends mr{constructor(e,t){super(e,t),this.goToOverride=null,this.iconClass=oa.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new jP}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,i=t==="disabled",s=(t==="rotation"?"rotation":"compass")=="compass",l=i?-1:0,d={[oa.disabled]:i,[oa.interactive]:!i},y={[oa.northIcon]:s,[oa.rotationIcon]:!s},{messages:g}=this;return oe("div",{bind:this,class:this.classes(oa.base,d),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:l,"aria-label":g.reset,title:g.reset},oe("span",{"aria-hidden":"true",class:this.classes(oa.icon,y),styles:this._toRotationTransform(e)}),oe("span",{class:oa.text},g.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};b([Ge("viewModel.goToOverride")],Nn.prototype,"goToOverride",void 0),b([S()],Nn.prototype,"iconClass",void 0),b([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Nn.prototype,"label",void 0),b([S(),kr("esri/widgets/Compass/t9n/Compass")],Nn.prototype,"messages",void 0),b([Ge("viewModel.view")],Nn.prototype,"view",void 0),b([S({type:jP})],Nn.prototype,"viewModel",void 0),b([bs()],Nn.prototype,"_reset",null),Nn=b([H("esri.widgets.Compass")],Nn);const Nae=Nn;let Xh=class extends Fe{constructor(e){super(e),this._handles=new yr,this.navigationMode="pan",this.view=null}initialize(){this._handles.add(NE(this,"view.inputManager",this._setNavigationMode.bind(this)))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&this.view.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};b([S({readOnly:!0})],Xh.prototype,"state",null),b([S()],Xh.prototype,"navigationMode",void 0),b([S()],Xh.prototype,"view",void 0),Xh=b([H("esri.widgets.NavigationToggleViewModel")],Xh);const FP=Xh,us={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let jn=class extends mr{constructor(e,t){super(e,t),this.iconClass=us.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new FP}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",i={[us.disabled]:e,[us.isLayoutHorizontal]:this.layout==="horizontal"},s={[us.activeButton]:t},l={[us.activeButton]:!t},d=e?-1:0,y=this.messages.toggle;return oe("div",{bind:this,class:this.classes(us.base,i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:d,"aria-label":y,title:y},oe("div",{class:this.classes(us.button,us.panButton,s)},oe("span",{class:us.panIcon})),oe("div",{class:this.classes(us.button,us.rotateButton,l)},oe("span",{class:us.rotationIcon})))}_toggle(){this.toggle()}};b([S()],jn.prototype,"iconClass",void 0),b([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],jn.prototype,"label",void 0),b([S({value:"vertical"})],jn.prototype,"layout",null),b([S(),kr("esri/widgets/NavigationToggle/t9n/NavigationToggle")],jn.prototype,"messages",void 0),b([Ge("viewModel.view")],jn.prototype,"view",void 0),b([S({type:FP})],jn.prototype,"viewModel",void 0),b([bs()],jn.prototype,"_toggle",null),jn=b([H("esri.widgets.NavigationToggle")],jn);const jae=jn,jp={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let Ca=class extends mr{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[jp.disabled]:!this.enabled,[jp.interactive]:this.enabled},i={[this.iconClass]:!!this.iconClass};return oe("div",{bind:this,class:this.classes(jp.button,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},oe("span",{"aria-hidden":"true",role:"presentation",class:this.classes(jp.icon,i)}),oe("span",{class:jp.iconText},this.title))}_triggerAction(){this.action.call(this)}};b([S()],Ca.prototype,"action",void 0),b([S()],Ca.prototype,"enabled",void 0),b([S()],Ca.prototype,"iconClass",void 0),b([S()],Ca.prototype,"title",void 0),b([bs()],Ca.prototype,"_triggerAction",null),Ca=b([H("esri.widgets.IconButton")],Ca);const aM=Ca;let Zh=class extends Fe{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return t===0||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return t===0||e<t}};b([S({readOnly:!0})],Zh.prototype,"canZoomIn",null),b([S({readOnly:!0})],Zh.prototype,"canZoomOut",null),b([S()],Zh.prototype,"view",void 0),Zh=b([H("esri.widgets.Zoom.ZoomConditions2D")],Zh);const Fae=Zh;let Qh=class extends Fe{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};b([S({readOnly:!0})],Qh.prototype,"canZoomIn",null),b([S({readOnly:!0})],Qh.prototype,"canZoomOut",null),b([S()],Qh.prototype,"view",void 0),Qh=b([H("esri.widgets.Zoom.ZoomConditions3D")],Qh);const Rae=Qh;let Pa=class extends Fe{constructor(e){super(e),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new Fae({view:e}):e.type==="3d"&&(this._zoomConditions=new Rae({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():X2(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():X2(e.goTo({zoomFactor:.5}))}};b([S()],Pa.prototype,"_zoomConditions",void 0),b([S({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],Pa.prototype,"canZoomIn",void 0),b([S({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],Pa.prototype,"canZoomOut",void 0),b([S({readOnly:!0})],Pa.prototype,"state",null),b([S()],Pa.prototype,"view",null),Pa=b([H("esri.widgets.Zoom.ZoomViewModel")],Pa);const RP=Pa,Fp={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Eo=class extends mr{constructor(e,t){super(e,t),this.iconClass=Fp.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new RP}initialize(){this._zoomInButton=new aM({action:this.zoomIn.bind(this),iconClass:Fp.zoomInIcon}),this._zoomOutButton=new aM({action:this.zoomOut.bind(this),iconClass:Fp.zoomOutIcon})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}render(){const e=this.viewModel,t={[Fp.horizontalLayout]:this.layout==="horizontal"};return this._zoomInButton.enabled=e.state==="ready"&&e.canZoomIn,this._zoomOutButton.enabled=e.state==="ready"&&e.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,oe("div",{class:this.classes(Fp.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};b([S()],Eo.prototype,"iconClass",void 0),b([S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Eo.prototype,"label",void 0),b([S({value:"vertical"})],Eo.prototype,"layout",null),b([S(),kr("esri/widgets/Zoom/t9n/Zoom")],Eo.prototype,"messages",void 0),b([Ge("viewModel.view")],Eo.prototype,"view",void 0),b([S({type:RP})],Eo.prototype,"viewModel",void 0),Eo=b([H("esri.widgets.Zoom")],Eo);const Lae=Eo,LP="esri.views.ui.DefaultUI";function Dae(e){return e&&e.view!==void 0}Se.getLogger(LP);let ky=class extends kae{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"},this.components=[]}initialize(){this._handles.add([Ft(()=>this.components,this._componentsWatcher.bind(this),Gn),Ft(()=>this.view,this._updateViewAwareWidgets.bind(this),Gn)])}_add(e,t,i,s){if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,t,i,s)}_removeComponents(e){e.forEach(t=>{const i=this._find(t);i&&(this.remove(i),i.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(t=>{const i=this._find(t),s=i&&i.widget;Dae(s)&&(s.view=e)})}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(e.indexOf("attribution")===-1&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.initialized&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);if(t)return new Ey({id:e,node:t})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new Cae({view:this.view})}_createCompass(){return new Nae({view:this.view})}_createNavigationToggle(){return new jae({view:this.view})}_createZoom(){return new Lae({view:this.view})}};b([S()],ky.prototype,"components",void 0),ky=b([H(LP)],ky);const zae=ky;let Ay=class extends zae{constructor(e){super(e),this.components=["attribution","zoom"]}};b([S()],Ay.prototype,"components",void 0),Ay=b([H("esri.views.ui.2d.DefaultUI2D")],Ay);const DP=Ay;var n5;let Oy=n5=class extends ge{constructor(e){super(e),this.color=new Ze([0,0,0,1])}clone(){return new n5(le({color:this.color}))}};b([S({type:Ze,json:{write:!0}})],Oy.prototype,"color",void 0),Oy=n5=b([H("esri.webmap.background.ColorBackground")],Oy);const Vae=Oy,oo=Se.getLogger("esri.views.MapView");let zP,VP,GP,qP,UP,BP;async function Gae(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:s,MagnifierView2D:l,Stage:d}]=await Promise.all([import("./webglDeps.904dcd18.js"),import("./mapViewDeps.1c43b8af.js")]);VP=e,GP=t,qP=i,UP=s,BP=l,zP=d}const lM=160;function qae(e){return e&&e.declaredClass==="esri.Viewpoint"}let Ye=class extends pU($re(Ire(Qre))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new gc({getCollections:()=>{var t,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new mne(this),this._pePromise=null,this.floors=new qe,this.highlightOptions=new TP,this.inputManager=new Joe({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new EP,this.type="2d",this.ui=new DP,this.constraints=new pP,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([Ft(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(lM)},Ib),this.on("resize",t=>this._resizeHandler(t)),Ft(()=>{var t;return(t=this.animationManager)==null?void 0:t.animation},t=>{this.animation=t})]),EG()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new eae(this.featuresTilingScheme)}get initialExtentRequired(){var e;const{scale:t,constraints:i,center:s,viewpoint:l,extent:d}=this;let y=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&(e=this.map.initialViewProperties)!=null&&e.viewpoint)&&!d&&(i!=null&&i.effectiveLODs||(y=-1),(!s||t===0&&y===-1)&&(!l||!X(l.targetGeometry)||l.targetGeometry.type!=="extent"&&!l.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!Pc()||(this._pePromise||(this._pePromise=Nc().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,i=e.targetGeometry;return!!qu(i.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};e.when(i,i)}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){e===void 0?this._clearOverride("background"):this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new Be({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(s){return void oo.error(new re("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:s}))}const i=this.viewpoint;X9(i,i,t),this.viewpoint=i}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(Ft(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},Ib),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void oo.error(new re("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(s){return void oo.error(new re("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const i=this.viewpoint;ene(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;pne(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;LS(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(e=>!e.destroyed&&!("layerViews"in e)&&e.updating===!0))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,i;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new re("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):ce(e.targetGeometry)&&(i=new re("mapview:invalid-viewpoint","geometry not defined"))}catch(l){i=new re("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:l})}if(i)return void oo.error(i);this._scaleBeforeChangingSpatialReference=null;const s=new qn({targetGeometry:new Be,scale:0,rotation:0});fn(s,t),this.constraints.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this.frameTask.requestFrame(),this._set("viewpoint",s)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;LS(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),L5(()=>this.ready,t).then(()=>{const i=J({animate:!0},t),s=Xse(e,this);return this.animation.update(s),this._gotoTask={},i.animate?this._gotoAnimated(s,i):this._gotoImmediate(s,i)});oo.error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const i=OS(e)?AS(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let s=new Set,l=!1,d=null,y=null;t!=null&&t.include?hM(t.include,uM(this,E=>s.add(E),E=>{d||(d=new Set),d.add(E)},E=>s.add(E),()=>l=!0)):(l=!0,s=new Set(this.allLayerViews)),t!=null&&t.exclude&&hM(t.exclude,uM(this,E=>s.delete(E),E=>{y||(y=new Set),y.add(E)}));const g=this.allLayerViews.filter(E=>!E.suspended&&s.has(E)).reverse(),_=this.toMap(i);let M=(await Promise.all([l?this.graphicsView.hitTest(_):null,...g.map(E=>E.hitTest(_,i))])).filter(X).flat();return d&&(M=M.filter(E=>d.has(o5(E)))),y&&(M=M.filter(E=>!y.has(o5(E)))),{screenPoint:i,results:M.map(E=>({mapPoint:_,graphic:E}))}}takeScreenshot(e){e=e||{};const t=this.supersampleScreenshotsEnabled?Math.min(4,oae(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach(y=>{const g=this.allLayerViews.find(_=>_.layer.id===y.id);g&&"container"in g&&g.container&&i.push(g.container)})):i=this._stage.children;const{format:s,quality:l}=nae(e.format,e.quality),d=rae(e,t,this.size,this.padding,s,l,i,e.rotation);return this._stage.takeScreenshot(d)}toMap(e){if(!this.ready)return null;const t=OS(e)?AS(this,e):e,i=[0,0],[s,l]=this.state.toMap(i,[t.x,t.y]),d=this.spatialReference;return new Be({x:s,y:l,spatialReference:d})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),i=[t.x,t.y];return this.state.toScreen(i,i),Tr(i[0],i[1])}on(e,t,i,s){return this.inputManager&&this.viewEvents.on(e,t,i,s)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,i;return this.map&&"initialViewProperties"in this.map&&((e=this.map)==null||(t=e.initialViewProperties)==null?void 0:t.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(e){return zS.hasLayerViewModule(e)}importLayerView(e){return zS.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(oo.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>Te(J({},t),{mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=Sae(this.type);return de("safari")&&de("safari")<9&&(e=new re("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:de("safari")})),X(e)?(oo.warn("#validate()",e.message),Promise.reject(e)):Gae()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new K9),this.animation}_cancellableGoTo(e,t,i){const s=()=>e===this._gotoTask,l=i.then(()=>{s()&&(this.animation=null)}).catch(y=>{throw s()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),y}),d=new Promise(y=>y(l));return t.when().catch(()=>{s()&&d.cancel&&d.cancel()}),d}_gotoImmediate(e,t){const i=this._gotoTask,s=this.animation,l=e.then(d=>{if(mi(t),i!==this._gotoTask)throw new re("view:goto-interrupted","Goto was interrupted");this.viewpoint=s.target=d,s.finish()});return this._cancellableGoTo(i,s,l)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<lM&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){var e,t,i,s;const{constraints:l,initialExtent:d,map:y}=this;if(!l)return null;const g=y&&"initialViewProperties"in y&&y.initialViewProperties,_={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};l.effectiveLODs?_.zoom!==-1&&(_.scale=l.zoomToScale(_.zoom)):_.zoom=-1;let M=null,E=null,O=0;const P=_.viewpoint&&_.viewpoint.rotation,j=_.viewpoint&&_.viewpoint.targetGeometry;X(j)&&(j.type==="extent"?M=j:j.type==="point"&&(E=j,O=_.viewpoint.scale));const R=_.extent||M||((e=g==null||(t=g.viewpoint)==null?void 0:t.targetGeometry)==null?void 0:e.extent)||d,z=_.center||E||(R==null?void 0:R.center),q=_.scale||O||(g==null||(i=g.viewpoint)==null?void 0:i.scale)||R&&td(R,this.size),Y=_.rotation||P||(g==null||(s=g.viewpoint)==null?void 0:s.rotation)||0;return z&&q?new qn({targetGeometry:z,scale:q,rotation:Y}):null}_gotoAnimated(e,t){const i=this._gotoTask,s=this.animation,l=e.then(d=>{if(mi(t),i!==this._gotoTask)throw new re("view:goto-interrupted","Goto was interrupted");return s.update(d),this.animationManager.animate(s,this.viewpoint,t),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,s,l)}_project(e,t){var i;const s=e&&e.targetGeometry||e;if(!t)return e;if(!s)return null;if(t.imageCoordinateSystem||(i=s.spatialReference)!=null&&i.imageCoordinateSystem||jr(t,s.spatialReference))return e;const l=Wd(s,t);if(!l)throw new re("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:s,spatialReference:t});return qae(e)?(e.targetGeometry=l,e):l}_resizeHandler(e){if(!this.ready)return;const t=this.state;let i=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],cne(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}_startup(){var e;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint(),i=t.targetGeometry;try{this._project(t,this.spatialReference)}catch(M){var s;oo.warn(new fr("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:i.toJSON(),spatialReference:this.spatialReference,error:M})),t.targetGeometry=((s=this.defaultsFromMap.extent)==null?void 0:s.center)||new Be({x:0,y:0,spatialReference:this.spatialReference})}(e=this.constraints)==null||e.fit(t),this._set("state",new loe({padding:this._get("padding"),size:this.size,viewpoint:t})),this.graphics.owner=this;const l=new zP(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=l,this._magnifierView=new BP,this._magnifierView.magnifier=this.magnifier;const d=new qP({view:this});this._set("labelManager",d);const y=new yne({view:this});this._set("animationManager",y);const g=new UP({view:this,animationManager:y});this._set("mapViewNavigation",g),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),l.on("post-render",()=>this._set("rendering",l.renderRequested)),l.on("will-render",()=>this._set("rendering",l.renderRequested)),l.on("webgl-error",M=>this.fatalError=M.error),Ft(()=>this.stationary,M=>l.stationary=M,Ml),Ft(()=>this.background,M=>{l.background=M,this._magnifierView.background=M},Ml),Ft(()=>this.magnifier,M=>this._magnifierView.magnifier=M,Ml),Ft(()=>this.renderingOptions,M=>l.renderingOptions=M,Ml),Ft(()=>this.highlightOptions,M=>l.highlightOptions=M,Ml),Ft(()=>this.state.id,()=>l.state=this.state,Ml)],"map-view"),this._updateStageChildren();const _=this._resolveWhenReady;this._resolveWhenReady=[],_.forEach(M=>M(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:i,rotation:s,scale:l}=this.state.paddedViewState,d=new Be({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",d),this._set("zoom",-1),this._set("rotation",s),this._set("scale",l),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new doe(hU.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new VP({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new GP(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const g of this.allLayerViews)g.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if(ce(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const g=t.viewpoint.clone();g.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=g}const i=t.clone(),[s,l]=t.center;let d=null;try{d=this._project(new Be({x:s,y:l,spatialReference:t.spatialReference}),e)}catch(g){Pc()||oo.warn(new fr("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:d.toJSON(),spatialReference:e,error:g}))}d||(d=new Be({x:0,y:0,spatialReference:e}));const y=X9(new qn({targetGeometry:new Be,scale:0,rotation:0}),t.viewpoint,d);i.viewpoint=y;try{const _=[t.size[0]/2,t.size[1]/2],M=[_[0]+20,_[1]],E=t.toMap([0,0],M),{x:O,y:P}=this._project(new Be({x:E[0],y:E[1],spatialReference:t.spatialReference}),e);E[0]=O,E[1]=P,i.toScreen(E,E);const j=une(_,E,M),R=Math.hypot(E[0]-_[0],E[1]-_[1])/20;!Number.isFinite(R)||Math.abs(R)>4?(y.rotation=0,y.targetGeometry=new Be({x:0,y:0,spatialReference:e})):(y.scale*=R,y.scale>de("mapview-srswitch-adjust-rotation-scale-threshold")?y.rotation=0:y.rotation+=Number.isFinite(j)?j:0)}catch{}this._get("constraints").constrain(y,null),this._get("state").viewpoint=y,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const g of this.allLayerViews)g.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};b([S({readOnly:!0})],Ye.prototype,"animationManager",void 0),b([S({constructOnly:!0})],Ye.prototype,"deactivatedWebGLExtensions",void 0),b([S({constructOnly:!0})],Ye.prototype,"debugWebGLExtensions",void 0),b([S({readOnly:!0})],Ye.prototype,"featuresTilingScheme",void 0),b([S({readOnly:!0})],Ye.prototype,"fullOpacity",void 0),b([S({readOnly:!0})],Ye.prototype,"graphicsTileStore",null),b([S()],Ye.prototype,"graphicsView",void 0),b([S({readOnly:!0})],Ye.prototype,"state",void 0),b([S()],Ye.prototype,"initialExtentRequired",null),b([S()],Ye.prototype,"labelManager",void 0),b([S({readOnly:!0})],Ye.prototype,"resourceManager",null),b([S({readOnly:!0})],Ye.prototype,"textureManager",null),b([S({readOnly:!0})],Ye.prototype,"mapViewNavigation",void 0),b([S({constructOnly:!0})],Ye.prototype,"renderCanvas",void 0),b([S()],Ye.prototype,"renderingOptions",void 0),b([S({readOnly:!0})],Ye.prototype,"rendering",void 0),b([S({constructOnly:!0})],Ye.prototype,"supersampleScreenshotsEnabled",void 0),b([S({readOnly:!0})],Ye.prototype,"supportsGround",void 0),b([S()],Ye.prototype,"_stationaryTimer",void 0),b([S()],Ye.prototype,"_defaultsFromMapSettings",null),b([S()],Ye.prototype,"_pePromise",void 0),b([S({readOnly:!0})],Ye.prototype,"typeSpecificPreconditionsReady",null),b([S()],Ye.prototype,"animation",null),b([S({type:Vae})],Ye.prototype,"background",null),b([S({value:null,type:Be,dependsOn:["state.id","ready"]})],Ye.prototype,"center",null),b([S({type:pP})],Ye.prototype,"constraints",null),b([S({value:null,type:Mt,dependsOn:["state.id","ready"]})],Ye.prototype,"extent",null),b([S()],Ye.prototype,"floors",void 0),b([S({type:TP})],Ye.prototype,"highlightOptions",void 0),b([S({readOnly:!0})],Ye.prototype,"inputManager",void 0),b([S()],Ye.prototype,"map",void 0),b([S({value:{top:0,right:0,bottom:0,left:0},cast:e=>J({top:0,right:0,bottom:0,left:0},e)})],Ye.prototype,"padding",null),b([S()],Ye.prototype,"resizeAlign",void 0),b([S({readOnly:!0,dependsOn:["state.id"]})],Ye.prototype,"resolution",null),b([S({value:0,type:Number,dependsOn:["state.id","ready"]})],Ye.prototype,"rotation",null),b([S({value:0,type:Number,dependsOn:["state.id","ready"]})],Ye.prototype,"scale",null),b([S({constructOnly:!0})],Ye.prototype,"spatialReferenceLocked",void 0),b([S()],Ye.prototype,"stationary",null),b([S({type:EP,readOnly:!0})],Ye.prototype,"timeline",void 0),b([S({readOnly:!0})],Ye.prototype,"type",void 0),b([S({readOnly:!0})],Ye.prototype,"updating",null),b([S({value:null,type:qn,dependsOn:["state.id","ready"]})],Ye.prototype,"viewpoint",null),b([S({value:-1,dependsOn:["state.id"]})],Ye.prototype,"zoom",null),b([S({type:Boolean})],Ye.prototype,"navigating",null),b([S({type:DP})],Ye.prototype,"ui",void 0),Ye=b([H("esri.views.MapView")],Ye);const Wce=Ye;function o5(e){const t=e.getObjectId();var i,s,l,d;return t?`${(i=(s=(l=e.layer)==null?void 0:l.uid)!=null?s:(d=e.sourceLayer)==null?void 0:d.uid)!=null?i:"MapView"}/${t}`:`"MapView/${e.uid}`}function uM(e,t,i,s,l){return d=>{if(d instanceof rs){if(d.layer===e)l==null||l();else{const y=e.allLayerViews.find(g=>g.layer===d.layer);y&&(s==null||s(y))}i(o5(d))}else{const y=e.allLayerViews.find(g=>g.layer===d);y&&t(y)}}}function hM(e,t){if(e)if(sx(e))for(const i of e)if(sx(i))for(const s of i)t(s);else t(i);else t(e)}let ko=class extends YO(rC(yg)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new Au,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};b([S({type:XO})],ko.prototype,"elevationInfo",void 0),b([S(B9(Au,"graphics"))],ko.prototype,"graphics",void 0),b([S({type:["show","hide"]})],ko.prototype,"listMode",void 0),b([S()],ko.prototype,"screenSizePerspectiveEnabled",void 0),b([S({readOnly:!0})],ko.prototype,"type",void 0),b([S({constructOnly:!0})],ko.prototype,"internal",void 0),ko=b([H("esri.layers.GraphicsLayer")],ko);const Jce=ko;function Uae(e,t){for(var i=0;i<t.length;i++){const s=t[i];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in e)){const d=Object.getOwnPropertyDescriptor(s,l);d&&Object.defineProperty(e,l,d.get?d:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(e)}var L_={exports:{}};(function(e,t){function i(){function l(h){if(typeof h=="number")return G.Uc.$g(h);if(h==null)return null;if(yf[h]!=null)return G.Uc.$g(yf[h]);throw Error("Unrecognised Unit Type")}function d(h){if(typeof h=="number")return G.Uc.$g(h);if(h==null)return null;if(pp[h]!=null)return G.Uc.$g(pp[h]);throw Error("Unrecognised Unit Type")}function y(h){if(h)switch(h){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function g(h,k,v,u){if(v==null||v.B())return null;switch(v.K()){case G.sn.Point:return h.exportPoint(k,v,u);case G.sn.Polygon:return h.exportPolygon(k,v,u);case G.sn.Polyline:return h.exportPolyline(k,v,u);case G.sn.MultiPoint:return h.exportMultipoint(k,v,u);case G.sn.Envelope:return h.exportExtent(k,v,u)}return null}function _(h,k,v,u){if(v.K()!==G.sn.Point)throw Error("Geometry not Point");return h.exportPoint(k,v,u)}function M(h,k,v){return h.convertToGEGeometry(k,v)}function E(h){var k=h.wkid;h=h.wkt;var v=lh.get(k||h);return v==null&&(k!==-1&&k!=null?(v=G.Gg.create(k),lh.set(k,v)):h&&(v=G.Gg.iP(h),lh.set(h,v))),v}function O(h){var k;if(h==null)return null;var v=E(h);return h=v.Id(),v=v.Ln(),(k={}).tolerance=v,k.unitType=h==null?-1:h.od,k.unitID=h==null?-1:h.Fc(),k.unitBaseFactor=h==null?0:h.bi,k.unitSquareDerivative=h==null?0:G.Uc.TF(h).Fc(),k}function P(h,k,v,u){return v==null?null:(v=G.bc.clip(M(h,_e,v),M(h,_e,u),E(k)),g(h,_e,v,k))}function j(h,k,v,u){v=G.bc.el(M(h,_e,v),M(h,_e,u),E(k)),u=[];for(var o=0;o<v.length;o++)u.push(g(h,_e,v[o],k));return u}function R(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return G.bc.contains(M(h,_e,v),M(h,_e,u),E(k))}function z(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return G.bc.tP(M(h,_e,v),M(h,_e,u),E(k))}function q(h,k,v,u,o){if(v==null||u==null)throw Error("Illegal Argument Exception");return G.bc.ub(M(h,_e,v),M(h,_e,u),E(k),l(o))}function Y(h,k,v,u){return!(v==null&&u!=null||u==null&&v!=null)&&G.bc.Nb(M(h,_e,v),M(h,_e,u),E(k))}function te(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return G.bc.JS(M(h,_e,v),M(h,_e,u),E(k))}function ne(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return G.bc.touches(M(h,_e,v),M(h,_e,u),E(k))}function he(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return G.bc.eY(M(h,_e,v),M(h,_e,u),E(k))}function se(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return G.bc.LP(M(h,_e,v),M(h,_e,u),E(k))}function ue(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return G.bc.tU(M(h,_e,v),M(h,_e,u),E(k))}function Ee(h,k,v,u,o){if(v==null||u==null)throw Error("Illegal Argument Exception");return G.bc.sB(M(h,_e,v),M(h,_e,u),E(k),o)}function Oe(h,k,v){if(v==null)throw Error("Illegal Argument Exception");return G.bc.US(M(h,_e,v),E(k))}function Le(h,k,v){if(v==null)throw Error("Illegal Argument Exception");return v=G.bc.YB(M(h,_e,v),E(k)),g(h,_e,v,k)}function Ne(h,k,v,u){if(u===void 0&&(u=!1),v==null)throw Error("Illegal Argument Exception");if(Array.isArray(v)){var o=u,r=[];for(u=0;u<v.length;u++)r.push(M(h,_e,v[u]));for(v=G.bc.bP(r,o),o=Array(v.length),u=0;u<v.length;u++)o[u]=g(h,_e,v[u],k);return o}return u=G.bc.aP(M(h,_e,v),E(k)),g(h,_e,u,k)}function je(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(v)){for(var o=[],r=0;r<v.length;r++)o.push(M(h,_e,v[r]));for(v=G.bc.IP(o,M(h,_e,u),E(k)),u=Array(v.length),r=0;r<v.length;r++)u[r]=g(h,_e,v[r],k);return u}return r=G.bc.km(M(h,_e,v),M(h,_e,u),E(k)),g(h,_e,r,k)}function De(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(v)){for(var o=[],r=0;r<v.length;r++)o.push(M(h,_e,v[r]));for(v=G.bc.JX(o,M(h,_e,u),E(k)),u=Array(v.length),r=0;r<v.length;r++)u[r]=g(h,_e,v[r],k);return u}return r=G.bc.fp(M(h,_e,v),M(h,_e,u),E(k)),g(h,_e,r,k)}function rt(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(v)){for(var o=[],r=0;r<v.length;r++)o.push(M(h,_e,v[r]));for(v=G.bc.HS(o,M(h,_e,u),E(k)),u=Array(v.length),r=0;r<v.length;r++)u[r]=g(h,_e,v[r],k);return u}return r=G.bc.Fa(M(h,_e,v),M(h,_e,u),E(k)),g(h,_e,r,k)}function Ve(h,k,v,u){if(v==null)return null;var o=[];if(Array.isArray(v)){if(v.length===0)return null;for(u=0;u<v.length;u++)o.push(M(h,_e,v[u]))}else o.push(M(h,_e,v)),u!=null&&o.push(M(h,_e,u));return g(h,_e,G.bc.YX(o,E(k)),k)}function ni(h,k,v,u,o,r,n,a){var c=0;if(r!=null)switch(r){case"round":c=0;break;case"bevel":c=1;break;case"miter":c=2;break;case"square":c=3}if(Array.isArray(v)){if(v==null)h=null;else if(v.length===0)h=[];else{var p=[];for(r=0;r<v.length;r++)p.push(M(h,_e,v[r]));for(v=G.bc.rU(p,E(k),u,c,n,a,l(o)),u=Array(v.length),r=0;r<v.length;r++)u[r]=g(h,_e,v[r],k);h=u}return h}return v=G.bc.offset(M(h,_e,v),E(k),u,c,n,a,l(o)),g(h,_e,v,k)}function Rr(h,k,v,u,o,r){if(r===void 0&&(r=!1),Array.isArray(v)){if(!Array.isArray(u)){for(var n=[],a=0;a<v.length;a++)n.push(u);u=n}if(u.length!=v.length){if(u.length==0)throw Error("Illegal Argument Exception");n=[];var c=0;for(a=0;a<v.length;a++)u[a]===void 0?n.push(c):(n.push(u[a]),c=u[a]);u=n}return Wi(h,k,v,u,o,!1,r,"geodesic",NaN)}return v=G.bc.buffer(M(h,_e,v),E(k),u,l(o),!1,0,NaN),g(h,_e,v,k)}function Jt(h,k,v,u,o,r,n,a){if(Array.isArray(v)){if(!Array.isArray(u)){for(var c=[],p=0;p<v.length;p++)c.push(u);u=c}if(u.length!==v.length){if(u.length===0)throw Error("Illegal Argument Exception");c=[];var f=0;for(p=0;p<v.length;p++)u[p]===void 0?c.push(f):(c.push(u[p]),f=u[p]);u=c}return Wi(h,k,v,u,o,!0,r,n,a)}return n===void 0&&(n=NaN),v=G.bc.buffer(M(h,_e,v),E(k),u,l(o),!0,y(r),n),g(h,_e,v,k)}function Wi(h,k,v,u,o,r,n,a,c){if(c===void 0&&(c=NaN),v==null)return null;if(v.length===0)return[];for(var p=[],f=0;f<v.length;f++)p.push(M(h,_e,v[f]));for(v=G.bc.EN(p,E(k),u,l(o),r,n,y(a),c),u=Array(v.length),f=0;f<v.length;f++)u[f]=g(h,_e,v[f],k);return u}function Lr(h,k,v,u,o){var r;return o===void 0&&(o=!0),v=G.bc.iz(M(h,_e,v),M(h,_e,u),o),(r={}).coordinate=_(h,_e,v.az(),k),r.distance=v.cz(),r.isRightSide=v.Nz(),r.vertexIndex=v.Va(),r.isEmpty=v.B(),r}function iv(h,k,v,u){var o;return v=G.bc.jz(M(h,_e,v),M(h,_e,u)),(o={}).coordinate=_(h,_e,v.az(),k),o.distance=v.cz(),o.isRightSide=v.Nz(),o.vertexIndex=v.Va(),o.isEmpty=v.B(),o}function hf(h,k,v,u,o,r){var n;for(v=G.bc.kz(M(h,_e,v),M(h,_e,u),o,r),u=[],o=0;o<v.length;o++)v[o].B()===!1&&u.push(((n={}).coordinate=_(h,_e,v[o].az(),k),n.distance=v[o].cz(),n.isRightSide=v[o].Nz(),n.vertexIndex=v[o].Va(),n.isEmpty=v[o].B(),n));return u}function rv(h,k,v,u,o,r){return v=G.bc.IQ(M(h,_e,v),E(k),u,o,l(r)),g(h,_e,v,k)}function cf(h,k,v,u,o){return v=G.bc.Rr(M(h,_e,v),E(k),u,l(o)),g(h,_e,v,k)}function sv(h,k,v,u,o,r){return r===void 0&&(r=0),v=G.bc.Ry(M(h,_e,v),E(k),u,l(o),r),g(h,_e,v,k)}function nv(h,k,v,u){if(v==null)throw Error("Illegal Argument Exception");return G.bc.zU(M(h,_e,v),E(k),d(u))}function ov(h,k,v,u){if(v==null)throw Error("Illegal Argument Exception");return G.bc.AU(M(h,_e,v),E(k),l(u))}function pf(h,k,v,u,o){if(v==null)throw Error("Illegal Argument Exception");return G.bc.OQ(M(h,_e,v),E(k),d(u),y(o))}function av(h,k,v,u,o){if(v==null)throw Error("Illegal Argument Exception");return G.bc.RQ(M(h,_e,v),E(k),l(u),y(o))}function lv(h){G.FL.bind(h)}function uv(h,k,v,u,o){var r=null,n=null;if(u){if(!o)throw G.i.O("AOI missing Spatial Reference");r=M(h,_e,u),n=E(o).gh()}return(h=G.hu.OR(E(k).gh(),E(v).gh(),r,n))!==null?h:null}function hv(h,k,v,u,o){var r=null,n=null;if(u){if(!o)throw G.i.O("AOI missing Spatial Reference");r=M(h,_e,u),n=E(o).gh()}return G.hu.PR(E(k).gh(),E(v).gh(),r,n)}function cv(h,k,v,u,o){if(o===void 0&&(o=null),this.zY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(k.length===0)return[];if(o){var r=o.getCachedGeTransformation(v,u);if(!r)e:{if(r=o,o=null,r){var n=r.getGTListEntry();if(n!==null){o=new G.pC(null);for(var a=0,c=n.steps;a<c.length;a++){n=c[a];var p=new G.Bx(n.geogtran);n.isInverse&&p.Lz(),o.add(p)}o=G.xr.Or(E(v).gh(),E(u).gh(),o),r.assignCachedGe(v,u,o),r=o;break e}}if(o===null&&r&&r.steps&&0<r.steps.length){for(o=new G.pC(null),a=0,c=r.steps;a<c.length;a++)(n=c[a]).wkid!=-1&&n.wkid!=null?o.add(G.Bx.create(n.wkid,n.isInverse)):o.add(G.Bx.mP(n.wkt,n.isInverse));o=G.xr.Or(E(v).gh(),E(u).gh(),o),r.assignCachedGe(v,u,o),r=o}else r=G.xr.Or(E(v).gh(),E(u).gh(),o)}for(v=[],n=0;n<k.length;n++)o=k[n],v.push(df(h,o,u,r))}else for(r=G.xr.Or(E(v).gh(),E(u).gh(),null),v=[],n=0;n<k.length;n++)o=k[n],v.push(df(h,o,u,r));return v}function df(h,k,v,u){return k=G.bc.Ah(M(h,_e,k),u),g(h,_e,k,v)}var vi,G,Ji,ff,ft=this&&this.__extends||function(){function h(k,v){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var r in o)o.hasOwnProperty(r)&&(u[r]=o[r])})(k,v)}return function(k,v){function u(){this.constructor=k}h(k,v),k.prototype=v===null?Object.create(v):(u.prototype=v.prototype,new u)}}();(function(h){var k;(k=h.sn||(h.sn={}))[k.Unknown=0]="Unknown",k[k.Point=33]="Point",k[k.Line=322]="Line",k[k.Envelope=197]="Envelope",k[k.MultiPoint=550]="MultiPoint",k[k.Polyline=1607]="Polyline",k[k.Polygon=1736]="Polygon",function(u){u[u.enumMild=0]="enumMild",u[u.enumMedium=1]="enumMedium",u[u.enumHot=2]="enumHot"}(h.QK||(h.QK={}));var v=function(){function u(){this.description=null,this.PA=0}return u.prototype.K=function(){return 0},u.prototype.Eb=function(){return-1},u.prototype.kg=function(o){this.wc(),o!=this.description&&this.un(o)},u.prototype.un=function(){},u.prototype.Ll=function(o){this.wc(),o!=this.description&&(o=h.ee.uR(this.description,o))!=this.description&&this.un(o)},u.prototype.hasAttribute=function(o){return this.description.hasAttribute(o)},u.prototype.se=function(o){this.wc(),this.description.hasAttribute(o)||(o=h.ee.tR(this.description,o),this.un(o))},u.prototype.Ug=function(){return null},u.prototype.dn=function(){},u.prototype.A=function(){},u.prototype.Ro=function(){},u.prototype.yc=function(o){this.A(o)},u.prototype.B=function(){return!0},u.prototype.Pa=function(){},u.prototype.Pc=function(){},u.prototype.Ja=function(){return null},u.prototype.copyTo=function(){},u.prototype.He=function(){return 0},u.prototype.Rb=function(){return 0},u.prototype.aG=function(){return this.hasAttribute(1)},u.uf=function(o){return 1+((192&o)>>6)>>1},u.Sn=function(o){return(32&o)!=0},u.KS=function(o){return(128&o)!=0},u.zd=function(o){return(256&o)!=0},u.yj=function(o){return(512&o)!=0},u.Ic=function(o){return(1024&o)!=0},u.prototype.Pf=function(){var o=this.Ja();return this.copyTo(o),o},u.prototype.mg=function(){return null},u.ig=function(o){var r=o.Ja();return o.copyTo(r),r},u.prototype.wc=function(){0<=this.PA&&(this.PA+=2147483649)},u.yx=function(o){var r=o.K();if(u.yj(r))return o.I();if(o.B())return 0;if(r==197)return 4;if(r==33)return 1;if(u.zd(r))return 2;throw h.i.ga("missing type")},u}();h.ba=v})(G||(G={})),Ji=G||(G={}),ff=function(){function h(){this.y=this.x=0}return h.construct=function(k,v){var u=new h;return u.x=k,u.y=v,u},h.bl=function(k){var v=new h;return v.x=k.x,v.y=k.y,v},h.prototype.na=function(k,v){this.x=k,this.y=v},h.prototype.N=function(k){this.x=k.x,this.y=k.y},h.prototype.hq=function(k,v){return this.x===k&&this.y===v},h.prototype.Mz=function(k){return 2220446049250313e-31>=Math.abs(this.x-k.x)&&2220446049250313e-31>=Math.abs(this.y-k.y)},h.prototype.rb=function(k){return this.x===k.x&&this.y===k.y},h.prototype.Nb=function(k){return k==this||k instanceof h&&this.x==k.x&&this.y==k.y},h.prototype.sub=function(k){this.x-=k.x,this.y-=k.y},h.prototype.vc=function(k,v){this.x=k.x-v.x,this.y=k.y-v.y},h.prototype.add=function(k,v){v!==void 0?(this.x=k.x+v.x,this.y=k.y+v.y):(this.x+=k.x,this.y+=k.y)},h.prototype.Uq=function(){this.x=-this.x,this.y=-this.y},h.prototype.mt=function(k){this.x=-k.x,this.y=-k.y},h.prototype.ES=function(k,v,u){this.x=k.x*(1-u)+v.x*u,this.y=k.y*(1-u)+v.y*u},h.prototype.Ct=function(k,v){this.x=this.x*k+v.x,this.y=this.y*k+v.y},h.prototype.wW=function(k,v,u){this.x=v.x*k+u.x,this.y=v.y*k+u.y},h.prototype.scale=function(k){this.x*=k,this.y*=k},h.prototype.compare=function(k){return this.y<k.y?-1:this.y>k.y?1:this.x<k.x?-1:this.x>k.x?1:0},h.prototype.normalize=function(){var k=this.length();k==0&&(this.x=1,this.y=0),this.x/=k,this.y/=k},h.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},h.prototype.Sk=function(){return this.x*this.x+this.y*this.y},h.ub=function(k,v){return Math.sqrt(this.zc(k,v))},h.Jy=function(k,v,u,o){return k-=u,v-=o,Math.sqrt(k*k+v*v)},h.prototype.Rh=function(k){return this.x*k.x+this.y*k.y},h.prototype.YC=function(k){return Math.abs(this.x*k.x)+Math.abs(this.y*k.y)},h.prototype.xi=function(k){return this.x*k.y-this.y*k.x},h.prototype.Bt=function(k,v){var u=-this.x*v+this.y*k;this.x=this.x*k+this.y*v,this.y=u},h.prototype.Iv=function(){var k=this.x;this.x=-this.y,this.y=k},h.prototype.EG=function(k){this.x=-k.y,this.y=k.x},h.prototype.cr=function(){var k=this.x;this.x=this.y,this.y=-k},h.prototype.ru=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},h.ou=function(k,v){var u=k.ru(),o=v.ru();return o==u?0>(k=k.xi(v))?1:0<k?-1:0:u<o?-1:1},h.zc=function(k,v){var u=k.x-v.x;return u*u+(k=k.y-v.y)*k},h.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},h.prototype.Sc=function(){this.y=this.x=NaN},h.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},h.prototype.offset=function(k,v){var u=h.ub(k,v),o=h.construct(this.x,this.y);if(u==0)return h.ub(o,k);var r=new h;return r.N(v),r.sub(k),o.sub(k),o.xi(r)/u},h.Wq=function(k,v,u){var o=new Ji.Xb;o.set(v.x),o.sub(k.x);var r=new Ji.Xb;r.set(u.y),r.sub(k.y);var n=new Ji.Xb;n.set(v.y),n.sub(k.y);var a=new Ji.Xb;return a.set(u.x),a.sub(k.x),o.Ag(r),n.Ag(a),o.sub(n),o.qs()?(o=new Ji.ip(v.x),r=new Ji.ip(k.x),n=new Ji.ip(k.y),o=o.jt(r),k=(k=new Ji.ip(u.y)).jt(n),v=(v=new Ji.ip(v.y)).jt(n),u=(u=new Ji.ip(u.x)).jt(r),o=o.nr(k),v=v.nr(u),(o=o.nr(v)).dT()?-1:o.XR()?1:0):0>(u=o.value())?-1:0<u?1:0},h.prototype.dc=function(){return Ji.P.vj(Ji.P.vj())},h}(),Ji.h=ff,function(h){var k=function(){function v(u){this.zy=this.Nt=0,this.CX=u}return v.prototype.reset=function(){this.zy=this.Nt=0},v.prototype.add=function(u){u-=this.zy;var o=this.Nt+u;this.zy=o-this.Nt-u,this.Nt=o},v.prototype.sub=function(u){this.add(-u)},v.prototype.tm=function(){return this.CX+this.Nt},v}();h.Dx=k,h.mc=function(){function v(){}return v.Dn=function(u,o){return 0<=o?Math.abs(u):-Math.abs(u)},v.sign=function(u){return 0>u?-1:0<u?1:0},v.JK=function(u){return u-360*Math.floor(u/360)},v.round=function(u){return Math.floor(u+.5)},v.nx=function(u){return u*u},v.jq=function(u,o,r){return .5>=r?u+(o-u)*r:o-(o-u)*(1-r)},v.GG=function(u,o,r,n){.5>=r?(n.x=u.x+(o.x-u.x)*r,n.y=u.y+(o.y-u.y)*r):(n.x=o.x-(o.x-u.x)*(1-r),n.y=o.y-(o.y-u.y)*(1-r))},v.bT=function(u,o,r,n,a,c){.5>=a?(c.x=u+(r-u)*a,c.y=o+(n-o)*a):(c.x=r-(r-u)*(1-a),c.y=n-(n-o)*(1-a))},v}()}(G||(G={})),function(h){var k=function(v){function u(){var o=v.call(this)||this;return o.sa=0,o.oa=0,o.qa=0,o.ma=0,o.la=null,o}return ft(u,v),u.prototype.ac=function(){return h.h.construct(this.sa,this.oa)},u.prototype.$p=function(o){o.x=this.sa,o.y=this.oa},u.prototype.Ec=function(o){this.gm(0,o)},u.prototype.SB=function(o,r){this.gm(0,h.h.construct(o,r))},u.prototype.Uo=function(o){this.$C(0,o)},u.prototype.setStart=function(o){this.mD(0,o)},u.prototype.xv=function(o,r){return this.Pd(0,o,r)},u.prototype.RB=function(o,r,n){this.vn(0,o,r,n)},u.prototype.xc=function(){return h.h.construct(this.qa,this.ma)},u.prototype.Ur=function(o){o.x=this.qa,o.y=this.ma},u.prototype.Rc=function(o){this.gm(1,o)},u.prototype.Sl=function(o,r){this.gm(1,h.h.construct(o,r))},u.prototype.Qo=function(o){this.$C(1,o)},u.prototype.setEnd=function(o){this.mD(1,o)},u.prototype.hv=function(o,r){return this.Pd(1,o,r)},u.prototype.IB=function(o,r,n){this.vn(1,o,r,n)},u.prototype.Eb=function(){return 1},u.prototype.B=function(){return this.Bc()},u.prototype.Pa=function(){},u.prototype.He=function(){return 0},u.prototype.Fa=function(o,r,n,a,c){return this.CM(o,r,n,a,c)},u.prototype.isIntersecting=function(o,r){return this.Br(o,r,!1)!=0},u.prototype.rs=function(o,r){return this.su(o,r,!1)},u.prototype.su=function(){return null},u.prototype.Bc=function(){return!1},u.prototype.Zx=function(o){if(this.wc(),this.la==null&&0<o)this.la=h.P.lg(2*o);else if(this.la!=null&&this.la.length<2*o){for(var r=this.la.slice(0),n=this.la.length;n<2*o;n++)r[n]=0;this.la=r}},u.ZL=function(o,r,n){if(0<n)var a=0;for(var c=0;c<n;c++)r[0+a]=o[0],a++},u.prototype.gm=function(o,r){o!=0?(this.qa=r.x,this.ma=r.y):(this.sa=r.x,this.oa=r.y)},u.prototype.un=function(o){if(this.la!=null){for(var r=h.ee.Jw(o,this.description),n=[],a=u.Ig(this.description,0),c=u.Ig(this.description,1),p=u.Ig(o,0),f=u.Ig(o,1),m=0,w=1,x=o.Ba;w<x;w++){var $=o.qd(w),T=h.ua.Wa($);if(r[w]==-1){var A=h.ua.te($);for($=0;$<T;$++)n[p+m]=A,n[f+m]=A,m++}else for(A=this.description.$j(r[w])-2,$=0;$<T;$++)n[p+m]=this.la[a+A],n[f+m]=this.la[c+A],m++,A++}this.la=n}this.description=o},u.prototype.$C=function(o,r){if(this.Bc())throw h.i.ga("empty geometry");r.kg(this.description),r.Bc()&&r.up();for(var n=0;n<this.description.Ba;n++)for(var a=this.description.Fd(n),c=0,p=h.ua.Wa(a);c<p;c++){var f=this.Pd(o,a,c);r.setAttribute(a,c,f)}},u.prototype.mD=function(o,r){if(this.wc(),r.Bc())throw h.i.ga("empty geometry");for(var n=r.description,a=0,c=n.Ba;a<c;a++)for(var p=n.Fd(a),f=h.ua.Wa(p),m=0;m<f;m++){var w=r.Vc(p,m);this.vn(o,p,m,w)}},u.prototype.Pd=function(o,r,n){if(this.Bc())throw h.i.ga("This operation was performed on an Empty Geometry.");if(r==0)return o!=0?n!=0?this.ma:this.qa:n!=0?this.oa:this.sa;if(n>=h.ua.Wa(r))throw h.i.re();var a=this.description.Qf(r);return 0<=a?(this.la!=null&&this.Zx(this.description.Be.length-2),this.la[u.Ig(this.description,o)+this.description.$j(a)-2+n]):h.ua.te(r)},u.prototype.vn=function(o,r,n,a){if(this.wc(),n>=h.ua.Wa(r))throw h.i.re();var c=this.description.Qf(r);0>c&&(this.se(r),c=this.description.Qf(r)),r==0?o!=0?n!=0?this.ma=a:this.qa=a:n!=0?this.oa=a:this.sa=a:(this.la==null&&this.Zx(this.description.Be.length-2),this.la[u.Ig(this.description,o)+this.description.$j(c)-2+n]=a)},u.prototype.copyTo=function(o){if(o.K()!=this.K())throw h.i.O();o.description=this.description,o.Zx(this.description.Be.length-2),u.ZL(this.la,o.la,2*(this.description.Be.length-2)),o.sa=this.sa,o.oa=this.oa,o.qa=this.qa,o.ma=this.ma,o.wc(),this.pp(o)},u.prototype.Ug=function(o,r){var n=new h.Oc;return this.Bc()?(n.Pa(),n):(n.pa=this.Pd(0,o,r),n.wa=n.pa,n.Lk(this.Pd(1,o,r)),n)},u.prototype.RI=function(o){this.Bc()?o.Pa():(o.pa=this.Pd(0,0,0),o.wa=o.pa,o.Lk(this.Pd(1,0,0)))},u.prototype.Uw=function(o,r){r.kg(this.description),r.Db(this.ic(o));for(var n=1,a=this.description.Ba;n<a;n++)for(var c=this.description.Fd(n),p=h.ua.Wa(c),f=0;f<p;f++){var m=this.Vc(o,c,f);r.setAttribute(c,f,m)}},u.prototype.xM=function(o){if(this.description!=o.description||this.sa!=o.sa||this.qa!=o.qa||this.oa!=o.oa||this.ma!=o.ma)return!1;for(var r=0;r<2*(this.description.Be.length-2);r++)if(this.la[r]!=o.la[r])return!1;return!0},u.prototype.tG=function(){return this.sa==this.qa&&this.oa==this.ma},u.prototype.reverse=function(){var o=this.sa;this.sa=this.qa,this.qa=o,o=this.oa,this.oa=this.ma,this.ma=o,o=1;for(var r=this.description.Ba;o<r;o++)for(var n=this.description.qd(o),a=0,c=h.ua.Wa(n);a<c;a++){var p=this.Pd(0,n,a),f=this.Pd(1,n,a);this.vn(0,n,a,f),this.vn(1,n,a,p)}},u.prototype.Br=function(o,r,n){var a=o.K();if(this.K()===322){if(a==322)return h.zb.GM(this,o,r,n);throw h.i.Ra()}throw h.i.Ra()},u.prototype.CM=function(o,r,n,a,c){var p=o.K();if(this.K()===322){if(p==322)return h.zb.Xx(this,o,r,n,a,c);throw h.i.Ra()}throw h.i.Ra()},u.prototype.Rx=function(){return null},u.Ig=function(o,r){return r*(o.Be.length-2)},u.prototype.ic=function(o,r){if(r===void 0)return r=new h.h,this.ic(o,r),r;h.mc.bT(this.sa,this.oa,this.qa,this.ma,o,r)},u.prototype.fe=function(){return null},u.prototype.XF=function(){return null},u.prototype.fq=function(){return null},u.prototype.Ci=function(){return null},u.prototype.Qn=function(){return null},u.prototype.jg=function(){return null},u.prototype.Sx=function(o,r){return r!==void 0?this.tx(r)-this.tx(o):this.tx(o)},u.prototype.pp=function(){},u.prototype.el=function(){return null},u.prototype.bh=function(){},u.prototype.Vc=function(){return null},u.prototype.Me=function(){return null},u.prototype.tx=function(){return null},u.prototype.FG=function(){return null},u.prototype.ub=function(o,r){if(!r&&this.Br(o,0,!1)!=0)return 0;r=17976931348623157e292;var n=this.ac(),a=o.fe(n,!1);return n.sub(o.ic(a)),(n=n.length())<r&&(r=n),n=this.xc(),a=o.fe(n,!1),n.sub(o.ic(a)),(n=n.length())<r&&(r=n),n=o.ac(),a=this.fe(n,!1),n.sub(this.ic(a)),(n=n.length())<r&&(r=n),n=o.xc(),a=this.fe(n,!1),n.sub(this.ic(a)),(n=n.length())<r&&(r=n),r},u.prototype.mg=function(){return h.ri.im(this,null)},u}(h.ba);h.KC=k}(G||(G={})),new G.h,function(h){var k;(k=h.SK||(h.SK={}))[k.Unknown=-1]="Unknown",k[k.Not=0]="Not",k[k.Weak=1]="Weak",k[k.Strong=2]="Strong",function(u){u[u.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",u[u.IsWeakSimple=2]="IsWeakSimple",u[u.IsStrongSimple=4]="IsStrongSimple",u[u.DirtyOGCFlags=8]="DirtyOGCFlags",u[u.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",u[u.DirtyExactIntervals=64]="DirtyExactIntervals",u[u.DirtyLooseIntervals=128]="DirtyLooseIntervals",u[u.DirtyIntervals=192]="DirtyIntervals",u[u.DirtyIsEnvelope=256]="DirtyIsEnvelope",u[u.DirtyLength2D=512]="DirtyLength2D",u[u.DirtyRingAreas2D=1024]="DirtyRingAreas2D",u[u.DirtyCoordinates=1993]="DirtyCoordinates",u[u.DirtyAllInternal=65535]="DirtyAllInternal",u[u.DirtyAll=16777215]="DirtyAll"}(h.EK||(h.EK={}));var v=function(u){function o(){var r=u.call(this)||this;return r.Jm=65535,r.xa=0,r.Qg=-1,r.Cb=null,r}return ft(o,u),o.prototype.pp=function(){},o.prototype.Yx=function(){},o.prototype.dy=function(){},o.prototype.I=function(){return this.xa},o.prototype.B=function(){return this.Bc()},o.prototype.Bc=function(){return this.xa==0},o.prototype.ak=function(r){return(this.Jm&r)!=0},o.prototype.Nf=function(r,n){this.Jm=n?this.Jm|r:this.Jm&~r},o.prototype.rc=function(){this.ak(32)&&this.UM()},o.prototype.ux=function(){if(this.Bc())throw h.i.ga("This operation was performed on an Empty Geometry.")},o.prototype.we=function(r,n){if(0>r||r>=this.xa)throw h.i.ga("index out of bounds");this.rc(),n.kg(this.description),n.B()&&n.up();for(var a=0;a<this.description.Ba;a++)for(var c=this.description.Fd(a),p=0,f=h.ua.Wa(c);p<f;p++){var m=this.Aa[a].Bg(f*r+p);n.setAttribute(c,p,m)}},o.prototype.Ht=function(r,n){this.rc();for(var a=n.description,c=0;c<a.Ba;c++)for(var p=a.Fd(c),f=h.ua.Wa(p),m=0;m<f;m++){var w=n.Vc(p,m);this.setAttribute(p,r,m,w)}},o.prototype.D=function(r,n){if(0>r||r>=this.I())throw h.i.re();this.rc(),this.Aa[0].uc(2*r,n)},o.prototype.Oa=function(r){var n=new h.h;return this.D(r,n),n},o.prototype.Hc=function(r,n){this.Aa[0].uc(2*r,n)},o.prototype.Db=function(r,n,a){if(0>r||r>=this.xa)throw h.i.re();this.rc();var c=this.Aa[0];a!==void 0?(c.write(2*r,n),c.write(2*r+1,a)):c.Ut(2*r,n),this.Qc(1993)},o.prototype.xz=function(){if(void 0>=this.I())throw h.i.re();this.rc();var r=this.Aa[0],n=new h.Od;return n.x=r.read(NaN),n.y=r.read(NaN),n.z=this.hasAttribute(1)?this.Aa[1].Bg(void 0):h.ua.te(1),n},o.prototype.XB=function(r){if(0>r||r>=this.I())throw h.i.re();this.se(1),this.rc(),this.Qc(1993);var n=this.Aa[0];n.write(2*r,(void 0).x),n.write(2*r+1,(void 0).y),this.Aa[1].rr(r,(void 0).z)},o.prototype.Vc=function(r,n,a){if(0>n||n>=this.xa)throw h.i.re();var c=h.ua.Wa(r);if(a>=c)throw h.i.re();this.rc();var p=this.description.Qf(r);return 0<=p?this.Aa[p].Bg(n*c+a):h.ua.te(r)},o.prototype.qF=function(r,n){return this.Vc(r,n,void 0)},o.prototype.setAttribute=function(r,n,a,c){if(0>n||n>=this.xa)throw h.i.re();var p=h.ua.Wa(r);if(a>=p)throw h.i.re();this.se(r),this.rc(),r=this.description.Qf(r),this.Qc(1993),this.Aa[r].rr(n*p+a,c)},o.prototype.vb=function(r){return this.ux(),this.se(r),this.rc(),this.Aa[this.description.Qf(r)]},o.prototype.kn=function(r,n){if(n!=null&&h.ua.Vp(r)!=n.Vp())throw h.i.O();this.se(r),r=this.description.Qf(r),this.Aa==null&&(this.Aa=h.Zc.iI(this.description.Ba)),this.Aa[r]=n,this.Qc(16777215)},o.prototype.un=function(r){var n=null;if(this.Aa!=null){var a=h.ee.Jw(r,this.description);n=[];for(var c=0,p=r.Ba;c<p;c++)a[c]!=-1&&(n[c]=this.Aa[a[c]])}this.description=r,this.Aa=n,this.Qg=-1,this.Qc(16777215)},o.prototype.sD=function(r){this.xu(!0),r instanceof h.l?this.aa.A(r):this.aa.Ro(r)},o.prototype.TM=function(r){this.xu(!1),r instanceof h.l?this.aa.A(r):this.aa.Ro(r)},o.prototype.dn=function(r){this.xu(!0),this.aa.copyTo(r)},o.prototype.A=function(r){this.sD(r)},o.prototype.Ro=function(r){this.sD(r)},o.prototype.yc=function(r){this.TM(r)},o.prototype.Ug=function(r,n){var a=new h.Oc;return this.Bc()?(a.Pa(),a):(this.xu(!0),this.aa.Ug(r,n))},o.prototype.dc=function(){var r=this.description.dc();if(!this.Bc())for(var n=this.I(),a=0,c=this.description.Ba;a<c;a++)r=this.Aa[a].Bn(r,0,n*h.ua.Wa(this.description.Fd(a)));return r},o.prototype.Nb=function(r){if(r==this)return!0;if(!(r instanceof o&&this.description.Nb(r.description))||this.Bc()!=r.Bc())return!1;if(this.Bc())return!0;var n=this.I();if(n!=r.I())return!1;for(var a=0;a<this.description.Ba;a++){var c=this.description.qd(a),p=this.vb(c),f=r.vb(c);if(!p.Nb(f,0,n*h.ua.Wa(c)))return!1}return!0},o.prototype.copyTo=function(r){if(r.K()!=this.K())throw h.i.O();this.WC(r)},o.prototype.WC=function(r){this.rc(),r.description=this.description,r.Aa=null;var n=this.description.Ba,a=null;if(this.Aa!=null){a=[];for(var c=0;c<n;c++)this.Aa[c]!=null&&(a[c]=this.Aa[c].AB(this.I()*h.ua.Wa(this.description.Fd(c))))}this.aa!=null?(r.aa=this.aa.Ja(),this.aa.copyTo(r.aa)):r.aa=null,r.xa=this.xa,r.Jm=this.Jm,r.Aa=a;try{this.pp(r)}catch{throw r.Pa(),h.i.gu()}},o.prototype.oD=function(){this.xa=0,this.Qg=-1,this.Aa=null,this.Qc(16777215)},o.prototype.Qc=function(r){r==16777215&&(this.Qg=-1,this.Yx()),this.Jm|=r,this.dM(),this.wc()},o.prototype.xu=function(r){if(this.rc(),this.ak(192))if(this.aa==null?this.aa=new h.Gh(this.description):this.aa.kg(this.description),this.B())this.aa.Pa();else{this.cy(r);for(var n=1;n<this.description.Ba;n++)for(var a=this.description.Fd(n),c=h.ua.Wa(a),p=this.Aa[n],f=0;f<c;f++){var m=new h.Oc;m.Pa();for(var w=0;w<this.xa;w++){var x=p.Bg(w*c+f);m.$b(x)}this.aa.setInterval(a,f,m)}r&&this.Nf(192,!1)}},o.prototype.cy=function(){this.aa.Pa();for(var r=this.Aa[0],n=new h.h,a=0;a<this.xa;a++)r.uc(2*a,n),this.aa.$b(n)},o.prototype.Ap=function(r){r.Pa();for(var n=this.Aa[0],a=new h.h,c=0;c<this.xa;c++)n.uc(2*c,a),r.$b(a)},o.prototype.UM=function(){if(this.Qg<this.xa){this.Aa==null&&(this.Aa=h.Zc.iI(this.description.Ba)),this.Qg=2147483647;for(var r=0;r<this.description.Ba;r++){var n=this.description.Fd(r);if(this.Aa[r]!=null){var a=h.ua.Wa(n),c=h.P.truncate(this.Aa[r].size/a);c<this.xa&&(c=h.P.truncate(this.Qg>this.xa+5?(5*this.xa+3)/4:this.xa),this.Aa[r].resize(c*a,h.ua.te(n))),c<this.Qg&&(this.Qg=c)}else this.Aa[r]=h.Zc.QE(n,this.xa),this.Qg=this.xa}}this.dy(),this.Nf(32,!1)},o.prototype.fm=function(r){if(0>r)throw h.i.O();r!=this.xa&&(this.xa=r,this.Qc(65535))},o.prototype.qm=function(r){if(!this.ak(1)){if(!this.ak(2))return 0;if(this.GT>=r)return this.ak(8)?1:2}return-1},o.prototype.Dh=function(r,n){if(this.GT=n,r==-1)this.Nf(1,!0),this.Nf(8,!0);else if(this.Nf(1,!1),this.Nf(8,!0),r==0)this.Nf(2,!1),this.Nf(4,!1);else if(r==1)this.Nf(2,!0),this.Nf(4,!1);else{if(r!=2)throw h.i.ga("internal error.");this.Nf(2,!0),this.Nf(4,!0)}},o.prototype.dM=function(){this.Cb!=null&&(this.Cb=null)},o.prototype.cD=function(r,n,a,c){if(0>r||r>=this.xa||0>n||n>=this.xa)throw h.i.ga("index out of bounds");this.rc(),c.kg(this.description),c.B()&&c.up();for(var p=0;p<this.description.Ba;p++)for(var f=this.description.Fd(p),m=0,w=h.ua.Wa(f);m<w;m++){var x=this.Aa[p].Bg(w*r+m),$=this.Aa[p].Bg(w*n+m);c.setAttribute(f,m,h.mc.jq(x,$,a))}},o.prototype.Ar=function(r,n){var a=this.Aa[0].o,c=a[2*r]-a[2*n];return r=a[2*r+1]-a[2*n+1],Math.sqrt(c*c+r*r)},o.prototype.Eh=function(r,n){if(0>r||r>=this.xa)throw h.i.re();if(n.B())throw h.i.O();this.rc();for(var a=n.description,c=0;c<a.Ba;c++)for(var p=a.qd(c),f=h.ua.Wa(p),m=0;m<f;m++){var w=n.Vc(p,m);this.setAttribute(p,r,m,w)}},o.prototype.mu=function(){return null},o.prototype.gj=function(){return null},o}(h.ba);h.Ex=v}(G||(G={})),function(h){var k=function(){function v(){this.ob=this.$n=null,this.Vm=124234251,this.Sv=!0,this.Ne=-1,this.ob=new h.ad(7),this.$n=null}return v.prototype.Wo=function(u){this.$n=u},v.prototype.JP=function(){this.Sv=!1},v.prototype.Ee=function(u){this.ob.Ee(u)},v.prototype.Qr=function(u){var o=this.ob.De();return this.fX(o),this.iX(u,o),o},v.prototype.EP=function(u){this.ob.kd(u)},v.prototype.addElement=function(u,o){return o==-1&&(this.Ne==-1&&(this.Ne=this.Qr(-1)),o=this.Ne),this.xD(u,0,o)},v.prototype.BD=function(u){return this.Ne==-1&&(this.Ne=this.Qr(-1)),this.xD(u,1,this.Ne)},v.prototype.yn=function(u){this.Ne==-1&&(this.Ne=this.Qr(-1));var o=this.Ne,r=this.ob.o;if(o==-1||r[7*o]==-1)return u=this.ob.Nl([-1,-1,-1,u,this.il(),-1,-1]),(r=this.ob.o)[7*o]=u,this.xp(-1,u,o,r),u;var n=o==-1?-1:r[7*o+2];return u=this.ob.Nl([-1,-1,n,u,this.il(),-1,-1]),(r=this.ob.o)[7*n+1]=u,this.jy(u,r),r[7*u+2]===-1&&(r[7*o]=u),this.xp(-1,u,o,r),u},v.prototype.Au=function(u,o,r,n){var a=-1;a==-1&&(this.Ne==-1&&(this.Ne=this.Qr(-1)),a=this.Ne);var c=this.ob.o;if(a==-1||c[7*a]==-1)return r=this.ob.Nl([-1,-1,-1,r,this.il(),-1,-1]),(c=this.ob.o)[7*a]=r,this.xp(-1,r,a,c),r;if(n){n=o!=-1?this.$n.compare(this,r,o):-1;var p=u!=-1?this.$n.compare(this,r,u):1}else n=-1,p=1;if(n==0||p==0)return c[7*a+3]=n==0?o:u,-1;for((o!=-1&&u!=-1?this.Vm>h.P.WA(this.Vm)>>1:o!=-1)?u=o:n=p,o=!0;;){if(0>n){if((p=c[7*u])==-1){n=u,r=this.ob.Nl([-1,-1,u,r,this.il(),-1,-1]),(c=this.ob.o)[7*u]=r;break}u=p}else{if((p=c[7*u+1])==-1){n=c[7*u+6],r=this.ob.Nl([-1,-1,u,r,this.il(),-1,-1]),(c=this.ob.o)[7*u+1]=r;break}u=p}o&&(n*=-1,o=!1)}return this.jy(r,c),c[7*r+2]===-1&&(c[7*a]=r),this.xp(n,r,a,c),r},v.prototype.xF=function(){return this.aR(this.Ne)},v.prototype.wd=function(u,o){o=o==-1?this.Ne:o,this.Sv?this.DP(u,o):this.XX(u,o)},v.prototype.search=function(u,o){for(o=this.tv(o);o!=-1;){var r=this.$n.compare(this,u,o);if(r==0)return o;o=0>r?this.nl(o):this.Zp(o)}return-1},v.prototype.xW=function(u){for(var o=this.tv(-1),r=-1;o!=-1;){var n=u.compare(this,o);if(n==0)return o;0>n?o=this.nl(o):(r=o,o=this.Zp(o))}return r},v.prototype.mJ=function(u){for(var o=this.tv(-1),r=-1;o!=-1;){var n=u.compare(this,o);if(n==0)return o;0>n?(r=o,o=this.nl(o)):o=this.Zp(o)}return r},v.prototype.ka=function(u){return this.ob.U(u,3)},v.prototype.nl=function(u){return this.ob.U(u,0)},v.prototype.Zp=function(u){return this.ob.U(u,1)},v.prototype.getParent=function(u){return this.ob.U(u,2)},v.prototype.lb=function(u){return this.ob.U(u,6)},v.prototype.xe=function(u){return this.ob.U(u,5)},v.prototype.sc=function(u){return u==-1?this.ml(this.Ne):this.ml(u)},v.prototype.Gc=function(u){return u==-1?this.$r(this.Ne):this.$r(u)},v.prototype.QR=function(u){return u==-1?this.UF(this.Ne):this.UF(u)},v.prototype.Tj=function(u,o){this.HB(u,o)},v.prototype.tv=function(u){return u==-1?this.QF(this.Ne):this.QF(u)},v.prototype.clear=function(){this.ob.nj(!1),this.Ne=-1},v.prototype.size=function(u){return u==-1?this.SF(this.Ne):this.SF(u)},v.prototype.CN=function(u,o){for(var r=o[7*u],n=o[7*u+1],a=o[7*u+4];r!=-1||n!=-1;){var c=r!=-1?o[7*r+4]:2147483647;if(n=n!=-1?o[7*n+4]:2147483647,a<=Math.min(c,n))break;c<=n?this.kJ(r,o):this.jJ(u,o),r=o[7*u],n=o[7*u+1]}},v.prototype.jy=function(u,o){if(this.Sv)for(var r=o[7*u+4],n=o[7*u+2];n!=-1&&o[7*n+4]>r;)o[7*n]==u?this.kJ(u,o):this.jJ(n,o),n=o[7*u+2]},v.prototype.jJ=function(u,o){var r=o[7*u+1];o[7*r+2]=o[7*u+2],o[7*u+2]=r;var n=o[7*r];o[7*u+1]=n,n!=-1&&(o[7*n+2]=u),o[7*r]=u,(n=o[7*r+2])!=-1&&(o[7*n]==u?o[7*n]=r:o[7*n+1]=r)},v.prototype.kJ=function(u,o){var r=o[7*u+2];o[7*u+2]=o[7*r+2],o[7*r+2]=u;var n=o[7*u+1];o[7*r]=n,n!=-1&&(o[7*n+2]=r),o[7*u+1]=r,(n=o[7*u+2])!=-1&&(o[7*n]===r?o[7*n]=u:o[7*n+1]=u)},v.prototype.Pk=function(u,o){this.ob.T(u,2,o)},v.prototype.MB=function(u,o){this.ob.T(u,0,o)},v.prototype.QB=function(u,o){this.ob.T(u,1,o)},v.prototype.PB=function(u,o){this.ob.T(u,5,o)},v.prototype.ex=function(u,o){this.ob.T(u,6,o)},v.prototype.PJ=function(u,o){this.ob.T(o,0,u)},v.prototype.fX=function(u){this.ob.T(u,4,0)},v.prototype.iX=function(u,o){this.ob.T(o,5,u)},v.prototype.QF=function(u){return u==-1?-1:this.ob.U(u,0)},v.prototype.ml=function(u){return u==-1?-1:this.ob.U(u,1)},v.prototype.$r=function(u){return u==-1?-1:this.ob.U(u,2)},v.prototype.aR=function(u){return u==-1?-1:this.ob.U(u,3)},v.prototype.SF=function(u){return u==-1?0:this.ob.U(u,4)},v.prototype.UF=function(u){return this.ob.U(u,5)},v.prototype.Qw=function(){return this.ob.Nl([-1,-1,-1,void 0,this.il(),-1,-1])},v.prototype.hl=function(u){u!=-1&&this.ob.kd(u)},v.prototype.il=function(){return this.Vm=h.P.WA(this.Vm),1073741823&this.Vm},v.prototype.xD=function(u,o,r){var n=this.ob.o;if(r==-1||n[7*r]==-1)return u=this.ob.Nl([-1,-1,-1,u,this.il(),-1,-1]),(n=this.ob.o)[7*r]=u,this.xp(-1,u,r,n),u;for(var a=r==-1?-1:n[7*r];;){var c=o==-1?1:this.$n.compare(this,u,a);if(0>c){if((c=this.nl(a))==-1){o=a,u=this.ob.Nl([-1,-1,a,u,this.il(),-1,-1]),(n=this.ob.o)[7*a]=u;break}a=c}else{if(o==1&&c==0)return n[7*r+3]=a,-1;if((c=n[7*a+1])==-1){o=n[7*a+6],u=this.ob.Nl([-1,-1,a,u,this.il(),-1,-1]),(n=this.ob.o)[7*a+1]=u;break}a=c}}return this.jy(u,n),n[7*u+2]===-1&&(n[7*r]=u),this.xp(o,u,r,n),u},v.prototype.xp=function(u,o,r,n){if(u!=-1){var a=n[7*u+5];n[7*u+5]=o}else a=r==-1?-1:n[7*r+2];n[7*o+5]=a,a!=-1&&(n[7*a+6]=o),n[7*o+6]=u,u==(r==-1?-1:n[7*r+1])&&(n[7*r+1]=o),u==-1&&(n[7*r+2]=o),n[7*r+4]=(r==-1?0:n[7*r+4])+1},v.prototype.uB=function(u,o){var r=this.ob.o,n=r[7*u+5];u=r[7*u+6],n!=-1?r[7*n+6]=u:r[7*o+1]=u,u!=-1?r[7*u+5]=n:r[7*o+2]=n,r[7*o+4]=o===-1?-1:r[7*o+4]-1},v.prototype.XX=function(u,o){this.uB(u,o);var r=this.nl(u),n=this.Zp(u),a=this.getParent(u),c=u;if(r!=-1&&n!=-1){this.Vm=h.P.WA(this.Vm);var p=1073741823<this.Vm?this.lb(u):this.xe(u),f=this.getParent(p)==u;this.ob.$B(u,p,0),this.ob.$B(u,p,1),this.ob.$B(u,p,2),a!=-1?this.nl(a)==u?this.MB(a,p):this.QB(a,p):this.PJ(p,o),f?(r==p?(this.MB(p,u),this.Pk(n,p)):n==p&&(this.QB(p,u),this.Pk(r,p)),this.Pk(u,p),a=p):(this.Pk(r,p),this.Pk(n,p),a=this.getParent(u),c=p),r=this.nl(u),n=this.Zp(u),r!=-1&&this.Pk(r,u),n!=-1&&this.Pk(n,u)}r=r!=-1?r:n,a==-1?this.PJ(r,o):this.nl(a)==c?this.MB(a,r):this.QB(a,r),r!=-1&&this.Pk(r,a),this.hl(u)},v.prototype.DP=function(u,o){var r=this.ob.o;r[7*u+4]=2147483647;var n=-1,a=-1,c=o===-1?-1:r[7*o],p=c==u;if(p&&(n=r[7*c],a=r[7*c+1],n==-1&&a==-1))return this.uB(c,o),this.hl(c),void(r[7*o]=-1);this.CN(u,r),(c=r[7*u+2])!=-1&&(r[7*c]==u?r[7*c]=-1:r[7*c+1]=-1),this.uB(u,o),this.hl(u),p&&(r[7*o]=n==-1||r[7*n+2]!=-1?a:n)},v.prototype.HB=function(u,o){this.ob.T(u,3,o)},v}();h.Yj=k}(G||(G={})),function(h){var k=function(){function v(u,o){u!==void 0&&this.L(u,o)}return v.prototype.L=function(u,o){this.pa=u,this.wa=o,this.normalize()},v.prototype.isIntersecting=function(u){return this.pa<=u.pa?this.wa>=u.pa:u.wa>=this.pa},v.prototype.move=function(u){this.B()||(this.pa+=u,this.wa+=u)},v.prototype.normalize=function(){if(!isNaN(this.pa)){if(this.pa>this.wa){var u=this.pa;this.pa=this.wa,this.wa=u}isNaN(this.wa)&&this.Pa()}},v.prototype.Pa=function(){this.wa=this.pa=NaN},v.prototype.B=function(){return isNaN(this.pa)},v.prototype.$b=function(u){typeof u=="number"?this.B()?this.wa=this.pa=u:this.Lk(u):u.B()||(this.B()?(this.pa=u.pa,this.wa=u.wa):(this.pa>u.pa&&(this.pa=u.pa),this.wa<u.wa&&(this.wa=u.wa),this.pa>this.wa&&this.Pa()))},v.prototype.Lk=function(u){u<this.pa?this.pa=u:u>this.wa&&(this.wa=u)},v.prototype.contains=function(u){return typeof u=="number"?u>=this.pa&&u<=this.wa:u.pa>=this.pa&&u.wa<=this.wa},v.prototype.Fa=function(u){this.B()||u.B()?this.Pa():(this.pa<u.pa&&(this.pa=u.pa),this.wa>u.wa&&(this.wa=u.wa),this.pa>this.wa&&this.Pa())},v.prototype.X=function(u){this.B()||(this.pa-=u,this.wa+=u,this.wa<this.pa&&this.Pa())},v.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.pa)+Math.abs(this.wa)+1)},v.prototype.EB=function(u,o){u>o?(this.pa=o,this.wa=u):(this.pa=u,this.wa=o)},v.prototype.Jt=function(u){return h.P.Rk(u,this.pa,this.wa)},v.prototype.S=function(){return this.wa-this.pa},v.prototype.tf=function(){return .5*(this.pa+this.wa)},v.prototype.Nb=function(u){return u==this||u instanceof v&&(!(!this.B()||!u.B())||this.pa==u.pa&&this.wa==u.wa)},v.prototype.dc=function(){return h.P.vj(h.P.vj())},v}();h.Oc=k}(G||(G={})),function(h){var k=new h.Oc,v=new h.Oc,u=function(){this.ne=null,this.pb=-1,this.tb=new h.zb,this.kA=55555555,this.Uv=this.Wv=!1,this.Vf=new h.Oc,this.Vf.EB(0,0)};h.xY=u;var o=function(){function r(n,a,c){this.g=n,this.Hk=NaN,this.FH=this.Mq=0,this.GH=NaN,this.ra=a,this.Pq=10*a,this.HH=this.IH=NaN,this.rg=!1,this.Fm=this.gt=this.Mo=this.Ys=this.Xs=-1,this.bA=c,this.NA=new u,this.QH=new u,h.P.truncate(3*n.gd/2)}return r.prototype.eG=function(n,a,c,p){n.ne=p===null?null:p[c[5*a]],n.Uv=n.ne!=null,n.Uv||((p=c[5*a+2])!==-1&&this.g.cW(c[5*a],c[5*p],n.tb),n.ne=n.tb,n.Vf.EB(n.tb.sa,n.tb.qa),n.Vf.wa+=this.ra,n.tb.jI(),n.Wv=n.tb.ma==n.tb.oa,n.Wv||(n.kA=(n.tb.qa-n.tb.sa)/(n.tb.ma-n.tb.oa)))},r.prototype.GO=function(n,a){var c=n.Br(a,this.ra,!0);return c!=0?c==2?this.Ly():this.yi():(n.$p(Os),n.Ur(yn),a.$p(mn),a.Ur(to),Kt.na(this.Mq,this.Hk),Os.rb(mn)&&this.Hk==Os.y?0>yn.compare(to)?Kt.N(yn):Kt.N(to):Os.rb(to)&&this.Hk==Os.y?0>yn.compare(mn)?Kt.N(yn):Kt.N(mn):mn.rb(yn)&&this.Hk==mn.y?0>Os.compare(to)?Kt.N(Os):Kt.N(to):yn.rb(to)&&this.Hk==yn.y&&(0>Os.compare(mn)?Kt.N(Os):Kt.N(mn)),n.Me(Kt.y,Kt.x)<a.Me(Kt.y,Kt.x)?-1:1)},r.prototype.EO=function(n,a){if(n.tb.oa==a.tb.oa&&n.tb.sa==a.tb.sa)return n.tb.ma==a.tb.ma&&n.tb.qa==a.tb.qa?this.bA?this.Ly():0:this.HE(n,a);if(n.tb.ma==a.tb.ma&&n.tb.qa==a.tb.qa)return this.GE(n,a);var c=this.GE(n,a);return n=this.HE(n,a),0>c&&0>n?-1:0<c&&0<n?1:this.yi()},r.prototype.AO=function(n,a){if(n.qa>a.qa){if(a.qa>a.sa&&a.ma-a.oa<2*this.ra&&n.wi(a.qa,a.ma,this.ra))return this.yi()}else if((a.ma-a.oa)/(a.qa-a.sa)*(n.qa-n.sa)<this.Pq&&a.wi(n.qa,n.ma,this.ra))return this.yi();return 1},r.prototype.BO=function(n,a){if(n.sa<a.sa){if(a.qa>a.sa&&a.ma-a.oa<2*this.ra&&n.wi(a.qa,a.ma,this.ra))return this.yi()}else if((a.ma-a.oa)/(a.qa-a.sa)*(n.sa-n.qa)<this.Pq&&a.wi(n.sa,n.oa,this.ra))return this.yi();return-1},r.prototype.CO=function(n,a){var c=new h.h;c.vc(a.xc(),a.ac()),c.cr(),c.normalize();var p=new h.h;p.vc(n.ac(),a.ac());var f=new h.h;f.vc(n.xc(),a.ac()),p=p.Rh(c),c=f.Rh(c),f=Math.abs(p);var m=Math.abs(c);if(f<m){if(f<this.Pq&&a.wi(n.sa,n.oa,this.ra))return this.yi()}else if(m<this.Pq&&a.wi(n.qa,n.ma,this.ra))return this.yi();return 0>p&&0>c?-1:0<p&&0<c?1:this.yi()},r.prototype.FE=function(n,a){return n.oa==a.oa&&n.sa==a.sa?this.AO(n,a):n.ma==a.ma&&n.qa==a.qa?this.BO(n,a):this.CO(n,a)},r.prototype.DO=function(n,a){return n.ma==a.ma&&n.qa==a.qa&&n.oa==a.oa&&n.sa==a.sa?this.bA?this.Ly():0:this.yi()},r.prototype.GE=function(n,a){var c=1;if(n.tb.oa<a.tb.oa){c=-1;var p=n;n=a,a=p}n=n.tb,p=a.tb;var f=n.sa-p.sa;a=a.kA*(n.oa-p.oa);var m=this.Pq;return f<a-m?-c:f>a+m?c:p.wi(n.sa,n.oa,this.ra)?this.yi():f<a?-c:c},r.prototype.HE=function(n,a){var c=1;if(a.tb.ma<n.tb.ma){c=-1;var p=n;n=a,a=p}n=n.tb,p=a.tb;var f=n.qa-p.sa;a=a.kA*(n.ma-p.oa);var m=this.Pq;return f<a-m?-c:f>a+m?c:p.wi(n.qa,n.ma,this.ra)?this.yi():f<a?-c:c},r.prototype.Ly=function(){return this.rg=!0,this.Oi=new h.Nd(5,this.Mo,this.gt),-1},r.prototype.yi=function(){return this.rg=!0,this.bA?this.Oi=new h.Nd(4,this.Mo,this.gt):this.gt=this.Mo=this.Ys=this.Xs=-1,-1},r.prototype.FO=function(n,a,c,p){if(this.rg)return-1;var f=this.GH==this.Hk&&this.FH==this.Mq;if(f&&n==this.Xs)var m=this.HH;else m=NaN,this.Xs=-1;return f&&a==this.Ys?f=this.IH:(f=NaN,this.Ys=-1),c.ne.RI(k),p.ne.RI(v),k.wa<v.pa?-1:v.wa<k.pa?1:(this.GH=this.Hk,this.FH=this.Mq,isNaN(m)&&(this.Xs=n,this.HH=m=n=c.ne.Me(this.Hk,this.Mq)),isNaN(f)&&(this.Ys=a,this.IH=f=n=p.ne.Me(this.Hk,this.Mq)),Math.abs(m-f)<=this.ra?this.GO(c.ne,p.ne):m<f?-1:m>f?1:0)},r.prototype.Lr=function(){this.rg=!1},r.prototype.tm=function(){return this.Oi},r.prototype.SJ=function(n,a){this.Hk=n,this.Mq=a,this.gt=this.Mo=this.Ys=this.Xs=-1},r.prototype.compare=function(n,a,c){return this.rg?-1:(n=n.ka(c),this.Fm=c,this.JE(a,a,n,n))},r.prototype.JE=function(n,a,c,p){if(this.Mo==a)var f=this.NA;else this.Mo=a,f=this.NA,this.NA.pb=n,this.eG(f,a,this.g.ud.o,this.g.Te);if(m==null){this.gt=p;var m=this.QH;this.QH.pb=c,this.eG(m,p,this.g.ud.o,this.g.Te)}return f.Uv||m.Uv?this.FO(a,p,f,m):f.Vf.wa<m.Vf.pa?-1:m.Vf.wa<f.Vf.pa?1:(n=f.Wv?1:0,(n|=m.Wv?2:0)==0?this.EO(f,m):n==1?this.FE(f.tb,m.tb):n==2?-1*this.FE(m.tb,f.tb):this.DO(f.tb,m.tb))},r}();h.MC=o}(G||(G={})),function(h){var k=function(){function v(u,o){this.g=u,this.ra=o,this.rg=!1,this.Mo=-1,this.Vf=new h.Oc,this.Iq=new h.h,this.Iq.Sc(),this.ie=new h.zb,this.Fm=-1,this.vA=17976931348623157e292}return v.prototype.Lr=function(){this.rg=!1,this.vA=17976931348623157e292},v.prototype.Eh=function(u){this.Iq.N(u)},v.prototype.compare=function(u,o){return this.KE(o,u.ka(o))},v.prototype.KE=function(u,o){var r=this.g.cc(o)!=null;if(r||(this.g.fd(o,this.ie),this.Vf.EB(this.ie.sa,this.ie.qa)),r)throw h.i.ga("not implemented");if(this.Iq.x+this.ra<this.Vf.pa)return-1;if(this.Iq.x-this.ra>this.Vf.wa)return 1;if(this.ie.oa==this.ie.ma)return this.Fm=u,this.rg=!0,0;this.ie.jI(),r=this.ie.ac(),(o=new h.h).vc(this.ie.xc(),r),o.cr();var n=new h.h;return n.vc(this.Iq,r),r=o.Rh(n),(r/=o.length())<10*-this.ra?-1:r>10*this.ra?1:this.ie.rs(this.Iq,this.ra)&&((o=Math.abs(r))<this.vA&&(this.Fm=u,this.vA=o),this.rg=!0,o<.25*this.ra)?0:0>r?-1:1},v}();h.TL=k}(G||(G={})),function(h){function k(u,o,r,n){r=new Float64Array(u.subarray(r,n)),u.set(r,o)}var v=function(){function u(o){this.Pb=this.pk=!1,this.o=null;var r=o;2>r&&(r=2),this.o=new Float64Array(r),this.size=o}return u.prototype.rotate=function(o,r,n){if(this.Pb)throw h.i.ga("invalid_call");if(r<o||r>n||o>n)throw h.i.O();o!=r&&n!=r&&(this.oi(o,r-o,1),this.oi(r,n-r,1),this.oi(o,n-o,1))},u.rf=function(o,r){var n=new u(o),a=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)a[c]=r;return n},u.Cn=function(o){var r=new u(0);return r.o=new Float64Array(o.o),r.size=o.size,r},u.Mr=function(o,r){var n=new u(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Float64Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Float64Array(o):o<=this.o.length||(0<this.o.length?((o=new Float64Array(o)).set(this.o),this.o=o):this.o=new Float64Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.uc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.set=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.Ut=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.AB=function(o){return u.Mr(this,o)},u.prototype.Bg=function(o){return this.read(o)},u.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.pk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Float64Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Float64Array(n)).set(this.o),this.o=n),n=this.o;for(var a=this.size;a<o;a++)n[a]=r}this.size=o},u.prototype.Ch=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.pk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.rr=function(o,r){this.write(o,r)},u.prototype.Bn=function(o,r,n){for(var a=this.size;r<a&&r<n;r++)o=h.P.vj(this.read(r));return o},u.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof u))return!1;var a=this.size,c=o.size;if(n>a||n>c&&a!=c)return!1;for(n>a&&(n=a);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},u.prototype.addRange=function(o,r,n,a,c){if(this.Pb)throw h.i.Hb();if(!a&&(1>c||n%c!=0))throw h.i.O();var p=this.size;if(this.resize(p+n),a)this.o.set(o.o.subarray(r,r+n),p);else{a=n;for(var f=0;f<n;f+=c){a-=c;for(var m=0;m<c;m++)this.o[p+f+m]=o.o[r+a+m]}}},u.prototype.Nn=function(o,r,n,a,c,p,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||a%p!=0))throw h.i.O();var m=this.size-f;if(m<a&&this.resize(this.size+a-m),k(this.o,o+a,o,o+(f-o)),this.o==r.o&&o<n&&(n+=a),c)this.o.set(r.o.subarray(n,n+a),o);else for(c=a,f=0;f<a;f+=p)for(c-=p,m=0;m<p;m++)this.o[o+f+m]=r.o[n+c+m]},u.prototype.Dz=function(o,r,n,a,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*a>this.o.length?this.resize(this.size+2*a):this.size+=2*a,k(this.o,o+2*a,o,o+(p-o)),c)for(c=0;c<a;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=a-1;c<a;++c)p=r[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},u.prototype.Mn=function(o,r,n,a){if(this.Pb)throw h.i.Hb();for(a-=o,k(this.o,o+a,o,o+a),a=0;a<n;a++)this.o[o+a]=r},u.prototype.wj=function(o,r,n){if(this.Pb)throw h.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.Vt=function(o,r,n,a,c,p){if(0>o||0>r||0>a||!c&&(0>=p||r%p!=0)||n.size<a+r)throw h.i.O();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Cr(o,r,a,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a++;else if(a=a+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a--;else for(c=0,r=h.P.truncate(r/p);c<r;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[a+f];o+=p,a-=p}},u.prototype.Fn=function(o,r,n){if(this.Pb||o+r>this.size)throw h.i.Hb();0<n-(o+r)&&k(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},u.prototype.oi=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw h.i.Hb();for(var a=r>>1,c=0;c<a;c+=n){r-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=f}}},u.prototype.Xj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw h.i.O();for(var a=r;a<r+n;a++)this.o[a]=o},u.prototype.Cr=function(o,r,n,a,c){if(!(a&&o==n||(this.o.set(this.o.subarray(n,n+r),o),a)))for(n=o,o=o+r-c,a=0,r=h.P.truncate(r/2);a<r;a++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},u.prototype.oC=function(o,r,n,a,c){if(0>o||0>r||0>a)throw h.i.O();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=a;a<r;a++)this.o[o]=n[a].x,this.o[o+1]=n[a].y,o+=c},u.prototype.nC=function(o,r,n){if(0>o||0>r)throw h.i.O();if(r!=0){this.size<(r<<1)+o&&this.resize((r<<1)+o),r+=0;for(var a=0;a<r;a++)this.o[o]=n[a][0],this.o[o+1]=n[a][1],o+=2}},u.prototype.Ww=function(o,r,n,a,c){if(0>o||0>r||0>a||this.size<r+o)throw h.i.O();if(c)for(c=0;c<r;c++)n[a+c]=this.o[o+c];else for(a=a+r-1;o<r;o++)n[a]=this.o[o],a--},u.prototype.oB=function(o,r,n){if(0>o||0>r||this.size<(r>>1)+o)throw h.i.O();if(r!=0){r=0+r;for(var a=0;a<r;a++)n[a][0]=this.o[o],n[a][1]=this.o[o+1],o+=2}},u.prototype.clear=function(o){o?this.resize(0):this.Ch(0)},u.prototype.hx=function(){this.pk=this.Pb=!0},u.prototype.Wd=function(o,r,n){Array.prototype.sort.call(this.o.subarray(o,r),n)},u.prototype.Vp=function(){return 1},u}();h.ce=v}(G||(G={})),function(h){function k(u,o,r,n){r=new Int32Array(u.subarray(r,n)),u.set(r,o)}h.fY=function(){this.random=1973};var v=function(){function u(o){this.Pb=this.pk=!1,this.o=null;var r=o;2>r&&(r=2),this.o=new Int32Array(r),this.size=o}return u.prototype.rotate=function(o,r,n){if(this.Pb)throw h.i.ga("invalid_call");if(r<o||r>n||o>n)throw h.i.O();o!=r&&n!=r&&(this.oi(o,r-o,1),this.oi(r,n-r,1),this.oi(o,n-o,1))},u.rf=function(o,r){var n=new u(o),a=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)a[c]=r;return n},u.Cn=function(o){var r=new u(0);return r.o=new Int32Array(o.o),r.size=o.size,r},u.Mr=function(o,r){var n=new u(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Int32Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int32Array(o):o<=this.o.length||(0<this.o.length?((o=new Int32Array(o)).set(this.o),this.o=o):this.o=new Int32Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.uc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.set=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.Ut=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.AB=function(o){return u.Mr(this,o)},u.prototype.Bg=function(o){return this.read(o)},u.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.pk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int32Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int32Array(n)).set(this.o),this.o=n),n=this.o;for(var a=this.size;a<o;a++)n[a]=r}this.size=o},u.prototype.Ch=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.pk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.rr=function(o,r){this.write(o,r)},u.prototype.Bn=function(o,r,n){for(var a=this.size;r<a&&r<n;r++)o=h.P.Uh(this.read(r),o);return o},u.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof u))return!1;var a=this.size,c=o.size;if(n>a||n>c&&a!=c)return!1;for(n>a&&(n=a);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},u.prototype.addRange=function(o,r,n,a,c){if(this.Pb)throw h.i.Hb();if(!a&&(1>c||n%c!=0))throw h.i.O();var p=this.size;if(this.resize(p+n),a)this.o.set(o.o.subarray(r,r+n),p);else{a=n;for(var f=0;f<n;f+=c){a-=c;for(var m=0;m<c;m++)this.o[p+f+m]=o.o[r+a+m]}}},u.prototype.Nn=function(o,r,n,a,c,p,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||a%p!=0))throw h.i.O();if(k(this.o,o+a,o,o+(f-o)),this.o==r.o&&o<n&&(n+=a),c)this.o.set(r.o.subarray(n,n+a),o);else for(c=a,f=0;f<a;f+=p){c-=p;for(var m=0;m<p;m++)this.o[o+f+m]=r.o[n+c+m]}},u.prototype.Dz=function(o,r,n,a,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*a>this.o.length?this.resize(this.size+2*a):this.size+=2*a,k(this.o,o+2*a,o,o+(p-o)),c)for(c=0;c<a;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=a-1;c<a;++c)p=r[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},u.prototype.Mn=function(o,r,n,a){if(this.Pb)throw h.i.Hb();for(a-=o,k(this.o,o+a,o,o+a),a=0;a<n;a++)this.o[o+a]=r},u.prototype.wj=function(o,r,n){if(this.Pb)throw h.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.Vt=function(o,r,n,a,c,p){if(0>o||0>r||0>a||!c&&(0>=p||r%p!=0)||n.size<a+r)throw h.i.O();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Cr(o,r,a,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a++;else if(a=a+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a--;else for(c=0,r=h.P.truncate(r/p);c<r;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[a+f];o+=p,a-=p}},u.prototype.Fn=function(o,r,n){if(this.Pb||o+r>this.size)throw h.i.Hb();0<n-(o+r)&&k(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},u.prototype.oi=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw h.i.Hb();for(var a=r>>1,c=0;c<a;c+=n){r-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=f}}},u.prototype.Xj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw h.i.O();for(var a=r;a<r+n;a++)this.o[a]=o},u.prototype.Cr=function(o,r,n,a,c){if(!(a&&o==n||(this.o.set(this.o.subarray(n,n+r),o),a)))for(n=o,o=o+r-c,a=0,r=h.P.truncate(r/2);a<r;a++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},u.prototype.oC=function(o,r,n,a,c){if(0>o||0>r||0>a)throw h.i.O();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=a;a<r;a++)this.o[o]=n[a].x,this.o[o+1]=n[a].y,o+=c},u.prototype.Ww=function(o,r,n,a,c){if(0>o||0>r||0>a||this.size<r+o)throw h.i.O();if(c)for(c=0;c<r;c++)n[a+c]=this.o[o+c];else for(a=a+r-1;o<r;o++)n[a]=this.o[o],a--},u.prototype.clear=function(o){o?this.resize(0):this.Ch(0)},u.prototype.hx=function(){this.pk=this.Pb=!0},u.prototype.Wd=function(o,r,n){10>r-o?u.jG(this.o,o,r,n):u.kB(this.o,o,r-1,n)},u.prototype.Vp=function(){return 2},u.prototype.Gc=function(){return this.o[this.size-1]},u.prototype.Jf=function(){this.resize(this.size-1)},u.prototype.PW=function(o){this.o[this.size-1]=o},u.prototype.IV=function(o){o<this.size-1&&(this.o[o]=this.o[this.size-1]),this.resize(this.size-1)},u.prototype.dF=function(o){for(var r=0,n=this.size;r<n;r++)if(this.o[r]==o)return r;return-1},u.prototype.$F=function(o){return 0<=this.dF(o)},u.jG=function(o,r,n,a){for(var c=r;c<n;c++){for(var p=o[c],f=c-1;f>=r&&0<a(o[f],p);)o[f+1]=o[f],f--;o[f+1]=p}},u.rx=function(o,r,n){var a=o[n];o[n]=o[r],o[r]=a},u.kB=function(o,r,n,a){if(!(r>=n))for(;;){if(9>n-r){u.jG(o,r,n+1,a);break}var c=o[r];u.rx(o,r,n);for(var p=r,f=r;f<n;f++)0>=a(o[f],c)&&(u.rx(o,p,f),p+=1);u.rx(o,p,n),p-r<n-p?(u.kB(o,r,p-1,a),r=p+1):(u.kB(o,p+1,n,a),n=p-1)}},u}();h.ja=v}(G||(G={})),function(h){function k(u,o,r,n){r=new Int8Array(u.subarray(r,n)),u.set(r,o)}var v=function(){function u(o){this.o=null;var r=o;2>r&&(r=2),this.o=new Int8Array(r),this.size=o}return u.prototype.rotate=function(o,r,n){if(this.Pb)throw h.i.ga("invalid_call");if(r<o||r>n||o>n)throw h.i.O();o!=r&&n!=r&&(this.oi(o,r-o,1),this.oi(r,n-r,1),this.oi(o,n-o,1))},u.rf=function(o,r){var n=new u(o),a=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)a[c]=r;return n},u.Cn=function(o){var r=new u(0);return r.o=new Int8Array(o.o),r.size=o.size,r},u.Mr=function(o,r){var n=new u(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Int8Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int8Array(o):o<=this.o.length||(0<this.o.length?((o=new Int8Array(o)).set(this.o),this.o=o):this.o=new Int8Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.uc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.set=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.Ut=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.AB=function(o){return u.Mr(this,o)},u.prototype.Bg=function(o){return this.read(o)},u.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.pk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int8Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int8Array(n)).set(this.o),this.o=n),n=this.o;for(var a=this.size;a<o;a++)n[a]=r}this.size=o},u.prototype.Ch=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.pk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.rr=function(o,r){this.write(o,r)},u.prototype.Bn=function(o,r,n){for(var a=this.size;r<a&&r<n;r++)o=h.P.Uh(this.read(r),o);return o},u.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof u))return!1;var a=this.size,c=o.size;if(n>a||n>c&&a!=c)return!1;for(n>a&&(n=a);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},u.prototype.addRange=function(o,r,n,a,c){if(this.Pb)throw h.i.Hb();if(!a&&(1>c||n%c!=0))throw h.i.O();var p=this.size;if(this.resize(p+n),a)this.o.set(o.o.subarray(r,r+n),p);else{a=n;for(var f=0;f<n;f+=c){a-=c;for(var m=0;m<c;m++)this.o[p+f+m]=o.o[r+a+m]}}},u.prototype.Nn=function(o,r,n,a,c,p,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||a%p!=0))throw h.i.O();if(k(this.o,o+a,o,o+(f-o)),this.o==r.o&&o<n&&(n+=a),c)this.o.set(r.o.subarray(n,n+a),o);else for(c=a,f=0;f<a;f+=p){c-=p;for(var m=0;m<p;m++)this.o[o+f+m]=r.o[n+c+m]}},u.prototype.Mn=function(o,r,n,a){if(this.Pb)throw h.i.Hb();for(a-=o,k(this.o,o+a,o,o+a),a=0;a<n;a++)this.o[o+a]=r},u.prototype.Dz=function(o,r,n,a,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*a>this.o.length?this.resize(this.size+2*a):this.size+=2*a,k(this.o,o+2*a,o,o+(p-o)),c)for(c=0;c<a;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=a-1;c<a;++c)p=r[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},u.prototype.wj=function(o,r,n){if(this.Pb)throw h.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.Vt=function(o,r,n,a,c,p){if(0>o||0>r||0>a||!c&&(0>=p||r%p!=0)||n.size<a+r)throw h.i.O();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Cr(o,r,a,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a++;else if(a=a+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a--;else for(c=0,r=h.P.truncate(r/p);c<r;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[a+f];o+=p,a-=p}},u.prototype.Fn=function(o,r,n){if(this.Pb||o+r>this.size)throw h.i.Hb();0<n-(o+r)&&k(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},u.prototype.oi=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw h.i.Hb();for(var a=r>>1,c=0;c<a;c+=n){r-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=f}}},u.prototype.Xj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw h.i.O();for(var a=r;a<r+n;a++)this.o[a]=o},u.prototype.Cr=function(o,r,n,a,c){if(!(a&&o==n||(this.o.set(this.o.subarray(n,n+r),o),a)))for(n=o,o=o+r-c,a=0,r=h.P.truncate(r/2);a<r;a++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},u.prototype.oC=function(o,r,n,a,c){if(0>o||0>r||0>a)throw h.i.O();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=a;a<r;a++)this.o[o]=n[a].x,this.o[o+1]=n[a].y,o+=c},u.prototype.Ww=function(o,r,n,a,c){if(0>o||0>r||0>a||this.size<r+o)throw h.i.O();if(c)for(c=0;c<r;c++)n[a+c]=this.o[o+c];else for(a=a+r-1;o<r;o++)n[a]=this.o[o],a--},u.prototype.clear=function(o){o?this.resize(0):this.Ch(0)},u.prototype.hx=function(){this.pk=this.Pb=!0},u.prototype.Wd=function(o,r,n){r=this.o.subarray(o,r),Array.prototype.sort.call(r,n),this.o.set(r,o)},u.prototype.rJ=function(o,r){if(this.Pb)throw h.i.ga("invalid call. Attribute Stream is read only.");this.o[o]|=r},u.prototype.CE=function(o,r){if(this.Pb)throw h.i.ga("invalid call. Attribute Stream is read only.");this.o[o]&=~r},u.prototype.Vp=function(){return 1},u}();h.rn=v}(G||(G={})),function(h){h.Zc=function(){function k(){}return k.Nr=function(v,u){return h.rn.rf(v,u)},k.En=function(v,u){return h.ce.rf(v,u)},k.hP=function(v,u,o){switch(v){case 1:v=h.ce.rf(u,o);break;case 2:v=h.ja.rf(u,o);break;case 4:v=h.rn.rf(u,o);break;default:throw h.i.Ra()}return v},k.QE=function(v,u){return k.hP(h.ua.Vp(v),u*h.ua.Wa(v),h.ua.te(v))},k.Ph=function(v,u){return h.ja.rf(v,u)},k.iI=function(v){var u,o=[];for(u=0;u<v;u++)o.push(null);return o},k}()}(G||(G={})),function(h){h.ha=function(k){k===void 0&&(k=0),this.u=k}}(G||(G={})),function(h){h.FL=function(){function k(){}return k.bind=function(v){h.Tc=v.PeDefs,h.qf=v.PeFactory,h.FC=v.PeVertcs,h.fj=v.PeCSTransformations,h.EC=v.PeGTTransformations,h.DL=v.PeGeogtran,h.CL=v.PeFactoryCodechange,h.DC=v.PeGCSExtent,h.Eg=v.PePCSInfo,h.EL=v.PeHorizon,h.BL=v.PeCoordsys,h.mp=v.PeGTlistExtended,h.mp.PE_GTLIST_OPTS_USE_DEFAULT=128,h.qf.initialize(null),h.Kx=v.PeGTlistExtendedEntry,h.qf.fromString(h.Tc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},k}(),h.qf=null,h.FC=null,h.BL=null,h.EL=null,h.Eg=null,h.mp=null,h.Kx=null,h.DC=null,h.CL=null,h.DL=null,h.Tc=null,h.EC=null,h.fj=null}(G||(G={})),function(h){var k=function(){function v(){}return v.Mb=function(u,o){return 0<=o?v.R(u):-v.R(u)},v.R=function(u){return 0>u?-u:u},v.ui=function(u){return 3552713678800501e-30>u},v.CC=function(u,o,r){return v.R(u-o)<=r*(1+(v.R(u)+v.R(o))/2)},v.$=function(u,o){return v.CC(u,o,3552713678800501e-30)},v.xL=function(u){return 3552713678800501e-30>=v.R(u)},v.Dd=function(u){return v.xL(u)},v}();h.s=k,h.F=function(){function v(){}return v.hp=function(u,o){var r=0;return(u=k.R(u))+(o=k.R(o))!=0&&(u>o?(r=o/u,r=u*Math.sqrt(1+r*r)):(r=u/o,r=o*Math.sqrt(1+r*r))),r},v.Yq=function(u,o,r,n,a){for(var c=[0,0,0],p=[0,0,0],f=0;2>=f;f++)o[f]-=u[f],r[f]-=o[f];r=c[1]*p[2]-c[2]*p[1],o=c[2]*p[0]-c[0]*p[2],c=c[0]*p[1]-c[1]*p[0],u=-1*(r*u[0]+o*u[1]+c*u[2]),n[0]=r,n[1]=o,n[2]=c,n[3]=u,p=v.qn(n),n[0]/=p,n[1]/=p,n[2]/=p,n[3]/=p,a!=0&&(p=k.Dd(c)?k.Dd(u)?k.Mb(1,o):-k.Mb(1,u):k.Mb(1,c),p*=k.Mb(1,a),n[0]*=p,n[1]*=p,n[2]*=p,n[3]*=p)},v.xx=function(u,o,r){r[0]=u[1]*o[2]-o[1]*u[2],r[1]=u[2]*o[0]-o[2]*u[0],r[2]=u[0]*o[1]-o[0]*u[1]},v.Tt=function(u,o){return u[0]*o[0]+u[1]*o[1]+u[2]*o[2]},v.qn=function(u){return v.hp(v.hp(u[0],u[1]),u[2])},v.dl=function(u,o,r,n,a,c,p,f){u=v.n(u,o,r);var m=Math.cos(r);c.u=(u+a)*m*Math.cos(n),p.u=(u+a)*m*Math.sin(n),f.u=(u*(1-o)+a)*Math.sin(r)},v.bO=function(u,o,r,n,a,c,p){var f=v.hp(o,r),m=1*Math.sqrt(1-u),w=m/1;if(k.$(f,0))c.u=0,a.u=k.Mb(1.570796326794897,n),p.u=k.R(n)-m;else{c.u=Math.atan2(r,o),r=Math.atan2(1*n,m*f),c=Math.cos(r);var x=Math.sin(r);o=m*u/(1-u),u*=1,r=Math.atan2(n+o*x*x*x,f-u*c*c*c),3.141592653589793<k.R(r)&&(r=k.Mb(3.141592653589793,r)-r),r=Math.atan(w*Math.tan(r)),x=Math.sin(r),c=Math.cos(r),a.u=Math.atan2(n+o*x*x*x,f-u*c*c*c),1.570796326794897<k.R(a.u)&&(a.u=k.Mb(3.141592653589793,a.u)-a.u),r=Math.atan(w*Math.tan(a.u)),x=Math.sin(r),c=Math.cos(r),p.u=(n-m*x)*Math.sin(a.u)+(f-1*c)*Math.cos(a.u)}},v.n=function(u,o,r){return r=Math.sin(r),u/Math.sqrt(1-o*r*r)},v.ot=function(u,o){return Math.atan2(Math.sin(o)*(1-u),Math.cos(o))},v.Rj=function(u,o){return Math.atan2(Math.sin(o),Math.cos(o)*(1-u))},v.Tq=function(u,o){if(k.ui(u)||o==0||k.$(k.R(o),1.570796326794897))return o;if(.006884661117170036>u){var r=Math.sqrt(1-u),n=(1-r)/(1+r),a=n*n,c=n*a,p=n*c,f=n*p,m=n*f,w=n*m,x=1.572916666666667*c-3.2578125*f+4.295068359375*w;u=2.142578125*p-6.071484375*m,r=3.129296875*f-11.249837239583334*w;var $=4.775276692708333*m,T=7.958636765252976*w,A=Math.cos(2*o);return o+Math.sin(2*o)*(1.5*n-.84375*c+.525390625*f-.2688395182291667*w-x+r-T+A*(2*(1.3125*a-1.71875*p+1.650146484375*m)-4*u+6*$+A*(4*x-12*r+24*T+A*(8*u-32*$+A*(16*r-80*T+A*(32*$+64*A*T))))))}for(r=1-u,n=u/2,c=(a=k.R(o))*v.$u(u)/(1.570796326794897*r),p=9999,m=a,a=0;1e-16<p&&50>a;a++)w=v.w(u,m),f=m-(x=(f=(v.cG(m,u)-n*Math.sin(2*m)/w)/r-c)/(w=1/(w*w*w))),p=k.R(x),m=f;return 0<=o?m:-m},v.gW=function(u,o){return k.ui(o)?u:u*v.$u(o)/1.570796326794897},v.ca=function(u){return 0>(u=v.hF(u,6.283185307179586))?u+6.283185307179586:3.141592653589793>k.R(u)||k.$(k.R(u),3.141592653589793)?u:u-6.283185307179586},v.hF=function(u,o){return u-Math.floor(u/o)*o},v.Bh=function(u,o){if(.006884661117170036>o){var r=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,n=r*r;return u/(1+o)*(1+.25*r+.015625*n+.00390625*r*n)*1.570796326794897}return u*v.$u(o)},v.Xq=function(u,o){var r=k.Mb(1,Math.sin(o));return o=1.570796326794897>=(o=k.R(v.hF(o,3.141592653589793)))?o:3.141592653589793-o,(k.$(o,1.570796326794897)?o:Math.atan(Math.sqrt(1-u)*Math.tan(o)))*r},v.q=function(u,o,r){if(.006884661117170036>o){var n=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,a=o*n,c=o*a,p=o*c,f=o*p,m=o*f,w=-.7291666666666666*a+.2278645833333333*p+.03987630208333334*m,x=.615234375*c-.21533203125*f,$=-.54140625*p+.20302734375*m,T=.48876953125*f,A=-.4488699776785715*m,C=Math.cos(2*r);return u/(1+o)*((1+.25*n+.015625*c+.00390625*f)*r+Math.sin(2*r)*(-1.5*o+.1875*a+.0234375*p+.00732421875*m-w+$-A+C*(2*(.9375*n-.234375*c-.03662109375*f)-4*x+6*T+C*(4*w-12*$+24*A+C*(8*x-32*T+C*(16*$-80*A+C*(32*T+64*C*A)))))))}return u*(v.cG(r,o)-.5*o*Math.sin(2*r)/v.w(o,r))},v.w=function(u,o){return o=Math.sin(o),Math.sqrt(1-u*o*o)},v.$u=function(u){return k.CC(u,1,2220446049250313e-31)?1:1>u?v.Yw(0,1-u)-u/3*v.Vw(0,1-u):NaN},v.cG=function(u,o){var r=k.Mb(1,u);u=k.R(u);var n=Math.floor(u/1.570796326794897);if(1<o)o=u==0?0:NaN;else if(k.Dd(n))o=(u=v.sin(u))*v.Yw(1-u*u,1-o*u*u)-o/3*u*u*u*v.Vw(1-u*u,1-o*u*u);else{var a=h.P.truncate(n%2),c=v.$u(o);0<a?o=c*(n+1)-(o=(u=Math.sin(1.570796326794897*(n+1)-u))*v.Yw(1-u*u,1-o*u*u)-o/3*u*u*u*v.Vw(1-u*u,1-o*u*u)):o=c*n+(o=(u=Math.sin(u-1.570796326794897*n))*v.Yw(1-u*u,1-o*u*u)-o/3*u*u*u*v.Vw(1-u*u,1-o*u*u))}return o*r},v.sin=function(u){u=v.ca(u);var o=k.Mb(1,u);return u=k.R(u),k.$(u,3.141592653589793)?0:k.$(u,1.570796326794897)?1*o:Math.sin(u)*o},v.Vw=function(u,o){var r,n,a,c,p=u,f=o,m=1;for(o=0,u=1;n=((r=.2*(p+f+3*m))-p)/r,a=(r-f)/r,c=(r-m)/r,!(1e-4>k.R(n)&&1e-4>k.R(a)&&1e-4>k.R(c));)c=Math.sqrt(f),o+=u/((r=Math.sqrt(m))*(m+(c=Math.sqrt(p)*(c+r)+c*r))),u*=.25,p=.25*(p+c),f=.25*(f+c),m=.25*(m+c);return f=(p=n*a)-(m=c*c),3*o+u*(1+(m=p-6*m)*(.10227272727272728*m-.2142857142857143-.1730769230769231*c*(n=m+f+f))+c*(.1666666666666667*n+c*(-.4090909090909091*f+.1153846153846154*c*p)))/(r*Math.sqrt(r))},v.Yw=function(u,o){for(var r,n,a,c,p=1;n=2-((r=(u+o+p)/3)+u)/r,a=2-(r+o)/r,c=2-(r+p)/r,!(1e-4>k.R(n)&&1e-4>k.R(a)&&1e-4>k.R(c));p=.25*(p+r))r=Math.sqrt(o),n=Math.sqrt(p),u=.25*(u+(r=Math.sqrt(u)*(r+n)+r*n)),o=.25*(o+r);return(1+(.04166666666666666*(u=n*a-c*c)-.1-.06818181818181818*(o=n*a*c))*u+.07142857142857142*o)/Math.sqrt(r)},v.Rw=function(u,o){if(k.ui(u)||o==0||k.$(k.R(o),1.570796326794897))return o;if(.006884661117170036>u){var r=u*u,n=u*r,a=u*n,c=u*a,p=u*c,f=u*p,m=-(.02708333333333333*n+.03430059523809524*a+.03149181547619048*c+.02634359154541446*p+.02156896735835538*f),w=.007669890873015873*a+.01299603174603175*c+.0148051353064374*p+.01454454953803912*f,x=-(.002275545634920635*c+.004830845032667949*p+.006558395368616723*f),$=.0006957236677288761*p+.001775193002406544*f,T=-.000217324089394402*f,A=Math.cos(2*o);return o+Math.sin(2*o)*(-(.5*u+.2083333333333333*r+.09375*n+.04878472222222222*a+.02916666666666667*c+.01938905423280423*p+.01388255931712963*f)-m+x-T+A*(2*(.1041666666666667*r+.0875*n+.06050347222222222*a+.04151785714285714*c+.02958958540013228*p+.02203667534722222*f)-4*w+6*$+A*(4*m-12*x+24*T+A*(8*w-32*$+A*(16*x-80*T+A*(32*$+64*A*T))))))}return o==0||k.$(k.R(o),1.570796326794897)?r=o:(a=(n=Math.sqrt(u))*Math.sin(o),r=Math.tan(.7853981633974483+o/2)*Math.pow((1-a)/(1+a),n/2),r=2*Math.atan(r)-1.570796326794897),r},v.qO=function(u,o){if(k.ui(u)||o==0||k.$(k.R(o),1.570796326794897))return o;if(.006884661117170036>u){var r=u*($=u*(x=u*(A=u*u))),n=u*(T=u*r),a=.05833333333333333*x+.07232142857142858*$+.05634300595238095*r+.0355325796406526*T+.020235546186067*n,c=.02653149801587302*$+.04379960317460317*r+.0429211791776896*T+.03255384637546096*n,p=.01294022817460318*r+.02668104344536636*T+.03155651254609588*n,f=.00659454790965208*T+.0163075268674227*n,m=.003463473736911237*n,w=Math.cos(2*o);return o+Math.sin(2*o)*(.5*u+.2083333333333333*A+.08333333333333333*x+.03611111111111111*$+.01875*r+.01195601851851852*T+.008863673941798942*n-a+p-m+w*(2*(.1458333333333333*A+.1208333333333333*x+.07039930555555556*$+.03616071428571429*r+.01839451058201058*T+.01017113095238095*n)-4*c+6*f+w*(4*a-12*p+24*m+w*(8*c-32*f+w*(16*p-80*m+w*(32*f+64*w*m))))))}var x=Math.sqrt(u),$=x/2,T=Math.tan(.7853981633974483+o/2);u=0,a=1;for(var A=o;a!=0;A=n)r=x*Math.sin(A),n=T*Math.pow((1+r)/(1-r),$),n=2*Math.atan(n)-1.570796326794897,u++,(k.$(n,A)||3e4<u)&&(a=0);return A},v}()}(G||(G={})),function(h){var k=function(){function v(u){this.wl=this.Vs=null,this.Jv=!1,this.AA=this.BA=0,this.zH=new h.h,this.PH=new h.h,this.EA=!1,this.xq=new h.l,this.oH=this.tw=0,this.uw=null,this.Bl=!1,this.Fo=null,this.Xz=0,this.Re=u,this.Bs=h.Ab.yv(this.Re,0,!0),this.zH.Sc(),this.PH.Sc(),this.JH=NaN;var o=u.getCode();0<o?(this.Kk=o,h.qf.getCode(u)):this.Kk=h.qf.getCode(u),0>this.Kk&&(this.Kk=0);var r=this.Re.getType();if(this.bH=r==h.Tc.PE_TYPE_PROJCS?2:1,r==h.Tc.PE_TYPE_PROJCS&&!u.loadConstants())throw h.i.O("PeProjcs.loadConstants failed");o=r==h.Tc.PE_TYPE_GEOGCS?this.Re:this.Re.getGeogcs(),r!=h.Tc.PE_TYPE_GEOGCS&&h.qf.getCode(o),this.Fo=u.getUnit(),this.JH=o.getPrimem().getLongitude(),this.oH=u=o.getUnit().getUnitFactor(),u=Math.PI/(180*u),1e-10>Math.abs(u-1)&&(u=1),this.AA=u,(r&h.Tc.PE_TYPE_PROJCS)!=0?(o=this.Re,this.BA=1/o.getUnit().getUnitFactor(),this.tw=.001/this.Re.getUnit().getUnitFactor(),this.uw=h.Eg.generate(o,h.Eg.PE_PCSINFO_OPTION_NONE),this.Bl=this.uw.isPannableRectangle(),this.Xz=h.Ab.iN(this.uw.getCentralMeridian(),this.AA)):(this.EA=this.Bl=!0,this.BA=0,r=1/o.getUnit().getUnitFactor(),this.tw=.001/o.getDatum().getSpheroid().getAxis()*r,this.Xz=0),this.Bl&&(this.vx(),this.vK(),this.bY(),this.uK(),this.$X(),this.aY())}return v.prototype.bs=function(){return this.Kk},v.prototype.kk=function(){return this.uw},v.Ky=function(u,o){return u==o||u!=null&&o!=null&&u.Kk==0&&o.Kk==0&&u.Bs===o.Bs},v.prototype.Xc=function(){return this.Bl},v.prototype.hh=function(u){u.L(this.to)},v.prototype.qv=function(){return this.to.v},v.prototype.pv=function(){return this.to.C},v.prototype.yR=function(u){u.L(this.vw)},v.prototype.$X=function(){var u=this.Re.getType();if(u==h.Tc.PE_TYPE_PROJCS){u=this.Re;var o=this.kk().getCentralMeridian(),r=u.getGeogcs();if(r==null)throw h.i.ga("internal error");o=[[o+(r=1/r.getUnit().getUnitFactor()*Math.PI),0]],h.fj.geogToProj(u,1,o),o=o[0][0],r=u.getParameters()[h.Tc.PE_PARM_X0].getValue();var n=this.ol();u=new h.l,n.A(u),o=(n=Math.abs(o-r))+r,r=-1*n+r,n=u.H,u=u.G;var a=new h.l;a.L(r,u,o,n),this.to==null&&(this.to=a)}else{if(u!=h.Tc.PE_TYPE_GEOGCS)throw h.i.ga("internal error");r=1/this.Re.getUnit().getUnitFactor()*Math.PI,(u=new h.l).L(-r,-r/2,r,r/2),this.to==null&&(this.to=u)}},v.prototype.aY=function(){var u=this.Re.getType();if(u==h.Tc.PE_TYPE_PROJCS){var o=this.Re;if(u=this.kk().getCentralMeridian(),(o=o.getGeogcs())==null)throw h.i.ga("internal error");o=1/o.getUnit().getUnitFactor()*Math.PI;var r=this.Wr(),n=new h.l;r.A(n),(r=new h.l).L(u-o,n.G,u+o,n.H),this.vw==null&&(this.vw=r)}else{if(u!=h.Tc.PE_TYPE_GEOGCS)throw h.i.ga("internal error");o=1/this.Re.getUnit().getUnitFactor()*Math.PI,(u=new h.l).L(-o,-o/2,o,o/2),this.vw==null&&(this.vw=u)}},v.prototype.bf=function(){return this.AA},v.prototype.rm=function(){return this.BA},v.prototype.Wr=function(){if(this.Bl)return this.wl;var u=this.wl;return u!=null?u:(this.vx(),this.wl)},v.prototype.Xr=function(){return this.Bl?null:(this.wl!=null||this.vx(),this.PG)},v.prototype.vx=function(){if(this.Re.getType()==h.Tc.PE_TYPE_PROJCS){var u=this.Re,o=u.getGeogcs(),r=u.horizonGcsGenerate();if(r!=null){var n=r[0].getNump(),a=r[0].getKind();u=0<r[0].getInclusive();var c=this.bf(),p=90*c,f=360*c,m=370*c,w=180*c*h.Tc.PE_HORIZON_DELTA/Math.PI,x=new h.l,$=null;if(1<n){for(var T=1;T<n;T++)if(r[T].getKind()==h.Tc.PE_HORIZON_LINE){$==null&&($=new h.Ua);var A=r[T].getCoord();$.qx(A[0][0],A[0][1]),$.zj(A[1][0],A[1][1])}}if(a==h.Tc.PE_HORIZON_RECT)r=r[0].getCoord(),x.L(r[0][0],r[0][1]),x.$b(r[1][0],r[1][1]),Math.abs(x.H-p)<1e-7*w&&(x.H=p),Math.abs(x.G+p)<1e-7*w&&(x.G=-p),x.S()>m&&(r=-400*c,x.L(r,x.G,r+5*f,x.H)),r=new h.Gh(x),this.wl==null&&(this.wl=r,this.Jv=u);else{if(m=new h.Ea,f=this.kk().isGcsHorizonMultiOverlap(),x=h.hu.UE(o,h.iu.Integer64),f){for(m=new h.ZK,w=h.Hh.local().W(m,x,null),T=0;T<n;T++)if(r[T].getKind()==h.Tc.PE_HORIZON_POLY){for(o=r[T].getSize(),c=r[T].getCoord(),a=[],p=0;p<o;p++)a[p]=h.h.construct(c[p][0],c[p][1]);r[T].getInclusive(),f&&((c=new h.Ea).Zk(a,o-1),m.NX(c),w.qe())}m=w.next()}else for(T=0;T<n;T++)if(r[T].getKind()==h.Tc.PE_HORIZON_POLY){for(o=r[T].getSize(),c=r[T].getCoord(),f=[],p=0;p<o;p++)f[p]=h.h.construct(c[p][0],c[p][1]);r[T].getInclusive(),m.Zk(f,o-1)}u?h.Wk.local().xn(m,x,1):h.lp.local().xn(m,x,1),h.ej.local().xn(m,x,1),this.wl==null&&(this.wl=m,this.Jv=u,this.PG=$)}}}},v.prototype.jv=function(){return this.Bl||this.wl==null&&this.vx(),this.Jv},v.prototype.vK=function(){if(this.bH==2){var u=this.Re.horizonPcsGenerate();if(u!=null){var o=u[0].getKind();u[0].getInclusive();var r=u[0].getNump(),n=!1;if(o==h.Tc.PE_HORIZON_RECT)u=u[0].getCoord(),(r=new h.l).L(u[0][0],u[0][1]),r.$b(u[1][0],u[1][1]),u=new h.Gh(r);else{for(o=-1,n=0;n<r;n++)u[n].getKind()==h.Tc.PE_HORIZON_POLY&&(o=n);for(n=u[o].getSize()-1,u=u[o].getCoord(),r=[],o=0;o<n;o++)r[o]=h.h.construct(u[o][0],u[o][1]);u=o=new h.Ea,o.Zk(r,n),n=!0}this.kk().isDensificationNeeded()&&(r=1e5*this.rm(),u=h.Zl.local().W(u,r,null)),n&&(n=new h.Gh,u.dn(n),u.He(),u.Rb(),u.hR(),h.Wk.local().xn(u,null,1)),this.Vs==null&&(this.Vs=u)}}},v.prototype.ol=function(){if(this.Bl)return this.Vs;var u=this.Vs;return u!=null?u:(this.vK(),this.Vs)},v.prototype.bY=function(){if(this.Re.getType()==h.Tc.PE_TYPE_PROJCS){var u=90*this.bf();u=[[0,u],[0,-u]],h.fj.geogToProj(this.Re,2,u);var o=this.kk(),r=o.getNorthPoleLocation()!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY;o=o.getSouthPoleLocation()!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY,this.EA||(r&&this.zH.na(u[0][0],u[0][1]),o&&this.PH.na(u[1][0],u[1][1]))}this.EA=!0},v.prototype.uK=function(){if(this.bH==1){var u=400*this.bf();this.xq.L(-u,-u,u,u)}else u=h.Eg.generate(this.Re,h.Eg.PE_PCSINFO_OPTION_DOMAIN),u=h.l.construct(u.getDomainMinx(),u.getDomainMiny(),u.getDomainMaxx(),u.getDomainMaxy()),this.xq.B()&&this.xq.L(u)},v.prototype.$Q=function(u){this.Bl&&u.L(this.xq),this.xq.B()&&this.uK(),u.L(this.xq)},v.prototype.Wp=function(){return this.JH},v.prototype.Ai=function(){return this.Xz},v.prototype.Id=function(){return this.Fo},v.prototype.Yr=function(){return this.oH},v}();h.GC=k}(G||(G={})),function(h){var k=function(){function v(u){this.AT=u,this.Bs=h.Ab.yv(u,0,!0);var o=u.getCode();this.ts=0<o?o:h.qf.getCode(u),0>this.ts&&(this.ts=0),this.Fo=o=this.AT.getUnit(),this.AH=1/o.getUnitFactor(),h.qf.getCode(u)}return v.Ky=function(u,o){return u==o||u!=null&&o!=null&&u.ts==0&&o.ts==0&&u.Bs===o.Bs},v.prototype.bs=function(){return this.ts},v}();h.HL=k}(G||(G={})),function(h){h.Zg=function(){function k(){}return k.ub=function(v,u,o,r,n,a,c,p){if(a!=null||c!=null||p!=null){r=h.F.ca(r),u=h.F.ca(u),o=h.F.ca(o),n=h.F.ca(n),1.570796326794897<h.s.R(o)&&(o=h.s.Mb(3.141592653589793,o)-o,u=h.F.ca(u+3.141592653589793)),1.570796326794897<h.s.R(n)&&(n=h.s.Mb(3.141592653589793,n)-n,r=h.F.ca(r+3.141592653589793));var f=h.F.ca(r-u);if(h.s.$(o,n)&&(h.s.$(u,r)||h.s.$(h.s.R(o),1.570796326794897)))a!=null&&(a.u=0),c!=null&&(c.u=0),p!=null&&(p.u=0);else{if(h.s.$(o,-n)){if(h.s.$(h.s.R(o),1.570796326794897))return a!=null&&(a.u=3.141592653589793*v),c!=null&&(c.u=0<o?h.F.ca(3.141592653589793-h.F.ca(r)):h.F.ca(r)),void(p!=null&&(p.u=0<o?h.F.ca(r):h.F.ca(3.141592653589793-h.F.ca(r))));if(h.s.$(h.s.R(f),3.141592653589793))return a!=null&&(a.u=3.141592653589793*v),c!=null&&(c.u=0),void(p!=null&&(p.u=0))}var m=h.s.R(o)==1.570796326794897?0:Math.cos(o),w=Math.sin(o),x=h.s.R(n)==1.570796326794897?0:Math.cos(n),$=Math.sin(n),T=h.s.R(f)==1.570796326794897?0:Math.cos(f),A=h.s.R(f)==3.141592653589793?0:Math.sin(f);if(a!=null){var C=Math.sin((n-o)/2);f=Math.sin(f/2),a.u=2*Math.asin(Math.sqrt(C*C+m*x*f*f))*v}c!=null&&(c.u=h.s.$(h.s.R(o),1.570796326794897)?0>o?r:h.F.ca(3.141592653589793-r):Math.atan2(x*A,m*$-w*x*T)),p!=null&&(h.s.$(h.s.R(n),1.570796326794897)?p.u=0>n?u:h.F.ca(3.141592653589793-u):(p.u=Math.atan2(m*A,$*m*T-x*w),p.u=h.F.ca(p.u+3.141592653589793)))}}},k.sf=function(v,u,o,r,n,a,c){if(a!=null||c!=null){u=h.F.ca(u),o=h.F.ca(o),1.570796326794897<h.s.R(o)&&(o=h.s.Mb(3.141592653589793,o)-o,u=h.F.ca(u+3.141592653589793)),h.s.$(h.s.R(o),1.570796326794897)&&(u=0),n=h.F.ca(n);var p=h.s.$(h.s.R(n),1.570796326794897)?0:Math.cos(n),f=h.s.$(h.s.R(n),3.141592653589793)?0:Math.sin(n),m=h.s.$(h.s.R(o),1.570796326794897)?0:Math.cos(o),w=Math.sin(o);v=r/v,r=h.s.$(h.s.R(v),1.570796326794897)?0:Math.cos(v);var x=h.s.$(h.s.R(v),3.141592653589793)?0:Math.sin(v),$=Math.asin(w*r+m*x*p);c!=null&&(c.u=$),a!=null&&(a.u=h.s.$(h.s.R($),1.570796326794897)?h.s.$(o,-$)?0>$?n:h.F.ca(3.141592653589793-n):u:h.s.$(h.s.R(o),1.570796326794897)&&h.s.$(v,3.141592653589793)?0>o?n:h.F.ca(3.141592653589793-n):h.F.ca(u+Math.atan2(x*f,m*r-w*x*p)))}},k}()}(G||(G={})),function(h){h.Xk=function(){function k(){}return k.ub=function(v,u,o,r,n,a,c,p,f){var m=new h.ha(0),w=new h.ha(0),x=[0,0,0],$=[0,0,0],T=[0,0,0],A=new h.ha(0),C=new h.ha(0),N=new h.ha(0),L=new h.ha(0),D=new h.ha(0);if(c!=null||p!=null||f!=null)if(h.s.ui(u))h.Zg.ub(v,o,r,n,a,c,p,f);else{n=h.F.ca(n),o=h.F.ca(o);var F=h.F.ca(n-o);if(h.s.$(r,a)&&(h.s.$(o,n)||h.s.$(h.s.R(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.$(r,-a)){if(h.s.$(h.s.R(r),1.570796326794897))return c!=null&&(c.u=2*h.F.Bh(v,u)),p!=null&&(p.u=0<r?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(f!=null&&(f.u=0<r?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));h.s.$(h.s.R(F),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Bh(v,u)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else(h.s.$(h.s.R(r),1.570796326794897)||h.s.$(h.s.R(a),1.570796326794897))&&(h.s.$(h.s.R(r),1.570796326794897)?o=n:n=o);var V=0;if(0>F){V=1;var W=o;o=n,n=W,W=r,r=a,a=W}F=h.F.ot(u,r);var K=h.F.ot(u,a);p==null&&f==null||(h.Zg.ub(v,o,F,n,K,null,m,w),m=Math.atan2(Math.sin(m.u)*Math.cos(r-F),Math.cos(m.u)),w=Math.atan2(Math.sin(w.u)*Math.cos(a-K),Math.cos(w.u)),V!=0&&(W=m,m=w,w=W),p!=null&&(p.u=m),f!=null&&(f.u=w)),c!=null&&(h.F.dl(1,u,r,o,0,N,L,D),x[0]=N.u,x[1]=L.u,x[2]=D.u,h.F.dl(1,u,a,n,0,N,L,D),$[0]=N.u,$[1]=L.u,$[2]=D.u,T[0]=x[1]*$[2]-$[1]*x[2],T[1]=-(x[0]*$[2]-$[0]*x[2]),T[2]=x[0]*$[1]-$[0]*x[1],u=1-h.F.w(u,h.F.Xq(u,h.F.Rj(u,Math.acos(T[2]/Math.sqrt(T[0]*T[0]+T[1]*T[1]+T[2]*T[2]))))),u*=2-u,p=Math.atan2(-T[1],-T[0]),T=h.F.ca(p-1.570796326794897),p=h.F.ca(p+1.570796326794897),T=h.s.R(h.F.ca(o-T))<=h.s.R(h.F.ca(o-p))?T:p,h.Zg.ub(1,T,0,o,F,A,null,null),h.Zg.ub(1,T,0,n,K,C,null,null),3.141592653589793<A.u+C.u&&(T=h.F.ca(T+3.141592653589793),h.Zg.ub(1,T,0,o,F,A,null,null),h.Zg.ub(1,T,0,n,K,C,null,null)),A.u*=h.s.Mb(1,r),C.u*=h.s.Mb(1,a),A.u=h.F.Rj(u,A.u),C.u=h.F.Rj(u,C.u),o=h.F.q(v,u,A.u),v=h.F.q(v,u,C.u),c.u=h.s.R(v-o))}}},k.sf=function(v,u,o,r,n,a,c,p){var f=0,m=new h.ha(0),w=new h.ha(0),x=[0,0,0],$=[0,0,0],T=new h.ha(0),A=new h.ha(0),C=new h.ha(0);if(c!=null||p!=null)if(h.s.ui(u))h.Zg.sf(v,o,r,n,a,c,p);else if(h.s.Dd(n))c!=null&&(c.u=o),p!=null&&(p.u=r);else if(a=h.F.ca(a),0>n&&(n=h.s.R(n),a=h.F.ca(a+3.141592653589793)),o=h.F.ca(o),r=h.F.ca(r),1.570796326794897<h.s.R(r)&&(o=h.F.ca(o+3.141592653589793),r=h.s.Mb(3.141592653589793,r)-r),h.s.$(h.s.R(r),1.570796326794897)&&(o=0),h.s.Dd(r)){var N=h.s.R(1.570796326794897-h.s.R(a));N=h.F.Rj(u,N),N=1-h.F.w(u,h.F.Xq(u,N)),N*=2-N,v=n/h.F.Bh(v,N)*1.570796326794897,v=h.F.Tq(N,v),v=h.F.ot(N,v),h.Zg.sf(1,o,r,v,a,c,m),p!=null&&(f=m.u),p!=null&&(p.u=h.F.Rj(u,f))}else if(h.s.$(h.s.R(r),1.570796326794897))m=2*(f=h.F.Bh(v,u)),a=0<(v=h.s.Mb(1.570796326794897,r))?h.F.ca(3.141592653589793-a):a,r=f-n,h.s.R(r)<=f?c!=null&&(c.u=a):(r=Math.floor(n/m),h.P.truncate(r%2)==0?(c!=null&&(c.u=a),n-=r*m):(c!=null&&(c.u=h.F.ca(a+3.141592653589793)),n=(r+1)*m-n),r=f-n),p!=null&&(p.u=h.F.Tq(u,r/f*v));else{N=h.F.ot(u,r),a=Math.atan2(Math.sin(a),Math.cos(a)*Math.cos(r-N));var L=h.P.truncate(h.s.Mb(1,N))*(1.570796326794897>=h.s.R(a)?1:-1);a=h.F.ca(o+Math.atan(Math.tan(a)*-Math.sin(N))),h.Zg.ub(v,a,0,o,N,null,w,null),N=h.s.R(1.570796326794897-h.s.R(w.u)),N=h.F.Rj(u,N),N=1-h.F.w(u,h.F.Xq(u,N)),N*=2-N,h.F.dl(1,u,0,a,0,T,A,C),x[0]=T.u,x[1]=A.u,x[2]=C.u,h.F.dl(1,u,r,o,0,T,A,C),$[0]=T.u,$[1]=A.u,$[2]=C.u,r=Math.acos((x[0]*$[0]+x[1]*$[1]+x[2]*$[2])/Math.sqrt($[0]*$[0]+$[1]*$[1]+$[2]*$[2])),r=h.F.Rj(N,r),n=0<(r=h.F.q(v,N,r)+n*L)?w.u:h.F.ca(w.u+3.141592653589793),v=h.s.R(r)/h.F.Bh(v,N)*1.570796326794897,v=h.F.Tq(N,v),v=h.F.ot(N,v),h.Zg.sf(1,a,0,v,n,c,m),p!=null&&(f=m.u),p!=null&&(p.u=h.F.Rj(u,f))}},k}()}(G||(G={})),function(h){h.du=function(){function k(){}return k.ub=function(v,u,o,r,n,a,c,p,f){var m=0,w=0,x=0;if(c!=null||p!=null||f!=null)if(h.s.ui(u))h.Zg.ub(v,o,r,n,a,c,p,f);else{var $=h.F.ca(n-o);if(h.s.$(r,a)&&(h.s.Dd($)||h.s.$(h.s.R(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.$(r,-a)){if(h.s.$(h.s.R(r),1.570796326794897))return c!=null&&(c.u=2*h.F.Bh(v,u)),p!=null&&(p.u=0<r?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(f!=null&&(f.u=0<r?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));h.s.$(h.s.R($),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Bh(v,u)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else if(h.s.$(h.s.R(r),1.570796326794897)||h.s.$(h.s.R(a),1.570796326794897)||h.s.Dd($)||h.s.$(h.s.R($),3.141592653589793))return void h.Xk.ub(v,u,o,r,n,a,c,p,f);var T=1-Math.sqrt(1-u),A=u/(1-u),C=v*(1-T);v=h.F.Xq(u,r);var N=h.F.Xq(u,a);u=h.s.R(v)==1.570796326794897?0:Math.cos(v);var L=Math.sin(v),D=h.s.R(N)==1.570796326794897?0:Math.cos(N),F=Math.sin(N),V=$,W=Math.cos(V),K=Math.sin(V),B=1,ee=0;do{var ae=V,me=Math.sqrt(Math.pow(D*K,2)+Math.pow(u*F-L*D*W,2)),fe=L*F+u*D*W,pe=Math.atan2(me,fe);if(me==0){B=0;break}var be=u*D*K/me;if(m=Math.cos(Math.asin(be)),w=fe-2*L*F/(m*=m),1<h.s.R(w)&&(w=h.s.Mb(1,w)),V=$+(1-(V=T/16*m*(4+T*(4-3*m))))*T*be*(pe+V*me*(w+V*fe*(2*(x=w*w)-1))),W=Math.cos(V),K=Math.sin(V),ee++,3.141592653589793<h.s.R(V)&&30<ee){B=0;break}}while(5e3>=ee&&!h.s.$(ae,V));if(B!=0)T=(A*=m)*(256+A*(A*(74-47*A)-128))/1024,c!=null&&(c.u=C*(1+A*(4096+A*(A*(320-175*A)-768))/16384)*(pe-T*me*(w+T/4*(fe*(2*x-1)-T/6*w*(4*me*me-3)*(4*x-3))))),p!=null&&(p.u=h.s.$(h.s.R(r),1.570796326794897)?0>r?n:h.F.ca(3.141592653589793-n):Math.atan2(D*K,u*F-L*D*W)),f!=null&&(h.s.$(h.s.R(a),1.570796326794897)?f.u=0>a?o:h.F.ca(3.141592653589793-o):(f.u=Math.atan2(u*K,u*F*W-L*D),f.u=h.F.ca(f.u+3.141592653589793)));else{V=h.s.Mb(3.141592653589793,$),fe=L*F-u*D,pe=Math.acos(fe),me=Math.sin(pe),m=1,ee=be=0;do x=be,W=1-.25*(be=T*(m*=m)*(1+T+T*T))+.1875*(w=T*T*(W=m*m)*(1+2.25*T))-.1953125*(B=T*T*T*W*m),be=.25*be-.25*w+.29296875*B,K=.03125*w-.05859375*B,B*=.00651041666666667,w=fe-2*L*F/m,1<h.s.R(w)&&(w=h.s.Mb(1,w)),m=Math.acos(w),fe=Math.cos(2*m),ae=Math.cos(3*m),K=(be=h.s.$(r,-a)?h.F.ca(3.141592653589793-$)/(3.141592653589793*T*W):h.F.ca(V-$)/(T*(W*pe+be*me*w+K*Math.sin(2*pe)*fe+B*Math.sin(3*pe)*ae)))*me/(u*D),V=1.570796326794897<h.s.R($)?h.s.Mb(3.141592653589793,K)-Math.asin(K):Math.asin(K),W=Math.cos(V),me=Math.sqrt(Math.pow(D*K,2)+Math.pow(u*F-L*D*W,2)),pe=3.141592653589793-Math.asin(h.s.R(me)),fe=Math.cos(pe),m=Math.cos(Math.asin(be)),ee++;while(70>=ee&&!h.s.$(x,be));c!=null&&(W=1+(A*=m*=m)*(4096+A*(A*(320-175*A)-768))/16384,h.s.$(r,-a)?c.u=3.141592653589793*C*W:(w=fe-2*L*F/m,m=Math.acos(w),fe=Math.cos(2*m),ae=Math.cos(3*m),c.u=C*(W*pe+A*(A*(128+A*(35*A-60))-512)/2048*me*w+A*(5*A-4)/6144*A*A*Math.sin(2*pe)*fe+B*Math.sin(3*pe)*ae+-762939453125e-16*A*A*A*A*Math.sin(4*pe)*Math.cos(4*m)))),p!=null&&(h.s.Dd(r)&&h.s.Dd(a)?(m=Math.sqrt(1-be*be),p.u=Math.acos(m),0>$&&(p.u*=-1)):h.s.$(h.s.R(r),1.570796326794897)?p.u=0>r?n:h.F.ca(3.141592653589793-n):(c=be/u,C=Math.sqrt(1-c*c),0>u*F-L*D*Math.cos(V)&&(C*=-1),p.u=Math.atan2(c,C),h.s.$(r,-a)&&h.s.R(h.F.ca(o-n))>3.141592653589793*(1-T*Math.cos(r))&&(0<r&&1.570796326794897>h.s.R(p.u)||0>r&&1.570796326794897<h.s.R(p.u))&&(p.u=h.s.Mb(3.141592653589793,p.u)-p.u))),f!=null&&(h.s.Dd(r)&&h.s.Dd(a)?(m=Math.sqrt(1-be*be),f.u=Math.acos(m),0<=$&&(f.u*=-1)):h.s.$(h.s.R(a),1.570796326794897)?f.u=0>a?o:h.F.ca(3.141592653589793-o):($=be/D,c=Math.sqrt(1-$*$),C=Math.sin(V/2),0>Math.sin(N-v)-2*u*F*C*C&&(c*=-1),f.u=Math.atan2($,c),f.u=h.F.ca(f.u+3.141592653589793),h.s.$(r,-a)&&!h.s.Dd(r)&&!h.s.$(h.s.R(r),1.570796326794897)&&h.s.R(h.F.ca(o-n))>3.141592653589793*(1-T*Math.cos(r))&&(p!=null?C=p.u:(c=be/u,C=Math.sqrt(1-c*c),0>u*F-L*D*Math.cos(V)&&(C*=-1),C=Math.atan2(c,C),h.s.$(r,-a)&&h.s.R(h.F.ca(o-n))>3.141592653589793*(1-T*Math.cos(r))&&(0<r&&1.570796326794897>h.s.R(C)||0>r&&1.570796326794897<h.s.R(C))&&(C=h.s.Mb(3.141592653589793,C)-C)),1.570796326794897>=h.s.R(C)&&1.570796326794897<h.s.R(f.u)||1.570796326794897<=h.s.R(C)&&1.570796326794897>h.s.R(f.u))&&(f.u=-1*h.F.ca(f.u+3.141592653589793))))}}}},k.sf=function(v,u,o,r,n,a,c,p){if(c!=null||p!=null)if(h.s.ui(u))h.Zg.sf(v,o,r,n,a,c,p);else if(a=h.F.ca(a),h.s.$(h.s.R(r),1.570796326794897)||h.s.Dd(a)||h.s.$(h.s.R(a),3.141592653589793))h.Xk.sf(v,u,o,r,n,a,c,p);else{var f=h.s.R(a)==1.570796326794897?0:Math.cos(a),m=h.s.R(a)==3.141592653589793?0:Math.sin(a);h.s.$(h.s.R(r),1.570796326794897)&&(o=0),a=1-Math.sqrt(1-u);var w=h.F.Xq(u,r);r=h.s.R(w)==1.570796326794897?0:Math.cos(w);var x=Math.sin(w);w=Math.atan2(Math.tan(w),f);var $=r*m,T=$*$,A=1-T,C=u/(1-u)*A,N=(u=C*(256+C*(C*(74-47*C)-128))/1024)/4,L=u/6,D=n/(v*(1-a)*(1+C*(4096+C*(C*(320-175*C)-768))/16384)),F=D;do{var V=F;n=h.s.R(F)==1.570796326794897?0:Math.cos(F);var W=(C=h.s.R(F)==3.141592653589793?0:Math.sin(F))*C;F=u*C*((v=Math.cos(2*w+F))+N*(n*(2*(F=v*v)-1)-L*v*(4*W-3)*(4*F-3)))+D}while(!h.s.$(V,F));n=h.s.R(F)==1.570796326794897?0:Math.cos(F),C=h.s.R(F)==3.141592653589793?0:Math.sin(F),c!=null&&(m=Math.atan2(C*m,r*n-x*C*f),A=a/16*A*(4+a*(4-3*A)),v=Math.cos(2*w+F),c.u=h.F.ca(o+(m-(1-A)*a*$*(F+A*C*(v+A*n*(2*v*v-1)))))),p!=null&&(A=x*C-r*n*f,A=(1-a)*Math.sqrt(T+A*A),p.u=Math.atan2(x*n+r*C*f,A))}},k}()}(G||(G={})),function(h){h.HC=function(){function k(){}return k.ub=function(v,u,o,r,n,a,c,p,f){var m=h.F.ca(n-o),w=h.s.$(h.s.R(r),1.570796326794897),x=h.s.$(h.s.R(a),1.570796326794897);if(h.s.$(r,a)&&(h.s.Dd(m)||w))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.ui(u)){var $=Math.sin(r),T=Math.sin(a);$=Math.sqrt((1+$)/(1-$)),T=Math.sqrt((1+T)/(1-T)),$=Math.log(T)-Math.log($),$=Math.atan2(m,$),c!=null&&(c.u=h.s.$(r,a)?h.s.R(v*Math.cos(r)*m):h.s.R((v*a-v*r)/Math.cos($)))}else T=h.F.Rw(u,a),$=Math.sin(h.F.Rw(u,r)),T=Math.sin(T),$=Math.sqrt((1+$)/(1-$)),T=Math.sqrt((1+T)/(1-T)),$=Math.log(T)-Math.log($),$=Math.atan2(m,$),c!=null&&(h.s.$(r,a)?c.u=h.s.R(v*m*Math.cos(r)/h.F.w(u,r)):(m=h.F.q(v,u,r),v=h.F.q(v,u,a),c.u=h.s.R((v-m)/Math.cos($))));p==null&&f==null||(c=h.F.ca($+3.141592653589793),w&&x||!w&&!x||(w?$=0>r?n:h.F.ca(3.141592653589793-n):x&&(c=0>a?o:h.F.ca(3.141592653589793-o))),p!=null&&(p.u=$),f!=null&&(f.u=c))}},k.sf=function(v,u,o,r,n,a,c,p){a=h.F.ca(a),0>n&&(n=h.s.R(n),a=h.F.ca(a+3.141592653589793)),h.s.ui(u)?h.s.$(h.s.R(r),1.570796326794897)?(o=0>r?a:h.F.ca(3.141592653589793-a),3.141592653589793>=(a=n/v%6.283185307179586)?v=r-h.s.Mb(a,r):(o=h.F.ca(o+3.141592653589793),v=-r+h.s.Mb(a-3.141592653589793,r))):h.s.$(h.s.R(a),1.570796326794897)?(o=h.F.ca(o+h.s.Mb(n,a)/(v*Math.cos(r))),v=r):(v=r+n*Math.cos(a)/v,1.570796326794897<h.s.R(v)&&(v=1.570796326794897),h.s.$(h.s.R(v),1.570796326794897)&&(h.s.Dd(a)||h.s.$(h.s.R(a),3.141592653589793))||(1.570796316258184<h.s.R(v)&&(v=h.s.Mb(1.570796316258184,v)),u=Math.sin(r),r=Math.sin(v),u=Math.sqrt((1+u)/(1-u)),r=Math.sqrt((1+r)/(1-r)),u=Math.log(r)-Math.log(u),o=h.F.ca(o+Math.tan(a)*u))):h.s.$(h.s.R(r),1.570796326794897)?(o=0>r?a:h.F.ca(3.141592653589793-a),a=n/h.F.gW(v,u),3.141592653589793>=(a%=6.283185307179586)?v=r-h.s.Mb(a,r):(o=h.F.ca(o+3.141592653589793),v=-r+h.s.Mb(a-3.141592653589793,r)),v=h.F.Tq(u,v)):h.s.$(h.s.R(a),1.570796326794897)?(o=h.F.ca(o+h.s.Mb(n,a)*h.F.w(u,r)/(v*Math.cos(r))),v=r):(v=1.570796326794897*(n*Math.cos(a)+h.F.q(v,u,r))/h.F.Bh(v,u),1.570796326794897<h.s.R(v)&&(v=h.s.Mb(1.570796326794897,v)),v=h.F.Tq(u,v),h.s.$(h.s.R(v),1.570796326794897)&&(h.s.Dd(a)||h.s.$(h.s.R(a),3.141592653589793))||(n=h.F.Rw(u,r),r=h.F.Rw(u,v),1.570796316258184<h.s.R(r)&&(r=h.s.Mb(1.570796316258184,v),v=h.F.qO(u,r)),u=Math.sin(n),r=Math.sin(r),u=Math.sqrt((1+u)/(1-u)),r=Math.sqrt((1+r)/(1-r)),u=Math.log(r)-Math.log(u),o=h.F.ca(o+Math.tan(a)*u))),c!=null&&(c.u=o),p!=null&&(p.u=v)},k}()}(G||(G={})),function(h){h.kb=function(){function k(){}return k.Sy=function(v,u,o,r,n,a,c){h.du.ub(v,u,o,r,n,a,null,c,null)},k.zi=function(v,u,o,r,n,a,c,p){h.du.sf(v,u,o,r,n,a,c,p)},k.xd=function(v,u,o,r,n,a,c,p,f,m){switch(m){case 2:h.Xk.ub(v,u,o,r,n,a,c,p,f);break;case 3:h.IC.ub(v,u,o,r,n,a,c,p,f);break;case 1:h.HC.ub(v,u,o,r,n,a,c,p,f);break;default:h.du.ub(v,u,o,r,n,a,c,p,f)}},k.pj=function(v,u,o,r,n,a,c,p,f){switch(f){case 2:h.Xk.sf(v,u,o,r,n,a,c,p);break;case 3:h.IC.sf(v,u,o,r,n,a,c,p);break;case 1:h.HC.sf(v,u,o,r,n,a,c,p);break;default:h.du.sf(v,u,o,r,n,a,c,p)}},k}()}(G||(G={})),function(h){var k=function(){function u(){this.y=this.x=null}return u.construct=function(o){var r=new u;return r.x=new h.Xb,r.x.set(o.x),r.y=new h.Xb,r.y.set(o.y),r},u.NE=function(o,r){var n=new u;return n.x=new h.Xb,n.x.set(o),n.y=new h.Xb,n.y.set(r),n},u.prototype.qg=function(){return this.x.qg()&&this.y.qg()},u.prototype.value=function(){return h.h.construct(this.x.value(),this.y.value())},u}();h.jY=k;var v=function(){function u(){this.z=this.y=this.x=null}return u.construct=function(o){var r=new u;return r.x=new h.Xb,r.x.set(o.x),r.y=new h.Xb,r.y.set(o.y),r.z=new h.Xb,r.z.set(o.z),r},u.NE=function(o,r,n){var a=new u;return a.x=new h.Xb,a.x.set(o),a.y=new h.Xb,a.y.set(r),a.z=new h.Xb,a.z.set(n),a},u.prototype.qg=function(){return this.x.qg()&&this.y.qg()&&this.z.qg()},u.prototype.value=function(){return new h.Od(this.x.value(),this.y.value(),this.z.value())},u.prototype.Rh=function(o){var r=new h.Xb,n=new h.Xb,a=new h.Xb;return r.Ml(this.x,o.x),n.Ml(this.y,o.y),a.Ml(this.z,o.z),(o=new h.Xb).WM(r,n),o.add(a),o},u.prototype.VE=function(o){var r=new u;r.x.Ml(this.y,o.z),r.y.Ml(this.z,o.x),r.z.Ml(this.x,o.y);var n=new h.Xb,a=new h.Xb,c=new h.Xb;return n.Ml(this.z,o.y),a.Ml(this.x,o.z),c.Ml(this.y,o.x),r.x.sub(n),r.y.sub(a),r.z.sub(c),r},u}();h.kY=v,h.Mx=function(){function u(){}return u.wP=function(o,r,n){var a=r.x;r=r.y,u.dl(1,o,Math.cos(a),Math.sin(a),Math.cos(r),Math.sin(r),n)},u.vP=function(o,r){var n=new h.Od;return u.wP(o,r,n),n},u.dl=function(o,r,n,a,c,p,f){o/=Math.sqrt(1-r*p*p),f.L(o*c*n,o*c*a,o*(1-r)*p)},u.Zu=function(o,r){var n=new h.Xb,a=new h.Xb,c=new h.Xb,p=new h.Xb;n.cos(r.x),a.sin(r.x),c.cos(r.y),p.sin(r.y);var f=new h.Xb;return f.set(p),f.Ag(p),f.Oo(o),f.Oo(-1),f.cN(),f.sqrt(),(r=new h.Xb).set(1),r.lm(f),(f=new h.Xb).set(r),f.Ag(c),f.Ag(n),(n=new h.Xb).set(r),n.Ag(c),n.Ag(a),(a=new h.Xb).set(r),a.Oo(1-o),a.Ag(p),v.NE(f,n,a)},u.IS=function(o,r,n,a){if(Math.abs(r.x-n.x)>Math.PI||Math.abs(r.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(r.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&r.x!=n.x)return NaN;if(a=u.XA(a,Math.min(r.x,n.x),Math.max(r.x,n.x)),!new h.Oc(r.x,n.x).contains(a))return NaN;var c=k.construct(r);if(n=k.construct(n),c=u.Zu(o,c),n=u.Zu(o,n),(n=c.VE(n)).z.qg())return r.y;var p=new h.Xb;p.set(n.x),p.lm(n.z),p.Oo(-1);var f=new h.Xb;f.set(n.y),f.lm(n.z),f.Oo(-1);var m=new h.Xb;return m.set(f),m.Ag(f),(c=new h.Xb).set(p),c.Ag(p),c.add(m),c.sqrt(),c.qg()||p.qg()&&f.qg()?r.y:(r=Math.atan2(f.value(),p.value()),r=Math.atan2(c.value()*Math.cos(r-a),1-o),a=u.vP(o,h.h.construct(a,r)),o=new h.Od(a.x,a.y,-a.z),a=n.value().Rh(a),o=n.value().Rh(o),Math.abs(o)<Math.abs(a)&&(r=-r),r)},u.Jz=function(o,r,n,a,c){if(c[0]=NaN,c[1]=NaN,Math.abs(r.x-n.x)>Math.PI||Math.abs(r.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(r.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&r.x!=n.x||Math.abs(a)>=.5*Math.PI||0<r.y&&0<n.y&&r.y>a&&n.y>a||0>r.y&&0>n.y&&r.y<a&&n.y<a)return 0;var p=k.construct(r),f=k.construct(n);p=u.Zu(o,p),f=u.Zu(o,f);var m=p.VE(f);if(m.z.qg())return new h.Oc(r.y,n.y).contains(a)?(c[0]=r.x,1):0;(f=new h.Xb).set(m.x),f.lm(m.z),f.Oo(-1),(p=new h.Xb).set(m.y),p.lm(m.z),p.Oo(-1),(m=new h.Xb).set(p),m.Ag(p);var w=new h.Xb;return w.set(f),w.Ag(f),w.add(m),w.sqrt(),w.qg()||f.qg()&&p.qg()?a==0?(c[0]=r.x,c[1]=n.x,2):0:(o=(1-o)*Math.tan(a)/w.value(),1<Math.abs(o)?0:(o=Math.acos(o),m=Math.atan2(p.value(),f.value()),f=Math.min(r.x,n.x),p=Math.max(r.x,n.x),n=u.XA(m-o,f,p),o=a!=0?u.XA(m+o,f,p):n,a=0,f<=n&&n<=p&&(c[a]=n,a++),o!=n&&f<=o&&o<=p&&(c[a]=o,++a==2&&Math.abs(c[0]-r.x)>Math.abs(c[1]-r.x)&&(r=c[0],c[0]=c[1],c[1]=r)),a))},u.XA=function(o,r,n){return o>n?o-=2*(r=Math.ceil((o-n)/(2*Math.PI)))*Math.PI:o<r&&(o+=2*(r=Math.ceil((r-o)/(2*Math.PI)))*Math.PI),o},u}()}(G||(G={})),function(h){h.PK=function(){function k(){}return k.OX=function(v,u){var o=8,r=[0,0,0,0],n=new h.h;n.N(u),n.scale(h.cb.tc(v).Id().Fc()==9102?1:h.cb.tc(v).Id().bi/3.141592653589793*180),-180>n.x?(n.x-=n.x%360,-180>n.x&&(n.x+=360)):180<n.x&&(n.x-=n.x%360,180<n.x&&(n.x-=360)),90<n.y&&(n.y=90),-90>n.y&&(n.y=-90);for(var a=-180,c=180,p=(v=5*o)-1,f=(u=(v+31)/32)-1;0<=f;f--)for(var m=p-32*f,w=Math.min(32,v-32*f),x=1;x<w;x+=2){var $=.5*(c+a);n.x>=$?(r[f]|=1<<m,a=$):c=$,m-=2,p-=2}for(a=-90,c=90,p=v-2,f=u-1;0<=f;f--)for(m=p-32*f,w=Math.min(32,v-32*f),x=0;x<w;x+=2)$=.5*(c+a),n.y>=$?(r[f]|=1<<m,a=$):c=$,m-=2,p-=2;return k.SP(r,o,o)},k.SP=function(v,u,o){for(var r=[],n=0;n<u;n++)r[n]="";for(var a=n=0,c=0;c<u;c++){var p=v[n]>>a&31;if(31<(a+=5)){var f=37-a;p&=(1<<f)-1,a-=32,p|=(v[++n]&(1<<a)-1)<<f}r[u-1-c]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[p]}if(o>u)for(c=0;c<o-u;c++)r.push("0");else o<u&&(r.length=o);return r.join("")},k}()}(G||(G={})),function(h){var k={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},v={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};h.yr=function(){function u(){}return u.Ny=function(o){u.zp===!1&&u.yt();var r=u.xQ(o);if(r==-1){var n=u.zx(o);n!=o&&(r=u.Ny(n))}return r==-1&&(n=u.xK(o))!=o&&(r=u.Ny(n)),r},u.xQ=function(o){return u.Gw[o]!==void 0?u.Gw[o]:-1},u.uQ=function(o){u.zp===!1&&u.yt();var r=u.fF(o);if(r==1e38){var n=u.zx(o);if(n!=o&&(r=u.fF(n)),r==1e38)return 1e-10}return r},u.PS=function(o){if(u.Js[o]!==void 0)return!0;var r=u.zx(o);return r!=o&&u.Js[r]!==void 0},u.RS=function(o){if(u.yo[o]!==void 0)return!0;var r=u.zx(o);return r!=o&&u.yo[r]!==void 0},u.fF=function(o){return u.zp===!1&&u.yt(),u.Js[o]!==void 0?u.Js[o]:u.yo[o]!==void 0?u.yo[o]:1e38},u.xK=function(o){return u.zp===!1&&u.yt(),u.QA[o]!==void 0?u.QA[o]:o},u.zx=function(o){return u.zp===!1&&u.yt(),u.RA[o]!==void 0?u.RA[o]:o},u.yt=function(){for(var o,r=k,n=0;n<r.pcsid.length;n+=2)u.yo[r.pcsid[n]]=r.pcstol[2*r.pcsid[n+1]+1];for(n=0;n<r.pcsidc.length;n+=1)for(var a=(o=r.pcsidc[n])[0];a<=o[1];a++)u.yo[a]=r.pcstol[2*o[2]+1];for(n=0;n<r.gcsid.length;n+=2)u.Js[r.gcsid[n]]=r.gcstol[2*r.gcsid[n+1]+1];for(n=0;n<r.gcsidc.length;n+=1)for(a=(o=r.gcsidc[n])[0];a<=o[1];a++)u.yo[a]=r.gcstol[2*o[2]+1];for(n=0;n<v.c.length;n+=1)for(a=(o=v.c[n])[0];a<=o[1];a++)u.Gw[a]=o[2];for(n=0;n<v.nc.length;n+=2)u.Gw[v.nc[n]]=v.nc[n+1];for(v=null,n=0;n<r.newtoold.length;n+=2)u.QA[r.newtoold[n+1]]=r.newtoold[n],u.RA[r.newtoold[n]]=r.newtoold[n+1];k=null,u.zp=!0},u.zp=!1,u.Js=[],u.yo=[],u.QA=[],u.RA=[],u.Gw=[],u}()}(G||(G={})),function(h){function k(u){return u.length===0?'""':u[0]=='"'||u[0]=="."||"0"<=u[0]&&"9">=u[0]?u:'"'+u.trim()+'"'}var v=[];h.PC=function(){function u(){}return u.wQ=function(o){try{for(var r=0;r<v.length;r++)if(v[r].wkttext===o)return v[r].unit;for(var n,a=r="",c=!1,p=0;p<o.length;p++){var f=o[p];c===!0?f=='"'?o[p+1]=='"'?r+=f:c=c=!1:r+=f:/[\s]/.test(f)||(f==","?(a=r!==""?a+(k(r)+","):a+",",r=""):f==")"||f=="]"?(a=r!==""?a+(k(r)+"]}"):a+"]}",r=""):f=="("||f=="["?(a+='{ "entity": "'+r.toUpperCase().trim()+'", "values":[',r=""):f=='"'?(c=!0,r=""):r+=f)}n=JSON.parse(a);var m=u.eF(n);if(m===null)return null;for(n=null,f=0;f<m.values.length;f++)if(typeof m.values[f]=="object"&&m.values[f].entity==="UNIT"){n=m.values[f];break}if(n===null)return null;var w=h.Uc.RO(m.entity==="GEOGCS"?1:0,n.values[1],n.values[2]);return v.push({wkttext:o,unit:w}),10<v.length&&v.shift(),w}catch{return null}},u.eF=function(o){if(o===null)return null;if(o.entity==="GEOGCS"||o.entity==="PROJCS")return o;for(var r=[],n=0;n<o.values.length;n++)if(typeof o.values[n]=="object"&&o.values[n].entity!==void 0){if(o.values[n].entity==="GEOGCS"||o.values[n].entity=="PROJCS")return o.values[n];r.push(o.values[n])}for(o=0;o<r.length;o++)if((n=u.eF(r[o]))!==null)return n;return null},u.vQ=function(o){var r=-1;if(o!=null&&0<o.length){var n=o.indexOf("PROJCS");if(0<=n){var a=0;if(0<=(n=o.lastIndexOf("UNIT"))&&0<(n=o.indexOf(",",n+4))){n++;var c=o.indexOf("]",n+1);if(0<c)try{a=parseFloat(o.substring(n,c))}catch{a=0}}0<a&&(r=.001/a)}else if(0<=(n=o.indexOf("GEOGCS"))){var p=0;if(a=0,0<(n=o.indexOf("SPHEROID",n+6))&&0<(n=o.indexOf(",",n+8))){if(n++,0<(c=o.indexOf(",",n+1)))try{p=parseFloat(o.substring(n,c))}catch{p=0}if(0<p&&0<=(n=o.indexOf("UNIT",c+1))&&0<(n=o.indexOf(",",n+4))&&(n++,0<(c=o.indexOf("]",n+1))))try{a=parseFloat(o.substring(n,c))}catch{a=0}}0<p&&0<a&&(r=.001/(p*a))}}return r},u}()}(G||(G={})),function(h){var k;(k=h.XK||(h.XK={}))[k.NONE=0]="NONE",k[k.LINEAR=1]="LINEAR",k[k.ANGULAR=2]="ANGULAR",function(u){u[u.enumFloat=0]="enumFloat",u[u.enumDouble=1]="enumDouble",u[u.enumInt32=2]="enumInt32",u[u.enumInt64=3]="enumInt64",u[u.enumInt8=4]="enumInt8",u[u.enumInt16=5]="enumInt16"}(h.IL||(h.IL={})),function(u){u[u.POSITION=0]="POSITION",u[u.Z=1]="Z",u[u.M=2]="M",u[u.ID=3]="ID",u[u.NORMAL=4]="NORMAL",u[u.TEXTURE1D=5]="TEXTURE1D",u[u.TEXTURE2D=6]="TEXTURE2D",u[u.TEXTURE3D=7]="TEXTURE3D",u[u.ID2=8]="ID2",u[u.MAXSEMANTICS=10]="MAXSEMANTICS"}(h.Jh||(h.Jh={}));var v=function(){function u(o,r){if(this.Ws=this.Be=null,this.Qq=this.Ba=0,this.vh=this.cg=null,this.yl=0,r!==void 0){for(this.Ba=r.Ba,this.Qq=r.Qq,this.cg=r.cg.slice(0),this.vh=r.vh.slice(0),this.yl=r.yl,this.Ws=[],o=r=0;o<this.Ba;o++)this.Ws[o]=r,r+=u.Wa(this.cg[o]);for(this.Qq=r,this.Be=[],o=0;o<this.Ba;o++){r=u.Wa(this.qd(o));for(var n=u.te(this.qd(o)),a=0;a<r;a++)this.Be[this.Ws[o]+a]=n}}else this.Qq=this.Ba=0}return u.prototype.qd=function(o){if(0>o||o>this.Ba)throw h.i.O();return this.cg[o]},u.prototype.Qf=function(o){return this.vh[o]},u.gz=function(o){return u.BM[o]},u.Vp=function(o){return u.KM[o]},u.Wa=function(o){return u.jM[o]},u.prototype.hasAttribute=function(o){return 0<=this.vh[o]},u.prototype.aG=function(){return this.hasAttribute(1)},u.te=function(o){return u.XC[o]},u.prototype.CR=function(o){return this.Ws[o]},u.vG=function(o,r){return u.XC[o]===r},u.prototype.Nb=function(o){return this===o},u.prototype.Bn=function(){for(var o=h.P.Uh(this.cg[0]),r=1;r<this.Ba;r++)o=h.P.Uh(this.cg[r],o);return o},u.prototype.$j=function(o){return this.Ws[o]},u.prototype.dc=function(){return this.yl},u.prototype.Fd=function(o){return this.cg[o]},u.XC=[0,0,NaN,0,0,0,0,0,0],u.BM=[1,1,1,0,2,1,1,1,0],u.KM=[1,1,1,2,0,0,0,0,2],u.jM=[2,1,1,1,3,1,2,3,2],u}();h.ua=v}(G||(G={})),function(h){function k(c,p,f){var m=p-(c=new a(c)).e,w=c.c;for(w.length>++p&&v(c,m,a.fu),w[0]?f?m=p:(w=c.c,m=c.e+m+1):++m;w.length<m;w.push(0));return m=c.e,f===1||f&&(p<=m||m<=o)?(0>c.Cd&&w[0]?"-":"")+(1<w.length?w[0]+"."+w.join("").slice(1):w[0])+(0>m?"e":"e+")+m:c.toString()}function v(c,p,f,m){var w=c.c,x=c.e+p+1;if(f===1?m=5<=w[x]:f===2?m=5<w[x]||w[x]==5&&(m||0>x||w[x+1]!==void 0||1&w[x-1]):f===3?m=m||w[x]!==void 0||0>x:(m=!1,f!==0&&u("!Big.RM!")),1>x||!w[0])m?(c.e=-p,c.c=[1]):c.c=[c.e=0];else{if(w.length=x--,m)for(;9<++w[x];)w[x]=0,x--||(++c.e,w.unshift(1));for(x=w.length;!w[--x];w.pop());}return c}function u(c){throw(c=Error(c)).name="BigError",c}var o=-7,r=21,n=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,a=function(){function c(p){if(p instanceof c)this.Cd=p.Cd,this.e=p.e,this.c=p.c.slice();else{var f,m,w;for(p===0&&0>1/p?p="-0":n.test(p+="")||u(NaN),this.Cd=p.charAt(0)=="-"?(p=p.slice(1),-1):1,-1<(f=p.indexOf("."))&&(p=p.replace(".","")),0<(m=p.search(/e/i))?(0>f&&(f=m),f+=+p.slice(m+1),p=p.substring(0,m)):0>f&&(f=p.length),m=0;p.charAt(m)=="0";m++);if(m==(w=p.length))this.c=[this.e=0];else{for(;p.charAt(--w)=="0";);for(this.e=f-m-1,this.c=[],f=0;m<=w;this.c[f++]=+p.charAt(m++));}}}return c.prototype.abs=function(){var p=new c(this);return p.Cd=1,p},c.prototype.cmp=function(p){var f=this.c,m=(p=new c(p)).c,w=this.Cd,x=p.Cd,$=this.e,T=p.e;if(!f[0]||!m[0])return f[0]?w:m[0]?-x:0;if(w!=x)return w;if(p=0>w,$!=T)return $>(T^p)?1:-1;for(w=-1,x=($=f.length)<(T=m.length)?$:T;++w<x;)if(f[w]!=m[w])return f[w]>(m[w]^p)?1:-1;return $==T?0:$>(T^p)?1:-1},c.prototype.lm=function(p){var f=this.c,m=(p=new c(p)).c,w=this.Cd==p.Cd?1:-1,x=c.tr;if((x!==~~x||0>x||1e6<x)&&u("!Big.DP!"),!f[0]||!m[0])return f[0]==m[0]&&u(NaN),m[0]||u(w/0),new c(0*w);var $,T,A=m.slice(),C=$=m.length,N=f.length,L=f.slice(0,$),D=L.length,F=p,V=F.c=[],W=0,K=x+(F.e=this.e-p.e)+1;for(F.Cd=w,w=0>K?0:K,A.unshift(0);D++<$;L.push(0));do{for(T=0;10>T;T++){if($!=(D=L.length))var B=$>D?1:-1;else{var ee=-1;for(B=0;++ee<$;)if(m[ee]!=L[ee]){B=m[ee]>L[ee]?1:-1;break}}if(!(0>B))break;for(p=D==$?m:A;D;){if(L[--D]<p[D]){for(ee=D;ee&&!L[--ee];L[ee]=9);--L[ee],L[D]+=10}L[D]-=p[D]}for(;!L[0];L.shift());}V[W++]=B?T:++T,L[0]&&B?L[D]=f[C]||0:L=[f[C]]}while((C++<N||L[0]!==void 0)&&w--);return V[0]||W==1||(V.shift(),F.e--),W>K&&v(F,x,c.fu,L[0]!==void 0),F},c.prototype.XR=function(){return 0<this.cmp(0)},c.prototype.dT=function(){return 0>this.cmp(0)},c.prototype.jt=function(p){var f,m=this.Cd,w=(p=new c(p)).Cd;if(m!=w)return p.Cd=-w,this.lI(p);var x=this.c.slice(),$=this.e,T=p.c,A=p.e;if(!x[0]||!T[0])return T[0]?(p.Cd=-w,p):new c(x[0]?this:0);if(m=$-A){for((f=0>m)?(m=-m,$=x):(A=$,$=T),$.reverse(),w=m;w--;$.push(0));$.reverse()}else for($=((f=x.length<T.length)?x:T).length,m=w=0;w<$;w++)if(x[w]!=T[w]){f=x[w]<T[w];break}if(f&&($=x,x=T,T=$,p.Cd=-p.Cd),0<(w=($=T.length)-(f=x.length)))for(;w--;x[f++]=0);for(w=f;$>m;){if(x[--$]<T[$]){for(f=$;f&&!x[--f];x[f]=9);--x[f],x[$]+=10}x[$]-=T[$]}for(;x[--w]==0;x.pop());for(;x[0]==0;)x.shift(),--A;return x[0]||(p.Cd=1,x=[A=0]),p.c=x,p.e=A,p},c.prototype.lI=function(p){var f=this.Cd,m=(p=new c(p)).Cd;if(f!=m)return p.Cd=-m,this.jt(p);m=this.e;var w=this.c,x=p.e,$=p.c;if(!w[0]||!$[0])return $[0]?p:new c(w[0]?this:0*f);if(w=w.slice(),f=m-x){for(0<f?(x=m,m=$):(f=-f,m=w),m.reverse();f--;m.push(0));m.reverse()}for(0>w.length-$.length&&(m=$,$=w,w=m),f=$.length,m=0;f;)m=(w[--f]=w[f]+$[f]+m)/10|0,w[f]%=10;for(m&&(w.unshift(m),++x),f=w.length;w[--f]==0;w.pop());return p.c=w,p.e=x,p},c.prototype.pow=function(p){var f=this,m=new c(1),w=m,x=0>p;for((p!==~~p||-1e6>p||1e6<p)&&u("!pow!"),p=x?-p:p;1&p&&(w=w.nr(f)),p>>=1;)f=f.nr(f);return x?m.lm(w):w},c.prototype.round=function(p,f){var m=this;return p==null?p=0:(p!==~~p||0>p||1e6<p)&&u("!round!"),v(m=new c(m),p,f==null?c.fu:f),m},c.prototype.sqrt=function(){var p=this.c,f=this.Cd,m=this.e,w=new c("0.5");if(!p[0])return new c(this);0>f&&u(NaN),(f=Math.sqrt(this.toString()))==0||f==1/0?((f=p.join("")).length+m&1||(f+="0"),(p=new c(Math.sqrt(f).toString())).e=((m+1)/2|0)-(0>m||1&m)):p=new c(f.toString()),f=p.e+(c.tr+=4);do m=p,p=w.nr(m.lI(this.lm(m)));while(m.c.slice(0,f).join("")!==p.c.slice(0,f).join(""));return v(p,c.tr-=4,c.fu),p},c.prototype.nr=function(p){var f=this.c,m=(p=new c(p)).c,w=f.length,x=m.length,$=this.e,T=p.e;if(p.Cd=this.Cd==p.Cd?1:-1,!f[0]||!m[0])return new c(0*p.Cd);if(p.e=$+T,w<x){var A=f;f=m,m=A,T=w,w=x,x=T}for(A=Array(T=w+x);T--;A[T]=0);for($=x;$--;){for(x=0,T=w+$;T>$;)x=A[T]+m[$]*f[T-$-1]+x,A[T--]=x%10,x=x/10|0;A[T]=(A[T]+x)%10}for(x&&++p.e,A[0]||A.shift(),$=A.length;!A[--$];A.pop());return p.c=A,p},c.prototype.toString=function(){var p=this.e,f=this.c.join(""),m=f.length;if(p<=o||p>=r)f=f.charAt(0)+(1<m?"."+f.slice(1):"")+(0>p?"e":"e+")+p;else if(0>p){for(;++p;f="0"+f);f="0."+f}else if(0<p)if(++p>m)for(p-=m;p--;f+="0");else p<m&&(f=f.slice(0,p)+"."+f.slice(p));else 1<m&&(f=f.charAt(0)+"."+f.slice(1));return 0>this.Cd&&this.c[0]?"-"+f:f},c.prototype.toExponential=function(p){return p==null?p=this.c.length-1:(p!==~~p||0>p||1e6<p)&&u("!toExp!"),k(this,p,1)},c.prototype.toFixed=function(p){var f=o,m=r;if(o=-(r=1/0),p==null)var w=this.toString();else p===~~p&&0<=p&&1e6>=p&&(w=k(this,this.e+p),0>this.Cd&&this.c[0]&&0>w.indexOf("-")&&(w="-"+w));return o=f,r=m,w||u("!toFix!"),w},c.prototype.toPrecision=function(p){return p==null?this.toString():((p!==~~p||1>p||1e6<p)&&u("!toPre!"),k(this,p-1,2))},c.tr=20,c.fu=1,c}();h.ip=a}(G||(G={})),function(h){var k=function(){function v(u){this.lf=u}return v.prototype.qr=function(u,o,r){var n=new h.h,a=new h.h,c=this.lf;r.Wd(u,o,function(p,f){return c.uc(2*p,n),c.uc(2*f,a),n.compare(a)})},v.prototype.bq=function(u){return this.lf.read(2*u+1)},v}();h.ri=function(){function v(){}return v.cq=function(u){if(u.B())return!1;var o=u.K();return o==1736?u.He()!=0:o==1607?(o=[!1],v.kE(u,!0,o),o[0]):!(o!=197&&(!h.ba.zd(o)||u.tG()))},v.im=function(u){var o=u.K();if(o==1736)return o=new h.Ua(u.description),u.B()||u.WC(o),o;if(o==1607)return v.kE(u,!1,null);if(o==197)return o=new h.Ua(u.description),u.B()||o.bd(u,!1),o;if(h.ba.zd(o)){if(o=new h.de(u.description),!u.B()&&!u.tG()){var r=new h.Ta;u.Uo(r),o.add(r),u.Qo(r),o.add(r)}return o}if(h.ba.Sn(o))return null;throw h.i.O()},v.kE=function(u,o,r){r!=null&&(r[0]=!1);var n=null;if(o||(n=new h.de(u.description)),!u.B()){var a=new h.ja(0);a.Jb(2*u.ea());for(var c=0,p=u.ea();c<p;c++)if(0<u.Ka(c)&&!u.On(c)){var f=u.Ca(c);a.add(f),f=u.Wc(c)-1,a.add(f)}if(0<a.size){p=new h.Yt,c=u.vb(0),p.sort(a,0,a.size,new k(c)),p=new h.h,c.uc(2*a.get(0),p),f=0;for(var m=1,w=new h.Ta,x=new h.h,$=1,T=a.size;$<T;$++)if(c.uc(2*a.get($),x),x.rb(p))a.get(f)>a.get($)?(a.set(f,2147483647),f=$):a.set($,2147483647),m++;else{if((1&m)==0)a.set(f,2147483647);else if(o)return r!=null&&(r[0]=!0),null;p.N(x),f=$,m=1}if((1&m)==0)a.set(f,2147483647);else if(o)return r!=null&&(r[0]=!0),null;if(!o)for(a.Wd(0,a.size,function(A,C){return A-C}),$=0,T=a.size;$<T&&a.get($)!=2147483647;$++)u.we(a.get($),w),n.add(w)}}return o?null:n},v}()}(G||(G={})),function(h){var k=function(){function v(){this.zf=new h.ja(0),this.zs=new h.ja(0),this.wH=1,this.Fs=NaN}return v.prototype.sort=function(u,o,r,n){if(32>r-o)n.qr(o,r,u);else{var a=!0;try{for(var c=1/0,p=-1/0,f=o;f<r;f++){var m=n.bq(u.get(f));m<c&&(c=m),m>p&&(p=m)}if(this.reset(r-o,c,p,r-o)){for(f=o;f<r;f++){var w=u.get(f);m=n.bq(w);var x=this.rF(m);this.zf.set(x,this.zf.get(x)+1),this.zs.write(f-o,w)}var $=this.zf.get(0);this.zf.set(0,0),f=1;for(var T=this.zf.size;f<T;f++){var A=this.zf.get(f);this.zf.set(f,$),$+=A}for(f=o;f<r;f++){w=this.zs.read(f-o),m=n.bq(w),x=this.rF(m);var C=this.zf.get(x);u.set(C+o,w),this.zf.set(x,C+1)}a=!1}}catch{this.zf.resize(0),this.zs.resize(0)}if(a)n.qr(o,r,u);else{for(f=r=0,T=this.zf.size;f<T;f++)a=r,(r=this.zf.get(f))>a&&n.qr(o+a,o+r,u);100<this.zf.size&&(this.zf.resize(0),this.zs.resize(0))}}},v.prototype.reset=function(u,o,r,n){return!(2>u||r==o)&&(u=Math.min(v.$K,u),this.zf.Jb(u),this.zf.resize(u),this.zf.Xj(0,0,this.zf.size),this.wH=o,this.zs.resize(n),this.Fs=(r-o)/(u-1),!0)},v.prototype.rF=function(u){return h.P.truncate((u-this.wH)/this.Fs)},v.$K=65536,v}();h.Yt=k}(G||(G={})),function(h){var k,v;(v=k||(k={}))[v.enum_line=1]="enum_line",v[v.enum_arc=2]="enum_arc",v[v.enum_dummy=4]="enum_dummy",v[v.enum_concave_dip=8]="enum_concave_dip",v[v.enum_connection=3]="enum_connection";var u=function(){function c(){}return c.Su=function(p,f,m,w,x,$){var T=new c;return T.Km=new h.h,T.Xm=new h.h,T.bw=new h.h,T.Km.N(p),T.Xm.N(f),T.bw.N(m),T.Do=w,T.rh=x,T.th=$,T},c.construct=function(p,f,m,w){var x=new c;return x.Km=new h.h,x.Xm=new h.h,x.bw=new h.h,x.Km.N(p),x.Xm.N(f),x.bw.Sc(),x.Do=4,x.rh=m,x.th=w,x},c}(),o=function(){function c(p,f,m,w,x,$){this.Zv=null,this.za=0,this.yA=p,this.UH=this.SH=0,this.La=f,this.Nj=m,this.vk=w,this.Fq=x,this.Vb=$}return c.prototype.next=function(){for(var p=new h.Ta;;){if(this.za==this.yA.I())return null;if(this.yA.we(this.za,p),this.za++,!p.B())break}var f=!1;if(this.Zv==null&&(this.SH=p.Mg(),this.UH=p.jh(),this.Zv=a.buffer(p,this.La,this.Nj,this.vk,this.Fq,this.Vb),f=!0),this.za<this.yA.I()){var m=new h.Ea;this.Zv.copyTo(m)}else m=this.Zv;if(!f){f=new h.Ed;var w=p.Mg()-this.SH;p=p.jh()-this.UH,f.gg(w,p),m.Pc(f)}return m},c.prototype.Ma=function(){return 0},c.prototype.qe=function(){},c}(),r=function(){function c(p,f){this.Xa=p,this.za=0,this.qq=f}return c.prototype.next=function(){var p=this.Xa.Y;if(this.za<p.ea()){var f=this.za;if(this.za++,!p.On(f))for(var m=p.Oa(p.Wc(f)-1);this.za<p.ea();){var w=p.Oa(p.Ca(this.za));if(p.On(this.za)||w!=m)break;m=p.Oa(p.Wc(this.za)-1),this.za++}if(this.za-f==1)return this.Xa.cE(this.Xa.Y,f,this.qq);for((m=new h.Ua(this.Xa.Y.description)).addPath(this.Xa.Y,f,!0),f+=1;f<this.za;f++)m.Fr(this.Xa.Y,f,0,p.sv(f),!1);return this.Xa.cE(m,0,this.qq)}return null},c.prototype.Ma=function(){return 0},c.prototype.qe=function(){},c}(),n=function(){function c(p){this.Xa=p,this.za=0}return c.prototype.next=function(){var p=this.Xa.Y;if(this.za<p.ea()){var f=this.za;for(p.Kr(this.za),this.za++;this.za<p.ea()&&!(0<p.Kr(this.za));)this.za++;return f==0&&this.za==p.ea()?this.Xa.ky(p,0,p.ea()):this.Xa.ky(p,f,this.za)}return null},c.prototype.Ma=function(){return 0},c.prototype.qe=function(){},c}(),a=function(){function c(p){this.Ls=this.mw=this.Ms=this.Jd=null,this.$d=[],this.Vb=p,this.sb=this.Lv=this.zT=this.La=this.nA=this.ct=this.ra=0,this.iA=this.vk=-1,this.qq=!0}return c.buffer=function(p,f,m,w,x,$){if(p==null||0>w)throw h.i.O();if(p.B())return new h.Ea(p.description);var T=new h.l;return p.yc(T),0<f&&T.X(f,f),($=new c($)).Nj=m,$.Y=p,$.ra=h.ta.Xd(m,T,!0),$.ct=h.ta.Xd(null,T,!0),$.La=f,$.zT=p.K(),0>=x&&(x=96),$.sb=Math.abs($.La),$.Lv=$.sb!=0?1/$.sb:0,isNaN(w)||w==0?w=1e-5*$.sb:w>.5*$.sb&&(w=.5*$.sb),12>x&&(x=12),(p=Math.abs(f)*(1-Math.cos(Math.PI/x)))>w?w=p:(p=Math.PI/Math.acos(1-w/Math.abs(f)))<x-1&&12>(x=h.P.truncate(p))&&(x=12,w=Math.abs(f)*(1-Math.cos(Math.PI/x))),$.vk=w,$.Fq=x,$.nA=Math.min($.ct,.25*w),$.dE()},c.prototype.dv=function(){if(this.Jd==null)this.Jd=[];else if(this.Jd.length!==0)return;var p=this.iE();p=h.P.truncate((p+3)/4);var f=.5*Math.PI/p;this.iA=f;for(var m=0;m<4*p;m++)this.Jd.push(null);var w=Math.cos(f);f=Math.sin(f);var x=h.h.construct(0,1);for(m=0;m<p;m++)this.Jd[m+0*p]=h.h.construct(x.y,-x.x),this.Jd[m+1*p]=h.h.construct(-x.x,-x.y),this.Jd[m+2*p]=h.h.construct(-x.y,x.x),this.Jd[m+3*p]=x,(x=h.h.construct(x.x,x.y)).Bt(w,f)},c.prototype.dE=function(){var p=this.Y.K();if(h.ba.zd(p))return(p=new h.Ua(this.Y.description)).oc(this.Y,!0),this.Y=p,this.dE();if(this.La<=this.ra){if(!h.ba.KS(p))return new h.Ea(this.Y.description);if(0>=this.La&&(p=new h.l,this.Y.A(p),p.S()<=2*-this.La||p.da()<=2*this.La))return new h.Ea(this.Y.description)}switch(this.Y.K()){case 33:return this.HN();case 550:return this.GN();case 1607:return this.JN();case 1736:return this.IN();case 197:return this.DN();default:throw h.i.Ra()}},c.prototype.JN=function(){if(this.wG(this.Y)){var p=new h.Ta;this.Y.we(0,p);var f=new h.l;return this.Y.A(f),p.Db(f.tf()),this.Hu(p)}return this.Y=this.MV(this.Y),p=new r(this,this.qq),h.Hh.local().W(p,this.Nj,this.Vb).next()},c.prototype.IN=function(){if(this.La==0)return this.Y;var p=h.$l.local();if(this.dv(),this.Y=p.W(this.Y,null,!1,this.Vb),0>this.La){var f=this.Y;return f=this.ky(f,0,f.ea()),p.W(f,this.Nj,!1,this.Vb)}return this.wG(this.Y)?(p=new h.Ta,this.Y.we(0,p),f=new h.l,this.Y.A(f),p.Db(f.tf()),this.Hu(p)):(p=new n(this),h.Hh.local().W(p,this.Nj,this.Vb).next())},c.prototype.ky=function(p,f,m){for(var w=new h.Ea(p.description);f<m;f++)if(!(1>p.Ka(f))){var x=p.Kr(f),$=new h.l;if(p.Sj(f,$),0<this.La){if(0<x)if(this.xG(p,f))x=new h.Ta,p.we(p.Ca(f),x),x.Db($.tf()),this.zu(w,x);else{var T=x=new h.Ua(p.description);T=h.$t.BG(this.Y,f)||this.An(this.Y,f,T,!0,1)==2?this.bE(p,f):this.zn(x),w.add(T,!1)}else if(!($.S()+this.ra<=2*this.sb||$.da()+this.ra<=2*this.sb||(T=x=new h.Ua(p.description),this.An(this.Y,f,T,!0,1),x.B()))){var A=new h.l;for(A.L($),A.X(this.sb,this.sb),T.vp(A),$=1,x=(T=this.zn(x)).ea();$<x;$++)w.addPath(T,$,!0)}}else if(0<x){if(!($.S()+this.ra<=2*this.sb||$.da()+this.ra<=2*this.sb||(T=x=new h.Ua(p.description),this.An(this.Y,f,T,!0,-1),x.B())))for(A=new h.l,T.yc(A),A.X(this.sb,this.sb),T.vp(A),$=1,x=(T=this.zn(x)).ea();$<x;$++)w.addPath(T,$,!0)}else for(T=x=new h.Ua(p.description),this.An(this.Y,f,T,!0,-1),$=0,x=(T=this.zn(x)).ea();$<x;$++)w.addPath(T,$,!0)}if(0<this.La)return 1<w.ea()?w=this.zn(w):c.jx(w);if(p=new h.l,w.yc(p),w.B())return c.jx(w);for(p.X(this.sb,this.sb),w.vp(p),w=this.zn(w),p=new h.Ea(w.description),$=1,x=w.ea();$<x;$++)p.addPath(w,$,!1);return c.jx(p)},c.prototype.HN=function(){return this.Hu(this.Y)},c.prototype.Hu=function(p){var f=new h.Ea(this.Y.description);return this.zu(f,p),this.gX(f)},c.prototype.GN=function(){var p=new o(this.Y,this.La,this.Nj,this.vk,this.Fq,this.Vb);return h.Hh.local().W(p,this.Nj,this.Vb).next()},c.prototype.DN=function(){var p=new h.Ea(this.Y.description);if(0>=this.La){if(this.La==0)p.bd(this.Y,!1);else{var f=new h.Gh;this.Y.dn(f),f.X(this.La,this.La),p.bd(f,!1)}return p}return p.bd(this.Y,!1),this.Y=p,this.bE(p,0)},c.prototype.bE=function(p,f){this.dv();var m=new h.Ea(p.description),w=new h.h,x=new h.h,$=new h.h,T=new h.h,A=new h.h,C=new h.h,N=new h.h,L=new h.h,D=p.Ka(f),F=p.Ca(f),V=0;for(f=p.Ka(f);V<f;V++){if(p.D(F+V,x),p.D(F+(V+1)%D,T),p.D(F+(V+2)%D,C),N.vc(T,x),N.length()==0||(N.Iv(),N.normalize(),N.scale(this.sb),w.add(N,x),$.add(N,T),V==0?m.Mt(w):m.Di(w),m.Di($),L.vc(C,T),L.length()==0))throw h.i.Ra();L.Iv(),L.normalize(),L.scale(this.sb),A.add(L,T),this.yD(m,T,$,A,!1)}return c.jx(m)},c.prototype.cE=function(p,f,m){if(this.dv(),1>p.Ka(f))return null;if(this.xG(p,f)&&0<this.La){m=new h.Ta,p.we(p.Ca(f),m);var w=new h.l;return p.Sj(f,w),m.Db(w.tf()),this.Hu(m)}if(w=new h.Ua(p.description),p.On(f))this.An(p,f,w,m,1),this.An(p,f,w,m,-1);else{var x=new h.Ua(p.description);x.addPath(p,f,!1),x.Fr(p,f,0,p.sv(f),!1),this.An(x,0,w,m,1)}return this.zn(w)},c.prototype.Zq=function(){if(this.Zs++,this.Zs%1024==0&&this.Vb!=null&&!this.Vb.progress(-1,-1))throw h.i.gu("user_canceled")},c.prototype.zn=function(p){return h.Hg.Mk(p,this.ct,!0,!0,this.Vb)},c.prototype.iE=function(){if(this.vk==0)return this.Fq;var p=1-this.vk*Math.abs(this.Lv);return 4>(p=-1>p?4:2*Math.PI/Math.acos(p)+.5)?p=4:p>this.Fq&&(p=this.Fq),h.P.truncate(p)},c.prototype.yD=function(p,f,m,w,x){this.dv();var $=new h.h;$.vc(m,f),$.scale(this.Lv);var T=new h.h;T.vc(w,f),T.scale(this.Lv),0>($=Math.atan2($.y,$.x)/this.iA)&&($=this.Jd.length+$),$=this.Jd.length-$,0>(T=Math.atan2(T.y,T.x)/this.iA)&&(T=this.Jd.length+T),(T=this.Jd.length-T)<$&&(T+=this.Jd.length);var A=h.P.truncate(T);T=h.P.truncate(Math.ceil($)),($=new h.h).N(this.Jd[T%this.Jd.length]),$.Ct(this.sb,f);var C=10*this.ra;for($.sub(m),$.length()<C&&(T+=1),$.N(this.Jd[A%this.Jd.length]),$.Ct(this.sb,f),$.sub(w),$.length()<C&&--A,m=A-T,m++,A=0,T%=this.Jd.length;A<m;A++,T=(T+1)%this.Jd.length)$.N(this.Jd[T]),$.Ct(this.sb,f),p.Di($),this.Zq();x&&p.Di(w)},c.prototype.An=function(p,f,m,w,x){var $=new h.hd,T=$.eN(p,f);if($.Ip(this.nA,!1,!1),2>$.I(T))return 0>x||(x=p,$=new h.Ta,x.we(x.Ca(f),$),this.zu(m,$)),1;var A=$.Oa($.Ya($.Ob(T))),C=new h.Ed;if(C.gg(-A.x,-A.y),$.Pc(C),w&&(this.lQ($,T,x),2>$.I(T)))return 0>x||(x=p,$=new h.Ta,x.we(x.Ca(f),$),this.zu(m,$)),1;this.$d.length=0;var N=$.Ob(T);f=$.Ya(N);var L=x==1?$.Na(f):$.V(f);p=x==1?$.V(f):$.Na(f);var D=!0;w=new h.h,T=new h.h;var F=new h.h,V=new h.h,W=new h.h,K=new h.h,B=new h.h,ee=new h.h,ae=new h.h,me=new h.h,fe=this.sb;N=$.Ka(N);for(var pe=0;pe<N;pe++)$.D(p,T),D&&($.D(f,w),$.D(L,F),ee.vc(w,F),ee.normalize(),me.EG(ee),me.scale(fe),V.add(me,w)),B.vc(T,w),B.normalize(),ae.EG(B),ae.scale(fe),W.add(w,ae),L=ee.xi(B),D=ee.Rh(B),0>L||0>D&&L==0?this.$d.push(u.Su(V,W,w,2,this.$d.length+1,this.$d.length-1)):V.rb(W)||(this.$d.push(u.construct(V,w,this.$d.length+1,this.$d.length-1,"dummy")),this.$d.push(u.construct(w,W,this.$d.length+1,this.$d.length-1,"dummy"))),K.add(T,ae),this.$d.push(u.Su(W,K,w,1,this.$d.length+1,this.$d.length-1)),V.N(K),me.N(ae),F.N(w),w.N(T),ee.N(B),L=f,f=p,D=!1,p=x==1?$.V(f):$.Na(f);return this.$d[this.$d.length-1].rh=0,this.$d[0].th=this.$d.length-1,this.OV(m),C.gg(A.x,A.y),m.QD(C,m.ea()-1),1},c.prototype.OV=function(p){for(var f=this.rO(),m=!0,w=f+1,x=f;w!=f;x=w){var $=this.$d[x];w=$.rh!=-1?$.rh:(x+1)%this.$d.length,$.Do!=0&&(m&&p.Mt($.Km),$.Do==2?this.yD(p,$.bw,$.Km,$.Xm,!0):p.Di($.Xm),m=!1)}},c.prototype.rO=function(){this.Ls==null&&(this.Ls=[null,null,null,null,null,null,null,null,null]);for(var p=0,f=0,m=this.$d.length;f<m;){var w=this.$d[f];if((3&w.Do)!=0){p=f;break}f=w.rh}for(m=p+1,f=p;m!=p;f=m){m=(w=this.$d[f]).rh;for(var x=1,$=null;m!=f&&(3&($=this.$d[m]).Do)==0;)m=$.rh,x++;x!=1&&(w.Do&$.Do)==1&&(this.Ms==null&&(this.Ms=new h.zb,this.mw=new h.zb),this.Ms.Ec(w.Km),this.Ms.Rc(w.Xm),this.mw.Ec($.Km),this.mw.Rc($.Xm),this.Ms.Fa(this.mw,this.Ls,null,null,this.ct)==1&&(w.Xm.N(this.Ls[0]),$.Km.N(this.Ls[0]),w.rh=m,$.th=f))}return p},c.prototype.Gv=function(p,f,m){var w=new h.h;if(w.vc(m,p),m=w.length(),0<(m=this.sb*this.sb-m*m*.25)){m=Math.sqrt(m),w.normalize(),w.cr();var x=new h.h;if(x.vc(f,p),x.Rh(w)+m>=this.sb)return!0}return!1},c.prototype.lQ=function(p,f,m){for(var w=0;1>w;w++){var x=!1,$=p.Ob(f),T=p.Ka($);if(T==0)break;var A=T;if(3>T)break;!p.ec($)&&(A=T-1),$=p.Ya($),T=0<m?p.Na($):p.V($);for(var C=0<m?p.V($):p.Na($),N=T,L=!0,D=new h.h,F=new h.h,V=new h.h,W=new h.h,K=new h.h,B=h.h.construct(0,0),ee=new h.h,ae=new h.h,me=new h.h,fe=new h.h,pe=this.sb,be=0,Pe=0;Pe<A&&(p.D(C,F),L&&(p.D($,D),p.D(T,V),N=T),ae.vc(D,V),ae.normalize(),ee.vc(F,D),ee.normalize(),N!=C);){var Re=ae.xi(ee),ut=ae.Rh(ee),ht=!0;if(0>Re||0>ut&&Re==0||!this.Gv(V,D,F)||(B.N(F),ht=!1,++be,x=!0),ht){if(0<be)for(;(Re=0<m?p.Na(N):p.V(N))!=$;){if(p.D(Re,W),!this.Gv(W,V,B)){Re!=C&&this.Gv(W,V,F)&&this.Gv(W,D,F)&&(V.N(W),N=Re,ht=!1,++be);break}V.N(W),N=Re,ht=!1,++be}if(!ht)continue;if(0<be){for(N=0<m?p.Na(T):p.V(T),L=1;L<be;L++)ht=0<m?p.Na(N):p.V(N),p.pd(N,!0),N=ht;me.vc(D,V),be=pe*pe-(be=me.length())*be*.25,pe-(be=Math.sqrt(be))>.5*this.vk?(K.add(V,D),K.scale(.5),me.normalize(),me.cr(),fe.N(me),fe.scale(pe-be),K.add(fe),p.mf(T,K)):p.pd(T,!0),be=0}V.N(D),N=$}D.N(F),T=$,$=C,C=0<m?p.V($):p.Na($),Pe++,L=!1}if(0<be){for(N=0<m?p.Na(T):p.V(T),L=1;L<be;L++)ht=0<m?p.Na(N):p.V(N),p.pd(N,!0),N=ht;K.add(V,D),K.scale(.5),me.vc(D,V),be=pe*pe-(be=me.length())*be*.25,be=Math.sqrt(be),me.normalize(),me.cr(),fe.N(me),fe.scale(pe-be),K.add(fe),p.mf(T,K)}if(p.Ip(this.nA,!1,!1),!x)break}},c.prototype.xG=function(p,f){if(p.Ka(f)==1)return!0;var m=new h.l;return p.Sj(f,m),Math.max(m.S(),m.da())<.5*this.vk},c.prototype.wG=function(p){var f=new h.l;return p.A(f),Math.max(f.S(),f.da())<.5*this.vk},c.prototype.MV=function(p){for(var f=0,m=0,w=(p=h.wC.local().W(p,.25*this.vk,!1,this.Vb)).ea();m<w;m++)f=Math.max(p.Ka(m),f);return 32>f?(this.qq=!1,p):(this.qq=!0,h.Hg.Mk(p,this.ct,!1,!0,this.Vb))},c.prototype.zu=function(p,f){if(f=f.D(),this.Jd!=null&&this.Jd.length!==0){var m=new h.h;m.N(this.Jd[0]),m.Ct(this.sb,f),p.Mt(m);for(var w=1,x=this.Jd.length;w<x;w++)m.N(this.Jd[w]),m.Ct(this.sb,f),p.Di(m)}else{w=this.iE(),m=h.P.truncate((w+3)/4),w=.5*Math.PI/m,x=Math.cos(w);for(var $=Math.sin(w),T=new h.h,A=3;0<=A;A--){switch(T.na(0,this.sb),A){case 0:for(w=0;w<m;w++)p.zj(T.x+f.x,T.y+f.y),T.Bt(x,$);break;case 1:for(w=0;w<m;w++)p.zj(-T.y+f.x,T.x+f.y),T.Bt(x,$);break;case 2:for(w=0;w<m;w++)p.zj(-T.x+f.x,-T.y+f.y),T.Bt(x,$);break;default:for(p.qx(T.y+f.x,-T.x+f.y),w=1;w<m;w++)T.Bt(x,$),p.zj(T.y+f.x,-T.x+f.y)}this.Zq()}}},c.jx=function(p){return p.Dh(1,0),p},c.prototype.gX=function(p){return p.Dh(2,this.ra),p.hm(),p},c}();h.zK=a}(G||(G={})),function(h){var k=function(){function v(u){this.Da=u,this.g=new h.hd,this.ed=new h.ja(0)}return v.prototype.Mh=function(u,o,r){switch(o){case 0:if(u.v<r&&u.C<=r)break;return u.v>=r?1:-1;case 1:if(u.G<r&&u.H<=r)break;return u.G>=r?1:-1;case 2:if(u.v>=r&&u.C>r)break;return u.C<=r?1:-1;case 3:if(!(u.G>=r&&u.H>r))return u.H<=r?1:-1}return 0},v.prototype.uy=function(u,o){return u.K()==1736?this.wy(u,o):this.xy(u)},v.prototype.wy=function(u,o){if(this.Da.S()==0||this.Da.da()==0)return u.Ja();var r=new h.l;u.yc(r),this.Y=this.g.Ib(u);var n=new h.l,a=new h.l,c=new h.h,p=new h.h,f=[0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0];new h.hg;var w=new h.zb,x=new h.ja(0);x.Jb(Math.min(100,u.I()));for(var $=!1,T=0;!$&&4>T;T++){var A=!1,C=(1&T)!=0,N=0;switch(T){case 0:N=this.Da.v,A=r.v<=N&&r.C>=N;break;case 1:N=this.Da.G,A=r.G<=N&&r.H>=N;break;case 2:N=this.Da.C,A=r.v<=N&&r.C>=N;break;case 3:N=this.Da.H,A=r.G<=N&&r.H>=N}if(A)for($=!0,A=this.g.Ob(this.Y);A!=-1;){var L=-1,D=-1,F=this.g.Ya(A),V=F;do{var W=this.g.cc(V);W==null&&(W=w,this.g.D(V,c),W.Ec(c),this.g.D(this.g.V(V),p),W.Rc(p)),W.A(n);var K=this.Mh(n,T,N),B=0,ee=-1;if(K==-1){B=0<(W=W.fq(C,N,f,m))?this.g.Wl(V,m,W):0,B+=1;var ae=V,me=this.g.V(ae);for(W=0;W<B;W++){if(this.g.D(ae,c),this.g.D(me,p),(ee=this.g.cc(ae))==null&&((ee=w).Ec(c),ee.Rc(p)),ee.A(a),(ee=this.Mh(a,T,N))==-1){if(C)(ee=Math.abs(c.y-N))<(fe=Math.abs(p.y-N))?(c.y=N,this.g.mf(ae,c)):(p.y=N,this.g.mf(me,p));else{ee=Math.abs(c.x-N);var fe=Math.abs(p.x-N);ee<fe?(c.x=N,this.g.mf(ae,c)):(p.x=N,this.g.mf(me,p))}(ee=this.g.cc(ae))==null&&((ee=w).Ec(c),ee.Rc(p)),ee.A(a),ee=this.Mh(a,T,N)}fe=L,L=ee,D==-1&&(D=L),fe==0&&L==1||fe==1&&L==0||fe!=0||L!=0||x.add(ae),L==1&&($=!1),ee=ae=me,me=this.g.V(me)}}B==0&&(fe=L,L=K,D==-1&&(D=L),fe==0&&L==1||fe==1&&L==0||fe!=0||L!=0||x.add(V),L==1&&($=!1),ee=this.g.V(V)),V=ee}while(V!=F);for(D==0&&L==0&&x.add(F),W=0,L=x.size;W<L;W++)D=x.get(W),this.g.pd(D,!1);x.clear(!1),A=3>this.g.Ka(A)?this.g.ar(A):this.g.Sb(A)}}return $?u.Ja():(this.zB(),0<o&&this.Hy(o),this.g.Ke(this.Y))},v.prototype.xy=function(u){var o=new h.l,r=new h.l,n=[0,0,0,0,0,0,0,0,0],a=[0,0,0,0,0,0,0,0,0],c=new h.hg,p=u,f=new h.l;u.yc(f);for(var m=0;4>m;m++){var w=!1,x=(1&m)!=0,$=0;switch(m){case 0:$=this.Da.v,w=f.v<=$&&f.C>=$;break;case 1:$=this.Da.G,w=f.G<=$&&f.H>=$;break;case 2:$=this.Da.C,w=f.v<=$&&f.C>=$;break;case 3:$=this.Da.H,w=f.G<=$&&f.H>=$}if(w){w=p,p=u.Ja(),(w=w.Ha()).$i();for(var T,A=new h.h;w.ab();)for(var C,N=!0;w.Ia();){var L=w.ia();L.A(o);var D=this.Mh(o,m,$);if(D==-1){if(0<(D=L.fq(x,$,n,a))){var F=0;T=L.ac();for(var V=0;V<=D;V++)if(F!=(C=V<D?a[V]:1)){L.bh(F,C,c);var W=c.get();W.Ec(T),V<D&&(x?(A.x=n[V],A.y=$):(A.x=$,A.y=n[V]),W.Rc(A)),W.A(r);var K=this.Mh(r,m,$);if(K==-1){if(T=W.ac(),F=W.xc(),x)(K=Math.abs(T.y-$))<(B=Math.abs(F.y-$))?(T.y=$,W.Ec(T)):(F.y=$,W.Rc(F));else{K=Math.abs(T.x-$);var B=Math.abs(F.x-$);K<B?(T.x=$,W.Ec(T)):(F.x=$,W.Rc(F))}W.A(r),K=this.Mh(r,m,$)}T=W.xc(),F=C,(C=K)==1?(p.oc(W,N),N=!1):N=!0}}}else(C=D)==1?(p.oc(L,N),N=!1):N=!0}}}return p},v.prototype.zB=function(){this.ki=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.ki=this.g.Hd();for(var u=new h.h,o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))for(var r=this.g.Ya(o),n=0,a=this.g.Ka(o);n<a;n++,r=this.g.V(r))this.g.D(r,u),(this.Da.v==u.x||this.Da.C==u.x||this.Da.G==u.y||this.Da.H==u.y)&&(this.g.Sa(r,this.ki,this.ed.size),this.ed.add(r));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},v.prototype.Hy=function(u){for(var o=new h.h,r=new h.h,n=h.P.lg(2048,0),a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a)){var c=this.g.Ya(a),p=c;do{var f=this.g.V(p);this.g.D(p,o);var m=-1;if(o.x==this.Da.v?(this.g.D(f,r),r.x==this.Da.v&&(m=1)):o.x==this.Da.C&&(this.g.D(f,r),r.x==this.Da.C&&(m=1)),o.y==this.Da.G?(this.g.D(f,r),r.y==this.Da.G&&(m=0)):o.y==this.Da.H&&(this.g.D(f,r),r.y==this.Da.H&&(m=0)),m!=-1&&(m=h.h.ub(o,r),!(1>=(m=h.P.truncate(Math.min(Math.ceil(m/u),2048)))))){for(var w=1;w<m;w++)n[w-1]=1*w/m;this.g.Wl(p,n,m-1)}p=f}while(p!=c)}},v.prototype.Xl=function(u,o){var r=this.g.Hd(),n=new h.h,a=new h.ja(0);a.Jb(100);for(var c=this.g.Ob(this.Y);c!=-1;c=this.g.Sb(c))for(var p=this.g.Ya(c),f=0,m=this.g.Ka(c);f<m;f++){var w=this.g.V(p);this.g.D(p,n),(u?n.y==o:n.x==o)&&(this.g.D(w,n),(u?n.y==o:n.x==o)&&(this.g.Qa(p,r)!=1&&(a.add(p),this.g.Sa(p,r,1)),this.g.Qa(w,r)!=1&&(a.add(w),this.g.Sa(w,r,1)))),p=w}if(this.g.Ud(r),!(3>a.size)){var x=this;a.Wd(0,a.size,function(K,B){return x.Nh(K,B)}),r=new h.h,c=new h.h,p=new h.h,c.Sc();var $=-1;f=new h.ja(0),m=new h.ja(0),w=this.g.Hd();for(var T=this.g.Hd(),A=0,C=a.size;A<C;A++){var N=a.get(A);if(this.g.D(N,n),!n.rb(c)){if($!=-1){for(var L=$;L<A;L++){$=a.get(L);var D=this.g.V($);N=this.g.Na($);var F=!1;0>this.Nh($,D)&&(this.g.D(D,r),u?r.y==o:r.x==o)&&(f.add($),F=!0,this.g.Sa($,T,1)),0>this.Nh($,N)&&(this.g.D(N,r),u?r.y==o:r.x==o)&&(F||f.add($),this.g.Sa($,w,1))}for(L=0,F=f.size;L<F;L++){if($=f.get(L),N=this.g.Qa($,w),D=this.g.Qa($,T),N==1){N=this.g.Na($),this.g.D(N,p);var V=[0];if(V[0]=0,!p.rb(n)){var W=h.h.ub(c,p);V[0]=h.h.ub(p,n)/W,V[0]==0?V[0]=2220446049250313e-31:V[0]==1&&(V[0]=.9999999999999998),this.g.Wl(N,V,1),N=this.g.Na($),this.g.mf(N,n),m.add(N),this.g.Sa(N,w,1),this.g.Sa(N,T,-1)}}D==1&&(D=this.g.V($),this.g.D(D,p),(V=[0])[0]=0,p.rb(n)||(W=h.h.ub(c,p),V[0]=h.h.ub(c,n)/W,V[0]==0?V[0]=2220446049250313e-31:V[0]==1&&(V[0]=.9999999999999998),this.g.Wl($,V,1),N=this.g.V($),this.g.mf(N,n),m.add(N),this.g.Sa(N,w,-1),this.g.Sa(N,T,1)))}$=f,f=m,(m=$).clear(!1)}$=A,c.N(n)}}this.g.Ud(w),this.g.Ud(T)}},v.prototype.Pl=function(u,o){var r=new h.h,n=new h.ja(0);n.Jb(100);for(var a=this.g.Hd(),c=0,p=this.ed.size;c<p;c++){var f=this.ed.get(c);if(f!=-1){var m=this.g.V(f);this.g.D(f,r),(u?r.y==o:r.x==o)&&(this.g.D(m,r),(u?r.y==o:r.x==o)&&(this.g.Qa(f,a)!=-2&&(n.add(f),this.g.Sa(f,a,-2)),this.g.Qa(m,a)!=-2&&(n.add(m),this.g.Sa(m,a,-2))))}}if(n.size!=0){var w=this;for(n.Wd(0,n.size,function(B,ee){return w.Nh(B,ee)}),c=0,p=n.size;c<p;c++){var x=n.get(c);this.g.Sa(x,a,c)}f=new h.h,(m=new h.h).Sc();var $=-1;for(c=0,p=n.size;c<p;c++)if((x=n.get(c))!=-1&&(this.g.D(x,r),!r.rb(m))){if($!=-1)for(;;){x=!1;for(var T=1<c-$?c-1:c,A=$;A<T;A++){var C=n.get(A);if(C!=-1){var N=-1,L=this.g.V(C);0>this.Nh(C,L)&&(this.g.D(L,f),u?f.y==o:f.x==o)&&(N=L),L=-1;var D=this.g.Na(C);if(0>this.Nh(C,D)&&(this.g.D(D,f),u?f.y==o:f.x==o)&&(L=D),N!=-1&&L!=-1)this.Lh(C,n,a),this.g.pd(C,!1),this.Lh(N,n,a),this.g.pd(N,!1),x=!0;else if(N!=-1||L!=-1){for(D=A+1;D<c;D++){var F=n.get(D);if(F!=-1){var V=this.g.V(F),W=-1;0>this.Nh(F,V)&&(this.g.D(V,f),u?f.y==o:f.x==o)&&(W=V),V=this.g.Na(F);var K=-1;if(0>this.Nh(F,V)&&(this.g.D(V,f),u?f.y==o:f.x==o)&&(K=V),W!=-1&&K!=-1){this.Lh(F,n,a),this.g.pd(F,!1),this.Lh(W,n,a),this.g.pd(W,!1),x=!0;break}if(N!=-1&&K!=-1){this.zt(n,C,N,F,K,a),x=!0;break}if(L!=-1&&W!=-1){this.zt(n,F,W,C,L,a),x=!0;break}}}if(x)break}}}if(!x)break}$=c,m.N(r)}}this.g.Ud(a)},v.prototype.Lh=function(u,o,r){r=this.g.Qa(u,r),o.set(r,-1),r=this.g.Qa(u,this.ki),this.ed.set(r,-1),(o=this.g.cd(u))!=-1&&this.g.Ya(o)==u&&(this.g.Kf(o,-1),this.g.Xg(o,-1))},v.prototype.zt=function(u,o,r,n,a,c){this.g.Cc(o,n),this.g.Dc(n,o),this.g.Dc(r,a),this.g.Cc(a,r),this.Lh(n,u,c),this.g.ni(n,!1),this.Lh(a,u,c),this.g.ni(a,!0)},v.prototype.Oy=function(){for(var u=0,o=this.ed.size;u<o;u++){var r=this.ed.get(u);r!=-1&&this.g.bj(r,-1)}for(var n=0,a=0,c=this.g.Ob(this.Y);c!=-1;){var p=this.g.Ya(c);if(p==-1||c!=this.g.cd(p)){var f=c;c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)}else{r=p,f=0;do this.g.bj(r,c),f++,r=this.g.V(r);while(r!=p);2>=f?(r=this.g.Qa(p,this.ki),this.ed.set(r,-1),p=this.g.pd(p,!1),f==2&&(r=this.g.Qa(p,this.ki),this.ed.set(r,-1),this.g.pd(p,!1)),f=c,c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)):(this.g.ep(c,!1),this.g.Xg(c,this.g.Na(p)),this.g.Wj(c,f),a+=f,n++,c=this.g.Sb(c))}}for(u=0,o=this.ed.size;u<o;u++)if((r=this.ed.get(u))!=-1&&(c=this.g.cd(r))==-1){c=this.g.wf(this.Y,-1),f=0,p=r;do this.g.bj(r,c),f++,r=this.g.V(r);while(r!=p);2>=f?(r=this.g.Qa(p,this.ki),this.ed.set(r,-1),p=this.g.pd(p,!1),f==2&&(0<=(r=this.g.Qa(p,this.ki))&&this.ed.set(r,-1),this.g.pd(p,!1)),f=c,this.g.Kf(f,-1),this.g.br(f)):(this.g.mn(c,!0),this.g.Wj(c,f),this.g.Kf(c,p),this.g.Xg(c,this.g.Na(p)),this.g.ep(c,!1),a+=f,n++)}for(this.g.Tl(this.Y,n),this.g.Uj(this.Y,a),u=0,o=this.g.ld;o!=-1;o=this.g.ve(o))u+=this.g.I(o);this.g.VB(u)},v.vy=function(u,o,r){return new v(o).uy(u,r)},v.clip=function(u,o,r,n){if(u.B())return u;if(o.B())return u.Ja();if((r=u.K())==33)return n=u.D(),o.contains(n)?u:u.Ja();if(r==197)return n=new h.l,u.A(n),n.Fa(o)?(o=new h.Gh,u.copyTo(o),o.Yo(n),o):u.Ja();var a=new h.l;if(u.yc(a),o.contains(a))return u;if(!o.isIntersecting(a))return u.Ja();if((a=u.Cb)!=null&&(a=a.Fk)!=null){if((a=a.So(o))==1){if(r!=1736)throw h.i.Ra();return(u=new h.Ea(u.description)).vp(o),u}if(a==0)return u.Ja()}switch(r){case 550:r=null,a=u.I();for(var c=u.vb(0),p=0,f=0;f<a;f++)n=new h.h,c.uc(2*f,n),o.contains(n)||(p==0&&(r=u.Ja()),p<f&&r.Gd(u,p,f),p=f+1);return 0<p&&r.Gd(u,p,a),p==0?u:r;case 1736:case 1607:return v.vy(u,o,n);default:throw h.i.Ra()}},v.prototype.Nh=function(u,o){var r=new h.h;return this.g.D(u,r),u=new h.h,this.g.D(o,u),r.compare(u)},v}();h.Vd=k}(G||(G={})),function(h){var k=function(){function v(u,o){this.Da=u,this.g=new h.hd,this.ed=new h.ja(0),this.nd=o}return v.prototype.Mh=function(u,o,r){switch(o){case 0:if(u.v<r&&u.C<=r)break;return u.v>=r?1:-1;case 1:if(u.G<r&&u.H<=r)break;return u.G>=r?1:-1;case 2:if(u.v>=r&&u.C>r)break;return u.C<=r?1:-1;case 3:if(!(u.G>=r&&u.H>r))return u.H<=r?1:-1}return 0},v.prototype.uy=function(u,o){return u.K()==1736?this.wy(u,o):this.xy(u)},v.prototype.wy=function(u,o){if(this.Da.S()==0||this.Da.da()==0)return u.Ja();var r=new h.l;u.yc(r),this.Y=this.g.Ib(u);var n=new h.l,a=new h.l,c=new h.h,p=new h.h,f=[0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0],w=new h.zb,x=new h.ja(0);x.Jb(256);for(var $=!1,T=0;!$&&4>T;T++){var A=!1,C=(1&T)!=0,N=0;switch(T){case 0:N=this.Da.v,A=r.v<=N&&r.C>=N;break;case 1:N=this.Da.G,A=r.G<=N&&r.H>=N;break;case 2:N=this.Da.C,A=r.v<=N&&r.C>=N;break;case 3:N=this.Da.H,A=r.G<=N&&r.H>=N}if(A)for($=!0,A=this.g.Ob(this.Y);A!=-1;){var L=!0,D=-1,F=-1,V=this.g.Ya(A),W=V;do{var K=this.g.cc(W);K==null&&(K=w,this.g.D(W,c),K.Ec(c),this.g.D(this.g.V(W),p),K.Rc(p)),K.A(n);var B=this.Mh(n,T,N),ee=0,ae=-1;if(B==-1){ee=0<(K=K.fq(C,N,f,m))?this.g.zX(W,m,K):0,ee+=1;var me=W,fe=this.g.V(me);for(K=0;K<ee;K++){if(this.g.D(me,c),this.g.D(fe,p),(ae=this.g.cc(me))==null&&((ae=w).Ec(c),ae.Rc(p)),ae.A(a),(ae=this.Mh(a,T,N))==-1){if(C)(ae=Math.abs(c.y-N))<(pe=Math.abs(p.y-N))?(c.y=N,this.g.mf(me,c)):(p.y=N,this.g.mf(fe,p));else{ae=Math.abs(c.x-N);var pe=Math.abs(p.x-N);ae<pe?(c.x=N,this.g.mf(me,c)):(p.x=N,this.g.mf(fe,p))}(ae=this.g.cc(me))==null&&((ae=w).Ec(c),ae.Rc(p)),ae.A(a),ae=this.Mh(a,T,N)}pe=D,D=ae,F==-1&&(F=D),pe==0&&D==1||pe==1&&D==0||pe!=0||D!=0||x.add(me),D==1&&(L=$=!1),ae=me=fe,fe=this.g.V(fe)}}if(ee==0&&(pe=D,D=B,F==-1&&(F=D),pe==0&&D==1||pe==1&&D==0||pe!=0||D!=0||x.add(W),D==1&&(L=$=!1),ae=this.g.V(W)),W=ae,256<=x.size){for(K=1,B=x.size-1;K<B;K++)ee=x.get(K),this.g.pd(ee,!1);x.set(1,x.Gc()),x.Ch(2)}}while(W!=V);if(!L)for(F==0&&D==0&&x.add(V),K=0,B=x.size;K<B;K++)ee=x.get(K),this.g.pd(ee,!1);x.clear(!1),A=L||this.g.Ka(A)==0?this.g.ar(A):this.g.Sb(A)}}return $?u.Ja():(this.zB(),0<o&&this.Hy(o),this.g.Ke(this.Y))},v.prototype.xy=function(u){var o=new h.l,r=new h.l,n=[0,0,0,0,0,0,0,0,0],a=[0,0,0,0,0,0,0,0,0],c=new h.hg,p=u,f=new h.l;u.yc(f);for(var m=new h.h,w=new h.h,x=null,$=null,T=0;4>T;T++){var A=!1,C=(1&T)!=0,N=0;switch(T){case 0:N=this.Da.v,A=f.v<=N&&f.C>=N;break;case 1:N=this.Da.G,A=f.G<=N&&f.H>=N;break;case 2:N=this.Da.C,A=f.v<=N&&f.C>=N;break;case 3:N=this.Da.H,A=f.G<=N&&f.H>=N}if(A)for(A=p,p=u.Ja(),(A=A.Ha()).$i();A.ab();)for(var L,D=!0;A.Ia();){var F=A.ia();F.A(o);var V=this.Mh(o,T,N);if(V==-1){if(0<(V=F.fq(C,N,n,a))){var W=0;F.$p(m);for(var K=0;K<=V;K++)if(W!=(L=K<V?a[K]:1)){F.bh(W,L,c);var B=c.get();B.Ec(m),K<V&&(C?(w.x=n[K],w.y=N):(w.x=N,w.y=n[K]),B.Rc(w)),B.A(r);var ee=this.Mh(r,T,N);ee==-1&&(x==null&&(x=new h.h),$==null&&($=new h.h),B.$p(x),B.Ur($),C?(W=Math.abs(x.y-N))<(ee=Math.abs($.y-N))?(x.y=N,B.Ec(x)):($.y=N,B.Rc($)):(W=Math.abs(x.x-N))<(ee=Math.abs($.x-N))?(x.x=N,B.Ec(x)):($.x=N,B.Rc($)),B.A(r),ee=this.Mh(r,T,N)),B.Ur(m),W=L,(L=ee)==1?(p.oc(B,D),D=!1):D=!0}}}else(L=V)==1?(p.oc(F,D),D=!1):D=!0}}return p},v.prototype.zB=function(){this.ki=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.ki=this.g.Hd();for(var u=new h.h,o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))for(var r=this.g.Ya(o),n=0,a=this.g.Ka(o);n<a;n++,r=this.g.V(r))this.g.D(r,u),(this.Da.v==u.x||this.Da.C==u.x||this.Da.G==u.y||this.Da.H==u.y)&&(this.g.Sa(r,this.ki,this.ed.size),this.ed.add(r));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},v.prototype.Hy=function(u){for(var o=new h.h,r=new h.h,n=null,a=null,c=h.P.lg(2048,0),p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p)){var f=this.g.Ya(p),m=f;do{var w=this.g.V(m);this.g.D(m,o);var x=-1;if(o.x==this.Da.v?(this.g.D(w,r),r.x==this.Da.v&&(x=1)):o.x==this.Da.C&&(this.g.D(w,r),r.x==this.Da.C&&(x=1)),o.y==this.Da.G?(this.g.D(w,r),r.y==this.Da.G&&(x=0)):o.y==this.Da.H&&(this.g.D(w,r),r.y==this.Da.H&&(x=0)),x!=-1){if(n==null&&(n=new h.h),a==null&&(a=new h.h),n.N(o),a.na(0,0),x==0){var $=o.x-this.Da.v;a.x=h.mc.sign(r.x-o.x),n.x=u*h.mc.Dn(Math.floor(Math.abs($/u)),$)+this.Da.v,0>n.x&&(n.x+=u)}else $=o.y-this.Da.G,a.y=h.mc.sign(r.y-o.y),n.y=u*h.mc.Dn(Math.floor(Math.abs($/u)),$)+this.Da.G,0>n.y&&(n.y+=u);$=x!=0?r.y-o.y:r.x-o.x;var T=Math.abs($);if(65536<T/u)throw h.i.ga("internal error");if(0<T){T=h.P.truncate(T/u)+2,c.length<T&&(c=h.P.lg(T));for(var A=T=0;;A++){var C=new h.h;if(C.x=n.x+a.x*A*u,C.y=n.y+a.y*A*u,1<=(C=(x!=0?C.y-o.y:C.x-o.x)/$))break;0>=C||(c[T]=C,T++)}T!=0&&this.g.Wl(m,c,T)}}m=w}while(m!=f)}},v.prototype.Xl=function(u,o){for(var r=-1,n=new h.h,a=null,c=this.g.Ob(this.Y);c!=-1;c=this.g.Sb(c))for(var p=this.g.Ya(c),f=0,m=this.g.Ka(c);f<m;f++){var w=this.g.V(p);this.g.D(p,n),(u?n.y==o:n.x==o)&&(this.g.D(w,n),(u?n.y==o:n.x==o)&&(r==-1&&(r=this.g.Hd()),a==null&&(a=new h.ja(0)).Jb(100),this.g.Qa(p,r)!=1&&(a.add(p),this.g.Sa(p,r,1)),this.g.Qa(w,r)!=1&&(a.add(w),this.g.Sa(w,r,1)))),p=w}if(r!=-1&&this.g.Ud(r),!(a==null||3>a.size)){var x=this;a.Wd(0,a.size,function(K,B){return x.Nh(K,B)}),r=new h.h,c=new h.h,p=new h.h,c.Sc();var $=-1;f=new h.ja(0),m=new h.ja(0),w=null;for(var T=this.g.Hd(),A=this.g.Hd(),C=0,N=a.size;C<N;C++){var L=a.get(C);if(this.g.D(L,n),!n.rb(c)){if($!=-1){for(var D=$;D<C;D++){$=a.get(D);var F=this.g.V($);L=this.g.Na($);var V=!1;this.g.D(F,r),0>c.compare(r)&&(u?r.y==o:r.x==o)&&(f.add($),V=!0,this.g.Sa($,A,1)),this.g.D(L,r),0>c.compare(r)&&(u?r.y==o:r.x==o)&&(V||f.add($),this.g.Sa($,T,1))}for(D=0,V=f.size;D<V;D++){if($=f.get(D),L=this.g.Qa($,T),F=this.g.Qa($,A),L==1&&(L=this.g.Na($),this.g.D(L,p),!p.rb(n))){w==null&&(w=[]);var W=h.h.ub(c,p);w[0]=h.h.ub(p,n)/W,w[0]==0?w[0]=2220446049250313e-31:w[0]==1&&(w[0]=.9999999999999998),this.g.Wl(L,w,1),L=this.g.Na($),this.g.mf(L,n),m.add(L),this.g.Sa(L,T,1),this.g.Sa(L,A,-1)}F==1&&(F=this.g.V($),this.g.D(F,p),p.rb(n)||(w==null&&(w=[]),W=h.h.ub(c,p),w[0]=h.h.ub(c,n)/W,w[0]==0?w[0]=2220446049250313e-31:w[0]==1&&(w[0]=.9999999999999998),this.g.Wl($,w,1),L=this.g.V($),this.g.mf(L,n),m.add(L),this.g.Sa(L,T,-1),this.g.Sa(L,A,1)))}$=f,f=m,(m=$).clear(!1)}$=C,c.N(n)}}this.g.Ud(T),this.g.Ud(A)}},v.prototype.Pl=function(u,o){for(var r=new h.h,n=null,a=-1,c=0,p=this.ed.size;c<p;c++){var f=this.ed.get(c);if(f!=-1){var m=this.g.V(f);this.g.D(f,r),(u?r.y==o:r.x==o)&&(this.g.D(m,r),(u?r.y==o:r.x==o)&&(a==-1&&(a=this.g.Hd()),n==null&&(n=new h.ja(0)).Jb(100),this.g.Qa(f,a)!=-2&&(n.add(f),this.g.Sa(f,a,-2)),this.g.Qa(m,a)!=-2&&(n.add(m),this.g.Sa(m,a,-2))))}}if(n==null)a!=-1&&this.g.Ud(a);else{var w=this;for(n.Wd(0,n.size,function(B,ee){return w.Nh(B,ee)}),c=0,p=n.size;c<p;c++){var x=n.get(c);this.g.Sa(x,a,c)}f=new h.h,(m=new h.h).Sc();var $=-1;for(c=0,p=n.size;c<p;c++)if((x=n.get(c))!=-1&&(this.g.D(x,r),!r.rb(m))){if($!=-1)for(;;){x=!1;for(var T=1<c-$?c-1:c,A=$;A<T;A++){var C=n.get(A);if(C!=-1){var N=-1,L=this.g.V(C);this.g.D(L,f),0>m.compare(f)&&(u?f.y==o:f.x==o)&&(N=L),L=-1;var D=this.g.Na(C);if(this.g.D(D,f),0>m.compare(f)&&(u?f.y==o:f.x==o)&&(L=D),N!=-1&&L!=-1)this.Lh(C,n,a),this.g.pd(C,!1),this.Lh(N,n,a),this.g.pd(N,!1),x=!0;else if(N!=-1||L!=-1){for(D=A+1;D<c;D++){var F=n.get(D);if(F!=-1){var V=this.g.V(F),W=-1;this.g.D(V,f),0>m.compare(f)&&(u?f.y==o:f.x==o)&&(W=V),V=this.g.Na(F);var K=-1;if(this.g.D(V,f),0>m.compare(f)&&(u?f.y==o:f.x==o)&&(K=V),W!=-1&&K!=-1){this.Lh(F,n,a),this.g.pd(F,!1),this.Lh(W,n,a),this.g.pd(W,!1),x=!0;break}if(N!=-1&&K!=-1){this.zt(n,C,N,F,K,a),x=!0;break}if(L!=-1&&W!=-1){this.zt(n,F,W,C,L,a),x=!0;break}}}if(x)break}}}if(!x)break}$=c,m.N(r)}this.g.Ud(a)}},v.prototype.Lh=function(u,o,r){r=this.g.Qa(u,r),o.set(r,-1),r=this.g.Qa(u,this.ki),this.ed.set(r,-1),(o=this.g.cd(u))!=-1&&this.g.Ya(o)==u&&(this.g.Kf(o,-1),this.g.Xg(o,-1))},v.prototype.zt=function(u,o,r,n,a,c){this.g.Cc(o,n),this.g.Dc(n,o),this.g.Dc(r,a),this.g.Cc(a,r),this.Lh(n,u,c),this.g.ni(n,!1),this.Lh(a,u,c),this.g.ni(a,!0)},v.prototype.Oy=function(){for(var u=0,o=this.ed.size;u<o;u++){var r=this.ed.get(u);r!=-1&&this.g.bj(r,-1)}for(var n=0,a=0,c=this.g.Ob(this.Y);c!=-1;){var p=this.g.Ya(c);if(p==-1||c!=this.g.cd(p)){var f=c;c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)}else{r=p,f=0;do this.g.bj(r,c),f++,r=this.g.V(r);while(r!=p);this.g.ep(c,!1),this.g.Xg(c,this.g.Na(p)),this.g.Wj(c,f),a+=f,n++,c=this.g.Sb(c)}}for(u=0,o=this.ed.size;u<o;u++)if((r=this.ed.get(u))!=-1&&(c=this.g.cd(r))==-1){c=this.g.wf(this.Y,-1),f=0,p=r;do this.g.bj(r,c),f++,r=this.g.V(r);while(r!=p);2>=f?(r=this.g.Qa(p,this.ki),this.ed.set(r,-1),p=this.g.pd(p,!1),f==2&&(0<=(r=this.g.Qa(p,this.ki))&&this.ed.set(r,-1),this.g.pd(p,!1)),f=c,this.g.Kf(f,-1),this.g.br(f)):(this.g.mn(c,!0),this.g.Wj(c,f),this.g.Kf(c,p),this.g.Xg(c,this.g.Na(p)),this.g.ep(c,!1),a+=f,n++)}for(this.g.Tl(this.Y,n),this.g.Uj(this.Y,a),u=0,o=this.g.ld;o!=-1;o=this.g.ve(o))u+=this.g.I(o);this.g.VB(u)},v.vy=function(u,o,r,n){return new v(o,n).uy(u,r)},v.clip=function(u,o,r,n,a){return v.Pu(u,o,null,r,n,a)},v.Pu=function(u,o,r,n,a,c){var p=u.K();if(p==33)return a=u.D(),o.contains(a)?u:u.Ja();if(p==197)return a=new h.l,u.A(a),a.Fa(o)?(o=new h.Gh,u.copyTo(o),o.Yo(a),o):u.Ja();if(u.B())return u;if(o.B())return u.Ja();var f=new h.l;if(u.yc(f),o.contains(f))return u;if(!o.isIntersecting(f))return u.Ja();if((r!=null||isNaN(n))&&h.ta.ny(r,o,!1),!h.ba.yj(p))throw h.i.O();if((r=u.Cb)!=null&&(r=r.Fk)!=null){if((r=r.So(o))==1){if(p!=1736)throw h.i.ga("internal error");return(u=new h.Ea(u.description)).vp(o),u}if(r==0)return u.Ja()}switch(p){case 550:for(c=null,p=u.I(),r=u.vb(0),n=0,a=new h.h,f=0;f<p;f++)r.uc(2*f,a),o.contains(a)||(n==0&&(c=u.Ja()),n<f&&c.Gd(u,n,f),n=f+1);return 0<n&&c.Gd(u,n,p),n==0?u:c;case 1736:case 1607:return v.vy(u,o,a,c);default:throw h.i.ga("internal error")}},v.prototype.Nh=function(u,o){var r=new h.h;return this.g.D(u,r),u=new h.h,this.g.D(o,u),r.compare(u)},v}();h.si=k}(G||(G={})),function(h){var k=new h.h,v=function(){function o(r,n,a,c,p){this.Rm=new h.h,this.Dk=new h.h,this.Qi=new h.h,this.g=r,this.Bw=a,this.oo=c,this.Rm=n,this.Al=p,this.Dk.Sc(),this.Qi.Sc()}return o.prototype.pE=function(r){this.g.D(r,this.Dk),r=h.P.truncate((this.Dk.x-this.Rm.x)*this.oo+.5);var n=h.P.truncate((this.Dk.y-this.Rm.y)*this.oo+.5);return u.bG(r,n)},o.prototype.ez=function(r){return this.g.Qa(r,this.Al)},o.prototype.Ky=function(r,n){return this.g.D(r,this.Dk),this.g.D(n,this.Qi),u.Dv(this.Dk.x,this.Dk.y,this.Qi.x,this.Qi.y,this.Bw)},o}();h.gY=function(){};var u=function(){function o(){this.Rm=new h.h,this.rq=[0,0,0,0],this.ys=[0,0,0,0],this.ro=this.Al=-1}return o.aQ=function(r,n){var a=new o;return a.g=r,a.ra=n,a.Bw=n*n,a.aw=2*n,a.oo=1/a.aw,a.tO()},o.Dv=function(r,n,a,c,p){return(r-=a)*r+(n-=c)*n<=p},o.bG=function(r,n){return h.P.Uh(n,h.P.Uh(r))},o.prototype.vO=function(r,n){this.g.Hc(r,k);for(var a=(k.y-this.Rm.y)*this.oo,c=h.P.truncate((k.x-this.Rm.x)*this.oo),p=h.P.truncate(a),f=a=0;1>=f;f+=1)for(var m=0;1>=m;m+=1){var w=o.bG(c+f,p+m),x=this.zl.iR(w);x!=-1&&(this.rq[a]=x,this.ys[a]=w,a++)}for(c=a-1;1<=c;c--)for(x=this.rq[c],p=c-1;0<=p;p--)if(x==this.rq[p]){this.ys[p]=-1,c!=--a&&(this.ys[c]=this.ys[a],this.rq[c]=this.rq[a]);break}for(p=0;p<a;p++)this.wO(r,this.ys[p],k,this.rq[p],n)},o.prototype.wO=function(r,n,a,c,p){for(var f=new h.h;c!=-1;c=this.zl.wR(c)){var m=this.zl.ka(c);r==m||n!=-1&&this.g.Qa(m,this.Al)!=n||(this.g.Hc(m,f),o.Dv(a.x,a.y,f.x,f.y,this.Bw)&&p.add(c))}},o.prototype.Zm=function(r,n,a){var c=this.g.Qa(r,this.ro),p=this.g.Qa(n,this.ro);return c==-1&&(c=this.Ad.Qh(),this.Ad.addElement(c,r),this.g.Sa(r,this.ro,c)),p==-1?this.Ad.addElement(c,n):this.Ad.By(c,p),this.g.Sa(n,this.ro,-2),n=this.OT(r,n),a&&(a=this.lw.pE(r),this.g.Sa(r,this.Al,a)),n},o.MT=function(r,n,a){r.Nb(n),a=r;var c=new h.h;o.NT(r.D(),n.D(),c),a.Db(c)},o.NT=function(r,n,a){var c=r.x;r.x!=n.x&&(c=(1*r.x+1*n.x)/2);var p=r.y;r.y!=n.y&&(p=(1*r.y+1*n.y)/2),a.na(c,p)},o.prototype.OT=function(r,n){var a=new h.h;this.g.D(r,a);var c=new h.h;this.g.D(n,c);var p=this.g.VF(r),f=p+(n=this.g.VF(n)),m=0,w=a.x;a.x!=c.x&&(w=(a.x*p+c.x*n)/f,m++);var x=a.y;return a.y!=c.y&&(x=(a.y*p+c.y*n)/f,m++),0<m&&this.g.Db(r,w,x),this.g.jX(r,f),m!=0},o.prototype.tO=function(){var r=this.g.gd,n=this.g.AF();for(this.Rm=n.hz(),n=Math.max(n.da(),n.S())/2147483646,this.aw<n&&(this.aw=n,this.oo=1/this.aw),this.Ad=new h.bu,this.Ad.At(h.P.truncate(this.g.gd/3+1)),this.Ad.hn(h.P.truncate(this.g.gd/3+1)),this.Al=this.g.Hd(),this.ro=this.g.Hd(),this.lw=new v(this.g,this.Rm,this.Bw,this.oo,this.Al),this.zl=new h.WK(h.P.truncate(4*r/3),this.lw),this.zl.qW(this.g.gd),r=!1,n=this.g.ld;n!=-1;n=this.g.ve(n))for(var a=this.g.Ob(n);a!=-1;a=this.g.Sb(a))for(var c=this.g.Ya(a),p=0,f=this.g.Ka(a);p<f;p++){var m=this.lw.pE(c);this.g.Sa(c,this.Al,m),this.zl.addElement(c,m),c=this.g.V(c)}var w=new h.ja(0);for(w.Jb(10),n=this.g.ld;n!=-1;n=this.g.ve(n))for(a=this.g.Ob(n);a!=-1;a=this.g.Sb(a))for(c=this.g.Ya(a),p=0,f=this.g.Ka(a);p<f;p++){if(this.g.Qa(c,this.ro)!=-2)for(m=this.g.Qa(c,this.Al),this.zl.kd(c,m);this.vO(c,w),w.size!=0;){m=!1;for(var x=0,$=w.size;x<$;x++){var T=w.get(x),A=this.zl.ka(T);this.zl.wd(T),m=this.Zm(c,A,x+1==$)||m}if(r=r||m,w.clear(!1),!m)break}c=this.g.V(c)}return r&&this.nN(),this.lw=this.zl=null,this.g.Ud(this.Al),this.g.Ud(this.ro),r},o.prototype.nN=function(){for(var r=new h.h,n=this.Ad.je;n!=-1;n=this.Ad.lz(n)){var a=this.Ad.sc(n);for(this.g.D(this.Ad.ka(a),r),a=this.Ad.lb(a);a!=-1;a=this.Ad.lb(a))this.g.mf(this.Ad.ka(a),r)}},o}();h.Zt=u}(G||(G={})),function(h){var k=function(){function v(u){u===void 0&&(u=null),this.yg=null,this.Pb=!1,this.yg=u===null?[]:u}return v.prototype.copyTo=function(u){if(u.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");for(var o=0;o<this.yg.length;o++)u.yg.push(this.yg[o].Pf())},v.prototype.count=function(){return this.yg.length},v.prototype.add=function(u){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.yg.push(u.Pf())},v.prototype.clear=function(){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.yg.length=0},v.prototype.remove=function(u){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.yg.splice(u,1)},v.prototype.ig=function(){var u=new v;return this.copyTo(u),u},v.prototype.Pf=function(){return this.ig()},v.prototype.transform=function(u,o,r,n){if(u.length<o)throw h.i.ga("invalid Argument");var a=r;for(r=0;r<this.yg.length;r++){var c=this.yg[r];if(c.sm()!=null){var p=c.Vn,f=p?1:0,m=p?c.sm().getGeogcs2():c.sm().getGeogcs1();if(m=a/(m=m.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(m-1))for(a=0;a<o;a++)u[a][0]*=m,u[a][1]*=m;h.EC.geogToGeog(c.sm(),o,u,null,f),a=(p?c.sm().getGeogcs1():c.sm().getGeogcs2()).getUnit().getUnitFactor()}}if(m=a/n,3552713678800501e-30<Math.abs(m-1))for(a=0;a<o;a++)u[a][0]*=m,u[a][1]*=m;return o},v.prototype.Nb=function(u){if(u==this)return!0;if(!(u instanceof v)||this.yg.length!=u.yg.length)return!1;for(var o=0;o<this.yg.length;o++)if(!this.yg[o].Nb(u.yg[o]))return!1;return!0},v.prototype.hx=function(){this.Pb=!0},v.prototype.toString=function(){for(var u="CGT ("+this.count()+") ",o=0,r=this.count();o<r;++o)u+=this.yg[o].toString()+", ";return 200<u.length?u.substring(0,197)+"... ("+u.length.toString()+" characters)":u},v.create=function(){return new v},v}();h.pC=k}(G||(G={})),function(h){var k,v=Math.PI,u=2*Math.PI,o=Math.PI/2,r=function(){function c(){}return c.LO=function(p,f){var m=new c;return m.x=p,m.y=f,m.type=0,m.Vh=0,m},c.bl=function(p){var f=new c;return f.x=p.x,f.y=p.y,f.type=0,f.Vh=0,f},c.KO=function(p){var f=new c;return f.x=p.x,f.y=p.y,f.type=p.type,f.Vh=p.Vh,f},c.Qd=function(p,f,m){var w=new c;return w.x=p.x+f*Math.cos(m),w.y=p.y+f*Math.sin(m),w.type=p.type,w.Vh=p.Vh,w},c.Ru=function(p,f){var m=new c;return m.x=.5*(p.x+f.x),m.y=.5*(p.y+f.y),m.type=p.type,m.Vh=p.Vh,m},c.LE=function(p,f){var m=new c;return m.x=p.x+.001*(f.x-p.x),m.y=p.y+.001*(f.y-p.y),m.type=p.type,m.Vh=p.Vh,m},c}(),n=function(){};(k=h.YK||(h.YK={}))[k.Round=0]="Round",k[k.Bevel=1]="Bevel",k[k.Miter=2]="Miter",k[k.Square=3]="Square";var a=function(){function c(p){this.HA=this.Zb=this.wg=null,this.nd=p}return c.W=function(p,f,m,w,x,$){if(p==null||1>p.Eb())throw h.i.O();return f==0||p.B()?p:(($=new c($)).lo=p,$.La=f,$.ra=x,$.Li=m,$.wA=w,$.Px())},c.prototype.XL=function(){var p=this.lo,f=p.ac(),m=p.xc(),w=new h.h;return w.vc(m,f),w.normalize(),w.Iv(),w.scale(this.La),f.add(w),m.add(w),w=p.Ja(),p.Ec(f),p.Rc(m),w},c.prototype.WL=function(){var p=this.lo;if(0<this.La&&this.Li!=2){var f=new h.Ea;return f.bd(p,!1),this.lo=f,this.Px()}return(p=new h.Gh(p.aa)).X(this.La,this.La),p},c.prototype.lJ=function(p,f,m,w){return(f.x-p.x)*(w.x-m.x)+(f.y-p.y)*(w.y-m.y)},c.prototype.hc=function(p,f){if(f===void 0)this.Zb.push(p),this.gf++;else if(this.gf==0)this.hc(p);else{var m=this.Cw,w=this.wg[f==0?m-1:f-1],x=this.wg[f],$=this.lJ(w,x,this.Zb[this.gf-1],p);0<$?this.hc(p):0>$&&(0<this.lJ(w,x,x,this.Zb[this.gf-1])?(x=this.wg[f==0?m-2:f==1?m-1:f-2],m=r.Qd(w,this.La,Math.atan2(w.y-x.y,w.x-x.x)-o),this.Zb[this.gf-1]=m,this.Li==1||this.Li==2?(m=r.Ru(m,w),this.hc(m),m=r.Qd(w,this.La,this.Kv+o),(w=r.Ru(m,w)).type|=256,this.hc(w)):(m=r.Qd(w,this.La,this.Kv+o)).type|=256,this.hc(m),this.hc(p,f)):(m=r.Qd(x,this.La,this.Kv+o),this.hc(m),this.Li==1||this.Li==2?(m=r.Ru(m,x),this.hc(m),m=r.Qd(x,this.La,this.Wz-o),(w=r.Ru(m,x)).type|=256,this.hc(w)):(m=r.Qd(x,this.La,this.Wz-o)).type|=256,this.hc(m)))}},c.prototype.eE=function(){var p,f=this.Cw;this.gf=0;var m=.5*this.ra,w=0,x=0;for(p=0;p<f;p++){var $=this.wg[p],T=p==0?this.wg[f-1]:this.wg[p-1],A=p==f-1?this.wg[0]:this.wg[p+1],C=T.x-$.x,N=T.y-$.y,L=A.x-$.x,D=A.y-$.y,F=Math.atan2(N,C),V=Math.atan2(D,L);if(this.Kv=F,this.Wz=V,p==0&&(w=F,x=V),C=C*D-L*N,N=V,V<F&&(V+=u),0<C*this.La)this.Li==1||this.Li==2?(F=r.Qd($,this.La,F+o),this.hc(F),F=r.LE($,F),this.hc(F),F=r.Qd($,this.La,V-o),($=r.LE($,F)).type|=256,this.hc($),this.hc(F)):(C=.5*(V-F),C=this.La/Math.abs(Math.sin(C)),F=r.Qd($,C,.5*(F+V)),this.hc(F,p));else if((512&$.type)!=0){for(C=1-m/Math.abs(this.La),T=1,A=0>this.La?-v:v,-1<C&&1>C&&(.017453292519943295>(N=2*Math.acos(C))&&(N=.017453292519943295),1<(T=h.P.truncate(v/N+1.5))&&(A/=T)),N=F+o,F=r.Qd($,this.La,N),p==0&&(F.type|=1024),this.hc(F,p),C=this.La/Math.cos(A/2),N+=A/2,(F=r.Qd($,C,N)).type|=1024,this.hc(F);0<--T;)N+=A,(F=r.Qd($,C,N)).type|=1024,this.hc(F);(F=r.Qd($,this.La,V-o)).type|=1024,this.hc(F)}else if(this.Li==1)F=r.Qd($,this.La,F+o),this.hc(F,p),F=r.Qd($,this.La,V-o),this.hc(F);else if(this.Li==0)for(C=1-m/Math.abs(this.La),T=1,A=V-o-(F+o),-1<C&&1>C&&(.017453292519943295>(N=2*Math.acos(C))&&(N=.017453292519943295),1<(T=h.P.truncate(Math.abs(A)/N+1.5))&&(A/=T)),C=this.La/Math.cos(.5*A),N=F+o+.5*A,F=r.Qd($,C,N),this.hc(F,p);0<--T;)N+=A,F=r.Qd($,C,N),this.hc(F);else this.Li==2?(C=T.x-$.x,N=T.y-$.y,.99999999<(T=(C*(L=A.x-$.x)+N*(D=A.y-$.y))/Math.sqrt(C*C+N*N)/Math.sqrt(L*L+D*D))?(F=r.Qd($,1.4142135623730951*this.La,V-.25*v),this.hc(F,p),F=r.Qd($,1.4142135623730951*this.La,V+.25*v),this.hc(F)):(T=Math.abs(this.La/Math.sin(.5*Math.acos(T))))>(A=Math.abs(this.wA*this.La))?(C=.5*(V-F),C=this.La/Math.abs(Math.sin(C)),F=r.Qd($,C,.5*(F+V)),V=h.h.construct(F.x,F.y),F=h.h.construct($.x,$.y),($=new h.h).vc(V,F),(V=new h.h).wW(A/$.length(),$,F),F=(T-A)*Math.abs(this.La)/Math.sqrt(T*T-this.La*this.La),0<this.La?$.Iv():$.cr(),$.scale(F/$.length()),(F=new h.h).add(V,$),(T=new h.h).vc(V,$),F=r.bl(F),this.hc(F,p),F=r.bl(T),this.hc(F)):(C=.5*(V-F),C=this.La/Math.abs(Math.sin(C)),F=r.Qd($,C,.5*(F+V)),this.hc(F,p))):(V=N,0<this.La?(V>F&&(V-=u),T=F-V<o):(V<F&&(V+=u),T=V-F<o),T?(N=0>(C=1.4142135623730951*this.La)?F+.25*v:F+.75*v,F=r.Qd($,C,N),this.hc(F,p),N=0>C?V-.25*v:V-.75*v,F=r.Qd($,C,N),this.hc(F)):(C=.5*(V-F),C=this.La/Math.abs(Math.sin(C)),V<F&&(V+=u),F=r.Qd($,C,(F+V)/2),this.hc(F,p)))}return this.Kv=w,this.Wz=x,this.hc(this.Zb[0],0),$=r.KO(this.Zb[this.gf-1]),this.Zb[0]=$,this.mW()},c.prototype.Bu=function(p,f){if(!(2>f))for(var m=0;m<f;m++){var w=this.Zb[p+m];m!=0?this.HA.Di(h.h.construct(w.x,w.y)):this.HA.Mt(h.h.construct(w.x,w.y))}},c.prototype.YL=function(p,f,m){var w=p.Ca(f),x=p.Wc(f);if(this.Zb=[],this.HA=m,p.ec(f)){for(f=p.Oa(w);p.Oa(x-1).rb(f);)x--;if(2<=x-w){for(this.Cw=x-w,this.wg=[],f=w;f<x;f++)this.wg.push(r.bl(p.Oa(f)));this.eE()&&this.Bu(0,this.gf-1)}}else{for(f=p.Oa(w);w<x&&p.Oa(w+1).rb(f);)w++;for(f=p.Oa(x-1);w<x&&p.Oa(x-2).rb(f);)x--;if(2<=x-w){for(this.Cw=2*(x-w)-2,this.wg=[],(m=r.bl(p.Oa(w))).type|=1536,this.wg.push(m),f=w+1;f<x-1;f++)m=r.bl(p.Oa(f)),this.wg.push(m);for((m=r.bl(p.Oa(x-1))).type|=512,this.wg.push(m),f=x-2;f>=w+1;f--)(m=r.bl(p.Oa(f))).type|=1024,this.wg.push(m);if(this.eE())if(2<=this.Zb.length){for(p=-1,(x=(1024&this.Zb[this.gf-1].type)!=0)||(p=0),f=1;f<this.gf;f++)(w=(1024&this.Zb[f].type)!=0)?x||1<(x=f-1)-p+1&&this.Bu(p,x-p+1):x&&(p=f-1),x=w;x||1<(x=this.gf-1)-p+1&&this.Bu(p,x-p+1)}else p=0,x=this.gf-1,0<=p&&1<=x-p&&this.Bu(p,x-p+1)}}this.wg=null,this.Cw=0,this.Zb=null,this.gf=0},c.prototype.mW=function(){for(var p=!1,f=0;f<this.gf;f++){var m=this.Zb[f];m.rh=f+1,m.th=f-1,this.Zb[f]=m}for((m=this.Zb[0]).th=this.gf-2,this.Zb[0]=m,(m=this.Zb[this.gf-2]).rh=0,this.Zb[this.gf-2]=m,f=m=0;f<this.gf;f++)if((256&this.Zb[m].type)!=0){var w=this.yP(m);if(w==-1){p=!0;break}m=w}else m=this.Zb[m].rh;return!p&&(this.IO(m),!0)},c.prototype.yP=function(p){for(var f,m,w=this.gf-1,x=p,$=1;$<=w-2;$++){f=x=this.Zb[x].rh,m=p;for(var T=1;T<=$;T++){if(m=this.Zb[m].th,(256&this.Zb[m].type)==0&&(256&this.Zb[f].type)==0){var A=this.YR(m,f);if(A!=-1)return A}f=this.Zb[f].th}}return-1},c.prototype.YR=function(p,f){var m=this.Zb[this.Zb[p].th],w=this.Zb[p],x=this.Zb[this.Zb[f].th],$=this.Zb[f];if(!this.yW(m,w,x,$))return-1;var T=new n;return this.pQ(m,w,x,$,T)&&!T.UD&&h.P.UJ((w.x-m.x)*($.y-x.y)-(w.y-m.y)*($.x-x.x))!=h.P.UJ(this.La)?(m=this.Zb[p].th,T.cn.type=w.type,T.cn.rh=f,T.cn.th=m,this.Zb[p]=T.cn,T.cn=this.Zb[f],T.cn.th=p,this.Zb[f]=T.cn,f):-1},c.prototype.yW=function(p,f,m,w){return Math.max(p.x,f.x)>=Math.min(m.x,w.x)&&Math.max(m.x,w.x)>=Math.min(p.x,f.x)&&Math.max(p.y,f.y)>=Math.min(m.y,w.y)&&Math.max(m.y,w.y)>=Math.min(p.y,f.y)},c.prototype.pQ=function(p,f,m,w,x){x.UD=!1;var $=(f.y-p.y)*(w.x-m.x)-(f.x-p.x)*(w.y-m.y),T=(m.y-p.y)*(f.x-p.x)-(m.x-p.x)*(f.y-p.y);if(0<=($=$==0?2:T/$)&&1>=$){var A=$;if($=(w.y-m.y)*(f.x-p.x)-(w.x-m.x)*(f.y-p.y),T=(p.y-m.y)*(w.x-m.x)-(p.x-m.x)*(w.y-m.y),0<=($=$==0?2:T/$)&&1>=$)return x.cn=r.LO(p.x+$*(f.x-p.x),p.y+$*(f.y-p.y)),x.cn.Vh=m.Vh+A*(w.Vh-m.Vh),A!=0&&A!=1||$!=0&&$!=1||(x.UD=!0),x.KY=$,x.LY=A,!((A==0||A==1)&&0<$&&1>$||($==0||$==1)&&0<A&&1>A)}return!1},c.prototype.IO=function(p){for(;this.Zb[p].th<p;)p=this.Zb[p].th;var f=0,m=p;do m=this.Zb[m],this.Zb[f]=m,m=m.rh,f++;while(m!=p);this.Zb[f]=this.Zb[0],this.gf=f+1},c.prototype.SC=function(p){var f=this.lo,m=f.Ha();if(m!=null){m.$i();for(var w=-1;m.ab();)w++,this.YL(f,w,p)}},c.prototype.Px=function(){var p=this.lo.K();return p==322?this.XL():p==197?this.WL():h.ba.zd(p)?((p=new h.Ua).oc(this.lo,!0),this.lo=p,this.Px()):p==1607?(p=new h.Ua,this.SC(p),p):p==1736?(p=new h.Ea,this.SC(p),p):null},c}();h.AK=a}(G||(G={})),function(h){var k=function(){function r(n){this.qk=n}return r.prototype.D=function(n,a){this.qk.g.D(n,a)},r.prototype.wd=function(n){var a=this.qk.Ga.ka(n);this.qk.Ga.wd(n,-1),this.qk.g.pd(a,!1)},r}(),v=function(){function r(n){this.qk=n}return r.prototype.D=function(n,a){this.qk.yT.D(n,a)},r.prototype.wd=function(n){this.qk.Ga.wd(n,-1)},r}(),u=function(){function r(n){this.qk=n}return r.prototype.D=function(n,a){a.N(this.qk.BT[n])},r.prototype.wd=function(n){this.qk.Ga.wd(n,-1)},r}(),o=function(){function r(n){n===void 0?(this.Ga=new h.Yj,this.Ga.Ee(20),this.g=new h.hd,this.mT=this.g.Kg(550),this.Ts=this.g.wf(this.mT,-1),this.Yh=new k(this)):n instanceof Array?(this.Ga=new h.Yj,this.Ga.Ee(20),this.BT=n,this.Yh=new u(this)):(this.Ga=new h.Yj,this.Ga.Ee(20),this.yT=n,this.Yh=new v(this))}return r.prototype.Ib=function(n){var a=n.K();if(h.Ex.yj(a))this.bN(n);else if(h.Vk.zd(a))this.gN(n);else if(a==197)this.ZM(n);else{if(a!=33)throw h.i.O("invalid shape type");this.fN(n)}},r.prototype.VQ=function(){var n=new h.Ta,a=this.Ga.sc(-1),c=new h.Ea(this.g.ht);for(this.g.Wi(this.Ga.ka(a),n),c.nf(n),a=this.Ga.lb(a);a!=-1;a=this.Ga.lb(a))this.g.Wi(this.Ga.ka(a),n),c.lineTo(n);return c},r.JO=function(n){var a=new r(n),c=n.I(),p=1,f=new h.h,m=new h.h,w=new h.h;for(n.D(0,f);n.D(p,m),m.Mz(f)&&p<c-1;)p++;for(a.Ga.addElement(0,-1),a.Ga.yn(p),c=p+1;c<n.I();c++)n.D(c,w),(p=a.iC(w))!=-1&&a.Ga.Tj(p,c);for(w=new h.Ta,p=a.Ga.sc(-1),c=new h.Ea(n.description),n.we(a.Ga.ka(p),w),c.nf(w),p=a.Ga.lb(p);p!=-1;p=a.Ga.lb(p))n.we(a.Ga.ka(p),w),c.lineTo(w);return c},r.construct=function(n,a,c){for(var p=new r(n),f=1,m=n[0];n[f].Mz(m)&&f<a-1;)f++;for(p.Ga.addElement(0,-1),p.Ga.yn(f),f+=1;f<a;f++)(m=p.iC(n[f]))!=-1&&p.Ga.Tj(m,f);for(n=0,a=p.Ga.sc(-1);a!=-1;a=p.Ga.lb(a))c[n++]=p.Ga.ka(a);return n},r.BG=function(n,a){var c=n.Ca(a),p=n.Wc(a);if(a=!n.ec(a)&&n.On(a),n=n.vb(0),p*=2,a&&(p-=2),6>p-(c*=2))return!0;a=new h.h;var f=new h.h,m=new h.h;n.uc(c,a),n.uc(c+2,f),n.uc(c+4,m);var w=r.Xu(f,m,a);if(w.qs()||!r.wm(w.value()))return!1;var x=h.h.construct(f.x,f.y),$=new h.h;for(c+=6;c<p;c+=2)if($.N(f),f.N(m),n.uc(c,m),(w=r.Xu(f,m,a)).qs()||!r.wm(w.value())||(w=r.Xu(x,m,a)).qs()||!r.wm(w.value())||(w=r.Xu(f,m,$)).qs()||!r.wm(w.value()))return!1;return!0},r.prototype.bN=function(n){for(var a=new h.Ta,c=new h.h,p=0;p<n.I();p++){n.D(p,c);var f=this.Er(c);if(f!=-1){n.we(p,a);var m=this.g.hc(this.Ts,a);this.Ga.Tj(f,m)}}},r.prototype.ZM=function(n){for(var a=new h.Ta,c=new h.h,p=0;4>p;p++){n.gB(p,c);var f=this.Er(c);if(f!=-1){n.If(p,a);var m=this.g.hc(this.Ts,a);this.Ga.Tj(f,m)}}},r.prototype.gN=function(n){var a=new h.Ta,c=n.ac();if((c=this.Er(c))!=-1){n.Uo(a);var p=this.g.hc(this.Ts,a);this.Ga.Tj(c,p)}c=n.xc(),(c=this.Er(c))!=-1&&(n.Qo(a),n=this.g.hc(this.Ts,a),this.Ga.Tj(c,n))},r.prototype.fN=function(n){var a=n.D();(a=this.Er(a))!=-1&&(n=this.g.hc(this.Ts,n),this.Ga.Tj(a,n))},r.prototype.Er=function(n){var a=-1;if(this.Ga.size(-1)==0)return this.Ga.addElement(-4,-1);if(this.Ga.size(-1)==1){var c=this.g.Oa(this.Ga.ka(this.Ga.sc(-1)));return n.Mz(c)||(a=this.Ga.yn(-5)),a}return this.iC(n)},r.prototype.iC=function(n){var a=-1;do{var c=this.Ga.sc(-1),p=this.Ga.Gc(-1),f=this.Ga.ka(c),m=this.Ga.ka(p),w=new h.h,x=new h.h;if(this.Yh.D(f,w),this.Yh.D(m,x),f=h.h.Wq(x,n,w),r.wm(f))a=this.Ga.yn(-1),(w=this.gC(n,p,c))!=c&&this.hC(n,c,this.Ga.xe(w));else if(r.uG(f)){x=this.Ga.tv(-1);var $=this.Ga.sc(-1),T=this.Ga.Gc(-1);for(f=new h.h,m=new h.h;$!=this.Ga.xe(T);){var A=this.Ga.ka(x);this.Yh.D(A,f),A=h.h.Wq(f,n,w),r.uG(A)?(T=x,x=this.Ga.nl(x)):($=x,x=this.Ga.Zp(x))}if(x=T,w=$,A=this.Ga.ka(x),$=this.Ga.ka(w),this.Yh.D(A,f),this.Yh.D($,m),w!=c&&(f=h.h.Wq(m,n,f),!r.wm(f)))continue;a=this.Ga.Au(w,x,-2,!1),this.hC(n,x,p),this.gC(n,w,c)}else this.tb==null&&(this.tb=new h.zb),this.tb.Ec(x),this.tb.Rc(w),0>(w=this.tb.fe(n,!0))?(w=this.Ga.xe(p),this.Ga.wd(p,-1),a=this.Ga.yn(-3),this.gC(n,w,c)):1<w&&(w=this.Ga.lb(c),this.Ga.wd(c,-1),a=this.Ga.Au(-1,w,-3,!1),this.hC(n,w,p))}while(0);return a},r.prototype.hC=function(n,a,c){if(a!=c){var p=this.Ga.ka(a),f=this.Ga.lb(a),m=new h.h,w=new h.h;for(this.Yh.D(p,m);a!=c&&2<this.Ga.size(-1)&&(this.Yh.D(this.Ga.ka(f),w),p=h.h.Wq(w,n,m),!r.wm(p));)p=a,a=f,m.N(w),f=this.Ga.lb(a),this.Yh.wd(p)}},r.prototype.gC=function(n,a,c){if(a==c)return c;var p=this.Ga.ka(a),f=this.Ga.xe(a),m=new h.h,w=new h.h;for(this.Yh.D(p,m);a!=c&&2<this.Ga.size(-1)&&(this.Yh.D(this.Ga.ka(f),w),p=h.h.Wq(m,n,w),!r.wm(p));)p=a,a=f,m.N(w),f=this.Ga.xe(a),this.Yh.wd(p);return a},r.Xu=function(n,a,c){var p=new h.Xb;p.set(a.x),p.sub(n.x);var f=new h.Xb;f.set(c.y),f.sub(n.y);var m=new h.Xb;return m.set(a.y),m.sub(n.y),(a=new h.Xb).set(c.x),a.sub(n.x),p.Ag(f),m.Ag(a),p.sub(m),p},r.wm=function(n){return 0>n},r.uG=function(n){return 0<n},r}();h.$t=o}(G||(G={})),function(h){var k=function(){function v(u){this.g=null,this.lH=!0,this.nd=u}return v.pU=function(u,o,r){return u=h.ta.Gr(u),h.Zt.Dv(o.Mg(),o.jh(),r.Mg(),r.jh(),h.mc.nx(u))},v.uO=function(u,o){var r=new h.Ta;return h.Zt.MT(u,o,r),r},v.W=function(u,o,r,n){return(r=new v(r)).g=u,r.ra=o,r.lH=n,r.wM()},v.prototype.fM=function(u){return h.Zt.aQ(this.g,u)},v.prototype.kM=function(u){return h.au.W(this.g,u,this.nd)},v.prototype.wM=function(){var u=this.ra,o=h.ta.Gr(u),r=1.00001*(u=h.ta.jN(u));u*=1.000001;for(var n=!1,a=30<this.g.gd+10?1e3:(this.g.gd+10)*(this.g.gd+10),c=0,p=this.g.aS();;c++){if(c>a)throw h.i.ga("Internal Error: max number of iterations exceeded");var f=this.fM(o);if(n=n||f,this.lH&&(f=this.g.Ip(o,!0,!1)!=0,n=n||f),f=!1,(c==0||p||h.au.cI(!0,this.g,u,null,this.nd))&&(f=this.kM(r),n=n||f),!f)break;h.np.Bp(this.nd)}return n},v}();h.Tk=k}(G||(G={})),function(h){var k=function(){function u(o){this.ae=this.Nc=null,this.Zs=0,this.Vb=o,this.Yz=!0}return u.prototype.vv=function(o,r){var n=this.g.cc(o);if(n==null){if(!this.g.fd(o,r))return null;n=r}return n},u.prototype.Zq=function(){var o;o===void 0&&(o=!1),this.Zs++,(o||(4095&this.Zs)==0)&&(this.Zs=0,h.np.Bp(this.Vb))},u.prototype.fP=function(){var o=this.g.$q(!1),r=!1,n=new h.zb,a=new h.zb,c=new h.l;c.Pa();var p=new h.l;p.Pa();for(var f=new h.Ta,m=new h.LC,w=o.next();w!=-1;w=o.next()){h.np.Bp(this.Vb);var x=null,$=!1;if(!h.ba.Sn(this.g.jc(o.ck))){if((x=this.vv(w,n))==null)continue;if(x.A(c),c.X(this.ra,this.ra),x.Ci(this.ra)){if(!x.Ci(0))continue;$=!0,x=null}}var T=this.g.$q(o),A=T.next();for(A!=-1&&(A=T.next());A!=-1;A=T.next()){var C=null,N=!1;if(!h.ba.Sn(this.g.jc(T.ck))){if((C=this.vv(A,a))==null)continue;if(C.A(p),C.Ci(this.ra)){if(!C.Ci(0))continue;N=!0,C=null}}var L=0,D=0;if(x!=null&&C!=null)c.zG(p)&&(m.Po(x),m.Po(C),m.Fa(this.ra,!1),0<(L=m.ql(0))+(D=m.ql(1))&&(this.g.lr(w,m,0,!0),this.g.lr(A,m,1,!0)),m.clear());else if(x!=null){var F=new h.h;if(this.g.D(A,F),c.contains(F)){if(m.Po(x),this.g.Wi(A,f),m.Fz(this.ra,f,!1),0<(L=m.ql(0)))if(this.g.lr(w,m,0,!0),N){for(N=-1,F=this.g.V(A);F!=-1&&F!=A&&(N=F,(C=this.vv(F,a))!=null&&C.Ci(0));F=this.g.V(F));for(F=A;F!=-1&&(this.g.Eh(F,m.Cf),F!=N);F=this.g.V(F));}else this.g.Eh(A,m.Cf);m.clear()}}else{if(C==null)continue;if(F=new h.h,this.g.D(w,F),p.X(this.ra,this.ra),p.contains(F)){if(m.Po(C),this.g.Wi(w,f),m.Fz(this.ra,f,!1),0<(D=m.ql(0)))if(this.g.lr(A,m,0,!0),$){for(N=-1,F=this.g.V(w);F!=-1&&F!=w&&(N=F,(C=this.vv(F,a))!=null&&C.Ci(0));F=this.g.V(F));for(F=w;F!=-1&&(this.g.Eh(F,m.Cf),F!=N);F=this.g.V(F));}else this.g.Eh(w,m.Cf);m.clear()}}if(L+D!=0){if(L!=0){if((x=this.g.cc(w))==null){if(!this.g.fd(w,n))continue;x=n,n.A(c)}else x.A(c);if(x.Ci(this.ra))break}r=!0}}}return r},u.prototype.gP=function(){return this.GU()},u.prototype.GU=function(){return new h.JC().DX(this.g,this.ra)},u.prototype.dI=function(){var o=!1;this.Nc==null&&(this.Nc=new h.Yj);var r=new h.ja(0);r.Jb(this.g.gd+1);for(var n=this.g.$q(),a=n.next();a!=-1;a=n.next())r.add(a);this.g.mx(r,r.size),r.add(-1),n=this.g.Hd(),a=this.g.Hd(),this.ae=new h.MC(this.g,this.ra,!this.Yz),this.Nc.Wo(this.ae);var c=new h.ja(0),p=new h.ja(0),f=0;new h.h;var m=this.g.ud;this.g.wb.rc();for(var w,x,$=this.g.wb.Aa[0].o,T=r.get(f++);T!=-1;){var A=w=$[2*(x=m.U(T,0))],C=x=$[2*x+1];do{var N=m.U(T,2),L=m.U(T,1);if(N!=-1){var D=m.U(N,0),F=$[2*D];0>(C<(D=$[2*D+1])?-1:C>D?1:A<F?-1:A>F?1:0)&&(p.add(T),p.add(N))}L!=-1&&(F=$[2*(D=m.U(L,0))],0>(C<(D=$[2*D+1])?-1:C>D?1:A<F?-1:A>F?1:0)&&(p.add(L),p.add(L))),(F=this.g.Qa(T,n))!=-1&&(c.add(F),this.g.Sa(T,n,-1)),(F=this.g.Qa(T,a))!=-1&&(c.add(F),this.g.Sa(T,a,-1)),(T=r.get(f++))!==-1&&(A=$[2*(C=m.U(T,0))],C=$[2*C+1])}while(T!=-1&&A===w&&C===x);for(A=c.size==1&&p.size==2,F=C=-1,N=0,L=c.size;N<L;N++){D=c.get(N);var V=this.Nc.xe(D);if(V==-1||c.$F(V)||(C=V),(D=this.Nc.lb(D))==-1||c.$F(D)||(F=D),C!=-1&&F!=-1)break}for(this.ae.SJ(x,w),N=0,L=c.size;N<L;N++)D=c.get(N),this.Nc.wd(D,-1);if(c.clear(!1),!A&&C!=-1&&F!=-1&&this.iO(C,F)){o=!0,this.Oi=this.ae.tm();break}for(N=0,L=p.size;N<L;N+=2){if(x=p.get(N),w=p.get(N+1),A?(x=this.Nc.Au(C,F,x,!0),A=!1):x=this.Nc.addElement(x,-1),this.ae.rg){this.Oi=this.ae.tm(),o=!0;break}this.g.Qa(w,n)==-1?this.g.Sa(w,n,x):this.g.Sa(w,a,x)}if(o)break;p.Ch(0)}return this.g.Ud(n),this.g.Ud(a),o},u.prototype.iO=function(o,r){return this.ae.compare(this.Nc,this.Nc.ka(o),r),o=this.ae.rg,this.ae.Lr(),o},u.qE=function(o){for(var r=o.ld;r!=-1;r=o.ve(r))if(h.ba.Ic(o.jc(r)))return!0;return!1},u.YP=function(o,r,n,a){return!!u.qE(o)&&((r=new u(a)).g=o,r.ra=n,15>o.gd?o=r.fP():r.gP())},u.W=function(o,r,n){return u.YP(o,o.AF(),r,n)},u.cI=function(o,r,n,a,c){if(!u.qE(r))return!1;var p=new u(c);if(p.g=r,p.ra=n,p.Yz=o,p.dI())return a!=null&&a.Xt(p.Oi),!0;var f=new h.Ed;return f.TB(),r.Pc(f),(p=new u(c)).g=r,p.ra=n,p.Yz=o,o=p.dI(),f.TB(),r.Pc(f),!!o&&(a!=null&&a.Xt(p.Oi),!0)},u.Ol=function(o,r){return!(16>(o=o.I()))&&2*o+Math.log(o)*Math.LOG10E/Math.log(2)*r<1*o*r},u.dP=function(o,r,n,a){if(h.ba.Ic(r.K()))return new u(a).eP(o,r,n);throw h.i.ga("crack_A_with_B")},u.prototype.eP=function(o,r,n){var a=new h.l;o.yc(a);var c=new h.l;if(r.yc(c),c.X(n,n),!c.isIntersecting(a))return o;var p=o.Cb,f=null;p!=null&&(f=p.Gb),u.Ol(o,o.I())&&(f=h.ta.kj(o,c));var m=f!=null?f.getIterator():null,w=r.Ha();r=o.Ha();var x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(c=[];w.ab();)for(;w.Ia();){var $=w.ia();if(f!=null){for(m.Vo($,n),p=m.next();p!=-1;p=m.next())if(this.Zq(),r.Wb(f.ka(p),-1),r.Ia()){var T=(p=r.ia()).Fa($,null,x,null,n);for(p=0;p<T;++p){var A=x[p];if(A!=0&&A!=1){var C=r.xb(),N=new v;N.t=A,N.index=C,c.push(N)}}}}else{var L=new h.l;if($.yc(L),L.X(n,n),a.isIntersecting(L)){for(r.$i();r.ab();)for(;r.Ia();)if(this.Zq(),p=r.ia(),A=new h.l,p.yc(A),A.isIntersecting(L))for(T=p.Fa($,null,x,null,n),p=0;p<T;++p)(A=x[p])!=0&&A!=1&&(C=r.xb(),(N=new v).t=A,N.index=C,c.push(N))}}}if(c.length==0)return o;for(c=c.sort(v.yy),o=o.Ja(),r.$i();r.ab()&&!r.Ia(););for(n=r.ia(),a=new h.hg,f=-1,p=0,m=c.length;p<m;){for(x=c[p].index,w=p+1;w<m&&c[w].index==x;)++w;for(;r.xb()<x;){if(this.Zq(),$=r.Ia(),A=r.gb,(L=$||!r.Pn()||r.Qn())&&o.oc(n,f!=A),f=A,!$)for(;r.ab()&&!r.Ia(););n=r.ia()}for(x=0;p<w;p++)(A=c[p].t)!=x&&(n.bh(x,A,a),x=A,A=r.gb,o.oc(a.get(),f!=A),f=A);if((L=($=r.Ia())||!r.Pn()||r.Qn())&&(n.bh(x,1,a),o.oc(a.get(),!1)),$)n=r.ia();else{for(;r.ab()&&!r.Ia(););n=r.Ia()?r.ia():null}p=w}for(n!=null&&(A=r.gb,(L=($=r.Ia())||!r.Pn()||r.Qn())&&o.oc(n,f!=A),f=A),$=r.Ia();;){if(!$){for(;r.ab()&&!($=r.Ia()););if(!$)break}n=r.ia(),A=r.gb,(L=($=r.Ia())||!r.Pn()||r.Qn())&&o.oc(n,f!=A),f=A}return o},u}();h.au=k;var v=function(){function u(){}return u.yy=function(o,r){return o.index==r.index?o.t>r.t?1:o.t<r.t?-1:0:o.index>r.index?1:-1},u}()}(G||(G={})),function(h){var k;(k=h.CK||(h.CK={}))[k.Left=0]="Left",k[k.Right=1]="Right",k[k.Coincident=2]="Coincident",k[k.Undefined=3]="Undefined",k[k.Uncut=4]="Uncut";var v=function(r,n,a,c,p,f,m,w,x,$,T){this.Y=r,this.bt=n,this.Os=a,this.tg=c,this.Nm=$,this.Cl=T};h.iY=v;var u=function(){function r(n,a){this.BH=n,this.Ii=a}return r.prototype.iM=function(n,a){var c=new h.h;this.Ii.D(n,c);var p=new h.h;return this.Ii.D(a,p),(c=c.compare(p))!=0?c:(n=this.Ii.Qa(n,this.BH))<(a=this.Ii.Qa(a,this.BH))?-1:n==a?0:1},r}(),o=function(r,n,a,c,p,f,m,w,x){this.tg=r,this.Os=n,this.IA=a,this.MH=c,this.Fi=p,this.Cl=f,this.Nm=m,this.NH=w,this.ET=x};h.hY=o,h.DK=function(){function r(){}return r.BK=function(n,a,c,p,f,m){if(a.B())n=new v(a,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),f.push(n);else if(c.B())n=new v(a,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),f.push(n);else{var w=new h.hd;if(w.Ib(a),w.Ib(c),h.Tk.W(w,p,m,!0),w.gd==0)n=new v(a.Ja(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),f.push(n);else{for(a=0,c=w.Hd(),p=w.ld;p!=-1;p=w.ve(p))for(m=w.Ob(p);m!=-1;m=w.Sb(m))for(var x=w.Ya(m),$=0,T=w.Ka(m);$<T;x=w.V(x),$++)w.Sa(x,c,a++);a=r.zM(c,w),r.VL(n,a,w,f)}}},r.zM=function(n,a){for(var c=a.gd,p=new h.ja(0),f=a.ld;f!=-1;f=a.ve(f))for(var m=a.Ob(f);m!=-1;m=a.Sb(m))for(var w=a.Ya(m),x=0,$=a.Ka(m);x<$;w=a.V(w),x++)p.add(w);var T=new u(n,a);p.Wd(0,c,function(me,fe){return T.iM(me,fe)}),n=[];var A=[],C=a.Hd(),N=a.Hd();f=a.ld,m=a.ve(f),$=new h.h;var L=new h.h,D=p.get(0),F=a.cd(D),V=a.Rf(F);a.D(D,$);var W=1;for(w=0;W<c-1;){var K=!1;for(x=W;x<c;x++)if(x!=w){var B=p.get(x),ee=a.cd(B),ae=a.Rf(ee);if(a.D(B,L),!$.rb(L))break;V==f&&ae==m&&(K=r.mM(C,N,a,n,A,F,D,ee,B))}if(K||w==W-1){if(K&&w==W-1&&W--,++w==c)break;D=p.get(w),F=a.cd(D),V=a.Rf(F),a.D(D,$)}K||(W=w+1)}for(c=[],f=a.ld;f!=-1;f=a.ve(f))for(m=a.Ob(f);m!=-1;m=a.Sb(m))for(p=a.Ya(m),x=0,$=a.Ka(m);x<$;p=a.V(p),x++){if(0<=(w=a.Qa(p,N)))for(;w<A.length&&A[w].tg==p;)c.push(A[w++]);if(0<=(w=a.Qa(p,C)))for(;w<n.length&&n[w].tg==p;)c.push(n[w++])}return a.Ud(C),a.Ud(N),c},r.mM=function(n,a,c,p,f,m,w,x,$){var T=c.sj(m),A=c.sj(x),C=c.Ya(m),N=c.Ya(x),L=c.Na(w),D=c.Na($),F=!1,V=!1,W=!1,K=!1;return w!=C&&($!=N&&(F=r.nM(n,c,p,m,L,x,D)),$!=A&&(V=r.oM(n,c,p,m,L,x,$))),w!=T&&($!=N&&(W=r.pM(a,c,f,m,w,x,D,C)),$!=A&&(K=r.qM(a,c,f,m,w,x,$,C))),F&&V&&W?(n=p.length-1,f[K?f.length-2:f.length-1].Fi==2&&(p[n-1]=p[n],--p.length)):F&&V&&K&&f[f.length-1].Fi==2&&(f=p[p.length-1],--p.length,c.Qa(f.tg,n)==p.length&&c.Sa(f.tg,n,-1)),F||V||W||K},r.nM=function(n,a,c,p,f,m,w){var x=new h.zb,$=new h.zb,T=[0,0],A=[0,0],C=a.cc(f);return C==null&&(a.fd(f,x),C=x),(x=a.cc(w))==null&&(a.fd(w,$),x=$),2>(C=C.Fa(x,null,T,A,0))&&(p=new o(f,p,T[0],NaN,C,w,m,A[0],NaN),c.push(p),0>(p=a.Qa(f,n))&&a.Sa(f,n,c.length-1)),!0},r.oM=function(n,a,c,p,f,m,w){var x=new h.zb,$=new h.zb,T=[0,0],A=[0,0],C=a.cc(f);return C==null&&(a.fd(f,x),C=x),(x=a.cc(w))==null&&(a.fd(w,$),x=$),2>(C=C.Fa(x,null,T,A,0))&&(p=new o(f,p,T[0],NaN,C,w,m,A[0],NaN),c.push(p),0>(p=a.Qa(f,n))&&a.Sa(f,n,c.length-1),!0)},r.pM=function(n,a,c,p,f,m,w,x){var $=new h.zb,T=new h.zb,A=[0,0],C=[0,0],N=a.cc(f);return N==null&&(a.fd(f,$),N=$),($=a.cc(w))==null&&(a.fd(w,T),$=T),(N=N.Fa($,null,A,C,0))==2?(p=new o(f,p,A[0],A[1],N,w,m,C[0],C[1]),c.push(p),0>(p=a.Qa(f,n))&&a.Sa(f,n,c.length-1),!0):(T=!1,f==x&&(p=new o(f,p,A[0],NaN,N,w,m,C[0],NaN),c.push(p),0>(p=a.Qa(f,n))&&a.Sa(f,n,c.length-1),T=!0),T)},r.qM=function(n,a,c,p,f,m,w,x){var $=new h.zb,T=new h.zb,A=[0,0],C=[0,0],N=a.cc(f);return N==null&&(a.fd(f,$),N=$),($=a.cc(w))==null&&(a.fd(w,T),$=T),(N=N.Fa($,null,A,C,0))==2?(p=new o(f,p,A[0],A[1],N,w,m,C[0],C[1]),c.push(p),0>(p=a.Qa(f,n))&&a.Sa(f,n,c.length-1),!0):(T=!1,f==x&&(p=new o(f,p,A[0],NaN,N,w,m,C[0],NaN),c.push(p),0>(p=a.Qa(f,n))&&a.Sa(f,n,c.length-1),T=!0),T)},r.VL=function(n,a,c,p){var f=[];f[0]=new h.h,f[1]=new h.h,f[2]=new h.h,f[3]=new h.h;var m=new h.h,w=new h.h,x=new h.h,$=new h.h,T=null;p!=null&&(T=new h.hg).Pr();var A=0,C=null,N=new h.zb;new h.zb;for(var L=c.Ob(c.ld);L!=-1;L=c.Sb(L)){for(var D=4,F=-1,V=-1,W=-1,K=-1,B=NaN,ee=!0,ae=!1,me=!0,fe=!0,pe=!0,be=0,Pe=L,Re=0,ut=c.Ya(L),ht=c.Ka(L),oi=0;oi<ht;ut=c.V(ut),oi++){var Tt=c.cc(ut);if(Tt==null){if(!c.fd(ut,N))continue;Tt=N}V==-1&&(V=ut);for(var Ie=0;A<a.length&&ut==a[A].tg;){F=a[A].Os;var mt=a[A].tg,et=a[A].IA,Gt=a[A].Nm,jt=a[A].Cl,Yt=a[A].NH;if(a[A].Fi==2){if(ae||(Pe=F,V=mt,Re=et,W=Gt,K=jt,B=Yt,D=2,p!=null?C=new h.Ua:be=0,pe=!1,fe=!0),et=a[A].MH,Yt=a[A].ET,p!=null?(Tt.bh(Ie,a[A].MH,T),C.oc(T.get(),fe)):be++,Ie=et,ae=!0,fe=ee=!1,A+1==a.length||a[A+1].Fi!=2||a[A+1].tg==mt&&a[A+1].IA!=Ie){if(p!=null){var at=new v(C,2,F,mt,et,D,Pe,V,Re,Gt,jt,Yt,W,K,B);p.push(at)}else null.add(be);Pe=F,V=mt,Re=et,W=Gt,K=jt,B=Yt,D=2,ae=ee=!1,fe=pe=!0}}else{var Mi=c.V(mt);if(A<a.length-1&&a[A+1].tg==Mi&&a[A+1].Cl==jt&&a[A+1].Fi==2)et!=Ie&&(pe&&(p!=null?C=new h.Ua:be=0),ee=0<A&&a[A-1].Os==F?D==1?0:D==0?1:3:3,p!=null?(Tt.bh(Ie,et,T),C.oc(T.get(),fe),at=new v(C,ee,F,mt,et,D,Pe,V,Re,Gt,jt,Yt,W,K,B),p.push(at)):(be++,null.add(be)),Ie=et,Pe=F,V=mt,Re=et,W=Gt,K=jt,B=Yt,D=ee,ee=me=!1,fe=pe=!0);else if(!r.uM(n,c,a,A,m,w)){r.rM(c,a,A,L,ut,x,$);var Je=!1;if(Mi=!1,at=!0,!(m.rb(x)||w.rb(x)||m.rb($)||w.rb($))){f[0].N(m),f[1].N(w),f[2].N(x),f[3].N($),f.sort(h.h.ou);var uh=f[0],fl=f[1],hh=f[2],dp=f[3];uh.rb(m)?fl.rb(w)?n?(Mi=Je=!0,at=!1):Je=!1:dp.rb(w)?n?at=Mi=Je=!0:Je=!1:(Je=!0,at=fl.rb(x)):fl.rb(m)?hh.rb(w)?n?(Mi=Je=!0,at=!1):Je=!1:uh.rb(w)?n?at=Mi=Je=!0:Je=!1:(Je=!0,at=hh.rb(x)):hh.rb(m)?dp.rb(w)?n?(Mi=Je=!0,at=!1):Je=!1:fl.rb(w)?n?at=Mi=Je=!0:Je=!1:(Je=!0,at=dp.rb(x)):uh.rb(w)?n?(Mi=Je=!0,at=!1):Je=!1:hh.rb(w)?n?at=Mi=Je=!0:Je=!1:(Je=!0,at=uh.rb(x))}Je&&(Je=ut==mt,(et!=Ie||Je&&Ie==0)&&(pe&&(p!=null?C=new h.Ua:be=0),p!=null?(Tt.bh(Ie,et,T),C.oc(T.get(),fe)):be++),at?D!=1?((et!=Ie||Je&&Ie==0)&&(p!=null?(at=new v(C,1,F,mt,et,D,Pe,V,Re,Gt,jt,Yt,W,K,B),p.push(at)):null.add(be)),Mi?(A>=a.length-2||a[A+2].Os!=F)&&(D=0):D=1):((et!=Ie||Je&&Ie==0)&&(p!=null?(at=new v(C,3,F,mt,et,D,Pe,V,Re,Gt,jt,Yt,W,K,B),p.push(at)):null.add(be)),D=1):D!=0?((et!=Ie||Je&&Ie==0)&&(p!=null?(at=new v(C,0,F,mt,et,D,Pe,V,Re,Gt,jt,Yt,W,K,B),p.push(at)):null.add(be)),Mi?(A>=a.length-2||a[A+2].Os!=F)&&(D=1):D=0):((et!=Ie||Je&&Ie==0)&&(p!=null?(at=new v(C,3,F,mt,et,D,Pe,V,Re,Gt,jt,Yt,W,K,B),p.push(at)):null.add(be)),D=0),(et!=Ie||Je&&Ie==0)&&(Ie=et,Pe=F,V=mt,Re=et,W=Gt,K=jt,B=Yt,ee=me=!1,fe=pe=!0))}}A++}Ie!=1&&(pe&&(p!=null?C=new h.Ua:be=0),p!=null?(Tt.bh(Ie,1,T),C.oc(T.get(),fe)):be++,fe=pe=!1,me=!0)}me&&(et=1,mt=c.sj(L),mt=c.Na(mt),jt=Gt=-1,Yt=NaN,ee?p!=null?(at=new v(C,4,F,mt,et,D,Pe,V,Re,Gt,jt,Yt,W,K,B),p.push(at)):null.add(be):(ee=D==1?0:D==0?1:3,p!=null?(at=new v(C,ee,F,mt,et,D,Pe,V,Re,Gt,jt,Yt,W,K,B),p.push(at)):null.add(be)))}},r.uM=function(n,a,c,p,f,m){var w=c[p].NH;if(w==1)return r.sM(n,a,c,p,f,m);if(w==0)return r.tM(n,a,c,p,f,m);throw h.i.Ra()},r.sM=function(n,a,c,p,f,m){var w=new h.zb,x=c[p].tg,$=c[p].Nm,T=c[p].Cl,A=-1,C=-1,N=-1,L=-1;if(!n&&0<p){var D=c[p-1];A=D.tg,C=D.Nm,N=D.Cl,L=D.Fi}var F=-1,V=-1,W=-1,K=-1;p<c.length-1&&(F=(D=c[p+1]).tg,V=D.Nm,W=D.Cl,K=D.Fi);var B=a.V(x);return D=a.V(T),n?p==c.length-1||F!=x||V!=$||W!=D||K==2?((n=a.cc(T))==null&&(a.fd(T,w),n=w),m.N(n.jg()),f.mt(m),m.normalize(),f.normalize(),!1):((n=a.cc(T))==null&&(a.fd(T,w),n=w),f.N(n.jg()),(n=a.cc(D))==null&&(a.fd(D,w),n=w),m.N(n.jg()),f.Uq(),m.normalize(),f.normalize(),!1):0<p&&A==x&&C==$&&N==D&&L==2||p<c.length-1&&F==B&&V==$&&W==D&&K==2?((n=a.cc(T))==null&&(a.fd(T,w),n=w),m.N(n.jg()),f.mt(m),m.normalize(),f.normalize(),!1):!(p<c.length-1&&F==x&&V==$&&W==D)||((n=a.cc(T))==null&&(a.fd(T,w),n=w),f.N(n.jg()),(n=a.cc(D))==null&&(a.fd(D,w),n=w),m.N(n.jg()),f.Uq(),m.normalize(),f.normalize(),!1)},r.tM=function(n,a,c,p,f,m){var w=new h.zb,x=c[p].tg,$=c[p].Nm,T=c[p].Cl,A=-1,C=-1,N=-1,L=-1;if(!n&&p<c.length-1){var D=c[p+1];A=D.tg,C=D.Nm,N=D.Cl,L=D.Fi}var F=-1,V=-1,W=-1;D=-1,0<p&&(F=(D=c[p-1]).tg,V=D.Nm,W=D.Cl,D=D.Fi);var K=a.V(x),B=a.Na(T);return n?p!=0&&F==x&&V==$&&W==B&&D!=2||((n=a.cc(T))==null&&(a.fd(T,w),n=w),m.N(n.jg()),f.mt(m),m.normalize(),f.normalize(),!1):!(0<p&&F==x&&V==$&&W==B&&D==2||p<c.length-1&&A==K&&C==$&&N==B&&L==2)||((n=a.cc(T))==null&&(a.fd(T,w),n=w),m.N(n.jg()),f.mt(m),m.normalize(),f.normalize(),!1)},r.rM=function(n,a,c,p,f,m,w){var x=new h.zb,$=n.cc(f);if($==null&&(n.fd(f,x),$=x),a=(c=a[c]).tg,c=c.IA,f=n.V(a),c==1)m.N($.jg()),f!=-1&&f!=n.sj(p)?(($=n.cc(f))==null&&(n.fd(f,x),$=x),w.N($.jg()),($=n.cc(a))==null&&n.fd(a,x)):w.N(m),m.Uq(),w.normalize(),m.normalize();else{if(c!=0)throw h.i.Ra();w.N($.jg()),m.mt(w),w.normalize(),m.normalize()}},r}()}(G||(G={})),function(h){var k;(k=h.UL||(h.UL={}))[k.Linear=0]="Linear",k[k.Angular=1]="Angular",k[k.Area=2]="Area";var v=function(){function p(f,m,w){this.od=m,this.bi=w,this.pA=f}return p.prototype.Nb=function(f){return f instanceof p&&this.bi===f.bi},p.TF=function(f){return f.od!==0?null:f.pA===-1?new p(-1,2,f.bi*f.bi):p.$g(a[f.pA])},p.$g=function(f){return(f=n[f])===void 0?null:f},p.RO=function(f,m,w){var x=null;if(w!=null)try{w.values[0]==="EPSG"&&(x=p.$g(parseInt(w.values[1])))}catch{}return x===null&&(x=new p(-1,f,m)),x},p.prototype.Fc=function(){return this.pA},p.prototype.uF=function(f){if(f.od!=this.od)throw h.i.Hb();return this.bi/f.bi},p.Oh=function(f,m,w){return m.uF(w)*f},p.PE=function(f,m,w,x,$){for(w=w.uF(x),x=0;x<m;x++)$[x]=f[x]*w},p}();h.Uc=v;for(var u=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],o=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],r=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],n=[],a=[],c=0;c<u.length;c+=2)n[u[c]]=new v(u[c],2,u[c+1]);for(u=null,c=0;c<o.length;c+=2)n[o[c]]=new v(o[c],1,o[c+1]);for(o=null,c=0;c<r.length;c+=3)n[r[c]]=new v(r[c],0,r[c+1]),a[r[c]]=r[c+2];r=null}(G||(G={})),function(h){var k=function(){function v(){this.yb=this.pb=0}return v.prototype.set=function(u,o){o!==void 0?(this.pb=u,this.yb=o):typeof u=="number"?(this.pb=u,this.yb=0):(this.pb=u.pb,this.yb=u.yb)},v.prototype.value=function(){return this.pb},v.prototype.add=function(u){var o=this.pb+u.pb;u=this.yb+u.yb+2220446049250313e-31*Math.abs(o),this.pb=o,this.yb=u},v.prototype.cN=function(){var u=this.pb+1,o=this.yb+2220446049250313e-31*Math.abs(u);this.pb=u,this.yb=o},v.prototype.WM=function(u,o){this.pb=u.pb+o.pb,this.yb=u.yb+o.yb+2220446049250313e-31*Math.abs(this.pb)},v.prototype.sub=function(u){if(typeof u=="number"){var o=this.pb-u;u=this.yb+2220446049250313e-31*Math.abs(o)}else o=this.pb-u.pb,u=this.yb+u.yb+2220446049250313e-31*Math.abs(o);this.pb=o,this.yb=u},v.prototype.Ag=function(u){var o=this.pb*u.pb;this.yb=this.yb*Math.abs(u.pb)+u.yb*Math.abs(this.pb)+this.yb*u.yb+2220446049250313e-31*Math.abs(o),this.pb=o},v.prototype.Oo=function(u){var o=this.pb*u;this.yb=this.yb*Math.abs(u)+2220446049250313e-31*Math.abs(o),this.pb=o},v.prototype.Ml=function(u,o){var r=Math.abs(u.pb)*Math.abs(o.pb);this.yb=u.yb*Math.abs(o.pb)+o.yb*Math.abs(u.pb)+u.yb*o.yb+2220446049250313e-31*Math.abs(r),this.pb=r},v.prototype.lm=function(u){var o=Math.abs(u.pb),r=this.pb/u.pb,n=(this.yb+Math.abs(r)*u.yb)/o;u.yb>.01*o&&(n*=1+(1+(u=u.yb/o))*u),this.pb=r,this.yb=n+2220446049250313e-31*Math.abs(r)},v.prototype.sqrt=function(){if(0<=this.pb){var u=Math.sqrt(this.pb),o=this.pb>10*this.yb?.5*this.yb/u:this.pb>this.yb?u-Math.sqrt(this.pb-this.yb):Math.max(u,Math.sqrt(this.pb+this.yb)-u);o+=2220446049250313e-31*Math.abs(u)}else this.pb<-1*this.yb?o=u=NaN:(u=0,o=Math.sqrt(this.yb));this.pb=u,this.yb=o},v.prototype.sin=function(u){var o=Math.sin(u.pb),r=Math.cos(u.pb);this.pb=o,o=Math.abs(o),this.yb=(Math.abs(r)+.5*o*u.yb)*u.yb+2220446049250313e-31*o},v.prototype.cos=function(u){var o=Math.sin(u.pb),r=Math.cos(u.pb);this.pb=r,r=Math.abs(r),this.yb=(Math.abs(o)+.5*r*u.yb)*u.yb+2220446049250313e-31*r},v.prototype.qg=function(){return Math.abs(this.pb)<=this.yb},v.prototype.qs=function(){return this.qg()&&this.yb!=0},v}();h.Xb=k}(G||(G={}));var Kt=new G.h,Os=new G.h,yn=new G.h,mn=new G.h,to=new G.h;(function(h){var k,v;(v=k||(k={}))[v.closedPath=1]="closedPath",v[v.exteriorPath=2]="exteriorPath",v[v.ringAreaValid=4]="ringAreaValid";var u=function(){function o(r,n,a,c,p,f,m){n!==void 0?(this.ib=r,this.ck=n,this.cl=a,this.ji=c,this.za=f,this.cA=m,this.fw=p):(this.ib=r.ib,this.ck=r.ck,this.cl=r.cl,this.ji=r.ji,this.za=r.za,this.cA=r.cA,this.fw=r.fw),this.UG=!0}return o.prototype.next=function(){return this.UG?(this.UG=!1,this.ji):this.ji!=-1?(this.ji=this.ib.V(this.ji),this.za++,this.ji!=-1&&this.ji!=this.fw?this.ji:this.QT()):-1},o.prototype.QT=function(){for(this.cl=this.ib.Sb(this.cl),this.za=0;this.ck!=-1;){for(;this.cl!=-1;this.cl=this.ib.Sb(this.cl))if(this.fw=this.ji=this.ib.Ya(this.cl),this.ji!=-1)return this.ji;if(this.ck=this.ib.ve(this.ck),this.ck==-1)break;this.cA&&!h.ba.Ic(this.ib.jc(this.ck))||(this.cl=this.ib.Ob(this.ck))}return-1},o.sP=function(r,n,a,c,p,f,m){return new o(r,n,a,c,p,f,m)},o}();h.nY=u,k=function(){function o(){this.ko=this.Cm=this.wk=this.dd=this.Ck=this.wo=this.Pi=this.md=this.ci=this.Tg=this.Te=this.Kl=null,this.rw=this.ld=-1,this.gd=0,this.aA=!1,this.ht=this.it=this.wb=null}return o.prototype.Th=function(r){return this.Te!=null?this.Te[r]:null},o.prototype.Yg=function(r,n){if(this.Te==null){if(n==null)return;this.Te=[];for(var a=0,c=this.wb.I();a<c;a++)this.Te.push(null)}this.Te[r]=n},o.prototype.cp=function(r,n){this.md.T(r,1,n)},o.prototype.bp=function(r,n){this.md.T(r,2,n)},o.prototype.OB=function(r,n){this.md.T(r,6,n)},o.prototype.Up=function(r){return this.md.U(r,6)},o.prototype.fx=function(r,n){this.md.T(r,7,n)},o.prototype.rv=function(r){return this.md.U(r,0)},o.prototype.GJ=function(r,n){this.dd.T(r,1,n)},o.prototype.KJ=function(r,n){this.dd.T(r,0,n)},o.prototype.BF=function(r){return this.dd.U(r,7)},o.prototype.$o=function(r,n){this.dd.T(r,3,n)},o.prototype.ap=function(r,n){this.dd.T(r,4,n)},o.prototype.kU=function(r){this.dd==null&&(this.dd=new h.ad(8));var n=this.dd.De();return this.dd.T(n,2,r),this.dd.T(n,5,0),this.dd.T(n,6,0),this.dd.T(n,7,n),n},o.prototype.GQ=function(r){this.dd.kd(r)},o.prototype.mU=function(r){this.md==null&&(this.md=new h.ad(8),this.ud=new h.ad(5),this.Pi=new h.ce(0),this.wo=new h.ce(0));var n=this.md.De();return this.md.T(n,0,n),this.md.T(n,3,0),this.md.T(n,6,0),this.fx(n,r),n>=this.Pi.size&&(r=16>n?16:h.P.truncate(3*n/2),this.Pi.resize(r),this.wo.resize(r)),this.Pi.set(n,0),this.wo.set(n,0),n},o.prototype.kF=function(r){this.md.kd(r)},o.prototype.Qy=function(r){this.ud.kd(r),this.gd--},o.prototype.gI=function(r){this.md==null&&(this.md=new h.ad(8),this.ud=new h.ad(5),this.Pi=new h.ce(0),this.wo=new h.ce(0));var n=this.ud.De(),a=0<=r?r:n;if(this.ud.T(n,0,a),0>r){if(a>=this.wb.I()){if(r=16>a?16:h.P.truncate(3*a/2),this.wb.resize(r),this.Te!=null)for(var c=0;c<r;c++)this.Te.push(null);this.Tg!=null&&this.Tg.resize(r),this.it=this.wb.vb(0)}this.wb.Db(a,-1e38,-1e38),this.Te!=null&&(this.Te[a]=null),this.Tg!=null&&this.Tg.write(a,1)}return this.ud.T(n,4,2*a),this.gd++,n},o.prototype.xj=function(r,n,a){var c=n!=-1?this.Na(n):this.sj(r),p=c!=-1?this.V(c):-1,f=this.gI(a==null?this.gd:-1),m=this.Va(f);return a!=null&&this.wb.Ht(m,a),this.bj(f,r),this.Cc(f,p),this.Dc(f,c),p!=-1&&this.Dc(p,f),c!=-1&&this.Cc(c,f),a=this.ec(r),c=this.Ya(r),n==-1&&this.Xg(r,f),n==c&&this.Kf(r,f),a&&p==-1&&(this.Cc(f,f),this.Dc(f,f)),this.Wj(r,this.Ka(r)+1),r=this.Rf(r),this.Uj(r,this.I(r)+1),f},o.prototype.pm=function(){return this.ko==null&&(this.ko=new h.Ta(this.wb.description)),this.ko},o.prototype.Zo=function(r,n){this.dd.T(r,2,-134217729&this.dd.U(r,2)||(n==1?134217728:0))},o.prototype.Jn=function(r){return(134217728&this.dd.U(r,2))!=0?1:0},o.prototype.$M=function(r){var n=this.Kg(r.K(),r.description);return r.K()==1736&&this.Zo(n,r.Jn()),this.MD(n,r),n},o.prototype.aN=function(r){var n=this.Kg(r.K(),r.description);return this.ND(n,r),n},o.prototype.NV=function(r,n){this.md==null&&(this.md=new h.ad(8),this.ud=new h.ad(5),this.Pi=new h.ce(0),this.wo=new h.ce(0)),this.md.Ee(this.md.Jg+r),this.ud.Ee(this.ud.Jg+n),this.Pi.Jb(this.Pi.size+r),this.wo.Jb(this.wo.size+r)},o.prototype.MD=function(r,n){this.NV(n.ea(),n.I()),this.Kl.Gd(n,0,n.I()),this.it=this.wb.vb(0);for(var a=this.Te!=null&&n.Se!=null,c=0,p=n.ea();c<p;c++)if(!(2>n.Ka(c))){var f=this.wf(r,-1);this.mn(f,n.ec(c));for(var m=n.Ca(c),w=n.Wc(c);m<w;m++){var x=this.xj(f,-1,null);if(a)if(x=this.Va(x),(1&n.RF(m))!=0)this.Yg(x,null);else{var $=new h.hg;n.cc(m,$,!0),this.Yg(x,$.get())}}}},o.prototype.ND=function(r,n){this.Kl.Gd(n,0,n.I()),this.it=this.wb.vb(0),r=this.wf(r,-1);var a=0;for(n=n.I();a<n;a++)this.xj(r,-1,null)},o.prototype.BX=function(r,n,a){var c=this.V(r);if(c==-1)throw h.i.Ra();for(var p=this.pm(),f=this.cd(r),m=0,w=n.ql(a);m<w;m++){var x=this.Va(r),$=this.V(r),T=n.Xp(a,m);m==0&&(T.Uo(p),this.Eh(r,p)),T.K()==322?this.Yg(x,null):this.Yg(x,h.ba.ig(T)),T.Qo(p),m<w-1?r=this.xj(f,$,p):this.Eh(c,p)}},o.prototype.AX=function(r,n,a){var c=this.V(r);if(c==-1)throw h.i.Ra();for(var p=this.pm(),f=this.cd(r),m=0,w=n.ql(a);m<w;m++){var x=this.Va(r),$=this.V(r),T=n.Xp(a,w-m-1);m==0&&(T.Qo(p),this.Eh(r,p)),T.K()==322?this.Yg(x,null):this.Yg(x,h.ba.ig(T)),T.Uo(p),m<w-1?r=this.xj(f,$,p):this.Eh(c,p)}},o.prototype.AF=function(){var r=new h.l;r.Pa();for(var n=this.$q(),a=new h.h,c=!0,p=n.next();p!=-1;p=n.next())this.D(p,a),c?r.$b(a.x,a.y):r.Lk(a.x,a.y),c=!1;return r},o.prototype.Ib=function(r){var n=r.K();if(h.ba.Ic(n))return this.$M(r);if(n==550)return this.aN(r);throw h.i.Ra()},o.prototype.mN=function(r,n){var a=n.K();if(h.ba.Ic(a))this.MD(r,n);else{if(a!=550)throw h.i.Ra();this.ND(r,n)}},o.prototype.eN=function(r,n){var a=this.Kg(1736,r.description);if(2>r.Ka(n))return a;this.Kl.Gd(r,r.Ca(n),r.Wc(n)),this.it=this.wb.vb(0);var c=this.wf(a,-1);this.mn(c,r.ec(n)||!0);var p=this.Te!=null&&r.Se!=null,f=r.Ca(n);for(n=r.Wc(n);f<n;f++){var m=this.xj(c,-1,null);if(p)if(m=this.Va(m),(1&r.RF(f))!=0)this.Yg(m,null);else{var w=new h.hg;r.cc(f,w,!0),this.Yg(m,w.get())}}return a},o.prototype.Ke=function(r){var n=this.jc(r),a=h.RK.Kg(n,this.Kl.description),c=this.I(r);if(c==0)return a;if(h.ba.Ic(n)){n=this.ea(r);for(var p=h.Zc.Ph(n+1),f=h.Zc.Nr(n+1,0),m=a.description,w=0,x=m.Ba;w<x;w++){for(var $=m.qd(w),T=h.ua.Wa($),A=h.Zc.QE($,c),C=this.wb.vb($),N=0,L=0,D=0,F=this.Ob(r);F!=-1;F=this.Sb(F)){var V=0;this.ec(F)&&(V|=1),this.OS(F)&&(V|=4),V!=0&&f.rJ(L,V);var W=this.Ka(F);if(p.write(L++,D),D+=W,$==0){W=C;var K=A,B=new h.h;for(V=this.Ya(F);N<D;V=this.V(V),N++){var ee=this.Va(V);W.uc(2*ee,B),K.Ut(2*N,B)}}else for(V=this.Ya(F);N<D;V=this.V(V),N++)for(ee=this.Va(V),K=0;K<T;K++)B=C.Bg(ee*T+K),A.rr(N*T+K,B)}a.kn($,A),p.write(n,c)}a.HJ(f),a.IJ(p),a.Qc(16777215)}else if(n==550){for(m=a.description,a.resize(c),w=0,x=m.Ba;w<x;w++){for($=m.qd(w),T=h.ua.Wa($),A=a.vb($),C=this.wb.vb($),N=0,F=this.Ob(r),W=this.Ka(F),V=this.Ya(F);N<W;V=this.V(V),N++)for(ee=this.Va(V),K=0;K<T;K++)B=C.Bg(ee*T+K),A.rr(N*T+K,B);a.kn($,A)}a.Qc(16777215)}return a},o.prototype.vB=function(r){for(var n=this.Ob(r);n!=-1;n=this.ar(n));n=this.GR(r);var a=this.ve(r);n!=-1?this.GJ(n,a):this.ld=a,a!=-1?this.KJ(a,n):this.rw=n,this.GQ(r)},o.prototype.Kg=function(r,n){return n===void 0?this.SE(r,h.ee.og()):this.SE(r,n)},o.prototype.SE=function(r,n){return r=this.kU(r),this.wb==null?this.wb=this.Kl=new h.de(n):this.Kl.Ll(n),this.ht=this.Kl.description,this.aA=1<this.ht.Ba,this.ld==-1?this.ld=r:(this.KJ(r,this.rw),this.GJ(this.rw,r)),this.rw=r},o.prototype.ve=function(r){return this.dd.U(r,1)},o.prototype.GR=function(r){return this.dd.U(r,0)},o.prototype.jc=function(r){return 2147483647&this.dd.U(r,2)},o.prototype.zJ=function(r,n,a){n=this.wk[n],(r=this.BF(r))>=n.size&&n.resize(Math.max(h.P.truncate(1.25*r),16),-1),n.write(r,a)},o.prototype.CF=function(r,n){return(r=this.BF(r))<(n=this.wk[n]).size?n.read(r):-1},o.prototype.TE=function(){this.wk==null&&(this.wk=[]);for(var r=0;r<this.wk.length;r++)if(this.wk[r]==null)return this.wk[r]=h.Zc.Ph(0),r;return this.wk.push(h.Zc.Ph(0)),this.wk.length-1},o.prototype.nW=function(r){this.wk[r]=null},o.prototype.Ob=function(r){return this.dd.U(r,3)},o.prototype.lv=function(r){return this.dd.U(r,4)},o.prototype.I=function(r){return this.dd.U(r,5)},o.prototype.ea=function(r){return this.dd.U(r,6)},o.prototype.Ip=function(r,n,a){for(var c=0,p=this.ld;p!=-1;p=this.ve(p)){var f=this.jc(p);if(h.ba.Ic(f)&&(!a||f==1736)){f=this.jc(p)==1736;for(var m=this.Ob(p);m!=-1;){for(var w=0,x=this.Ya(m);w<h.P.truncate(this.Ka(m)/2);){var $=this.V(x);if($==-1)break;var T=this.Va(x),A=this.Th(T);A!=null?T=A.Rb():(A=this.Va($),T=this.wb.Ar(T,A)),T<=r?(T==0?c==0&&(c=-1):c=1,$!=this.sj(m)&&(this.eC($,x),this.pd($,!0))):x=this.V(x),w++}for(w=this.Ya(m),x=this.ec(m)?w:this.sj(m);0<this.Ka(m);){if(($=this.Na(x))==-1){this.pd(x,!0),c==0&&(c=-1);break}var C=this.Va($);if((A=this.Th(C))!=null?T=A.Rb():(T=this.Va(x),T=this.wb.Ar(T,C)),T<=r)T==0?c==0&&(c=-1):c=1,this.eC($,x),this.pd($,!1),w==$&&(w=this.Ya(m));else if((x=this.Na(x))==w)break}x=this.Ka(m),n&&(f?3>x:2>x)?(m=this.ar(m),c=0<x?1:c==0?-1:c):m=this.Sb(m)}}}return c},o.prototype.eC=function(r,n){var a=this.Va(r),c=this.Va(n);if(this.Tg!=null&&(a=this.Tg.read(a),this.Tg.write(c,a)),this.ci!=null){for(c=0,a=this.ci.length;c<a;c++)if(this.ci[c]!=null){var p=this.Qa(r,c);p!=-1&&this.Sa(n,c,p)}}},o.prototype.Wl=function(r,n,a){var c=0,p=this.V(r);if(p==-1)throw h.i.Ra();for(var f=this.Va(r),m=this.Va(p),w=this.Th(f),x=w==null?this.wb.Ar(f,m):w.Rb(),$=0;$<a;$++){var T=n[$];if(0<T&&1>T){var A=T;w!=null&&(A=0<x?w.Sx(T)/x:0),this.wb.cD(f,m,A,this.pm());var C=this.xj(this.cd(r),p,this.pm());if(c++,w!=null){var N=w.el(0,T);A=this.Va(this.Na(C)),this.Yg(A,N),this.mf(C,N.xc()),$!=a-1&&n[$+1]!=1||(T=w.el(T,1),this.Yg(A,T))}}}return c},o.prototype.zX=function(r,n,a){var c=0,p=this.V(r);if(p==-1)throw h.i.ga("internal error");var f=this.Va(r),m=this.Va(p),w=this.Th(f),x=w==null?this.wb.Ar(f,m):w.Rb(),$=0;r=this.cd(r);for(var T=0;T<a;T++){var A=n[T];if($<A&&1>A){var C=A;if(w!=null&&(C=0<x?w.Sx(A)/x:0),this.wb.cD(f,m,C,this.pm()),C=this.pS(r,p,this.pm()),c++,w!=null){$=w.el($,A);var N=this.Va(this.Na(C));this.Yg(N,$),this.Db(C,$.qa,$.ma),T!=a-1&&n[T+1]!=1||($=w.el(A,1),C=this.Va(C),this.Yg(C,$))}}$=A}return c},o.prototype.pS=function(r,n,a){var c=n!=-1?this.Na(n):this.sj(r),p=c!=-1?this.V(c):-1,f=this.gI(a==null?this.gd:-1),m=this.Va(f);return a!=null&&this.wb.Ht(m,a),this.bj(f,r),this.Cc(f,p),this.Dc(f,c),p!=-1&&this.Dc(p,f),c!=-1&&this.Cc(c,f),a=this.ec(r),c=this.Ya(r),n==-1&&this.Xg(r,f),n==c&&(a&&c!=-1||this.Kf(r,f)),a&&p==-1&&(this.Cc(f,f),this.Dc(f,f)),this.Wj(r,this.Ka(r)+1),r=this.Rf(r),this.Uj(r,this.I(r)+1),f},o.prototype.mE=function(r,n,a){var c=this.Va(n),p=this.Va(a);if(0>c||p>this.gd-1)throw h.i.O("invalid call");if(c>p&&!this.ec(r))throw h.i.O("cannot iterate across an open path");for(r=0;n!=a;n=this.V(n))c=this.Va(n),(p=this.Th(c))!=null?r+=p.Rb():(p=this.Va(this.V(n)),r+=this.wb.Ar(c,p));return r},o.prototype.Eh=function(r,n){var a=this.Va(r);this.wb.Ht(a,n),(a=this.Th(a))!=null&&a.setStart(n),(r=this.Na(r))!=-1&&(r=this.Va(r),this.Th(r)!=null&&a.setEnd(n))},o.prototype.Wi=function(r,n){r=this.Va(r),this.wb.we(r,n)},o.prototype.mf=function(r,n){this.Db(r,n.x,n.y)},o.prototype.Db=function(r,n,a){var c=this.Va(r);this.wb.Db(c,n,a),(c=this.Th(c))!=null&&c.SB(n,a),(r=this.Na(r))!=-1&&(r=this.Va(r),this.Th(r)!=null&&c.Sl(n,a))},o.prototype.D=function(r,n){this.wb.D(this.ud.U(r,0),n)},o.prototype.Hc=function(r,n){this.wb.Aa[0].uc(2*this.ud.U(r,0),n)},o.prototype.Oa=function(r){var n=new h.h;return this.wb.D(this.ud.U(r,0),n),n},o.prototype.WF=function(r,n){this.it.uc(2*r,n)},o.prototype.Vc=function(r,n,a){return this.wb.Vc(r,this.Va(n),a)},o.prototype.setAttribute=function(r,n,a,c){this.wb.setAttribute(r,this.Va(n),a,c)},o.prototype.Va=function(r){return this.ud.U(r,0)},o.prototype.jh=function(){var r=new h.h;return this.D(void 0,r),r.y},o.prototype.hq=function(r,n){r=this.Va(r),n=this.Va(n);var a=this.wb.Aa[0].o;return a[2*r]===a[2*n]&&a[2*r+1]===a[2*n+1]},o.prototype.Ev=function(r,n){r=this.Va(r);var a=this.wb.Aa[0].o;return a[2*r]===n.x&&a[2*r+1]===n.y},o.prototype.jX=function(r,n){if(1>n&&(n=1),this.Tg==null){if(n==1)return;this.Tg=h.Zc.En(this.wb.I(),1)}(r=this.Va(r))>=this.Tg.size&&this.Tg.resize(r+1,1),this.Tg.write(r,n)},o.prototype.VF=function(r){return r=this.Va(r),this.Tg==null||r>=this.Tg.size?1:this.Tg.read(r)},o.prototype.Sa=function(r,n,a){n=this.ci[n],r=this.Va(r),n.size<this.wb.I()&&n.resize(this.wb.I(),-1),n.write(r,a)},o.prototype.Qa=function(r,n){return(r=this.Va(r))<(n=this.ci[n]).size?n.read(r):-1},o.prototype.Hd=function(){this.ci==null&&(this.ci=[]);for(var r=0;r<this.ci.length;r++)if(this.ci[r]==null)return this.ci[r]=h.Zc.Ph(0,-1),r;return this.ci.push(h.Zc.Ph(0,-1)),this.ci.length-1},o.prototype.Ud=function(r){this.ci[r]=null},o.prototype.cc=function(r){return this.Te!=null?(r=this.Va(r),this.Te[r]):null},o.prototype.fd=function(r,n){var a=this.ud.U(r,2);if(a==-1)return!1;if(this.aA){var c=new h.Ta;this.Wi(r,c),n.setStart(c),this.Wi(a,c),n.setEnd(c)}else this.wb.Hc(this.ud.U(r,0),Kt),n.gm(0,Kt),this.wb.Hc(this.ud.U(a,0),Kt),n.gm(1,Kt);return!0},o.prototype.cW=function(r,n,a){if(this.aA){var c=new h.Ta;this.Wi(r,c),a.setStart(c),this.Wi(n,c),a.setEnd(c)}else this.wb.Hc(r,Kt),a.gm(0,Kt),this.wb.Hc(n,Kt),a.gm(1,Kt)},o.prototype.wf=function(r,n){if(n!=-1){if(r!=this.Rf(n))throw h.i.Ra();var a=this.ds(n)}else a=this.lv(r);var c=this.mU(r);return n!=-1&&this.cp(n,c),this.bp(c,n),this.cp(c,a),a!=-1?this.bp(a,c):this.$o(r,c),n==-1&&this.ap(r,c),this.Tl(r,this.ea(r)+1),c},o.prototype.fG=function(r,n,a,c){r=this.wf(r,-1);for(var p=0,f=n,m=!1;f==a&&(m=!0),this.bj(f,r),p++,(f=this.V(f))!=n;);return this.mn(r,!0),this.Wj(r,p),m&&(n=a),this.Kf(r,n),this.Xg(r,this.Na(n)),this.ep(r,!1),c!=null&&(c[0]=m),r},o.prototype.ar=function(r){var n=this.ds(r),a=this.Sb(r),c=this.Rf(r);return n!=-1?this.bp(n,a):this.$o(c,a),a!=-1?this.cp(a,n):this.ap(c,n),this.sO(r),this.Tl(c,this.ea(c)-1),this.kF(r),a},o.prototype.sO=function(r){var n=this.Ya(r);if(n!=-1){for(var a=0,c=this.Ka(r);a<c;a++){var p=n;n=this.V(n),this.Qy(p)}n=this.Rf(r),this.Uj(n,this.I(n)-this.Ka(r))}this.Wj(r,0)},o.prototype.Sb=function(r){return this.md.U(r,2)},o.prototype.ds=function(r){return this.md.U(r,1)},o.prototype.Ka=function(r){return this.md.U(r,3)},o.prototype.ec=function(r){return(1&this.Up(r))!=0},o.prototype.mn=function(r,n){if(this.ec(r)!=n){if(0<this.Ka(r)){var a=this.Ya(r),c=this.sj(r);n?(this.Cc(c,a),this.Dc(a,c),a=this.Va(c)):(this.Cc(c,-1),this.Dc(a,-1),a=this.Va(c)),this.Yg(a,null)}this.OB(r,(1|this.Up(r))-1|(n?1:0))}},o.prototype.Rf=function(r){return this.md.U(r,7)},o.prototype.OS=function(r){return(2&this.Up(r))!=0},o.prototype.JB=function(r,n){this.OB(r,(2|this.Up(r))-2|(n?2:0))},o.prototype.qz=function(r){if(this.TS(r))return this.Pi.get(this.rv(r));var n=new h.zb,a=this.Ya(r);if(a==-1)return 0;var c=new h.h;this.D(a,c);for(var p=0,f=0,m=this.Ka(r);f<m;f++,a=this.V(a)){var w=this.cc(a);if(w==null){if(!this.fd(a,n))continue;w=n}p+=w.Rx(c.x,c.y)}return this.ep(r,!0),this.Pi.set(this.rv(r),p),p},o.prototype.ir=function(r,n,a){n=this.Ck[n],r=this.rv(r),n.size<this.Pi.size&&n.resize(this.Pi.size,-1),n.write(r,a)},o.prototype.tj=function(r,n){return(r=this.rv(r))<(n=this.Ck[n]).size?n.read(r):-1},o.prototype.Ey=function(){this.Ck==null&&(this.Ck=[]);for(var r=0;r<this.Ck.length;r++)if(this.Ck[r]==null)return this.Ck[r]=h.Zc.Ph(0),r;return this.Ck.push(h.Zc.Ph(0)),this.Ck.length-1},o.prototype.wB=function(r){this.Ck[r]=null},o.prototype.PT=function(r,n,a){if(a==-1)throw h.i.O();if(n!=a){var c=this.Sb(a),p=this.ds(a),f=this.Rf(a);p==-1?this.$o(f,c):this.bp(p,c),c==-1?this.ap(f,p):this.cp(c,p),this.Uj(f,this.I(f)-this.Ka(a)),this.Tl(f,this.ea(f)-1),p=n==-1?this.lv(r):this.ds(n),this.cp(a,p),this.bp(a,n),n==-1?this.ap(r,a):this.cp(n,a),p==-1?this.$o(r,a):this.bp(p,a),this.Uj(r,this.I(r)+this.Ka(a)),this.Tl(r,this.ea(r)+1),this.fx(a,r)}},o.prototype.jj=function(r,n){this.wb.we(this.Va(n),this.pm()),this.xj(r,-1,this.pm())},o.prototype.pd=function(r,n){var a=this.cd(r),c=this.Na(r),p=this.V(r);c!=-1&&this.Cc(c,p);var f=this.Ka(a);if(r==this.Ya(a)&&this.Kf(a,1<f?p:-1),p!=-1&&this.Dc(p,c),r==this.sj(a)&&this.Xg(a,1<f?c:-1),c!=-1&&p!=-1){c=this.Va(c);var m=this.Va(p);n?(n=this.Th(c))!=null&&(c=new h.h,this.wb.D(m,c),n.Rc(c)):(m=this.Va(r),n=this.Th(m),this.Yg(c,n),n!=null&&(c=this.wb.Oa(c),n.Ec(c)))}return this.Wj(a,f-1),a=this.Rf(a),this.Uj(a,this.I(a)-1),this.Qy(r),p},o.prototype.Ya=function(r){return this.md.U(r,4)},o.prototype.sj=function(r){return this.md.U(r,5)},o.prototype.V=function(r){return this.ud.U(r,2)},o.prototype.Na=function(r){return this.ud.U(r,1)},o.prototype.cd=function(r){return this.ud.U(r,3)},o.prototype.hc=function(r,n){return this.xj(r,-1,n)},o.prototype.$q=function(r){if(r===void 0)return this.$q(!1);if(r instanceof u)return new u(r);var n,a=-1,c=-1,p=-1,f=0,m=!1;for(n=this.ld;n!=-1;n=this.ve(n))if(!r||h.ba.Ic(this.jc(n))){for(a=this.Ob(n);a!=-1;a=this.Sb(a))if(p=c=this.Ya(a),f=0,c!=-1){m=!0;break}if(m)break}return u.sP(this,n,a,c,p,f,r)},o.prototype.Pc=function(r){if(this.Kl.Pc(r),this.Te!=null)for(var n=0,a=this.Te.length;n<a;n++)this.Te[n]!=null&&this.Te[n].Pc(r)},o.prototype.lr=function(r,n,a,c){c?this.BX(r,n,a):this.AX(r,n,a)},o.prototype.Dc=function(r,n){this.ud.T(r,1,n)},o.prototype.Cc=function(r,n){this.ud.T(r,2,n)},o.prototype.bj=function(r,n){this.ud.T(r,3,n)},o.prototype.Wj=function(r,n){this.md.T(r,3,n)},o.prototype.Kf=function(r,n){this.md.T(r,4,n)},o.prototype.Xg=function(r,n){this.md.T(r,5,n)},o.prototype.Tl=function(r,n){this.dd.T(r,6,n)},o.prototype.Uj=function(r,n){this.dd.T(r,5,n)},o.prototype.hJ=function(r){var n=r;do{var a=this.V(n);this.Cc(n,this.Na(n)),this.Dc(n,a),n=a}while(n!=r)},o.prototype.VB=function(r){this.gd=r},o.prototype.br=function(r){var n=this.ds(r),a=this.Sb(r),c=this.Rf(r);n!=-1?this.bp(n,a):this.$o(c,a),a!=-1?this.cp(a,n):this.ap(c,n),this.Kf(r,-1),this.Xg(r,-1),this.kF(r)},o.prototype.ni=function(r,n){var a=this.Na(r),c=this.V(r);if(a!=-1&&this.Cc(a,c),c!=-1&&this.Dc(c,a),a!=-1&&c!=-1)if(a=this.Va(a),c=this.Va(c),n){if((n=this.Th(a))!=null){var p=new h.h;this.wb.D(c,p),n.Rc(p)}}else n=this.Va(r),n=this.Th(n),this.Yg(a,n),n!=null&&(p=new h.h,this.wb.D(a,p),n.Ec(p));this.Qy(r)},o.prototype.TS=function(r){return(4&this.Up(r))!=0},o.prototype.ep=function(r,n){this.OB(r,(4|this.Up(r))-4|(n?4:0))},o.prototype.mx=function(r,n){var a=this.ud.o;this.wb.rc();var c=this.wb.Aa[0].o;r.Wd(0,n,function(p,f){var m=a[5*p];p=a[5*f],f=c[2*m],m=c[2*m+1];var w=c[2*p];return m<(p=c[2*p+1])?-1:m>p?1:f<w?-1:f>w?1:0})},o.prototype.aS=function(){for(var r=this.ld;r!=-1;r=this.ve(r))if(!h.ba.Ic(this.jc(r)))return!0;return!1},o.prototype.aC=function(r,n){for(var a=this.Ob(r),c=this.Ob(n),p=this.lv(r),f=this.lv(n),m=this.Ob(r);m!=-1;m=this.Sb(m))this.fx(m,n);for(m=this.Ob(n);m!=-1;m=this.Sb(m))this.fx(m,r);this.$o(r,c),this.$o(n,a),this.ap(r,f),this.ap(n,p),a=this.I(r),c=this.ea(r),p=this.ea(n),this.Uj(r,this.I(n)),this.Uj(n,a),this.Tl(r,p),this.Tl(n,c),a=this.dd.U(r,2),this.dd.T(r,2,this.dd.U(n,2)),this.dd.T(n,2,a)},o}(),h.hd=k})(G||(G={})),function(h){var k=function(v){function u(o,r,n,a){var c=v.call(this)||this;return c.aa=new h.l,o===void 0?c.ME():typeof o=="number"?c.NO(o,r,n,a):o instanceof h.Ta?r!==void 0?c.Su(o,r,n):c.OO(o):o instanceof h.ua?r!==void 0?c.QO(o,r):c.PO(o):o instanceof h.l?c.MO(o):c.ME(),c}return ft(u,v),u.prototype.Su=function(o,r,n){this.description=h.ee.og(),this.aa.Pa(),o.B()||this.uu(o,r,n)},u.prototype.MO=function(o){this.description=h.ee.og(),this.aa.L(o),this.aa.normalize()},u.prototype.PO=function(o){if(o==null)throw h.i.O();this.description=o,this.aa.Pa()},u.prototype.QO=function(o,r){if(o==null)throw h.i.O();this.description=o,this.aa.L(r),this.aa.normalize()},u.prototype.ME=function(){this.description=h.ee.og(),this.aa.Pa()},u.prototype.OO=function(o){this.description=h.ee.og(),this.aa.Pa(),o.B()||this.uu(o)},u.prototype.NO=function(o,r,n,a){this.description=h.ee.og(),this.L(o,r,n,a)},u.prototype.L=function(o,r,n,a){if(this.wc(),typeof o=="number")this.aa.L(o,r,n,a);else for(this.Pa(),r=0,n=o.length;r<n;r++)this.$b(o[r])},u.prototype.Yo=function(o){if(this.wc(),!o.WS())throw h.i.O();this.aa.L(o)},u.prototype.Pa=function(){this.wc(),this.aa.Pa()},u.prototype.B=function(){return this.aa.B()},u.prototype.S=function(){return this.aa.S()},u.prototype.da=function(){return this.aa.da()},u.prototype.gk=function(){return this.aa.gk()},u.prototype.Lp=function(){return this.aa.Lp()},u.prototype.Kp=function(){return this.aa.tf()},u.prototype.$b=function(o){if(o instanceof h.h)this.wc(),this.aa.$b(o);else if(o instanceof h.l)this.wc(),this.aa.$b(o);else if(o instanceof h.Ta){if(this.wc(),!o.Bc()){var r=o.description;if(this.description!=r&&this.Ll(r),this.B())this.uu(o);else{this.aa.$b(o.D());for(var n=1,a=r.Ba;n<a;n++)for(var c=r.Fd(n),p=h.ua.Wa(c),f=0;f<p;f++){var m=o.Vc(c,f),w=this.Ug(c,f);w.$b(m),this.setInterval(c,f,w)}}}}else if(o instanceof u&&!o.B())for((r=o.description)!=this.description&&this.Ll(r),this.aa.$b(o.aa),n=1,a=r.Ba;n<a;n++)for(c=r.qd(n),p=h.ua.Wa(c),f=0;f<p;f++)m=o.Ug(c,f),(w=this.Ug(c,f)).$b(m),this.setInterval(c,f,w)},u.prototype.uu=function(o,r,n){if(r!==void 0){this.aa.L(o.D(),r,n),n=1;for(var a=(r=o.description).Ba;n<a;n++)for(var c=r.Fd(n),p=h.ua.Wa(c),f=0;f<p;f++){var m=o.Vc(c,f);this.setInterval(c,f,m,m)}}else for(this.aa.L(o.la[0],o.la[1]),n=1,a=(r=o.description).Ba;n<a;n++)for(c=r.Fd(n),p=h.ua.Wa(c),f=0;f<p;f++)m=o.Vc(c,f),this.setInterval(c,f,m,m)},u.prototype.setInterval=function(o,r,n,a){if(n=typeof n=="number"?new h.Oc(n,a):n,this.wc(),o==0)if(r==0)this.aa.v=n.pa,this.aa.C=n.wa;else{if(r!=1)throw h.i.re();this.aa.G=n.pa,this.aa.H=n.wa}else this.nD(0,o,r,n.pa),this.nD(1,o,r,n.wa)},u.prototype.X=function(o,r){this.wc(),this.aa.X(o,r)},u.prototype.Pc=function(o){if(o instanceof h.Ed)this.wc(),o.fC(this.aa);else if(this.wc(),!this.aa.B()){var r=new h.GK;this.Ro(r),r.NS()?r.Pa():o.fC(r)}},u.prototype.copyTo=function(o){if(o.K()!=this.K())throw h.i.O();if(o.wc(),o.description=this.description,o.aa.L(this.aa),o.la=null,this.la!=null){o.pu();for(var r=0;r<2*(this.description.Be.length-2);r++)o.la[r]=this.la[r]}},u.prototype.Ja=function(){return new u(this.description)},u.prototype.He=function(){return this.aa.oF()},u.prototype.Rb=function(){return this.aa.qR()},u.prototype.K=function(){return 197},u.prototype.Eb=function(){return 2},u.prototype.dn=function(o){this.copyTo(o)},u.prototype.A=function(o){o.v=this.aa.v,o.G=this.aa.G,o.C=this.aa.C,o.H=this.aa.H},u.prototype.Ro=function(o){o.v=this.aa.v,o.G=this.aa.G,o.C=this.aa.C,o.H=this.aa.H,o.L(this.aa.v,this.aa.G,this.Pd(0,1,0),this.aa.C,this.aa.H,this.Pd(1,1,0))},u.prototype.Ug=function(o,r){var n=new h.Oc;return n.L(this.Pd(0,o,r),this.Pd(1,o,r)),n},u.prototype.If=function(o,r){r.kg(this.description);var n=this.description.Ba-1;switch(o){case 0:for(o=0;o<n;o++)for(var a=this.description.qd(o),c=h.ua.Wa(a),p=0;p<c;p++)r.setAttribute(a,p,this.Pd(0,a,p));r.Db(this.aa.v,this.aa.G);break;case 1:for(o=0;o<n;o++)for(a=this.description.qd(o),c=h.ua.Wa(a),p=0;p<c;p++)r.setAttribute(a,p,this.Pd(1,a,p));r.Db(this.aa.v,this.aa.H);break;case 2:for(o=0;o<n;o++)for(a=this.description.qd(o),c=h.ua.Wa(a),p=0;p<c;p++)r.setAttribute(a,p,this.Pd(0,a,p));r.Db(this.aa.C,this.aa.H);break;case 3:for(o=0;o<n;o++)for(a=this.description.qd(o),c=h.ua.Wa(a),p=0;p<c;p++)r.setAttribute(a,p,this.Pd(1,a,p));r.Db(this.aa.C,this.aa.G);break;default:throw h.i.re()}},u.prototype.gB=function(o,r){o=this.aa.gB(o),r.na(o.x,o.y)},u.prototype.cR=function(o,r){return r*(o.Qq-2)},u.prototype.pF=function(o,r,n){if(this.aa.B())throw h.i.ga("empty geometry");if(r==0)return o!=0?n!=0?this.aa.H:this.aa.C:n!=0?this.aa.G:this.aa.v;if(n>=h.ua.Wa(r))throw h.i.O();var a=this.description.Qf(r);return this.pu(),0<=a?this.la[this.cR(this.description,o)+this.description.CR(a)-2+n]:h.ua.te(r)},u.prototype.pu=function(){if(this.wc(),this.la==null&&2<this.description.Be.length){this.la=[];for(var o=u.Ig(this.description,0),r=u.Ig(this.description,1),n=0,a=1,c=this.description.Ba;a<c;a++){var p=this.description.qd(a),f=h.ua.Wa(p);p=h.ua.te(p);for(var m=0;m<f;m++)this.la[o+n]=p,this.la[r+n]=p,n++}}},u.prototype.un=function(o){if(this.la!=null)if(2<o.Be.length){for(var r=h.ee.Jw(o,this.description),n=[],a=u.Ig(this.description,0),c=u.Ig(this.description,1),p=u.Ig(o,0),f=u.Ig(o,1),m=0,w=1,x=o.Ba;w<x;w++){var $=o.qd(w),T=h.ua.Wa($);if(r[w]==-1){var A=h.ua.te($);for($=0;$<T;$++)n[p+m]=A,n[f+m]=A,m++}else for(A=this.description.$j(r[w])-2,$=0;$<T;$++)n[p+m]=this.la[a+A],n[f+m]=this.la[c+A],m++,A++}this.la=n}else this.la=null;this.description=o},u.prototype.Pd=function(o,r,n){if(this.aa.B())throw h.i.ga("This operation was performed on an Empty Geometry.");if(r==0)return o!=0?n!=0?this.aa.H:this.aa.C:n!=0?this.aa.G:this.aa.v;if(n>=h.ua.Wa(r))throw h.i.re();var a=this.description.Qf(r);return 0<=a?(this.pu(),this.la[u.Ig(this.description,o)+this.description.$j(a)-2+n]):h.ua.te(r)},u.prototype.nD=function(o,r,n,a){if(this.wc(),r==0)o!=0?n!=0?this.aa.H=a:this.aa.C=a:n!=0?this.aa.G=a:this.aa.v=a;else{if(n>=h.ua.Wa(r))throw h.i.re();if(!this.hasAttribute(r)){if(h.ua.vG(r,a))return;this.se(r)}r=this.description.Qf(r),this.pu(),this.la[u.Ig(this.description,o)+this.description.$j(r)-2+n]=a}},u.Ig=function(o,r){return r*(o.Be.length-2)},u.prototype.Fa=function(o){this.wc();var r=new h.l;return o.A(r),this.aa.Fa(r)},u.prototype.isIntersecting=function(o){return o instanceof h.l?this.aa.isIntersecting(o):this.aa.isIntersecting(o.aa)},u.prototype.Ku=function(o,r){this.wc(),o.B()?this.Pa():r!==void 0?this.uu(o,r,void 0):this.aa.Ku(o.Mg(),o.jh())},u.prototype.offset=function(o,r){this.wc(),this.aa.offset(o,r)},u.prototype.normalize=function(){this.wc(),this.aa.normalize()},u.prototype.tf=function(o){if(o===void 0){if(o=new h.Ta(this.description),this.B())return o;for(r=this.description.Ba,n=1;n<r;n++)for(a=this.description.Fd(n),c=h.ua.Wa(a),p=0;p<c;p++)f=.5*(this.Pd(0,a,p)+this.Pd(1,a,p)),o.setAttribute(a,p,f);return o.Db(this.aa.gk(),this.aa.Lp()),o}if(o.kg(this.description),this.B())o.Pa();else{for(var r=this.description.Ba,n=1;n<r;n++)for(var a=this.description.qd(n),c=h.ua.Wa(a),p=0;p<c;p++){var f=.5*(this.pF(0,a,p)+this.pF(1,a,p));o.setAttribute(a,p,f)}o.Db(this.aa.tf())}},u.prototype.hz=function(){return new h.Ta(this.aa.hz())},u.prototype.contains=function(o){return o instanceof h.Ta?!o.B()&&this.aa.contains(o.Mg(),o.jh()):this.aa.contains(o.aa)},u.prototype.WO=function(o){return this.aa.contains(o)},u.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof u)||this.description!=o.description)return!1;if(this.B())return!!o.B();if(!this.aa.Nb(o.aa))return!1;for(var r=0,n=2*(this.description.Be.length-2);r<n;r++)if(this.la[r]!=o.la[r])return!1;return!0},u.prototype.dc=function(){var o=this.description.dc();if(o=h.P.Uh(o,this.aa.dc()),!this.B()&&this.la!=null)for(var r=0,n=2*(this.description.Be.length-2);r<n;r++)o=h.P.Uh(o,this.la[r]);return o},u.prototype.fs=function(){return this.aa.v},u.prototype.hs=function(){return this.aa.G},u.prototype.es=function(){return this.aa.C},u.prototype.gs=function(){return this.aa.H},u.prototype.mg=function(){return h.ri.im(this,null)},u.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.aa.v+", "+this.aa.G+", "+this.aa.C+", "+this.aa.H+"]"},u}(h.ba);h.Gh=k}(G||(G={})),function(h){var k=function(){function v(u,o,r,n){u===void 0?this.Pa():(this.v=u,this.G=o,this.C=r,this.H=n)}return v.construct=function(u,o,r,n){var a=new v;return a.v=u,a.G=o,a.C=r,a.H=n,a},v.prototype.L=function(u,o,r,n){typeof u=="number"?r!==void 0?(this.v=u,this.G=o,this.C=r,this.H=n,this.normalize()):(this.v=u,this.G=o,this.C=u,this.H=o):u instanceof h.h?o!==void 0?(this.v=u.x-.5*o,this.C=this.v+o,this.G=u.y-.5*r,this.H=this.G+r,this.normalize()):(this.v=u.x,this.G=u.y,this.C=u.x,this.H=u.y):u instanceof v?this.L(u.v,u.G,u.C,u.H):u instanceof h.Oc&&(u.B()||o.B()?this.Pa():(this.v=u.pa,this.C=u.wa,this.G=o.pa,this.H=o.wa))},v.prototype.ax=function(u,o){if(o!==void 0)if(o==0)this.Pa();else{this.v=u[0].x,this.G=u[0].y,this.C=this.v,this.H=this.G;for(var r=1;r<o;r++){var n=u[r];n.x<this.v?this.v=n.x:n.x>this.C&&(this.C=n.x),n.y<this.G?this.G=n.y:n.y>this.H&&(this.H=n.y)}}else if(u==null||u.length==0)this.Pa();else for(n=u[0],this.L(n.x,n.y),r=1;r<u.length;r++)o=u[r],this.Lk(o.x,o.y)},v.prototype.Pa=function(){this.H=this.C=this.G=this.v=NaN},v.prototype.B=function(){return isNaN(this.v)},v.prototype.$b=function(u,o){typeof u=="number"?this.B()?(this.v=u,this.G=o,this.C=u,this.H=o):(this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o)):u instanceof h.h||u instanceof h.Od?this.$b(u.x,u.y):u instanceof v&&!u.B()&&(this.$b(u.v,u.G),this.$b(u.C,u.H))},v.prototype.Lk=function(u,o){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o)},v.prototype.X=function(u,o){this.B()||(this.v-=u,this.C+=u,this.G-=o,this.H+=o,(this.v>this.C||this.G>this.H)&&this.Pa())},v.prototype.scale=function(u){0>u&&this.Pa(),this.B()||(this.v*=u,this.C*=u,this.G*=u,this.H*=u)},v.prototype.zoom=function(u,o){this.B()||this.L(this.tf(),u*this.S(),o*this.da())},v.prototype.isIntersecting=function(u){return!this.B()&&!u.B()&&(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},v.prototype.zG=function(u){return(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},v.prototype.Fa=function(u){return!this.B()&&!u.B()&&(u.v>this.v&&(this.v=u.v),u.C<this.C&&(this.C=u.C),u.G>this.G&&(this.G=u.G),u.H<this.H&&(this.H=u.H),(u=this.v<=this.C&&this.G<=this.H)||this.Pa(),u)},v.prototype.gB=function(u){switch(u){case 0:return h.h.construct(this.v,this.G);case 1:return h.h.construct(this.v,this.H);case 2:return h.h.construct(this.C,this.H);case 3:return h.h.construct(this.C,this.G);default:throw h.i.re()}},v.prototype.hB=function(u){if(u==null||4>u.length)throw h.i.O();u[0]!=null?u[0].na(this.v,this.G):u[0]=h.h.construct(this.v,this.G),u[1]!=null?u[1].na(this.v,this.H):u[1]=h.h.construct(this.v,this.H),u[2]!=null?u[2].na(this.C,this.H):u[2]=h.h.construct(this.C,this.H),u[3]!=null?u[3].na(this.C,this.G):u[3]=h.h.construct(this.C,this.G)},v.prototype.oF=function(){return this.B()?0:this.S()*this.da()},v.prototype.qR=function(){return this.B()?0:2*(this.S()+this.da())},v.prototype.gk=function(){return(this.C+this.v)/2},v.prototype.Lp=function(){return(this.H+this.G)/2},v.prototype.S=function(){return this.C-this.v},v.prototype.da=function(){return this.H-this.G},v.prototype.move=function(u,o){this.B()||(this.v+=u,this.G+=o,this.C+=u,this.H+=o)},v.prototype.Ku=function(u,o){if(o!==void 0)this.move(u-this.gk(),o-this.Lp());else if(u instanceof h.h)this.Ku(u.x,u.y);else{if(!(u instanceof h.Ta))throw h.i.O();o=(this.C-this.v)/2;var r=(this.H-this.G)/2;this.v=u.Mg()-o,this.C=u.Mg()+o,this.G=u.jh()-r,this.H=u.jh()+r}},v.prototype.offset=function(u,o){this.v+=u,this.C+=u,this.G+=o,this.H+=o},v.prototype.normalize=function(){if(!this.B()){var u=Math.min(this.v,this.C),o=Math.max(this.v,this.C);this.v=u,this.C=o,u=Math.min(this.G,this.H),o=Math.max(this.G,this.H),this.G=u,this.H=o}},v.prototype.fn=function(u){u.na(this.v,this.G)},v.prototype.SI=function(u){u.na(this.C,this.G)},v.prototype.VI=function(u){u.na(this.v,this.H)},v.prototype.gn=function(u){u.na(this.C,this.H)},v.prototype.WS=function(){return this.B()||this.v<=this.C&&this.G<=this.H},v.prototype.tf=function(){return h.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},v.prototype.hz=function(){return h.h.construct(this.v,this.G)},v.prototype.contains=function(u,o){if(o!==void 0)return u>=this.v&&u<=this.C&&o>=this.G&&o<=this.H;if(u instanceof h.Ta)return this.contains(u.Mg(),u.jh());if(u instanceof h.h)return this.contains(u.x,u.y);if(u instanceof v)return u.v>=this.v&&u.C<=this.C&&u.G>=this.G&&u.H<=this.H;throw h.i.O()},v.prototype.jm=function(u,o){if(o!==void 0)return u>this.v&&u<this.C&&o>this.G&&o<this.H;if(u instanceof h.h)return this.jm(u.x,u.y);if(u instanceof v)return u.v>this.v&&u.C<this.C&&u.G>this.G&&u.H<this.H;throw h.i.O()},v.prototype.Nb=function(u){return u==this||u instanceof v&&(!(!this.B()||!u.B())||this.v==u.v&&this.G==u.G&&this.C==u.C&&this.H==u.H)},v.prototype.dc=function(){var u=this.v;u=h.P.truncate(u^u>>>32);var o=h.P.Uh(u);return u=this.C,u=h.P.truncate(u^u>>>32),o=h.P.Uh(u,o),u=this.G,u=h.P.truncate(u^u>>>32),o=h.P.Uh(u,o),u=this.H,u=h.P.truncate(u^u>>>32),h.P.Uh(u,o)},v.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},v.prototype.ty=function(u,o){var r=this.Zj(u),n=this.Zj(o);if((r&n)!=0)return 0;if((r|n)==0)return 4;var a=(r!=0?1:0)|(n!=0?2:0);do{var c=o.x-u.x,p=o.y-u.y;if(c>p?(r&v.QC)!=0?((r&v.ku)!=0?(u.y+=p*(this.v-u.x)/c,u.x=this.v):(u.y+=p*(this.C-u.x)/c,u.x=this.C),r=this.Zj(u)):(n&v.QC)!=0?((n&v.ku)!=0?(o.y+=p*(this.v-o.x)/c,o.x=this.v):(o.y+=p*(this.C-o.x)/c,o.x=this.C),n=this.Zj(o)):r!=0?((r&v.lu)!=0?(u.x+=c*(this.G-u.y)/p,u.y=this.G):(u.x+=c*(this.H-u.y)/p,u.y=this.H),r=this.Zj(u)):((n&v.lu)!=0?(o.x+=c*(this.G-o.y)/p,o.y=this.G):(o.x+=c*(this.H-o.y)/p,o.y=this.H),n=this.Zj(o)):(r&v.RC)!=0?((r&v.lu)!=0?(u.x+=c*(this.G-u.y)/p,u.y=this.G):(u.x+=c*(this.H-u.y)/p,u.y=this.H),r=this.Zj(u)):(n&v.RC)!=0?((n&v.lu)!=0?(o.x+=c*(this.G-o.y)/p,o.y=this.G):(o.x+=c*(this.H-o.y)/p,o.y=this.H),n=this.Zj(o)):r!=0?((r&v.ku)!=0?(u.y+=p*(this.v-u.x)/c,u.x=this.v):(u.y+=p*(this.C-u.x)/c,u.x=this.C),r=this.Zj(u)):((n&v.ku)!=0?(o.y+=p*(this.v-o.x)/c,o.x=this.v):(o.y+=p*(this.C-o.x)/c,o.x=this.C),n=this.Zj(o)),(r&n)!=0)return 0}while((r|n)!=0);return a},v.prototype.Zj=function(u){return(u.x<this.v?1:0)|(u.x>this.C?1:0)<<1|(u.y<this.G?1:0)<<2|(u.y>this.H?1:0)<<3},v.prototype.Ci=function(u){return!this.B()&&(this.S()<=u||this.da()<=u)},v.prototype.ub=function(u){return u instanceof h.h?Math.sqrt(this.aK(u)):Math.sqrt(this.ox(u))},v.prototype.ox=function(u){var o=0,r=0,n=this.v-u.C;return n>o&&(o=n),(n=this.G-u.H)>r&&(r=n),(n=u.v-this.C)>o&&(o=n),(n=u.G-this.H)>r&&(r=n),o*o+r*r},v.prototype.aK=function(u){var o=0,r=0,n=this.v-u.x;return n>o&&(o=n),(n=this.G-u.y)>r&&(r=n),(n=u.x-this.C)>o&&(o=n),(n=u.y-this.H)>r&&(r=n),o*o+r*r},v.prototype.en=function(u){this.B()?u.Pa():u.L(this.v,this.C)},v.ku=1,v.lu=4,v.QC=3,v.RC=12,v}();h.l=k}(G||(G={})),function(h){var k,v;(v=k||(k={}))[v.initialize=0]="initialize",v[v.initializeRed=1]="initializeRed",v[v.initializeBlue=2]="initializeBlue",v[v.initializeRedBlue=3]="initializeRedBlue",v[v.sweep=4]="sweep",v[v.sweepBruteForce=5]="sweepBruteForce",v[v.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",v[v.sweepRedBlue=7]="sweepRedBlue",v[v.sweepRed=8]="sweepRed",v[v.sweepBlue=9]="sweepBlue",v[v.iterate=10]="iterate",v[v.iterateRed=11]="iterateRed",v[v.iterateBlue=12]="iterateBlue",v[v.iterateBruteForce=13]="iterateBruteForce",v[v.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",v[v.resetRed=15]="resetRed",v[v.resetBlue=16]="resetBlue";var u=function(){function o(r,n){this.di=r,this.WG=n}return o.prototype.qr=function(r,n,a){this.di.xX(a,r,n,this.WG)},o.prototype.bq=function(r){return this.di.Sr(r,this.WG)},o}();k=function(){function o(){this.pw=this.po=this.ff=this.sd=null,this.yq=new h.l,this.Cm=this.Ij=this.Jj=this.Bd=this.Ff=this.Md=this.dw=this.ho=this.rd=this.Fb=null,this.Yb=-1,this.ra=0,this.Nk()}return o.prototype.mr=function(){this.Nk(),this.Qv=!0,this.Fb==null?(this.ho=new h.ja(0),this.Fb=[]):(this.ho.Ch(0),this.Fb.length=0)},o.prototype.bd=function(r,n){if(!this.Qv)throw h.i.Hb();var a=new h.l;a.L(n),this.ho.add(r),this.Fb.push(a)},o.prototype.Hp=function(){if(!this.Qv)throw h.i.Hb();this.Qv=!1,this.Fb!=null&&0<this.Fb.length&&(this.Yb=0,this.Jc=!1)},o.prototype.hK=function(){this.Nk(),this.Pv=!0,this.Fb==null?(this.ho=new h.ja(0),this.Fb=[]):(this.ho.Ch(0),this.Fb.length=0)},o.prototype.AD=function(r,n){if(!this.Pv)throw h.i.Hb();var a=new h.l;a.L(n),this.ho.add(r),this.Fb.push(a)},o.prototype.aF=function(){if(!this.Pv)throw h.i.Hb();this.Pv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==2?this.Yb=3:this.Yb!=3&&(this.Yb=1),this.Jc=!1)},o.prototype.gK=function(){this.Nk(),this.Ov=!0,this.rd==null?(this.dw=new h.ja(0),this.rd=[]):(this.dw.Ch(0),this.rd.length=0)},o.prototype.wD=function(r,n){if(!this.Ov)throw h.i.Hb();var a=new h.l;a.L(n),this.dw.add(r),this.rd.push(a)},o.prototype.$E=function(){if(!this.Ov)throw h.i.Hb();this.Ov=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==1?this.Yb=3:this.Yb!=3&&(this.Yb=2),this.Jc=!1)},o.prototype.next=function(){if(this.Jc)return!1;for(var r=!0;r;)switch(this.Yb){case 0:r=this.Bz();break;case 1:r=this.iS();break;case 2:r=this.fS();break;case 3:r=this.hS();break;case 4:r=this.IX();break;case 5:r=this.EX();break;case 6:r=this.FX();break;case 7:r=this.GX();break;case 8:r=this.sx();break;case 9:r=this.bC();break;case 10:r=this.Pz();break;case 11:r=this.$S();break;case 12:r=this.XS();break;case 13:r=this.YS();break;case 14:r=this.ZS();break;case 15:r=this.cJ();break;case 16:r=this.bJ();break;default:throw h.i.Ra()}return!this.Jc},o.prototype.UB=function(r){this.ra=r},o.prototype.oz=function(r){return this.Fb[r]},o.prototype.Wy=function(r){return this.rd[r]},o.prototype.pl=function(r){return this.ho.read(r)},o.prototype.jl=function(r){return this.dw.read(r)},o.Oz=function(r){return(1&r)==1},o.gq=function(r){return(1&r)==0},o.prototype.Nk=function(){this.Qv=this.Ov=this.Pv=!1,this.Df=this.Ef=this.Sg=this.pe=-1,this.Jc=!0},o.prototype.Bz=function(){if(this.Bf=this.Wf=-1,10>this.Fb.length)return this.pe=this.Fb.length,this.Yb=5,!0;this.sd==null&&(this.sd=new h.ur(!0),this.po=this.sd.getIterator(),this.Md=new h.ja(0)),this.sd.mr();for(var r=0;r<this.Fb.length;r++){var n=this.Fb[r];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),r=0;r<2*this.Fb.length;r++)this.Md.add(r);return this.Lt(this.Md,2*this.Fb.length,!0),this.pe=2*this.Fb.length,this.Yb=4,!0},o.prototype.iS=function(){if(this.Bf=this.Wf=-1,10>this.Fb.length||10>this.rd.length)return this.pe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new h.ur(!0),this.po=this.sd.getIterator(),this.Md=new h.ja(0)),this.sd.mr();for(var r=0;r<this.Fb.length;r++){var n=this.Fb[r];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),r=0;r<2*this.Fb.length;r++)this.Md.add(r);return this.Lt(this.Md,this.Md.size,!0),this.pe=this.Md.size,this.Ef!=-1&&(this.Bd.dh(this.Ef),this.Jj.resize(0),this.Ef=-1),this.Yb=7,this.bJ()},o.prototype.fS=function(){if(this.Bf=this.Wf=-1,10>this.Fb.length||10>this.rd.length)return this.pe=this.Fb.length,this.Yb=6,!0;this.ff==null&&(this.ff=new h.ur(!0),this.pw=this.ff.getIterator(),this.Ff=new h.ja(0)),this.ff.mr();for(var r=0;r<this.rd.length;r++){var n=this.rd[r];this.ff.Dr(n.v,n.C)}for(this.ff.Hp(),this.Ff.Jb(2*this.rd.length),this.Ff.resize(0),r=0;r<2*this.rd.length;r++)this.Ff.add(r);return this.Lt(this.Ff,this.Ff.size,!1),this.Sg=this.Ff.size,this.Df!=-1&&(this.Bd.dh(this.Df),this.Ij.resize(0),this.Df=-1),this.Yb=7,this.cJ()},o.prototype.hS=function(){if(this.Bf=this.Wf=-1,10>this.Fb.length||10>this.rd.length)return this.pe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new h.ur(!0),this.po=this.sd.getIterator(),this.Md=new h.ja(0)),this.ff==null&&(this.ff=new h.ur(!0),this.pw=this.ff.getIterator(),this.Ff=new h.ja(0)),this.sd.mr();for(var r=0;r<this.Fb.length;r++){var n=this.Fb[r];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.ff.mr(),r=0;r<this.rd.length;r++)n=this.rd[r],this.ff.Dr(n.v,n.C);for(this.ff.Hp(),this.Md.Jb(2*this.Fb.length),this.Ff.Jb(2*this.rd.length),this.Md.resize(0),this.Ff.resize(0),r=0;r<2*this.Fb.length;r++)this.Md.add(r);for(r=0;r<2*this.rd.length;r++)this.Ff.add(r);return this.Lt(this.Md,this.Md.size,!0),this.Lt(this.Ff,this.Ff.size,!1),this.pe=this.Md.size,this.Sg=this.Ff.size,this.Ef!=-1&&(this.Bd.dh(this.Ef),this.Jj.resize(0),this.Ef=-1),this.Df!=-1&&(this.Bd.dh(this.Df),this.Ij.resize(0),this.Df=-1),this.Yb=7,!0},o.prototype.IX=function(){var r=this.Md.get(--this.pe),n=r>>1;return o.gq(r)?(this.sd.remove(n),this.pe!=0||(this.Bf=this.Wf=-1,this.Jc=!0,!1)):(this.po.yB(this.Fb[n].v,this.Fb[n].C,this.ra),this.Wf=n,this.Yb=10,!0)},o.prototype.EX=function(){return--this.pe==-1?(this.Bf=this.Wf=-1,this.Jc=!0,!1):(this.Sg=this.Wf=this.pe,this.Yb=13,!0)},o.prototype.FX=function(){return--this.pe==-1?(this.Bf=this.Wf=-1,this.Jc=!0,!1):(this.Wf=this.pe,this.Sg=this.rd.length,this.Yb=14,!0)},o.prototype.GX=function(){var r=this.Md.get(this.pe-1),n=this.Ff.get(this.Sg-1),a=this.Sr(r,!0),c=this.Sr(n,!1);return a>c?this.sx():a<c?this.bC():o.Oz(r)?this.sx():o.Oz(n)?this.bC():this.sx()},o.prototype.sx=function(){var r=this.Md.get(--this.pe),n=r>>1;if(o.gq(r))return this.Ef!=-1&&this.Jj.get(n)!=-1?(this.Bd.kd(this.Ef,this.Jj.get(n)),this.Jj.set(n,-1)):this.sd.remove(n),this.pe!=0||(this.Bf=this.Wf=-1,this.Jc=!0,!1);if(this.Df!=-1&&0<this.Bd.cs(this.Df))for(r=this.Bd.sc(this.Df);r!=-1;){var a=this.Bd.getData(r);this.ff.wj(a),this.Ij.set(a,-1),a=this.Bd.lb(r),this.Bd.kd(this.Df,r),r=a}return 0<this.ff.size()?(this.pw.yB(this.Fb[n].v,this.Fb[n].C,this.ra),this.Wf=n,this.Yb=12):(this.Ef==-1&&(this.Bd==null&&(this.Bd=new h.kp),this.Jj=new h.ja(0),this.Jj.resize(this.Fb.length,-1),this.Jj.Xj(-1,0,this.Fb.length),this.Ef=this.Bd.Qh(1)),this.Jj.set(n,this.Bd.addElement(this.Ef,n)),this.Yb=7),!0},o.prototype.bC=function(){var r=this.Ff.get(--this.Sg),n=r>>1;if(o.gq(r))return this.Df!=-1&&this.Ij.get(n)!=-1?(this.Bd.kd(this.Df,this.Ij.get(n)),this.Ij.set(n,-1)):this.ff.remove(n),this.Sg!=0||(this.Bf=this.Wf=-1,this.Jc=!0,!1);if(this.Ef!=-1&&0<this.Bd.cs(this.Ef))for(r=this.Bd.sc(this.Ef);r!=-1;){var a=this.Bd.getData(r);this.sd.wj(a),this.Jj.set(a,-1),a=this.Bd.lb(r),this.Bd.kd(this.Ef,r),r=a}return 0<this.sd.size()?(this.po.yB(this.rd[n].v,this.rd[n].C,this.ra),this.Bf=n,this.Yb=11):(this.Df==-1&&(this.Bd==null&&(this.Bd=new h.kp),this.Ij=new h.ja(0),this.Ij.resize(this.rd.length,-1),this.Ij.Xj(-1,0,this.rd.length),this.Df=this.Bd.Qh(0)),this.Ij.set(n,this.Bd.addElement(this.Df,n)),this.Yb=7),!0},o.prototype.Pz=function(){if(this.Bf=this.po.next(),this.Bf!=-1)return!1;var r=this.Md.get(this.pe)>>1;return this.sd.wj(r),this.Yb=4,!0},o.prototype.$S=function(){if(this.Wf=this.po.next(),this.Wf!=-1)return!1;this.Bf=this.Wf=-1;var r=this.Ff.get(this.Sg)>>1;return this.ff.wj(r),this.Yb=7,!0},o.prototype.XS=function(){if(this.Bf=this.pw.next(),this.Bf!=-1)return!1;var r=this.Md.get(this.pe)>>1;return this.sd.wj(r),this.Yb=7,!0},o.prototype.YS=function(){if(--this.Sg==-1)return this.Yb=5,!0;this.yq.L(this.Fb[this.pe]);var r=this.Fb[this.Sg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(r)||(this.Bf=this.Sg,!1)},o.prototype.ZS=function(){if(--this.Sg==-1)return this.Yb=6,!0;this.yq.L(this.Fb[this.pe]);var r=this.rd[this.Sg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(r)||(this.Bf=this.Sg,!1)},o.prototype.cJ=function(){return this.sd==null?(this.Jc=!0,!1):(this.pe=this.Md.size,0<this.sd.size()&&this.sd.reset(),this.Ef!=-1&&(this.Bd.dh(this.Ef),this.Jj.resize(0),this.Ef=-1),this.Jc=!1,!0)},o.prototype.bJ=function(){return this.ff==null?(this.Jc=!0,!1):(this.Sg=this.Ff.size,0<this.ff.size()&&this.ff.reset(),this.Df!=-1&&(this.Bd.dh(this.Df),this.Ij.resize(0),this.Df=-1),this.Jc=!1,!0)},o.prototype.Lt=function(r,n,a){this.Cm==null&&(this.Cm=new h.Yt),a=new u(this,a),this.Cm.sort(r,0,n,a)},o.prototype.xX=function(r,n,a,c){var p=this;r.Wd(n,a,function(f,m){var w=p.Sr(f,c),x=p.Sr(m,c);return w<x||w==x&&o.gq(f)&&o.Oz(m)?-1:1})},o.prototype.Sr=function(r,n){var a=.5*this.ra;return n?(n=this.Fb[r>>1],o.gq(r)?n.G-a:n.H+a):(n=this.rd[r>>1],o.gq(r)?n.G-a:n.H+a)},o}(),h.qC=k}(G||(G={})),function(h){var k=function(){function v(){}return v.construct=function(u,o,r,n,a,c){var p=new v;return p.v=u,p.G=o,p.Xe=r,p.C=n,p.H=a,p.Dg=c,p},v.prototype.Pa=function(){this.Xe=this.v=NaN},v.prototype.B=function(){return isNaN(this.v)},v.prototype.NS=function(){return isNaN(this.Xe)},v.prototype.L=function(u,o,r,n,a,c){n!==void 0?typeof u=="number"?(this.v=u,this.G=o,this.Xe=r,this.C=n,this.H=a,this.Dg=c):(this.v=u.x-.5*o,this.C=this.v+o,this.G=u.y-.5*r,this.H=this.G+r,this.Xe=u.z-.5*n,this.Dg=this.Xe+n):(this.v=u,this.G=o,this.Xe=r,this.C=u,this.H=o,this.Dg=r)},v.prototype.move=function(u){this.v+=u.x,this.G+=u.y,this.Xe+=u.z,this.C+=u.x,this.H+=u.y,this.Dg+=u.z},v.prototype.copyTo=function(u){u.v=this.v,u.G=this.G,u.C=this.C,u.H=this.H},v.prototype.Lk=function(u,o,r){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o),isNaN(this.Xe)==0?this.Xe>r?this.Xe=r:this.Dg<r&&(this.Dg=r):this.Dg=this.Xe=r},v.prototype.$b=function(u,o,r){if(typeof u=="number")this.B()?(this.v=u,this.G=o,this.Xe=r,this.C=u,this.H=o,this.Dg=r):this.Lk(u,o,r);else if(u instanceof h.Od)this.$b(u.x,u.y,u.z);else{if(!(u instanceof v))throw h.i.O();u.B()||(this.$b(u.v,u.G,u.Xe),this.$b(u.C,u.H,u.Dg))}},v.prototype.construct=function(u,o,r){u.B()||o.B()?this.Pa():(this.v=u.pa,this.C=u.wa,this.G=o.pa,this.H=o.wa,this.Xe=r.pa,this.Dg=r.wa)},v.prototype.hB=function(u){if(u==null||8>u.length)throw h.i.O();u[0]=new h.Od(this.v,this.G,this.Xe),u[1]=new h.Od(this.v,this.H,this.Xe),u[2]=new h.Od(this.C,this.H,this.Xe),u[3]=new h.Od(this.C,this.G,this.Xe),u[4]=new h.Od(this.v,this.G,this.Dg),u[5]=new h.Od(this.v,this.H,this.Dg),u[6]=new h.Od(this.C,this.H,this.Dg),u[7]=new h.Od(this.C,this.G,this.Dg)},v.prototype.ax=function(u){if(u==null||u.length==0)this.Pa();else{var o=u[0];for(this.L(o.x,o.y,o.z),o=1;o<u.length;o++){var r=u[o];this.Lk(r.x,r.y,r.z)}}},v}();h.GK=k}(G||(G={})),function(h){(function(k){k.Ra=function(){var v=Error();return v.message="Internal Error",v},k.Fe=function(){var v=Error();return v.message="Not Implemented",v},k.Yk=function(){var v=Error();return v.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",v},k.Hb=function(){var v=Error();return v.message="Invalid Call",v},k.O=function(v){var u=Error();return u.message="Illegal Argument Exception",v!==void 0&&(u.message+=": "+v),u},k.gu=function(v){var u=Error();return u.message=v!==void 0?"Runtime Exception: "+v:"Runtime Exception.",u},k.ga=function(v){var u=Error();return u.message="Geometry Exception: "+v,u},k.yK=function(){var v=Error();return v.message="Assert Failed Exception",v},k.re=function(){var v=Error();return v.message="IndexOutOfBoundsException",v},k.OC=function(){var v=Error();return v.message="UserCancelException",v}})(h.i||(h.i={}))}(G||(G={})),function(h){(h=h.dm||(h.dm={}))[h.forward=0]="forward",h[h.reverse=1]="reverse"}(G||(G={})),function(h){var k=function(){function o(r,n){this.Xa=r,this.xH=n,this.DH=-1,this.ul=!1}return o.prototype.qe=function(){},o.prototype.next=function(){if(++this.DH==this.xH.I())return null;var r=this.xH.Oa(this.DH);r.scale(this.Xa.fc);var n=new h.Ea;return this.Xa.my(r,this.ul,n),n},o.prototype.Ma=function(){return 0},o}(),v=function(){function o(r,n,a){this.Xa=r,this.sw=n,this.Yn=!1,this.eo=a,this.cw=[0],this.sk=[0],this.Oj=[0],this.Hs=[0],this.ul=!1,this.sq=new h.Ea,this.uk=[]}return o.prototype.qe=function(){},o.prototype.next=function(){if(this.Yn){this.Yn=!1,this.td.ia();var r=h.ba.ig(this.sq);return h.Hg.Mk(r,this.Xa.Cq,!0,!0,this.Xa.Vb)}if(this.td==null&&(this.td=this.sw.Ha(),this.td.ab(),this.eo!=null&&this.eo.Zk(null,0)),!this.td.Ia()){if(!this.td.ab())return null;this.eo!=null&&this.eo.Zk(null,0)}r=null,this.sk[0]=0,this.zA=this.cw[0]=0,this.ei=NaN,this.Yn=!1;for(var n=this.uk.length=0,a=new h.h,c=new h.h,p=[0];this.td.Ia()&&8>this.zA;){var f=this.td.ia();if(a.N(f.ac()),c.N(f.xc()),a.scale(this.Xa.fc),c.scale(this.Xa.fc),h.dj.Ou(a,c)?a.x=c.x:h.dj.Mu(a,c)&&(c.x=a.x),this.uk.length=0,h.dj.lF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,a,c,this.Xa.KA,this.Xa.$s,p,this.Oj,this.Hs,this.uk,this.cw),this.eo!=null&&(f=this.uk.slice(0),this.eo.iG(this.eo.ea()-1,f,f.length-1)),h.dj.Nu(a,c)?(this.sq.Pa(),this.Xa.my(a,this.ul,this.sq),this.Yn=!0):(this.sq.Pa(),this.Yn=this.ry(p[0],this.sq)),this.Yn){if(this.td.mi(),this.td.zz()){this.td.mi(),this.td.ia();break}this.td.sW();break}r==null&&(r=new h.Ea).Zk(null,0),this.FD(r),n++}if(this.cw[0]=0,0<n){for(p=this.td.xb();0<n;)this.td.mi(),a.N(this.sw.Oa(this.td.xb())),c.N(this.sw.Oa(this.td.ik())),a.scale(this.Xa.fc),c.scale(this.Xa.fc),this.ul&&(h.dj.Ou(a,c)?a.x=c.x:h.dj.Mu(a,c)&&(c.x=a.x)),this.uk.length=0,h.dj.lF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,c,a,this.Xa.KA,this.Xa.$s,null,this.Oj,this.Hs,this.uk,this.cw),this.FD(r),n--;return a.N(this.sw.Oa(this.td.xb())),a.scale(this.Xa.fc),u.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,a,this.ei+1.570796326794897,this.ei+4.71238898038469,this.Xa.bo,this.ul,this.sk,r,NaN,NaN),this.td.Wb(p),this.td.ia(),n=h.ta.lj(null,r,!0),h.Hg.Mk(r,n,!0,!0,this.Xa.Vb)}return this.Yn=!1,this.td.ia(),r=h.ba.ig(this.sq),h.Hg.Mk(r,this.Xa.Cq,!0,!0,this.Xa.Vb)},o.prototype.FD=function(r){var n=this.uk[0],a=this.Oj[0]-1.570796326794897,c=this.Hs[0]+1.570796326794897;if(!isNaN(this.ei)){if(this.ei>=this.Oj[0]){var p=this.ei+1.570796326794897;a=p+3.141592653589793-(this.ei-this.Oj[0])}else a=(p=this.ei+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Oj[0]-this.ei));var f=!(this.ei>=this.Oj[0]&&3.141592653589793>=this.ei-this.Oj[0])&&!(this.ei<this.Oj[0]&&3.141592653589793<=this.Oj[0]-this.ei),m=!1;if(Math.abs(a-p)<=.5*this.Xa.bo)if(f){var w=r.Oa(r.I()-2);w.scale(this.Xa.fc);var x=new h.ha(0);for(h.kb.Sy(this.Xa.Ub,this.Xa.lc,n.x,n.y,w.x,w.y,x),w=x.u;w<=p;)w+=6.283185307179586;for(;w>p;)w-=6.283185307179586;w<a&&(m=!0)}else m=!0;m?(r.xB(0,r.I()-1),this.ul||((n=new h.h).N(r.Oa(r.I()-1)),n.scale(this.Xa.fc),-3.141592653589793>n.x-this.sk[0]?this.sk[0]-=6.283185307179586:3.141592653589793<n.x-this.sk[0]&&(this.sk[0]+=6.283185307179586)),f||(a=.5*(a+p))):(f?((p=new h.h).N(n),p.scale(1/this.Xa.fc),r.xf(0,-1,p)):u.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.uk[0],p,a,this.Xa.bo,this.ul,this.sk,r,NaN,NaN),this.zA+=1)}u.ly(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.Xa.Ae,this.uk,a,c,this.ul,this.sk,r),this.ei=this.Hs[0]},o.prototype.ry=function(r,n){return this.Xa.ry(this.uk,r,this.Oj[0],this.Hs[0],this.ul,n)},o.prototype.Ma=function(){return 0},o}(),u=function(){function o(){}return o.buffer=function(r,n,a,c,p,f){if(r==null)throw h.i.O("Geometry::Geodesic_bufferer::buffer");if(r.B())return new h.Ea(r.description);var m=new o;m.Rg=n,m.Kc=h.cb.tc(n);var w=h.cb.wv(m.Kc);if(m.Vb=f,m.Ub=h.cb.fv(m.Kc),m.lc=w*(2-w),m.fc=m.Kc.Id().bi,m.ra=m.Rg.Ln(),m.Cq=m.Kc.Ln(),m.$s=m.Cq*m.fc,m.Bq=1.570796326794897/m.fc,m.DY=3.141592653589793/m.fc,m.Ks=6.283185307179586/m.fc,m.EY=m.Ks/6,m.FA=0,m.CY=1.5707963267948966*m.Ub/m.FA,a==4?(m.Ae=2,m.Xv=!0):(m.Ae=a,m.Xv=!1),m.La=c,m.sb=Math.abs(c),isNaN(p)||.001>p?m.lX():m.ao=p,a=r.K(),h.ba.zd(a)?((a=new h.Ua(r.description)).oc(r,!0),r=a,a=1607):a==197&&(a=new h.l,r.A(a),a.S()<=m.ra||a.da()<=m.ra?((a=new h.Ua(r.description)).bd(r,!1),r=a,a=1607):((a=new h.Ea(r.description)).bd(r,!1),r=a,a=1736)),m.mX(),h.ba.Sn(a)||m.nX(),m.sb<=.5*m.ao)return a!=1736?new h.Ea(r.description):m.Xv?r:h.dj.Rr(r,m.Rg,m.Ae,m.KA,-1,f);if(0>m.La&&a!=1736)return new h.Ea(r.description);if(m.Xv&&h.ba.Ic(a)?(n=h.dj.Rr(r,n,4,NaN,m.ao,f),r=h.cb.Ah(n,m.Rg,m.Kc)):r=h.cb.Ah(r,m.Rg,m.Kc),(r=h.Ih.mj(r,m.Kc)).B())return new h.Ea(r.description);switch(!m.Xv&&h.ba.Ic(a)&&(r=h.dj.hI(m.fc,r)),r=o.yX(r,m.Kc),a){case 1736:n=m.MN(r);break;case 1607:n=m.NN(r);break;case 550:n=m.KN(r);break;case 33:n=m.LN(r);break;default:throw h.i.ga("corrupted_geometry")}return(m=h.cb.Ah(n,m.Kc,m.Rg)).Ll(r.description),m},o.prototype.MN=function(r){var n=new h.Ea;r=new v(this,r,n),r=h.Hh.local().W(r,this.Kc,this.Vb).next(),r=h.jp.oj(r,this.Kc,2);var a=new h.Ed;return a.scale(1/this.fc,1/this.fc),n.Pc(a),n=h.jp.oj(n,this.Kc,2),0<=this.La?h.Hh.local().W(n,r,this.Kc,this.Vb):h.lp.local().W(n,r,this.Kc,this.Vb)},o.prototype.NN=function(r){return r=new v(this,r,null),r=h.Hh.local().W(r,this.Kc,this.Vb).next(),h.jp.oj(r,this.Kc,2)},o.prototype.KN=function(r){return r=new k(this,r),r=h.Hh.local().W(r,this.Kc,this.Vb).next(),h.jp.oj(r,this.Kc,2)},o.prototype.LN=function(r){(r=r.D()).scale(this.fc);var n=new h.Ea;return this.my(r,!1,n),h.jp.oj(n,this.Kc,2)},o.prototype.ry=function(r,n,a,c,p,f){var m=r[0],w=r[r.length-1],x=m.y>w.y?m.y:w.y,$=h.F.q(this.Ub,this.lc,m.y<w.y?m.y:w.y);if(x=h.F.q(this.Ub,this.lc,x),.001<this.FA-($+n+this.sb)&&.001<this.FA+(x-n-this.sb))return!1;$=(n=a-1.570796326794897)-3.141592653589793,x=n+3.141592653589793;var T=(a=c+1.570796326794897)+3.141592653589793,A=[NaN],C=[NaN],N=[NaN],L=[NaN];if(c=!1,o.WI(this.Ub,this.lc,this.sb,m,n,$,w,a,A,C),o.WI(this.Ub,this.lc,this.sb,w,T,a,m,$,N,L),(a<A[0]&&A[0]<T||a<C[0]&&C[0]<T)&&(c=!0),c||($<N[0]&&N[0]<n||$<L[0]&&L[0]<n)&&(c=!0),!c&&p)return!1;for(var D=[],F=r.length-1;0<=F;F--)D.push(r[F]);return f.Pa(),f.Zk(null,0),F=[0],o.ly(this.Ub,this.lc,this.fc,this.sb,this.Ae,r,n,a,p,F,f),o.Jr(this.Ub,this.lc,this.fc,this.sb,w,a,T,this.bo,p,F,f,A[0],C[0]),o.ly(this.Ub,this.lc,this.fc,this.sb,this.Ae,D,T,x,p,F,f),o.Jr(this.Ub,this.lc,this.fc,this.sb,m,$,n,this.bo,p,F,f,N[0],L[0]),r=!1,p||(r=this.AE(this.fc,f)),c||r},o.prototype.my=function(r,n,a){a.Pa(),a.Zk(null,0),o.Jr(this.Ub,this.lc,this.fc,this.sb,r,-this.bo,6.283185307179586,this.bo,n,[0],a,NaN,NaN),n||this.AE(this.fc,a)},o.prototype.AE=function(r,n){var a=this.nO(r,n);return r=this.oO(r,n),a||r},o.prototype.nO=function(r,n){var a=n.I(),c=!1,p=new h.l;if(n.A(p),!h.s.$(p.H*r,1.570796326794897)&&!h.s.$(p.G*r,-1.570796326794897))return!1;var f=new h.h;for(--a;0<=a;a--)n.D(a,f),(f.y==p.H&&h.s.$(f.y*r,1.570796326794897)||f.y==p.G&&h.s.$(f.y*r,-1.570796326794897))&&(c=!0,this.GI(f,a,n));return c},o.prototype.oO=function(r,n){var a=n.Oa(0),c=n.Oa(n.I()-1);return 3.141592653589793<Math.abs(a.x-c.x)*r?(this.LV(n),!0):this.mO(n)},o.prototype.mO=function(r){return 0>r.He()&&(this.KV(r),!0)},o.prototype.GI=function(r,n,a){var c=a.I(),p=0<n?n-1:c-1;if(c=a.Oa(n<c-1?n+1:0),p=a.Oa(p),!h.s.$(c.y,r.y)&&!h.s.$(c.x,r.x)){var f=new h.h;f.na(c.x,r.y),a.Db(n,f)}h.s.$(p.y,r.y)||h.s.$(p.x,r.x)||((c=new h.h).na(p.x,r.y),a.xf(0,n,c))},o.prototype.LV=function(r){var n=new h.Ea,a=new h.Ea,c=new h.Ed,p=r.Oa(0),f=r.Oa(r.I()-1),m=new h.h;p.x>f.x?(f=this.Bq,c.gg(-this.Ks,0)):(f=-this.Bq,c.gg(this.Ks,0)),n.add(r,!1),r.Pa(),a.add(n,!1),a.Pc(c),p=new h.l,a.A(p),p.X((this.Ks-p.S())/2,0),p.G=-this.Bq,p.H=this.Bq;for(var w=0;w<a.I();w++)a.D(w,m),n.xf(0,-1,m);for(a.Pc(c),w=0;w<a.I();w++)a.D(w,m),n.xf(0,-1,m);a=n.Oa(0),c=n.Oa(n.I()-1),m.na(c.x,f),n.xf(0,-1,m),m.na(.5*(c.x+a.x),f),n.xf(0,-1,m),m.na(a.x,f),n.xf(0,-1,m),n=h.Ih.ls(n,this.Kc,2,!0,p.v),n=h.Ih.ls(n,this.Kc,2,!0,p.C),n=h.Vd.clip(n,p,this.Cq,NaN),r.add(n,!1)},o.prototype.KV=function(r){var n=new h.l;r.A(n),n.X((this.Ks-n.S())/2,0),n.G=-this.Bq,n.H=this.Bq,r.Zk(null,0);var a=new h.h;a.na(n.v,n.G),r.xf(1,-1,a),a.na(n.v,n.H),r.xf(1,-1,a),a.na(.5*(n.v+n.C),n.H),r.xf(1,-1,a),a.na(n.C,n.H),r.xf(1,-1,a),a.na(n.C,n.G),r.xf(1,-1,a),a.na(.5*(n.v+n.C),n.G),r.xf(1,-1,a)},o.ly=function(r,n,a,c,p,f,m,w,x,$,T){var A=null;x||((A=new h.h).Sc(),0<T.I()&&(A.N(T.Oa(T.I()-1)),A.scale(a)));var C=new h.ha(0),N=new h.ha(0),L=new h.ha(0),D=new h.h,F=new h.h,V=f[f.length-1];a=1/a;for(var W=0;W<f.length;W++){var K=f[W];if(W==0)var B=m;else W==f.length-1?B=w:(h.kb.xd(r,n,V.x,V.y,K.x,K.y,null,null,C,p),B=C.u-1.570796326794897);h.kb.zi(r,n,K.x,K.y,c,B,N,L),x?F.na(N.u,L.u):(D.na(N.u,L.u),o.ZI(K.x,D.x,A.x,$),F.na($[0]+D.x,D.y),A.N(F)),F.scale(a),T.xf(0,-1,F)}},o.Jr=function(r,n,a,c,p,f,m,w,x,$,T,A,C){if(!(m-f<w)){var N=new h.ha(0),L=new h.ha(0),D=new h.h,F=new h.h,V=null;x||((V=new h.h).Sc(),0<T.I()&&(V.N(T.Oa(T.I()-1)),V.scale(a)));var W=h.P.truncate(Math.ceil(f/w)),K=W++*w;for(K==f&&(K=W++*w),a=1/a;K<m+w&&(f<A&&A<K?(K=A,W--):f<C&&C<K&&(K=C,W--),!(K>=m));)h.kb.zi(r,n,p.x,p.y,c,K,N,L),x?F.na(N.u,L.u):(D.na(N.u,L.u),o.ZI(p.x,D.x,V.x,$),F.na($[0]+D.x,D.y),V.N(F)),F.scale(a),T.xf(0,-1,F),f=K,K=W++*w}},o.WI=function(r,n,a,c,p,f,m,w,x,$){var T=new h.h,A=new h.h,C=new h.ha(0),N=new h.ha(0);for(h.kb.zi(r,n,c.x,c.y,a,p,C,N),T.na(C.u,N.u),h.kb.zi(r,n,c.x,c.y,a,f,C,N),A.na(C.u,N.u),a=new h.ha(0),h.kb.Sy(r,n,m.x,m.y,T.x,T.y,a),x[0]=a.u,h.kb.Sy(r,n,m.x,m.y,A.x,A.y,a),$[0]=a.u;x[0]<=$[0];)x[0]+=6.283185307179586;for(;x[0]>$[0];)x[0]-=6.283185307179586;for(;x[0]>=w;)x[0]-=6.283185307179586,$[0]-=6.283185307179586;for(;x[0]<w;)x[0]+=6.283185307179586,$[0]+=6.283185307179586},o.ZI=function(r,n,a,c){if(isNaN(a)){for(;3.141592653589793<c[0]+n-r;)c[0]-=6.283185307179586;for(;3.141592653589793<r-(c[0]+n);)c[0]+=6.283185307179586}else 3.141592653589793<c[0]+n-a?c[0]-=6.283185307179586:3.141592653589793<a-(c[0]+n)&&(c[0]+=6.283185307179586)},o.yX=function(r,n){var a=r.K(),c=h.ba.Ic(a)?r.ea():a==550?r.I():1;if(c==1)return r;var p=new h.ja(0);p.resize(c);for(var f=[],m=new h.l,w=0;w<c;w++){if(p.write(w,w),h.ba.Ic(a)){r.Sj(w,m);var x=m.tf()}else x=r.Oa(w);x=h.PK.OX(n,x),f[w]=x}for(p.Wd(0,p.size,function($,T){return f[$]<f[T]?-1:f[$]>f[T]?1:0}),n=r.Ja(),w=0;w<c;w++)m=p.read(w),h.ba.Ic(a)?n.addPath(r,m,!0):n.Gd(r,m,m+1);return n},o.prototype.mX=function(){var r=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);r=Math.min(r,.39269908169872414*this.Ub);var n=new h.h;n.na(0,10*this.fc);var a=45*this.fc,c=new h.ha(0),p=new h.ha(0),f=new h.ha(0),m=new h.ha(0),w=new h.ha(0),x=new h.ha(0),$=new h.ha(0),T=new h.ha(0),A=new h.h,C=new h.h,N=new h.h,L=new h.h;h.kb.zi(this.Ub,this.lc,n.x,n.y,r,0,c,p),A.na(c.u,p.u),h.kb.zi(this.Ub,this.lc,n.x,n.y,r,a,f,m),C.na(f.u,m.u),c=new h.ha(0),p=new h.ha(0);for(var D=new h.ha(0);h.kb.zi(this.Ub,this.lc,n.x,n.y,r,.5*(0+a),w,x),N.na(w.u,x.u),h.kb.xd(this.Ub,this.lc,A.x,A.y,C.x,C.y,c,p,null,2),h.kb.pj(this.Ub,this.lc,A.x,A.y,.5*c.u,p.u,$,T,2),L.na($.u,T.u),h.kb.xd(this.Ub,this.lc,N.x,N.y,L.x,L.y,D,null,null,2),!(D.u<=this.ao);)a*=.9,h.kb.zi(this.Ub,this.lc,n.x,n.y,r,a,f,m),C.na(f.u,m.u);this.bo=6.283185307179586/Math.ceil(6.283185307179586/(a-0))},o.prototype.nX=function(){var r=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);r=Math.min(r,.39269908169872414*this.Ub);var n=new h.h,a=new h.h;n.na(0,10*this.fc),a.na(10*this.fc,10*this.fc);var c=new h.ha(0),p=new h.ha(0),f=new h.ha(0);h.kb.xd(this.Ub,this.lc,n.x,n.y,a.x,a.y,f,c,p,this.Ae);var m=new h.ha(0),w=new h.ha(0),x=new h.ha(0),$=new h.ha(0),T=new h.h,A=new h.ha(0),C=new h.ha(0),N=new h.ha(0),L=new h.ha(0),D=new h.ha(0),F=new h.ha(0),V=new h.ha(0),W=new h.ha(0),K=new h.ha(0),B=new h.h,ee=new h.h,ae=new h.h,me=new h.h,fe=1;c=c.u,p=p.u+1.570796326794897,f=f.u,h.kb.zi(this.Ub,this.lc,n.x,n.y,r,c-1.570796326794897,C,N),B.na(C.u,N.u),h.kb.zi(this.Ub,this.lc,a.x,a.y,r,p,L,D),ee.na(L.u,D.u),C=new h.ha(0),N=new h.ha(0),p=new h.ha(0);for(var pe=new h.ha(0);h.kb.pj(this.Ub,this.lc,n.x,n.y,.5*(0+fe)*f,c,m,w,this.Ae),T.na(m.u,w.u),h.kb.xd(this.Ub,this.lc,n.x,n.y,T.x,T.y,null,null,A,this.Ae),h.kb.zi(this.Ub,this.lc,T.x,T.y,r,A.u+1.570796326794897,F,V),ae.na(F.u,V.u),h.kb.xd(this.Ub,this.lc,B.x,B.y,ee.x,ee.y,C,N,null,2),h.kb.pj(this.Ub,this.lc,B.x,B.y,.5*C.u,N.u,W,K,2),me.na(W.u,K.u),h.kb.xd(this.Ub,this.lc,ae.x,ae.y,me.x,me.y,p,null,null,2),!(p.u<=this.ao);)fe*=.9,h.kb.pj(this.Ub,this.lc,n.x,n.y,fe*f,c,x,$,this.Ae),a.na(x.u,$.u),h.kb.xd(this.Ub,this.lc,n.x,n.y,a.x,a.y,null,null,pe,this.Ae),h.kb.zi(this.Ub,this.lc,a.x,a.y,r,pe.u+1.570796326794897,L,D),ee.na(L.u,D.u);1e5<(r=fe*f)&&(r=1e5),this.KA=r},o.prototype.lX=function(){var r=5e4<this.sb?100:1e4<this.sb?10:1;500>this.sb/r&&(r=this.sb/500),.01>r&&(r=.01),this.ao=r},o}();h.NK=u}(G||(G={})),function(h){var k=function(){function v(){}return v.Of=function(u,o){var r=new h.h;r.N(o),u.push(r)},v.wp=function(u,o){u.add(o.x),u.add(o.y)},v.bB=function(u){u.Ch(u.size-2)},v.iB=function(u,o){o.na(u.get(u.size-2),u.get(u.size-1))},v.Rr=function(u,o,r,n,a,c){if(u==null)throw h.i.O();var p=u.K();if(u.B()||h.ba.Sn(p))return u;var f=new v;f.Rg=o,f.Kc=h.cb.tc(o);var m=h.cb.wv(f.Kc);if(f.Vb=c,f.Ub=h.cb.fv(f.Kc),f.lc=m*(2-m),f.fc=f.Kc.Id().bi,f.Cq=f.Kc.Ln(),f.$s=f.Cq*f.fc,f.uA=n,f.tA=a,f.Ae=r,p==197?(r=new h.Ea(u.description)).bd(u,!1):h.ba.zd(p)?(r=new h.Ua(u.description)).oc(u,!0):r=u,f.Ae!=4){if((o=f.Rg.Nb(f.Kc)==0?h.cb.Ah(r,f.Rg,f.Kc):h.Ih.mj(r,f.Kc)).B())return o;o=v.hI(f.fc,o),o=f.Uy(o),o=h.jp.oj(o,f.Kc,f.Ae),f=h.cb.Ah(o,f.Kc,f.Rg)}else{if(h.Gg.Tb(o)==2?(u=h.cb.ol(),(o=h.Wk.local().W(r,u,o,c))==u&&(o=new h.Ea,u.copyTo(o))):o=h.Ih.mj(r,f.Kc),o.B())return o;f=f.qX(o)}return f},v.hI=function(u,o){var r=new h.l;if(o.yc(r),3.141592653589793>r.S()*u)return o;var n=!1;r=o.Ha();for(var a=new h.h,c=new h.h;r.ab();)for(;r.Ia();){var p=r.ia();if(a.N(p.ac()),c.N(p.xc()),a.scale(u),c.scale(u),3.141592653589793<Math.abs(a.x-c.x)){var f=v.Nu(a,c);if(!f){n=!0;break}if(6.283185307179586<Math.abs(a.x-c.x)){n=!0;break}}}if(!n)return o;n=o.Ja();var m=1<o.description.Ba,w=new h.h,x=new h.h,$=new h.h,T=new h.h,A=new h.Ta;for(r.$i();r.ab();)for(var C=NaN,N=[0];r.Ia();){if(p=r.ia(),a.N(p.ac()),c.N(p.xc()),a.scale(u),c.scale(u),isNaN(C)?(v.Xi(a.x,NaN,N),x.N(a)):x.N($),C=x.x,f=v.Nu(a,c)){if(6.283185307179586<c.x-a.x)for(;6.283185307179586<c.x-a.x;)c.x-=6.283185307179586;if(-6.283185307179586>c.x-a.x)for(;-6.283185307179586>c.x-a.x;)c.x+=6.283185307179586;v.Xi(c.x,NaN,N),$.N(c)}else w.N(c),v.qU(w),v.Xi(w.x,C,N),$.na(N[0]+w.x,w.y);.5>Math.abs($.x-c.x)&&$.N(c),m?(p.Uw(0,A),T.N(x),T.scale(1/u),A.Db(T),(f=r.xm())?n.nf(A):n.lineTo(A),r.Rn()&&!o.ec(r.gb)&&(p.Uw(1,A),T.N($),T.scale(1/u),A.Db(T),n.lineTo(A))):((f=r.xm())&&n.Cz(null,0),p=n.ea()-1,T.N(x),T.scale(1/u),n.xf(p,-1,T),r.Rn()&&!o.ec(r.gb)&&(T.N($),T.scale(1/u),n.xf(p,-1,T)))}return n},v.lF=function(u,o,r,n,a,c,p,f,m,w,x,$){var T=new h.h,A=new h.h,C=0<n.compare(a);v.YI(C,n,a,T,A),v.mF(u,o,r,T,A,c,NaN,p,f,m,w,null,x,$),C&&v.ZB(m,w,null,x)},v.prototype.Uy=function(u){var o=u.Ja(),r=u.Ha(),n=[],a=null,c=null,p=1<u.description.Ba;p&&(a=new h.ce(0),c=new h.hg);for(var f=[0],m=new h.h,w=new h.h,x=new h.h,$=new h.h;r.ab();)for(f[0]=0;r.Ia();){var T=r.ia();m.N(T.ac()),w.N(T.xc()),m.scale(this.fc),w.scale(this.fc);var A=0<m.compare(w);v.YI(A,m,w,x,$),n.length=0,a!=null&&a.Ch(0),0<this.uA?v.mF(this.Ub,this.lc,this.Ae,x,$,this.uA,this.tA,this.$s,null,null,null,p?a:null,n,f):v.TQ(this.Ub,this.lc,this.Ae,x,$,this.tA,this.$s,p?a:null,n,f),A&&v.ZB(null,null,p?a:null,n),n[0].N(T.ac()),n[n.length-1].N(T.xc());for(var C=1;C<n.length-1;C++)n[C].scale(1/this.fc);p?(A=v.XI(A,T,c),v.LD(r.xm(),r.Rn()&&!u.ec(r.gb),T,A,a,n,o)):v.KD(r.xm(),r.Rn()&&!u.ec(r.gb),n,o)}return o},v.prototype.qX=function(u){var o=u.Ja(),r=u.Ha(),n=[],a=null,c=new h.hg,p=1<u.description.Ba;for(p&&(a=new h.ce(0));r.ab();)for(;r.Ia();){var f=r.ia(),m=f.ac(),w=f.xc();m=0<m.compare(w),w=v.XI(m,f,c),n.length=0,a!=null&&a.Ch(0),v.pX(this.Ub,this.lc,this.fc,w,this.Rg,this.uA,this.tA,p?a:null,n),m&&v.ZB(null,null,p?a:null,n),p?v.LD(r.xm(),r.Rn()&&!u.ec(r.gb),f,w,a,n,o):v.KD(r.xm(),r.Rn()&&!u.ec(r.gb),n,o)}return o},v.KD=function(u,o,r,n){u&&n.Cz(null,0),u=n.ea()-1;var a=r.slice(0);n.iG(u,a,a.length-1),o&&n.xf(u,-1,r[r.length-1])},v.LD=function(u,o,r,n,a,c,p){var f=new h.Ta;if(r.Uo(f),u?p.nf(f):p.lineTo(f),2<c.length){u=n.Rb();for(var m=1;m<c.length-1;m++){var w=n.FG(a.get(m)*u);n.Uw(w,f),f.Db(c[m]),p.lineTo(f)}}o&&(r.Qo(f),p.lineTo(f))},v.mF=function(u,o,r,n,a,c,p,f,m,w,x,$,T,A){var C=new h.ha(0),N=new h.ha(0),L=new h.ha(0);h.kb.xd(u,o,n.x,n.y,a.x,a.y,L,C,N,r),L=L.u;var D=C=C.u;0>D&&(D+=6.283185307179586),0>(N=N.u)&&(N+=6.283185307179586),m!=null&&(m[0]=L),w!=null&&(w[0]=D),x!=null&&(x[0]=N),w=m=NaN,$!=null&&(m=((w=h.F.Bh(u,o))-(x=h.F.q(u,o,n.y)))/L,w=(w+x)/L),x=v.Ou(n,a),N=v.Mu(n,a),D=x||N;var F=v.xE(n,a,f),V=new h.ha(0),W=new h.ha(0),K=new h.h,B=new h.h,ee=new h.h;v.Xi(n.x,NaN,A);var ae=[A[0]];if(L<=c)v.Of(T,n),v.Xi(a.x,NaN,A),$!=null&&$.add(0),D?(x&&v.eB(n,a,$,T),N&&v.cB(n,a,$,T)):F?v.dB(n,a,C,m,w,$,T):0<p&&(B.na(n.x-ae[0],n.y),K.na(a.x-A[0],a.y),v.Ty(u,o,r,n,L,C,B,K,0,1,p,$,T,ae)),v.Of(T,a);else{var me=L/((c=1+h.P.truncate(Math.ceil(L/c)))-1),fe=new h.h,pe=0;v.Of(T,n),fe.N(n),B.na(n.x-A[0],n.y),$!=null&&$.add(0);for(var be=1;be<c;be++){if(be<c-1){h.kb.pj(u,o,n.x,n.y,be*me,C,V,W,r),K.na(V.u,W.u),v.Xi(K.x,fe.x,A),ee.na(A[0]+K.x,K.y);var Pe=be/(c-1)}else v.Xi(a.x,NaN,A),K.na(a.x-A[0],a.y),ee.N(a),Pe=1;D?(be==1&&x&&v.eB(n,ee,$,T),be==c-1&&N&&v.cB(fe,a,$,T)):F?v.wE(fe,ee,f)&&(n.x<a.x?fe.x>ee.x&&(A[0]+=6.283185307179586,ee.na(A[0]+K.x,K.y)):fe.x<ee.x&&(A[0]-=6.283185307179586,ee.na(A[0]+K.x,K.y)),v.dB(fe,ee,C,m,w,$,T)):0<p&&v.Ty(u,o,r,n,L,C,B,K,pe,Pe,p,$,T,ae),v.Of(T,ee),$!=null&&$.add(Pe),fe.N(ee),B.N(K),ae[0]=A[0],pe=Pe}}},v.TQ=function(u,o,r,n,a,c,p,f,m,w){var x=new h.ha(0),$=new h.ha(0),T=new h.ha(0);h.kb.xd(u,o,n.x,n.y,a.x,a.y,T,x,$,r),$=T.u,x=x.u;var A=T=NaN;if(f!=null){A=h.F.Bh(u,o);var C=h.F.q(u,o,n.y);T=(A-C)/$,A=(A+C)/$}C=v.Ou(n,a);var N=v.Mu(n,a),L=C||N;p=v.xE(n,a,p);var D=v.Nu(n,a);D=L||p||D,v.Xi(n.x,NaN,w);var F=new h.h;v.Of(m,n),F.N(n),f!=null&&f.add(0),D?(L?(C&&v.eB(n,a,f,m),N&&v.cB(n,a,f,m)):p&&v.dB(n,a,x,T,A,f,m),v.Xi(a.x,NaN,w),v.Of(m,a)):$<=c?(v.Xi(a.x,NaN,w),v.Of(m,a)):(T=new h.h,p=new h.h,T.N(n),p.N(a),T.x-=w[0],p.x-=w[0],-3.141592653589793>p.x?p.x+=6.283185307179586:3.141592653589793<p.x&&(p.x-=6.283185307179586),v.Ty(u,o,r,n,$,x,T,p,0,1,c,f,m,w),v.Of(m,a),v.Xi(a.x,NaN,w)),f!=null&&f.add(1)},v.Ty=function(u,o,r,n,a,c,p,f,m,w,x,$,T,A){var C=new h.h,N=new h.h;C.na(p.x+A[0],p.y),new h.ha(0),new h.ha(0),new h.ha(0),new h.ha(0);var L=new h.ha(0),D=new h.ha(0),F=new h.ha(0),V=new h.h,W=new h.h,K=new h.h,B=new h.h;V.N(p),W.N(f),p=new h.ce(0),f=new h.ce(0),v.wp(p,W),f.add(w);var ee=new h.h,ae=new h.zb,me=[];for(v.QJ(4,me);0<p.size;){for(var fe,pe=!1,be=NaN,Pe=0;3>Pe;Pe++)if(fe=me[Pe]*w+(1-me[Pe])*m,h.kb.pj(u,o,n.x,n.y,fe*a,c,L,D,r),K.na(L.u,D.u),Pe==0&&(be=fe,B.N(K)),v.JW(V,K,W,ae),ae.ic(ae.fe(K,!0),ee),h.kb.xd(u,o,K.x,K.y,ee.x,ee.y,F,null,null,2),F.u>x){pe=!0;break}pe?(W.N(B),w=be,v.wp(p,W),f.add(w)):(v.bB(p),f.Fn(f.size-1,1,f.size-1),0<p.size&&(v.Xi(W.x,C.x,A),N.na(A[0]+W.x,W.y),v.Of(T,N),C.N(N),$!=null&&$.add(w),V.N(W),m=w,v.iB(p,W),w=f.get(f.size-1)))}},v.pX=function(u,o,r,n,a,c,p,f,m){var w=new h.h,x=new h.h,$=new h.h,T=new h.h,A=new h.h,C=new h.h,N=new h.h,L=new h.h,D=new h.h,F=new h.h,V=new h.ha(0),W=new h.ha(0),K=new h.h,B=[[],[]],ee=h.Gg.Tb(a)==1;a=a.Yd(0);var ae=n.ac(),me=n.xc();ee?(C.na(ae.x*r,ae.y*r),N.na(me.x*r,me.y*r)):(B[0][0]=ae.x,B[0][1]=ae.y,B[1][0]=me.x,B[1][1]=me.y,h.cb.vt(),C.x=B[0][0]*r,C.y=B[0][1]*r,N.x=B[1][0]*r,N.y=B[1][1]*r);var fe=0,pe=0,be=1,Pe=n.Qn();w.N(ae),x.N(me),me=new h.ce(0);var Re=new h.ce(0),ut=new h.ce(0);v.wp(me,x),v.wp(Re,N),ut.add(be),v.Of(m,w),f!=null&&f.add(pe);var ht=[],oi=0<p?Pe?5:3:Pe?5:1;v.QJ(oi,ht);for(var Tt=new h.ha(0),Ie=new h.ha(0),mt=new h.ha(0),et=new h.ha(0),Gt=new h.ha(0),jt=new h.ha(0),Yt=new h.ha(0);0<Re.size;){var at=!1,Mi=NaN;for(h.kb.xd(u,o,C.x,C.y,N.x,N.y,Tt,Ie,null,2),ae=0;ae<oi&&!(ae==0&&(!Pe&&0>=p&&Tt.u<=c&&3.141592653589793>Math.abs(C.x-N.x)||n.Sx(pe,be)<=a));ae++){var Je=ht[ae]*be+(1-ht[ae])*pe;if(n.ic(Je,$),ee?L.na($.x*r,$.y*r):(B[0][0]=$.x,B[0][1]=$.y,h.cb.vt(),L.x=B[0][0]*r,L.y=B[0][1]*r),ae==0&&(Mi=Je,A.N($),F.N(L),0<c&&(Tt.u>c||3.141592653589793<=Math.abs(C.x-N.x)))){at=!0;break}if(Pe&&0<c){if(h.kb.xd(u,o,C.x,C.y,L.x,L.y,mt,null,null,2),mt.u>c||3.141592653589793<=Math.abs(C.x-L.x)){at=!0;break}}else if(0<p){if(Pe?(T.ES(w,x,ht[ae]),ee?D.na(T.x*r,T.y*r):(B[0][0]=T.x,B[0][1]=T.y,h.cb.vt(),D.x=B[0][0]*r,D.y=B[0][1]*r)):(T.N($),D.N(L)),h.kb.xd(u,o,C.x,C.y,D.x,D.y,et,null,null,2),!(et.u<=Tt.u)){at=!0;break}if(h.kb.pj(u,o,C.x,C.y,et.u,Ie.u,V,W,2),K.na(V.u,W.u),h.kb.xd(u,o,K.x,K.y,L.x,L.y,Gt,null,null,2),Gt.u>p){at=!0;break}if(Pe){if(h.kb.xd(u,o,K.x,K.y,D.x,D.y,jt,null,null,2),jt.u>p){at=!0;break}if(h.kb.xd(u,o,D.x,D.y,L.x,L.y,Yt,null,null,2),Yt.u>p){at=!0;break}}}}at?(x.N(A),N.N(F),be=Mi,v.wp(me,x),v.wp(Re,N),ut.add(be)):(v.bB(me),v.bB(Re),ut.Fn(ut.size-1,1,ut.size-1),v.Of(m,x),fe+=Tt.u,f!=null&&f.add(fe),0<Re.size&&(w.N(x),C.N(N),pe=be,v.iB(me,x),v.iB(Re,N),be=ut.get(ut.size-1)))}if(f!=null)for(u=1/fe,ae=0;ae<f.size;ae++)f.write(ae,f.read(ae)*u)},v.ZB=function(u,o,r,n){n.reverse(),r!=null&&r.oi(0,r.size,1),r=u!=null?u[0]:NaN,n=o!=null?o[0]:NaN,u!=null&&(u[0]=n),o!=null&&(o[0]=r)},v.YI=function(u,o,r,n,a){u?(n.N(r),a.N(o)):(n.N(o),a.N(r))},v.XI=function(u,o,r){return u?(r.create(o.K()),o.copyTo(r.get()),r.get().reverse(),r.get()):o},v.Xi=function(u,o,r){if(isNaN(o)){for(;3.141592653589793<r[0]-u;)r[0]-=6.283185307179586;for(;3.141592653589793<u-r[0];)r[0]+=6.283185307179586}else 3.141592653589793<r[0]+u-o?r[0]-=6.283185307179586:3.141592653589793<o-(r[0]+u)&&(r[0]+=6.283185307179586)},v.JW=function(u,o,r,n){3.141592653589793>Math.abs(o.x-u.x)?(n.Ec(u),3.141592653589793<=r.x-u.x?n.Sl(r.x-6.283185307179586,r.y):3.141592653589793<=u.x-r.x?n.Sl(r.x+6.283185307179586,r.y):n.Sl(r.x,r.y)):(n.Ec(r),3.141592653589793<=u.x-r.x?n.Sl(u.x-6.283185307179586,u.y):3.141592653589793<=r.x-u.x?n.Sl(u.x+6.283185307179586,u.y):n.Sl(u.x,u.y))},v.QJ=function(u,o){for(var r=0;r<u;r++){var n=Math.ceil(r/2)/(u+1);r%2!=0&&(n=-n),o[r]=.5+n}},v.Ou=function(u,o){return!!(h.s.$(u.y,1.570796326794897)&&!h.s.$(o.y,1.570796326794897)||h.s.$(u.y,-1.570796326794897)&&!h.s.$(o.y,-1.570796326794897))},v.Mu=function(u,o){return!!(h.s.$(o.y,1.570796326794897)&&!h.s.$(u.y,1.570796326794897)||h.s.$(o.y,-1.570796326794897)&&!h.s.$(u.y,-1.570796326794897))},v.xE=function(u,o,r){return!(!v.wE(u,o,r)||h.s.$(u.y,1.570796326794897)||h.s.$(u.y,-1.570796326794897)||h.s.$(o.y,1.570796326794897)||h.s.$(o.y,-1.570796326794897))},v.wE=function(u,o,r){return Math.abs(Math.abs(u.x-o.x)-3.141592653589793)<=r},v.Nu=function(u,o){return!!(h.s.$(u.y,1.570796326794897)&&h.s.$(o.y,1.570796326794897)||h.s.$(u.y,-1.570796326794897)&&h.s.$(o.y,-1.570796326794897))},v.eB=function(u,o,r,n){if(0<u.y){var a=new h.h;a.na(o.x,1.570796326794897)}else(a=new h.h).na(o.x,-1.570796326794897);h.s.$(u.x,a.x)||h.s.$(o.y,a.y)||(v.Of(n,a),r!=null&&r.add(0))},v.cB=function(u,o,r,n){if(0<o.y){var a=new h.h;a.na(u.x,1.570796326794897)}else(a=new h.h).na(u.x,-1.570796326794897);h.s.$(o.x,a.x)||h.s.$(u.y,a.y)||(v.Of(n,a),r!=null&&r.add(1))},v.dB=function(u,o,r,n,a,c,p){h.s.Dd(r)?(0<1.570796326794897-u.y&&((r=new h.h).na(u.x,1.570796326794897),v.Of(p,r),c!=null&&c.add(n)),0<1.570796326794897-o.y&&((r=new h.h).na(o.x,1.570796326794897),v.Of(p,r),c!=null&&c.add(n))):(0<1.570796326794897+u.y&&((r=new h.h).na(u.x,-1.570796326794897),v.Of(p,r),c!=null&&c.add(a)),0<1.570796326794897+o.y&&((r=new h.h).na(o.x,-1.570796326794897),v.Of(p,r),c!=null&&c.add(a)))},v.qU=function(u){if(-3.141592653589793>u.x)for(;-3.141592653589793>u.x;)u.x+=6.283185307179586;if(3.141592653589793<u.x)for(;3.141592653589793<u.x;)u.x-=6.283185307179586},v}();h.dj=k}(G||(G={})),function(h){h.jp=function(){function k(){}return k.oj=function(v,u,o){if(v==null||u==null||!h.cb.Xc(u))throw h.i.O();if(v.B())return v;var r=v,n=r.K();if(h.ba.Ic(n)){r=h.Ih.mj(v,u),v=new h.l,r.A(v),n=h.ta.Xd(u,v,!1);for(var a=h.cb.hh(u),c=Math.floor((v.v-a.v)/a.S())*a.S()+a.v;c<v.C;)c>v.v+n&&c<v.C-n&&(r=h.Ih.ls(r,u,o,!0,c)),c+=a.S()}else{if(n==197)return(v=new h.Ea(r.description)).bd(r,!1),k.oj(v,u,o);if(h.ba.zd(n))return(v=new h.Ua(r.description)).oc(r,!0),k.oj(v,u,o)}return k.Py(r,u)},k.Py=function(v,u){if(v==null||u==null||!h.cb.Xc(u))throw h.i.O();if(v.B())return v;var o=v.K();return o==197?(o=new h.Ea(v.description)).bd(v,!1):h.ba.zd(o)?(o=new h.Ua(v.description)).oc(v,!0):o=v,(o=h.Ih.mj(o,u)).B()?o:h.Gg.Tb(u)==1?h.Ih.Gn(o,u,0,o!=v,0):k.FQ(o,u,o!=v)},k.FQ=function(v,u,o){if(!h.cb.Xc(u))throw h.i.O();if(v.B())return v;var r=h.cb.bf(u),n=-180*r;return r*=360,h.Gg.Tb(u)==2&&(r=(n=h.cb.hh(u)).C,r-=n=n.v),h.Ih.Jp(v,n,r,u,o,0,!0)},k}()}(G||(G={})),function(h){h.qY=function(){function k(){}return k.R=function(v){return 0>v?-v:v},k.Mb=function(v,u){return 0<=u?k.R(v):-k.R(v)},k.$=function(v,u){return v==u||k.R(v-u)<=k.BC*(1+(k.R(v)+k.R(u))/2)},k.Dd=function(v){return v==0||k.R(v)<=k.BC},k.Bh=function(v,u){var o=(u=(1-(u=Math.sqrt(1-u)))/(1+u))*u;return v/(1+u)*(1+o*(.25+o*(.015625+1/256*o)))*k.wL},k.wL=1.5707963267948966,k.BC=3552713678800501e-30,k}()}(G||(G={})),function(h){var k=function(u){this.Xf=u,this.Kk=this.Xf.getCode(),0>this.Kk&&(this.Kk=0)};h.sY=k;var v=function(){function u(o){o===void 0&&(o=null),this.Dj=null,this.Vn=!1,o!==null&&(this.Dj=new k(o))}return u.prototype.Fc=function(){return this.Dj!=null?this.Dj.Kk:0},u.prototype.Pf=function(){var o=new u;return this.copyTo(o),o},u.prototype.copyTo=function(o){o.Dj=this.Dj,o.Vn=this.Vn},u.prototype.Lz=function(){this.Vn=!this.Vn},u.prototype.sm=function(){return this.Dj!=null?this.Dj.Xf:null},u.prototype.DJ=function(o){if(0>=o)throw h.i.O();if(o!=this.Fc()){if((o=h.qf.geogtran(o))==null)throw h.i.O("Geogtran not found.");this.Dj=new k(o)}},u.prototype.wz=function(){return this.Dj==null?null:this.Dj.Xf.toString()},u.prototype.hX=function(o){if(o==null)throw h.i.O();var r=null;try{r=h.qf.fromString(h.Tc.PE_TYPE_GEOGTRAN,o)}catch{throw h.i.O()}this.Dj=new k(r)},u.prototype.Nb=function(o){return o==this||!(!(o instanceof u)||(0>=this.Fc()||this.Fc()!=o.Fc())&&!this.sm().isEqual(o.sm()))&&this.Vn==o.Vn},u.prototype.toString=function(){var o="GeographicTransformation: "+this.wz();return 200<o.length?o.substring(0,197)+"... ("+o.length.toString()+" characters)":o},u.create=function(o,r){var n=new u;return n.DJ(o),r&&n.Lz(),n},u.mP=function(o,r){var n=new u;return n.hX(o),r&&n.Lz(),n},u}();h.Bx=v}(G||(G={})),function(h){var k=function(){function u(){}return u.construct=function(o,r,n,a){var c=new u;return c.iw=o,c.jw=r,c.FY=n,c.GY=a,c},u.yy=function(o,r){return o.iw==r.iw?o.jw==r.jw?0:o.jw<r.jw?-1:1:o.iw<r.iw?-1:1},u}(),v=function(){function u(){this.nT=[],this.oT=[],this.rp()}return u.fz=function(){return u.bK==null&&(u.bK=new u),u.bK},u.prototype.rp=function(){this.aD(this.nT),this.aD(this.oT)},u.prototype.aD=function(o){try{var r=[];r=r.sort(k.yy);for(var n=0;n<r.length;n++)o.push(r[n])}catch{}},u}();h.rY=v}(G||(G={})),function(h){var k=function(){function v(){}return v.prototype.qD=function(u){this.Fk=u},v.prototype.OM=function(u){this.Gb=u},v.prototype.pD=function(u){this.Ao=u},v.uE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736)},v.sE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736||20>u.I())},v.tE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736||20>u.I())},v}();h.Uk=k}(G||(G={})),function(h){h.bc=function(){function k(){}return k.JT=function(v){var u=new h.Ea;return u.qx(v.fs(),v.hs()),u.zj(v.fs(),v.gs()),u.zj(v.es(),v.gs()),u.zj(v.es(),v.hs()),u},k.Ah=function(v,u){return v===null?null:h.Fx.local().W(v,u,null)},k.YX=function(v,u){var o=h.Hh.local();return v=new h.$c(v),o.W(v,u,null).next()},k.km=function(v,u,o){return h.lp.local().W(v,u,o,null)},k.fp=function(v,u,o){return h.Ix.local().W(v,u,o,null)},k.JX=function(v,u,o){var r=h.Ix.local();for(v=new h.$c(v),u=new h.$c(u),o=r.W(v,u,o,null),r=[];(u=o.next())!=null;)r.push(u);return r},k.Nb=function(v,u,o){return h.ej.local().W(3,v,u,o,null)},k.LP=function(v,u,o){return h.ej.local().W(4,v,u,o,null)},k.HS=function(v,u,o){var r=h.Wk.local();for(v=new h.$c(v),u=new h.$c(u),o=r.W(v,u,o,null),r=[];(u=o.next())!=null;)r.push(u);return r},k.IP=function(v,u,o){var r=h.lp.local();for(v=new h.$c(v),u=new h.$c(u),o=r.W(v,u,o,null),r=[];(u=o.next())!=null;)r.push(u);return r},k.Fa=function(v,u,o){return h.Wk.local().W(v,u,o,null)},k.eY=function(v,u,o){return h.ej.local().W(2,v,u,o,null)},k.contains=function(v,u,o){return h.ej.local().W(1,v,u,o,null)},k.tP=function(v,u,o){return h.ej.local().W(16,v,u,o,null)},k.touches=function(v,u,o){return h.ej.local().W(8,v,u,o,null)},k.tU=function(v,u,o){return h.ej.local().W(32,v,u,o,null)},k.JS=function(v,u,o){return h.ej.local().W(1073741824,v,u,o,null)},k.sB=function(v,u,o,r){return h.rL.local().W(v,u,o,r,null)},k.ub=function(v,u,o,r){var n=null;if(o!=null){if(n=o.Id(),r!=null&&n.Fc()!=r.Fc()&&n.od!=r.od)throw h.i.Yk()}else if(r!=null)throw h.i.O();return v=h.iL.local().W(v,u,null),n!==null&&r!==null&&(v=h.Uc.Oh(v,n,r)),v},k.clip=function(v,u,o){return h.cL.local().W(v,h.l.construct(u.fs(),u.hs(),u.es(),u.gs()),o,null)},k.el=function(v,u,o){if(v==null||u==null)return null;for(v=h.eL.local().W(!0,v,u,o,null),u=[];(o=v.next())!=null;)o.B()||u.push(o);return u.slice(0)},k.EN=function(v,u,o,r,n,a,c,p){if(n===!0)return k.FN(v,u,o,r,a,c,p);if(n=o,u!=null){if(c=u.Id(),r!=null&&c.Fc()!=r.Fc()){if(c.od!=r.od)throw h.i.Yk();n=[],h.Uc.PE(o,o.length,r,c,n)}}else if(r!=null)throw h.i.O();if(o=h.sC.local(),a){for(v=new h.$c(v),u=o.W(v,u,n,a,null),v=[];(a=u.next())!=null;)v.push(a);a=v.slice(0)}else for(a=[],r=0;r<v.length;r++)a[r]=o.W(v[r],u,n[r],null);return a},k.FN=function(v,u,o,r,n,a,c){if(u===null||(r==null&&(r=u.Fc()!==4326?u.Id():h.Uc.$g(9001)),r.od!==0))throw h.i.O();if(h.Uc.PE(o,o.length,r,h.Uc.$g(9001),o),r=h.xC.local(),n){for(v=new h.$c(v),u=r.W(v,u,a,o,c,!1,n,null),o=[];(a=u.next())!=null;)o.push(a);n=o.slice(0)}else{n=[];for(var p=0;p<v.length;p++)n[p]=r.W(v[p],u,a,o[p],c,!1,null)}return n},k.buffer=function(v,u,o,r,n,a,c){var p=o;if(n===!1){if(u!=null){if(n=u.Id(),r!=null&&n.Fc()!=r.Fc()){if(n.od!=r.od)throw h.i.Yk();p=h.Uc.Oh(o,r,n)}}else if(r!=null)throw h.i.O();v=h.sC.local().W(v,u,p,null)}else{if(u===null||(r==null&&(r=u.Fc()!==4326?u.Id():h.Uc.$g(9001)),r.od!==0))throw h.i.O();p=h.Uc.Oh(o,r,h.Uc.$g(9001)),v=h.xC.local().W(v,u,a,p,c,!1,null)}return v},k.rU=function(v,u,o,r,n,a,c){if(u!=null){var p=u.Id();if(c!=null&&p.Fc()!=c.Fc()){if(p.od!=c.od)throw h.i.Yk();o=h.Uc.Oh(o,c,p)}}else if(c!=null)throw h.i.O();for(v=new h.$c(v),u=h.AC.local().W(v,u,o,r,n,a,null),o=[];(r=u.next())!=null;)o.push(r);return o.slice(0)},k.offset=function(v,u,o,r,n,a,c){if(u!=null){var p=u.Id();if(c!=null&&p.Fc()!=c.Fc()){if(p.od!=c.od)throw h.i.Yk();o=h.Uc.Oh(o,c,p)}}else if(c!=null)throw h.i.O();return h.AC.local().W(v,u,o,r,n,a,null)},k.aP=function(v){return h.uC.local().W(v,null)},k.bP=function(v,u){var o=h.uC.local();for(v=new h.$c(v),u=o.W(v,u,null),o=[];(v=u.next())!=null;)o.push(v);return o},k.iz=function(v,u,o){return h.Gx.local().iz(v,u,o)},k.jz=function(v,u){return h.Gx.local().jz(v,u)},k.kz=function(v,u,o,r){return h.Gx.local().kz(v,u,o,r)},k.YB=function(v,u){return h.$l.local().W(v,u,!1,null)},k.US=function(v,u){return h.$l.local().ss(v,u,null)},k.IQ=function(v,u,o,r,n){var a=h.wC.local();if(u!=null){if(u=u.Id(),n!=null&&u.Fc()!=n.Fc()){if(u.od!=n.od)throw h.i.Yk();o=h.Uc.Oh(o,n,u)}}else if(n!=null)throw h.i.O();return a.W(v,o,r,null)},k.Rr=function(v,u,o,r){var n=h.Zl.local();if(u!=null){if(u=u.Id(),r!=null&&u.Fc()!=r.Fc()){if(u.od!=r.od)throw h.i.Yk();o=h.Uc.Oh(o,r,u)}}else if(r!=null)throw h.i.O();return n.W(v,o,null)},k.Ry=function(v,u,o,r,n){n===void 0&&(n=0);var a=h.kL.local();if(n==4||n!==0)throw h.i.Fe();if(r!==null){if(r.od!==0)throw h.i.O("Unit must be a linear unit type");o=h.Uc.Oh(o,r,h.Uc.$g(9001))}return a.W(v,o,u,n,null)},k.OQ=function(v,u,o,r){if(v===null)return 0;if(r==4||r!==0)throw h.i.Fe();if(v.K()==197)v=k.JT(v);else if(v.K()!=1736)return 0;if(r=h.cb.tc(u),v=h.cb.Ah(v,u,r),v=h.MK.PQ([v])[0],o!==null){if(o.od!==2)throw h.i.O("Unit must be a area unit type");v=h.Uc.Oh(v,h.Uc.$g(109404),o)}return v},k.RQ=function(v,u,o,r){if(v=h.mL.local().W(v,u,r,null),o!==null){if(o.od!==0)throw h.i.O("Unit must be a linear unit type");v=h.Uc.Oh(v,h.Uc.$g(9001),o)}return v},k.zU=function(v,u,o){if(v===null)return 0;var r=null;if(u!=null){if((r=u.Id()).od==0&&(r=h.Uc.TF(r))==null&&o!==null)throw h.i.O();if(o!=null&&r.Fc()!=o.Fc()&&r.od!=o.od)throw h.i.Yk()}else if(o!=null)throw h.i.O();return v.K()==1736||v.K()==197?(v=v.He(),o!==null?h.Uc.Oh(v,r,o):v):0},k.AU=function(v,u,o){if(v===null||v.B()||1>v.Eb())return 0;var r=null;if(u!=null){if(r=u.Id(),o!=null&&r.Fc()!=o.Fc()&&r.od!=o.od)throw h.i.Yk()}else if(o!=null)throw h.i.O();v.K()==1736||v.K()==197?u=v.mg():h.ba.zd(v.K())?(u=new h.Ua(v.description)).oc(v,!0):u=v,v=0,u=u.Ha();for(var n=new h.h,a=new h.h;u.ab();)for(;u.Ia();){var c=u.ia();c.$p(n),c.Ur(a),v+=h.h.ub(n,a)}return r!==null&&o!==null&&(v=h.Uc.Oh(v,r,o)),v},k.YO=function(v){return v.points!==void 0?k.dS(v,v.hasZ!==void 0&&v.hasZ,v.hasM!==void 0&&v.hasM):v.rings!==void 0?k.dG(v.rings,v.hasZ!==void 0&&v.hasZ,v.hasM!==void 0&&v.hasM,"P"):v.paths!==void 0?k.dG(v.paths,v.hasZ!==void 0&&v.hasZ,v.hasM!==void 0&&v.hasM,"L"):v.x!==void 0?k.eS(v):v.xmin!==void 0?k.cS(v):null},k.eS=function(v){if(v.x==null||v.x=="NaN")return new h.Ta;var u=new h.Ta(v.x,v.y);return v.z!==void 0&&v.z!==null&&u.kX(v.z),v.m!==void 0&&v.m!==null&&u.VW(v.m),u},k.cS=function(v){if(v.xmin==null||v.xmin=="NaN")return new h.Gh;var u=new h.Gh(v.xmin,v.ymin,v.xmax,v.ymax);return v.zmin!==void 0&&v.zmin!==null&&u.setInterval(1,0,v.zmin,v.zmax),v.mmin!==void 0&&v.mmin!==null&&u.setInterval(2,0,v.mmin,v.mmax),u},k.dS=function(v,u,o){var r=0,n=new h.de,a=3*v.points.length;a%2!=0&&a++,2>a&&(a=2);var c=h.P.truncate(3*v.points.length/2);4>c?c=4:16>c&&(c=16),a=h.Zc.En(a,0);var p=h.Zc.En(c);c=h.Zc.En(c);for(var f=0;f<v.points.length;f++)a.write(2*f,v.points[f][0]),a.write(2*f+1,v.points[f][1]),p.write(f,u||o?v.points[f][2]:NaN),c.write(f,o&&u?v.points[f][3]:NaN),r++;return r!=0&&(n.resize(r),n.kn(0,a)),u&&(n.se(1),n.kn(1,p)),o&&(n.se(2),n.kn(2,u==0?p:c)),n.Qc(16777215),n},k.dG=function(v,u,o,r){var n=0,a=2;if(r=="P"){var c=new h.Ea;n=1,a=3}else c=new h.Ua;for(var p=h.Zc.Ph(0),f=h.Zc.Nr(0),m=0,w=0,x=[],$=[],T=0;T<v.length;T++){var A=v[T].length;if(x[T]=!1,r==="P"&&v[T][0][0]===v[T][v[T].length-1][0]&&v[T][0][1]===v[T][v[T].length-1][1]){var C=o==0||v[T][0][3]===v[T][v[T].length-1][3]||v[T][0][3]===void 0&&v[T][v[T].length-1][3]===void 0;(u==0||v[T][0][2]===v[T][v[T].length-1][2]||v[T][0][2]===void 0&&v[T][v[T].length-1][2]===void 0)&&C&&(x[T]=!0,--A)}A>=a?($[T]=!1,w+=1,p.add(m),f.add(n),m+=A):$[T]=!0}for((r=3*m)%2!=0&&r++,2>r&&(r=2),4>(T=h.P.truncate(3*m/2))?T=4:16>T&&(T=16),r=h.Zc.En(r,0),n=h.Zc.En(T),a=h.Zc.En(T),T=A=0;T<v.length;T++)if($[T]===!1)for(C=0;C<v[T].length;C++){var N=!1;C===v[T].length-1&&x[T]===!0&&(N=!0),N||(r.write(2*A,v[T][C][0]),r.write(2*A+1,v[T][C][1]),n.write(A,u||o?v[T][C][2]:NaN),a.write(A,o&&u?v[T][C][3]:NaN),A++)}return m!=0&&(v=c,p.resize(w),f.resize(w),0<m&&(p.add(m),f.add(0)),v.kn(0,r),v.HJ(f),v.IJ(p)),u&&(c.se(1),c.kn(1,n)),o&&(c.se(2),c.kn(2,u==0?n:a)),c.Qc(16777215),c},k}()}(G||(G={})),function(h){h.Cx=function(){function k(){}return k.dr=function(v){var u,o=0,r=v.length,n=v[0];for(u=0;u<r-1;u++){var a=v[u+1];o+=(a[0]-n[0])*(a[1]+n[1]),n=a}return 0<=o},k.rotate=function(v,u,o){u=u*Math.PI/180;var r=Math.cos(u),n=Math.sin(u);if(v.paths!==void 0){u={paths:[]};for(var a=0;a<v.paths.length;a++){for(var c=v.paths[a],p=[],f=0;f<c.length;f++){var m=c[f].slice(0);p.push(m);var w=r*(c[f][0]-o.x)-n*(c[f][1]-o.y)+o.x,x=n*(c[f][0]-o.x)+r*(c[f][1]-o.y)+o.y;m[0]=w,m[1]=x}u.paths.push(p)}return u}if(v.rings!==void 0){for(u={rings:[]},a=0;a<v.rings.length;a++){c=v.rings[a],p=[];var $=k.dr(c);for(f=0;f<c.length;f++)m=c[f].slice(0),p.push(m),w=r*(c[f][0]-o.x)-n*(c[f][1]-o.y)+o.x,x=n*(c[f][0]-o.x)+r*(c[f][1]-o.y)+o.y,m[0]=w,m[1]=x;k.dr(p)!==$&&p.reverse(),u.rings.push(p)}return u}if(v.x!==void 0)return u={x:r*(v.x-o.x)-n*(v.y-o.y)+o.x,y:n*(v.x-o.x)+r*(v.y-o.y)+o.y},v.z!==void 0&&(u.z=v.z),v.m!==void 0&&(u.m=v.m),u;if(v.points!==void 0){for(u={points:[]},v=v.points,f=0;f<v.length;f++)(a=v[f].slice(0))[0]=r*(v[f][0]-o.x)-n*(v[f][1]-o.y)+o.x,a[1]=n*(v[f][0]-o.x)+r*(v[f][1]-o.y)+o.y,u.points.push(a);return u}return null},k.BQ=function(v,u){if(v.paths!==void 0){for(var o={paths:[]},r=0;r<v.paths.length;r++){for(var n=v.paths[r],a=[],c=0;c<n.length;c++){var p=n[c].slice(0);a.push(p);var f=u.x-n[c][0];p[0]=n[c][0]+2*f}o.paths.push(a)}return o}if(v.rings!==void 0){for(o={rings:[]},r=0;r<v.rings.length;r++){n=v.rings[r];var m=k.dr(n);for(a=[],c=0;c<n.length;c++)p=n[c].slice(0),a.push(p),f=u.x-n[c][0],p[0]=n[c][0]+2*f;k.dr(a)!==m&&a.reverse(),o.rings.push(a)}return o}if(v.x!==void 0)return f=u.x-v.x,o={x:v.x+2*f,y:v.y},v.z!==void 0&&(o.z=v.z),v.m!==void 0&&(o.m=v.m),o;if(v.points!==void 0){for(o={points:[]},v=v.points,c=0;c<v.length;c++)r=v[c].slice(0),f=u.x-r[0],r[0]+=2*f,o.points.push(r);return o}return v.xmin!==void 0?(o={v:v.xmin,G:v.ymin,C:v.xmax,H:v.ymax},v.zmin!==void 0&&(o.zmin=v.zmin,o.zmax=v.zmax),v.mmin!==void 0&&(o.mmin=v.mmin,o.mmax=v.mmax),f=u.x-v.xmin,o.xmax=v.xmin+2*f,f=u.x-v.xmax,o.xmin=v.xmax+2*f,o):null},k.CQ=function(v,u){if(v.paths!==void 0){for(var o={paths:[]},r=0;r<v.paths.length;r++){for(var n=v.paths[r],a=[],c=0;c<n.length;c++){var p=n[c].slice(0);a.push(p);var f=u.y-n[c][1];p[1]=n[c][1]+2*f}o.paths.push(a)}return o}if(v.rings!==void 0){for(o={rings:[]},r=0;r<v.rings.length;r++){n=v.rings[r];var m=k.dr(n);for(a=[],c=0;c<n.length;c++)p=n[c].slice(0),a.push(p),f=u.y-n[c][1],p[1]=n[c][1]+2*f;k.dr(a)!==m&&a.reverse(),o.rings.push(a)}return o}if(v.x!==void 0)return f=u.y-v.y,o={y:v.y+2*f,x:v.x},v.z!==void 0&&(o.z=v.z),v.m!==void 0&&(o.m=v.m),o;if(v.points!==void 0){for(o={points:[]},v=v.points,c=0;c<v.length;c++)r=v[c].slice(0),f=u.y-r[1],r[1]+=2*f,o.points.push(r);return o}return v.xmin!==void 0?(o={v:v.xmin,G:v.ymin,C:v.xmax,H:v.ymax},v.zmin!==void 0&&(o.zmin=v.zmin,o.zmax=v.zmax),v.mmin!==void 0&&(o.mmin=v.mmin,o.mmax=v.mmax),f=u.y-v.ymin,o.ymax=v.ymin+2*f,f=u.y-v.ymax,o.ymin=v.ymax+2*f,o):null},k}()}(G||(G={})),function(h){h.RK=function(){function k(){}return k.Kg=function(v,u){switch(u==null&&(u=h.ee.og()),v){case 33:return new h.Ta(u);case 322:return new h.zb(u);case 197:return new h.Gh(u);case 550:return new h.de(u);case 1607:return new h.Ua(u);case 1736:return new h.Ea(u);default:throw h.i.ga("invalid argument.")}},k}()}(G||(G={})),function(h){var k=function(){function v(u,o){this.Qe=h.ja.rf(u,-1),this.va=new h.bu,this.yl=o}return v.prototype.qW=function(u){this.va.At(Math.min(this.Qe.size,u)),this.va.hn(u)},v.prototype.addElement=function(u,o){if(o===void 0)return this.XM(u);o=h.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);return r==-1&&(r=this.va.Qh(),this.Qe.set(o,r)),this.va.addElement(r,u)},v.prototype.XM=function(u){var o=this.yl.ez(u);o=h.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);return r==-1&&(r=this.va.Qh(),this.Qe.set(o,r)),this.va.addElement(r,u)},v.prototype.kd=function(u,o){if(o===void 0)this.CP(u);else{o=h.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);if(r==-1)throw h.i.O();for(var n=this.va.sc(r),a=-1;n!=-1;){var c=this.va.lb(n);this.va.ka(n)==u?(this.va.kd(r,a,n),this.va.sc(r)==-1&&(this.va.dh(r),this.Qe.set(o,-1))):a=n,n=c}}},v.prototype.CP=function(u){var o=this.yl.ez(u);o=h.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);if(r==-1)throw h.i.O();for(var n=this.va.sc(r),a=-1;n!=-1;){var c=this.va.lb(n);this.va.ka(n)==u?(this.va.kd(r,a,n),this.va.sc(r)==-1&&(this.va.dh(r),this.Qe.set(o,-1))):a=n,n=c}},v.prototype.iR=function(u){return u=h.P.truncate(u%this.Qe.size),(u=this.Qe.get(u))==-1?-1:this.va.sc(u)},v.prototype.wR=function(u){return this.va.lb(u)},v.prototype.wd=function(u){var o=this.yl.ez(this.ka(u));o=h.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);if(r==-1)throw h.i.O();for(var n=this.va.sc(r),a=-1;n!=-1;){if(n==u)return this.va.kd(r,a,n),void(this.va.sc(r)==-1&&(this.va.dh(r),this.Qe.set(o,-1)));a=n,n=this.va.lb(n)}throw h.i.O()},v.prototype.ka=function(u){return this.va.ka(u)},v.prototype.clear=function(){this.Qe=h.ja.rf(this.Qe.size,-1),this.va.clear()},v.prototype.size=function(){return this.va.LF()},v}();h.WK=k}(G||(G={})),function(h){var k=function(){function v(){this.Mi=new h.ad(3),this.va=new h.ad(6),this.hT=!1,this.je=-1}return v.prototype.hl=function(u){this.Mi.kd(u)},v.prototype.Qw=function(){return this.Mi.De()},v.prototype.cv=function(u){this.va.kd(u)},v.prototype.UA=function(){return this.va.De()},v.prototype.PB=function(u,o){this.Mi.T(u,1,o)},v.prototype.ex=function(u,o){this.Mi.T(u,2,o)},v.prototype.UW=function(u,o){this.Mi.T(u,3,o)},v.prototype.NB=function(u,o){this.va.T(u,4,o)},v.prototype.XW=function(u,o){this.va.T(u,3,o)},v.prototype.LJ=function(u,o){this.va.T(u,2,o)},v.prototype.Qh=function(u){var o=this.UA();return this.va.T(o,3,this.je),this.va.T(o,4,0),this.va.T(o,5,u),this.je!=-1&&this.LJ(this.je,o),this.je=o},v.prototype.dh=function(u){this.DE(u);var o=this.va.U(u,2),r=this.va.U(u,3);return o!=-1?this.XW(o,r):this.je=r,r!=-1&&this.LJ(r,o),this.cv(u),r},v.prototype.At=function(u){this.va.Ee(u)},v.prototype.HF=function(u){return this.va.U(u,5)},v.prototype.TW=function(u,o){this.va.T(u,5,o)},v.prototype.addElement=function(u,o){return this.kS(u,o)},v.prototype.kS=function(u,o){var r=this.Qw();this.ex(r,-1),this.va.U(u,0)==-1&&this.va.T(u,0,r);var n=this.va.U(u,1);return this.PB(r,n),n!=-1&&this.ex(n,r),this.va.T(u,1,r),this.setData(r,o),this.NB(u,this.cs(u)+1),this.hT&&this.UW(r,u),r},v.prototype.kd=function(u,o){var r=this.xe(o),n=this.lb(o);return r!=-1?this.ex(r,n):this.va.T(u,0,n),n!=-1?this.PB(n,r):this.va.T(u,1,r),this.hl(o),this.NB(u,this.cs(u)-1),n},v.prototype.hn=function(u){this.Mi.Ee(u)},v.prototype.getData=function(u){return this.Mi.U(u,0)},v.prototype.setData=function(u,o){this.Mi.T(u,0,o)},v.prototype.lb=function(u){return this.Mi.U(u,2)},v.prototype.xe=function(u){return this.Mi.U(u,1)},v.prototype.sc=function(u){return this.va.U(u,0)},v.prototype.Gc=function(u){return this.va.U(u,1)},v.prototype.clear=function(){for(var u=this.je;u!=-1;)u=this.dh(u)},v.prototype.DE=function(u){for(var o=this.Gc(u);o!=-1;){var r=o;o=this.xe(r),this.hl(r)}this.va.T(u,0,-1),this.va.T(u,1,-1),this.NB(u,0)},v.prototype.B=function(){return this.Mi.size==0},v.prototype.LF=function(){return this.Mi.size},v.prototype.cs=function(u){return this.va.U(u,4)},v.prototype.lz=function(u){return this.va.U(u,3)},v}();h.kp=k}(G||(G={})),function(h){var k=function(){function v(u){u===void 0?(this.ug=new h.ad(2),this.va=new h.ad(4),this.je=-1,this.Rv=!0):(this.ug=new h.ad(2),this.va=new h.ad(u?4:2),this.je=-1,this.Rv=u)}return v.prototype.hl=function(u){this.ug.kd(u)},v.prototype.Qw=function(){return this.ug.De()},v.prototype.cv=function(u){this.va.kd(u)},v.prototype.UA=function(){return this.va.De()},v.prototype.Qh=function(){var u=this.UA();return this.Rv&&(this.va.T(u,3,this.je),this.je!=-1&&this.va.T(this.je,2,u),this.je=u),u},v.prototype.dh=function(u){for(var o=this.sc(u);o!=-1;){var r=o;o=this.lb(o),this.hl(r)}this.Rv&&(o=this.va.U(u,2),r=this.va.U(u,3),o!=-1?this.va.T(o,3,r):this.je=r,r!=-1&&this.va.T(r,2,o)),this.cv(u)},v.prototype.At=function(u){this.va.Ee(u)},v.prototype.addElement=function(u,o){var r=this.va.U(u,1),n=this.Qw();return r!=-1?this.ug.T(r,1,n):this.va.T(u,0,n),this.va.T(u,1,n),this.ug.T(n,0,o),n},v.prototype.hn=function(u){this.ug.Ee(u)},v.prototype.kd=function(u,o,r){o!=-1?(this.ug.T(o,1,this.ug.U(r,1)),this.va.U(u,1)==r&&this.va.T(u,1,o)):(this.va.T(u,0,this.ug.U(r,1)),this.va.U(u,1)==r&&this.va.T(u,1,-1)),this.hl(r)},v.prototype.By=function(u,o){var r=this.va.U(u,1),n=this.va.U(o,0);n!=-1&&(r!=-1?this.ug.T(r,1,n):this.va.T(u,0,n),this.va.T(u,1,this.va.U(o,1))),this.Rv&&(u=this.va.U(o,2),r=this.va.U(o,3),u!=-1?this.va.T(u,3,r):this.je=r,r!=-1&&this.va.T(r,2,u)),this.cv(o)},v.prototype.ka=function(u){return this.ug.U(u,0)},v.prototype.Tj=function(u,o){this.ug.T(u,0,o)},v.prototype.lb=function(u){return this.ug.U(u,1)},v.prototype.sc=function(u){return this.va.U(u,0)},v.prototype.Kn=function(u){return this.ka(this.sc(u))},v.prototype.clear=function(){this.ug.nj(!0),this.va.nj(!0),this.je=-1},v.prototype.B=function(){return this.ug.size==0},v.prototype.LF=function(){return this.ug.size},v.prototype.lz=function(u){return this.va.U(u,3)},v}();h.bu=k}(G||(G={})),function(h){h.ta=function(){function k(){}return k.Xd=function(v,u,o){return u=u.zr(),v=v!=null&&v.Yd!==void 0?v.Yd(0):0,o&&(u*=4,v*=1.1),Math.max(v,u)},k.Gr=function(v){return 2*Math.sqrt(2)*v},k.jN=function(v){return Math.sqrt(2)*v},k.lj=function(v,u,o){var r=new h.l;return u.A(r),k.Xd(v,r,o)},k.oE=function(v,u,o){return u=u.Ug(1,0).zr(),v=v!=null?v.Yd(1):0,o&&(u*=4,v*=1.1),Math.max(v,u)},k.nv=function(v,u){var o=new h.l;return v.yc(o),v=new h.l,u.yc(v),o.$b(v),o},k.QN=function(v){var u=new h.l;if(v.yc(u),u.B())return null;var o=new h.eu(u,8),r=-1,n=new h.l,a=!1;do for(var c=0,p=v.ea();c<p;c++){if(v.Sj(c,n),(r=o.Ez(c,n,r))==-1){if(a)throw h.i.ga("internal error");v.Ap(u,!1),a=!0,o.reset(u,8);break}a=!1}while(a);return o},k.fE=function(v){var u=new h.l;v.yc(u);for(var o=new h.eu(u,8),r=-1,n=v.Ha(),a=new h.l,c=!1;n.ab();)for(;n.Ia();){var p=n.ia(),f=n.xb();if(p.A(a),(r=o.Ez(f,a,r))==-1){if(c)throw h.i.Ra();v.Ap(u,!1),c=!0,o.reset(u,8),n.$i();break}}return o},k.kj=function(v,u){var o=new h.l;v.yc(o);for(var r=new h.eu(o,8),n=-1,a=new h.l,c=v.Ha(),p=!1;c.ab();)for(;c.Ia();){var f=c.ia(),m=c.xb();if(f.A(a),a.isIntersecting(u)&&(n=r.Ez(m,a,n))==-1){if(p)throw h.i.ga("internal error.");v.Ap(o,!1),p=!0,r.reset(o,8),c.$i();break}}return r},k.gE=function(v,u){for(var o=new h.eu(u,8),r=new h.h,n=!1,a=new h.l,c=0;c<v.I();c++)if(v.D(c,r),u.contains(r)&&(a.L(r),o.wj(c,a)==-1)){if(n)throw h.i.Ra();n=!0,c=new h.l,v.Ap(c,!1),o.reset(c,8),c=-1}return o},k.dR=function(v,u,o){var r=new h.l,n=new h.l;v.yc(r),u.yc(n),r.X(o,o),n.X(o,o);var a=new h.l;a.L(r),a.Fa(n),v=v.Ha(),u=u.Ha();var c=new h.qC;c.UB(o);var p=!1;for(c.hK();v.ab();)for(;v.Ia();)v.ia().A(r),r.isIntersecting(a)&&(p=!0,(o=new h.l).L(r),c.AD(v.xb(),o));if(c.aF(),!p)return null;for(r=!1,c.gK();u.ab();)for(;u.Ia();)u.ia().A(n),n.isIntersecting(a)&&(r=!0,(o=new h.l).L(n),c.wD(u.xb(),o));return c.$E(),r?c:null},k.eR=function(v,u,o,r,n){var a=v.K(),c=u.K(),p=new h.l,f=new h.l;v.yc(p),u.yc(f),p.X(o,o),f.X(o,o);var m=new h.l;m.L(p),m.Fa(f);var w=new h.qC;w.UB(o);var x=!1;w.hK();var $=0;for(o=v.ea();$<o;$++)r&&a==1736&&!v.Fv($)||(v.Sj($,p),p.isIntersecting(m)&&(x=!0,w.AD($,p)));if(w.aF(),!x)return null;for(v=!1,w.gK(),r=0,o=u.ea();r<o;r++)n&&c==1736&&!u.Fv(r)||(u.Sj(r,f),f.isIntersecting(m)&&(v=!0,w.wD(r,f)));return w.$E(),v?w:null},k.Tu=function(v,u,o){if(v!=u)for(var r=0;r<o;r++)v[r]==null?v[r]=h.h.bl(u[r]):v[r].N(u[r])},k.Dy=function(v,u,o,r){var n=0;for(r+=0;n<r;o++,n++)v[n]==null&&(v[n]=[0,0]),v[n][0]=u[o].x,v[n][1]=u[o].y},k.Cy=function(v,u,o,r){var n=u,a=0;for(u=r+u;n<u;a++,n++)v[n]==null?v[n]=h.h.construct(o[a][0],o[a][1]):v[n].na(o[a][0],o[a][1])},k.cP=function(v,u,o){if(v!=u)for(var r=0;r<o;r++)v[r]==null?v[r]=new h.Ta(u[r]):u[r].copyTo(v[r])},k.nE=function(v,u,o,r){var n=0;return v!=null&&(n=v.Yd(0),r&&!o||v==null||(n+=1.01*v.pz(0))),o&&(u*=4,n*=1.01),Math.max(n,u)},k.ny=function(v,u,o){return k.nE(v,u.zr(),o,!1)},k.ZN=function(v,u){var o=new h.l;return u.A(o),k.ny(v,o,!0)},k.oy=function(v,u){return k.nE(v,u.zr(),!1,!0)},k.Iu=function(v,u){var o=new h.l;return u.A(o),k.oy(v,o)},k.sG=function(v,u,o,r){r*=r;var n=new h.h;if(n.vc(v,u),(v=new h.h).vc(o,u),u=n.Sk(),o=v.Sk(),u<=r&&o<=r)return!0;var a=h.mc.nx(n.xi(v));return(a<=r*u||a<=r*o)&&0<=n.Rh(v)},k.WJ=function(v,u,o,r){for(var n=0;n<u;n++){var a=v[n].y,c=h.P.Rk(a,o,r);c!=a&&(v[n].y=c)}},k}()}(G||(G={})),function(h){var k,v,u=function(){function a(c){this.Za=c}return a.prototype.compare=function(c,p,f){c=c.ka(f),f=this.Za.nk(p);var m=this.Za.nk(c);return f<m?-1:f==m?n.iq(p)&&n.Hv(c)?-1:n.iq(c)&&n.Hv(p)?1:0:1},a}(),o=function(){function a(c){this.Za=c}return a.prototype.qr=function(c,p,f){this.Za.uX(f,c,p)},a.prototype.bq=function(c){return this.Za.nk(c)},a}();(v=k||(k={}))[v.initialize=0]="initialize",v[v.pIn=1]="pIn",v[v.pL=2]="pL",v[v.pR=3]="pR",v[v.pT=4]="pT",v[v.right=5]="right",v[v.left=6]="left",v[v.all=7]="all";var r=function(){function a(){this.Za=null,this.Ri=new h.Oc,this.ii=new h.ja(0),this.sg=[0,0]}return a.prototype.Yi=function(c,p){this.Ri.pa=c.pa-p,this.Ri.wa=c.wa+p,this.ii.resize(0),this.he=0,this.sg[0]=0},a.prototype.yB=function(c,p,f){if(c>p)throw h.i.O();this.Ri.pa=c-f,this.Ri.wa=p+f,this.ii.resize(0),this.he=0,this.sg[0]=0},a.prototype.Vo=function(c,p){this.Ri.pa=c-p,this.Ri.wa=c+p,this.ii.resize(0),this.he=0,this.sg[0]=0},a.prototype.next=function(){if(!this.Za.nq)throw h.i.Hb();if(0>this.he)return-1;for(var c=!0;c;)switch(this.sg[this.he]){case 1:c=this.vU();break;case 2:c=this.wU();break;case 3:c=this.xU();break;case 4:c=this.yU();break;case 5:c=this.vW();break;case 6:c=this.aT();break;case 7:c=this.lN();break;case 0:c=this.Bz();break;default:throw h.i.Ra()}return this.Pg!=-1?this.Op()>>1:-1},a.construct=function(c){var p=new a;return p.Za=c,p.ii.Jb(20),p.he=-1,p},a.prototype.Bz=function(){return this.Pg=this.nH=this.Ni=this.Mc=-1,this.Za.me!=null&&0<this.Za.me.size?(this.sg[0]=1,this.Ni=this.Za.kf,!0):(this.he=-1,!1)},a.prototype.vU=function(){if(this.Mc=this.Ni,this.Mc==-1)return this.Pg=this.he=-1,!1;var c=this.Za.Pp(this.Mc);return this.Ri.wa<c?(c=this.Za.mk(this.Mc),this.Ni=this.Za.rj(this.Mc),c!=-1&&(this.fi=this.Za.ml(c),this.sg[++this.he]=6),!0):c<this.Ri.pa?(c=this.Za.mk(this.Mc),this.Ni=this.Za.lk(this.Mc),c!=-1&&(this.fi=this.Za.$r(c),this.sg[++this.he]=5),!0):(this.sg[this.he]=2,this.nH=this.Mc,c=this.Za.mk(this.Mc),this.Ni=this.Za.rj(this.Mc),c!=-1&&(this.fi=this.Za.ml(c),this.sg[++this.he]=7),!0)},a.prototype.wU=function(){if(this.Mc=this.Ni,this.Mc==-1)return this.sg[this.he]=3,this.Ni=this.Za.lk(this.nH),!0;if(this.Za.Pp(this.Mc)<this.Ri.pa){var c=this.Za.mk(this.Mc);return this.Ni=this.Za.lk(this.Mc),c!=-1&&(this.fi=this.Za.$r(c),this.sg[++this.he]=5),!0}return c=this.Za.mk(this.Mc),this.Ni=this.Za.rj(this.Mc),c!=-1&&(this.fi=this.Za.ml(c),this.sg[++this.he]=7),(c=this.Za.lk(this.Mc))!=-1&&this.ii.add(c),!0},a.prototype.xU=function(){if(this.Mc=this.Ni,this.Mc==-1)return this.sg[this.he]=4,!0;if(this.Ri.wa<this.Za.Pp(this.Mc)){var c=this.Za.mk(this.Mc);return this.Ni=this.Za.rj(this.Mc),c!=-1&&(this.fi=this.Za.ml(c),this.sg[++this.he]=6),!0}return c=this.Za.mk(this.Mc),this.Ni=this.Za.lk(this.Mc),c!=-1&&(this.fi=this.Za.ml(c),this.sg[++this.he]=7),(c=this.Za.rj(this.Mc))!=-1&&this.ii.add(c),!0},a.prototype.yU=function(){if(this.ii.size==0)return this.Pg=this.he=-1,!1;this.Mc=this.ii.get(this.ii.size-1),this.ii.resize(this.ii.size-1);var c=this.Za.mk(this.Mc);return c!=-1&&(this.fi=this.Za.ml(c),this.sg[++this.he]=7),this.Za.rj(this.Mc)!=-1&&this.ii.add(this.Za.rj(this.Mc)),this.Za.lk(this.Mc)!=-1&&this.ii.add(this.Za.lk(this.Mc)),!0},a.prototype.aT=function(){return this.Pg=this.fi,this.Pg!=-1&&n.iq(this.Op())&&this.Za.nk(this.Op())<=this.Ri.wa?(this.fi=this.KF(),!1):(this.he--,!0)},a.prototype.vW=function(){return this.Pg=this.fi,this.Pg!=-1&&n.Hv(this.Op())&&this.Za.nk(this.Op())>=this.Ri.pa?(this.fi=this.HR(),!1):(this.he--,!0)},a.prototype.lN=function(){return this.Pg=this.fi,this.Pg!=-1&&n.iq(this.Op())?(this.fi=this.KF(),!1):(this.he--,!0)},a.prototype.KF=function(){return this.Za.Tf?this.Za.ag.lb(this.Pg):this.Za.Ui.lb(this.Pg)},a.prototype.HR=function(){return this.Za.Tf?this.Za.ag.xe(this.Pg):this.Za.Ui.xe(this.Pg)},a.prototype.Op=function(){return this.Za.Tf?this.Za.ag.ka(this.Pg):this.Za.Ui.getData(this.Pg)},a}();h.tY=r;var n=function(){function a(c){this.Cm=this.ai=this.ag=this.Ui=this.Mm=this.Fj=this.me=this.Gj=null,this.Tf=c,this.nq=this.Tv=!1}return a.prototype.mr=function(){this.Nk(!0)},a.prototype.Dr=function(c,p){if(!this.Tv)throw h.i.Hb();this.Gj.push(new h.Oc(c,p))},a.prototype.Hp=function(){if(!this.Tv)throw h.i.ga("invalid call");this.Tv=!1,this.nq=!0,this.Tf||(this.mS(),this.$v=this.Gj.length)},a.prototype.wj=function(c){if(!this.Tf||!this.nq)throw h.i.O("invalid call");if(this.kf==-1){var p=this.Gj.length;if(this.dA){var f=new h.ja(0);f.Jb(2*p),this.UI(f),this.ai.Jb(2*p),this.ai.resize(0),this.TI(f),this.Mm.resize(p,-1),this.Mm.Xj(-1,0,p),this.dA=!1}else this.Mm.Xj(-1,0,p);this.kf=this.Vu()}p=this.hG(c<<1,this.kf),f=this.ag.addElement(1+(c<<1),this.rz(p)),this.NJ(p,f),this.Mm.set(c,p),this.$v++},a.prototype.remove=function(c){if(!this.Tf||!this.nq)throw h.i.ga("invalid call");var p=this.Mm.get(c);if(p==-1)throw h.i.O("the interval does not exist in the interval tree");this.Mm.set(c,-1),this.$v--;var f=this.rz(p),m=this.ag.QR(f);this.ag.wd(this.nR(p),f),this.ag.wd(this.KR(p),f),(c=this.ag.size(f))==0&&(this.ag.EP(f),this.RJ(m,-1)),this.Fj.kd(p),f=this.MF(m);var w=this.rj(m),x=this.lk(m);for(p=0;!(0<c||m==this.kf||w!=-1&&x!=-1);)m==this.rj(f)?w!=-1?(this.Ok(f,w),this.Vj(w,f),this.Ok(m,-1)):x!=-1?(this.Ok(f,x),this.Vj(x,f),this.Qk(m,-1)):this.Ok(f,-1):w!=-1?(this.Qk(f,w),this.Vj(w,f),this.Ok(m,-1)):x!=-1?(this.Qk(f,x),this.Vj(x,f),this.Qk(m,-1)):this.Qk(f,-1),this.Vj(m,-1),p++,m=f,c=(f=this.mk(m))!=-1?this.ag.size(f):0,w=this.rj(m),x=this.lk(m),f=this.MF(m)},a.prototype.reset=function(){if(!this.Tf||!this.nq)throw h.i.O("invalid call");this.Nk(!1)},a.prototype.size=function(){return this.$v},a.prototype.getIterator=function(){return r.construct(this)},a.prototype.UI=function(c){for(var p=this.Gj.length,f=0;f<2*p;f++)c.add(f);this.vX(c,2*p)},a.prototype.TI=function(c){for(var p=NaN,f=0;f<c.size;f++){var m=c.get(f),w=this.nk(m);w!=p&&(this.ai.add(m),p=w)}},a.prototype.mS=function(){var c=this.Gj.length,p=new h.ja(0);p.Jb(2*c),this.UI(p),this.ai.Jb(2*c),this.ai.resize(0),this.TI(p),this.Fj.Ee(c),this.Ui.hn(2*c);var f=h.Zc.Ph(c);for(f.Xj(-1,0,c),this.kf=this.Vu(),c=0;c<p.size;c++){var m=p.get(c),w=f.get(m>>1);w!=-1?this.NJ(w,this.Ui.addElement(this.rz(w),m)):(w=this.hG(m,this.kf),f.set(m>>1,w))}},a.prototype.hG=function(c,p){var f=p,m=p,w=-1,x=0,$=this.ai.size-1,T=0,A=c>>1,C=NaN,N=NaN,L=!0,D=this.vR(A);for(A=this.sR(A);L;){x<$?(T=x+h.P.truncate(($-x)/2),this.bz(f)==-1&&this.xJ(f,this.ai.get(T),this.ai.get(T+1))):this.bz(f)==-1&&this.xJ(f,this.ai.get(x),this.ai.get(x));var F=this.Pp(f);if(A<F)p!=-1&&(p==f?(m=f,C=F,N=(p=this.rj(f))!=-1?this.Pp(p):NaN):N>F&&(F<C?this.Ok(m,f):this.Qk(m,f),this.Qk(f,p),this.Tf&&(this.Vj(f,m),this.Vj(p,f)),m=f,C=F,p=-1,N=NaN)),($=this.oR(f))==-1&&($=this.Vu(),this.RW(f,$)),f=$,$=T;else if(D>F)p!=-1&&(p==f?(m=f,C=F,N=(p=this.lk(f))!=-1?this.Pp(p):NaN):N<F&&(F<C?this.Ok(m,f):this.Qk(m,f),this.Ok(f,p),this.Tf&&(this.Vj(f,m),this.Vj(p,f)),m=f,C=F,p=-1,N=NaN)),(x=this.LR(f))==-1&&(x=this.Vu(),this.bX(f,x)),f=x,x=T+1;else{(L=this.mk(f))==-1&&(L=this.rP(f),this.RJ(f,L));var V=this.YM(L,c);w=this.pP(),this.eX(w,L),this.QW(w,V),f!=p&&(F<C?this.Ok(m,f):this.Qk(m,f),this.Tf&&this.Vj(f,m),p!=-1&&(N<F?this.Ok(f,p):this.Qk(f,p),this.Tf&&this.Vj(p,f))),L=!1}}return w},a.prototype.Vu=function(){return this.me.De()},a.prototype.rP=function(c){return this.Tf?this.ag.Qr(c):this.Ui.Qh(c)},a.prototype.pP=function(){return this.Fj.De()},a.prototype.Nk=function(c){c?(this.Tv=this.dA=!0,this.nq=!1,this.ai==null?this.ai=h.Zc.Ph(0):this.ai.resize(0),this.Gj==null?this.Gj=[]:this.Gj.length=0):this.dA=!1,this.Tf?this.Mm==null?(this.Mm=h.Zc.Ph(0),this.ag=new h.Yj,this.ag.Wo(new u(this))):this.ag.clear():this.Ui==null?this.Ui=new h.kp:this.Ui.clear(),this.me==null?(this.Fj=new h.ad(3),this.me=new h.ad(this.Tf?8:7)):(this.Fj.nj(!1),this.me.nj(!1)),this.kf=-1,this.$v=0},a.prototype.xJ=function(c,p,f){this.KW(c,p),this.LW(c,f)},a.prototype.Pp=function(c){var p=this.bz(c);return p==-1?NaN:(p=this.nk(p))==(c=this.nk(this.ZQ(c)))?p:.5*(p+c)},a.prototype.KW=function(c,p){this.me.T(c,0,p)},a.prototype.LW=function(c,p){this.me.T(c,1,p)},a.prototype.RW=function(c,p){this.me.T(c,3,p)},a.prototype.bX=function(c,p){this.me.T(c,4,p)},a.prototype.RJ=function(c,p){this.me.T(c,2,p)},a.prototype.Ok=function(c,p){this.me.T(c,5,p)},a.prototype.Qk=function(c,p){this.me.T(c,6,p)},a.prototype.Vj=function(c,p){this.me.T(c,7,p)},a.prototype.eX=function(c,p){this.Fj.T(c,0,p)},a.prototype.YM=function(c,p){return this.Tf?this.ag.addElement(p,c):this.Ui.addElement(c,p)},a.prototype.QW=function(c,p){this.Fj.T(c,1,p)},a.prototype.NJ=function(c,p){this.Fj.T(c,2,p)},a.prototype.ml=function(c){return this.Tf?this.ag.sc(c):this.Ui.sc(c)},a.prototype.$r=function(c){return this.Tf?this.ag.Gc(c):this.Ui.Gc(c)},a.iq=function(c){return(1&c)==0},a.Hv=function(c){return(1&c)==1},a.prototype.bz=function(c){return this.me.U(c,0)},a.prototype.ZQ=function(c){return this.me.U(c,1)},a.prototype.mk=function(c){return this.me.U(c,2)},a.prototype.oR=function(c){return this.me.U(c,3)},a.prototype.LR=function(c){return this.me.U(c,4)},a.prototype.rj=function(c){return this.me.U(c,5)},a.prototype.lk=function(c){return this.me.U(c,6)},a.prototype.MF=function(c){return this.me.U(c,7)},a.prototype.rz=function(c){return this.Fj.U(c,0)},a.prototype.nR=function(c){return this.Fj.U(c,1)},a.prototype.KR=function(c){return this.Fj.U(c,2)},a.prototype.vR=function(c){return this.Gj[c].pa},a.prototype.sR=function(c){return this.Gj[c].wa},a.prototype.vX=function(c,p){this.Cm==null&&(this.Cm=new h.Yt);var f=new o(this);this.Cm.sort(c,0,p,f)},a.prototype.uX=function(c,p,f){var m=this;c.Wd(p,f,function(w,x){var $=m.nk(w),T=m.nk(x);return $<T||$==T&&a.iq(w)&&a.Hv(x)?-1:1})},a.prototype.nk=function(c){var p=this.Gj[c>>1];return a.iq(c)?p.pa:p.wa},a}();h.ur=n}(G||(G={})),function(h){var k=function(){function v(u){if(u==null)throw h.i.ga("Invalid arguement");this.hf=u;var o=u.fR();o.ZR()?u.ef.AG()?this.mo=h.ti.PannableFold:this.mo=h.ti.Clip:this.mo=h.ti.DontClip,o.$R()?u.Zf.AG()?this.Sm=h.ti.PannableFold:this.Sm=h.ti.Clip:this.Sm=h.ti.DontClip,this.Dm=o.Lu,this.eH=o.Gy,u=this.hf.kH,this.TG=u.js(2147483648),this.Vv=u.js(1073741824)}return v.Ah=function(u,o,r){return o.xw.Ah(u,r)},v.St=function(u,o,r,n){return u.xw.St(o,r,n)},v.Rt=function(u,o,r,n){if(r=0>r?o.length:r,(u=u.xw.St(o,r,n))==r)return u;for(var a=o=0;a<r;a++){var c=n[a];c.isNaN()||(o<a&&n[o].N(c),o++)}for(;o<r;o++)n[o].Sc();return u},v.transform=function(u,o,r,n,a){if(u.isIdentity())return h.ta.cP(n,o,r),r;for(var c=[],p=0,f=0;f<r;){for(var m=Math.min(c.length,r-f),w=f,x=0;w<m;w++,x++)c[x]==null?c[x]=o[w].D():o[w].D(c[x]);var $=a?v.Rt(u,c,m,c):v.St(u,c,m,c);for(x=w=0;w<$;w++,x++)n[f]==null&&(n[f]=new h.Ta(o[f])),n[f].Db(c[x]);f+=m,p+=$}return p},v.prototype.St=function(u,o,r){if(this.hf.isIdentity())return u!=r&&h.ta.Tu(r,u,o),o;var n=this.hf.ef,a=this.hf.Zf,c=n.Tb(),p=a.Tb();if(c==0&&c===p){var f=n.Sp();return a=f/(a=a.Sp()),(f=new h.Ed).It(a,a),f.TX(u,o,r),o}if(f=h.P.Gu(Math.min(o,64)),c==3){var m=n.Ki;c=(n=m.fk()).Tb(),r!=u&&h.ta.Tu(r,u,o),h.Ab.al(m,r,o,!0),m.Rt(h.dm.forward,r,o),h.Ab.$k(m,r,o,!0)}if(c==3||p===3)throw h.i.ga("image: transform_in_place_");if(c==2)this.mo==h.ti.Clip?(r!=u&&h.ta.Tu(r,u,o),u=n.ol(),h.Ab.FS(u,n,r,o)):(r!=u&&h.ta.Tu(r,u,o),n.Xc()&&(c=n.Yd(0),m=n.Le(),h.Ab.sX(r,o,m,c),h.Ab.iF(r,o,n,0))),h.Ab.AL(n,r,o,f);else for(c=n.Yd(0),m=n.Le(),n=0;n<o;n++)h.Ab.tX(u[n],m,c,r[n]);for(h.Ab.yL(this.hf,r,o,f),u=0,(p=p==2)?u=a.Ai():isNaN(this.Dm)||(u=this.Dm),p&&this.Sm!=h.ti.Clip||h.Ab.iF(r,o,a.tc(),u),p&&(h.Ab.qG(r,o,a,this.Sm),h.Ab.zL(a,r,o,f)),u=o,n=0;n<o;++n)r[n].isNaN()&&u--;return u},v.prototype.Ah=function(u,o){if(this.hf.isIdentity()||u.B())return u;if(u.K()==33)return this.OI(u);var r=this.hf.ef,n=this.hf.Zf,a=r.Tb(),c=n.Tb();if(a==0&&a==c)return o=r.Sp(),o/=n=n.Sp(),(n=new h.Ed).It(o,o),(u=h.ba.ig(u)).Pc(n),u;switch(u.K()){case 1607:case 1736:u=this.MI(u,o);break;case 550:u=this.WV(u,o);break;case 197:u=this.VV(u,o);break;default:throw h.i.ga("")}return u},v.prototype.OI=function(u){var o=u.D(),r=[];return r[0]=o,this.St(r,1,r),(u=new h.Ta(u)).Db(r[0]),u},v.prototype.MI=function(u,o){if(u.vm())throw h.i.ga("curves not supported");var r=u.K();if(r==1736)return this.XV(u,o);if(r==1607)return this.YV(u,o);throw h.i.ga("projectMultiPath")},v.prototype.XV=function(u,o){var r=this.hf.ef,n=this.hf.Zf,a=r.Tb(),c=n.Tb(),p=h.P.Gu(Math.min(u.I(),64)),f=h.Ea.ig(u);a==3&&(a=(r=(u=r.Ki).fk()).Tb(),f=u.al(f,!0),this.yp(u,h.dm.forward,f),f=u.$k(f,!0)),u=null,c==3&&(c=(n=(u=n.Ki).fk()).Tb());var m=a==2,w=c==2,x=w?n.tc():n,$=!w&&!this.Vv;c=!1;var T=f;if(m){if((T=h.Ab.LI(T,r,this.mo,o)).B())return T}else{if(f=new h.l,T.yc(f),a=r.Le(),f.G<a.G||f.H>a.H){var A=h.l.construct(f.v-1,a.G,f.C+1,a.H);if((T=h.si.Pu(T,A,r,NaN,0,o)).B())return T}f.S()>2*a.S()&&(T=h.Ab.Jp(T,-2*a.S(),2*a.S(),r,!0,0,!0,o))}f=this.eH,(a=!isNaN(f))&&(T=h.Zl.local().W(T,f,o)),A=w?n.kk():null;var C=NaN;m&&(C=r.Ai());var N=n.Xr()!=null;if(this.TG)m&&(h.Ab.wr(r,C,T,p),a&&(m=r.ih(),f*=(C=r.tc().ih())/m)),h.Ab.vr(this.hf,T,$,p),a&&(m=r.tc().ih(),f*=(C=n.tc().ih())/m),r=T;else{var L=new h.Ua(T.description);L.vD(T),m&&(h.Ab.wr(r,C,L,p),a&&(m=r.ih(),f*=(C=r.tc().ih())/m)),h.Ab.vr(this.hf,L,$,p),a&&(m=r.tc().rm(),f*=(C=n.tc().rm())/m),$=NaN,w?(A=n.kk(),$=n.Ai()):isNaN(this.Dm)||($=this.Dm),m=v.uv(r)|v.uv(n),C=10*x.Yd(0),this.Vv&&(m=3,C=0),r=h.Ab.MQ(T,r,L,x,$,o,m,C)}return N&&(r=h.Ab.PD(r,n,o)),w&&(c||(w=x.Le().S(),r.Ug(0,0).S()>=w-x.Yd(0)&&(x=A.getNorthPoleLocation(),w=A.getSouthPoleLocation(),T=A.getNorthPoleGeometry(),A=A.getSouthPoleGeometry(),$=0,T==h.Eg.PE_POLE_POINT&&x!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&($=1),A==h.Eg.PE_POLE_POINT&&w!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&($|=2),$!==0&&(c=!0))),r=h.Ab.Hz(r,n,this.Sm,o),a&&(r=h.Zl.local().W(r,f,o)),h.Ab.Jx(n,r,p)),r.B()||(c&&(r=h.$l.local().W(r,n,!1,o)),u!=null&&(r=u.$k(r,!1),this.yp(u,h.dm.reverse,r),r=u.al(r,!1))),r},v.uv=function(u){if(u.Tb()!=2)return 0;var o=0,r=u.kk();u=r.getNorthPoleLocation();var n=r.getSouthPoleLocation(),a=r.getNorthPoleGeometry();return r=r.getSouthPoleGeometry(),a==h.Eg.PE_POLE_POINT&&u!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(o=1),r==h.Eg.PE_POLE_POINT&&n!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(o|=2),o},v.prototype.YV=function(u,o){var r=this.hf.ef,n=this.hf.Zf,a=r.Tb(),c=n.Tb(),p=h.P.Gu(Math.min(u.I(),64)),f=h.Ua.ig(u);a==3&&(a=(r=(u=r.Ki).fk()).Tb(),f=u.al(f,!0),this.yp(u,h.dm.forward,f),f=u.$k(f,!0)),u=null,c==3&&(c=(n=(u=n.Ki).fk()).Tb());var m=a==2;a=(c=c==2)?n.tc():n;var w=!c&&!this.Vv;if(m){if((f=h.Ab.LI(f,r,this.mo,o)).B())return f}else{var x=new h.l;f.yc(x);var $=r.Le();if((x.G<$.G||x.H>$.H)&&(x=h.l.construct(x.v-1,$.G,x.C+1,$.H),(f=h.si.Pu(f,x,r,NaN,0,o)).B()))return f}var T=NaN;m&&(T=r.Ai()),x=n.Xr()!=null,$=this.eH;var A=!isNaN($);if(A&&(f=h.Zl.local().W(f,$,o)),this.TG)m&&h.Ab.wr(r,T,f,p),A&&(m=r.ih(),$*=(T=r.tc().ih())/m),h.Ab.vr(this.hf,f,w,p),A&&(m=r.tc().ih(),$*=(T=n.tc().ih())/m),r=f;else{var C=new h.Ua(f.description);C.vD(f),m&&(h.Ab.wr(r,T,C,p),A&&(m=r.ih(),$*=(T=r.tc().ih())/m)),h.Ab.vr(this.hf,C,w,p),A&&(m=r.tc().ih(),$*=(T=n.tc().ih())/m),w=NaN,c?w=n.Ai():isNaN(this.Dm)||(w=this.Dm),m=v.uv(r)|v.uv(n),T=10*a.Yd(0),this.Vv&&(m=3,T=0),r=h.Ab.NQ(f,r,C,a,w,o,m,T)}return x&&(r=h.Ab.PD(r,n,o)),c&&(r=h.Ab.Hz(r,n,this.Sm,o),A&&(r=h.Zl.local().W(r,$,o)),h.Ab.Jx(n,r,p)),r.B()||u!=null&&(r=u.$k(r,!1),this.yp(u,h.dm.reverse,r),r=u.al(r,!1)),r},v.prototype.VV=function(u,o){var r=(u.da()+u.S())/400;return r!=0?(r=h.Zl.local().W(u,r,o),r=this.MI(r,o),o=u.Ja(),r.dn(o)):(o=new h.Ta(u.Kp()),r=this.OI(o),o=u.Ja(),r.B()?o.Pa():(u.copyTo(o),u=r.D(),o.L(u.x,u.y,u.x,u.y))),o},v.prototype.WV=function(u,o){u=h.ba.ig(u);var r=this.hf.ef,n=this.hf.Zf,a=r.Tb(),c=n.Tb(),p=h.P.Gu(Math.min(u.I(),64));if(a==3){var f=r.Ki;a=(r=f.fk()).Tb(),u=f.$k(u,!0),this.yp(f,h.dm.forward,u),u=f.al(u,!0)}if(a==2){if(this.mo==h.ti.Clip?u=h.Wk.local().W(u,r.ol(),r,o):r.Xc()&&(a=new h.l,u.yc(a),r.Le().contains(a)||(this.mo==h.ti.PannableFold&&(u=h.Ab.mj(u,r)),h.Ab.Kt(u,r.Le(),r.Yd(0),!0),u=h.Ab.Gn(u,r,0,!0,0,o))),u.B())return u;h.Ab.wr(r,0,u,p)}else h.Ab.Kt(u,r.Le(),r.Yd(0),!0);return h.Ab.vr(this.hf,u,!1,p),r=0,a=!1,f=null,c==3&&(a=!0,c=(n=(f=n.Ki).fk()).Tb()),(c=c==2)?r=n.Ai():isNaN(this.Dm)||(r=this.Dm),c&&this.Sm!=h.ti.Clip||(u=h.Ab.Gn(u,n.tc(),r,!1,0,o)),c&&(u=h.Ab.Hz(u,n,this.Sm,o),h.Ab.Jx(n,u,p),u.B())||a&&(u=f.$k(u,!0),this.yp(f,h.dm.reverse,u),u=f.al(u,!0)),u},v.prototype.yp=function(u,o,r){var n=r.I();if(n!=0){for(var a=r.vb(0),c=h.P.lg(200,0),p=[],f=0;f<n;){var m=Math.min(100,n-f);a.Ww(2*f,2*m,c,2,!0);for(var w=0;w<m;++w)p[w]=h.h.construct(c[2*f],c[2*f+1]);u.Rt(o,p,m),f+=m}r.Qc(1993)}},v.Py=function(u,o,r){if(u==null||o==null||!o.Xc())throw h.i.ga("Invalid Arguement");if(u.B())return u;var n=u.K();return n==197?(n=new h.Ea(u.description)).bd(u,!1):h.ba.zd(n)?(n=new h.Ua(u.description)).oc(u,!0):n=u,(n=h.Ab.mj(n,o)).B()?n:h.Ab.Gn(n,o,0,n!=u,0,r)},v.oj=function(u,o,r,n){if(u==null||o==null||!o.Xc())throw h.i.ga("Invalid Arguement");if(u.B())return u;var a=u.K();if(h.ba.Ic(a)){u=h.Ab.mj(u,o),a=new h.l,u.A(a);for(var c=h.ta.ny(o,a,!1),p=o.hh(),f=Math.floor((a.v-p.v)/p.S())*p.S()+p.v;f<a.C;)f>a.v+c&&f<a.C-c&&(u=h.Ab.lS(u,o,r,f)),f+=p.S()}else{if(a==197)return(a=new h.Ea(u.description)).bd(u,!1),v.oj(a,o,r,n);if(h.ba.zd(a))return(a=new h.Ua(u.description)).oc(u,!0),v.oj(a,o,r,n)}return v.Py(u,o,n)},v}();h.cu=k}(G||(G={})),function(h){var k=function(v){function u(o,r,n,a){var c=v.call(this)||this;return o===void 0?c.description=h.ee.og():n===void 0?c.description=o:(c.description=h.ee.og(),c.SB(o,r),c.Sl(n,a)),c}return ft(u,v),u.prototype.K=function(){return 322},u.prototype.Rb=function(){var o=this.sa-this.qa,r=this.oa-this.ma;return Math.sqrt(o*o+r*r)},u.prototype.Ci=function(o){var r=this.sa-this.qa,n=this.oa-this.ma;return Math.sqrt(r*r+n*n)<=o},u.prototype.Qn=function(){return!1},u.prototype.jg=function(){var o=new h.h;return o.vc(this.xc(),this.ac()),o},u.VO=function(o,r){return new u(o.x,o.y,r.x,r.y)},u.prototype.dn=function(o){o.Pa(),o.kg(this.description);var r=new h.l;this.A(r),o.Yo(r),r=1;for(var n=this.description.Ba;r<n;r++)for(var a=this.description.qd(r),c=h.ua.Wa(a);r<c;r++){var p=this.Ug(a,0);o.setInterval(a,0,p)}},u.prototype.A=function(o){o.L(this.sa,this.oa,this.qa,this.ma),o.normalize()},u.prototype.Ro=function(o){o.Pa(),o.$b(this.sa,this.oa,this.Pd(0,1,0)),o.$b(this.qa,this.ma,this.Pd(1,1,0))},u.prototype.Pc=function(o){if(o instanceof h.Ed){this.wc();var r=new h.h;r.x=this.sa,r.y=this.oa,o.Fh(r,r),this.sa=r.x,this.oa=r.y,r.x=this.qa,r.y=this.ma,o.Fh(r,r),this.qa=r.x,this.ma=r.y}else this.wc(),(r=new h.Od).x=this.sa,r.y=this.oa,r.z=this.Pd(0,1,0),r=o.gp(r),this.sa=r.x,this.oa=r.y,this.vn(0,1,0,r.z),r.x=this.qa,r.y=this.ma,r.z=this.Pd(1,1,0),r=o.gp(r),this.qa=r.x,this.ma=r.y,this.vn(1,1,0,r.z)},u.prototype.Ja=function(){return new u(this.description)},u.prototype.Rx=function(o,r){return(this.qa-o-(this.sa-o))*(this.ma-r+(this.oa-r))*.5},u.prototype.tx=function(o){return o*this.Rb()},u.prototype.FG=function(o){return o/this.Rb()},u.prototype.vF=function(o){return h.mc.jq(this.sa,this.qa,o)},u.prototype.YQ=function(o){return h.mc.jq(this.oa,this.ma,o)},u.prototype.el=function(o,r){var n=new h.hg;return this.bh(o,r,n),n.get()},u.prototype.bh=function(o,r,n){if(n==null)throw h.i.O();n.Pr(),(n=n.get()).kg(this.description);var a=new h.h;this.ic(o,a),n.SB(a.x,a.y),this.ic(r,a),n.Sl(a.x,a.y),a=1;for(var c=this.description.Ba;a<c;a++)for(var p=this.description.Fd(a),f=h.ua.Wa(p),m=0;m<f;m++){var w=this.Vc(o,p,m);n.RB(p,m,w),w=this.Vc(r,p,m),n.IB(p,m,w)}},u.prototype.Vc=function(o,r,n){if(r==0)return n==0?this.ic(o).x:this.ic(o).y;switch(h.ua.gz(r)){case 0:return .5>o?this.xv(r,n):this.hv(r,n);case 1:var a=this.xv(r,n);return r=this.hv(r,n),h.mc.jq(a,r,o);case 2:throw h.i.ga("not implemented")}throw h.i.Ra()},u.prototype.fe=function(o,r){var n=this.qa-this.sa,a=this.ma-this.oa,c=n*n+a*a;return c==0?.5:(o=((o.x-this.sa)*n+(o.y-this.oa)*a)/c,r||(0>o?o=0:1<o&&(o=1)),o)},u.prototype.fq=function(o,r,n,a){if(o){if((o=this.ma-this.oa)==0)return r==this.ma?-1:0;if(0>(r=(r-this.oa)/o)||1<r)return 0;n!=null&&(n[0]=this.vF(r))}else{if((o=this.qa-this.sa)==0)return r==this.qa?-1:0;if(0>(r=(r-this.sa)/o)||1<r)return 0;n!=null&&(n[0]=this.YQ(r))}return a!=null&&(a[0]=r),1},u.prototype.Me=function(o,r){var n=this.ma-this.oa;return n==0?o==this.ma?r:NaN:(o=(o-this.oa)/n,r=this.vF(o),o==1&&(r=this.qa),r)},u.prototype.su=function(o,r,n){return 0<=this.sp(o.x,o.y,r,n)},u.prototype.wi=function(o,r,n){return 0<=this.sp(o,r,n,!0)},u.prototype.rs=function(o,r){return this.su(o,r,!1)},u.prototype.jI=function(){if(this.ma<this.oa||this.ma==this.oa&&this.qa<this.sa){var o=this.sa;this.sa=this.qa,this.qa=o,o=this.oa,this.oa=this.ma,this.ma=o,o=0;for(var r=this.description.Qq-2;o<r;o++){var n=this.la[o];this.la[o]=this.la[o+r],this.la[o+r]=n}}},u.prototype.vu=function(o,r){(r=h.h.construct(o,r)).sub(this.ac());var n=new h.h;return n.vc(this.xc(),this.ac()),(o=n.xi(r))>(r=8881784197001252e-31*(Math.abs(n.x*r.y)+Math.abs(n.y*r.x)))?-1:o<-r?1:0},u.prototype.sp=function(o,r,n,a){var c=this.sa,p=this.oa,f=o-c,m=r-p;if((f=Math.sqrt(f*f+m*m))<=Math.max(n,6661338147750939e-31*f))return a&&f==0?NaN:0;if(f=o-this.qa,m=r-this.ma,(f=Math.sqrt(f*f+m*m))<=Math.max(n,6661338147750939e-31*f))return a&&f==0?NaN:1;if(f=this.qa-this.sa,m=this.ma-this.oa,0<(a=Math.sqrt(f*f+m*m))){var w=1/a,x=o-c,$=r-p,T=x*(f*=w)+$*(m*=w),A=17763568394002505e-31*(Math.abs(x*f)+Math.abs($*m)),C=f;if(f=-m,m=C,T<-(A=Math.max(n,A))||T>a+A)return NaN;if(Math.abs(x*f+$*m)<=Math.max(n,17763568394002505e-31*(Math.abs(x*f)+Math.abs($*m)))&&(.5>=(f=h.P.Rk(T*w,0,1))?(m=this.sa+(this.qa-this.sa)*f,a=this.oa+(this.ma-this.oa)*f):(m=this.qa-(this.qa-this.sa)*(1-f),a=this.ma-(this.ma-this.oa)*(1-f)),h.h.Jy(m,a,o,r)<=n)){if(.5>f){if(h.h.Jy(m,a,c,p)<=n)return 0}else if(h.h.Jy(m,a,this.qa,this.ma)<=n)return 1;return f}}return NaN},u.prototype.Nb=function(o){return o!=null&&(o==this||o.constructor===this.constructor&&this.xM(o))},u.prototype.jD=function(o,r,n){var a=n?this.sa:this.qa;n=n?this.oa:this.ma;var c=new h.h;return c.x=o.qa-a,c.y=o.ma-n,!(r.Rh(c)>6661338147750939e-31*r.YC(c))||(c.x=o.sa-a,c.y=o.oa-n,r.Rh(c)<=6661338147750939e-31*r.YC(c))},u.prototype.iD=function(o){var r=new h.h;return r.x=this.qa-this.sa,r.y=this.ma-this.oa,!!this.jD(o,r,!1)&&(r.Uq(),!!this.jD(o,r,!0))},u.FM=function(o,r){var n=o.vu(r.sa,r.oa),a=o.vu(r.qa,r.ma);return!(0>n&&0>a||0<n&&0<a)&&(n=r.vu(o.sa,o.oa),a=r.vu(o.qa,o.ma),!(0>n&&0>a||0<n&&0<a)&&((n=o.Rb())>(a=r.Rb())?o.iD(r):r.iD(o)))},u.DM=function(o,r,n){var a=h.h.construct(NaN,NaN),c=o.qa-o.sa,p=o.ma-o.oa,f=r.qa-r.sa,m=r.ma-r.oa,w=f*p-c*m;if(w==0)return a;var x=8881784197001252e-31*(Math.abs(f*p)+Math.abs(c*m)),$=r.sa-o.sa,T=r.oa-o.oa,A=f*T-$*m,C=A/w,N=Math.abs(w);return C<-(f=(8881784197001252e-31*(Math.abs(f*T)+Math.abs($*m))*N+x*Math.abs(A))/(w*w)+2220446049250313e-31*Math.abs(C))||C>1+f||(f=(m=c*T-$*p)/w)<-(c=(8881784197001252e-31*(Math.abs(c*T)+Math.abs($*p))*N+x*Math.abs(m))/(w*w)+2220446049250313e-31*Math.abs(f))||f>1+c||(C=h.P.Rk(C,0,1),c=h.P.Rk(f,0,1),p=o.ic(C),w=r.ic(c),(x=new h.h).vc(p,w),x.length()>n&&(x.add(p,w),x.scale(.5),C=o.fe(x,!1),c=r.fe(x,!1),o=o.ic(C),r=r.ic(c),o.sub(r),o.length()>n)||a.na(C,c)),a},u.GM=function(o,r,n,a){var c=0;if((o.sa==r.sa&&o.oa==r.oa||o.sa==r.qa&&o.oa==r.ma)&&(c++,!a))return 1;if(o.qa==r.sa&&o.ma==r.oa||o.qa==r.qa&&o.ma==r.ma){if(++c==2)return 2;if(!a)return 1}return r.wi(o.sa,o.oa,n)||r.wi(o.qa,o.ma,n)||o.wi(r.sa,r.oa,n)||o.wi(r.qa,r.ma,n)?1:a&&c!=0||u.FM(o,r)==0?0:1},u.Xx=function(o,r,n,a,c,p){var f=0,m=o.sp(r.sa,r.oa,p,!1),w=o.sp(r.qa,r.ma,p,!1),x=r.sp(o.sa,o.oa,p,!1),$=r.sp(o.qa,o.ma,p,!1);return isNaN(m)||(a!=null&&(a[f]=m),c!=null&&(c[f]=0),n!=null&&(n[f]=h.h.construct(r.sa,r.oa)),f++),isNaN(w)||(a!=null&&(a[f]=w),c!=null&&(c[f]=1),n!=null&&(n[f]=h.h.construct(r.qa,r.ma)),f++),f==2||isNaN(x)||m==0&&x==0||w==0&&x==1||(a!=null&&(a[f]=0),c!=null&&(c[f]=x),n!=null&&(n[f]=h.h.construct(o.sa,o.oa)),f++),f==2||isNaN($)||m==1&&$==0||w==1&&$==1||(a!=null&&(a[f]=1),c!=null&&(c[f]=$),n!=null&&(n[f]=h.h.construct(r.qa,r.ma)),f++),0<f?(f==2&&a!=null&&a[0]>a[1]&&(o=a[0],a[0]=a[1],a[1]=o,c!=null&&(a=c[0],c[0]=c[1],c[1]=a),n!=null&&(c=h.h.construct(n[0].x,n[0].y),n[0]=n[1],n[1]=c)),f):(f=u.DM(o,r,p),isNaN(f.x)?0:(n!=null&&(n[0]=o.ic(f.x)),a!=null&&(a[0]=f.x),c!=null&&(c[0]=f.y),1))},u.prototype.XF=function(){return 0},u.prototype.pp=function(){},u.prototype.toString=function(){return"Line: ["+this.sa.toString()+", "+this.oa.toString()+", "+this.qa.toString()+", "+this.ma.toString()+"]"},u}(h.KC);h.zb=k}(G||(G={})),function(h){var k=function(){function v(){this.Lm=[],this.za=-1}return v.prototype.Ma=function(){return this.za},v.prototype.next=function(){if(this.Lm!=null&&this.Lm.length!=0){this.za++;var u=this.Lm[0];return this.Lm=1>=this.Lm.length?[]:this.Lm.slice(1),u}return this.Lm=null},v.prototype.NX=function(u){this.Lm.push(u)},v.prototype.qe=function(){},v}();h.ZK=k}(G||(G={})),function(h){var k;(k=h.KL||(h.KL={}))[k.enumFillRuleOddEven=0]="enumFillRuleOddEven",k[k.enumFillRuleWinding=1]="enumFillRuleWinding";var v=function(u){function o(r,n){var a=u.call(this)||this;if(a.yf=!1,a.Gq=null,a.uq=0,a.tq=0,a.Bj=null,a.Ng=!1,a.nb=null,a.mb=null,a.Se=null,a.Mj=null,a.Td=null,a.vq=0,a.gb=0,a.zq=0,n===void 0)a.yf=r,a.Ng=!1,a.vq=0,a.uq=0,a.tq=0,a.xa=0,a.description=h.ee.og();else{if(n==null)throw h.i.O();a.yf=r,a.Ng=!1,a.vq=0,a.uq=0,a.tq=0,a.xa=0,a.description=n}return a.Bj=null,a.gb=0,a}return ft(o,u),o.prototype.vm=function(){return 0<this.vq},o.prototype.Wx=function(){this.wc(),this.Gq==null?this.Gq=new h.Ta(this.description):this.Gq.kg(this.description)},o.prototype.qx=function(r,n){var a=new h.h;a.x=r,a.y=n,this.Mt(a)},o.prototype.Mt=function(r){this.Wx(),this.Gq.Db(r),this.Ng=!0},o.prototype.nf=function(r){if(r.B())throw h.i.O();this.Ll(r.description),this.Wx(),r.copyTo(this.Gq),this.Ng=!0},o.prototype.Qx=function(){var r=1;this.Ng&&(this.Wx(),this.nb==null?(this.nb=h.Zc.Ph(2),this.nb.write(0,0),this.mb=h.Zc.Nr(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.yf&&this.mb.write(this.mb.size-2,1),r++);var n=this.xa;this.nb.write(this.nb.size-1,this.xa+r),this.fm(n+r),this.mb.write(this.nb.size-1,0),this.Ng&&(this.Ht(n,this.Gq),this.Ng=!1)},o.prototype.zj=function(r,n){this.Qx(),this.Db(this.xa-1,r,n)},o.prototype.Di=function(r){this.Qx(),this.Db(this.xa-1,r)},o.prototype.lineTo=function(r){this.Qx(),this.Ht(this.xa-1,r)},o.prototype.sU=function(r){if(this.wc(),this.yf)throw h.i.Ra();var n=this.ea();if(r>n)throw h.i.Ra();if(this.ec(r)){if(this.mb==null)throw h.i.Ra();var a=this.xa,c=this.Ca(r),p=this.Wc(r);this.fm(this.xa+1),this.rc();for(var f=0,m=this.description.Ba;f<m;f++)if(this.Aa[f]!=null){var w=h.ua.Wa(this.description.Fd(f));this.Aa[f].Nn(w*p,this.Aa[f],w*c,w,!0,1,w*a)}for(;n>r;n--)a=this.nb.read(n),this.nb.write(n,a+1);this.mb.CE(r,1)}},o.prototype.Cp=function(){if(this.ux(),r===void 0){this.Ng=!1;var r=this.ea()-1}var n=this.mb.read(r);this.mb.write(r,1|n),this.Se!=null&&(r=this.Wc(r)-1,this.Se.write(r,1),this.Mj.write(r,-1))},o.prototype.ec=function(r){return(1&this.mb.read(r))!=0},o.prototype.On=function(r){if(this.ec(r))return!0;var n=this.Ca(r);return!(n>(r=this.Wc(r)-1))&&(n=this.Oa(n),r=this.Oa(r),n.rb(r))},o.prototype.zv=function(r){return(2&this.mb.read(r))!=0},o.prototype.oc=function(r,n){if(this.Ll(r.description),r.K()!=322)throw h.i.Ra();var a=new h.Ta;(n||this.B())&&(r.Uo(a),this.nf(a)),r.Qo(a),this.lineTo(a)},o.prototype.vp=function(r){var n=this.xa==0;this.qx(r.v,r.G),this.zj(r.v,r.H),this.zj(r.C,r.H),this.zj(r.C,r.G),this.Cp(),this.Ng=!1,n&&this.Nf(256,!1)},o.prototype.bd=function(r,n){if(!r.B()){for(var a=this.xa==0,c=new h.Ta(this.description),p=0;4>p;p++)r.If(n?4-p-1:p,c),p==0?this.nf(c):this.lineTo(c);this.Cp(),this.Ng=!1,a&&!n&&this.Nf(256,!1)}},o.prototype.add=function(r,n){for(var a=0;a<r.ea();a++)this.addPath(r,a,!n)},o.prototype.addPath=function(r,n,a){this.wf(-1,r,n,a)},o.prototype.Zk=function(r,n){this.Cz(r,n)},o.prototype.Fr=function(r,n,a,c,p){if(p||this.ea()!=0||(p=!0),0>n&&(n=r.ea()-1),n>=r.ea()||0>a||0>c||c>r.sv(n))throw h.i.ga("index out of bounds");if(c!=0){var f=r.ec(n)&&a+c==r.sv(n);if(!f||c!=1){if(this.Ng=!1,this.Ll(r.description),a=r.Ca(n)+a+1,p&&(c++,a--),f&&c--,f=this.xa,this.fm(this.xa+c),this.rc(),p){if(c==0)return;this.nb.add(this.xa),p=r.mb.read(n),p&=-5,this.yf&&(p|=1),this.mb.write(this.mb.size-1,p),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.xa);p=0;for(var m=this.description.Ba;p<m;p++){var w=this.description.qd(p),x=h.ua.Wa(w),$=r.description.Qf(w);0>$||r.Aa[$]==null?this.Aa[p].Mn(x*f,h.ua.te(w),c*x,x*f):this.Aa[p].Nn(x*f,r.Aa[$],x*a,c*x,!0,x,x*f)}if(this.vm()||r.zv(n))throw h.i.Ra();this.Qc(1993)}}},o.prototype.gJ=function(){for(var r=0,n=this.ea();r<n;r++)this.uW(r)},o.prototype.uW=function(r){if(this.rc(),r>=this.ea())throw h.i.O();var n=this.Ca(r),a=this.Ka(r);r=this.ec(r)?1:0;for(var c=0,p=this.description.Ba;c<p;c++)if(this.Aa[c]!=null){var f=h.ua.Wa(this.description.Fd(c));this.Aa[c].oi(f*(n+r),f*(a-r),f)}this.Qc(1993)},o.prototype.ar=function(r){this.rc();var n=this.ea();if(0>r&&(r=n-1),r>=n)throw h.i.O();for(var a=this.Ca(r),c=this.Ka(r),p=0,f=this.description.Ba;p<f;p++)if(this.Aa[p]!=null){var m=h.ua.Wa(this.description.Fd(p));this.Aa[p].Fn(m*a,m*c,m*this.xa)}for(a=r+1;a<=n;a++)p=this.nb.read(a),this.nb.write(a-1,p-c);if(this.mb==null)for(a=r+1;a<=n;a++)r=this.mb.read(a),this.mb.write(a-1,r);this.nb.resize(n),this.mb.resize(n),this.xa-=c,this.Qg-=c,this.Qc(1993)},o.prototype.wf=function(r,n,a,c){if(n==this||a>=n.ea())throw h.i.O();var p=this.ea();if(r>p)throw h.i.O();0>r&&(r=p),0>a&&(a=n.ea()-1),this.Ng=!1,this.Ll(n.description),n.rc();var f=n.Ca(a),m=n.Ka(a),w=this.xa,x=n.ec(a)&&!c?1:0;this.fm(this.xa+m),this.rc();for(var $=r<p?this.Ca(r):w,T=0,A=this.description.Ba;T<A;T++){var C=this.description.Fd(T),N=n.description.Qf(C),L=h.ua.Wa(C);0<=N&&n.Aa[N]!=null?(x!=0&&this.Aa[T].Nn($*L,n.Aa[N],L*f,L,!0,L,L*w),this.Aa[T].Nn(($+x)*L,n.Aa[N],L*(f+x),L*(m-x),c,L,L*(w+x))):this.Aa[T].Mn($*L,h.ua.te(C),L*m,L*w)}for(this.nb.add(w+m),c=p;c>=r+1;c--)f=this.nb.read(c-1),this.nb.write(c,f+m);for(n.zv(a),this.mb.add(0),c=p-1;c>=r+1;c--)p=this.mb.read(c),p&=-5,this.mb.write(c+1,p);p=n.BR().read(a),p&=-5,this.yf&&(p|=1),this.mb.write(r,p)},o.prototype.Cz=function(r,n){var a=-1,c=this.ea();if(a>c)throw h.i.O();0>a&&(a=c),this.Ng=!1;var p=this.xa;this.fm(this.xa+n),this.rc();var f=a<c?this.Ca(a):p;if(r!=null)this.Aa[0].Dz(2*f,r,0,n,!0,2*p);else{var m=h.ua.te(0);this.Aa[0].Mn(2*f,m,2*n,2*p)}r=1;for(var w=this.description.Ba;r<w;r++){m=this.description.qd(r);var x=h.ua.Wa(m);m=h.ua.te(m),this.Aa[r].Mn(f*x,m,x*n,x*p)}for(this.nb.add(this.xa),p=c;p>=a+1;p--)f=this.nb.read(p-1),this.nb.write(p,f+n);for(this.mb.add(0),p=c-1;p>=a+1;p--)n=this.mb.read(p),n&=-5,this.mb.write(p+1,n);this.yf&&this.mb.write(a,1)},o.prototype.iG=function(r,n,a){var c=-1;if(0>r&&(r=this.ea()),r>this.ea()||c>this.Ka(r)||a>n.length)throw h.i.ga("index out of bounds");if(a!=0){r==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>c&&(c=this.Ka(r)),this.rc();var p=this.xa;this.fm(this.xa+a),this.rc();for(var f=0,m=this.description.Ba;f<m;f++){var w=this.description.Fd(f),x=h.ua.Wa(w);this.Aa[f].Vt(x*(this.Ca(r)+c+a),(p-this.Ca(r)-c)*x,this.Aa[f],x*(this.Ca(r)+c),!0,x),f==0?this.Aa[f].oC(x*(this.Ca(r)+c),a,n,0,!0):this.Aa[f].Xj(h.ua.te(w),(this.Ca(r)+c)*x,a*x)}for(this.vm()&&(this.Se.Vt(this.Ca(r)+c+a,p-this.Ca(r)-c,this.Se,this.Ca(r)+c,!0,1),this.Mj.Vt(this.Ca(r)+c+a,p-this.Ca(r)-c,this.Mj,this.Ca(r)+c,!0,1),this.Se.Xj(1,this.Ca(r)+c,a),this.Mj.Xj(-1,this.Ca(r)+c,a)),r+=1,n=this.ea();r<=n;r++)this.nb.write(r,this.nb.read(r)+a)}},o.prototype.xf=function(r,n,a){var c=this.ea();if(0>r&&(r=this.ea()),r>=c||n>this.Ka(r))throw h.i.ga("index out of bounds");r==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>n&&(n=this.Ka(r));var p=this.xa;this.fm(this.xa+1),this.rc();var f=this.Ca(r);this.Aa[0].wj(2*(f+n),a,2*p),a=1;for(var m=this.description.Ba;a<m;a++){var w=this.description.Fd(a),x=h.ua.Wa(w);this.Aa[a].Mn(x*(f+n),h.ua.te(w),x,x*p)}for(r+=1;r<=c;r++)this.nb.write(r,this.nb.read(r)+1)},o.prototype.xB=function(r,n){var a=this.ea();if(0>r&&(r=a-1),r>=a||n>=this.Ka(r))throw h.i.ga("index out of bounds");this.rc();var c=this.Ca(r);0>n&&(n=this.Ka(r)-1),n=c+n,c=0;for(var p=this.description.Ba;c<p;c++)if(this.Aa[c]!=null){var f=h.ua.Wa(this.description.Fd(c));this.Aa[c].Fn(f*n,f,f*this.xa)}for(;a>=r+1;a--)n=this.nb.read(a),this.nb.write(a,n-1);this.xa--,this.Qg--,this.Qc(1993)},o.prototype.mE=function(r,n,a,c){if(r=this.Ca(r)+n,(a=this.Ca(a)+c)<r||0>r||a>this.I()-1)throw h.i.O();n=0,(c=this.Ha()).Wb(r);do{for(;c.Ia()&&(r=c.ia(),c.xb()!=a);)n+=r=r.Rb();if(c.xb()==a)break}while(c.ab());return n},o.prototype.YN=function(r,n,a){if(n=this.Ca(r)+n,a=this.Ca(r)+a,0>n||a>this.I()-1)throw h.i.O();var c=this.Ha();if(n>a){if(!this.ec(r))throw h.i.O("cannot iterate across an open path");c.DB()}var p=r=0;c.Wb(n);do p+=r,r=c.ia().Rb();while(c.xb()!=a);return p},o.prototype.mg=function(){return h.ri.im(this,null)},o.prototype.BS=function(r,n,a){for(var c=r;c<a-1;c++)if(this.ec(c))throw h.i.O("cannot interpolate across closed paths");if((c=this.description.Ba)!=1){var p=this.mE(r,n,a,void 0);if(p!=0)for(var f=1;f<c;f++){var m=this.description.qd(f);if(h.ua.gz(m)!=2)for(var w=h.ua.Wa(m),x=0;x<w;x++)this.DS(m,r,n,a,p,x)}}},o.prototype.AS=function(r,n,a){var c=this.description.Ba;if(c!=1){var p=this.YN(r,n,a);if(p!=0)for(var f=1;f<c;f++){var m=this.description.qd(f);if(h.ua.gz(m)!=2)for(var w=h.ua.Wa(m),x=0;x<w;x++)this.CS(m,r,n,a,p,x)}}},o.prototype.DS=function(r,n,a,c,p,f){var m=this.Ha(),w=this.Ca(n)+a;c=this.Ca(c)+void 0,n=this.Vc(r,w,f),a=this.Vc(r,c,f);var x=n,$=0;m.Wb(w);do if(m.Ia()){if(m.ia(),m.xb()==c)break;this.setAttribute(r,m.xb(),f,x),m.mi();do{if(w=m.ia(),m.ik()==c)return;$+=w=w.Rb(),x=h.mc.jq(n,a,$/p),m.Pn()||this.setAttribute(r,m.ik(),f,x)}while(m.Ia())}while(m.ab())},o.prototype.CS=function(r,n,a,c,p,f){var m=this.Ha(),w=this.Ca(n)+a;if((n=this.Ca(n)+c)!=w){c=this.Vc(r,w,f),a=this.Vc(r,n,f);var x=0;m.Wb(w),m.DB(),w=c;do{var $=m.ia();this.setAttribute(r,m.xb(),f,w),x+=w=$.Rb(),w=h.mc.jq(c,a,x/p)}while(m.ik()!=n)}},o.prototype.Pa=function(){this.vq=0,this.Ng=!1,this.Td=this.Se=this.Mj=this.mb=this.nb=null,this.oD()},o.prototype.Pc=function(r){r instanceof h.Ed?this.QD(r,-1):this.oN(r)},o.prototype.QD=function(r,n){if(!this.B()&&!r.isIdentity()){this.rc();var a=this.Aa[0],c=new h.h,p=new h.h;if(0>n){var f=this.vm(),m=0;n=this.xa}else f=this.zv(n),m=this.Ca(n),n=this.Wc(n);for(;m<n;m++){if(c.x=a.read(2*m),c.y=a.read(2*m+1),f){var w=this.Mj.read(m);if(0<=w)switch(7&this.Se.read(m)){case 2:p.x=this.Td.read(w),p.y=this.Td.read(w+1),r.Fh(p,p),this.Td.write(w,p.x),this.Td.write(w+1,p.y),p.x=this.Td.read(w+3),p.y=this.Td.read(w+4),r.Fh(p,p),this.Td.write(w+3,p.x),this.Td.write(w+4,p.y);break;case 4:throw h.i.Ra()}}r.Fh(c,c),a.write(2*m,c.x),a.write(2*m+1,c.y)}this.Qc(1993)}},o.prototype.oN=function(r){if(!this.B()){this.se(1),this.rc();for(var n=this.Aa[0],a=this.Aa[1],c=new h.Od,p=new h.Od,f=this.vm(),m=0;m<this.xa;m++){if(c.x=n.read(2*m),c.y=n.read(2*m+1),c.z=a.read(m),f){var w=this.Mj.read(m);if(0<=w)switch(7&this.Se.read(m)){case 2:p.x=this.Td.read(w),p.y=this.Td.read(w+1),p.z=this.Td.read(w+2),p=r.gp(p),this.Td.write(w,p.x),this.Td.write(w+1,p.y),this.Td.write(w+1,p.z),p.x=this.Td.read(w+3),p.y=this.Td.read(w+4),p.z=this.Td.read(w+5),p=r.gp(p),this.Td.write(w+3,p.x),this.Td.write(w+4,p.y),this.Td.write(w+5,p.z);break;case 4:throw h.i.Ra()}}c=r.gp(c),n.write(2*m,c.x),n.write(2*m+1,c.y),a.write(m,c.z)}this.Qc(1993)}},o.prototype.dy=function(){this.nb==null&&(this.nb=h.Zc.Ph(1,0),this.mb=h.Zc.Nr(1,0)),this.Se!=null&&(this.Se.resize(this.Qg,1),this.Mj.resize(this.Qg,-1))},o.prototype.pp=function(r){r.Ng=!1,r.vq=this.vq,r.zq=this.zq,r.nb=this.nb!=null?h.ja.Cn(this.nb):null,r.mb=this.mb!=null?h.rn.Cn(this.mb):null,r.Mj=this.Mj!=null?h.ja.Cn(this.Mj):null,r.Se=this.Se!=null?h.rn.Cn(this.Se):null,r.Td=this.Td!=null?h.ce.Cn(this.Td):null,r.uq=this.uq,r.tq=this.tq,r.Bj=this.ak(1024)?null:this.Bj},o.prototype.Rb=function(){if(!this.ak(512))return this.uq;for(var r=this.Ha(),n=new h.Dx(0);r.ab();)for(;r.Ia();)n.add(r.ia().Rb());return this.uq=n.tm(),this.Nf(512,!1),n.tm()},o.prototype.Nb=function(r){if(r==this)return!0;if(!(r instanceof o&&u.prototype.Nb.call(this,r)))return!1;var n=this.ea();return!(n!=r.ea()||this.nb!=null&&!this.nb.Nb(r.nb,0,n+1)||this.zq!=r.zq||this.mb!=null&&!this.mb.Nb(r.mb,0,n))&&u.prototype.Nb.call(this,r)},o.prototype.Ha=function(){return new h.QL(this)},o.prototype.cy=function(r){if(u.prototype.cy.call(this,r),this.vm())for(r=this.Ha();r.ab();)r.Ia()},o.prototype.Ap=function(r,n){if(u.prototype.Ap.call(this,r,n),this.vm())for(r=this.Ha();r.ab();)r.Ia()},o.prototype.Yx=function(){this.xa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},o.prototype.He=function(){return this.yf?(this.yu(),this.tq):0},o.prototype.Fv=function(r){return!!this.yf&&(this.ak(8)?(this.yu(),0<this.Bj.read(r)):(4&this.mb.read(r))!=0)},o.prototype.Kr=function(r){return this.yf?(this.yu(),this.Bj.read(r)):0},o.prototype.yu=function(){if(this.ak(1024)){var r=this.ea();this.Bj==null?this.Bj=new h.ce(r):this.Bj.size!=r&&this.Bj.resize(r),r=new h.Dx(0);for(var n=new h.Dx(0),a=new h.h,c=0,p=this.Ha();p.ab();){for(n.reset(),this.D(this.Ca(p.gb),a);p.Ia();)n.add(p.ia().Rx(a.x,a.y));r.add(n.tm());var f=c++;this.Bj.write(f,n.tm())}this.tq=r.tm(),this.Nf(1024,!1)}},o.prototype.xR=function(){if(this.yf){this.hm();for(var r=this.ea(),n=0;n<r;n++)4&this.mb.read(n)}},o.prototype.hm=function(){if(this.ak(8)){this.yu();var r=this.ea();(this.mb==null||this.mb.size<r)&&(this.mb=h.Zc.Nr(r+1));for(var n=1,a=0;a<r;a++){var c=this.Bj.read(a);a==0&&(n=0<c?1:-1),0<c*n?this.mb.rJ(a,4):this.mb.CE(a,4)}this.Nf(8,!1)}},o.prototype.nz=function(r){var n=this.gb,a=this.ea();if(0<=n&&n<a){if(r<this.Wc(n)){if(r>=this.Ca(n))return n;n--}else n++;if(0<=n&&n<a&&r>=this.Ca(n)&&r<this.Wc(n))return this.gb=n}if(5>a){for(n=0;n<a;n++)if(r<this.Wc(n))return this.gb=n;throw h.i.ga("corrupted geometry")}for(n=0,--a;a>n;){var c=n+(a-n>>1);if(r<this.Ca(c))a=c-1;else{if(!(r>=(n=this.Wc(c))))return this.gb=c;n=c+1}}return this.gb=n},o.prototype.sz=function(){var r=this.I();if(!this.yf){r-=this.ea();for(var n=0,a=this.ea();n<a;n++)this.ec(n)&&r++}return r},o.prototype.sv=function(r){var n=this.Ka(r);return this.ec(r)||n--,n},o.prototype.Ja=function(){return new o(this.yf,this.description)},o.prototype.Eb=function(){return this.yf?2:1},o.prototype.K=function(){return this.yf?1736:1607},o.prototype.IJ=function(r){this.nb=r,this.Qc(16777215)},o.prototype.MR=function(){return this.ux(),this.Se},o.prototype.BR=function(){return this.ux(),this.mb},o.prototype.HJ=function(r){this.mb=r,this.Qc(16777215)},o.prototype.ea=function(){return this.nb!=null?this.nb.size-1:0},o.prototype.Wc=function(r){return this.nb.read(r+1)},o.prototype.Ka=function(r){return this.nb.read(r+1)-this.nb.read(r)},o.prototype.Ca=function(r){return this.nb.read(r)},o.prototype.mu=function(r,n){this.Cb==null&&(this.Cb=new h.Uk),n=h.Lx.fW(n);var a=this.Cb.Fk;if(a!=null){if(!(a.Ik<r||n>a.IR()))return!0;this.Cb.qD(null)}return a=h.Lx.create(this,r,n),this.Cb.qD(a),!0},o.prototype.dc=function(){var r=u.prototype.dc.call(this);if(!this.Bc()){var n=this.ea();this.nb!=null&&this.nb.Bn(r,0,n+1),this.mb!=null&&this.mb.Bn(r,0,n)}return r},o.prototype.RF=function(r){return this.Se!=null?this.Se.read(r):1},o.prototype.cc=function(r,n,a){var c=this.nz(r);if(r==this.Wc(c)-1&&!this.ec(c))throw h.i.ga("index out of bounds");this.rc();var p=this.Se,f=1;if(p!=null&&(f=7&p.read(r)),f!==1)throw h.i.Ra();if(n.Pr(),n=n.get(),a?n.kg(h.ee.og()):n.kg(this.description),c=r==this.Wc(c)-1&&this.ec(c)?this.Ca(c):r+1,p=new h.h,this.D(r,p),n.Ec(p),this.D(c,p),n.Rc(p),!a)for(a=1,p=this.description.Ba;a<p;a++){f=this.description.Fd(a);for(var m=h.ua.Wa(f),w=0;w<m;w++){var x=this.Vc(f,r,w);n.RB(f,w,x),x=this.Vc(f,c,w),n.IB(f,w,x)}}},o.prototype.Sj=function(r,n){if(r>=this.ea())throw h.i.O();if(this.B())n.Pa();else{if(this.zv(r))throw h.i.ga("not implemented");var a=this.vb(0),c=new h.h,p=new h.l;p.Pa();var f=this.Ca(r);for(r=this.Wc(r);f<r;f++)a.uc(2*f,c),p.$b(c);n.L(p)}},o.prototype.gj=function(r){return this.Cb==null&&(this.Cb=new h.Uk),!(r==0||16>this.I())&&(r=h.ta.fE(this),this.Cb.OM(r),!0)},o.prototype.$L=function(){if(this.Cb==null&&(this.Cb=new h.Uk),this.Cb.Ao==null){this.Cb.pD(null);var r=h.ta.QN(this);this.Cb.pD(r)}},o.prototype.Zo=function(r){this.zq=r},o.prototype.Jn=function(){return this.zq},o.prototype.vD=function(r){if(this==r)throw h.i.ga("MultiPathImpl.add");for(var n=this.ea(),a=0;a<r.ea();a++)this.addPath(r,a,!0),this.sU(n),n++},o.prototype.cO=function(r){var n=this.nz(r),a=this.Ca(n);if(a!=r){if(r>=(n=this.Wc(n))||r<a)throw h.i.ga("change_ring_start_point");for(var c=0,p=this.description.Ba;c<p;c++){var f=this.description.qd(c);f=h.ua.Wa(f),this.Aa[c].rotate(a*f,r*f,n*f)}}},o}(h.Ex);h.Vk=v}(G||(G={})),function(h){var k=function(v){function u(o){var r=v.call(this)||this;if(o!==void 0){if(o==null)throw h.i.O();r.description=o}else r.description=h.ee.og();return r.xa=0,r}return ft(u,v),u.prototype.Ja=function(){return new u(this.description)},u.prototype.add=function(o){this.resize(this.xa+1),this.Eh(this.xa-1,o)},u.prototype.Cu=function(o,r){this.resize(this.xa+1);var n=new h.h;n.na(o,r),this.Db(this.xa-1,n)},u.prototype.Gd=function(o,r,n){if(n=0>n?o.I():n,0>r||r>o.I()||n<r)throw h.i.O();if(r!=n){this.Ll(o.description),n-=r;var a=this.xa;this.resize(this.xa+n),this.rc();for(var c=0,p=o.description.Ba;c<p;c++){var f=o.description.Fd(c),m=h.ua.Wa(f),w=this.vb(f);f=o.vb(f),w.Nn(a*m,f,r*m,n*m,!0,1,a*m)}}},u.prototype.zD=function(o,r){var n=o.length;if(r=0>r?n:r,0>n||0>r)throw h.i.O();if(r!=0){n=r-0,r=this.xa,this.resize(this.xa+n);for(var a=0;a<n;a++)this.Db(r+a,o[0+a])}},u.prototype.xB=function(o){if(0>o||o>=this.I())throw h.i.ga("index out of bounds");this.rc();for(var r=0,n=this.description.Ba;r<n;r++)if(this.Aa[r]!=null){var a=h.ua.Wa(this.description.Fd(r));this.Aa[r].Fn(a*o,a,a*this.xa)}this.xa--,this.Qg--,this.Qc(1993)},u.prototype.resize=function(o){this.fm(o)},u.prototype.pp=function(){},u.prototype.Pa=function(){v.prototype.oD.call(this)},u.prototype.Pc=function(o){if(o instanceof h.Ed){if(this.B())return;this.rc();for(var r=this.Aa[0],n=new h.h,a=0;a<this.xa;a++)n.x=r.read(2*a),n.y=r.read(2*a+1),o.Fh(n,n),r.write(2*a,n.x),r.write(2*a+1,n.y)}else{if(this.B())return;this.rc(),this.se(1),this.rc(),r=this.Aa[0],n=this.Aa[1];var c=new h.Od;for(a=0;a<this.xa;a++){c.x=r.read(2*a),c.y=r.read(2*a+1),c.z=n.read(a);var p=o.gp(c);r.write(2*a,p.x),r.write(2*a+1,p.y),n.write(a,p.z)}}this.Qc(1993)},u.prototype.Eb=function(){return 0},u.prototype.K=function(){return 550},u.prototype.He=function(){return 0},u.prototype.Rb=function(){return 0},u.prototype.Nb=function(o){return o==this||o instanceof u&&v.prototype.Nb.call(this,o)},u.prototype.bW=function(o,r){var n=this.xa;if(n=Math.min(n,r+1e3),0>r||r>=this.xa||n<r||o.length!=1e3)throw h.i.O();var a=n-r,c=[];for(this.vb(0).Ww(2*r,2*a,c,0,!0),r=0;r<a;r++)o[r]=h.h.construct(c[2*r],c[2*r+1]);return n},u.prototype.Yx=function(){},u.prototype.dy=function(){},u.prototype.mu=function(){return!1},u.prototype.gj=function(){return!1},u.prototype.mg=function(){return null},u}(h.Ex);h.de=k}(G||(G={})),function(h){var k;(k=h.aL||(h.aL={}))[k.NotDetermined=0]="NotDetermined",k[k.Structure=1]="Structure",k[k.DegenerateSegments=2]="DegenerateSegments",k[k.Clustering=3]="Clustering",k[k.Cracking=4]="Cracking",k[k.CrossOver=5]="CrossOver",k[k.RingOrientation=6]="RingOrientation",k[k.RingOrder=7]="RingOrder",k[k.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",k[k.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",k[k.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var v=function(){function u(o,r,n){o===void 0?(this.Kj=0,this.Lo=this.Ko=-1):(this.Kj=o,this.Ko=r,this.Lo=n)}return u.prototype.Xt=function(o){this.Kj=o.Kj,this.Ko=o.Ko,this.Lo=o.Lo},u}();h.Nd=v}(G||(G={})),function(h){h.P=function(){function k(){}return k.assert=function(v){if(v===!1)throw h.i.yK()},k.UJ=function(v){return isNaN(v)?NaN:v===0?v:0<v?1:-1},k.Gu=function(v){var u;u===void 0&&(u=0);for(var o=[],r=0;r<v;r++)o[r]=k.lg(2,u);return o},k.lg=function(v,u){u===void 0&&(u=0);for(var o=[],r=0;r<v;r++)o[r]=u;return o},k.av=function(v,u){var o,r;for(o===void 0&&(o=0),r===void 0&&(r=v.length-1);o<=r;o++)v[o]=u},k.Rk=function(v,u,o){return v<u?u:v>o?o:v},k.Uh=function(v,u){var o=5381;return((o=((o=((o=u!==void 0?(u<<5)+u+(255&v):(o<<5)+o+(255&v))<<5)+o+(v>>8&255))<<5)+o+(v>>16&255))<<5)+o+(v>>24&255)&2147483647},k.vj=function(){throw Error("Not Implemented")},k.WA=function(v){return k.RT(v)+12345&2147483647},k.OG=function(v){var u=32,o=v%k.Ox|0,r=v/k.Ox|0;return(u&=63)==0?v:(32>u?(v=o>>>u|r<<32-u,u=r>>u):(v=r>>u-32,u=0<=r?0:-1),u*k.Ox+(v>>>0))},k.RT=function(v){var u=1103515245,o=65535&u;return((u-o)*(v|=0)|0)+(o*v|0)|0},k.truncate=function(v){return 0>v?-1*Math.floor(Math.abs(v)):Math.floor(v)},k.MAX_SAFE_INTEGER=Math.pow(2,53)-1,k.MIN_SAFE_INTEGER=-k.MAX_SAFE_INTEGER,k.NC=65536,k.Ox=k.NC*k.NC,k}()}(G||(G={})),function(h){var k;(k=h.uL||(h.uL={}))[k.Project=0]="Project",k[k.Union=1]="Union",k[k.Difference=2]="Difference",k[k.Proximity2D=3]="Proximity2D",k[k.Relate=4]="Relate",k[k.Equals=5]="Equals",k[k.Disjoint=6]="Disjoint",k[k.Intersects=7]="Intersects",k[k.Within=8]="Within",k[k.Contains=9]="Contains",k[k.Crosses=10]="Crosses",k[k.Touches=11]="Touches",k[k.Overlaps=12]="Overlaps",k[k.Buffer=13]="Buffer",k[k.Distance=14]="Distance",k[k.Intersection=15]="Intersection",k[k.Clip=16]="Clip",k[k.Cut=17]="Cut",k[k.DensifyByLength=18]="DensifyByLength",k[k.DensifyByAngle=19]="DensifyByAngle",k[k.LabelPoint=20]="LabelPoint",k[k.GeodesicBuffer=21]="GeodesicBuffer",k[k.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",k[k.ShapePreservingDensify=23]="ShapePreservingDensify",k[k.GeodeticLength=24]="GeodeticLength",k[k.GeodeticArea=25]="GeodeticArea",k[k.Simplify=26]="Simplify",k[k.SimplifyOGC=27]="SimplifyOGC",k[k.Offset=28]="Offset",k[k.Generalize=29]="Generalize",k[k.SymmetricDifference=30]="SymmetricDifference",k[k.ConvexHull=31]="ConvexHull",k[k.Boundary=32]="Boundary",k[k.SimpleRelation=33]="SimpleRelation";var v=function(){function u(){}return u.prototype.K=function(){return null},u.prototype.xn=function(){},u.prototype.Ju=function(){return!1},u}();h.Ge=v}(G||(G={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return ft(u,v),u.prototype.K=function(){return 13},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,a,c){return o instanceof h.ba?(c=new h.$c(o),this.W(c,r,[n],!1,a).next()):a===!0?(n=new h.tC(o,r,n,!1,c),h.Hh.local().W(n,r,c)):new h.tC(o,r,n,!1,c)},u.instance=null,u}(h.Ge);h.sC=k}(G||(G={})),function(h){var k=function(){function v(u,o,r,n,a){this.za=-1,this.Sd=u,this.Vz=o,this.Ds=r,this.iT=new h.l,this.iT.Pa(),this.fo=-1,this.Vb=a}return v.prototype.next=function(){for(var u;(u=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.fo+1<this.Ds.length&&this.fo++,this.buffer(u,this.Ds[this.fo]);return null},v.prototype.Ma=function(){return this.za},v.prototype.buffer=function(u,o){return h.zK.buffer(u,o,this.Vz,NaN,96,this.Vb)},v.prototype.qe=function(){},v}();h.tC=k}(G||(G={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return ft(u,v),u.prototype.K=function(){return 16},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,a){return o instanceof h.ba?(o=new h.$c(o),this.W(o,r,n,a).next()):new h.dL(o,r,n,a)},u.instance=null,u}(h.Ge);h.cL=k}(G||(G={})),function(h){var k=function(){function v(u,o,r){if(this.za=-1,u==null)throw h.i.O();this.aa=o,this.yk=u,this.ra=h.ta.Xd(r,o,!1)}return v.prototype.next=function(){var u;return(u=this.yk.next())!=null?(this.za=this.yk.Ma(),h.Vd.clip(u,this.aa,this.ra,0)):null},v.prototype.Ma=function(){return this.za},v.prototype.qe=function(){},v}();h.dL=k}(G||(G={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return ft(u,v),u.prototype.K=function(){return 31},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n){return o instanceof h.ba?h.vC.jE(o):new h.vC(r,o,n)},u.instance=null,u}(h.Ge);h.uC=k}(G||(G={})),function(h){var k=function(){function v(u,o,r){if(this.oA=new h.$t,this.za=-1,o==null)throw h.i.O();this.VG=u,this.Jc=!1,this.yk=o,this.Vb=r}return v.prototype.next=function(){if(this.VG){if(!this.Jc){var u=this.WN(this.yk);return this.Jc=!0,u}return null}if(!this.Jc){if((u=this.yk.next())!=null)return this.za=this.yk.Ma(),v.jE(u);this.Jc=!0}return null},v.prototype.Ma=function(){return this.za},v.prototype.WN=function(u){for(var o;(o=u.next())!=null;)this.oA.Ib(o);return this.oA.VQ()},v.prototype.qe=function(){if(!this.Jc){if(!this.VG)throw h.i.ga("Invalid call for non merging convex hull.");var u=this.yk.next();if(u==null)throw h.i.ga("Expects a non-null geometry.");this.oA.Ib(u)}},v.jE=function(u){if(v.LS(u))return u;var o=u.K();if(h.Vk.zd(o))return(o=new h.Ua(u.description)).oc(u,!0),o;if(o==550&&u.I()==2){var r=new h.Ta;return o=new h.Ua(u.description),u.we(0,r),o.nf(r),u.we(1,r),o.lineTo(r),o}return h.$t.JO(u)},v.LS=function(u){if(u.B())return!0;var o=u.K();return o==33||o==197||!h.Vk.zd(o)&&(o==550?u.I()==1:o==1607?u.ea()==1&&2>=u.I():u.ea()==1&&(2>=u.I()||h.$t.BG(u,0)))},v}();h.vC=k}(G||(G={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return ft(u,v),u.prototype.K=function(){return 17},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,a,c){return new h.fL(o,r,n,a,c)},u.instance=null,u}(h.Ge);h.eL=k}(G||(G={})),function(h){var k=function(){function v(u,o,r,n,a){if(this.Uf=null,o==null||r==null)throw h.i.ga("invalid argument");this.fT=u,this.hA=o,this.dH=r,u=h.ta.nv(o,r),this.ra=h.ta.Xd(n,u,!0),this.cH=-1,this.nd=a}return v.prototype.Ma=function(){return 0},v.prototype.next=function(){return this.JQ(),++this.cH<this.Uf.length?this.Uf[this.cH]:null},v.prototype.JQ=function(){if(this.Uf==null)switch(this.Uf=[],this.hA.K()){case 1607:this.LQ();break;case 1736:this.KQ()}},v.prototype.LQ=function(){var u=new h.Ua,o=new h.Ua,r=new h.Ua;this.Uf.push(u),this.Uf.push(o);var n=[];h.DK.BK(this.fT,this.hA,this.dH,this.ra,n,this.nd);for(var a=0;a<n.length;a++){var c=n[a];if(c.bt==0)u.add(c.Y,!1);else if(c.bt==1||c.bt==2)o.add(c.Y,!1);else if(c.bt==3)this.Uf.push(c.Y);else{if(c.bt!=4)throw h.i.ga("internal");r.add(c.Y,!1)}}r.B()||u.B()&&o.B()&&!(3<=this.Uf.length)||this.Uf.push(r),u.B()&&o.B()&&3>this.Uf.length&&(this.Uf.length=0)},v.prototype.KQ=function(){var u=new h.ja(0),o=new h.hd,r=o.TE(),n=o.Ib(this.hA),a=o.Ib(this.dH),c=new h.Hg;try{c.Ft(o,this.ra,this.nd),c.el(r,n,a,u);var p=o.Ke(n),f=new h.Ea,m=new h.Ea;for(this.Uf.length=0,this.Uf.push(f),this.Uf.push(m),n=0;n<u.size;n++){var w=new h.hd,x=w.Ib(p),$=w.Ib(o.Ke(u.get(n)));c.fr(w,this.nd);var T=c.Bv(x,$),A=w.Ke(T);if(!A.B()){var C=o.CF(u.get(n),r);C==2?f.add(A,!1):C==1?m.add(A,!1):this.Uf.push(A);var N=new h.hd;x=N.Ib(p),$=N.Ib(o.Ke(u.get(n))),c.fr(N,this.nd),p=N.Ke(c.km(x,$))}}!p.B()&&0<u.size&&this.Uf.push(p),f.B()&&m.B()&&(this.Uf.length=0)}finally{c.Vg()}},v.prototype.qe=function(){},v}();h.fL=k}(G||(G={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return ft(u,v),u.prototype.K=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n){if(o instanceof h.ba)return o=new h.$c(o),this.W(o,r,n).next();if(0>=r)throw h.i.O();return new h.gL(o,r,n)},u.instance=null,u}(h.Ge);h.Zl=k}(G||(G={})),function(h){var k=function(){function v(u,o){this.za=-1,this.Sd=u,this.Qs=o}return v.prototype.Ma=function(){return this.za},v.prototype.next=function(){var u;return(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),this.FP(u)):null},v.prototype.FP=function(u){if(u.B()||1>u.Eb())return u;var o=u.K();if(o==1736||o==1607)return this.Iy(u);if(h.ba.zd(o))return this.HP(u);if(o==197)return this.GP(u);throw h.i.Ra()},v.prototype.HP=function(u){if(u.Rb()<=this.Qs)return u;var o=new h.Ua(u.description);return o.oc(u,!0),this.Iy(o)},v.prototype.GP=function(u){var o=new h.Ea(u.description);o.bd(u,!1);var r=new h.l;return u.A(r),u=r.da(),r.S()<=this.Qs&&u<=this.Qs?o:this.Iy(o)},v.prototype.Iy=function(u){for(var o=u.Ja(),r=u.Ha();r.ab();)for(var n=!0;r.Ia();){var a=r.ia();if(a.K()!=322)throw h.i.ga("not implemented");var c=r.Pn(),p=a.Rb();if(p>this.Qs){var f=Math.ceil(p/this.Qs);p=new h.Ta(u.description),n&&(a.Uo(p),o.nf(p));var m=n=1/f,w=0;for(--f;w<f;w++)a.Uw(m,p),o.lineTo(p),m+=n;c?o.Cp():(a.Qo(p),o.lineTo(p))}else c?o.Cp():o.oc(a,n);n=!1}return o},v.prototype.qe=function(){},v}();h.gL=k}(G||(G={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return ft(u,v),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.K=function(){return 2},u.prototype.W=function(o,r,n,a){return o instanceof h.ba?(o=new h.$c(o),r=new h.$c(r),this.W(o,r,n,a).next()):new h.hL(o,r,n,a)},u.km=function(o,r,n,a){if(o.B()||r.B())return o;var c=o.Eb(),p=r.Eb();if(c>p)return o;var f=o.K(),m=r.K(),w=new h.l,x=new h.l,$=new h.l;o.A(w),r.A(x),$.L(w),$.$b(x);var T=($=h.ta.Xd(n,$,!0))*Math.sqrt(2)*1.00001,A=new h.l;if(A.L(w),A.X(T,T),!A.isIntersecting(x))return o;if(c==1&&p==2)return u.AV(o,r,m,n,a);if(f==33)switch(h.Vk.zd(m)?(n=new h.Ua(r.description),n.oc(r,!0)):n=r,m){case 1736:return u.NU(o,n,$);case 1607:return u.OU(o,n,$);case 550:return u.LU(o,n,$);case 197:return u.KU(o,n,$);case 33:return u.MU(o,n,$);default:throw h.i.O()}else if(f==550)switch(m){case 1736:return u.dU(o,r,$);case 197:return u.bU(o,r,$);case 33:return u.cU(o,r,$)}return h.Hg.km(o,r,n,a)},u.NU=function(o,r,n){return h.jd.CG(r,o,n)==0?o:o.Ja()},u.OU=function(o,r,n){var a=o.D();r=r.Ha();for(var c=n*Math.sqrt(2)*1.00001,p=c*c,f=new h.l;r.ab();)for(;r.Ia();){var m=r.ia();if(m.A(f),f.X(c,c),f.contains(a)){if(m.rs(a,n))return o.Ja();var w=m.ac();if(h.h.zc(a,w)<=p||(w=m.xc(),h.h.zc(a,w)<=p))return o.Ja()}}return o},u.LU=function(o,r,n){var a=r.vb(0);r=r.I();var c=o.D(),p=new h.h;n=n*Math.sqrt(2)*1.00001,n*=n;for(var f=0;f<r;f++)if(a.uc(2*f,p),h.h.zc(p,c)<=n)return o.Ja();return o},u.KU=function(o,r,n){var a=new h.l;return r.A(a),a.X(n,n),r=o.D(),a.contains(r)?o.Ja():o},u.MU=function(o,r,n){n=n*Math.sqrt(2)*1.00001,n*=n;var a=o.D();return r=r.D(),h.h.zc(a,r)<=n?o.Ja():o},u.dU=function(o,r,n){var a=new h.l;r.A(a),a.X(n,n);for(var c=o.I(),p=!1,f=[],m=0;m<c;m++)f[m]=!1;var w=new h.h;for(m=0;m<c;m++)o.D(m,w),a.contains(w)&&h.jd.Zd(r,w,n)!=0&&(p=!0,f[m]=!0);if(!p)return o;for(r=o.Ja(),m=0;m<c;m++)f[m]||r.Gd(o,m,m+1);return r},u.bU=function(o,r,n){var a=new h.l;r.A(a),a.X(n,n),r=o.I();var c=!1;n=[];for(var p=0;p<r;p++)n[p]=!1;var f=new h.h;for(p=0;p<r;p++)o.D(p,f),a.contains(f)&&(c=!0,n[p]=!0);if(!c)return o;for(a=o.Ja(),p=0;p<r;p++)n[p]||a.Gd(o,p,p+1);return a},u.cU=function(o,r,n){var a=o.vb(0),c=o.I(),p=r.D(),f=new h.h,m=!1;r=[];for(var w=0;w<c;w++)r[w]=!1;for(n=(w=n*Math.sqrt(2)*1.00001)*w,w=0;w<c;w++)a.uc(2*w,f),h.h.zc(f,p)<=n&&(m=!0,r[w]=!0);if(!m)return o;for(a=o.Ja(),w=0;w<c;w++)r[w]||a.Gd(o,w,w+1);return a},u.AV=function(o,r,n,a,c){var p=new h.Gh;o.dn(p);var f=new h.l;return r.A(f),p.$b(f),p.X(.1*p.S(),.1*p.da()),(f=new h.Ea).bd(p,!1),n==1736?f.add(r,!0):f.bd(r,!0),h.Wk.local().W(o,f,a,c)},u.instance=null,u}(h.Ge);h.lp=k}(G||(G={})),function(h){var k=function(){function v(u,o,r,n){this.us=o==null,this.za=-1,this.Sd=u,this.Vz=r,this.lT=o.next(),this.Vb=n}return v.prototype.next=function(){return this.us?null:(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),h.lp.km(u,this.lT,this.Vz,this.Vb)):null;var u},v.prototype.Ma=function(){return this.za},v.prototype.qe=function(){},v}();h.hL=k}(G||(G={})),function(h){var k=function(){function u(o){this.nd=o,this.Cj=new h.l,this.Cj.Pa(),this.ph=new h.l,this.ph.Pa()}return u.prototype.Ot=function(){var o=this.Cj.v;this.Cj.v=this.ph.v,this.ph.v=o,o=this.Cj.C,this.Cj.C=this.ph.C,this.ph.C=o,o=this.Cj.G,this.Cj.G=this.ph.G,this.ph.G=o,o=this.Cj.H,this.Cj.H=this.ph.H,this.ph.H=o},u.prototype.XP=function(o,r){if(this.nd!=null&&!this.nd.progress(-1,-1))throw h.i.gu("user_canceled");var n=!this.Cj.isIntersecting(this.ph);return h.ba.Ic(o.K())&&h.ba.Ic(r.K())?o.I()>r.I()?this.ZD(o,r,n):(this.Ot(),o=this.ZD(r,o,n),this.Ot(),o):o.K()==550&&h.ba.Ic(r.K())?(o=this.$D(r,o,n),this.Ot(),o):r.K()==550&&h.ba.Ic(o.K())?this.$D(o,r,n):o.K()==550&&r.K()==550?o.I()>r.I()?this.aE(o,r):(this.Ot(),o=this.aE(r,o),this.Ot(),o):0},u.prototype.ZD=function(o,r,n){var a=o.Ha(),c=r.Ha(),p=new h.l,f=new h.l,m=17976931348623157e292;if(!n&&this.dY(o,r,a,c))return 0;for(;a.ab();)for(;a.Ia();)if((o=a.ia()).A(p),!(p.ox(this.ph)>m)){for(;c.ab();)for(;c.Ia();)if((r=c.ia()).A(f),p.ox(f)<m&&(r=o.ub(r,n),(r*=r)<m)){if(r==0)return 0;m=r}c.$i()}return Math.sqrt(m)},u.prototype.$D=function(o,r,n){var a=o.Ha(),c=new h.l,p=17976931348623157e292,f=new h.h,m=r.I();for(n=!n&&o.K()==1736;a.ab();)for(;a.Ia();){var w=a.ia();if(w.A(c),!(1<m&&c.ox(this.ph)>p)){for(var x=0;x<m;x++){if(r.D(x,f),n&&h.jd.Zd(o,f,0)!=0)return 0;var $=w.fe(f,!1);if(f.sub(w.ic($)),($=f.Sk())<p){if($==0)return 0;p=$}}n=!1}}return Math.sqrt(p)},u.prototype.aE=function(o,r){for(var n,a=17976931348623157e292,c=new h.h,p=new h.h,f=o.I(),m=r.I(),w=0;w<f;w++)if(o.D(w,c),!(1<m&&this.ph.aK(c)>a)){for(var x=0;x<m;x++)if(r.D(x,p),(n=h.h.zc(c,p))<a){if(n==0)return 0;a=n}}return Math.sqrt(a)},u.prototype.dY=function(o,r,n,a){if(o.K()==1736){for(;a.ab();)if(a.Ia()){var c=a.ia();if(h.jd.Zd(o,c.xc(),0)!=0)return!0}a.$i()}if(r.K()==1736){for(;n.ab();)if(n.Ia()&&(o=n.ia(),h.jd.Zd(r,o.xc(),0)!=0))return!0;n.$i()}return!1},u.prototype.im=function(o,r){return o.B()||r.B()?NaN:(o.A(this.Cj),r.A(this.ph),this.XP(o,r))},u}(),v=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return ft(o,u),o.prototype.W=function(r,n,a){if(r==null||n==null)throw h.i.O();if(r.B()||n.B())return NaN;var c=r.K(),p=n.K();if(c==33){if(p==33)return h.h.ub(r.D(),n.D());if(p==197)return a=new h.l,n.A(a),a.ub(r.D());(c=new h.de).add(r),r=c}else if(c==197){if(p==197)return p=new h.l,r.A(p),a=new h.l,n.A(a),a.ub(p);(c=new h.Ea).bd(r,!1),r=c}return p==33?((p=new h.de).add(n),n=p):p==197&&((p=new h.Ea).bd(n,!1),n=p),new k(a).im(r,n)},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.K=function(){return 14},o.instance=null,o}(h.Ge);h.iL=v}(G||(G={})),function(h){var k=function(){function v(u,o,r,n){this.rH=u,this.vH=o,this.nd=n,this.SG=r}return v.prototype.next=function(){var u=this.rH.next();return u==null?null:this.rC(u)},v.prototype.Ma=function(){return this.rH.Ma()},v.prototype.rC=function(u){var o=u.K();if(h.ba.Sn(o))return u;if(o==197)return(o=new h.Ea(u.description)).bd(u,!1),this.rC(o);if(u.B())return u;if(u==null)throw h.i.Ra();o=u.Ja();for(var r=new h.zb,n=0,a=u.ea();n<a;n++)this.LK(u,n,o,r);return o},v.prototype.LK=function(u,o,r,n){if(!(2>u.Ka(o))){var a=u.Ca(o),c=u.Wc(o)-1,p=u.vb(0),f=u.ec(o),m=new h.ja(0);m.Jb(u.Ka(o)+1);var w=new h.ja(0);for(w.Jb(u.Ka(o)+1),m.add(f?a:c),m.add(a),a=new h.h;1<m.size;){var x=m.Gc();m.Jf();var $=m.Gc();u.D(x,a),n.Ec(a),u.D($,a),n.Rc(a),0<=($=this.KK(n,a,p,x,$,c))?(m.add($),m.add(x)):w.add(x)}if(f||w.add(m.get(0)),w.size==m.size)r.addPath(u,o,!0);else if(2<=w.size&&(!this.SG||w.size!=2||!(f||h.h.ub(u.Oa(w.get(0)),u.Oa(w.get(1)))<=this.vH))){for(o=new h.Ta,n=0,c=w.size;n<c;n++)u.we(w.get(n),o),n==0?r.nf(o):r.lineTo(o);f&&(this.SG||w.size!=2||r.lineTo(o),r.Cp())}}},v.prototype.KK=function(u,o,r,n,a,c){var p=a-1;for(a<=n&&(p=c),c=a=-1,n+=1;n<=p;n++){r.uc(2*n,o);var f=o.x,m=o.y;u.ic(u.fe(o,!1),o),o.x-=f,o.y-=m,(f=o.length())>this.vH&&f>c&&(a=n,c=f)}return a},v.prototype.qe=function(){},v}();h.jL=k}(G||(G={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return ft(u,v),u.prototype.K=function(){return 29},u.prototype.W=function(o,r,n,a){return o instanceof h.ba?(o=new h.$c(o),this.W(o,r,n,a).next()):new h.jL(o,r,n,a)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Ge);h.wC=k}(G||(G={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return ft(u,v),u.prototype.K=function(){return 21},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,a,c,p,f,m){return o instanceof h.ba?(m=new h.$c(o),this.W(m,r,n,[a],c,p,!1,f).next()):f===!0?(n=new h.yC(o,r,n,a,c,!1,!1,m),h.Hh.local().W(n,r,m)):new h.yC(o,r,n,a,c,!1,!1,m)},u.instance=null,u}(h.Ge);h.xC=k}(G||(G={})),function(h){var k=function(){function v(u,o,r,n,a,c,p,f){if(c)throw h.i.Fe();if(o==null)throw h.i.O();this.za=-1,this.Ns=u,this.vg=o,this.Ae=r,this.Ds=n,this.ao=a,this.fo=-1,this.Vb=f,this.jT=new h.l,this.jT.Pa()}return v.prototype.next=function(){for(var u;(u=this.Ns.next())!=null;)return this.za=this.Ns.Ma(),this.fo+1<this.Ds.length&&this.fo++,this.SQ(u,this.Ds[this.fo]);return null},v.prototype.Ma=function(){return this.za},v.prototype.SQ=function(u,o){return h.NK.buffer(u,this.vg,this.Ae,o,this.ao,this.Vb)},v.prototype.qe=function(){},v}();h.yC=k}(G||(G={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return ft(u,v),u.prototype.K=function(){return 24},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n){if(r==null)throw h.i.O();if(o.B()||1>o.Eb())return 0;if(n==4)throw h.i.Fe();var a=h.cb.tc(r),c=h.cb.wv(a),p=h.cb.fv(a);c*=2-c;var f=a.Id().bi,m=o.K();if(m==1736||m==197)var w=o.mg();else h.ba.zd(m)?(w=new h.Ua(o.description)).oc(o,!0):w=o;if(a.Nb(r)==0){if(h.cb.Xc(r)){w=h.Ih.mj(w,r),m==1607&&w==o&&(w=h.ba.ig(o)),o=new h.Oc,h.cb.hh(r).en(o),m=0;for(var x=w.I();m<x;m++){var $=w.Oa(m);$.x=h.Ih.an($.x,o),w.Db(m,$)}}o=w.Ja(),w=h.Ih.NI(r,a,w,o)?o:h.cb.Ah(w,r,a)}return this.$P(w,n,p,c,f)},u.prototype.$P=function(o,r,n,a,c){var p=new h.ha(0),f=0;for(o=o.Ha();o.ab();)for(;o.Ia();){var m=o.ia(),w=m.ac();m=m.xc(),w.scale(c),m.scale(c),h.kb.xd(n,a,w.x,w.y,m.x,m.y,p,null,null,r),f+=p.u}return f},u.instance=null,u}(h.Ge);h.mL=k}(G||(G={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return ft(u,v),u.prototype.K=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,a,c){return o instanceof h.ba?(o=new h.$c(o),this.W(o,r,n,a,c).next()):new h.lL(o,n,a,r,-1,-1,c)},u.instance=null,u}(h.Ge);h.kL=k}(G||(G={})),function(h){var k=function(){function v(u,o,r,n,a,c){if(0<c||r!=4&&0<a)throw h.i.Fe();if(o==null)throw h.i.O();this.za=-1,this.Ns=u,this.vg=o,this.Ae=r,this.tT=n,this.sT=a}return v.prototype.next=function(){for(var u;(u=this.Ns.next())!=null;)return this.za=this.Ns.Ma(),this.Uy(u);return null},v.prototype.Ma=function(){return this.za},v.prototype.Uy=function(u){return h.dj.Rr(u,this.vg,this.Ae,this.tT,this.sT,this.Vb)},v.prototype.qe=function(){},v}();h.lL=k}(G||(G={})),function(h){(function(k){k[k.Unknown=0]="Unknown",k[k.Contains=1]="Contains",k[k.Within=2]="Within",k[k.Equals=3]="Equals",k[k.Disjoint=4]="Disjoint",k[k.Touches=8]="Touches",k[k.Crosses=16]="Crosses",k[k.Overlaps=32]="Overlaps",k[k.NoThisRelation=64]="NoThisRelation",k[k.Intersects=1073741824]="Intersects",k[k.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(h.VK||(h.VK={})),h.nL=function(){function k(){}return k.dW=function(v,u){var o=v.K(),r=u.K();if(h.ba.yj(o)){var n=v.Cb;if(n!=null&&(n=n.Fk)!=null){if(r==33){var a=u.D();n=n.To(a.x,a.y)}else a=new h.l,u.A(a),n=n.So(a);if(n==1)return 1;if(n==0)return 4}}if(h.ba.yj(r)&&(n=u.Cb)!=null&&(n=n.Fk)!=null){if(o==33?(v=v.D(),n=n.To(v.x,v.y)):(u=new h.l,v.A(u),n=n.So(u)),n==1)return 2;if(n==0)return 4}return 0},k}()}(G||(G={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return ft(u,v),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.K=function(){return 15},u.prototype.W=function(o,r,n,a,c){return o instanceof h.ba?(o=new h.$c(o),r=new h.$c(r),this.W(o,r,n,a,c).next()):c===void 0?new h.zC(o,r,n,a,-1):new h.zC(o,r,n,a,c)},u.prototype.xn=function(o,r,n){this.Ju(o)&&(r=h.ta.lj(r,o,!1),o.gj(n)||o.mu(r,n))},u.prototype.Ju=function(o){return h.Lx.rE(o)},u.instance=null,u}(h.Ge);h.Wk=k}(G||(G={})),function(h){var k=function(){function v(u,o,r,n,a){if(this.us=o==null,this.za=-1,this.Sd=u,this.vg=r,this.Pe=o.next(),this.Ej=this.Pe.K(),this.Vb=n,this.Gi=a,this.Gi!=-1&&(0>=this.Gi||7<this.Gi))throw h.i.O("bad dimension mask")}return v.prototype.next=function(){if(this.us)return null;if(this.Aw!=null){var u=this.Aw.next();if(u!=null)return u;this.Aw=null}for(;(u=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.Gi==-1?u=this.Fa(u):(this.Aw=this.GS(u),u=this.Aw.next()),u;return null},v.prototype.Ma=function(){return this.za},v.prototype.Fa=function(u){var o=this.rK(u);if(o!=null)return o;o=h.ta.nv(this.Pe,u);var r=h.ta.Xd(this.vg,o,!0);o=new h.l,this.Pe.A(o);var n=new h.l;return u.A(n),o.X(2*r,2*r),o.Fa(n),o.X(100*r,100*r),r=h.Vd.clip(this.Pe,o,0,0),u=h.Vd.clip(u,o,0,0),h.Hg.Bv(u,r,this.vg,this.Vb)},v.prototype.HI=function(u,o,r){var n=0;if((1&o)!=0)r[0]==null&&(r[0]=new h.de(u)),n++;else for(var a=0;a<r.length-1;a++)r[a]=r[a+1];if((2&o)!=0)r[n]==null&&(r[n]=new h.Ua(u)),n++;else for(a=n;a<r.length-1;a++)r[a]=r[a+1];if((4&o)!=0)r[n]==null&&(r[n]=new h.Ea(u)),n++;else for(a=n;a<r.length-1;a++)r[a]=r[a+1];if(n!=3){for(u=[],a=0;a<n;a++)u[a]=r[a];return new h.$c(u)}return new h.$c(r)},v.prototype.GS=function(u){var o=this.rK(u);if(o!=null){var r=[null,null,null];return r[o.Eb()]=o,this.HI(u.description,this.Gi,r)}o=h.ta.nv(this.Pe,u),r=h.ta.Xd(this.vg,o,!0),o=new h.l,this.Pe.A(o),o.X(2*r,2*r);var n=new h.l;return u.A(n),o.Fa(n),o.X(100*r,100*r),r=h.Vd.clip(this.Pe,o,0,0),o=h.Vd.clip(u,o,0,0),r=h.Hg.Kz(o,r,this.vg,this.Vb),this.HI(u.description,this.Gi,r)},v.prototype.rK=function(u){var o=h.ta.nv(u,this.Pe),r=h.ta.Xd(this.vg,o,!0);o=u.K();var n=u.B(),a=this.Pe.B();if(!(a=n||a)){a=new h.l,u.A(a);var c=new h.l;this.Pe.A(c),c.X(2*r,2*r),a=!a.isIntersecting(c)}if(!a)if((c=h.nL.dW(this.Pe,u))==4)a=!0;else{if((2&c)!=0)return this.Pe;if((1&c)!=0)return u}if(a)return(r=h.ba.uf(o))<(a=h.ba.uf(this.Ej))?v.BB(u,n):r>a||r==0&&o==550&&this.Ej==33?this.fJ():v.BB(u,n);if((this.Gi==-1||this.Gi==4)&&o==197&&this.Ej==197)return r=this.Pe,o=new h.l,u.A(o),n=new h.l,r.A(n),o.Fa(n),r=new h.Gh,u.copyTo(r),r.Yo(o),r;if(o==197&&h.ba.uf(this.Ej)==0||this.Ej==197&&h.ba.uf(o)==0)return n=o==197?u:this.Pe,u=o==197?this.Pe:u,o=new h.l,n.A(o),h.Vd.clip(u,o,r,0);if(h.ba.uf(o)==0&&0<h.ba.uf(this.Ej)||0<h.ba.uf(o)&&h.ba.uf(this.Ej)==0){if(r=h.ta.lj(this.vg,u,!1),o==550||o==33)return h.Hg.rG(u,this.Pe,r);if(this.Ej==550||this.Ej==33)return h.Hg.rG(this.Pe,u,r);throw h.i.Ra()}return this.Gi!=-1&&this.Gi!=2||o!=1607||this.Ej!=1736?this.Gi!=-1&&this.Gi!=2||o!=1736||this.Ej!=1607?null:this.oK(this.Pe,u):this.oK(u,this.Pe)},v.prototype.oK=function(u,o){var r=u,n=o,a=h.ta.lj(this.vg,o,!1),c=new h.l;n.A(c);var p=new h.l;r.A(p),p.X(2*a,2*a),c.Fa(p),c.X(10*a,10*a),r=u=h.Vd.clip(u,c,0,0),p=new h.ja(0);var f=-1,m=n.Cb;if(m!=null){var w=m.Fk;if(w!=null){f=0,p.Jb(r.I()+r.ea());for(var x=new h.l,$=r.Ha();$.ab();)for(;$.Ia();){$.ia().A(x);var T=w.So(x);T==1?p.add(1):T==0?p.add(0):(p.add(-1),f++)}}}if(5<o.I()&&(m=(n=o=h.Vd.clip(o,c,0,0)).Cb),0>f&&(f=r.sz()),c=r.I()+n.I(),f*n.I()>Math.log(c)*c*4)return null;c=null,f=n.Ha(),m!=null&&m.Gb!=null&&(c=m.Gb),c==null&&20<n.I()&&(c=h.ta.fE(n)),u=u.Ja(),n=null,m=r.Ha(),w=[0,0,0,0,0,0,0,0,0],x=new h.ce(0),$=new h.hg,T=-1;for(var A=0,C=0,N=0<p.size,L=-1;m.ab();){L=m.gb;var D=0;for(T=-1,A=0;m.Ia();){var F=N?h.P.truncate(p.get(C)):-1;C++;var V=m.ia();if(0>F){if(c!=null)for(n==null?n=c.mR(V,a):n.Vo(V,a),F=n.next();F!=-1;F=n.next()){f.Wb(c.ka(F)),F=f.ia();var W=V.Fa(F,null,w,null,a);for(F=0;F<W;F++)x.add(w[F])}else for(f.$i();f.ab();)for(;f.Ia();)for(F=f.ia(),W=V.Fa(F,null,w,null,a),F=0;F<W;F++)x.add(w[F]);if(0<x.size){x.Wd(0,x.size,function(me,fe){return me-fe});var K=0;x.add(1),W=-1,F=0;for(var B=x.size;F<B;F++){var ee=x.get(F);if(ee!=K){var ae=!1;if(K!=0||ee!=1?(V.bh(K,ee,$),K=$.get()):(K=V,ae=!0),2<=D){if(u.Fr(r,L,T,A,D==3),this.HD(o,K.ac(),a)!=1&&this.JD(o,K,a)!=1)return null;u.oc(K,!1),D=1,A=0}else switch(W=this.JD(o,K,a),W){case 1:ae?2>D?(T=m.xb()-r.Ca(L),A=1,D=D==0?3:2):A++:(u.oc(K,D==0),D=1);break;case 0:D=0,T=-1,A=0;break;default:return null}K=ee}}}else{if(0>(F=this.HD(o,V.ac(),a)))return null;F==1?(2>D&&(T=m.xb()-r.Ca(L),D=D==0?3:2),A++):(T=-1,A=0)}x.clear(!1)}else F!=0&&F==1&&(D==0?(D=3,T=m.xb()-r.Ca(L)):D==1?(D=2,T=m.xb()-r.Ca(L)):A++)}2<=D&&(u.Fr(r,L,T,A,D==3),T=-1)}return u},v.prototype.HD=function(u,o,r){return h.Fg.ym(u,o,r)},v.prototype.JD=function(u,o,r){var n=o.ac();o=o.xc();var a=h.Fg.ym(u,n,r),c=h.Fg.ym(u,o,r);return a==1&&c==0||a==0&&c==1?-1:a==0||c==0?0:a==1||c==1?1:((a=new h.h).add(n,o),a.scale(.5),(u=h.Fg.ym(u,a,r))==0?0:u==1?1:-1)},v.BB=function(u,o){return o?u:u.Ja()},v.prototype.fJ=function(){return this.qH==null&&(this.qH=this.Pe.Ja()),this.qH},v.prototype.qe=function(){},v}();h.zC=k}(G||(G={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return ft(u,v),u.prototype.K=function(){return 28},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,a,c,p,f){return o instanceof h.ba?(o=new h.$c(o),this.W(o,r,n,a,c,p,f).next()):new h.oL(o,r,n,a,c,p,f)},u.instance=null,u}(h.Ge);h.AC=k}(G||(G={})),function(h){var k=function(){function v(u,o,r,n,a,c,p){this.za=-1,this.Sd=u,this.Nj=o,this.La=r,this.Li=n,this.wA=a,this.mH=c,this.nd=p}return v.prototype.next=function(){var u=this.Sd.next();return u!=null?(this.za=this.Sd.Ma(),this.bL(u)):null},v.prototype.Ma=function(){return this.za},v.prototype.bL=function(u){var o=0>=this.mH?h.ta.lj(this.Nj,u,!1):this.mH;return h.AK.W(u,this.La,this.Li,this.wA,o,this.nd)},v.prototype.qe=function(){},v}();h.oL=k}(G||(G={})),function(h){var k;(k=h.FK||(h.FK={}))[k.clipToDomainOnly=1]="clipToDomainOnly",k[k.clipWithHorizon=2]="clipWithHorizon",k[k.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var v=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return ft(o,u),o.prototype.K=function(){return 0},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.W=function(r,n,a){return r instanceof h.ba?(r=new h.$c(r),this.W(r,n,a).next()):new h.qL(r,n,a)},o.prototype.transform=function(r,n,a,c){return h.cu.transform(r,n,a,c,!0)},o.prototype.Rt=function(r,n,a,c){return h.cu.Rt(r,n,a,c)},o.instance=null,o}(h.Ge);h.Fx=v}(G||(G={})),function(h){var k=function(){function v(u,o,r){this.za=-1,this.Sd=u,this.CT=o,this.nd=r}return v.prototype.next=function(){var u=this.Sd.next();return u!=null?(this.za=this.Sd.Ma(),h.cu.Ah(u,this.CT,this.nd)):null},v.prototype.Ma=function(){return this.za},v.prototype.qe=function(){},v}();h.qL=k}(G||(G={})),function(h){var k=function(){function u(){}return u.prototype.reset=function(){this.qh=this.xk=-1,this.vs=this.mq=!1},u.prototype.sQ=function(o,r,n){for(o.Wb(r,n);o.Ia();){var a=o.ia();if((a=a.Rb())!=0)return o.xb()}for(o.Wb(r,n);o.zz();)if((a=(a=o.mi()).Rb())!=0)return o.xb();return-1},u.prototype.tQ=function(o,r){for(o.Wb(r,-1);o.zz();)if(o.mi().Rb()!=0)return o.xb();return-1},u.prototype.rQ=function(o,r){for(o.Wb(r,-1),o.ia();o.Ia();)if(o.ia().Rb()!=0)return o.xb();return-1},u.prototype.qQ=function(o,r,n,a){if(this.xk=this.sQ(r,n,a),this.xk!=-1){r.Wb(this.xk,-1);var c=r.ia(),p=c.ic(c.fe(o,!1));if(n=h.h.zc(p,o),(a=new h.h).N(p),a.sub(c.ac()),(p=new h.h).N(o),p.sub(c.ac()),this.mq=0>a.xi(p),this.qh=this.rQ(r,this.xk),this.qh!=-1){r.Wb(this.qh,-1);var f=(c=r.ia()).fe(o,!1);f=c.ic(f);var m=h.h.zc(f,o);m>n?this.qh=-1:(a.N(f),a.sub(c.ac()),p.N(o),p.sub(c.ac()),this.vs=0>a.xi(p))}this.qh==-1&&(this.qh=this.tQ(r,this.xk),this.qh!=-1&&(r.Wb(this.qh,-1),f=(c=r.ia()).fe(o,!1),f=c.ic(f),(m=h.h.zc(f,o))>n?this.qh=-1:(a.N(f),a.sub(c.ac()),p.N(o),p.sub(c.ac()),this.vs=0>a.xi(p),o=this.xk,this.xk=this.qh,this.qh=o,o=this.mq,this.mq=this.vs,this.vs=o)))}},u.prototype.VN=function(o,r,n,a,c){return n=n.Ha(),this.qQ(o,n,a,c),this.xk!=-1&&this.qh==-1?this.mq:this.xk!=-1&&this.qh!=-1?this.mq==this.vs?this.mq:(n.Wb(this.xk,-1),o=n.ia().jg(),n.Wb(this.qh,-1),r=n.ia().jg(),0<=o.xi(r)):r},u}(),v=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return ft(o,u),o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.K=function(){return 3},o.prototype.iz=function(r,n,a){var c;if(c===void 0&&(c=!1),r.B())return new h.bm;n=n.D();var p=r,f=r.K();switch(f==197&&((p=new h.Ea).bd(r,!1),f=1736),f){case 33:return this.pI(p,n);case 550:return this.bI(p,n);case 1607:case 1736:return this.ST(p,n,a,c);default:throw h.i.ga("not implemented")}},o.prototype.jz=function(r,n){if(r.B())return new h.bm;n=n.D();var a=r,c=r.K();switch(c==197&&((a=new h.Ea).bd(r,!1),c=1736),c){case 33:return this.pI(a,n);case 550:case 1607:case 1736:return this.bI(a,n);default:throw h.i.ga("not implemented")}},o.prototype.kz=function(r,n,a,c){if(0>c)throw h.i.O();if(r.B())return[];n=n.D();var p=r,f=r.K();switch(f==197&&((p=new h.Ea).bd(r,!1),f=1736),f){case 33:return this.JU(p,n,a,c);case 550:case 1607:case 1736:return this.jU(p,n,a,c);default:throw h.i.ga("not implemented")}},o.prototype.ST=function(r,n,a,c){if(r.K()==1736&&a&&(a=new h.l,r.A(a),a=h.ta.Xd(null,a,!1),(c?h.jd.Zd(r,n,0):h.jd.Zd(r,n,a))!=0)){var p=new h.bm(n,0,0);return c&&p.OJ(!0),p}var f=r.Ha();p=new h.h;for(var m=a=-1,w=17976931348623157e292,x=0;f.ab();)for(;f.Ia();){var $=f.ia();$=$.ic($.fe(n,!1));var T=h.h.zc($,n);T<w?(x=1,p=$,a=f.xb(),m=f.gb,w=T):T==w&&x++}return p=new h.bm(p,a,Math.sqrt(w)),c&&(f.Wb(a,m),$=f.ia(),c=0>h.h.Wq(n,$.ac(),$.xc()),1<x&&((x=new k).reset(),c=x.VN(n,c,r,a,m)),p.OJ(c)),p},o.prototype.pI=function(r,n){return r=r.D(),n=h.h.ub(r,n),new h.bm(r,0,n)},o.prototype.bI=function(r,n){for(var a=r.vb(0),c=r.I(),p=r=0,f=0,m=17976931348623157e292,w=0;w<c;w++){var x=new h.h;a.uc(2*w,x);var $=h.h.zc(x,n);$<m&&(p=x.x,f=x.y,r=w,m=$)}return(n=new h.bm).ay(p,f,r,Math.sqrt(m)),n},o.prototype.JU=function(r,n,a,c){return c==0?[]:(a*=a,r=r.D(),(n=h.h.zc(r,n))<=a?(a=[],(c=new h.bm).ay(r.x,r.y,0,Math.sqrt(n)),a[0]=c):a=[],a)},o.prototype.jU=function(r,n,a,c){if(c==0)return[];var p=r.vb(0),f=r.I();r=[],a*=a;for(var m=0;m<f;m++){var w=p.read(2*m),x=p.read(2*m+1),$=n.x-w,T=n.y-x;($=$*$+T*T)<=a&&((T=new h.bm).ay(w,x,m,Math.sqrt($)),r.push(T))}return n=r.length,r.sort(function(A,C){return A.La<C.La?-1:A.La==C.La?0:1}),c>=n||(r.length=c),r.slice(0)},o.instance=null,o}(h.Ge);h.Gx=v}(G||(G={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return ft(u,v),u.prototype.K=function(){return 4},u.prototype.W=function(o,r,n,a,c){return h.cm.sB(o,r,n,a,c)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Ju=function(o){return h.Wt.qy(o)},u.prototype.xn=function(o,r,n){h.Wt.uD(o,r,n)},u.instance=null,u}(h.Ge);h.rL=k}(G||(G={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return ft(u,v),u.prototype.K=function(){return 33},u.prototype.W=function(o,r,n,a,c){return o===1073741824?!h.vd.tB(r,n,a,4,c):h.vd.tB(r,n,a,o,c)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Ju=function(o){return h.Wt.qy(o)},u.prototype.xn=function(o,r,n){h.Wt.uD(o,r,n)},u.instance=null,u}(h.Ge);h.ej=k}(G||(G={})),function(h){var k=function(){function v(u,o,r,n){if(this.nd=n,this.gT=r,this.za=-1,u==null)throw h.i.O();this.yk=u,this.Nj=o}return v.prototype.next=function(){var u;if((u=this.yk.next())!=null){if(this.za=this.yk.Ma(),this.nd!=null&&!this.nd.progress(-1,-1))throw h.i.gu("user_canceled");return this.YB(u)}return null},v.prototype.Ma=function(){return this.za},v.prototype.YB=function(u){if(u==null)throw h.i.O();return h.Hx.VJ(u,this.Nj,this.gT,this.nd)},v.prototype.qe=function(){},v}();h.sL=k}(G||(G={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return ft(u,v),u.prototype.K=function(){return 26},u.prototype.W=function(o,r,n,a){return o instanceof h.ba?(o=new h.$c(o),this.W(o,r,n,a).next()):new h.sL(o,r,n,a)},u.prototype.ss=function(o,r,n,a,c){return 0<(a!==void 0?h.Hx.ss(o,r,n,a,c):h.Hx.ss(o,r,!1,null,n))},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Ge);h.$l=k}(G||(G={})),function(h){var k=function(){function c(){this.Aq=0}return c.prototype.aX=function(p){this.Aq&=-2,this.Aq|=p?1:0},c.prototype.Yp=function(){return(1&this.Aq)!=0},c.prototype.PF=function(){return this.Yp()?0:1},c}();h.lY=k;var v=function(){},u=function(c,p,f,m){this.x=c,this.y=p,this.Bi=f,this.zm=m},o=function(){function c(p){this.Ce=p}return c.prototype.compare=function(p,f,m){return p=p.ka(m),f=this.Ce.lf.read(2*f),0>(f-=p=this.Ce.lf.read(2*p))?-1:0<f?1:0},c}(),r=function(){function c(p){this.Ce=p}return c.prototype.compare=function(p,f,m){f=this.Ce.hb[f],p=this.Ce.hb[p.ka(m)];var w=f.Yp(),x=p.Yp();m=f.ne.Me(this.Ce.No,0);var $=p.ne.Me(this.Ce.No,0);return m==$&&((w=.5*((m=Math.min(w?f.ne.oa:f.ne.ma,x?p.ne.oa:p.ne.ma))-this.Ce.No)+this.Ce.No)==this.Ce.No&&(w=m),m=f.ne.Me(w,0),$=p.ne.Me(w,0)),m<$?-1:m>$?1:0},c}(),n=function(){function c(p,f){this.QI=new h.h,this.parent=p,this.VR=f}return c.prototype.qr=function(p,f,m){var w=this.parent,x=this.VR;m.Wd(p,f,function($,T){return w.Nh($,T,x)})},c.prototype.bq=function(p){return p=this.parent.hi.get(p),this.parent.lf.uc(2*(p>>1),this.QI),this.QI.y+((1&p)!=0?this.parent.Pj:-this.parent.Pj)},c}(),a=function(){function c(p,f,m,w,x){this.fH=p.description,this.Y=p,this.Rg=f,this.Pj=h.ta.lj(this.Rg,p,!1),this.Co=h.ta.lj(this.Rg,p,!0),this.rA=m,this.eT=this.fH.Ba,this.hb=[],this.qo=[],this.nh=new h.kp,this.fb=new h.Yj,this.ke=new h.Nd,this.QG=this.sl=x}return c.prototype.VS=function(){return this.QG=!0,(!h.ba.Ic(this.Y.K())||this.yE()&&this.vE(!1))&&this.eO()?h.ba.Ic(this.Y.K())?this.hO()?this.Y.K()==1607?this.jO()?2:0:this.kO()?this.lO():0:0:2:0},c.prototype.dC=function(p,f){var m=this.lf.read(2*p);p=this.lf.read(2*p+1);var w=this.lf.read(2*f);f=this.lf.read(2*f+1);var x=!h.Zt.Dv(m,p,w,f,this.Pj*this.Pj);return x||this.Y.Eb()!=0&&m==w&&p==f},c.prototype.yE=function(){for(var p=this.Y,f=p.yf?3:2,m=0,w=p.ea();m<w;m++)if(p.Ka(m)<f)return this.ke=new h.Nd(1,m,0),!1;return!0},c.prototype.vE=function(p){var f=this.Y,m=f.Ha(),w=f.hasAttribute(1);for(f=w?h.ta.oE(this.Rg,f,!1):0;m.ab();)for(;m.Ia();){var x=m.ia();if(!(x.Rb()>this.Pj)){if(p&&w){var $=x.xv(1,0);if(x=x.xv(1,0),Math.abs(x-$)>f)continue}return this.ke=new h.Nd(2,m.xb(),-1),!1}}return!0},c.prototype.eO=function(){var p=this.Y,f=null;h.ba.Ic(this.Y.K())&&(f=this.Y);var m=(this.QG||this.sl)&&f!=null,w=p.I();this.lf=p.vb(0),this.hi=new h.ja(0),this.hi.Jb(2*w),this.gi=new h.ja(0),this.gi.Jb(2*w),m&&(this.Hl==null&&(this.Hl=new h.ja(0)),this.Hl.Jb(w));for(var x=p=0;x<w;x++)if(this.hi.add(2*x),this.hi.add(2*x+1),this.gi.add(2*x),this.gi.add(2*x+1),m){for(;x>=f.Wc(p);)p++;this.Hl.add(p)}for(new h.Yt().sort(this.gi,0,2*w,new n(this,m)),this.fb.clear(),this.fb.Wo(new o(this)),this.fb.Ee(w),f=0,w*=2;f<w;f++)if(m=this.gi.get(f),m=(p=this.hi.get(m))>>1,(1&p)==0){if(p=this.fb.addElement(m,-1),(x=this.fb.xe(p))!=-1&&!this.dC(this.fb.ka(x),m))return this.ke=new h.Nd(3,m,this.fb.ka(x)),!1;var $=this.fb.lb(p);if($!=-1&&!this.dC(this.fb.ka($),m))return this.ke=new h.Nd(3,m,this.fb.ka($)),!1}else if(p=this.fb.search(m,-1),x=this.fb.xe(p),$=this.fb.lb(p),this.fb.wd(p,-1),x!=-1&&$!=-1&&!this.dC(this.fb.ka(x),this.fb.ka($)))return this.ke=new h.Nd(3,this.fb.ka(x),this.fb.ka($)),!1;return!0},c.prototype.hO=function(){return 10>this.Y.I()?this.fO():this.gO()},c.prototype.gO=function(){var p=new h.hd;p.Ib(this.Y);var f=new h.Nd;return!h.au.cI(!1,p,this.Pj,f,this.nd)||(f.Ko=p.Va(f.Ko),f.Lo=p.Va(f.Lo),this.ke.Xt(f),!1)},c.prototype.fO=function(){var p=this.Y,f=p.Ha();for(p=p.Ha();f.ab();)for(;f.Ia();){var m=f.ia();if(!f.Rn()||!f.QS()){p.rW(f);do for(;p.Ia();){var w=p.ia();if((w=m.Br(w,this.Pj,!0))!=0)return this.ke=new h.Nd(w==2?5:4,f.xb(),p.xb()),!1}while(p.ab())}}return!0},c.prototype.kO=function(){var p=this.Y;this.hb.length=0,this.qo.length=0,this.$f=p.Ha(),this.$f.DB();var f=new h.ja(0);f.Jb(10);var m=NaN,w=0,x=0;for(p=2*p.I();x<p;x++){var $=this.gi.get(x);if((1&($=this.hi.get($)))==0){$>>=1;var T=this.lf.read(2*$),A=this.lf.read(2*$+1);if(f.size!=0&&(T!=m||A!=w)){if(!this.II(f))return!1;f!=null&&f.clear(!1)}f.add($),m=T,w=A}}return!!this.II(f)},c.prototype.jO=function(){for(var p=this.Y,f=Array(p.ea()),m=0,w=p.ea();m<w;m++)f[m]=p.On(m);w=new v;var x=new h.h;m=this.gi.get(0);var $=(m=this.hi.get(m))>>1;this.lf.uc(2*$,x);var T=f[m=this.Hl.get($)],A=p.Ca(m),C=p.Wc(m)-1;w.fl=$==A||$==C,w.iy=this.sl?!T&&w.fl:w.fl,w.Bi=m,w.x=x.x,w.y=x.y,w.zm=$;for(var N=new v,L=1,D=this.gi.size;L<D;L++)if(m=this.gi.get(L),(1&(m=this.hi.get(m)))==0){$=m>>1,this.lf.uc(2*$,x),(m=this.Hl.get($))!=w.Bi&&(T=f[m],A=p.Ca(m),C=p.Wc(m)-1);var F=$==A||$==C,V=this.sl?!T&&w.fl:w.fl;if(N.x=x.x,N.y=x.y,N.Bi=m,N.zm=$,N.iy=V,N.fl=F,N.x==w.x&&N.y==w.y){if(this.sl){if(!(N.iy&&w.iy||N.Bi==w.Bi&&(N.fl||w.fl)))return this.ke=new h.Nd(8,N.zm,w.zm),!1}else if(!N.fl||!w.fl)return this.ke=new h.Nd(5,N.zm,w.zm),!1}m=w,w=N,N=m}return!0},c.prototype.BE=function(){for(var p=this.Y,f=[],m=-1,w=!1,x=0,$=p.ea();x<$;x++)p.Fv(x)&&(w=!1,m++,x<$-1&&(p.Fv(x+1)||(w=!0))),f[x]=w?m:-1;w=new h.h,x=this.gi.get(0);var T=(x=this.hi.get(x))>>1;this.lf.uc(2*T,w),x=this.Hl.get(T),m=new u(w.x,w.y,x,T,f[x]),p=[];var A=1;for($=this.gi.size;A<$;A++)if(x=this.gi.get(A),(1&(x=this.hi.get(x)))==0){if(T=x>>1,this.lf.uc(2*T,w),x=this.Hl.get(T),(x=new u(w.x,w.y,x,T,f[x])).x==m.x&&x.y==m.y){if(x.Bi==m.Bi)return this.ke=new h.Nd(9,x.zm,m.zm),!1;0<=f[x.Bi]&&f[x.Bi]==f[m.Bi]&&(p.length!=0&&p[p.length-1]==m||p.push(m),p.push(x))}m=x}if(p.length==0)return!0;for(x=new h.kp(!0),h.P.av(f,-1),w=-1,(A=new h.h).Sc(),m=0,$=p.length;m<$;m++){(T=p[m]).x==A.x&&T.y==A.y||(w=x.Qh(0),A.x=T.x,A.y=T.y);var C=f[T.Bi];C==-1&&(C=x.Qh(2),f[T.Bi]=C),x.addElement(C,w),x.addElement(w,C)}for(($=new h.ja(0)).Jb(10),m=x.je;m!=-1;m=x.lz(m))if((1&(p=x.HF(m)))==0&&(2&p)!=0){for(p=-1,$.add(m),$.add(-1);0<$.size;){if(w=$.Gc(),$.Jf(),A=$.Gc(),$.Jf(),(1&(T=x.HF(A)))!=0){p=(2&T)==0?w:A;break}for(x.TW(A,1|T),T=x.sc(A);T!=-1;T=x.lb(T))(C=x.getData(T))!=w&&($.add(C),$.add(A))}if(p!=-1){for(x=-1,m=0,$=f.length;m<$;m++)if(f[m]==p){x=m;break}return this.ke=new h.Nd(10,x,-1),!1}}return!0},c.prototype.lO=function(){var p=this.Y;if(0>=p.He())return this.ke=new h.Nd(6,p.ea()==1?1:-1,-1),0;if(p.ea()==1)return this.sl&&!this.BE()?0:2;this.uo=h.ja.rf(p.ea(),0),this.DA=h.ja.rf(p.ea(),-1);for(var f=-1,m=0,w=0,x=p.ea();w<x;w++){var $=p.Kr(w);if(this.uo.write(w,0>$?0:256),0<$)f=w,m=$;else{if($==0)return this.ke=new h.Nd(6,w,-1),0;if((0>f||m<Math.abs($))&&(this.ke=new h.Nd(7,w,-1),this.sl))return 0;this.DA.write(w,f)}}for(this.dt=p.ea(),this.Qm=new h.ja(0),this.Qm.Jb(10),x=p.I(),this.No=NaN,(p=new h.ja(0)).Jb(10),this.Sq=h.ja.rf(x,-1),this.Iw=h.ja.rf(x,-1),this.Aj!=null?this.Aj.clear(!1):this.Aj=new h.ja(0),this.Aj.Jb(10),this.fb.clear(),this.fb.Wo(new r(this)),f=0,x*=2;0<this.dt&&f<x;f++)if(m=this.gi.get(f),(1&(m=this.hi.get(m)))==0){if(m>>=1,(w=this.lf.read(2*m+1))!=this.No&&p.size!=0){if(!this.ut(p))return 0;p!=null&&p.clear(!1)}p.add(m),this.No=w}return 0<this.dt&&!this.ut(p)?0:this.sl?this.ke.Kj==0&&this.BE()?2:0:this.ke.Kj==0?2:1},c.prototype.II=function(p){if(p.size==1)return!0;for(var f=0,m=p.size;f<m;f++){var w=p.get(f);this.$f.Wb(w);var x=this.$f.mi();this.hb.push(this.Uu(x,w,this.$f.gb,!0)),this.$f.ia(),x=this.$f.ia(),this.hb.push(this.Uu(x,w,this.$f.gb,!1))}var $=this;for(this.hb.sort(function(C,N){return $.PP(C,N)}),(w=this.nh.je)==-1&&(w=this.nh.Qh(0)),this.nh.hn(this.hb.length),f=0,m=this.hb.length;f<m;f++)this.nh.addElement(w,f);f=!0;for(var T=m=-1;f&&(f=!1,(x=this.nh.sc(w))!=-1);)for(var A=this.nh.lb(x);A!=-1;)if(m=this.nh.getData(x),T=this.nh.getData(A),(m=this.hb[m].Jo)!=(T=this.hb[T].Jo))x=A,A=this.nh.lb(x);else if(f=!0,this.nh.kd(w,x),x=this.nh.xe(A),(A=this.nh.kd(w,A))==-1||x==-1)break;if(f=this.nh.cs(w),this.nh.DE(w),0<f)return this.ke=new h.Nd(5,m,T),!1;for(f=0,m=p.size;f<m;f++)this.pB(this.hb[f]);return this.hb.length=0,!0},c.prototype.ut=function(p){for(var f=0,m=p.size;f<m;f++){var w=p.get(f),x=this.Sq.read(w);if(x!=-1){var $=this.fb.ka(x);this.Aj.add($),this.fb.wd(x,-1),this.pB(this.hb[$]),this.hb[$]=null,this.Sq.write(w,-1)}(x=this.Iw.read(w))!=-1&&($=this.fb.ka(x),this.Aj.add($),this.fb.wd(x,-1),this.pB(this.hb[$]),this.hb[$]=null,this.Iw.write(w,-1))}for(f=0,m=p.size;f<m;f++){if(w=p.get(f),this.$f.Wb(w),(x=this.$f.mi()).oa>x.ma){var T=this.$f.xb(),A=this.Uu(x,w,this.$f.gb,!0);0<this.Aj.size?($=this.Aj.Gc(),this.Aj.Jf(),this.hb[$]=A):($=this.hb.length,this.hb.push(A)),x=this.fb.addElement($,-1),this.Sq.read(T)==-1?this.Sq.write(T,x):this.Iw.write(T,x),(3&this.uo.read(this.$f.gb))==0&&this.Qm.add(x)}this.$f.ia(),(x=this.$f.ia()).oa<x.ma&&(T=this.$f.ik(),A=this.Uu(x,w,this.$f.gb,!1),0<this.Aj.size?($=this.Aj.Gc(),this.Aj.Jf(),this.hb[$]=A):($=this.hb.length,this.hb.push(A)),x=this.fb.addElement($,-1),this.Sq.read(T)==-1?this.Sq.write(T,x):this.Iw.write(T,x),(3&this.uo.read(this.$f.gb))==0&&this.Qm.add(x))}for(f=0,m=this.Qm.size;f<m&&0<this.dt;f++)if(x=this.Qm.get(f),(3&this.uo.read(this.hb[this.fb.ka(x)].CA))==0){p=-1,w=this.fb.xe(x);var C=x;A=null,$=-1;for(var N=0;w!=-1&&($=this.fb.ka(w),$=(A=this.hb[$]).CA,(3&(N=this.uo.read($)))==0);)C=w,w=this.fb.xe(w);w==-1?(T=1,w=C):(p=(3&N)==1?$:this.DA.read($),T=A.PF()!=0?0:1,w=this.fb.lb(w));do{if($=this.fb.ka(w),$=(A=this.hb[$]).CA,(3&(C=this.uo.read($)))==0){if(T!=A.PF())return this.ke=new h.Nd(6,$,-1),!1;if(C=252&C|(N=T==0||A.Yp()?2:1),this.uo.write($,N),N==2&&this.ke.Kj==0&&this.DA.read($)!=p&&(this.ke=new h.Nd(7,$,-1),this.sl))return!1;if(this.dt--,this.dt==0)return!0}(3&C)==1&&(p=$),C=w,w=this.fb.lb(w),T=T!=0?0:1}while(C!=x)}return this.Qm!=null?this.Qm.clear(!1):this.Qm=new h.ja(0),!0},c.prototype.Uu=function(p,f,m,w){if(p.K()!=322)throw h.i.Ra();return(p=this.kP(p)).Jo=f,p.CA=m,p.Aq=0,p.aX(w),p},c.prototype.kP=function(p){if(0<this.qo.length){var f=this.qo[this.qo.length-1];--this.qo.length,p.copyTo(f.ne)}else(f=new k).ne=h.KC.ig(p);return f},c.prototype.pB=function(p){p.ne.K()==322&&this.qo.push(p)},c.prototype.aU=function(){for(var p=this.Y.I(),f=new h.ja(0),m=0;m<p;m++)f.add(m);var w=this;for(f.Wd(0,p,function(x,$){return w.Qu(x,$)}),m=1;m<p;m++)if(this.Qu(f.get(m-1),f.get(m))==0)return this.ke=new h.Nd(3,f.get(m-1),f.get(m)),0;return 2},c.prototype.zV=function(){return this.yE()&&this.vE(!0)?2:0},c.prototype.eV=function(){return this.VS()},c.prototype.fU=function(){for(var p=this.Y.I(),f=new h.ja(0),m=0;m<p;m++)f.add(m);var w=this;f.Wd(0,p,function(C,N){return w.HO(C,N)});var x=Array(p);for(h.P.av(x,!1),x[f.get(0)]=!0,m=1;m<p;m++){var $=f.get(m-1),T=f.get(m);this.Qu($,T)==0?x[T]=!1:x[T]=!0}f=this.Y.Ja(),$=this.Y,T=0;var A=1;for(m=0;m<p;m++)x[m]?A=m+1:(T<A&&f.Gd($,T,A),T=m+1);return T<A&&f.Gd($,T,A),f.Dh(2,this.Co),f},c.prototype.DV=function(){var p=this.Y,f=p.Ha(),m=p.Ha(),w=this.Y.Ja(),x=this.Y,$=p.hasAttribute(1),T=$?h.ta.oE(this.Rg,p,!0):0,A=new h.ja(0),C=new h.ja(0);for(A.Jb(h.P.truncate(p.I()/2+1)),C.Jb(h.P.truncate(p.I()/2+1));f.ab();)if(m.ab(),!(2>p.Ka(f.gb))){m.tW();for(var N,L,D=!0;f.Ia();){var F=f.ia(),V=m.mi();if(f.xb()>m.xb())break;D&&(A.add(f.xb()),C.add(m.ik()),D=!1),L=A.Gc();var W=f.ik();if(1<W-L){var K=new h.h;K.vc(p.Oa(L),p.Oa(W)),N=K.length()}else N=F.Rb();L=C.Gc(),1<(W=m.xb())-L?((K=new h.h).vc(p.Oa(L),p.Oa(W)),L=K.length()):L=V.Rb(),N>this.Co?A.add(f.ik()):$&&(N=p.Vc(1,A.Gc(),0),F=F.hv(1,0),Math.abs(F-N)>T&&A.add(f.ik())),L>this.Co?C.add(m.xb()):$&&(N=p.Vc(1,C.Gc(),0),F=V.hv(1,0),Math.abs(F-N)>T&&C.add(m.xb()))}if(A.Gc()<C.Gc()?A.size>C.size?A.Jf():C.Jf():(A.Gc()!=C.Gc()&&C.Jf(),C.Jf()),2<=C.size+A.size){for(D=new h.Ta,V=0,F=A.size;V<F;V++)x.we(A.get(V),D),V==0?w.nf(D):w.lineTo(D);for(V=C.size-1;0<V;V--)x.we(C.get(V),D),w.lineTo(D);x.ec(f.gb)?w.Cp():0<C.size&&(x.we(C.get(0),D),w.lineTo(D))}A!=null&&A.clear(!1),C!=null&&C.clear(!1)}return w.Dh(2,this.Co),w},c.prototype.hV=function(){return this.rX()},c.prototype.rX=function(){return this.Y.K()==1736&&this.Y.Jn()==1?h.Hg.Mk(this.Y,this.Co,!0,!1,this.nd):(this.Ii=new h.hd,this.Ii.Ib(this.Y),this.Ii.gd!=0&&(this.rA!=1&&h.Tk.W(this.Ii,this.Co,this.nd,!0),this.Y.K()==1736&&h.tn.W(this.Ii,this.Ii.ld,this.rA,!1,this.nd)),this.Y=this.Ii.Ke(this.Ii.ld),this.Y.K()==1736&&(this.Y.hm(),this.Y.Zo(0)),this.Y.Dh(2,this.Co),this.Y)},c.ss=function(p,f,m,w,x){if(w!=null&&(w.Kj=0,w.Ko=-1,w.Lo=-1),p.B())return 1;var $=p.K();if($==33)return 1;var T=h.ta.lj(f,p,!1);if($==197)return f=new h.l,p.A(f),f.Ci(T)?(w!=null&&(w.Kj=2,w.Ko=-1,w.Lo=-1),0):1;if(h.ba.zd($))return(T=new h.Ua(p.description)).oc(p,!0),c.ss(T,f,m,w,x);var A=p.qm(T);if((m=m?-1:A)!=-1)return m;if(f=new c(p,f,m,x,!1),$==550)m=f.aU();else if($==1607)m=f.zV();else{if($!=1736)throw h.i.Ra();m=f.eV()}return p.Dh(m,T),w!=null&&m==0&&w.Xt(f.ke),m},c.VJ=function(p,f,m,w){if(p.B())return p;var x=p.K();if(x==33)return p;var $=h.ta.lj(f,p,!1);if(x==197)return f=new h.l,p.A(f),f.Ci($)?p.Ja():p;if(h.ba.zd(x))return(x=new h.Ua(p.description)).oc(p,!0),c.VJ(x,f,m,w);if($=p.qm($),(m=m?-1:$)==2)return p;if(p=new c(p,f,m,w,!1),x==550)p=p.fU();else if(x==1607)p=p.DV();else{if(x!=1736)throw h.i.Ra();p=p.hV()}return p},c.prototype.Nh=function(p,f,m){if(p==f)return 0;p=this.hi.get(p);var w=this.hi.get(f);f=p>>1;var x=w>>1,$=new h.h,T=new h.h;return this.lf.uc(2*f,$),$.y+=(1&p)!=0?this.Pj:-this.Pj,this.lf.uc(2*x,T),T.y+=(1&w)!=0?this.Pj:-this.Pj,(p=$.compare(T))==0&&m?0>(m=this.Hl.get(f)-this.Hl.get(x))?-1:0<m?1:0:p},c.prototype.Qu=function(p,f){if(p==f)return 0;var m=this.Y,w=m.Oa(p),x=m.Oa(f);if(w.x<x.x)return-1;if(w.x>x.x)return 1;if(w.y<x.y)return-1;if(w.y>x.y)return 1;for(w=1;w<this.eT;w++){x=this.fH.qd(w);for(var $=h.ua.Wa(x),T=0;T<$;T++){var A=m.Vc(x,p,T),C=m.Vc(x,f,T);if(A<C)return-1;if(A>C)return 1}}return 0},c.prototype.HO=function(p,f){var m=this.Qu(p,f);return m==0?p<f?-1:1:m},c.prototype.PP=function(p,f){if(p===f)return 0;var m=p.ne.jg();p.Yp()&&m.Uq(),p=f.ne.jg(),f.Yp()&&p.Uq(),f=m.ru();var w=p.ru();return w==f?(f=m.xi(p),Math.abs(f)<=8881784197001252e-31*(Math.abs(p.x*m.y)+Math.abs(p.y*m.x))&&(f--,f++),0>f?1:0<f?-1:0):f<w?-1:1},c}();h.Hx=a}(G||(G={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return ft(u,v),u.prototype.K=function(){return 30},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,a){return o instanceof h.ba?(o=new h.$c(o),r=new h.$c(r),this.W(o,r,n,a).next()):new h.tL(o,r,n,a)},u.fp=function(o,r,n,a){var c=o.Eb(),p=r.Eb();if(o.B()&&r.B())return c>p?o:r;if(o.B())return r;if(r.B())return o;var f=new h.l,m=new h.l,w=new h.l;return o.A(f),r.A(m),w.L(f),w.$b(m),f=h.ta.Xd(n,w,!0),m=o.K(),w=r.K(),m==33&&w==33?u.RU(o,r,f):m!=w?0<c||0<p?c>p?o:r:m==550?u.aI(o,r,f):u.aI(r,o,f):h.Hg.fp(o,r,n,a)},u.RU=function(o,r,n){n=n*Math.sqrt(2)*1.00001,n*=n;var a=o.D(),c=r.D(),p=new h.de(o.description);return h.h.zc(a,c)>n&&(p.add(o),p.add(r)),p},u.aI=function(o,r,n){var a=o.vb(0),c=o.I(),p=r.D(),f=o.Ja();n=n*Math.sqrt(2)*1.00001;var m=new h.l;if(o.A(m),m.X(n,n),m.contains(p)){n*=n,m=!1;for(var w=[],x=0;x<c;x++)w[x]=!1;for(x=0;x<c;x++){var $=a.read(2*x),T=a.read(2*x+1);($-=p.x)*$+(T-=p.y)*T<=n&&(m=!0,w[x]=!0)}if(m)for(x=0;x<c;x++)w[x]||f.Gd(o,x,x+1);else f.Gd(o,0,c),f.add(r)}else f.Gd(o,0,c),f.add(r);return f},u.instance=null,u}(h.Ge);h.Ix=k}(G||(G={})),function(h){var k=function(){function v(u,o,r,n){this.us=o==null,this.za=-1,this.Sd=u,this.vg=r,this.DT=o.next(),this.Vb=n}return v.prototype.next=function(){return this.us?null:(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),h.Ix.fp(u,this.DT,this.vg,this.Vb)):null;var u},v.prototype.Ma=function(){return this.za},v.prototype.qe=function(){},v}();h.tL=k}(G||(G={})),function(h){var k=function(){function o(){}return o.prototype.Az=function(){this.Vy=null,this.yx=-1,this.sK=!1},o}(),v=function(){function o(){this.Ir=0,this.qj=[]}return o.prototype.hN=function(r){this.Ir+=r.yx,this.qj.push(r)},o.prototype.JV=function(){this.Ir-=this.qj[this.qj.length-1].yx,--this.qj.length},o.prototype.hy=function(){return this.qj[this.qj.length-1]},o.prototype.Nb=function(r){return r===this},o}(),u=function(){function o(r,n,a){this.za=-1,this.Jc=!1,this.sH=[!1,!1,!1,!1],this.wq=[0,0,0,0],this.eA=!1,this.zk=-1,this.kq=0,this.co=-1,this.Eo=[],this.Sd=r,this.vg=n,this.Vb=a}return o.WD=function(r){var n=[],a=0;for(r=Object.keys(r);a<r.length;a++)n.push(Number(r[a]));return n.sort(function(c,p){return c-p}),n},o.prototype.YF=function(r){var n=this.Eo[r],a=o.WD(n)[0],c=n[a],p=c.hy().Vy;return c=c.hy().sK,delete n[a],c&&(p=h.$l.local().W(p,this.vg,!1,this.Vb),r==0&&p.K()==33&&(r=new h.de(p.description),p.B()||r.add(p),p=r)),p},o.prototype.next=function(){if(this.Jc&&this.co==this.zk)return null;for(;!this.iK(););if(this.zk==-1)return null;if(this.eA){for(this.co++;;){if(this.co>this.zk||0>this.co)throw h.i.Ra();if(this.sH[this.co])break}return this.za++,this.YF(this.co)}return this.za=0,this.co=this.zk,this.YF(this.zk)},o.prototype.Ma=function(){return this.za},o.prototype.iK=function(){if(this.Jc)return!0;var r=null;if(this.Sd!=null&&(r=this.Sd.next())==null&&(this.Jc=!0,this.Sd=null),h.np.Bp(this.Vb),r!=null){var n=r.Eb();this.sH[n]=!0,n>=this.zk&&!this.eA&&(this.ED(n,!1,r),n>this.zk&&!this.eA&&this.pW(n))}if(0<this.kq)for(n=0;n<=this.zk;n++)for(;1<this.wq[n]&&(r=this.xO(n)).length!=0;)r=h.Hg.NP(r,this.vg,this.Vb),this.ED(n,!0,r);return this.Jc},o.prototype.xO=function(r){for(var n=[],a=[],c=this.Eo[r],p=o.WD(c),f=0;f<p.length;f++){var m=p[f],w=c[m];if(this.Jc||1e4<w.Ir&&1<w.qj.length){for(this.wq[r]-=w.qj.length,this.kq-=w.qj.length;0<w.qj.length;)n.push(w.hy().Vy),w.JV();a.push(m)}}for(f=0;f<a.length;f++)delete c[a[f]];return n},o.prototype.pW=function(r){for(var n=0;n<r;n++)this.Eo[n]=[],this.kq-=this.wq[n],this.wq[n]=0},o.prototype.ED=function(r,n,a){var c=new k;if(c.Az(),c.Vy=a,a=o.WR(a),c.yx=a,a=o.UR(a),r+1>this.Eo.length)for(var p=0,f=Math.max(2,r+1);p<f;p++)this.Eo.push([]);(p=this.Eo[r][a])===void 0&&(p=new v,this.Eo[r][a]=p),c.sK=n,p.hN(c),this.wq[r]++,this.kq++,this.zk=Math.max(this.zk,r)},o.UR=function(r){return 0<r?h.P.truncate(Math.log(r)/Math.log(4)+.5):0},o.WR=function(r){var n=r.K();if(h.ba.yj(n))return r.I();if(n==33)return 1;if(n==197)return 4;if(h.ba.zd(n))return 2;throw h.i.Ra()},o.prototype.qe=function(){this.iK()},o}();h.vL=u}(G||(G={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return ft(u,v),u.prototype.K=function(){return 1},u.prototype.W=function(o,r,n,a){return a===void 0?new h.vL(o,r,n):this.ZP(o,r,n,a)},u.prototype.ZP=function(o,r,n,a){return o=new h.$c([o,r]),this.W(o,n,a).next()},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Ge);h.Hh=k}(G||(G={})),function(h){var k,v;(v=k||(k={}))[v.nextPath=0]="nextPath",v[v.nextSegment=1]="nextSegment",v[v.iterate=2]="iterate",k=function(){function u(o,r,n,a){this.Us=new h.l,this.wT=o,this.xT=r,this.oq=a,this.vo=-1,this.tl=!1;var c=o.Cb;c!=null&&(c=a?c.Ao:c.Gb)!=null&&(this.Jc=!1,this.ra=n,this.Gb=c,this.yw=this.Gb.getIterator(),this.pq=this.tl=!0,this.Yb=0,a?this.vo=r.ea():this.td=r.Ha()),this.tl||(c=r.Cb)!=null&&(c=a?c.Ao:c.Gb)!=null&&(this.Jc=!1,this.ra=n,this.Gb=c,this.yw=this.Gb.getIterator(),this.tl=!0,this.pq=!1,this.Yb=0,a?this.vo=o.ea():this.td=o.Ha()),this.tl||(this.di=a?h.ta.eR(o,r,n,1<=o.qm(0),1<=r.qm(0)):h.ta.dR(o,r,n))}return u.prototype.next=function(){if(this.tl){if(this.Jc)return!1;for(var o=!0;o;)switch(this.Yb){case 0:o=this.nU();break;case 1:o=this.oU();break;case 2:o=this.Pz();break;default:throw h.i.ga("internal error")}return!this.Jc}return this.di!=null&&this.di.next()},u.prototype.pl=function(){return this.tl?this.pq?this.Gb.ka(this.Gs):this.oq?this.vo:this.td.xb():this.di.pl(this.di.Wf)},u.prototype.jl=function(){return this.tl?this.pq?this.oq?this.vo:this.td.xb():this.Gb.ka(this.Gs):this.di.jl(this.di.Bf)},u.prototype.oz=function(){if(!this.oq)throw h.i.ga("internal error");return this.tl?this.pq?this.Gb.yF(this.Gs):this.Us:this.di.oz(this.di.Wf)},u.prototype.Wy=function(){if(!this.oq)throw h.i.ga("internal error");return this.tl?this.pq?this.Us:this.Gb.yF(this.Gs):this.di.Wy(this.di.Bf)},u.prototype.nU=function(){return this.oq?--this.vo==-1?(this.Jc=!0,!1):(this.pq?this.xT.Sj(this.vo,this.Us):this.wT.Sj(this.vo,this.Us),this.yw.Yi(this.Us,this.ra),this.Yb=2,!0):this.td.ab()?(this.Yb=1,!0):(this.Jc=!0,!1)},u.prototype.oU=function(){if(!this.td.Ia())return this.Yb=0,!0;var o=this.td.ia();return this.yw.Vo(o,this.ra),this.Yb=2,!0},u.prototype.Pz=function(){return this.Gs=this.yw.next(),this.Gs==-1&&(this.Yb=this.oq?0:1,!0)},u}(),h.am=k}(G||(G={})),function(h){(h=h.GL||(h.GL={}))[h.enumClosed=1]="enumClosed",h[h.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",h[h.enumOGCStartPolygon=4]="enumOGCStartPolygon",h[h.enumCalcMask=4]="enumCalcMask"}(G||(G={})),function(h){h.IC=function(){function k(){}return k.ub=function(v,u,o,r,n,a,c,p,f){var m=[0,0,0],w=[0,0,0],x=[0,0,0],$=[0,0,0,0],T=new h.ha(0),A=new h.ha(0),C=new h.ha(0);if(c!=null||p!=null||f!=null)if(h.s.ui(u))h.Zg.ub(v,o,r,n,a,c,p,f);else{n=h.F.ca(n),o=h.F.ca(o);var N=h.F.ca(n-o);if(h.s.$(r,a)&&(h.s.$(o,n)||h.s.$(h.s.R(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.$(r,-a)){if(h.s.$(h.s.R(r),1.570796326794897))return c!=null&&(c.u=2*h.F.Bh(v,u)),p!=null&&(p.u=0<r?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(f!=null&&(f.u=0<r?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));h.s.$(h.s.R(N),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Bh(v,u)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else if(h.s.$(h.s.R(r),1.570796326794897)||h.s.$(h.s.R(a),1.570796326794897)||h.s.$(o,n)||h.s.$(h.s.R(N),3.141592653589793)||h.s.Dd(r))return void h.Xk.ub(v,u,o,r,n,a,c,p,f);var L=Math.sqrt(1-u);n=h.F.ca(n-o),o=0,h.F.dl(1,u,r,o,0,T,A,C),m[0]=T.u,m[1]=A.u,m[2]=C.u,h.F.dl(1,u,a,n,0,T,A,C),w[0]=T.u,w[1]=A.u,w[2]=C.u,x[0]=0,x[1]=0,x[2]=-1*u*h.F.n(1,u,r)*Math.sin(r),0>n?h.F.Yq(x,w,m,$,0):h.F.Yq(x,m,w,$,0),A=[0,0,0],C=[0,0,0];var D=[0,0,0];m=[0,0,0],T=[0,0,0];var F=Math.acos($[2]/1),V=1-u,W=Math.tan(F),K=1+W*W/V,B=2*x[2]*W/V;for(V=(-B+(W=Math.sqrt(B*B-4*K*(x[2]*x[2]/V-1))))/(K*=2),B=(-B-W)/K,W=Math.tan(F),F=(V+B)/2,x=((K=W*V+x[2])+(W*B+x[2]))/2,W=h.F.hp(V-F,K-x),V=x/L*1.570796326794897,B=0;100>B&&(K=(K=h.F.w(u,V))*K/Math.cos(V)*(Math.sin(V)-x*K/(1-u)),!h.s.Dd(K));B++)V-=K;x=h.F.n(1,u,V)*Math.cos(V),W=1-W/(x=Math.sqrt((x-F)*(x+F))),W*=2-W,K=h.F.qn(A),F=h.F.qn(C),V=h.F.qn(D);var ee=h.F.Tt(D,A);B=h.F.Tt(D,C),h.F.xx(D,A,m),h.F.xx(D,C,T),A=Math.acos(ee/(V*K)),C=Math.acos(B/(V*F)),C*=h.s.Mb(1,h.F.Tt(m,T)),(1.570796326794897<=h.s.R(A)&&1.570796326794897<=h.s.R(C)||3.141592653589793<h.s.R(A-C))&&(A=(3.141592653589793-h.s.R(A))*h.s.Mb(1,A),C=(3.141592653589793-h.s.R(C))*h.s.Mb(1,C)),m=h.F.Rj(W,C),T=h.F.q(x,W,h.F.Rj(W,A)),m=h.F.q(x,W,m),m=h.s.R(m-T)*v,A=new h.ha(0),C=new h.ha(0),D=$[1]/1,D*=-h.s.Mb(1,N),T=Math.acos(D)*h.s.Mb(1,N),k.sf(v,u,o,r,m,T,A,C),h.s.$(n,A.u)&&h.s.$(a,C.u)||(W=h.F.hp(h.F.ca(n-A.u),a-C.u),k.sf(v,u,o,r,m,h.F.ca(T+3.141592653589793),A,C),(K=h.F.hp(h.F.ca(n-A.u),a-C.u))<W&&(T=h.F.ca(T+3.141592653589793))),A=[0,0,0,0],C=[0,0,0,0],W=[0,0,0],v=[0,0,0],o=[0,0,0],r=[0,0,0],D=[0,0,0],(x=[0,0,0])[0]=0,x[1]=0,x[2]=L,W[0]=0,W[1]=0,W[2]=0,h.F.Yq(W,x,w,A,0),h.s.Dd(a)?(v[0]=w[0],v[1]=w[1],v[2]=1,o[0]=1*Math.cos(n)-1*Math.sin(n),o[1]=1*Math.sin(n)+1*Math.cos(n)):(u=h.F.n(1,u,a)*Math.cos(a),v[0]=0,v[1]=0,w[2]+=Math.tan(1.570796326794897-h.s.R(a))*u*h.s.Mb(1,a),o[0]=u*Math.cos(n)-u*Math.sin(n),o[1]=u*Math.sin(n)+u*Math.cos(n)),o[2]=w[2],h.F.Yq(w,o,v,C,1),h.F.xx(C,A,r),h.F.xx(C,$,D),D=h.F.Tt(r,D)/(h.F.qn(r)*h.F.qn(D)),D*=h.s.Mb(1,N),n=Math.acos(D)*-h.s.Mb(1,N),(0<T&&0<n||0>T&&0>n)&&(n=h.F.ca(n+3.141592653589793)),c!=null&&(c.u=m),p!=null&&(p.u=T),f!=null&&(f.u=n)}}},k.sf=function(v,u,o,r,n,a,c,p){var f=[0,0,0],m=[0,0,0],w=[0,0,0],x=[0,0,0],$=[0,0,0],T=[0,0,0],A=[0,0,0],C=[0,0,0,0],N=new h.ha(0),L=new h.ha(0),D=new h.ha(0),F=new h.ha(0),V=new h.ha(0),W=new h.ha(0);if(c!=null&&p!=null)if(h.s.ui(u))h.Zg.sf(v,o,r,n,a,c,p);else if(h.s.Dd(n))c!=null&&(c.u=o),p!=null&&(p.u=r);else if(a=h.F.ca(a),0>n&&(n=h.s.R(n),a=h.F.ca(a+3.141592653589793)),o=h.F.ca(o),r=h.F.ca(r),1.570796326794897<h.s.R(r)&&(o=h.F.ca(o+3.141592653589793),r=h.s.Mb(3.141592653589793,r)-r),h.s.$(h.s.R(r),1.570796326794897)||h.s.Dd(r)||h.s.Dd(a)||h.s.$(h.s.R(a),3.141592653589793))h.Xk.sf(v,u,o,r,n,a,c,p);else{var K=Math.sqrt(1-u);for(v=n/v,h.F.dl(1,u,r,0,0,F,V,W),f[0]=F.u,f[1]=V.u,f[2]=V.u,A[0]=0,A[1]=0,A[2]=-1*u*h.F.n(1,u,r)*Math.sin(r),F=h.F.n(1,u,r),V=h.F.ca(1.570796326794897-a),W=Math.sin(V),n=Math.cos(r),r=Math.sin(r),$[0]=F*n-r*W,$[1]=Math.cos(V),$[2]=(1-u)*F*r+n*W,0>a?h.F.Yq(A,$,f,C,0):h.F.Yq(A,f,$,C,0),f=Math.acos(C[2]/1),C=Math.atan2(-C[1],-C[0]),r=1-u,V=1+($=Math.tan(f))*$/r,r=(-(F=2*A[2]*$/r)+($=Math.sqrt(F*F-4*V*(A[2]*A[2]/r-1))))/(V*=2),F=(-F-$)/V,$=Math.tan(f),f=(r+F)/2,A=((V=$*r+A[2])+($*F+A[2]))/2,$=h.F.hp(r-f,V-A),K=A/K*1.570796326794897,r=0;100>r&&(F=(F=h.F.w(u,K))*F/Math.cos(K)*(Math.sin(K)-A*F/(1-u)),!h.s.Dd(F));r++)K-=F;K=h.F.n(1,u,K)*Math.cos(K),A=1-$/(K=Math.sqrt((K-f)*(K+f))),A*=2-A,T=Math.acos(h.F.Tt(T,m)/(h.F.qn(T)*h.F.qn(m))),T*=h.s.Mb(1,m[0]),a=(h.F.q(K,A,h.F.Rj(A,T))+v*h.s.Mb(1,a))/h.F.Bh(K,A),a=h.F.ca(1.570796326794897*a),a=h.F.Tq(A,a),h.F.n(K,A,a),$=h.F.ca(C+o),o=Math.cos($),a=Math.sin($),w[0]=x[0]*o+x[1]*-a,w[1]=x[0]*a+x[1]*o,w[2]=x[2],h.F.bO(u,w[0],w[1],w[2],D,L,N),c!=null&&(c.u=L.u),p!=null&&(p.u=D.u)}},k}()}(G||(G={})),function(h){var k=function(){function n(a){this.Za=null,this.wt=new h.h,this.xt=new h.h,this.g=a}return n.prototype.compare=function(a,c,p){return this.g.Hc(c,this.wt),this.g.Hc(a.ka(p),this.xt),this.wt.compare(this.xt)},n}(),v=function(){function n(a){this.Cf=new h.h,this.Dk=new h.h,this.g=a}return n.prototype.Eh=function(a){this.Cf.N(a)},n.prototype.compare=function(a,c){return this.g.Hc(a.ka(c),this.Dk),this.Cf.compare(this.Dk)},n}(),u=function(n){function a(c){var p=n.call(this,c.g,c.ra,!1)||this;return p.ib=c,p}return ft(a,n),a.prototype.compare=function(c,p,f){if(this.rg)return-1;var m=this.ib.Rd.Kn(this.ib.Sh(p));c=c.ka(f);var w=this.ib.Rd.Kn(this.ib.Sh(c));return this.Fm=f,this.JE(p,m,c,w)},a}(h.MC),o=function(n){function a(c){var p=n.call(this,c.g,c.ra)||this;return p.ib=c,p}return ft(a,n),a.prototype.compare=function(c,p){return this.rg?-1:(c=this.ib.Rd.Kn(this.ib.Sh(c.ka(p))),this.Fm=p,this.KE(p,c))},a}(h.TL),r=function(){function n(){this.Nc=this.df=this.ko=this.Rd=this.mh=this.Ad=this.hb=this.g=null,this.Og=!1,this.wh=this.Pm=this.ie=this.Gk=this.oh=this.Ak=this.Gf=this.ae=null,this.yh=this.Lq=this.OA=this.ra=0,this.Yv=this.Xn=!1,this.zo=new h.h,this.Qi=new h.h,this.hb=new h.ad(8),this.Ad=new h.ad(5),this.mh=new h.bu,this.Rd=new h.bu,this.Og=!1,this.wh=new h.h,this.wh.na(0,0),this.ra=0,this.yh=-1,this.Xn=!1,this.g=null,this.df=new h.Yj,this.Nc=new h.Yj,this.oh=new h.ja(0),this.Gk=new h.LC,this.Gf=new h.ja(0),this.Ak=new h.ja(0),this.ko=new h.Ta}return n.prototype.DX=function(a,c){var p=new h.Ed;return p.TB(),a.Pc(p),this.gr(a),this.Xn=!1,this.ra=c,this.OA=c*c,c=this.cC(),a.Pc(p),c||(this.iQ(),c||this.cC()),this.yh!=-1&&(this.g.Ud(this.yh),this.yh=-1),this.g=null,this.Xn},n.prototype.HX=function(a,c){this.gr(a),this.Xn=!1,this.ra=c,this.OA=c*c,this.Og=!1,this.cC(),this.Og||(this.Og=a.Ip(c,!0,!1)==1),this.yh!=-1&&(this.g.Ud(this.yh),this.yh=-1),this.g=null},n.prototype.pg=function(a,c){return this.hb.U(a,0+c)},n.prototype.FB=function(a,c,p){this.hb.T(a,0+c,p)},n.prototype.Sh=function(a){return this.hb.U(a,2)},n.prototype.MW=function(a,c){this.hb.T(a,2,c)},n.prototype.JF=function(a,c){return this.hb.U(a,3+c)},n.prototype.Rp=function(a){return this.hb.U(a,7)},n.prototype.Rl=function(a,c){this.hb.T(a,7,c)},n.prototype.Tp=function(a,c){return this.hb.U(a,3+this.Qp(a,c))},n.prototype.hr=function(a,c,p){this.hb.T(a,3+this.Qp(a,c),p)},n.prototype.ER=function(a,c){return this.hb.U(a,5+this.Qp(a,c))},n.prototype.jr=function(a,c,p){this.hb.T(a,5+this.Qp(a,c),p)},n.prototype.Tr=function(a){return this.Ad.U(a,0)},n.prototype.IW=function(a,c){this.Ad.T(a,0,c)},n.prototype.$y=function(a){return this.Ad.U(a,4)},n.prototype.er=function(a,c){this.Ad.T(a,4,c)},n.prototype.kl=function(a){return this.Ad.U(a,1)},n.prototype.nn=function(a,c){this.Ad.T(a,1,c)},n.prototype.Zy=function(a){return this.Ad.U(a,3)},n.prototype.Et=function(a,c){this.Ad.T(a,3,c)},n.prototype.$m=function(a){var c=this.Ad.De(),p=this.mh.Qh();return this.IW(c,p),a!=-1?(this.mh.addElement(p,a),this.g.Sa(a,this.yh,c),this.er(c,this.g.Va(a))):this.er(c,-1),c},n.prototype.zP=function(a){this.Ad.kd(a)},n.prototype.CD=function(a,c){this.mh.addElement(this.Tr(a),c),this.g.Sa(c,this.yh,a)},n.prototype.nt=function(a){var c=this.hb.De(),p=this.Rd.Qh();return this.MW(c,p),a!=-1&&this.Rd.addElement(p,a),c},n.prototype.DD=function(a,c){this.Rd.addElement(this.Sh(a),c)},n.prototype.Wu=function(a){this.hb.kd(a),0<=(a=this.oh.dF(a))&&this.oh.IV(a)},n.prototype.ij=function(a,c){if(this.pg(a,0)==-1)this.FB(a,0,c);else{if(this.pg(a,1)!=-1)throw h.i.Ra();this.FB(a,1,c)}this.fy(a,c)},n.prototype.fy=function(a,c){var p=this.kl(c);if(p!=-1){var f=this.Tp(p,c);this.jr(f,c,a),this.hr(a,c,f),this.hr(p,c,a),this.jr(a,c,p)}else this.jr(a,c,a),this.hr(a,c,a),this.nn(c,a)},n.prototype.Qp=function(a,c){return this.pg(a,0)==c?0:1},n.prototype.Zm=function(a,c){var p,f=this.Zy(c);if(f!=-1&&(this.df.wd(f,-1),this.Et(c,-1)),(f=this.kl(c))!=-1){var m=p=f;do{var w=!1,x=this.Qp(p,c),$=this.JF(p,x);if(this.pg(p,x+1&1)==a){if(this.Yu(p),this.Rd.dh(this.Sh(p)),this.Wu(p),p==$){f=-1;break}f==p&&(f=this.kl(c),m=$,w=!0)}p=$}while(p!=m||w);if(f!=-1){do x=this.Qp(p,c),$=this.JF(p,x),this.FB(p,x,a),p=$;while(p!=m);(p=this.kl(a))!=-1?(m=this.Tp(p,a),w=this.Tp(f,a),m==p?(this.nn(a,f),this.fy(p,a),this.nn(a,p)):w==f&&this.fy(f,a),this.hr(f,a,m),this.jr(m,a,f),this.hr(p,a,w),this.jr(w,a,p)):this.nn(a,f)}}for(f=this.Tr(a),p=this.Tr(c),m=this.mh.sc(p);m!=-1;m=this.mh.lb(m))this.g.Sa(this.mh.ka(m),this.yh,a);this.mh.By(f,p),this.zP(c)},n.prototype.KT=function(a,c){var p=this.pg(a,0),f=this.pg(a,1),m=this.pg(c,0),w=this.pg(c,1);this.Rd.By(this.Sh(a),this.Sh(c)),c==this.kl(p)&&this.nn(p,a),c==this.kl(f)&&this.nn(f,a),this.Yu(c),this.Wu(c),p==m&&f==w||f==m&&p==w||(this.In(p,this.zo),this.In(m,this.Qi),this.zo.rb(this.Qi)?(p!=m&&this.Zm(p,m),f!=w&&this.Zm(f,w)):(f!=m&&this.Zm(f,m),p!=w&&this.Zm(p,w)))},n.prototype.Yu=function(a){var c=this.pg(a,1);this.WE(a,this.pg(a,0)),this.WE(a,c)},n.prototype.WE=function(a,c){var p=this.Tp(a,c),f=this.ER(a,c),m=this.kl(c);p!=a?(this.hr(f,c,p),this.jr(p,c,f),m==a&&this.nn(c,p)):this.nn(c,-1)},n.prototype.OD=function(a,c,p){var f=this.Rd.sc(a),m=this.Rd.ka(f);a=this.Ie(m);var w=this.Ie(this.g.V(m));for(this.g.lr(m,c,p,!0),f=this.Rd.lb(f);f!=-1;f=this.Rd.lb(f)){m=this.Rd.ka(f);var x=this.Ie(m)==a;this.g.lr(m,c,p,x)}f=c.Xp(p,0).ac(),c=c.Xp(p,c.ql(p)-1).xc(),this.tK(a,f),this.tK(w,c)},n.prototype.RE=function(a,c,p){var f=this.Sh(a),m=this.pg(a,0),w=this.pg(a,1),x=this.nt(-1);for(this.oh.add(x),this.Rl(x,-3),this.Gf.add(x),this.ij(x,m),a=1,c=c.ql(p);a<c;a++)p=this.$m(-1),this.Ak.add(p),this.Gf.add(p),this.ij(x,p),x=this.nt(-1),this.oh.add(x),this.Rl(x,-3),this.Gf.add(x),this.ij(x,p);for(this.ij(x,w),f=this.Rd.sc(f);f!=-1;f=this.Rd.lb(f))if(w=this.Rd.ka(f),this.Ie(w)==m){a=0;do 0<a&&(x=this.Gf.get(a-1),this.CD(x,w),this.$y(x)==-1&&this.er(x,this.g.Va(w))),x=this.Gf.get(a),a+=2,this.DD(x,w),w=this.g.V(w);while(a<this.Gf.size)}else{a=this.Gf.size-1;do a<this.Gf.size-2&&(x=this.Gf.get(a+1),this.CD(x,w),0>this.$y(x)&&this.er(x,this.g.Va(w))),x=this.Gf.get(a),a-=2,this.DD(x,w),w=this.g.V(w);while(0<=a)}this.Gf.clear(!1)},n.prototype.Ie=function(a){return this.g.Qa(a,this.yh)},n.prototype.KI=function(a,c,p){var f=this.pg(c,0),m=new h.h;this.In(f,m);var w=new h.h,x=this.pg(c,1);this.In(x,w);var $=p.ql(a),T=p.Xp(a,0),A=new h.h;if(T.$p(A),!m.rb(A)){if(!this.Og){var C=m.compare(this.wh);0>C*(A=A.compare(this.wh))&&(this.Og=!0)}this.nF(f,this.Gf),this.Ak.add(f)}for(!this.Og&&1<$&&(C=m.compare(w),T=T.xc(),(m.compare(T)!=C||T.compare(w)!=C||0>T.compare(this.wh))&&(this.Og=!0)),a=(T=p.Xp(a,$-1)).xc(),w.rb(a)||(this.Og||0>(C=w.compare(this.wh))*(A=a.compare(this.wh))&&(this.Og=!0),this.nF(x,this.Gf),this.Ak.add(x)),this.Gf.add(c),w=0,x=this.Gf.size;w<x;w++)a=this.Gf.get(w),p=this.Rp(a),h.ad.DG(p)&&(this.Nc.wd(p,-1),this.Rl(a,-1)),a!=c&&this.Rp(a)!=-3&&(this.oh.add(a),this.Rl(a,-3));this.Gf.clear(!1)},n.prototype.dO=function(a,c){this.ae.compare(this.Nc,this.Nc.ka(a),c),this.ae.rg&&(this.ae.Lr(),this.gF(a,c))},n.prototype.gF=function(a,c){this.Xn=!0,a=this.Nc.ka(a),c=this.Nc.ka(c);var p=this.Rd.Kn(this.Sh(a)),f=this.Rd.Kn(this.Sh(c)),m=this.g.cc(p);m==null&&(this.ie==null&&(this.ie=new h.zb),this.g.fd(p,this.ie),m=this.ie),(p=this.g.cc(f))==null&&(this.Pm==null&&(this.Pm=new h.zb),this.g.fd(f,this.Pm),p=this.Pm),this.Gk.Po(m),this.Gk.Po(p),this.Gk.Fa(this.ra,!0)&&(this.Og=!0),this.$J(a,c,-1,this.Gk),this.Gk.clear()},n.prototype.yQ=function(a,c){this.Xn=!0,c=this.Nc.ka(c);var p=this.Rd.Kn(this.Sh(c)),f=this.g.cc(p);f==null&&(this.ie==null&&(this.ie=new h.zb),this.g.fd(p,this.ie),f=this.ie),p=this.tF(a),this.Gk.Po(f),this.g.Wi(p,this.ko),this.Gk.Fz(this.ra,this.ko,!0),this.$J(c,-1,a,this.Gk),this.Gk.clear()},n.prototype.oS=function(){if(this.oh.size!=0)for(;this.oh.size!=0;){if(this.oh.size>Math.max(100,this.g.gd)){this.oh.clear(!1),this.Og=!0;break}var a=this.oh.Gc();this.oh.Jf(),this.Rl(a,-1),this.MS(a)!=-1&&this.nS(a),this.Wn=!1}},n.prototype.nS=function(a){if(this.Wn){var c=this.Nc.Au(this.EH,this.yH,a,!0);this.Wn=!1}else c=this.Nc.BD(a);c==-1?this.KT(this.Nc.ka(this.Nc.xF()),a):(this.Rl(a,c),this.ae.rg&&(this.ae.Lr(),this.gF(this.ae.Fm,c)))},n.prototype.MS=function(a){var c=this.pg(a,0);if(a=this.pg(a,1),this.In(c,this.zo),this.In(a,this.Qi),h.h.zc(this.zo,this.Qi)<=this.OA)return this.Og=!0,-1;var p=this.zo.compare(this.wh),f=this.Qi.compare(this.wh);return 0>=p&&0<f?a:0>=f&&0<p?c:-1},n.prototype.gQ=function(){var a=new h.ja(0);a.Jb(this.g.gd);for(var c=this.g.$q(),p=c.next();p!=-1;p=c.next())this.g.Qa(p,this.yh)!=-1&&a.add(p);this.g.mx(a,a.size),this.hQ(a)},n.prototype.hQ=function(a){this.df.clear(),this.df.Ee(a.size),this.df.Wo(new k(this.g));var c=new h.h;c.Sc();for(var p=-1,f=new h.h,m=0,w=a.size;m<w;m++){var x=a.get(m);this.g.Hc(x,f),f.rb(c)?(x=this.g.Qa(x,this.yh),this.Zm(p,x)):(p=this.Ie(x),this.g.Hc(x,c),x=this.df.yn(x),this.Et(p,x))}},n.prototype.iQ=function(){var a=new h.ja(0);a.Jb(this.g.gd);for(var c=this.df.sc(-1);c!=-1;c=this.df.lb(c))a.add(this.df.ka(c));this.df.clear(),this.g.mx(a,a.size),c=0;for(var p=a.size;c<p;c++){var f=a.get(c),m=this.Ie(f);f=this.df.yn(f),this.Et(m,f)}},n.prototype.nF=function(a,c){var p=this.kl(a);if(p!=-1){var f=p;do h.ad.DG(this.Rp(f))&&c.add(f),f=this.Tp(f,a);while(f!=p)}},n.prototype.tK=function(a,c){for(a=this.mh.sc(this.Tr(a));a!=-1;a=this.mh.lb(a))this.g.mf(this.mh.ka(a),c)},n.prototype.$J=function(a,c,p,f){this.Yu(a),c!=-1&&this.Yu(c),this.KI(0,a,f),c!=-1&&this.KI(1,c,f),p!=-1&&(f.Cf.D(this.zo),this.In(p,this.Qi),this.Qi.rb(this.zo)||this.Ak.add(p)),p=0;for(var m=this.Ak.size;p<m;p++){var w=this.Ak.get(p),x=this.Zy(w);x!=-1&&(this.df.wd(x,-1),this.Et(w,-1))}for(p=this.Sh(a),m=c!=-1?this.Sh(c):-1,this.OD(p,f,0),c!=-1&&this.OD(m,f,1),this.RE(a,f,0),c!=-1&&this.RE(c,f,1),this.Rd.dh(p),this.Wu(a),c!=-1&&(this.Rd.dh(m),this.Wu(c)),p=0,m=this.Ak.size;p<m;p++)(w=this.Ak.get(p))==this.Lq&&(this.Yv=!0),(x=this.Zy(w))==-1&&((x=this.df.BD(this.tF(w)))==-1?(a=this.Ie(this.df.ka(this.df.xF())),this.Zm(a,w)):this.Et(w,x));this.Ak.clear(!1)},n.prototype.In=function(a,c){this.g.WF(this.$y(a),c)},n.prototype.tF=function(a){return this.mh.Kn(this.Tr(a))},n.prototype.cC=function(){this.Yv=!1,this.Lq=-1,this.ae==null&&(this.Nc.Sv=!1,this.ae=new u(this),this.Nc.$n=this.ae);var a=new h.ja(0),c=null,p=null;this.yH=this.EH=-1,this.Wn=!1;for(var f=this.df.sc(-1);f!=-1;){this.Wn=!1;var m=this.df.ka(f);this.Lq=this.Ie(m),this.g.Hc(m,this.wh),this.ae.SJ(this.wh.y,this.wh.x);var w=this.kl(this.Lq),x=w==-1;if(!x){m=w;do{var $=this.Rp(m);$==-1?(this.oh.add(m),this.Rl(m,-3)):$!=-3&&a.add($),m=this.Tp(m,this.Lq)}while(m!=w)}if(0<a.size){for(this.Wn=a.size==1&&this.oh.size==1,x=0,w=a.size;x<w;x++)m=this.Nc.ka(a.get(x)),this.Rl(m,-2);var T=-2,A=-2;for(x=0,w=a.size;x<w;x++){if($=a.get(x),T==-2){var C=this.Nc.xe($);C!=-1?(m=this.Nc.ka(C),(m=this.Rp(m))!=-2&&(T=C)):T=-1}if(A==-2&&(($=this.Nc.lb($))!=-1?(m=this.Nc.ka($),(m=this.Rp(m))!=-2&&(A=$)):A=-1),T!=-2&&A!=-2)break}for(x=0,w=a.size;x<w;x++)$=a.get(x),m=this.Nc.ka($),this.Nc.wd($,-1),this.Rl(m,-1);a.clear(!1),this.EH=T!=-1?T:-1,this.yH=A!=-1?A:-1,T!=-1&&A!=-1?this.Wn||this.dO(T,A):T==-1&&A==-1&&(this.Wn=!1)}else x&&(c==null&&(c=new o(this)),c.Eh(this.wh),this.Nc.mJ(c),c.rg&&(c.Lr(),this.yQ(this.Lq,c.Fm)));this.oS(),this.Yv?(this.Yv=!1,p==null&&(p=new v(this.g)),p.Eh(this.wh),f=this.df.mJ(p)):f=this.df.lb(f)}return this.Xn},n.prototype.gr=function(a){for(this.g=a,this.yh=this.g.Hd(),this.hb.Ee(a.gd+32),this.Ad.Ee(a.gd),this.mh.At(a.gd),this.mh.hn(a.gd),this.Rd.At(a.gd+32),this.Rd.hn(a.gd+32),a=this.g.ld;a!=-1;a=this.g.ve(a))if(h.ba.Ic(this.g.jc(a)))for($=this.g.Ob(a);$!=-1;$=this.g.Sb($)){var c=this.g.Ka($),p=this.g.Ya($),f=this.$m(p),m=this.nt(p);for(this.ij(m,f),T=this.g.V(p),p=0,c-=2;p<c;p++){var w=this.g.V(T),x=this.$m(T);this.ij(m,x),m=this.nt(T),this.ij(m,x),T=w}this.g.ec($)?(x=this.$m(T),this.ij(m,x),m=this.nt(T),this.ij(m,x),this.ij(m,f)):(x=this.$m(T),this.ij(m,x))}else for(var $=this.g.Ob(a);$!=-1;$=this.g.Sb($)){var T=this.g.Ya($);for(f=0,c=this.g.Ka($);f<c;f++)this.$m(T),T=this.g.V(T)}this.gQ()},n}();h.JC=r}(G||(G={})),function(h){var k=function(v){function u(o,r,n){var a=v.call(this)||this;if(o!==void 0)if(n!==void 0){a.description=h.ee.og();var c=new h.Od;c.L(o,r,n),a.XB(c)}else if(r!==void 0)a.description=h.ee.og(),a.Db(o,r);else if(o instanceof h.ua)a.description=o;else if(o instanceof h.h)a.description=h.ee.og(),a.Db(o);else{if(!(o instanceof u))throw h.i.O();a.description=o.description,a.Db(o.Mg(),o.jh()),o.la!==null&&(a.la=o.la.slice(0))}else a.description=h.ee.og();return a}return ft(u,v),u.prototype.D=function(o){if(o===void 0){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return(o=new h.h).na(this.la[0],this.la[1]),o}if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");o.na(this.la[0],this.la[1])},u.prototype.Db=function(o,r){typeof o=="number"?(this.wc(),this.la==null&&this.up(),this.la[0]=o,this.la[1]=r):(this.wc(),this.Db(o.x,o.y))},u.prototype.xz=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");var o=new h.Od;return o.x=this.la[0],o.y=this.la[1],o.z=this.description.aG()?this.la[2]:h.ua.te(1),o},u.prototype.XB=function(o){this.wc();var r=this.hasAttribute(1);r||h.ua.vG(1,o.z)||(this.se(1),r=!0),this.la==null&&this.up(),this.la[0]=o.x,this.la[1]=o.y,r&&(this.la[2]=o.z)},u.prototype.Mg=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return this.la[0]},u.prototype.WB=function(o){this.setAttribute(0,0,o)},u.prototype.jh=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return this.la[1]},u.prototype.TJ=function(o){this.setAttribute(0,1,o)},u.prototype.TR=function(){return this.Vc(1,0)},u.prototype.kX=function(o){this.setAttribute(1,0,o)},u.prototype.rR=function(){return this.Vc(2,0)},u.prototype.VW=function(o){this.setAttribute(2,0,o)},u.prototype.Fc=function(){return this.qF(3,0)},u.prototype.DJ=function(o){this.setAttribute(3,0,o)},u.prototype.Vc=function(o,r){var n=this.description.Qf(o);return 0<=n?this.la[this.description.$j(n)+r]:h.ua.te(o)},u.prototype.qF=function(o,r){var n=this.description.Qf(o);return 0<=n?this.la[this.description.$j(n)+r]:h.ua.te(o)},u.prototype.setAttribute=function(o,r,n){this.wc();var a=this.description.Qf(o);0>a&&(this.se(o),a=this.description.Qf(o)),this.la==null&&this.up(),this.la[this.description.$j(a)+r]=n},u.prototype.K=function(){return 33},u.prototype.Eb=function(){return 0},u.prototype.Pa=function(){this.wc(),this.la!=null&&(this.la[0]=NaN,this.la[1]=NaN)},u.prototype.un=function(o){if(this.la!=null){for(var r=h.ee.Jw(o,this.description),n=[],a=0,c=0,p=o.Ba;c<p;c++){var f=o.qd(c),m=h.ua.Wa(f);if(r[c]==-1){var w=h.ua.te(f);for(f=0;f<m;f++)n[a]=w,a++}else for(w=this.description.$j(r[c]),f=0;f<m;f++)n[a]=this.la[w],a++,w++}this.la=n}this.description=o},u.prototype.up=function(){this.dJ(this.description.Be.length),u.VD(this.description.Be,this.la,this.description.Be.length),this.la[0]=NaN,this.la[1]=NaN},u.prototype.Pc=function(o){if(o instanceof h.Ed){if(!this.Bc()){var r=this.D();o.Fh(r,r),this.Db(r)}}else this.Bc()||(this.se(1),r=this.xz(),this.XB(o.gp(r)))},u.prototype.copyTo=function(o){if(o.K()!=33)throw h.i.O();o.wc(),this.la==null?(o.Pa(),o.la=null,o.kg(this.description)):(o.kg(this.description),o.dJ(this.description.Be.length),u.VD(this.la,o.la,this.description.Be.length))},u.prototype.Ja=function(){return new u(this.description)},u.prototype.B=function(){return this.Bc()},u.prototype.Bc=function(){return this.la==null||isNaN(this.la[0])||isNaN(this.la[1])},u.prototype.dn=function(o){o.Pa(),this.description!=o.description&&o.kg(this.description),o.$b(this)},u.prototype.A=function(o){this.Bc()?o.Pa():(o.v=this.la[0],o.G=this.la[1],o.C=this.la[0],o.H=this.la[1])},u.prototype.Ro=function(o){if(this.Bc())o.Pa();else{var r=this.xz();o.v=r.x,o.G=r.y,o.Xe=r.z,o.C=r.x,o.H=r.y,o.Dg=r.z}},u.prototype.Ug=function(o,r){var n=new h.Oc;return this.Bc()?(n.Pa(),n):(o=this.Vc(o,r),n.pa=o,n.wa=o,n)},u.prototype.dJ=function(o){if(this.la==null)this.la=h.P.lg(o);else if(this.la.length<o){for(var r=this.la.slice(0),n=this.la.length;n<o;n++)r[n]=0;this.la=r}},u.VD=function(o,r,n){if(0<n)for(n=0;n<o.length;n++)r[n]=o[n]},u.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof u)||this.description!=o.description)return!1;if(this.Bc())return!!o.Bc();for(var r=0,n=this.description.Be.length;r<n;r++)if(this.la[r]!=o.la[r])return!1;return!0},u.prototype.dc=function(){var o=this.description.dc();if(!this.Bc())for(var r=0,n=this.description.Be.length;r<n;r++){var a=this.la[r];a=h.P.truncate(a^a>>>32),o=h.P.Uh(a,o)}return o},u.prototype.mg=function(){return null},u}(h.ba);h.Ta=k}(G||(G={})),function(h){var k=function(){function v(u,o,r){u!==void 0&&(this.x=u,this.y=o,this.z=r)}return v.construct=function(u,o,r){var n=new v;return n.x=u,n.y=o,n.z=r,n},v.prototype.L=function(u,o,r){this.x=u,this.y=o,this.z=r},v.prototype.kx=function(){this.z=this.y=this.x=0},v.prototype.normalize=function(){var u=this.length();u==0&&(this.x/=u,this.y/=u,this.z/=u)},v.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},v.prototype.sub=function(u){return new v(this.x-u.x,this.y-u.y,this.z-u.z)},v.prototype.Ag=function(u){new v(this.x*u,this.y*u,this.z*u)},v.prototype.Rh=function(u){return this.x*u.x+this.y*u.y+this.z*u.z},v}();h.Od=k}(G||(G={})),function(h){var k=function(){function v(u,o,r){this.Hw=this.xA=null,this.Yf=o,this.vT=o.y-r,this.uT=o.y+r,this.Fw=0,this.Zz=u,this.ra=r,this.HT=r*r,this.$z=r!=0,this.Mv=!1}return v.prototype.result=function(){return this.Fw!=0?1:0},v.prototype.RM=function(u){return u=u.ic(u.fe(this.Yf,!1)),h.h.zc(u,this.Yf)<=this.HT},v.prototype.YE=function(u){if(!this.$z&&(this.Zz&&this.Yf.rb(u.ac())||this.Yf.rb(u.xc())))this.Mv=!0;else if(u.oa==this.Yf.y&&u.oa==u.ma){if(this.Zz&&!this.$z){var o=Math.max(u.sa,u.qa);this.Yf.x>Math.min(u.sa,u.qa)&&this.Yf.x<o&&(this.Mv=!0)}}else{var r=!1;if(o=Math.max(u.sa,u.qa),this.Yf.x>o?r=!0:this.Yf.x>=Math.min(u.sa,u.qa)&&(r=0<u.fq(!0,this.Yf.y,this.Hw,null)&&this.Hw[0]<=this.Yf.x),r){if(this.Yf.y==u.ac().y){if(this.Yf.y<u.xc().y)return}else if(this.Yf.y==u.xc().y&&this.Yf.y<u.ac().y)return;this.Fw=this.Zz?1^this.Fw:this.Fw+(u.ac().y>u.xc().y?1:-1)}}},v.prototype.JI=function(u){var o=u.Ug(0,1);if(o.pa>this.uT||o.wa<this.vT)return!1;if(this.$z&&this.RM(u))return!0;if(o.pa>this.Yf.y||o.wa<this.Yf.y)return!1;if(this.xA==null&&(this.xA=[null,null,null,null,null]),this.Hw==null&&(this.Hw=[0,0,0]),0<(o=u.XF()))for(u=0;u<o;u++){var r=this.xA[u].get();if(this.YE(r),this.Mv)return!0}else if(this.YE(u),this.Mv)return!0;return!1},v.HM=function(u,o,r){for(o=new v(u.Jn()==0,o,r),u=u.Ha();u.ab();)for(;u.Ia();)if(r=u.ia(),o.JI(r))return-1;return o.result()},v.IM=function(u,o,r,n){var a=new h.l;u.yc(a),a.X(n,n);var c=new v(u.Jn()==0,r,n);u=u.Ha();var p=new h.l;for(p.L(a),p.C=r.x+n,p.G=r.y-n,p.H=r.y+n,n=(r=o.EF(p,n)).next();n!=-1;n=r.next())if(u.Wb(o.ka(n)),u.Ia()&&(n=u.ia(),c.JI(n)))return-1;return c.result()},v.ym=function(u,o,r){if(u.B())return 0;var n=new h.l;if(u.yc(n),n.X(r,r),!n.contains(o))return 0;if((n=u.Cb)!=null){var a=n.Fk;if(a!=null){if((a=a.To(o.x,o.y))==1)return 1;if(a==0)return 0}if((n=n.Gb)!=null)return v.IM(u,n,o,r)}return v.HM(u,o,r)},v.SS=function(u,o,r){return o.B()?0:v.ym(u,o.D(),r)},v.Ol=function(u,o){return!(16>(u=u.I()))&&2*u+Math.log(u)/Math.log(2)*o<1*u*o},v}();h.Fg=k}(G||(G={})),function(h){var k=function(v){function u(o){return v.call(this,!0,o)||this}return ft(u,v),u.prototype.Ja=function(){return new u(this.description)},u.prototype.Eb=function(){return 2},u.prototype.K=function(){return 1736},u.prototype.pG=function(o,r,n){this.AS(o,r,n)},u.prototype.hR=function(){this.xR()},u}(h.Vk);h.Ea=k}(G||(G={})),function(h){(function(k){k[k.PiPOutside=0]="PiPOutside",k[k.PiPInside=1]="PiPInside",k[k.PiPBoundary=2]="PiPBoundary"})(h.JL||(h.JL={})),h.jd=function(){function k(){}return k.CG=function(v,u,o){return(v=h.Fg.SS(v,u,o))==0?0:v==1?1:2},k.Zd=function(v,u,o){return(v=h.Fg.ym(v,u,o))==0?0:v==1?1:2},k.KX=function(v,u,o,r,n){if(u.length<o||n.length<o)throw h.i.O();for(var a=0;a<o;a++)n[a]=k.Zd(v,u[a],r)},k.kK=function(v,u,o,r,n){if(v.K()==1736)k.KX(v,u,o,r,n);else{if(v.K()!=197)throw h.i.ga("invalid_call");var a=new h.l;v.A(a),k.SM(a,u,o,r,n)}},k.SM=function(v,u,o,r,n){if(u.length<o||n.length<o)throw h.i.O();if(v.B())for(r=0;r<o;r++)n[r]=0;else for(v.X(.5*-r,.5*-r),v.X(.5*r,.5*r),r=0;r<o;r++)v.contains(u[r])?n[r]=1:v.contains(u[r])?n[r]=2:n[r]=0},k.MX=function(v,u,o,r,n){for(var a=0;a<o;a++)n[a]=v.rs(u[a],r)?2:0},k.LX=function(v,u,o,r,n){var a=v.Cb,c=null;a!=null&&(c=a.Fk),a=o;for(var p=0;p<o;p++)if(n[p]=1,c!=null){var f=u[p];c.To(f.x,f.y)==0&&(n[p]=0,a--)}if(a!=0)for(v=v.Ha();v.ab()&&a!=0;)for(;v.Ia()&&a!=0;)for(c=v.ia(),p=0;p<o&&a!=0;p++)n[p]==1&&c.rs(u[p],r)&&(n[p]=2,a--);for(p=0;p<o;p++)n[p]==1&&(n[p]=0)},k.lK=function(v,u,o,r,n){var a=v.K();if(a==1607)k.LX(v,u,o,r,n);else{if(!h.ba.zd(a))throw h.i.ga("Invalid call.");k.MX(v,u,o,r,n)}},k}()}(G||(G={})),function(h){var k=function(v){function u(o,r){if(arguments.length==2){var n=v.call(this,!1,o.description)||this;n.nf(o),n.lineTo(r)}else n=v.call(this,!1,o)||this;return n}return ft(u,v),u.prototype.Ja=function(){return new u(this.description)},u.prototype.Eb=function(){return 1},u.prototype.K=function(){return 1607},u.prototype.pG=function(o,r,n){this.BS(o,r,n)},u}(h.Vk);h.Ua=k}(G||(G={})),function(h){var k=function(){function v(){}return v.prototype.progress=function(){return!0},v.Bp=function(u){if(u!=null&&!u.progress(-1,-1))throw h.i.OC()},v}();h.np=k}(G||(G={})),function(h){var k;(k=h.HK||(h.HK={}))[k.clipWithInputHorizon=1]="clipWithInputHorizon",k[k.clipWithOutputHorizon=2]="clipWithOutputHorizon";var v=function(){function r(){this.gl=3,this.Gy=this.Lu=NaN}return r.prototype.ZR=function(){return this.js(1)},r.prototype.$R=function(){return this.js(2)},r.prototype.js=function(n){return(this.gl&n)!=0},r.prototype.Pf=function(){var n=new r;return n.Lu=this.Lu,n.Gy=this.Gy,n.gl=this.gl,n},r}();h.oY=v,function(r){r[r.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",r[r.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(h.IK||(h.IK={}));var u=function(){function r(){this.gl=0}return r.prototype.js=function(n){return(this.gl&n)!=0},r.ig=function(n){var a=new r;return a.gl=n.gl,a},r.prototype.eM=function(n){this.gl=n.gl},r}();h.pY=u;var o=function(){function r(n,a,c){this.ef=n,this.Zf=a,this.Vf=new h.l,this.Vf.L(c),this.qT=n.dc()+a.dc()+this.Vf.dc().toString()}return r.prototype.dc=function(){return this.qT},r.prototype.Nb=function(n){return this==n||this.ef.Nb(n.ef)&&this.Zf.Nb(n.Zf)&&this.Vf.Nb(n.Vf)},r}();h.uY=o,o=function(){function r(){this.Zf=this.ef=null,this.jH=new v,this.kH=new u,this.xw=this.Xf=null,this.nw=this.Un=!0}return r.Or=function(n,a,c,p){var f;p===void 0&&(p=null),f===void 0&&(f=null);var m=new r;return m.rp(n,a,c,p,f),m},r.prototype.rp=function(n,a,c,p,f){if(n==null||a==null)throw h.i.ga("invalidArgument");if(this.ef=n,this.Zf=a,this.nw=this.Un=!1,p!=null&&(this.jH=p.Pf()),f!=null&&this.kH.eM(f),f=!1,a.Tb()==1&&p!=null&&(p=p.Lu,isNaN(p)||p==0||(f=!0)),n==a)this.Un=!f,this.nw=!0;else{p=n.Tb();var m=a.Tb();if(p==0||m==0){if(c!=null)throw h.i.O();n.Id()!=null&&a.Id()!=null&&(this.Un=n.Id().Nb(a.Id()))}else p==3||m==3?this.Un=n.Nb(a):this.ef.bS(this.Zf)?this.Un=!f:this.Un=!1,this.Xf=c,this.Xf!=null&&this.Xf.hx(),this.nw=(this.Xf==null||this.Xf.count()==0)&&this.ef.tc().Nb(this.Zf.tc())}this.cY()},r.prototype.isIdentity=function(){return this.Un},r.prototype.fR=function(){return this.jH.Pf()},r.prototype.Nb=function(n){return n==this||!!(n instanceof r&&this.ef.Nb(n.ef)&&this.Zf.Nb(n.Zf))&&(this.Xf==n.Xf||!(this.Xf==null||n.Xf==null||!this.Xf.Nb(n.Xf)))},r.prototype.cY=function(){this.xw=new h.cu(this)},r}(),h.xr=o}(G||(G={})),function(h){var k=function(){function v(){}return v.Ep=function(u){return u*v.eW},v.lx=function(u,o){return v.ZO(o-u)},v.$O=function(u){return-360<=u&&720>u?(0>u?u+=360:360<=u&&(u-=360),u):(0>(u=h.mc.JK(u))&&(u+=360),u)},v.ZO=function(u){return 180<(u=v.$O(u))&&(u-=360),u},v.eW=57.29577951308232,v}();h.sr=k,h.Ih=function(){function v(){}return v.mj=function(u,o){var r=new h.l;u.A(r);var n=h.cb.hh(o),a=new h.l;return a.L(n),a.v=r.v,a.C=r.C,a.X(.01*a.da(),0),o=h.ta.Xd(o,r,!1),a.contains(r)?u:h.Vd.clip(u,a,o,0)},v.ls=function(u,o,r,n,a){if(!h.cb.Xc(o))throw h.i.O();var c=h.ta.lj(o,u,!1),p=h.cb.hh(o),f=h.cb.tc(o),m=f.Id().bi,w=h.cb.wv(f);f=h.cb.fv(f),w*=2-w;var x=new h.Oc;p.en(x);var $=[[0,0],[0,0]];if(h.Gg.Tb(o)==2?n?($[0][0]=v.an(a,x),$[0][1]=p.Lp(),h.cb.vt(),p=$[0][0]*m):($[0][0]=p.gk(),$[0][1]=a,h.cb.vt(),p=$[0][1]*m):p=a*m,!n&&p!=0)throw h.i.O();var T=new h.ha,A=new h.hd;u=A.Ib(u);for(var C=[0],N=new h.h,L=new h.h,D=new h.h,F=new h.h,V=new h.h,W=new h.h,K=A.Ob(u);K!=-1;K=A.Sb(K)){var B=A.Ya(K);A.D(B,D);for(var ee=!1,ae=B=A.V(B);ae!=-1;ae=A.V(ae)){if(ae==B){if(ee)break;ee=!0}if(A.D(ae,F),n&&c<a-D.x&&F.x-a>c||c<a-F.x&&D.x-a>c||!n&&c<-D.y&&F.y>c||c<-F.y&&D.y>c)do if(!(Math.abs(D.x-F.x)>=.5*x.S())){if(h.Gg.Tb(o)==2?($[0][0]=v.an(D.x,x),$[0][1]=D.y,$[1][0]=v.an(F.x,x),$[1][1]=F.y,h.cb.UV(),V.x=$[0][0]*m,V.y=$[0][1]*m,W.x=$[1][0]*m,W.y=$[1][1]*m):(V.x=D.x*m,V.y=D.y*m,W.x=F.x*m,W.y=F.y*m),W.x=6.283185307179586*(F.x-D.x)/x.S()+V.x,n){if(L.x=p,L.y=v.Iz(f,w,V,W,p,r),isNaN(L.y))break}else{if(L.x=v.Gz(f,w,V,W,r),isNaN(L.x))break;L.y=0}h.kb.xd(f,w,V.x,V.y,W.x,W.y,T,null,null,r);var me=T.u;h.kb.xd(f,w,V.x,V.y,L.x,L.y,T,null,null,r);var fe=T.u;h.Gg.Tb(o)==2?($[0][0]=L.x/m,$[0][1]=L.y/m,h.cb.UQ(),n?(N.y=$[0][1],N.x=a):(N.x=v.ps($[0][0],D.x,F.x,x),N.y=a)):n?(N.x=a,N.y=L.y/m):(N.x=v.ps(L.x/m,D.x,F.x,x),N.y=a),C[0]=0<me?h.P.Rk(fe/me,0,1):.5,C[0]!=0&&C[0]!=1&&(me=A.Na(ae),A.Wl(me,C,1),A.Db(A.V(me),N.x,N.y))}while(0);D.N(F)}}return A.Ke(u)},v.Gn=function(u,o,r,n,a){if(u.B())return u;var c=h.cb.bf(o);return v.Jp(u,r-180*c,360*c,o,n,a,!0)},v.Iz=function(u,o,r,n,a,c){if(3.141592653589793<=Math.abs(r.x-n.x)||!v.Tn(r.x,n.x,a))return NaN;if(r.x>n.x)var p=n;else p=r,r=n;n=new h.ha(0);var f=new h.ha(0),m=new h.ha(0);h.kb.xd(u,o,p.x,p.y,r.x,r.y,f,n,null,c);var w=f.u,x=0,$=1,T=new h.h;for(T.N(p);w*($-x)>1e-12*u;){var A=.5*(x+$);if(h.kb.pj(u,o,p.x,p.y,w*A,n.u,f,m,c),T.x=f.u,T.y=m.u,T.x==a)break;if(v.Tn(p.x,T.x,a))$=A;else{if(!v.Tn(r.x,T.x,a))return NaN;x=A}}return T.y},v.Tn=function(u,o,r){return u=k.Ep(u),o=k.lx(u,k.Ep(o)),(r=k.lx(u,k.Ep(r)))==0||0<o&&0<r&&r<=o||0>o&&0>r&&r>=o},v.an=function(u,o){var r=o.wa-o.pa;return o.Jt(u-Math.floor((u-o.pa)/r)*r)},v.ps=function(u,o,r,n){var a=new h.Oc;for(a.L(o,r),r=n.S(),u=Math.floor((u-o)/r)*r+u,a=a.tf();Math.abs(u-a)>Math.abs(u+r-a);)u+=r;return u},v.Gz=function(u,o,r,n,a){if(r.y>n.y)var c=n;else c=r,r=n;if((n=new h.Oc).L(c.y,r.y),!n.contains(0)||3.141592653589793<=Math.abs(c.x-r.x))return NaN;if(c.x==r.x)return c.x;var p=new h.ha(0),f=new h.ha(0),m=new h.ha(0);h.kb.xd(u,o,c.x,c.y,r.x,r.y,f,p,null,a);var w=f.u,x=0,$=1,T=new h.h;for(T.N(c);w*($-x)>1e-12*u;){var A=.5*(x+$);if(h.kb.pj(u,o,c.x,c.y,w*A,p.u,f,m,a),T.x=f.u,T.y=m.u,n.L(c.y,T.y),T.y==0)break;if(n.contains(0))$=A;else{if(n.L(r.y,T.y),!n.contains(0))return NaN;x=A}}return T.x},v.Jp=function(u,o,r,n,a,c,p){var f=new h.l;if(u.A(f),f.B())return u;var m=new h.Oc;f.en(m);var w=new h.Oc;if(w.L(o,o+r),w.contains(m)&&w.wa!=m.wa)return u;var x=new h.l;x.L(f);var $=u.K();if($==33)return((f=(x=a?u:u.Pf()).Mg())<w.pa||f>=w.wa||p&&f==w.wa)&&(f+=Math.ceil((w.pa-f)/r)*r,f=w.Jt(f),x.WB(f)),x;if($==550){for(n=(x=a?u:u.Pf()).vb(0),$=2*x.I(),u=!1,a=0;a<$;a+=2)((f=n.read(a))<w.pa||f>=w.wa||p&&f==w.wa)&&(u=!0,f+=Math.ceil((w.pa-f)/r)*r,f=w.Jt(f),n.write(a,f));return u&&x.Qc(1993),x}if(w.contains(m))return u;if($==197)return r=a?u:u.Pf(),f.Fa(x),r.Yo(f),r;var T=.1*Math.max(f.da(),f.S());for(x.X(0,T),p=u,w=n.Yd(0),u=h.Hh.local(),a=new h.Ed;;){var A=Math.floor((m.pa-o)/r),C=Math.ceil((m.wa-o)/r);if(!(3<C-A))break;A=Math.floor(.5*(C+A)),x.v=f.v-T,x.C=o+r*A;var N=h.Vd.clip(p,x,w,c);x.v=x.C,x.C=f.C+T;var L=h.Vd.clip(p,x,w,c);a.gg((A-C)*r,0),L.Pc(a),$==1736?p=u.W(N,L,n,null):(p=N).add(L,!1),p.A(f),f.en(m)}for(x.v=o,x.C=o+r,(o=new h.l).L(x),o.X(w,0),(o=Math.floor((f.v-x.v)/r)*r)!=0?(x.move(o,0),a.gg(-o,0)):a.KB(),o=$==1607?new h.Ua(p.description):new h.Ea(p.description),c=new h.l,m=new h.l;f.C>x.v;)(T=h.Vd.clip(p,x,w,0)).A(m),($==1607?!T.B()&&(m.S()>w||m.da()>w):!T.B()&&($!=1736||m.S()>w))&&(T.Pc(a),T.A(m),o.A(c),c.X(w,w),c.isIntersecting(m)&&$==1736?o=u.W(o,T,n,null):o.add(T,!1)),x.move(r,0),a.shift(-r,0);return o},v.NI=function(u,o,r,n){var a=new h.de(r.description);a.Gd(r,0,-1),a=h.cb.Ah(a,u,o);var c=r.I();if(n.Pa(),!h.cb.Xc(u)||c!=a.I())return!1;var p=new h.l;r.A(p);var f=new h.l;if(a.A(f),p=p.S(),f=f.S(),p!=0&&f!=0){if(f/=p,u=h.cb.hh(o).S()/h.cb.hh(u).S(),1e-10<Math.abs(f/u-1))return!1}else if(p!=0||f!=0)return!1;for(n.add(r,!1),r=0;r<c;r++)u=a.Oa(r),n.Db(r,u);return!0},v.Jz=function(){throw h.i.Fe()},v}()}(G||(G={})),function(h){var k,v,u;(v=k=h.ti||(h.ti={}))[v.Clip=0]="Clip",v[v.DontClip=1]="DontClip",v[v.PannableFold=2]="PannableFold",function(o){o[o.Geodesic=0]="Geodesic",o[o.Loxodrome=1]="Loxodrome",o[o.GreatElliptic=2]="GreatElliptic",o[o.NormalSection=3]="NormalSection",o[o.ShapePreserving=4]="ShapePreserving"}(u=h.OK||(h.OK={})),h.Ab=function(){function o(){}return o.yv=function(r,n,a){if(a||0<n){for(r=r.toString(h.Tc.PE_STR_NAME_CANON|h.Tc.PE_STR_AUTH_NONE),n=[],a=0;a<r.length;a++)n[a]="a"<=r[a]&&"z">=r[a]?n[a]=r[a].toUpperCase():r[a];return n.join()}return r.toString(h.Tc.PE_STR_AUTH_TOP)},o.wr=function(r,n,a,c){var p=c.length,f=a.I();if(f!=0){var m=a.vb(0),w=Math.min(f,p),x=0,$=r.fh();isNaN(n)&&(n=0);for(var T=r.Xc(),A=179*(r=T?r.tc().Le().S():0)/360;0<f;){if(m.oB(x<<1,w,c),h.fj.projToGeogCenter($,w,c,n),T)for(var C=0;C<w;C++){var N=c[C][0]-n,L=h.mc.sign(N),D=m.read(2*(x+C));0>L*h.mc.sign(D)&&Math.abs(N)>A&&(c[C][0]+=-L*r)}m.nC(x<<1,w,c),x+=w,f-=w,w=Math.min(f,p)}a.Qc(1993)}},o.AL=function(r,n,a,c){var p=0,f=r.fh();isNaN(p)&&(p=0);var m=r.Xc(),w=r.bf();r=360*w,w*=179;for(var x=c.length,$=0;$<a;){for(var T=$;T<a&&n[T].isNaN();++T)$++;var A=Math.min(x,a-$);if(0<A){T=1;for(var C=$+1;T<A;++T,++C)if(n[C].isNaN()){A=T;break}if(h.ta.Dy(c,n,$,A),h.fj.projToGeogCenter(f,A,c,p),m)for(T=0,C=$;T<A;++T,++C){var N=n[C].x,L=c[T][0]-p,D=h.mc.sign(L);0>D*h.mc.sign(N)&&Math.abs(L)>w&&(c[T][0]-=D*r)}h.ta.Cy(n,$,c,A),$+=A}}},o.Jx=function(r,n,a){var c=a.length,p=n.I();if(!(1>p)){var f=n.vb(0),m=Math.min(p,c),w=0,x=r.fh(),$=r.Xc(),T=$?r.Le().S():0,A=179*T/360,C=0;for($&&(C=r.Ai());0<p;){if(f.oB(w<<1,m,a),h.fj.geogToProj(x,m,a),$)for(r=0;r<m;r++){var N=a[r][0],L=h.mc.sign(N),D=f.read(2*(w+r))-C;0>L*h.mc.sign(D)&&Math.abs(N)>A&&(a[r][0]+=-L*T)}f.nC(w<<1,m,a),w+=m,p-=m,m=Math.min(p,c)}n.Qc(1993)}},o.zL=function(r,n,a,c){if(a!=0){var p=r.fh(),f=r.Xc(),m=f?r.Le().S():0,w=179*m/360,x=0;for(f&&(x=r.Ai()),r=0;r<a;){for(var $=r;$<a&&n[$].isNaN();++$)r++;var T=Math.min(c.length,a-r);if(0<T){$=1;for(var A=r+1;$<T;++$,++A)if(n[A].isNaN()){T=$;break}if(h.ta.Dy(c,n,r,T),h.fj.geogToProj(p,T,c),f)for($=0,A=r;$<T;$++){var C=c[$][0],N=h.mc.sign(C);0>N*h.mc.sign(n[A].x-x)&&Math.abs(C)>w&&(c[$][0]-=N*m)}h.ta.Cy(n,r,c,T),r+=T}}}},o.vr=function(r,n,a,c){var p=n.I();if(p!=0){var f=n.vb(0),m=r.ef,w=r.Zf,x=m.tc().Sp(),$=w.tc().Sp(),T=m.bf(),A=w.bf();if((r=r.Xf)==null||r.count()==0){for(a=x/$,c=(m.Wp()-w.Wp())*A,$=-90*T,r=90*T,x=!1,A=1,m=2*p;A<m;)T=f.get(A),(w=h.P.Rk(T,$,r))!=T&&(f.set(A,w),x=!0),A+=2;if(c!=0||a!=1)for(x=!0,$=new h.h,A=0;A<p;A++)f.uc(2*A,$),$.x*=a,$.x+=c,$.y*=a,f.Ut(2*A,$);x&&n.Qc(1993)}else{m=c.length,w=Math.min(p,m);var C=h.P.lg(w),N=null,L=0,D=NaN,F=NaN,V=360*A,W=A/T;a&&(F=90*A,D=89.9*T,N=h.P.lg(w));for(var K=!0,B=0;p!=0;){for(T=!1,f.oB(L<<1,w,c),A=0;A<w;A++)C[A]=c[A][0];if(a)for(A=0;A<w;A++){var ee=Math.abs(c[A][1])-D;0<ee&&(T=c[A][1],c[A][1]=h.mc.Dn(D,T),N[A]=h.mc.Dn(ee,T),T=!0)}for(A=c[0][0],r.transform(c,w,x,$),K&&(B=c[0][0]-W*A,K=!1),A=0;A<w;A++)ee=c[A][0]-C[A]*W-B,200<Math.abs(ee)&&(c[A][0]=0<ee?c[A][0]-V:c[A][0]+V);if(T){for(A=0;A<w;A++)N[A]!=0&&(c[A][1]+=W*N[A],c[A][1]>F?c[A][1]=F:c[A][1]<-F&&(c[A][1]=-F));for(T=0;T<w;T++)N[T]=0}f.nC(L<<1,w,c),L+=w,p-=w,w=Math.min(p,m)}n.Qc(1993)}}},o.yL=function(r,n,a,c){if(r.nw)c=90*r.ef.bf(),h.ta.WJ(n,a,-c,c);else{var p=r.Xf,f=r.ef,m=r.Zf;r=f.Yr();var w=m.Yr(),x=f.bf(),$=90*x,T=m.bf();if(p==null||p.count()==0){if(c=r/w,p=(f.Wp()-m.Wp())*T,h.ta.WJ(n,a,-$,$),p!=0||c!=1)for(T=0;T<a;T++)n[T].x*=c,n[T].x+=p,n[T].y*=c}else{f=Math.min(a,c.length),$=h.P.lg(f),m=360*T,x=T/x;for(var A=!0,C=0,N=0;a!=0;){for(T=0;T<f;T++)$[T]=n[T+N].x;for(T=n[0].x,h.ta.Dy(c,n,N,f),p.transform(c,f,r,w),h.ta.Cy(n,N,c,f),A&&(C=n[0].x-x*T,A=!1),T=0;T<f;T++){var L=n[N+T].x-$[T]*x-C;200<Math.abs(L)&&(n[N+T].x=0<L?n[N+T].x-m:n[N+T].x+m)}N+=f,a-=f,f=Math.min(a,c.length)}}}},o.ev=function(r,n){return r=r.hh(),isNaN(n)||r.Ku(n,0),r},o.MQ=function(r,n,a,c,p,f,m,w){for(var x=o.ev(c,p),$=x.S(),T=$/360,A=o.hE*T,C=r.vb(0),N=n.Xc(),L=N?$/n.Le().S():0,D=!1,F=new h.Ea(a.description),V=0,W=a.ea();V<W;++V){var K=N,B=new h.Ua(a.description);if(B.addPath(a,V,!0),m!=0){var ee=o.GD(!0,B,x.H-w,x.H,m);(D=D||ee)&&(K=!1)}var ae=-1;K&&(ae=r.Ca(V));var me=B.vb(0),fe=B.I(),pe=0,be=me.read(0),Pe=0;ee=3*c.Yd(0);var Re=!1,ut=new h.h;ut.Sc();var ht=new h.h;ht.Sc();for(var oi=!1,Tt=1;Tt<fe;++Tt){var Ie=h.h.construct(me.Bg(2*Tt),me.Bg(2*Tt+1)),mt=Ie.x,et=mt+pe,Gt=et-be;if(Ie.x=et,Math.abs(Gt)>A){if(K){var jt=ae+(Tt+1<fe?Tt:0),Yt=C.read(2*(ae+Tt-1));jt=(C.read(2*jt)-Yt)*L,Math.abs(Gt-jt)>1*T&&(K=!1)}K||(et=mt+(pe-=h.mc.Dn($,et-be)),++Pe,oi=pe!=0,Ie.x=et)}else Re||h.ta.sG(ht,ut,Ie,ee)&&(Re=!0);oi&&me.write(2*Tt,et),be=et,ht.N(ut),ut.N(Ie)}0<Pe&&B.Qc(1993),K=B.Oa(0),fe=B.Oa(fe-1),B=h.h.ub(K,fe)<ee?o.mQ(B,c,p,f,Re):o.nQ(r,V,B,c,p),F.add(B,!1)}return p=c.Yd(0),a=x.S()/180,o.Kt(F,x,.1*p,!1),F=F!=(p=h.si.clip(F,x,p,a,f)),r=r.He(),m=0,0<(w=p.He())&&0>r?m=1:0>=w&&0<r&&(w==0?(w=NaN,n.Tb()==2?w=n.ol().He():n.Tb()==1&&(w=n.Le().oF()),r>.99*w&&(m=-1)):m=-1),m!=0&&((n=new h.Ea(p.description)).vp(x),(n=h.Zl.local().W(n,a,f)).add(p,!1),F=!0,p=n),F&&(p=h.$l.local().W(p,c,!1,f)),p},o.nQ=function(r,n,a,c,p){var f=a.I(),m=a.Oa(0),w=a.Oa(f-1);p=(c=o.ev(c,p)).S(),m=h.mc.sign(w.x-m.x);var x=new h.l;a.yc(x);var $=c.gk();if(w=$-p,$+=p,0<=m){var T=Math.ceil((w-x.v)/p);for(T*=p;w>x.v+T;)T+=p;for(;w<x.C+T;)T-=p;var A=T;720<x.S()&&($=w+360*Math.ceil(x.S()/360))}else{for(T=Math.ceil(($-x.C)/p),T*=p;$<x.C+T;)T-=p;for(;$>x.v+T;)T+=p;A=T,720<x.S()&&(w=$-360*Math.ceil(x.S()/360))}T=m*p;var C=h.l.construct(x.v,x.G,x.C,x.H);C.move(A,0);var N=new h.Ed;N.gg(A,0),a.Pc(N),(x=new h.Ua(a.description)).add(a,!1),A=a.Oa(f-1),p=0;for(var L=x.Oa(0).x;0<m?C.C<$:C.v>w;)C.move(T,0),N.Lb=T,a.Pc(N),L+=T,c.v<=L&&c.C>=L&&(p=x.I()-1),a.Db(0,A),A=a.Oa(f-1),x.Fr(a,0,0,f-1,!1);return a=new h.Ea(x.description),f=0<r.Kr(n),a.add(x,!1),r=x.Oa(0),w=x.Oa(x.I()-1),n=a.ea()-1,(0>m?f:!f)?(m=h.h.construct(w.x,c.H),a.Di(m),m=h.h.construct(c.gk(),c.H),a.Di(m),c=h.h.construct(r.x,c.H)):(m=h.h.construct(w.x,c.G),a.Di(m),m=h.h.construct(c.gk(),c.G),a.Di(m),c=h.h.construct(r.x,c.G)),a.Di(c),a.pG(0,n,0),a.cO(p),a},o.mQ=function(r,n,a,c,p){var f=new h.Ea(r.description);f.add(r,!1),f.xB(0,f.I()-1);var m=new h.l;f.yc(m);var w=(a=o.ev(n,a)).S(),x=Math.ceil((a.v-m.v)/w);for(x*=w;a.v>m.v+x;)x+=w;for(;a.v<m.C+x;)x-=w;if((x+=w)!=0){m.move(x,0);var $=new h.Ed;$.gg(x,0),f.Pc($)}if(a.v<=m.v&&a.C>m.C)return p&&(p=f.He(),n=(f=h.$l.local().W(f,n,!0,c)).He(),(n=h.mc.sign(p)!=h.mc.sign(n))&&f.gJ()),f;for((r=new h.Ea(r.description)).add(f,!1),p=p||m.S()>w-n.Yd(0);m.v<a.C;)m.move(w,0),($=new h.Ed).gg(w,0),f.Pc($),r.add(f,!1);return p&&(p=r.He(),r.Zo(1),n=(r=h.$l.local().W(r,n,!0,c)).He(),(n=h.mc.sign(p)!=h.mc.sign(n))&&r.gJ()),r},o.GD=function(r,n,a,c,p){for(var f=n.vb(0),m=n.I(),w=!1,x=0;x<m;x++){var $=h.h.construct(f.Bg(2*x),f.Bg(2*x+1));if((1&p)!=0&&$.y>=a){w=!0;break}if((2&p)!=0&&$.y<=-a){w=!0;break}}if(!w)return!1;f=!1,r&&(f=n.On(0)),m=(r=new h.hd).Ib(n),w=r.Ob(m);var T=-1,A=!0,C=new h.h;C.Sc(),x=new h.Ta;for(var N=-1,L=r.Ya(w);L!=-1;L=r.V(L)){$=r.Oa(L);var D=(1&p)!=0&&90<=$.y?1:0;if(D|=(2&p)!=0&&$.y<=-a?2:0,0<T&&T!=D){if(C.x!=$.x){C.x=$.x,r.Wi(r.Na(L),x);var F=r.xj(w,L,x);r.mf(F,C)}if(f)for(N=N!=-1?r.V(N):r.Ya(w),F=r.Na(L);N!=F;)N=r.pd(N,!1);N=-1}0<D&&($.y=h.mc.Dn(c,$.y),r.mf(L,$),A||T==D||($.x!=C.x?(r.Wi(L,x),F=r.xj(w,L,x),r.Db(F,C.x,$.y),N=F):N=L)),T=D,C=$,A=!1}if(f){if(N!=-1)for(N=r.V(N);N!=-1;)N=r.pd(N,!1);a=r.Ya(w),r.hq(a,r.sj(w))||(r.Wi(a,x),r.xj(w,-1,x))}return r.Ke(m).copyTo(n),!0},o.Hz=function(r,n,a,c){var p=r;if(p.B()||a==k.DontClip)return p;var f=p.K();if(f==33)return p=[(c=p).D()],o.qG(p,1,n,a),p[0].isNaN()?c.Pa():c.Db(p[0]),r;var m=(r=n.tc()).bf(),w=90*m,x=180*m,$=360*m,T=n.Ai(),A=.5*m,C=new h.l;p.A(C);var N=n.Wr(),L=n.HQ(),D=N.K()==197;if(n=new h.l,N.A(n),a==k.PannableFold&&(a=r.Le().S(),n.v=T-.5*a,n.C=n.v+a),C.G<-w||C.H>w){if(new h.l().L(C.v-m,-w,C.C+m,w),(p=h.si.Pu(p,n,r,NaN,0,c)).B())return p;p.A(C)}if(L&&(n.H<C.G||n.G>C.H))return p.Ja();if(C.S()>$&&(p=o.Jp(p,T-x,$,r,!0,0,!0,c)).A(C),(w=o.XN(C.v,C.C,n.v,n.C,$))!=0&&C.move(w,0),C.C>n.C||C.v<n.v){if(C.C>n.C)for(;C.v>=n.C;)C.move(-$,0),w-=$;for(;C.v<n.C-$;)C.move($,0),w+=$}if(a=h.ta.Iu(r,N),w!=0&&((m=new h.Ed).gg(w,0),p.Pc(m)),L){if(D&&n.contains(C))return p;for(L=[null,null],w=0;2>w;w++){if(D?m=h.ba.Ic(f)?h.si.clip(p,n,a,A,c):h.si.clip(p,n,a,0,c):(m=h.Wk.local().W(p,N,r,c))==N&&(m=h.ba.ig(m)),n.v<=C.v&&n.C>=C.C||n.v>=C.v&&n.C<=C.C)return m;L[w]=m,w==0&&(C.move(-$,0),(m=new h.Ed).gg(-$,0),p.Pc(m))}if(f==550)L[0].Gd(L[1],0,-1);else if(h.ba.Ic(f))L[0].add(L[1],!1);else{if(f!=33)throw h.i.ga("intersect_with_GCS_horizon: unexpected geometry type");L[0].B()&&(L[0]=L[1])}return L[0]}if(n.H<C.G||n.G>C.H)return p;for(f=0;!p.B()&&C.C>n.v;)f!=0&&((m=new h.Ed).gg(f,0),p.Pc(m)),h.ej.local().W(4,p,N,r,c)||N==(p=h.lp.local().W(p,N,r,c))&&(p=h.ba.ig(p)),f!=0&&((A=new h.Ed).gg(-f,0),p.Pc(A)),f-=$,C.move(-$,0);return p},o.qG=function(r,n,a,c){if(n!=0&&c!=k.DontClip)if(c==k.PannableFold){c=a.zR();for(var p=n,f=0;f<n;f++)(r[f].y>c.H||r[f].y<c.G)&&(r[f].Sc(),p--);p!=0&&o.bv(r,n,c.v,c.S())}else{var m=90*(c=a.bf()),w=180*c;for(c*=360,p=n,f=0;f<n;f++)(r[f].y>m||r[f].y<-m)&&(r[f].Sc(),p--);if(p!=0){(p=new h.l).ax(r,n),m=a.Wr();var x=a.jv();f=m.K()==197;var $=new h.l;if(m.A($),!x||!($.H<p.G||$.G>p.H))if(x)if(o.bv(r,n,$.gk()-w,c),p=n,f)for(f=0;f<n;f++)$.contains(r[f])||(r[f].Sc(),p--);else for(a=h.ta.Iu(a.tc(),m),f=0;f<n;f++)(w=h.jd.Zd(m,r[f],a)!=0)||(r[f].Sc(),p--);else for(o.bv(r,n,-w,c),p=n,a=h.ta.Iu(a.tc(),m),f=0;f<n;f++)(w=r[f]).isNaN()&&p--,x=o.lE(w.x,$.v,$.C,c),w.x+=x,(w=h.jd.Zd(m,w,a)!=0)&&(r[f].Sc(),p--)}}},o.Jp=function(r,n,a,c,p,f,m,w){var x=r.K(),$=n+a;if(x===33){var T=(c=p?r:r.Pf()).Mg();return(T<n||T>=$||m&&T==$)&&(T+=Math.ceil((n-T)/a)*a,T=h.P.Rk(T,n,$),c.WB(T)),c}if(r.B()||(T=new h.l,r.A(T),T.B()))return r;var A=new h.Oc;T.en(A);var C=new h.Oc;if(C.L(n,$),C.contains(A))return r;if(($=new h.l).L(T),x===550){for(w=(c=p?r:r.Pf()).vb(0),x=2*c.I(),$=!1,n=0;n<x;n+=2)((T=w.read(n))<C.pa||T>=C.wa||m&&T==C.wa)&&($=!0,T+=Math.ceil((C.pa-T)/a)*a,T=C.Jt(T),w.write(n,T));return $&&c.Qc(1993),c}if(x==197)return a=p?r:r.Pf(),T.Fa($),a.Yo(T),a;var N=.1*Math.max(T.da(),T.S());for($.X(0,N),m=r,C=c.Yd(0),r=h.Hh.local(),p=new h.Ed;;){var L=Math.floor((A.pa-n)/a),D=Math.ceil((A.wa-n)/a);if(!(3<D-L))break;L=Math.floor(.5*(D+L)),$.v=T.v-N,$.C=n+a*L;var F=h.si.clip(m,$,C,f,w);$.v=$.C,$.C=T.C+N;var V=h.si.clip(m,$,C,f,w);p.gg((L-D)*a,0),V.Pc(p),x==1736?m=r.W(F,V,c,null):(m=F).add(V,!1),m.A(T),T.en(A)}for($.v=n,$.C=n+a,(n=new h.l).L($),n.X(C,0),(n=Math.floor((T.v-$.v)/a)*a)!=0?($.move(n,0),p.gg(-n,0)):p.KB(),n=x==1607?new h.Ua(m.description):new h.Ea(m.description),f=new h.l,A=new h.l;T.C>$.v;)(N=h.si.clip(m,$,C,0,w)).A(A),(x==1607?!N.B()&&(A.S()>C||A.da()>C):!N.B()&&(x!=1736||A.S()>C))&&(N.Pc(p),N.A(A),n.A(f),f.X(C,C),f.isIntersecting(A)&&x==1736?n=r.W(n,N,c,null):n.add(N,!1)),$.move(a,0),p.shift(-a,0);return n},o.bv=function(r,n,a,c){for(var p=a+c,f=0;f<n;f++){var m=r[f].x;a<=m&&m<p||!(m<a||m>p||m==p)||(m+=Math.ceil((a-m)/c)*c,m=h.P.Rk(m,a,p),r[f].x=m)}},o.Gn=function(r,n,a,c,p,f){if(!n.Xc())throw h.i.ga("fold_into_360_degree_range");if(r.B())return r;if(n.Tb()==2){a=n.qv();var m=n.pv()-a}else{var w=n.bf();m=360*w,a-=180*w}return o.Jp(r,a,m,n,c,p,!0,f)},o.iF=function(r,n,a,c){if(a.Tb()==2)c=a.qv(),a=a.pv()-c;else{var p=a.bf();a=360*p,c-=180*p}o.bv(r,n,c,a)},o.mj=function(r,n){var a=n.Le();if(r.K()==33){var c=r.jh();return a.G<=c&&c<=a.H?r:r.Ja()}c=new h.l,r.A(c);var p=new h.l;return p.L(a),p.v=c.v,p.C=c.C,p.X(.01*p.da(),0),a=h.ta.oy(n,c),p.contains(c)?r:h.si.clip(r,p,a,0,null)},o.kr=function(r,n,a){return r>n.C&&r-n.C<a?n.C:r<n.v&&n.v-r<a?n.v:r},o.tX=function(r,n,a,c){c.x=o.kr(r.x,n,a),c.y=r.y},o.sX=function(r,n,a,c){for(var p=0;p<n;p++)r[p].y<a.G||r[p].y>a.H?r[p].Sc():r[p].x=o.kr(r[p].x,a,c)},o.Kt=function(r,n,a,c){if(!r.B()){var p=r.K();if(!c||p!=1736)if(h.ba.yj(p)){c=r.vb(0),p=0;for(var f=r.I();p<f;p++){var m=c.read(2*p),w=o.kr(m,n,a);w!=m&&c.write(2*p,w)}r.Qc(1993)}else if(p==197)c=new h.l,r.A(c),c.v=o.kr(c.v,n,a),c.C=o.kr(c.C,n,a),r.Yo(c);else{if(p!=33)throw h.i.ga("internal error");r.WB(o.kr(r.Mg(),n,a))}}},o.lS=function(r,n,a,c){var p=new h.hd,f=p.Ib(r);return r=h.ta.Iu(n,r),o.ls(p,f,n,r,a,!0,c),p.Ke(f)},o.ls=function(r,n,a,c,p,f,m){if(!a.Xc())throw h.i.O("invalid call");var w=a.Le(),x=a.tc(),$=x.fh().getDatum().getSpheroid();x=x.Id().bi;var T=$.getFlattening();$=$.getAxis(),T*=2-T;var A=new h.Oc;w.en(A);var C=null,N=[[0,0],[0,0]];if(a.Tb()==2?(C=a.fh(),f?(N[0][0]=o.an(m,A),N[0][1]=w.Lp(),h.fj.projToGeog(C,1,N),w=N[0][0]*x):(N[0][0]=w.gk(),N[0][1]=m,h.fj.projToGeog(C,1,N),w=N[0][1]*x)):w=m*x,!f&&w!=0&&p!=u.GreatElliptic)throw h.i.ga("invalid argument");var L=new h.ha,D=[0],F=new h.h,V=new h.h,W=new h.h,K=[null,null],B=new h.h,ee=new h.h,ae=new h.h,me=new h.h;for(n=r.Ob(n);n!=-1;n=r.Sb(n)){var fe=r.Ya(n);r.D(fe,B);for(var pe=!1,be=fe=r.V(fe);be!=-1;be=r.V(be)){if(be==fe){if(pe)break;pe=!0}if(r.D(be,ee),f&&(c<m-B.x&&ee.x-m>c||c<m-ee.x&&B.x-m>c)||!f&&(m!=0||c<-B.y&&ee.y>c||c<-ee.y&&B.y>c))do if(!(Math.abs(B.x-ee.x)>=.5*A.S())){if(a.Tb()==2?(N[0][0]=o.an(B.x,A),N[0][1]=B.y,N[1][0]=o.an(ee.x,A),N[1][1]=ee.y,h.fj.projToGeogCenter(C,2,N,0),ae.x=N[0][0]*x,ae.y=N[0][1]*x,me.y=N[1][1]*x):(ae.x=B.x*x,ae.y=B.y*x,me.y=ee.y*x),me.x=2*(ee.x-B.x)*Math.PI/A.S()+ae.x,f){if(V.x=w,V.y=o.Iz($,T,ae,me,w,p),isNaN(V.y))break;K[0]=V;var Pe=1}else if(p==u.GreatElliptic){var Re=[0,0];if((Pe=h.Mx.Jz(T,ae,me,w,Re))==0)break;V.x=Re[0],V.y=w,K[0]=V,Pe==2&&(W.x=Re[1],W.y=w,K[1]=W)}else{if(V.x=o.Gz($,T,ae,me,p),isNaN(V.x))break;V.y=0,K[0]=V,Pe=1}var ut=-1;for(Re=0;Re<Pe;Re++){h.kb.xd($,T,ae.x,ae.y,me.x,me.y,L,null,null,p);var ht=L.u;h.kb.xd($,T,ae.x,ae.y,K[Re].x,K[Re].y,L,null,null,p);var oi=L.u;if(a.Tb()==2?(N[0][0]=K[Re].x/x,N[0][1]=K[Re].y/x,h.fj.geogToProj(C,1,N),f?(F.y=N[0][1],F.x=m):(F.x=o.ps(N[0][0],B.x,ee.x,A),F.y=m)):f?(F.x=m,F.y=K[Re].y/x):(F.x=o.ps(K[Re].x/x,B.x,ee.x,A),F.y=m),D[0]=0<ht?h.P.Rk(oi/ht,0,1):.5,D[0]==0||D[0]==1)break;ut>D[0]||(ut=r.Na(be),r.Wl(ut,D,1),r.Db(r.V(ut),F.x,F.y),ut=D[0])}}while(0);B.N(ee)}}},o.an=function(r,n){var a=n.wa-n.pa;return n.Jt(r-Math.floor((r-n.pa)/a)*a)},o.ps=function(r,n,a,c){var p=new h.Oc;for(p.L(n,a),a=c.S(),r=Math.floor((r-n)/a)*a+r,p=p.tf();Math.abs(r-p)>Math.abs(r+a-p);)r+=a;return r},o.Tn=function(r,n,a){return r=h.sr.Ep(r),n=h.sr.lx(r,h.sr.Ep(n)),(a=h.sr.lx(r,h.sr.Ep(a)))==0||0<n&&0<a&&a<=n||0>n&&0>a&&a>=n},o.Iz=function(r,n,a,c,p,f){if(f==u.GreatElliptic)return h.Mx.IS(n,a,c,p);if(Math.abs(a.x-c.x)>=Math.PI||!o.Tn(a.x,c.x,p))return NaN;if(a.x>c.x)var m=c;else m=a,a=c;c=new h.ha;var w=new h.ha,x=new h.ha;h.kb.xd(r,n,m.x,m.y,a.x,a.y,w,c,null,f);var $=w.u,T=0,A=1,C=new h.h;for(C.N(m);$*(A-T)>1e-12*r;){var N=.5*(T+A);if(h.kb.pj(r,n,m.x,m.y,$*N,c.u,w,x,f),C.x=w.u,C.y=x.u,C.x==p)break;if(o.Tn(m.x,C.x,p))A=N;else{if(!o.Tn(a.x,C.x,p))return NaN;T=N}}return C.y},o.Gz=function(r,n,a,c,p){if(p==u.GreatElliptic)return r=[0,0],h.Mx.Jz(n,a,c,0,r),r[0];if(a.y>c.y)var f=c;else f=a,a=c;if((c=new h.Oc).L(f.y,a.y),!c.contains(0)||Math.abs(f.x-a.x)>=Math.PI)return NaN;if(f.x==a.x)return f.x;var m=new h.ha,w=new h.ha,x=new h.ha;h.kb.xd(r,n,f.x,f.y,a.x,a.y,w,m,null,p);var $=w.u,T=0,A=1,C=new h.h;for(C.N(f);$*(A-T)>1e-12*r;){var N=.5*(T+A);if(h.kb.pj(r,n,f.x,f.y,$*N,m.u,w,x,p),C.x=w.u,C.y=x.u,c.L(f.y,C.y),C.y==0)break;if(c.contains(0))A=N;else{if(c.L(a.y,C.y),!c.contains(0))return NaN;T=N}}return C.x},o.NI=function(r,n,a,c){if(!r.ef.Xc())return!1;var p=new h.de(n.description);if(p.Gd(n,0,-1),c=h.Fx.local().W(p,r,c),p=n.I(),a.Pa(),p!=c.I())return!1;var f=new h.l;n.A(f);var m=new h.l;if(c.A(m),f=f.S(),m=m.S(),f!=0&&m!=0){if(m/=f,r=r.Zf.hh().S()/r.ef.hh().S(),1e-10<Math.abs(m/r-1))return!1}else if(f!=0||m!=0)return!1;for(a.add(n,!1),n=new h.h,r=0;r<p;r++)c.D(r,n),a.Db(r,n);return!0},o.iN=function(r,n){return(r%=360*n)>=180*n&&(r-=360*n),r},o.LI=function(r,n,a,c){if(a==k.Clip){var p=n.ol();p.K()==197?(a=new h.l,p.A(a),p=h.ta.oy(n,a),r=h.si.clip(r,a,p,5e4*n.rm(),c)):h.ej.local().W(1,p,r,n,c)||(r=h.Wk.local().W(r,p,n,c))==p&&(r=h.Vk.ig(r))}else n.Xc()&&(c=new h.l,r.yc(c),n.Le().contains(c)||(o.Kt(r,n.Le(),n.Yd(0),!0),a==k.PannableFold&&(r=o.mj(r,n)),r=o.Gn(r,n,0,!0,1e5*n.rm(),null)));return r},o.PD=function(r,n,a){var c=n.Xr();if(c==null)return r;var p=(n=n.tc()).Le().S(),f=new h.l;r.yc(f);var m=new h.Oc;f.en(m),f=c.Ha(),c=null;for(var w=new h.Ed;f.ab();)for(;f.Ia();){var x=f.ia(),$=x.Ug(0,0),T=new h.Oc;for(T.L($.pa,$.wa),$=0;T.wa>m.pa;)T.move(-p),--$;for(;T.pa<=m.wa;){if(T.isIntersecting(m)){c==null&&(c=new h.Ua);var A=h.zb.VO(x.ac(),x.xc());$!=0&&(w.gg($*p,0),A.Pc(w)),c.oc(A,!0)}T.move(p),++$}}return c!=null?(n=h.ta.ZN(n,c),n=h.ta.Gr(n),h.au.dP(r,c,n,a)):r},o.XN=function(r,n,a,c,p){return r>=a&&n<=c?0:o.lE(.5*(n+r),a,c,p)},o.lE=function(r,n,a,c){return h.mc.round((.5*(a+n)-r)/c)*c},o.NQ=function(r,n,a,c,p,f,m,w){var x=o.ev(c,p),$=x.S(),T=$/360,A=o.hE*T,C=r.vb(0),N=n.Xc(),L=N?$/n.Le().S():0;n=r.Ja();for(var D=0,F=a.ea();D<F;++D){var V=N,W=new h.Ua(a.description);W.addPath(a,D,!0);var K=a.ec(D);m!=0&&(K=o.GD(K,W,x.H-w,x.H,m))&&(V=!1);var B=-1;K=W.I();var ee=!1;V&&(B=r.Ca(D),ee=r.ec(D));var ae=W.vb(0),me=0,fe=ae.read(0),pe=0,be=3*c.Yd(0),Pe=!1,Re=new h.h;Re.Sc();var ut=new h.h;ut.Sc();for(var ht=!1,oi=1;oi<K;++oi){var Tt=h.h.construct(ae.Bg(2*oi),ae.Bg(2*oi+1)),Ie=Tt.x,mt=Ie+me,et=mt-fe;if(Tt.x=mt,Math.abs(et)>A){if(V){var Gt=B+oi-1,jt=B;(!ee||oi+1<K)&&(jt+=oi),Gt=C.read(2*Gt),jt=(C.read(2*jt)-Gt)*L,Math.abs(et-jt)>1*T&&(N=!1)}V||(mt=Ie+(me-=h.mc.Dn($,mt-fe)),++pe,ht=me!=0,Tt.x=mt)}else Pe||h.ta.sG(Re,ut,Tt,be)&&(Pe=!0);ht&&ae.write(2*oi,mt),fe=mt,Re.N(ut),ut.N(Tt)}pe!=0&&W.Qc(1993),V=W.Oa(0),K=W.Oa(K-1),h.h.ub(V,K),W=o.oQ(W,c,isNaN(p)?0:p,f),n.add(W,!1)}return r=c.Yd(0),a=x.S()/180,o.Kt(n,x,.1*r,!1),h.si.clip(n,x,r,a,f)},o.oQ=function(r,n,a,c){return o.Gn(r,n,a,!0,0,c)},o.FS=function(r,n,a,c){var p=r.K();if(p==1736)for(n=n!=null?n.Yd(0):0,p=0;p<c;p++)h.jd.Zd(r,a[p],n)!=1&&a[p].Sc();else{if(p!=197)throw h.i.O();for(p=0;p<c;p++)r.WO(a[p])||a[p].Sc()}},o.al=function(r,n,a,c){if(32>a)for(var p=new h.Ta,f=0;f<a;f++)p.Db(n[f]),r.al(p,c).D(n[f]);else{var m=new h.de;for(m.se(3),m.zD(n,a),p=m.vb(3),f=0;f<a;f++)p.write(f,f);for(f=r.al(m,c),r=f.vb(0),p=f.vb(3),c=h.h.construct(NaN,NaN),m=0;m<a;m++)n[m]=c;for(a=f.I(),f=0;f<a;f++)c=p.read(f),r.uc(2*f,n[c])}},o.$k=function(r,n,a,c){if(32>a)for(var p=new h.Ta,f=0;f<a;f++)p.Db(n[f]),r.$k(p,c).D(n[f]);else{var m=new h.de;for(m.se(3),m.zD(n,a),p=m.vb(3),f=0;f<a;f++)p.write(f,f);for(f=r.$k(m,c),r=f.vb(0),p=f.vb(3),c=h.h.construct(NaN,NaN),m=0;m<a;m++)n[m]=c;for(a=f.I(),f=0;f<a;f++)c=p.read(f),r.uc(2*f,n[c])}},o.hE=210,o}()}(G||(G={})),function(h){var k;(k=h.ML||(h.ML={}))[k.rightSide=1]="rightSide";var v=function(){function u(o,r,n){this.Cs=new h.h,o===void 0?this.Jo=-1:(this.Cs.N(o),this.Jo=r,this.La=n,this.ow=0)}return u.prototype.OJ=function(o){this.ow=o?1|this.ow:-2&this.ow},u.prototype.B=function(){return 0>this.Jo},u.prototype.az=function(){if(this.B())throw h.i.ga("invalid call");return new h.Ta(this.Cs.x,this.Cs.y)},u.prototype.Va=function(){if(this.B())throw h.i.ga("invalid call");return this.Jo},u.prototype.cz=function(){if(this.B())throw h.i.ga("invalid call");return this.La},u.prototype.Nz=function(){return(1&this.ow)!=0},u.prototype.ay=function(o,r,n,a){this.Cs.x=o,this.Cs.y=r,this.Jo=n,this.La=a},u}();h.bm=v}(G||(G={})),function(h){var k=function(){function u(){}return u.prototype.Vo=function(o,r){this.uh.resize(0),this.Ji.length=0,this.tk=-1,o.yc(this.Ek),this.Ek.X(r,r),this.Ek.isIntersecting(this.Gb.Da)?((this.ws=h.ba.zd(o.K()))?(this.LH=o.ac(),this.KH=o.xc(),this.ra=r):this.ra=NaN,this.uh.add(this.Gb.kf),this.Ji.push(this.Gb.Da),this.Rs=this.Gb.Vr(this.Gb.kf)):this.Rs=-1},u.prototype.Yi=function(o,r){this.uh.resize(0),this.Ji.length=0,this.tk=-1,this.Ek.L(o),this.Ek.X(r,r),this.ra=NaN,this.Ek.isIntersecting(this.Gb.Da)?(this.uh.add(this.Gb.kf),this.Ji.push(this.Gb.Da),this.Rs=this.Gb.Vr(this.Gb.kf),this.ws=!1):this.Rs=-1},u.prototype.next=function(){if(this.uh.size==0)return-1;this.tk=this.Rs;var o=null,r=null,n=null,a=null;this.ws&&(o=new h.h,r=new h.h,n=new h.l);for(var c=!1;!c;){for(;this.tk!=-1;){var p=this.Gb.Xy(this.Gb.gv(this.tk));if(p.isIntersecting(this.Ek)){if(!this.ws){c=!0;break}if(o.N(this.LH),r.N(this.KH),n.L(p),n.X(this.ra,this.ra),0<n.ty(o,r)){c=!0;break}}this.tk=this.Gb.ov(this.tk)}if(this.tk==-1){p=this.uh.Gc();var f=this.Ji[this.Ji.length-1];for(a==null&&((a=[])[0]=new h.l,a[1]=new h.l,a[2]=new h.l,a[3]=new h.l),v.wJ(f,a),this.uh.Jf(),--this.Ji.length,f=0;4>f;f++){var m=this.Gb.Np(p,f);if(m!=-1&&0<this.Gb.NR(m)&&a[f].isIntersecting(this.Ek))if(this.ws){if(o.N(this.LH),r.N(this.KH),n.L(a[f]),n.X(this.ra,this.ra),0<n.ty(o,r)){var w=new h.l;w.L(a[f]),this.uh.add(m),this.Ji.push(w)}}else(w=new h.l).L(a[f]),this.uh.add(m),this.Ji.push(w)}if(this.uh.size==0)return-1;this.tk=this.Gb.Vr(this.uh.get(this.uh.size-1))}}return this.Rs=this.Gb.ov(this.tk),this.tk},u.UO=function(o,r,n){var a=new u;return a.Gb=o,a.Ek=new h.l,a.uh=new h.ja(0),a.Ji=[],a.Vo(r,n),a},u.TO=function(o,r,n){var a=new u;return a.Gb=o,a.Ek=new h.l,a.uh=new h.ja(0),a.Ji=[],a.Yi(r,n),a},u.SO=function(o){var r=new u;return r.Gb=o,r.Ek=new h.l,r.uh=new h.ja(0),r.Ji=[],r},u}();h.vY=k;var v=function(){function u(o,r){this.jf=new h.ad(11),this.$h=new h.ad(5),this.xs=[],this.hw=new h.ja(0),this.Da=new h.l,this.Nk(o,r)}return u.prototype.reset=function(o,r){this.jf.nj(!1),this.$h.nj(!1),this.xs.length=0,this.hw.clear(!1),this.Nk(o,r)},u.prototype.wj=function(o,r){return this.Av(o,r,0,this.Da,this.kf,!1,-1)},u.prototype.Ez=function(o,r,n){n=n==-1?this.kf:this.OF(n);var a=this.da(n),c=this.gR(n);return this.Av(o,r,a,c,n,!1,-1)},u.prototype.ka=function(o){return this.bR(o)},u.prototype.yF=function(o){return this.Xy(this.gv(o))},u.prototype.da=function(o){return this.kv(o)},u.prototype.gR=function(o){var r=new h.l;r.L(this.Da);var n=this.kv(o);o=this.IF(o);for(var a=0;a<2*n;a+=2){var c=h.P.truncate(3&o>>a);c==0?(r.v=.5*(r.v+r.C),r.G=.5*(r.G+r.H)):c==1?(r.C=.5*(r.v+r.C),r.G=.5*(r.G+r.H)):(c==2?r.C=.5*(r.v+r.C):r.v=.5*(r.v+r.C),r.H=.5*(r.G+r.H))}return r},u.prototype.NR=function(o){return this.vz(o)},u.prototype.mR=function(o,r){return k.UO(this,o,r)},u.prototype.EF=function(o,r){return k.TO(this,o,r)},u.prototype.getIterator=function(){return k.SO(this)},u.prototype.Nk=function(o,r){if(0>r||32<2*r)throw h.i.O("invalid height");this.rT=r,this.Da.L(o),this.kf=this.jf.De(),this.ix(this.kf,0),this.cx(this.kf,0),this.FJ(this.kf,0),this.CJ(this.kf,0)},u.prototype.Av=function(o,r,n,a,c,p,f){if(!a.contains(r))return n==0?-1:this.Av(o,r,0,this.Da,this.kf,p,f);if(!p)for(var m=c;m!=-1;m=this.AR(m))this.ix(m,this.vz(m)+1);(m=new h.l).L(a),a=c;var w=[];for(w[0]=new h.l,w[1]=new h.l,w[2]=new h.l,w[3]=new h.l;n<this.rT&&this.aO(a);n++){u.wJ(m,w);for(var x=!1,$=0;4>$;$++)if(w[$].contains(r)){x=!0;var T=this.Np(a,$);T==-1&&(T=this.jP(a,$)),this.ix(T,this.vz(T)+1),a=T,m.L(w[$]);break}if(!x)break}return this.jS(o,r,n,m,a,p,c,f)},u.prototype.jS=function(o,r,n,a,c,p,f,m){var w=this.FF(c);if(p){if(c==f)return m;this.KP(m),p=m}else p=this.lP(),this.HB(p,o),this.zW(this.gv(p),r);return this.$W(p,c),w!=-1?(this.gx(p,w),this.dx(w,p)):this.yJ(c,p),this.LB(c,p),this.cx(c,this.mv(c)+1),this.$N(c)&&this.EQ(n,a,c),p},u.prototype.KP=function(o){var r=this.OF(o),n=this.FF(r),a=this.FR(o),c=this.ov(o);this.Vr(r)==o?(c!=-1?this.gx(c,-1):this.LB(r,-1),this.yJ(r,c)):n==o?(this.dx(a,-1),this.LB(r,a)):(this.gx(c,a),this.dx(a,c)),this.gx(o,-1),this.dx(o,-1),this.cx(r,this.mv(r)-1)},u.wJ=function(o,r){var n=.5*(o.v+o.C),a=.5*(o.G+o.H);r[0].L(n,a,o.C,o.H),r[1].L(o.v,a,n,o.H),r[2].L(o.v,o.G,n,a),r[3].L(n,o.G,o.C,a)},u.prototype.$N=function(o){return this.mv(o)==8&&!this.ZF(o)},u.prototype.EQ=function(o,r,n){var a=this.Vr(n);do{var c=this.gv(a),p=this.$h.U(a,0);c=this.Xy(c),this.Av(p,c,o,r,n,!0,a),a=p=this.ov(a)}while(a!=-1)},u.prototype.aO=function(o){return 8<=this.mv(o)||this.ZF(o)},u.prototype.ZF=function(o){return this.Np(o,0)!=-1||this.Np(o,1)!=-1||this.Np(o,2)!=-1||this.Np(o,3)!=-1},u.prototype.jP=function(o,r){var n=this.jf.De();return this.EW(o,r,n),this.ix(n,0),this.cx(n,0),this.Pk(n,o),this.CJ(n,this.kv(o)+1),this.FJ(n,r<<2*this.kv(o)|this.IF(o)),n},u.prototype.lP=function(){var o=this.$h.De();if(0<this.hw.size){var r=this.hw.Gc();this.hw.Jf()}else r=this.xs.length,this.xs.push(new h.l);return this.AW(o,r),o},u.prototype.Np=function(o,r){return this.jf.U(o,r)},u.prototype.EW=function(o,r,n){this.jf.T(o,r,n)},u.prototype.Vr=function(o){return this.jf.U(o,4)},u.prototype.yJ=function(o,r){this.jf.T(o,4,r)},u.prototype.FF=function(o){return this.jf.U(o,5)},u.prototype.LB=function(o,r){this.jf.T(o,5,r)},u.prototype.IF=function(o){return this.jf.U(o,6)},u.prototype.FJ=function(o,r){this.jf.T(o,6,r)},u.prototype.mv=function(o){return this.jf.U(o,7)},u.prototype.vz=function(o){return this.jf.U(o,8)},u.prototype.cx=function(o,r){this.jf.T(o,7,r)},u.prototype.ix=function(o,r){this.jf.T(o,8,r)},u.prototype.AR=function(o){return this.jf.U(o,9)},u.prototype.Pk=function(o,r){this.jf.T(o,9,r)},u.prototype.kv=function(o){return this.jf.U(o,10)},u.prototype.CJ=function(o,r){this.jf.T(o,10,r)},u.prototype.bR=function(o){return this.$h.U(o,0)},u.prototype.HB=function(o,r){this.$h.T(o,0,r)},u.prototype.FR=function(o){return this.$h.U(o,1)},u.prototype.ov=function(o){return this.$h.U(o,2)},u.prototype.gx=function(o,r){this.$h.T(o,1,r)},u.prototype.dx=function(o,r){this.$h.T(o,2,r)},u.prototype.OF=function(o){return this.$h.U(o,3)},u.prototype.$W=function(o,r){this.$h.T(o,3,r)},u.prototype.gv=function(o){return this.$h.U(o,4)},u.prototype.AW=function(o,r){this.$h.T(o,4,r)},u.prototype.Xy=function(o){return this.xs[o]},u.prototype.zW=function(o,r){this.xs[o].L(r)},u}();h.eu=v}(G||(G={})),function(h){var k;(k=h.TK||(h.TK={}))[k.Outside=0]="Outside",k[k.Inside=1]="Inside",k[k.Border=2]="Border";var v=function(){function o(r,n){this.FT=n,this.Wh=r}return o.prototype.$w=function(r,n){this.aH!=n&&r.flush(),this.aH=n},o.prototype.ZE=function(r,n){for(var a=0;a<n;)for(var c=r[a++],p=r[a++],f=r[a++]*this.FT;c<p;c++)this.Wh[f+(c>>4)]|=this.aH<<2*(15&c)},o}();h.wY=v;var u=function(){function o(r,n,a){this.Wh=null,this.MA=this.Ik=this.VH=this.TH=this.Fs=this.iH=this.Hf=this.Wm=0,this.Si=this.Jk=this.xl=null,this.Az(r,n,a)}return o.create=function(r,n,a){if(!o.rE(r))throw h.i.O();return o.oP(r,n,a)},o.fW=function(r){switch(r){case 0:r=1024;break;case 1:r=16384;break;case 2:r=262144;break;default:throw h.i.ga("Internal Error")}return r},o.rE=function(r){return!(r.B()||r.K()!=1607&&r.K()!=1736)},o.prototype.jQ=function(r,n){n=n.Ha();for(var a=new h.h,c=new h.h;n.ab();)for(;n.Ia();){var p=n.ia();if(p.K()!=322)throw h.i.ga("Internal Error");r.Fh(p.ac(),a),r.Fh(p.xc(),c),this.Si.ey(a.x,a.y,c.x,c.y)}this.Si.aJ(h.Nx.Ax)},o.prototype.kQ=function(){throw h.i.ga("Internal Error")},o.prototype.My=function(r,n){for(var a=1;4>a;a++)r.ey(n[a-1].x,n[a-1].y,n[a].x,n[a].y);r.ey(n[3].x,n[3].y,n[0].x,n[0].y),this.Si.aJ(h.Nx.Ax)},o.prototype.jK=function(r,n,a){for(var c=[null,null,null,null],p=0;p<c.length;p++)c[p]=new h.h;n=n.Ha(),a=this.Jk.SX(a)+1.5,p=new h.h;for(var f=new h.h,m=new h.h,w=new h.h,x=new h.h,$=new h.l,T=new h.h;n.ab();){var A=!1,C=!0;for(T.na(0,0);n.Ia();){var N=n.ia();if(w.x=N.sa,w.y=N.oa,x.x=N.qa,x.y=N.ma,$.Pa(),$.$b(w.x,w.y),$.Lk(x.x,x.y),this.xl.zG($)){this.Jk.Fh(x,x),C?(this.Jk.Fh(w,w),T.N(w),C=!1):w.N(T),p.vc(x,w);var L=.5>(N=p.length());N==0?p.na(1,0):(L||T.N(x),p.scale(a/N),f.na(-p.y,p.x),m.na(p.y,-p.x),w.sub(p),x.add(p),c[0].add(w,f),c[1].add(w,m),c[2].add(x,m),c[3].add(x,f),L?A=!0:this.My(r,c))}else A&&(this.My(r,c),A=!1),C=!0}A&&this.My(r,c)}},o.prototype.lC=function(r){return h.P.truncate(r*this.iH+this.TH)},o.prototype.mC=function(r){return h.P.truncate(r*this.Fs+this.VH)},o.oP=function(r,n,a){return new o(r,n,a)},o.prototype.Az=function(r,n,a){this.Hf=Math.max(h.P.truncate(2*Math.sqrt(a)+.5),64),this.Wm=h.P.truncate((2*this.Hf+31)/32),this.xl=new h.l,this.Ik=n,a=0;for(var c=this.Hf,p=this.Wm;8<=c;)a+=c*p,c=h.P.truncate(c/2),p=h.P.truncate((2*c+31)/32);this.Wh=h.P.lg(a,0),this.Si=new h.Nx,a=new v(this.Wh,this.Wm,this),this.Si.oX(this.Hf,this.Hf,a),r.A(this.xl),this.xl.X(n,n),c=new h.l;var f=n*(p=h.l.construct(1,1,this.Hf-2,this.Hf-2)).S();switch(n*=p.da(),c.L(this.xl.tf(),Math.max(f,this.xl.S()),Math.max(n,this.xl.da())),this.MA=this.Ik,this.Jk=new h.Ed,this.Jk.gS(c,p),new h.Ed,r.K()){case 550:a.$w(this.Si,2),this.kQ();break;case 1607:a.$w(this.Si,2),this.jK(this.Si,r,this.MA);break;case 1736:a.$w(this.Si,1),this.jQ(this.Jk,r),a.$w(this.Si,2),this.jK(this.Si,r,this.MA)}this.iH=this.Jk.eb,this.Fs=this.Jk.bb,this.TH=this.Jk.Lb,this.VH=this.Jk.Qb,this.PN()},o.prototype.PN=function(){this.Si.flush();for(var r=0,n=this.Hf*this.Wm,a=this.Hf,c=h.P.truncate(this.Hf/2),p=this.Wm,f=h.P.truncate((2*c+31)/32);8<a;){for(a=0;a<c;a++)for(var m=2*a,w=2*a+1,x=0;x<c;x++){var $=2*x,T=2*x+1,A=$>>4;$=2*(15&$);var C=T>>4;T=2*(15&T);var N=this.Wh[r+p*m+A]>>$&3;N|=this.Wh[r+p*m+C]>>T&3,N|=this.Wh[r+p*w+A]>>$&3,N|=this.Wh[r+p*w+C]>>T&3,this.Wh[n+f*a+(x>>4)]|=N<<2*(15&x)}a=c,p=f,r=n,c=h.P.truncate(a/2),f=h.P.truncate((2*c+31)/32),n=r+p*a}},o.prototype.To=function(r,n){return this.xl.contains(r,n)?(r=this.lC(r),n=this.mC(n),0>r||r>=this.Hf||0>n||n>=this.Hf||(n=this.Wh[this.Wm*n+(r>>4)]>>2*(15&r)&3)==0?0:n==1?1:2):0},o.prototype.So=function(r){if(!r.Fa(this.xl))return 0;var n=this.lC(r.v),a=this.lC(r.C),c=this.mC(r.G);if(r=this.mC(r.H),0>n&&(n=0),0>c&&(c=0),a>=this.Hf&&(a=this.Hf-1),r>=this.Hf&&(r=this.Hf-1),n>a||c>r)return 0;for(var p=Math.max(a-n,1)*Math.max(r-c,1),f=0,m=this.Wm,w=this.Hf,x=0;;){if(32>p||16>w){for(p=c;p<=r;p++)for(var $=n;$<=a;$++)if(1<(x=this.Wh[f+m*p+($>>4)]>>2*(15&$)&3))return 2;if(x==0)return 0;if(x==1)return 1}f+=m*w,w=h.P.truncate(w/2),m=h.P.truncate((2*w+31)/32),n=h.P.truncate(n/2),c=h.P.truncate(c/2),a=h.P.truncate(a/2),r=h.P.truncate(r/2),p=Math.max(a-n,1)*Math.max(r-c,1)}},o.prototype.IR=function(){return this.Hf*this.Wm},o}();h.Lx=u}(G||(G={})),function(h){var k;(k=h.NL||(h.NL={}))[k.contains=1]="contains",k[k.within=2]="within",k[k.equals=3]="equals",k[k.disjoint=4]="disjoint",k[k.touches=8]="touches",k[k.crosses=16]="crosses",k[k.overlaps=32]="overlaps",k[k.unknown=0]="unknown",k[k.intersects=1073741824]="intersects";var v=function(){function o(){}return o.construct=function(r,n,a,c,p,f,m,w){var x=new o;return x.qw=r,x.Om=n,x.Lj=a,x.Ti=c,x.tH=p,x.HY=f,x.IY=m,x.JY=w,x},o}();h.Wt=function(){function o(){}return o.uD=function(r,n,a){if(o.qy(r)){var c=h.ta.lj(n,r,!1);n=!1,h.Uk.uE(r)&&(n=n||r.mu(c,a)),(c=r.K())!=1736&&c!=1607||!h.Uk.sE(r)||a==0||(n=n||r.gj(a)),c!=1736&&c!=1607||!h.Uk.tE(r)||a==0||n||r.$L()}},o.qy=function(r){return h.Uk.uE(r)||h.Uk.sE(r)||h.Uk.tE(r)},o}();var u=function(){function o(){this.sh=[]}return o.tB=function(r,n,a,c,p){var f=r.K(),m=n.K();if(f==197){if(m==197)return o.jW(r,n,a,c);if(m==33)return c==2?c=1:c==1&&(c=2),o.$I(n,r,a,c)}else if(f==33){if(m==197)return o.$I(r,n,a,c);if(m==33)return o.lW(r,n,a,c)}if(r.B()||n.B())return c==4;var w=new h.l;r.A(w);var x=new h.l;n.A(x);var $=new h.l;if($.L(w),$.$b(x),a=h.ta.Xd(a,$,!1),o.dk(w,x,a))return c==4;switch(w=!1,h.Vk.zd(f)&&((f=new h.Ua(r.description)).oc(r,!0),r=f,f=1607),h.Vk.zd(m)&&((m=new h.Ua(n.description)).oc(n,!0),n=m,m=1607),f!=197&&m!=197?(r.Eb()<n.Eb()||f==33&&m==550)&&(c==2?c=1:c==1&&(c=2)):f!=1736&&m!=197&&(c==2?c=1:c==1&&(c=2)),f){case 1736:switch(m){case 1736:w=o.rt(r,n,a,c,p);break;case 1607:w=o.bn(r,n,a,c,p);break;case 33:w=o.qt(r,n,a,c);break;case 550:w=o.pt(r,n,a,c,p);break;case 197:w=o.yI(r,n,a,c,p)}break;case 1607:switch(m){case 1736:w=o.bn(n,r,a,c,p);break;case 1607:w=o.aB(r,n,a,c,p);break;case 33:w=o.tt(r,n,a,c,p);break;case 550:w=o.st(r,n,a,c,p);break;case 197:w=o.EI(r,n,a,c)}break;case 33:switch(m){case 1736:w=o.qt(n,r,a,c);break;case 1607:w=o.tt(n,r,a,c,p);break;case 550:w=o.lt(n,r,a,c)}break;case 550:switch(m){case 1736:w=o.pt(n,r,a,c,p);break;case 1607:w=o.st(n,r,a,c,p);break;case 550:w=o.TA(r,n,a,c,p);break;case 33:w=o.lt(r,n,a,c);break;case 197:w=o.$H(r,n,a,c)}break;case 197:switch(m){case 1736:w=o.yI(n,r,a,c,p);break;case 1607:w=o.EI(n,r,a,c);break;case 550:w=o.$H(n,r,a,c)}}return w},o.jW=function(r,n,a,c){if(r.B()||n.B())return c==4;var p=new h.l,f=new h.l,m=new h.l;switch(r.A(p),n.A(f),m.L(p),m.$b(f),r=h.ta.Xd(a,m,!1),c){case 4:return o.dk(p,f,r);case 2:return o.bF(f,p,r);case 1:return o.bF(p,f,r);case 3:return o.ek(p,f,r);case 8:return o.VP(p,f,r);case 32:return o.UP(p,f,r);case 16:return o.TP(p,f,r)}return!1},o.$I=function(r,n,a,c){if(r.B()||n.B())return c==4;r=r.D();var p=new h.l,f=new h.l;switch(n.A(p),f.L(r),f.$b(p),n=h.ta.Xd(a,f,!1),c){case 4:return o.Sw(r,p,n);case 2:return o.ZA(r,p,n);case 1:return o.HU(r,p,n);case 3:return o.nI(r,p,n);case 8:return o.YA(r,p,n)}return!1},o.lW=function(r,n,a,c){if(r.B()||n.B())return c==4;r=r.D(),n=n.D();var p=new h.l;switch(p.L(r),p.$b(n),a=h.ta.Xd(a,p,!1),c){case 4:return o.IU(r,n,a);case 2:return o.mI(n,r,a);case 1:return o.mI(r,n,a);case 3:return o.oI(r,n,a)}return!1},o.rt=function(r,n,a,c,p){switch(c){case 4:return o.aV(r,n,a);case 2:return o.Tw(n,r,a,p);case 1:return o.Tw(r,n,a,p);case 3:return o.dV(r,n,a);case 8:return o.lV(r,n,a);case 32:return o.gV(r,n,a,p)}return!1},o.bn=function(r,n,a,c,p){switch(c){case 4:return o.bV(r,n,a);case 1:return o.$A(r,n,a,p);case 8:return o.mV(r,n,a,p);case 16:return o.XU(r,n,a)}return!1},o.qt=function(r,n,a,c){switch(c){case 4:return o.$U(r,n,a);case 1:return o.UU(r,n,a);case 8:return o.kV(r,n,a)}return!1},o.pt=function(r,n,a,c){switch(c){case 4:return o.ZU(r,n,a);case 1:return o.TU(r,n,a);case 8:return o.jV(r,n,a);case 16:return o.WU(r,n,a)}return!1},o.yI=function(r,n,a,c,p){if(o.YU(r,n,a))return c==4;if(c==4)return!1;switch(c){case 2:return o.nV(r,n,a);case 1:return o.SU(r,n,a);case 3:return o.cV(r,n,a);case 8:return o.iV(r,n,a,p);case 32:return o.fV(r,n,a,p);case 16:return o.VU(r,n,a,p)}return!1},o.aB=function(r,n,a,c){switch(c){case 4:return o.wV(r,n,a);case 2:return o.CI(n,r,a);case 1:return o.CI(r,n,a);case 3:return o.yV(r,n,a);case 8:return o.FI(r,n,a);case 32:return o.CV(r,n,a);case 16:return o.DI(r,n,a)}return!1},o.tt=function(r,n,a,c){switch(c){case 4:return o.vV(r,n,a);case 1:return o.qV(r,n,a);case 8:return o.GV(r,n,a)}return!1},o.st=function(r,n,a,c){switch(c){case 4:return o.uV(r,n,a);case 1:return o.pV(r,n,a);case 8:return o.FV(r,n,a);case 16:return o.sV(r,n,a)}return!1},o.EI=function(r,n,a,c){if(o.tV(r,n,a))return c==4;if(c==4)return!1;switch(c){case 2:return o.HV(r,n,a);case 1:return o.oV(r,n,a);case 3:return o.xV(r,n,a);case 8:return o.EV(r,n,a);case 32:return o.BV(r,n,a);case 16:return o.rV(r,n,a)}return!1},o.TA=function(r,n,a,c){switch(c){case 4:return o.XT(r,n,a);case 2:return o.XH(n,r,a);case 1:return o.XH(r,n,a);case 3:return o.ZT(r,n,a);case 32:return o.eU(r,n,a)}return!1},o.lt=function(r,n,a,c){switch(c){case 4:return o.YH(r,n,a);case 2:return o.iU(r,n,a);case 1:return o.UT(r,n,a);case 3:return o.Ow(r,n,a)}return!1},o.$H=function(r,n,a,c){switch(c){case 4:return o.WT(r,n,a);case 2:return o.hU(r,n,a);case 1:return o.TT(r,n,a);case 3:return o.YT(r,n,a);case 8:return o.gU(r,n,a);case 16:return o.VT(r,n,a)}return!1},o.dV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.ek(c,p,a)&&(c=o.qc(r,n,!1))!=4&&c!=1&&c!=2&&(!!o.WH(r,n,a)||(c=r.Rb(),p=n.Rb(),!(Math.abs(c-p)>4*Math.max(r.I(),n.I())*a)&&o.Rz(r,n,a,!0)))},o.aV=function(r,n,a){var c=o.qc(r,n,!0);return c==4||c!=1&&c!=2&&c!=1073741824&&o.wI(r,n,a)},o.lV=function(r,n,a){var c=o.qc(r,n,!1);return c!=4&&c!=1&&c!=2&&o.AI(r,n,a,null)},o.gV=function(r,n,a,c){var p=o.qc(r,n,!1);return p!=4&&p!=1&&p!=2&&o.xI(r,n,a,c)},o.Tw=function(r,n,a,c){var p=new h.l,f=new h.l;return r.A(p),n.A(f),!!o.Ac(p,f,a)&&(p=o.qc(r,n,!1))!=4&&p!=2&&(p==1||o.tI(r,n,a,c))},o.bV=function(r,n,a){var c=o.qc(r,n,!0);return c==4||c!=1&&c!=1073741824&&o.wI(r,n,a)},o.mV=function(r,n,a,c){var p=o.qc(r,n,!1);return p!=4&&p!=1&&o.BI(r,n,a,c)},o.XU=function(r,n,a){var c=o.qc(r,n,!1);return c!=4&&c!=1&&o.vI(r,n,a,null)},o.$A=function(r,n,a,c){var p=new h.l,f=new h.l;return r.A(p),n.A(f),!!o.Ac(p,f,a)&&(p=o.qc(r,n,!1))!=4&&(p==1||o.uI(r,n,a,c))},o.$U=function(r,n,a){return h.jd.CG(r,n,a)==0},o.kV=function(r,n,a){return n=n.D(),o.zI(r,n,a)},o.UU=function(r,n,a){return n=n.D(),o.sI(r,n,a)},o.ZU=function(r,n,a){var c=o.qc(r,n,!1);if(c==4)return!0;if(c==1)return!1;c=new h.l,r.A(c),c.X(a,a);for(var p=new h.h,f=0;f<n.I();f++)if(n.D(f,p),c.contains(p)){var m=h.jd.Zd(r,p,a);if(m==1||m==2)return!1}return!0},o.jV=function(r,n,a){var c=this.qc(r,n,!1);if(c==4||c==1)return!1;c=new h.l,r.A(c),c.X(a,a);for(var p=!1,f=r,m=!1,w=0;w<n.I();w++){var x=n.Oa(w);if(c.contains(x)){if((x=h.jd.Zd(f,x,a))==2)p=!0;else if(x==1)return!1}m||(!h.Fg.Ol(r,n.I()-1)||r.Cb!=null&&r.Cb.Gb!=null?f=r:(f=new h.Ea,r.copyTo(f),f.gj(1)),m=!0)}return!!p},o.WU=function(r,n,a){var c=this.qc(r,n,!1);if(c==4||c==1)return!1;var p=new h.l;c=new h.l;var f=new h.l;r.A(p),n.A(f),c.L(p),c.X(a,a),f=p=!1;for(var m=r,w=!1,x=0;x<n.I();x++){var $=n.Oa(x);if(c.contains($)?($=h.jd.Zd(m,$,a))==0?f=!0:$==1&&(p=!0):f=!0,p&&f)return!0;w||(!h.Fg.Ol(r,n.I()-1)||r.Cb!=null&&r.Cb.Gb!=null?m=r:(m=new h.Ea,r.copyTo(m),m.gj(1)),w=!0)}return!1},o.TU=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),!this.Ac(c,p,a)||(p=this.qc(r,n,!1))==4)return!1;if(p==1)return!0;p=!1;for(var f=r,m=!1,w=0;w<n.I();w++){var x=n.Oa(w);if(!c.contains(x))return!1;if((x=h.jd.Zd(f,x,a))==1)p=!0;else if(x==0)return!1;m||(!h.Fg.Ol(r,n.I()-1)||r.Cb!=null&&r.Cb.Gb!=null?f=r:(f=new h.Ea,r.copyTo(f),f.gj(1)),m=!0)}return p},o.cV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.ek(c,p,a)&&((c=new h.Ea).bd(n,!1),o.Rz(r,c,a,!0))},o.YU=function(r,n,a){var c=o.qc(r,n,!1);if(c==4)return!0;if(c==1||c==2)return!1;var p=new h.l;if(c=new h.l,r.A(p),n.A(c),o.Ac(c,p,a)||(p=new h.h,c.fn(p),(n=h.jd.Zd(r,p,a))!=0)||(c.SI(p),(n=h.jd.Zd(r,p,a))!=0)||(c.gn(p),(n=h.jd.Zd(r,p,a))!=0)||(c.VI(p),(n=h.jd.Zd(r,p,a))!=0))return!1;n=r.vb(0),(p=new h.l).L(c),p.X(a,a);for(var f=0,m=r.I();f<m;f++){var w=n.read(2*f),x=n.read(2*f+1);if(p.contains(w,x))return!1}return!o.KG(r,c,a)},o.iV=function(r,n,a,c){var p=o.qc(r,n,!1);if(p==4||p==1||p==2)return!1;p=new h.l;var f=new h.l;return r.A(p),n.A(f),!o.Ac(f,p,a)&&(f.S()<=a&&f.da()<=a?(n=n.Kp(),o.zI(r,n,a)):f.S()<=a||f.da()<=a?(p=new h.Ua,f=new h.Ta,n.If(0,f),p.nf(f),n.If(2,f),p.lineTo(f),o.BI(r,p,a,c)):((p=new h.Ea).bd(n,!1),o.AI(r,p,a,c)))},o.fV=function(r,n,a,c){var p=o.qc(r,n,!1);if(p==4||p==1||p==2)return!1;p=new h.l;var f=new h.l;return r.A(p),n.A(f),!(o.Ac(f,p,a)||f.S()<=a||f.da()<=a)&&((p=new h.Ea).bd(n,!1),o.xI(r,p,a,c))},o.nV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),o.Ac(p,c,a)},o.SU=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.Ac(c,p,a)&&(c=o.qc(r,n,!1))!=4&&c!=2&&(c==1||(p.S()<=a&&p.da()<=a?(n=n.Kp(),o.sI(r,n,a)):p.S()<=a||p.da()<=a?(p=new h.Ua,c=new h.Ta,n.If(0,c),p.nf(c),n.If(2,c),p.lineTo(c),o.uI(r,p,a,null)):((p=new h.Ea).bd(n,!1),o.tI(r,p,a,null))))},o.VU=function(r,n,a,c){var p=new h.l,f=new h.l;return r.A(p),n.A(f),!(o.Ac(f,p,a)||f.da()>a&&f.S()>a||f.da()<=a&&f.S()<=a)&&(p=new h.Ua,f=new h.Ta,n.If(0,f),p.nf(f),n.If(2,f),p.lineTo(f),o.vI(r,p,a,c))},o.yV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.ek(c,p,a)||o.qc(r,n,!1)==4)&&(!!o.WH(r,n,a)||o.Rz(r,n,a,!1))},o.wV=function(r,n,a){return this.qc(r,n,!1)==4||!!new h.am(r,n,a,!0).next()&&!this.LG(r,n,a)},o.FI=function(r,n,a){if(o.qc(r,n,!1)==4)return!1;var c=new h.ce(0);if(o.Sz(r,n,a,c)!=0)return!1;for(var p=new h.de,f=0;f<c.size;f+=2){var m=c.read(f),w=c.read(f+1);p.Cu(m,w)}return r=r.mg(),n=n.mg(),r.Gd(n,0,n.I()),o.Nw(r,p,a)},o.DI=function(r,n,a){if(o.qc(r,n,!1)==4)return!1;var c=new h.ce(0);if(o.Sz(r,n,a,c)!=0)return!1;for(var p=new h.de,f=0;f<c.size;f+=2){var m=c.read(f),w=c.read(f+1);p.Cu(m,w)}return r=r.mg(),n=n.mg(),r.Gd(n,0,n.I()),!o.Nw(r,p,a)},o.CV=function(r,n,a){return o.qc(r,n,!1)!=4&&o.NG(r,n,a)},o.CI=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.Ac(c,p,a)||o.qc(r,n,!1)==4)&&o.Am(n,r,a,!1)},o.vV=function(r,n,a){return o.qc(r,n,!1)==4||(n=n.D(),!o.Tz(r,n,a))},o.GV=function(r,n,a){return o.qc(r,n,!1)!=4&&(n=n.D(),o.Uz(r,n,a))},o.qV=function(r,n,a){return o.qc(r,n,!1)!=4&&(n=n.D(),o.JG(r,n,a))},o.uV=function(r,n,a){return o.qc(r,n,!1)==4||!o.MG(r,n,a,!1)},o.FV=function(r,n,a){if(this.qc(r,n,!1)==4)return!1;var c=r.Ha(),p=new h.l,f=new h.l,m=new h.l;r.A(p),n.A(f),p.X(a,a),f.X(a,a),m.L(p),m.Fa(f),p=null;var w=r.Cb;if(w!=null){var x=w.Gb;p=w.Ao,x==null&&(x=w=h.ta.kj(r,m))}else x=w=h.ta.kj(r,m);var $=x.getIterator(),T=null;p!=null&&(T=p.getIterator());var A=new h.h,C=new h.h,N=!1,L=a*a;for(p=new h.rn(n.I()),w=0;w<n.I();w++)p.write(w,0);for(w=0;w<n.I();w++)if(n.D(w,A),m.contains(A)){if(f.L(A.x,A.y,A.x,A.y),T!=null&&(T.Yi(f,a),T.next()==-1))continue;$.Yi(f,a);for(var D=$.next();D!=-1;D=$.next())if(c.Wb(x.ka(D)),(D=c.ia()).ic(D.fe(A,!1),C),h.h.zc(A,C)<=L){p.write(w,1),N=!0;break}}if(!N)return!1;for(r=r.mg(),c=new h.de,f=new h.h,w=0;w<n.I();w++)p.read(w)!=0&&(n.D(w,f),c.Cu(f.x,f.y));return this.Nw(r,c,a)},o.sV=function(r,n,a){if(this.qc(r,n,!1)==4)return!1;var c=r.Ha(),p=new h.l,f=new h.l,m=new h.l;r.A(p),n.A(f),p.X(a,a),f.X(a,a),m.L(p),m.Fa(f),p=null;var w=r.Cb;if(w!=null){var x=w.Gb;p=w.Ao,x==null&&(x=w=h.ta.kj(r,m))}else x=w=h.ta.kj(r,m);var $=x.getIterator(),T=null;p!=null&&(T=p.getIterator());var A=new h.h,C=new h.h,N=!1,L=!1,D=a*a;for(p=new h.rn(n.I()),w=0;w<n.I();w++)p.write(w,0);for(w=0;w<n.I();w++)if(n.D(w,A),m.contains(A)){if(f.L(A.x,A.y,A.x,A.y),T!=null&&(T.Yi(f,a),T.next()==-1)){L=!0;continue}$.Yi(f,a);for(var F=!1,V=$.next();V!=-1;V=$.next())if(c.Wb(x.ka(V)),(V=c.ia()).ic(V.fe(A,!1),C),h.h.zc(A,C)<=D){p.write(w,1),F=N=!0;break}F||(L=!0)}else L=!0;if(!N||!L)return!1;for(r=r.mg(),c=new h.de,f=new h.h,w=0;w<n.I();w++)p.read(w)!=0&&(n.D(w,f),c.Cu(f.x,f.y));return!this.Nw(r,c,a)},o.pV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.Ac(c,p,a)||o.qc(r,n,!1)==4||!o.MG(r,n,a,!0))&&(r=r.mg(),!o.ZH(r,n,a))},o.xV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(p.da()>a&&p.S()>a)&&o.ek(c,p,a)},o.tV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!o.Ac(p,c,a)&&!o.KG(r,p,a)},o.EV=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),p.da()<=a&&p.S()<=a)return p=n.Kp(),o.Uz(r,p,a);if(p.da()<=a||p.S()<=a)return p=new h.Ua,c=new h.Ta,n.If(0,c),p.nf(c),n.If(2,c),p.lineTo(c),o.FI(r,p,a);r=r.Ha(),n=new h.l,c=new h.l,n.L(p),c.L(p),n.X(-a,-a),c.X(a,a),p=!1;for(var f=new h.l,m=new h.l;r.ab();)for(;r.Ia();){if(r.ia().A(f),m.L(n),m.Fa(f),!m.B()&&(m.da()>a||m.S()>a))return!1;m.L(c),m.Fa(f),m.B()||(p=!0)}return p},o.BV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(o.Ac(c,p,a)||o.Ac(p,c,a)||o.Ac(p,c,a)||p.da()>a&&p.S()>a||p.da()<=a&&p.S()<=a)&&(c=new h.Ua,p=new h.Ta,n.If(0,p),c.nf(p),n.If(2,p),c.lineTo(p),o.NG(r,c,a))},o.HV=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),!o.Ac(p,c,a)||p.da()<=a&&p.S()<=a)return!1;if(p.da()<=a||p.S()<=a)return o.Ac(p,c,a);r=r.Ha(),(n=new h.l).L(p),n.X(-a,-a),p=!1,c=new h.l;for(var f=new h.l;r.ab();)for(;r.Ia();)r.ia().A(c),n.jm(c)?p=!0:(f.L(n),f.Fa(c),!f.B()&&(f.da()>a||f.S()>a)&&(p=!0));return p},o.oV=function(r,n,a){var c=new h.l,p=new h.l;return n.A(p),r.A(c),!(!o.Ac(c,p,a)||p.da()>a&&p.S()>a)&&(p.da()<=a&&p.S()<=a?(n=n.Kp(),o.JG(r,n,a)):(c=new h.Ua,p=new h.Ta,n.If(0,p),c.nf(p),n.If(2,p),c.lineTo(p),o.Am(c,r,a,!1)))},o.rV=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),o.Ac(p,c,a)||p.da()<=a&&p.S()<=a)return!1;if(p.da()<=a||p.S()<=a)return c=new h.Ua,p=new h.Ta,n.If(0,p),c.nf(p),n.If(2,p),c.lineTo(p),o.DI(r,c,a);r=r.Ha(),n=new h.l,(c=new h.l).L(p),n.L(p),c.X(-a,-a),n.X(a,a);for(var f=p=!1,m=new h.l,w=new h.l;r.ab();)for(;r.Ia();)if(r.ia().A(m),f||n.contains(m)||(f=!0),p||(w.L(c),w.Fa(m),!w.B()&&(w.da()>a||w.S()>a)&&(p=!0)),p&&f)return!0;return!1},o.ZT=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.ek(c,p,a)&&(!!o.$T(r,n,a)||o.SA(r,n,a,!1,!0,!1))},o.XT=function(r,n,a){return!o.ZH(r,n,a)},o.eU=function(r,n,a){return o.SA(r,n,a,!1,!1,!0)},o.XH=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.Ac(c,p,a)&&o.SA(n,r,a,!0,!1,!1)},o.Nw=function(r,n,a){a*=a;for(var c=new h.h,p=new h.h,f=0;f<n.I();f++){n.D(f,p);for(var m=!1,w=0;w<r.I();w++)if(r.D(w,c),h.h.zc(c,p)<=a){m=!0;break}if(!m)return!1}return!0},o.Ow=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),o.ek(c,p,a)},o.YH=function(r,n,a){return n=n.D(),o.kt(r,n,a)},o.iU=function(r,n,a){return o.Ow(r,n,a)},o.UT=function(r,n,a){return!o.YH(r,n,a)},o.YT=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(p.da()>a||p.S()>a)&&o.ek(c,p,a)},o.WT=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),o.Ac(p,c,a))return!1;for((n=new h.l).L(p),n.X(a,a),a=new h.h,p=0;p<r.I();p++)if(r.D(p,a),n.contains(a))return!1;return!0},o.gU=function(r,n,a){var c=new h.l,p=new h.l,f=new h.l;if(n.A(c),c.da()<=a&&c.S()<=a)return!1;if(c.da()<=a||c.S()<=a){n=new h.h;var m=!1;p.L(c),f.L(c),p.X(a,a),c.da()>a?f.X(0,-a):f.X(-a,0);for(var w=0;w<r.I();w++)if(r.D(w,n),p.contains(n)){if(c.da()>a){if(n.y>f.G&&n.y<f.H)return!1}else if(n.x>f.v&&n.x<f.C)return!1;m=!0}return m}for(p.L(c),f.L(c),p.X(a,a),f.X(-a,-a),n=new h.h,m=!1,w=0;w<r.I();w++)if(r.D(w,n),p.contains(n)){if(f.jm(n))return!1;m=!0}return m},o.hU=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),!o.Ac(p,c,a))return!1;if(p.da()<=a&&p.S()<=a)return o.ek(c,p,a);if(p.da()<=a||p.S()<=a){n=!1,c=new h.l;var f=new h.l;c.L(p),f.L(p),p.da()>a?c.X(0,-a):c.X(-a,0),f.X(a,a);for(var m=new h.h,w=0;w<r.I();w++){if(r.D(w,m),!f.contains(m))return!1;p.da()>a?m.y>c.G&&m.y<c.H&&(n=!0):m.x>c.v&&m.x<c.C&&(n=!0)}return n}for(n=!1,c=new h.l,f=new h.l,c.L(p),f.L(p),c.X(-a,-a),f.X(a,a),m=new h.h,w=0;w<r.I();w++){if(r.D(w,m),!f.contains(m))return!1;c.jm(m)&&(n=!0)}return n},o.TT=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.Ac(c,p,a)||p.da()>a||p.S()>a)&&(n=n.Kp(),!o.kt(r,n,a))},o.VT=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),o.Ac(p,c,a)||p.da()<=a&&p.S()<=a)return!1;if(p.da()<=a||p.S()<=a){n=new h.l,c=new h.l,n.L(p),p.da()>a?n.X(0,-a):n.X(-a,0),c.L(p),c.X(a,a);for(var f=new h.h,m=!1,w=!1,x=0;x<r.I();x++)if(r.D(x,f),m||(p.da()>a?f.y>n.G&&f.y<n.H&&(m=!0):f.x>n.v&&f.x<n.C&&(m=!0)),w||c.contains(f)||(w=!0),m&&w)return!0;return!1}for(n=new h.l,c=new h.l,n.L(p),n.X(-a,-a),c.L(p),c.X(a,a),f=new h.h,w=m=!1,x=0;x<r.I();x++)if(r.D(x,f),!m&&n.jm(f)&&(m=!0),w||c.contains(f)||(w=!0),m&&w)return!0;return!1},o.oI=function(r,n,a){return h.h.zc(r,n)<=a*a},o.IU=function(r,n,a){return h.h.zc(r,n)>a*a},o.mI=function(r,n,a){return o.oI(r,n,a)},o.nI=function(r,n,a){var c=new h.l;return c.L(r),o.ek(c,n,a)},o.Sw=function(r,n,a){var c=new h.l;return c.L(n),c.X(a,a),!c.contains(r)},o.YA=function(r,n,a){if(n.da()<=a&&n.S()<=a)return!1;var c=new h.l,p=new h.l;if(c.L(n),c.X(a,a),!c.contains(r))return!1;if(n.da()<=a||n.S()<=a){if(p.L(n),n.da()>a?p.X(0,-a):p.X(-a,0),n.da()>a){if(r.y>p.G&&r.y<p.H)return!1}else if(r.x>p.v&&r.x<p.C)return!1;return!0}return p.L(n),p.X(-a,-a),!p.jm(r)},o.ZA=function(r,n,a){if(n.da()<=a&&n.S()<=a)return!0;if(n.da()<=a||n.S()<=a){var c=new h.l;c.L(n),n.da()>a?c.X(0,-a):c.X(-a,0);var p=!1;return n.da()>a?r.y>c.G&&r.y<c.H&&(p=!0):r.x>c.v&&r.x<c.C&&(p=!0),p}return(c=new h.l).L(n),c.X(-a,-a),c.jm(r)},o.HU=function(r,n,a){return o.nI(r,n,a)},o.ek=function(r,n,a){return o.Ac(r,n,a)&&o.Ac(n,r,a)},o.dk=function(r,n,a){var c=new h.l;return c.L(n),c.X(a,a),!r.isIntersecting(c)},o.VP=function(r,n,a){if(r.da()<=a&&r.S()<=a){var c=r.tf();return o.YA(c,n,a)}if(n.da()<=a&&n.S()<=a)return c=n.tf(),o.YA(c,r,a);if(r.da()>a&&r.S()>a&&(n.da()<=a||n.S()<=a)?c=n:(c=r,r=n),c.da()<=a||c.S()<=a){if(r.da()<=a||r.S()<=a){n=new h.zb;var p=new h.zb,f=[0,0],m=[0,0],w=new h.h;return c.fn(w),n.Ec(w),c.gn(w),n.Rc(w),r.fn(w),p.Ec(w),r.gn(w),p.Rc(w),n.Fa(p,null,f,m,a),n.Fa(p,null,null,null,a)==1&&(f[0]==0||f[1]==1||m[0]==0||m[1]==1)}return n=new h.l,p=new h.l,n.L(r),n.X(-a,-a),p.L(n),p.Fa(c),!(!p.B()&&(p.da()>a||p.S()>a))}return r.X(a,a),(p=new h.l).L(c),p.Fa(r),!(p.B()||!p.B()&&p.da()>a&&p.S()>a)},o.UP=function(r,n,a){if(o.Ac(r,n,a)||o.Ac(n,r,a)||r.da()<=a&&r.S()<=a||n.da()<=a&&n.S()<=a)return!1;if(r.da()<=a||r.S()<=a){if(n.da()>a&&n.S()>a)return!1;var c=new h.zb,p=new h.zb,f=[0,0],m=[0,0],w=new h.h;return r.fn(w),c.Ec(w),r.gn(w),c.Rc(w),n.fn(w),p.Ec(w),n.gn(w),p.Rc(w),c.Fa(p,null,f,m,a),c.Fa(p,null,null,null,a)==2&&(0<f[0]||1>f[1])&&(0<m[0]||1>m[1])}return!(n.da()<=a||n.S()<=a)&&((c=new h.l).L(r),c.Fa(n),!(c.B()||c.da()<=a||c.S()<=a))},o.bF=function(r,n,a){if(!o.Ac(r,n,a))return!1;if(r.da()<=a&&r.S()<=a)return r=r.tf(),o.ZA(r,n,a);if(n.da()<=a&&n.S()<=a)return n=n.tf(),o.ZA(n,r,a);if(r.da()<=a||r.S()<=a)return o.Ac(r,n,a);if(n.da()<=a||n.S()<=a){var c=new h.l;return c.L(r),c.X(-a,-a),c.jm(n)?!0:((r=new h.l).L(c),r.Fa(n),!(r.B()||r.da()<=a&&r.S()<=a))}return o.Ac(r,n,a)},o.TP=function(r,n,a){if(o.Ac(r,n,a)||o.Ac(n,r,a)||r.da()<=a&&r.S()<=a||n.da()<=a&&n.S()<=a||n.da()>a&&n.S()>a&&r.da()>a&&r.S()>a)return!1;if(r.da()>a&&r.S()>a)var c=n;else c=r,r=n;if(r.da()>a&&r.S()>a){n=new h.l;var p=new h.l;return p.L(r),p.X(-a,-a),n.L(p),n.Fa(c),!(n.B()||n.da()<=a&&n.S()<=a)}n=new h.zb,p=new h.zb;var f=[0,0],m=[0,0],w=new h.h;return c.fn(w),n.Ec(w),c.gn(w),n.Rc(w),r.fn(w),p.Ec(w),r.gn(w),p.Rc(w),n.Fa(p,null,f,m,a),n.Fa(p,null,null,null,a)==1&&0<f[0]&&1>f[1]&&0<m[0]&&1>m[1]},o.wI=function(r,n,a){var c=new h.l,p=new h.l,f=new h.am(r,n,a,!0);if(!f.next())return!0;if(this.LG(r,n,a))return!1;var m=r,w=null;n.K()==1736&&(w=n);var x=!1,$=!1;do{var T=f.pl(),A=f.jl();if(A=n.Oa(n.Ca(A)),c.L(f.oz()),c.X(a,a),c.contains(A)&&(A=h.jd.Zd(m,A,0))!=0||n.K()==1736&&(T=r.Oa(r.Ca(T)),p.L(f.Wy()),p.X(a,a),p.contains(T)&&(A=h.jd.Zd(w,T,0))!=0))return!1;x||(!h.Fg.Ol(r,n.ea()-1)||r.Cb!=null&&r.Cb.Gb!=null?m=r:(m=new h.Ea,r.copyTo(m),m.gj(1)),x=!0),n.K()!=1736||$||($=n,!h.Fg.Ol($,r.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?w=n:(w=new h.Ea,$.copyTo(w),w.gj(1)),$=!0)}while(f.next());return!0},o.Ac=function(r,n,a){var c=new h.l;return c.L(r),c.X(a,a),c.contains(n)},o.ms=function(r,n,a){var c=new h.l;return c.L(n),c.X(a,a),n=new h.h,r.fn(n),!c.contains(n)||(r.SI(n),!c.contains(n)||(r.VI(n),!c.contains(n)||(r.gn(n),!c.contains(n))))},o.WH=function(r,n,a){if(r.ea()!=n.ea()||r.I()!=n.I())return!1;var c=new h.h,p=new h.h,f=!0;a*=a;for(var m=0;m<r.ea();m++){if(r.Wc(m)!=n.Wc(m)){f=!1;break}for(var w=r.Ca(m);w<n.Wc(m);w++)if(r.D(w,c),n.D(w,p),h.h.zc(c,p)>a){f=!1;break}if(!f)break}return!!f},o.$T=function(r,n,a){if(r.I()!=n.I())return!1;var c=new h.h,p=new h.h,f=!0;a*=a;for(var m=0;m<r.I();m++)if(r.D(m,c),n.D(m,p),h.h.zc(c,p)>a){f=!1;break}return!!f},o.SA=function(r,n,a,c,p,f){var m=!1;if(r.I()>n.I()){c&&(c=!1,m=!0);var w=n}else w=r,r=n;if(n=null,p||f||m){n=new h.rn(r.I());for(var x=0;x<r.I();x++)n.write(x,0)}x=new h.l;var $=new h.l,T=new h.l;w.A(x),r.A($),x.X(a,a),$.X(a,a),T.L(x),T.Fa($),$=new h.h;for(var A=new h.h,C=!0,N=h.ta.gE(r,T),L=N.getIterator(),D=a*a,F=0;F<w.I();F++)if(w.D(F,$),T.contains($)){var V=!1;x.L($.x,$.y,$.x,$.y),L.Yi(x,a);for(var W=L.next();W!=-1&&(W=N.ka(W),r.D(W,A),!(h.h.zc($,A)<=D&&((p||f||m)&&n.write(W,1),V=!0,c)));W=L.next());if(!V&&(C=!1,p||c))return!1}else{if(p||c)return!1;C=!1}if(f&&C)return!1;if(c)return!0;for(x=0;x<r.I();x++)if(n.read(x)==1){if(f)return!0}else if(p||m)return!1;return!f},o.ZH=function(r,n,a){if(r.I()>n.I())var c=n;else c=r,r=n;n=new h.l;var p=new h.l,f=new h.l;c.A(n),r.A(p),n.X(a,a),p.X(a,a),f.L(n),f.Fa(p),p=new h.h;for(var m=new h.h,w=a*a,x=h.ta.gE(r,f),$=x.getIterator(),T=0;T<c.I();T++)if(c.D(T,p),f.contains(p)){n.L(p.x,p.y,p.x,p.y),$.Yi(n,a);for(var A=$.next();A!=-1;A=$.next())if(r.D(x.ka(A),m),h.h.zc(p,m)<=w)return!0}return!1},o.Rz=function(r,n,a,c){return o.Am(r,n,a,c)&&o.Am(n,r,a,c)},o.Am=function(r,n,a,c){function p(pe,be){return A.IE(pe,be)}var f,m=!0,w=[0,0],x=[0,0],$=0,T=new h.ja(0),A=new o,C=new h.l,N=new h.l,L=new h.l;r.A(C),n.A(N),C.X(a,a),N.X(a,a),L.L(C),L.Fa(N),r=r.Ha(),N=n.Ha();var D=null,F=D=null,V=n.Cb;for(V!=null?(D=V.Gb,F=V.Ao,D==null&&(D=h.ta.kj(n,L))):D=h.ta.kj(n,L),n=D.getIterator(),V=null,F!=null&&(V=F.getIterator());r.ab();)for(;r.Ia();){var W=!1,K=r.ia();if(K.A(C),!C.isIntersecting(L)||V!=null&&(V.Yi(C,a),V.next()==-1))return!1;for(F=K.Rb(),n.Vo(K,a),f=n.next();f!=-1;f=n.next()){N.Wb(D.ka(f)),f=N.ia();var B=K.Fa(f,null,w,x,a);if(B==2&&(!c||x[0]<=x[1])){B=w[0];var ee=w[1],ae=x[0],me=x[1];if(B*F<=a&&(1-ee)*F<=a){W=!0,$=0,T.resize(0),A.sh.length=0;var fe=r.xb();for(ae=!0;ae;){if(r.Ia()){if(F=(K=r.ia()).Rb(),(B=K.Fa(f,null,w,x,a))==2&&(!c||x[0]<=x[1])&&(B=w[0],ee=w[1],B*F<=a&&(1-ee)*F<=a)){fe=r.xb();continue}if(N.Ia()&&(f=N.ia(),(B=K.Fa(f,null,w,x,a))==2&&(!c||x[0]<=x[1])&&(B=w[0],ee=w[1],B*F<=a&&(1-ee)*F<=a))){fe=r.xb();continue}}ae=!1}fe!=r.xb()&&(r.Wb(fe),r.ia());break}fe=r.xb(),f=v.construct(fe,r.gb,B,ee,N.xb(),N.gb,ae,me),A.sh.push(f),T.add(T.size)}}if(!W){if($==A.sh.length)return!1;for(1<T.size-$&&T.Wd($,T.size,p),W=0;$<A.sh.length;$++)if(!((f=A.sh[T.get($)]).Lj<W&&f.Ti<W)){if(F*(f.Lj-W)>a)return!1;if(F*(1-(W=f.Ti))<=a||W==1)break}if(F*(1-W)>a)return!1;$=0,T.resize(0),A.sh.length=0}}return m},o.NG=function(r,n,a){if(1>o.Sz(r,n,a,null))return!1;var c=new h.l,p=new h.l;r.A(c),n.A(p);var f=o.ms(c,p,a);return c=o.ms(p,c,a),!(!f||!c)||(f&&!c?!o.Am(n,r,a,!1):c&&!f?!o.Am(r,n,a,!1):!o.Am(r,n,a,!1)&&!o.Am(n,r,a,!1))},o.Sz=function(r,n,a,c){function p(ut,ht){return C.IE(ut,ht)}if(r.sz()>n.sz())var f=n,m=r;else f=r,m=n;r=f.Ha(),n=m.Ha();var w=[0,0],x=[0,0],$=-1,T=0,A=new h.ja(0),C=new o,N=new h.l,L=new h.l,D=new h.l;f.A(N),m.A(L),N.X(a,a),L.X(a,a),D.L(N),D.Fa(L),f=null,c!=null&&(f=new h.h);var F=L=L=null,V=m.Cb;for(V!=null?(L=V.Gb,F=V.Ao,L==null&&(L=h.ta.kj(m,D))):L=h.ta.kj(m,D),m=L.getIterator(),V=null,F!=null&&(V=F.getIterator());r.ab();)for(F=0;r.Ia();){var W=r.ia();if(W.A(N),N.isIntersecting(D)){if(V!=null&&(V.Yi(N,a),V.next()==-1))continue;var K=W.Rb();m.Vo(W,a);for(var B=m.next();B!=-1;B=m.next()){var ee=L.ka(B);n.Wb(ee);var ae=n.ia(),me=ae.Rb(),fe=W.Fa(ae,null,w,x,a);if(0<fe){B=w[0],$=x[0];var pe=fe==2?w[1]:NaN,be=fe==2?x[1]:NaN;if(fe==2){if(K*(pe-B)>a)return 1;var Pe=K*(pe-B);if(n.Ia()){if(ae=n.ia(),(fe=W.Fa(ae,null,w,null,a))==2){fe=w[0];var Re=w[1];if(Pe+(fe=K*(Re-fe))>a)return 1}n.Wb(ee),n.ia()}if(!n.xm()){if(n.mi(),ae=n.mi(),(fe=W.Fa(ae,null,w,null,a))==2&&(fe=w[0],Pe+(fe=K*((Re=w[1])-fe))>a))return 1;n.Wb(ee),n.ia()}if(r.Ia()){if(ee=r.xb(),(fe=(W=r.ia()).Fa(ae,null,w,null,a))==2&&(fe=w[0],Pe+(fe=K*((Re=w[1])-fe))>a))return 1;r.Wb(ee),r.ia()}if(!r.xm()){if(ee=r.xb(),r.mi(),(fe=(W=r.mi()).Fa(ae,null,w,null,a))==2&&(fe=w[0],Pe+(fe=me*((Re=w[1])-fe))>a))return 1;r.Wb(ee),r.ia()}ae=v.construct(r.xb(),r.gb,B,pe,n.xb(),n.gb,$,be),C.sh.push(ae),A.add(A.size)}$=0,c!=null&&(W.ic(B,f),c.add(f.x),c.add(f.y))}}if(T<C.sh.length){for(A.Wd(T,A.size,p),W=0,B=C.sh[A.get(T)].Om;T<C.sh.length;T++)if(!((ae=C.sh[A.get(T)]).Lj<W&&ae.Ti<W))if(K*(ae.Lj-W)>a)F=K*(ae.Ti-ae.Lj),W=ae.Ti,B=ae.Om;else{if(ae.Om!=B?(F=K*(ae.Ti-ae.Lj),B=ae.Om):F+=K*(ae.Ti-ae.Lj),F>a)return 1;if((W=ae.Ti)==1)break}K*(1-W)>a&&(F=0),T=0,A.resize(0),C.sh.length=0}}}return $},o.LG=function(r,n,a){var c=r.Ha(),p=n.Ha();for(r=new h.am(r,n,a,!1);r.next();){n=r.pl();var f=r.jl();if(c.Wb(n),p.Wb(f),n=c.ia(),0<p.ia().Fa(n,null,null,null,a))return!0}return!1},o.MG=function(r,n,a,c){var p=r.Ha(),f=new h.l,m=new h.l,w=new h.l;r.A(f),n.A(m),f.X(a,a),f.contains(m),m.X(a,a),w.L(f),w.Fa(m),(f=r.Cb)!=null?(f=f.Gb)==null&&(f=h.ta.kj(r,w)):f=h.ta.kj(r,w),r=f.getIterator();for(var x=new h.h,$=new h.h,T=a*a,A=0;A<n.I();A++)if(n.D(A,x),w.contains(x)){m.L(x.x,x.y,x.x,x.y),r.Yi(m,a);for(var C=!1,N=r.next();N!=-1;N=r.next())if(p.Wb(f.ka(N)),(N=p.ia()).ic(N.fe(x,!1),$),h.h.zc($,x)<=T){C=!0;break}if(c){if(!C)return!1}else if(C)return!0}return!!c},o.Tz=function(r,n,a){var c=new h.h,p=a*a,f=r.Ha();if((r=r.Cb)!=null&&(r=r.Gb)!=null){var m=new h.l;for(m.L(n),m=(a=r.EF(m,a)).next();m!=-1;m=a.next())if(f.Wb(r.ka(m)),f.Ia()){var w=(m=f.ia()).fe(n,!1);if(m.ic(w,c),h.h.zc(n,c)<=p)return!0}return!1}for(r=new h.l;f.ab();)for(;f.Ia();)if((m=f.ia()).A(r),r.X(a,a),r.contains(n)&&(w=m.fe(n,!1),m.ic(w,c),h.h.zc(n,c)<=p))return!0;return!1},o.JG=function(r,n,a){return o.Tz(r,n,a)&&!o.Uz(r,n,a)},o.Uz=function(r,n,a){return r=r.mg(),!o.kt(r,n,a)},o.KG=function(r,n,a){if(r.vm()){var c=new h.zb(n.v,n.G,n.v,n.H),p=new h.zb(n.v,n.H,n.C,n.H),f=new h.zb(n.C,n.H,n.C,n.G);for(n=new h.zb(n.C,n.G,n.v,n.G),r=r.Ha();r.ab();)for(;r.Ia();){var m=r.ia();if(m.isIntersecting(c,a)||m.isIntersecting(p,a)||m.isIntersecting(f,a)||m.isIntersecting(n,a))return!0}}else{(c=new h.l).L(n),c.X(a,a),a=r.vb(0),p=new h.h,f=new h.h,n=new h.h,m=new h.h;for(var w=0,x=r.ea();w<x;w++)for(var $=!0,T=r.Ca(w),A=r.Wc(w);T<A;T++)if($)a.uc(2*T,f),$=!1;else{if(a.uc(2*T,p),n.N(f),m.N(p),c.ty(n,m)!=0)return!0;f.N(p)}}return!1},o.qc=function(r,n,a){var c=r.K(),p=n.K();if(h.ba.yj(c)){var f=r.Cb;if(f!=null&&(f=f.Fk)!=null)if(p==33){var m=n.D();if((m=f.To(m.x,m.y))==1)return 1;if(m==0)return 4}else{if(m=new h.l,n.A(m),(m=f.So(m))==1)return 1;if(m==0)return 4;if(a&&h.ba.yj(p)&&o.zE(n,f))return 1073741824}}if(h.ba.yj(p)&&(f=n.Cb)!=null&&(f=f.Fk)!=null)if(c==33){if(r=r.D(),(m=f.To(r.x,r.y))==1)return 2;if(m==0)return 4}else{if(n=new h.l,r.A(n),(m=f.So(n))==1)return 2;if(m==0)return 4;if(a&&h.ba.yj(c)&&o.zE(r,f))return 1073741824}return 0},o.zE=function(r,n){for(var a=r.I(),c=new h.h,p=0;p<a;p++)if(r.D(p,c),n.To(c.x,c.y)==1)return!0;return!1},o.AI=function(r,n,a,c){for(var p=1<=r.qm(0)&&1<=n.qm(0),f=r.Ha(),m=n.Ha(),w=[0,0],x=[0,0],$=new h.am(r,n,a,!1),T=!1;$.next();){var A=$.pl(),C=$.jl();if(f.Wb(A),m.Wb(C),A=f.ia(),(C=m.ia().Fa(A,null,x,w,a))==2){if(T=w[0],C=w[1],A=A.Rb(),p&&(C-T)*A>a)return!1;T=!0}else if(C!=0){if(T=w[0],A=x[0],0<T&&1>T&&0<A&&1>A)return!1;T=!0}}return!!T&&(f=new h.l,m=new h.l,p=new h.l,r.A(f),n.A(m),f.X(1e3*a,1e3*a),m.X(1e3*a,1e3*a),p.L(f),p.Fa(m),!(10<r.I()&&(r=h.Vd.clip(r,p,a,0),r.B())||10<n.I()&&(n=h.Vd.clip(n,p,a,0),n.B()))&&h.cm.rt(r,n,a,"F********",c))},o.xI=function(r,n,a,c){var p=1<=r.qm(0)&&1<=n.qm(0),f=new h.l,m=new h.l,w=new h.l;r.A(f),n.A(m);for(var x=!1,$=o.ms(f,m,a),T=o.ms(m,f,a),A=r.Ha(),C=n.Ha(),N=[0,0],L=[0,0],D=new h.am(r,n,a,!1);D.next();){var F=D.pl(),V=D.jl();if(A.Wb(F),C.Wb(V),V=A.ia(),(F=C.ia().Fa(V,null,L,N,a))==2){F=N[0];var W=N[1];if(V=V.Rb(),p&&(W-F)*V>a&&(x=!0,$&&T))return!0}else if(F!=0&&(F=N[0],V=L[0],0<F&&1>F&&0<V&&1>V))return!0}if(p=new h.l,A=new h.l,p.L(f),p.X(1e3*a,1e3*a),A.L(m),A.X(1e3*a,1e3*a),w.L(p),w.Fa(A),f="",f=x?f+"**":f+"T*",$){if(10<n.I()&&(n=h.Vd.clip(n,w,a,0)).B())return!1;f+="****"}else f+="T***";if(T){if(10<r.I()&&(r=h.Vd.clip(r,w,a,0)).B())return!1;f+="***"}else f+="T**";return h.cm.rt(r,n,a,f.toString(),c)},o.tI=function(r,n,a,c){var p=[!1],f=o.rI(r,n,a,p);return p[0]?f:(p=new h.l,n.A(p),p.X(1e3*a,1e3*a),!(10<r.I()&&(r=h.Vd.clip(r,p,a,0),r.B()))&&h.cm.Tw(r,n,a,c))},o.rI=function(r,n,a,c){c[0]=!1;for(var p=r.Ha(),f=n.Ha(),m=[0,0],w=[0,0],x=new h.am(r,n,a,!1),$=!1;x.next();){var T=x.pl(),A=x.jl();if(p.Wb(T,-1),f.Wb(A,-1),T=p.ia(),(T=f.ia().Fa(T,null,w,m,a))!=0&&($=!0,T==1&&(T=m[0],A=w[0],0<T&&1>T&&0<A&&1>A)))return c[0]=!0,!1}if(!$){for(c[0]=!0,m=new h.l,r.A(m),m.X(a,a),x=r,$=!1,w=new h.l,c=0,p=n.ea();c<p;c++)if(0<n.Ka(c)){if(n.Sj(c,w),!m.isIntersecting(w)||(f=n.Oa(n.Ca(c)),(f=h.Fg.ym(x,f,0))==0))return!1;$||(!h.Fg.Ol(r,n.ea()-1)||r.Cb!=null&&r.Cb.Gb!=null?x=r:(f=new h.Ea,r.copyTo(f),f.gj(1),x=f),$=!0)}if(r.ea()==1||n.K()==1607)return!0;for(m=new h.l,n.A(m),m.X(a,a),w=n,x=!1,a=new h.l,c=0,p=r.ea();c<p;c++)if(0<r.Ka(c)){if(r.Sj(c,a),m.isIntersecting(a)&&(f=r.Oa(r.Ca(c)),(f=h.Fg.ym(w,f,0))==1))return!1;x||(!h.Fg.Ol(n,r.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?w=n:(f=new h.Ea,n.copyTo(f),f.gj(1),w=f),x=!0)}return!0}return!1},o.BI=function(r,n,a,c){for(var p=r.Ha(),f=n.Ha(),m=[0,0],w=[0,0],x=new h.am(r,n,a,!1),$=!1;x.next();){var T=x.pl(),A=x.jl();if(p.Wb(T),f.Wb(A),T=p.ia(),(T=f.ia().Fa(T,null,w,m,a))==2)$=!0;else if(T!=0){if($=m[0],T=w[0],0<$&&1>$&&0<T&&1>T)return!1;$=!0}}return!!$&&(f=new h.l,m=new h.l,p=new h.l,r.A(f),n.A(m),f.X(1e3*a,1e3*a),m.X(1e3*a,1e3*a),p.L(f),p.Fa(m),!(10<r.I()&&(r=h.Vd.clip(r,p,a,0),r.B())||10<n.I()&&(n=h.Vd.clip(n,p,a,0),n.B()))&&h.cm.bn(r,n,a,"F********",c))},o.vI=function(r,n,a,c){for(var p=r.Ha(),f=n.Ha(),m=[0,0],w=[0,0],x=new h.am(r,n,a,!1),$=!1;x.next();){var T=x.pl(),A=x.jl();if(p.Wb(T),f.Wb(A),T=p.ia(),(T=f.ia().Fa(T,null,w,m,a))==2)$=!0;else if(T!=0){if($=m[0],T=w[0],0<$&&1>$&&0<T&&1>T)return!0;$=!0}}return!!$&&(f=new h.l,m=new h.l,w=new h.l,x=new h.l,p=new h.l,r.A(f),n.A(m),o.ms(m,f,a)?(w.L(f),w.X(1e3*a,1e3*a),x.L(m),x.X(1e3*a,1e3*a),p.L(w),p.Fa(x),!(10<r.I()&&(r=h.Vd.clip(r,p,a,0),r.B())||10<n.I()&&(n=h.Vd.clip(n,p,a,0),n.B()))&&(a=h.cm.bn(r,n,a,"T********",c))):a=h.cm.bn(r,n,a,"T*****T**",c))},o.uI=function(r,n,a,c){var p=[!1],f=o.rI(r,n,a,p);return p[0]?f:(p=new h.l,n.A(p),p.X(1e3*a,1e3*a),!(10<r.I()&&(r=h.Vd.clip(r,p,a,0),r.B()))&&h.cm.$A(r,n,a,c))},o.sI=function(r,n,a){return h.jd.Zd(r,n,a)==1},o.zI=function(r,n,a){return h.jd.Zd(r,n,a)==2},o.kt=function(r,n,a){var c=new h.h;a*=a;for(var p=0;p<r.I();p++)if(r.D(p,c),h.h.zc(c,n)<=a)return!1;return!0},o.prototype.IE=function(r,n){return r=this.sh[r],n=this.sh[n],r.Om<n.Om||r.Om==n.Om&&(r.qw<n.qw||r.qw==n.qw&&(r.Lj<n.Lj||r.Lj==n.Lj&&(r.Ti<n.Ti||r.Ti==n.Ti&&r.tH<n.tH)))?-1:1},o}();h.vd=u}(G||(G={})),function(h){var k,v,u;(v=k||(k={}))[v.InteriorInterior=0]="InteriorInterior",v[v.InteriorBoundary=1]="InteriorBoundary",v[v.InteriorExterior=2]="InteriorExterior",v[v.BoundaryInterior=3]="BoundaryInterior",v[v.BoundaryBoundary=4]="BoundaryBoundary",v[v.BoundaryExterior=5]="BoundaryExterior",v[v.ExteriorInterior=6]="ExteriorInterior",v[v.ExteriorBoundary=7]="ExteriorBoundary",v[v.ExteriorExterior=8]="ExteriorExterior",function(o){o[o.AreaAreaPredicates=0]="AreaAreaPredicates",o[o.AreaLinePredicates=1]="AreaLinePredicates",o[o.LineLinePredicates=2]="LineLinePredicates",o[o.AreaPointPredicates=3]="AreaPointPredicates",o[o.LinePointPredicates=4]="LinePointPredicates",o[o.PointPointPredicates=5]="PointPointPredicates"}(u||(u={})),k=function(){function o(){this.le=0,this.j=new h.ju,this.J=[0,0,0,0,0,0,0,0,0],this.$a=[0,0,0,0,0,0,0,0,0],this.fa=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Um=this.ww=-1}return o.sB=function(r,n,a,c,p){if(c.length!=9)throw h.i.ga("relation string length has to be 9 characters");for(var f=0;9>f;f++){var m=c.charAt(f);if(m!="*"&&m!="T"&&m!="F"&&m!="0"&&m!="1"&&m!="2")throw h.i.ga("relation string")}if((f=this.DR(c,r.Eb(),n.Eb()))!=0)return h.vd.tB(r,n,a,f,p);f=new h.l,r.A(f),m=new h.l,n.A(m);var w=new h.l;if(w.L(f),w.$b(m),a=h.ta.Xd(a,w,!1),r=this.OE(r,a),n=this.OE(n,a),r.B()||n.B())return this.kW(r,n,c);switch(f=n.K(),m=!1,r.K()){case 1736:switch(f){case 1736:m=this.rt(r,n,a,c,p);break;case 1607:m=this.bn(r,n,a,c,p);break;case 33:m=this.qt(r,n,a,c);break;case 550:m=this.pt(r,n,a,c,p)}break;case 1607:switch(f){case 1736:m=this.bn(n,r,a,this.aq(c),p);break;case 1607:m=this.aB(r,n,a,c,p);break;case 33:m=this.tt(r,n,a,c,p);break;case 550:m=this.st(r,n,a,c,p)}break;case 33:switch(f){case 1736:m=this.qt(n,r,a,this.aq(c));break;case 1607:m=this.tt(n,r,a,this.aq(c),p);break;case 33:m=this.QU(r,n,a,c);break;case 550:m=this.lt(n,r,a,this.aq(c))}break;case 550:switch(f){case 1736:m=this.pt(n,r,a,this.aq(c),p);break;case 1607:m=this.st(n,r,a,this.aq(c),p);break;case 550:m=this.TA(r,n,a,c,p);break;case 33:m=this.lt(r,n,a,c)}break;default:m=!1}return m},o.rt=function(r,n,a,c,p){var f=new o;f.Zi(),f.cj(c),f.pJ();var m=new h.l,w=new h.l;return r.A(m),n.A(w),c=!1,h.vd.dk(m,w,a)&&(f.Du(r,n),c=!0),c||((m=h.vd.qc(r,n,!1))==4?(f.Du(r,n),c=!0):m==1?(f.gy(n),c=!0):m==2&&(f.RD(r),c=!0)),c||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Xo(c,a,p),f.Dp(r,n),f.j.Vg()),o.fg(f.J,f.Yc)},o.Tw=function(r,n,a,c){var p=new o;p.Zi(),p.cj("T*****F**"),p.pJ();var f=new h.l,m=new h.l;r.A(f),n.A(m);var w=!1;return h.vd.dk(f,m,a)&&(p.Du(r,n),w=!0),w||((f=h.vd.qc(r,n,!1))==4?(p.Du(r,n),w=!0):f==1?(p.gy(n),w=!0):f==2&&(p.RD(r),w=!0)),w?this.fg(p.J,p.Yc):(r=(w=new h.hd).Ib(r),f=w.Ib(n),h.Tk.W(w,a,c,!1),a=w.Ke(f).mg(),w.Ip(0,!0,!0),h.tn.W(w,r,-1,!1,c),w.I(r)!=0&&(h.tn.W(w,f,-1,!1,c),p.gr(w,c),(n=w.I(f)==0)||(p.Dp(r,f),p.j.Vg(),f=this.fg(p.J,p.Yc))?(r=w.Ke(r),r=(w=new h.hd).Ib(r),f=w.Ib(a),p.gr(w,c),p.le=0,p.Zi(),p.cj(n?"T*****F**":"******F**"),p.CB(),p.Dp(r,f),p.j.Vg(),this.fg(p.J,p.Yc)):f))},o.bn=function(r,n,a,c,p){var f=new o;f.Zi(),f.cj(c),f.CB();var m=new h.l,w=new h.l;return r.A(m),n.A(w),c=!1,h.vd.dk(m,w,a)&&(f.Eu(r,n),c=!0),c||((m=h.vd.qc(r,n,!1))==4?(f.Eu(r,n),c=!0):m==1&&(f.SD(n),c=!0)),c||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Xo(c,a,p),f.lh=f.j.Fp(),o.Kw(n,f.j,f.lh),f.Dp(r,n),f.j.Gp(f.lh),f.j.Vg()),o.fg(f.J,f.Yc)},o.$A=function(r,n,a,c){var p=new o;p.Zi(),p.cj("T*****F**"),p.CB();var f=new h.l,m=new h.l;r.A(f),n.A(m);var w=!1;return h.vd.dk(f,m,a)&&(p.Eu(r,n),w=!0),w||((f=h.vd.qc(r,n,!1))==4?(p.Eu(r,n),w=!0):f==1&&(p.SD(n),w=!0)),w?this.fg(p.J,p.Yc):(r=(w=new h.hd).Ib(r),n=w.Ib(n),p.Xo(w,a,c),w.I(r)!=0&&(p.Dp(r,n),p.j.Vg(),this.fg(p.J,p.Yc)))},o.pt=function(r,n,a,c,p){var f=new o;f.Zi(),f.cj(c),f.qJ();var m=new h.l,w=new h.l;return r.A(m),n.A(w),c=!1,h.vd.dk(m,w,a)&&(f.Fu(r),c=!0),c||((m=h.vd.qc(r,n,!1))==4?(f.Fu(r),c=!0):m==1&&(f.rN(),c=!0)),c||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Xo(c,a,p),f.Ay(r,n),f.j.Vg()),o.fg(f.J,f.Yc)},o.aB=function(r,n,a,c,p){var f=new o;f.Zi(),f.cj(c),f.SW(),c=new h.l;var m=new h.l;r.A(c),n.A(m);var w=!1;return h.vd.dk(c,m,a)&&(f.HG(r,n),w=!0),w||h.vd.qc(r,n,!1)!=4||(f.HG(r,n),w=!0),w||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Xo(c,a,p),f.Zh=f.j.Fp(),f.lh=f.j.Fp(),o.Kw(r,f.j,f.Zh),o.Kw(n,f.j,f.lh),f.Dp(r,n),f.j.Gp(f.Zh),f.j.Gp(f.lh),f.j.Vg()),o.fg(f.J,f.Yc)},o.st=function(r,n,a,c,p){var f=new o;f.Zi(),f.cj(c),f.EJ(),c=new h.l;var m=new h.l;r.A(c),n.A(m);var w=!1;return h.vd.dk(c,m,a)&&(f.Qz(r),w=!0),w||h.vd.qc(r,n,!1)!=4||(f.Qz(r),w=!0),w||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Xo(c,a,p),f.Zh=f.j.Fp(),o.Kw(r,f.j,f.Zh),f.Ay(r,n),f.j.Gp(f.Zh),f.j.Vg()),o.fg(f.J,f.Yc)},o.TA=function(r,n,a,c,p){var f=new o;f.Zi(),f.cj(c),f.JJ(),c=new h.l;var m=new h.l;r.A(c),n.A(m);var w=!1;return h.vd.dk(c,m,a)&&(f.qI(),w=!0),w||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Xo(c,a,p),f.Ay(r,n),f.j.Vg()),o.fg(f.J,f.Yc)},o.qt=function(r,n,a,c){var p=new o;p.Zi(),p.cj(c),p.qJ();var f=new h.l;r.A(f),n=n.D();var m=!1;return h.vd.Sw(n,f,a)&&(p.Fu(r),m=!0),m||((a=h.jd.Zd(r,n,a))==1?(p.J[0]=0,p.J[2]=2,p.J[3]=-1,p.J[5]=1,p.J[6]=-1):a==2?(p.J[6]=-1,r.He()!=0?(p.J[0]=-1,p.J[3]=0,p.J[2]=2,p.J[5]=1):(p.J[0]=0,p.J[3]=-1,p.J[5]=-1,a=new h.l,r.A(a),p.J[2]=a.da()==0&&a.S()==0?-1:1)):p.Fu(r)),this.fg(p.J,c)},o.tt=function(r,n,a,c,p){var f=new o;f.Zi(),f.cj(c),f.EJ();var m=new h.l;r.A(m),c=n.D();var w=!1;if(h.vd.Sw(c,m,a)&&(f.Qz(r),w=!0),!w){m=null;var x=w=!1;(f.fa[0]||f.fa[6])&&(h.vd.Tz(r,c,a)?(f.fa[0]&&(m=h.ri.im(r,p),x=!h.vd.kt(m,c,a),w=!0,f.J[0]=x?-1:0),f.J[6]=-1):(f.J[0]=-1,f.J[6]=0)),f.fa[3]&&(m!=null&&m.B()?f.J[3]=-1:(w||(m==null&&(m=h.ri.im(r,p)),x=!h.vd.kt(m,c,a),w=!0),f.J[3]=x?0:-1)),f.fa[5]&&(m!=null&&m.B()?f.J[5]=-1:w&&!x?f.J[5]=0:(m==null&&(m=h.ri.im(r,p)),p=h.vd.Ow(m,n,a),f.J[5]=p?-1:0)),f.fa[2]&&(r.Rb()!=0?f.J[2]=1:((p=new h.de(r.description)).Gd(r,0,r.I()),r=h.vd.Ow(p,n,a),f.J[2]=r?-1:0))}return this.fg(f.J,f.Yc)},o.lt=function(r,n,a,c){var p=new o;p.Zi(),p.cj(c),p.JJ();var f=new h.l;r.A(f),n=n.D();var m=!1;if(h.vd.Sw(n,f,a)&&(p.qI(),m=!0),!m){f=!1,m=!0,a*=a;for(var w=0;w<r.I();w++){var x=r.Oa(w);if(h.h.zc(x,n)<=a?f=!0:m=!1,f&&!m)break}f?(p.J[0]=0,p.J[2]=m?-1:0,p.J[6]=-1):(p.J[0]=-1,p.J[2]=0,p.J[6]=0)}return o.fg(p.J,c)},o.QU=function(r,n,a,c){r=r.D(),n=n.D();for(var p=[],f=0;9>f;f++)p[f]=-1;return h.h.zc(r,n)<=a*a?p[0]=0:(p[2]=0,p[6]=0),p[8]=2,o.fg(p,c)},o.fg=function(r,n){for(var a=0;9>a;a++)switch(n.charAt(a)){case"T":if(r[a]==-1)return!1;break;case"F":if(r[a]!=-1)return!1;break;case"0":if(r[a]!=0)return!1;break;case"1":if(r[a]!=1)return!1;break;case"2":if(r[a]!=2)return!1}return!0},o.kW=function(r,n,a){var c=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(r.B()&&n.B()){for(var p=0;9>p;p++)c[p]=-1;return this.fg(c,a)}return p=!1,r.B()&&(r=n,p=!0),c[0]=-1,c[1]=-1,c[3]=-1,c[4]=-1,c[6]=-1,c[7]=-1,c[8]=2,n=r.K(),h.ba.Ic(n)?n==1736?r.He()!=0?(c[2]=2,c[5]=1):(c[5]=-1,n=new h.l,r.A(n),c[2]=n.da()==0&&n.S()==0?0:1):(n=r.Rb()!=0,c[2]=n?1:0,c[5]=h.ri.cq(r)?0:-1):(c[2]=0,c[5]=-1),p&&this.nK(c),this.fg(c,a)},o.DR=function(r,n,a){return o.WP(r)?3:o.MP(r)?4:o.RX(r,n,a)?8:o.uP(r,n,a)?16:o.XO(r)?1:o.uU(r,n,a)?32:0},o.WP=function(r){return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="F"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="F"&&r.charAt(6)=="F"&&r.charAt(7)=="F"&&r.charAt(8)=="*"},o.MP=function(r){return r.charAt(0)=="F"&&r.charAt(1)=="F"&&r.charAt(2)=="*"&&r.charAt(3)=="F"&&r.charAt(4)=="F"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"},o.RX=function(r,n,a){return(n!=0||a!=0)&&((n!=2||a!=2)&&(r.charAt(0)=="F"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="T"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"||n==1&&a==1&&r.charAt(0)=="F"&&r.charAt(1)=="T"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*")||a!=0&&r.charAt(0)=="F"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="T"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*")},o.uP=function(r,n,a){return n>a?r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*":n==1&&a==1&&r.charAt(0)=="0"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"},o.XO=function(r){return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="F"&&r.charAt(7)=="F"&&r.charAt(8)=="*"},o.uU=function(r,n,a){if(n==a){if(n!=1)return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="T"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*";if(r.charAt(0)=="1"&&r.charAt(1)=="*"&&r.charAt(2)=="T"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*")return!0}return!1},o.Kw=function(r,n,a){r=n.Ma(r);for(var c=n.Oe;c!=-1;c=n.Sf(c))if((n.yd(c)&r)!=0){var p=n.Je(c);if(p==-1)n.pn(c,a,0);else{var f=p,m=0;do(n.eh(f)&r)!=0&&m++,f=n.kc(n.ya(f));while(f!=p);n.pn(c,a,m)}}},o.aq=function(r){var n=""+r.charAt(0);return n+=r.charAt(3),n+=r.charAt(6),n+=r.charAt(1),n+=r.charAt(4),n+=r.charAt(7),n+=r.charAt(2),(n+=r.charAt(5))+r.charAt(8)},o.prototype.Zi=function(){for(var r=0;9>r;r++)this.J[r]=-2,this.$a[r]=-2},o.nK=function(r){var n=r[1],a=r[2],c=r[5];r[1]=r[3],r[2]=r[6],r[5]=r[7],r[3]=n,r[6]=a,r[7]=c},o.prototype.cj=function(r){for(this.Yc=r,r=0;9>r;r++)this.Yc.charAt(r)!="*"?(this.fa[r]=!0,this.le++):this.fa[r]=!1},o.prototype.MJ=function(){for(var r=0;9>r;r++)this.fa[r]&&this.J[r]==-2&&(this.J[r]=-1,this.fa[r]=!1)},o.prototype.pc=function(r){return this.J[r]!=-2&&(this.J[r]==-1?(this.fa[r]=!1,this.le--,!0):this.Yc.charAt(r)!="T"&&this.Yc.charAt(r)!="F"?!(this.J[r]<this.$a[r])&&(this.fa[r]=!1,this.le--,!0):(this.fa[r]=!1,this.le--,!0))},o.prototype.pJ=function(){this.ww=0,this.$a[0]=2,this.$a[1]=1,this.$a[2]=2,this.$a[3]=1,this.$a[4]=1,this.$a[5]=1,this.$a[6]=2,this.$a[7]=1,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},o.prototype.CB=function(){this.ww=1,this.Um=3,this.$a[0]=1,this.$a[1]=0,this.$a[2]=2,this.$a[3]=1,this.$a[4]=0,this.$a[5]=1,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},o.prototype.SW=function(){this.ww=2,this.Um=4,this.$a[0]=1,this.$a[1]=0,this.$a[2]=1,this.$a[3]=0,this.$a[4]=0,this.$a[5]=0,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},o.prototype.qJ=function(){this.Um=3,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=2,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.le--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.le--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.le--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},o.prototype.EJ=function(){this.Um=4,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=1,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=0,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.le--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.le--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.le--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},o.prototype.JJ=function(){this.Um=5,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=0,this.$a[3]=-1,this.$a[4]=-1,this.$a[5]=-1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.le--),this.fa[3]&&(this.J[3]=-1,this.fa[3]=!1,this.le--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.le--),this.fa[5]&&(this.J[5]=-1,this.fa[5]=!1,this.le--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.le--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},o.prototype.pN=function(r,n,a){var c=!0;return this.fa[0]&&(this.tS(r,n,a),c=c&&this.pc(0)),this.fa[1]&&(this.kG(r,n,1),c=c&&this.pc(1)),this.fa[2]&&(this.lG(r,n,a,2),c=c&&this.pc(2)),this.fa[3]&&(this.kG(r,a,3),c=c&&this.pc(3)),this.fa[4]&&(this.tN(r,n,a),c=c&&this.pc(4)),this.fa[5]&&(this.XD(r,a,5),c=c&&this.pc(5)),this.fa[6]&&(this.lG(r,a,n,6),c=c&&this.pc(6)),this.fa[7]&&(this.XD(r,n,7),c=c&&this.pc(7)),c},o.prototype.Du=function(r,n){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Hr(r,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5)),this.Hr(n,this.fa[6]?6:-1,this.Yc.charAt(6),this.fa[7]?7:-1,this.Yc.charAt(7))},o.prototype.Hr=function(r,n,a,c,p){n==-1&&c==-1||((a!="T"&&a!="F"&&n!=-1||p!="T"&&p!="F"&&c!=-1)&&r.He()==0?(c!=-1&&(this.J[c]=-1),n!=-1&&(a=new h.l,r.A(a),this.J[n]=a.da()==0&&a.S()==0?0:1)):(n!=-1&&(this.J[n]=2),c!=-1&&(this.J[c]=1)))},o.prototype.gy=function(r){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Hr(r,this.fa[0]?0:-1,this.Yc.charAt(0),this.fa[1]?1:-1,this.Yc.charAt(1))},o.prototype.RD=function(r){this.gy(r),o.nK(this.J)},o.prototype.Eu=function(r,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[6]){var a=this.Yc.charAt(6);a=a=="T"||a=="F"||n.Rb()!=0,this.J[6]=a?1:0}this.fa[7]&&(n=h.ri.cq(n),this.J[7]=n?0:-1),this.Hr(r,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},o.prototype.SD=function(r){if(this.fa[0]){var n=this.Yc.charAt(0);n=n=="T"||n=="F"||r.Rb()!=0,this.J[0]=n?1:0}this.fa[1]&&(r=h.ri.cq(r),this.J[1]=r?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},o.prototype.Fu=function(r){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Hr(r,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},o.prototype.rN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},o.prototype.HG=function(r,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[2]){var a=this.Yc.charAt(2);a=a=="T"||a=="F"||r.Rb()!=0,this.J[2]=a?1:0}this.fa[5]&&(r=h.ri.cq(r),this.J[5]=r?0:-1),this.fa[6]&&(a=(a=this.Yc.charAt(6))=="T"||a=="F"||n.Rb()!=0,this.J[6]=a?1:0),this.fa[7]&&(n=h.ri.cq(n),this.J[7]=n?0:-1)},o.prototype.Qz=function(r){if(this.J[0]=-1,this.J[3]=-1,this.fa[2]){var n=this.Yc.charAt(2);n=n=="T"||n=="F"||r.Rb()!=0,this.J[2]=n?1:0}this.fa[5]&&(r=h.ri.cq(r),this.J[5]=r?0:-1),this.J[6]=0},o.prototype.qI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},o.prototype.qN=function(r,n,a){var c=!0;return this.fa[0]&&(this.uS(r,n),c=c&&this.pc(0)),this.fa[1]&&(this.qS(r,n,a,this.lh),c=c&&this.pc(1)),this.fa[2]&&(this.rS(r,n),c=c&&this.pc(2)),this.fa[3]&&(this.xN(r,n,a,this.lh),c=c&&this.pc(3)),this.fa[4]&&(this.uN(r,n,a,this.lh),c=c&&this.pc(4)),this.fa[5]&&(this.vN(r,n,a),c=c&&this.pc(5)),this.fa[6]&&(this.dQ(r,n),c=c&&this.pc(6)),this.fa[7]&&(this.cQ(r,n,a,this.lh),c=c&&this.pc(7)),c},o.prototype.cT=function(r,n,a){var c=!0;return this.fa[0]&&(this.xS(r,n,a,this.Zh,this.lh),c=c&&this.pc(0)),this.fa[1]&&(this.mG(r,n,a,this.Zh,this.lh,1),c=c&&this.pc(1)),this.fa[2]&&(this.nG(r,n,a,2),c=c&&this.pc(2)),this.fa[3]&&(this.mG(r,a,n,this.lh,this.Zh,3),c=c&&this.pc(3)),this.fa[4]&&(this.zN(r,n,a,this.Zh,this.lh),c=c&&this.pc(4)),this.fa[5]&&(this.YD(r,a,this.Zh,5),c=c&&this.pc(5)),this.fa[6]&&(this.nG(r,a,n,6),c=c&&this.pc(6)),this.fa[7]&&(this.YD(r,n,this.lh,7),c=c&&this.pc(7)),c},o.prototype.TD=function(r,n,a){var c=!0;return this.fa[0]&&(this.vS(r,n),c=c&&this.pc(0)),this.fa[2]&&(this.sS(r,n),c=c&&this.pc(2)),this.fa[3]&&(this.yN(r,n,a),c=c&&this.pc(3)),this.fa[5]&&(this.wN(r,n),c=c&&this.pc(5)),this.fa[6]&&(this.eQ(r,n),c=c&&this.pc(6)),c},o.prototype.IG=function(r,n,a){var c=!0;return this.fa[0]&&(this.yS(r,n,a,this.Zh),c=c&&this.pc(0)),this.fa[2]&&(this.wS(r,a),c=c&&this.pc(2)),this.fa[3]&&(this.BN(r,n,a,this.Zh),c=c&&this.pc(3)),this.fa[5]&&(this.AN(r,n,a,this.Zh),c=c&&this.pc(5)),this.fa[6]&&(this.fQ(r,n,a),c=c&&this.pc(6)),c},o.prototype.PU=function(r,n,a){var c=!0;return this.fa[0]&&(this.zS(r,n,a),c=c&&this.pc(0)),this.fa[2]&&(this.oG(r,n,a,2),c=c&&this.pc(2)),this.fa[6]&&(this.oG(r,a,n,6),c=c&&this.pc(6)),c},o.prototype.tS=function(r,n,a){this.J[0]!=2&&((r=this.j.af(r))&n)!=0&&(r&a)!=0&&(this.J[0]=2)},o.prototype.kG=function(r,n,a){if(this.J[a]!=1){var c=this.j.af(this.j.ya(r));(this.j.af(r)&n)!=0&&(c&n)!=0&&(this.J[a]=1)}},o.prototype.lG=function(r,n,a,c){this.J[c]!=2&&((r=this.j.af(r))&n)!=0&&(r&a)==0&&(this.J[c]=2)},o.prototype.tN=function(r,n,a){if(this.J[4]!=1){var c=this.j.eh(r);(c&n)!=0&&(c&a)!=0?this.J[4]=1:this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Vi)!=1&&((r=this.j.yd(this.j.vf(r)))&n)!=0&&(r&a)!=0&&(this.J[4]=0)}},o.prototype.XD=function(r,n,a){if(this.J[a]!=1){var c=this.j.af(this.j.ya(r));(this.j.af(r)&n)==0&&(c&n)==0&&(this.J[a]=1)}},o.prototype.uS=function(r,n){if(this.J[0]!=1){var a=this.j.af(this.j.ya(r));(this.j.af(r)&n)!=0&&(a&n)!=0&&(this.J[0]=1)}},o.prototype.qS=function(r,n,a,c){if(this.J[1]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Vi)!=1){var p=this.j.vf(r),f=this.j.yd(p);(f&n)==0&&(this.j.af(r)&n)!=0&&(r=this.j.ng(p,c),(f&a)!=0&&r%2!=0&&(this.J[1]=0))}},o.prototype.rS=function(r,n){this.J[2]!=2&&(this.j.eh(r)&n)!=0&&(this.J[2]=2)},o.prototype.xN=function(r,n,a,c){if(this.J[3]!=1){var p=this.j.eh(r);(p&n)!=0&&(p&a)!=0?this.J[3]=1:this.J[3]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Vi)!=1&&(p=this.j.vf(r),((r=this.j.yd(p))&n)!=0&&(n=this.j.ng(p,c),(r&a)!=0&&n%2==0&&(this.J[3]=0)))}},o.prototype.uN=function(r,n,a,c){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Vi)!=1){var p=this.j.vf(r);((r=this.j.yd(p))&n)!=0&&(n=this.j.ng(p,c),(r&a)!=0&&n%2!=0&&(this.J[4]=0))}},o.prototype.vN=function(r,n,a){this.J[5]!=1&&((r=this.j.eh(r))&n)!=0&&(r&a)==0&&(this.J[5]=1)},o.prototype.dQ=function(r,n){if(this.J[6]!=1){var a=this.j.af(this.j.ya(r));(this.j.af(r)&n)==0&&(a&n)==0&&(this.J[6]=1)}},o.prototype.cQ=function(r,n,a,c){if(this.J[7]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Vi)!=1){var p=this.j.vf(r),f=this.j.yd(p);(f&n)==0&&(this.j.af(r)&n)==0&&(r=this.j.ng(p,c),(f&a)!=0&&r%2!=0&&(this.J[7]=0))}},o.prototype.xS=function(r,n,a,c,p){if(this.J[0]!=1){var f=this.j.eh(r);(f&n)!=0&&(f&a)!=0?this.J[0]=1:this.J[0]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Vi)!=1&&(r=this.j.vf(r),((f=this.j.yd(r))&n)!=0&&(f&a)!=0&&(n=this.j.ng(r,c),p=this.j.ng(r,p),n%2==0&&p%2==0&&(this.J[0]=0)))}},o.prototype.mG=function(r,n,a,c,p,f){if(this.J[f]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Vi)!=1){r=this.j.vf(r);var m=this.j.yd(r);(m&n)!=0&&(m&a)!=0&&(n=this.j.ng(r,c),p=this.j.ng(r,p),n%2==0&&p%2!=0&&(this.J[f]=0))}},o.prototype.nG=function(r,n,a,c){this.J[c]!=1&&((r=this.j.eh(r))&n)!=0&&(r&a)==0&&(this.J[c]=1)},o.prototype.zN=function(r,n,a,c,p){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Vi)!=1){r=this.j.vf(r);var f=this.j.yd(r);(f&n)!=0&&(f&a)!=0&&(n=this.j.ng(r,c),p=this.j.ng(r,p),n%2!=0&&p%2!=0&&(this.J[4]=0))}},o.prototype.YD=function(r,n,a,c){this.J[c]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Vi)!=1&&(r=this.j.vf(r),(this.j.yd(r)&n)==0&&this.j.ng(r,a)%2!=0&&(this.J[c]=0))},o.prototype.vS=function(r,n){this.J[0]!=0&&(this.j.yd(r)&n)==0&&(this.j.hk(this.j.Yy(r))&n)!=0&&(this.J[0]=0)},o.prototype.sS=function(r,n){this.J[2]!=2&&(this.j.yd(r)&n)!=0&&(this.J[2]=2)},o.prototype.yN=function(r,n,a){this.J[3]!=0&&((r=this.j.yd(r))&n)!=0&&(r&a)!=0&&(this.J[3]=0)},o.prototype.wN=function(r,n){this.J[5]!=1&&(this.j.yd(r)&n)!=0&&(this.J[5]=1)},o.prototype.eQ=function(r,n){this.J[6]!=0&&(this.j.yd(r)&n)==0&&(this.j.hk(this.j.Yy(r))&n)==0&&(this.J[6]=0)},o.prototype.yS=function(r,n,a,c){if(this.J[0]!=0){var p=this.j.yd(r);(p&n)!=0&&(p&a)!=0&&this.j.ng(r,c)%2==0&&(this.J[0]=0)}},o.prototype.wS=function(r,n){this.J[2]!=1&&(this.j.Je(r)!=-1?this.J[2]=1:this.J[2]!=0&&(this.j.yd(r)&n)==0&&(this.J[2]=0))},o.prototype.BN=function(r,n,a,c){if(this.J[3]!=0){var p=this.j.yd(r);(p&n)!=0&&(p&a)!=0&&this.j.ng(r,c)%2!=0&&(this.J[3]=0)}},o.prototype.AN=function(r,n,a,c){if(this.J[5]!=0){var p=this.j.yd(r);(p&n)!=0&&(p&a)==0&&this.j.ng(r,c)%2!=0&&(this.J[5]=0)}},o.prototype.fQ=function(r,n,a){this.J[6]!=0&&((r=this.j.yd(r))&n)==0&&(r&a)!=0&&(this.J[6]=0)},o.prototype.zS=function(r,n,a){this.J[0]!=0&&((r=this.j.yd(r))&n)!=0&&(r&a)!=0&&(this.J[0]=0)},o.prototype.oG=function(r,n,a,c){this.J[c]!=0&&((r=this.j.yd(r))&n)!=0&&(r&a)==0&&(this.J[c]=0)},o.prototype.Dp=function(r,n){var a=!1;r=this.j.Ma(r),n=this.j.Ma(n),this.Vi=this.j.ah();for(var c=this.j.Oe;c!=-1;c=this.j.Sf(c)){var p=this.j.Je(c);if(p==-1){if(this.Um!=-1)switch(this.Um){case 3:a=this.TD(c,r,n);break;case 4:a=this.IG(c,r,n);break;default:throw h.i.ga("internal error")}}else{var f=p;do{var m=f;if(this.j.Bb(m,this.Vi)!=1)do{switch(this.ww){case 0:a=this.pN(m,r,n);break;case 1:a=this.qN(m,r,n);break;case 2:a=this.cT(m,r,n);break;default:throw h.i.ga("internal error")}if(a)break;this.j.Kb(m,this.Vi,1),m=this.j.kc(m)}while(m!=f&&!a);if(a)break;f=this.j.kc(this.j.ya(m))}while(f!=p);if(a)break}}a||this.MJ(),this.j.Lg(this.Vi)},o.prototype.Ay=function(r,n){var a=!1;r=this.j.Ma(r),n=this.j.Ma(n);for(var c=this.j.Oe;c!=-1;c=this.j.Sf(c)){switch(this.Um){case 3:a=this.TD(c,r,n);break;case 4:a=this.IG(c,r,n);break;case 5:a=this.PU(c,r,n);break;default:throw h.i.Ra()}if(a)break}a||this.MJ()},o.prototype.gr=function(r,n){this.j.fr(r,n)},o.prototype.Xo=function(r,n,a){this.QP(r,n,a),this.gr(r,a)},o.prototype.QP=function(r,n,a){for(h.Tk.W(r,n,a,!1),r.Ip(0,!0,!0),n=r.ld;n!=-1;n=r.ve(n))r.jc(n)==1736&&h.tn.W(r,n,-1,!1,a)},o.OE=function(r,n){var a=r.K();return h.ba.zd(a)?((n=new h.Ua(r.description)).oc(r,!0),n):a==197?(a=new h.l,r.A(a),a.da()<=n&&a.S()<=n?(n=new h.Ta(r.description),r.tf(n),n):a.da()<=n||a.S()<=n?(n=new h.Ua(r.description),a=new h.Ta,r.If(0,a),n.nf(a),r.If(2,a),n.lineTo(a),n):((n=new h.Ea(r.description)).bd(r,!1),n)):r},o}(),h.cm=k}(G||(G={})),function(h){var k=function(){function o(r){this.Gm=new h.ja(0),this.ew=new h.ja(0),this.wt=new h.h,this.xt=new h.h,this.g=r,this.Is=-1}return o.prototype.cc=function(r){return this.g.cc(this.uz(r))},o.prototype.Cv=function(r){var n=this.dz(r);if(r=this.zF(r),this.g.Na(n)==r){var a=n;n=r,r=a}return this.g.Hc(n,this.wt),this.g.Hc(r,this.xt),this.wt.y<this.xt.y},o.prototype.uz=function(r){var n=this.dz(r);return r=this.zF(r),this.g.V(n)==r?n:r},o.prototype.dz=function(r){return this.Gm.get(r)},o.prototype.zF=function(r){return this.ew.get(r)},o.prototype.jF=function(r){this.Gm.set(r,this.Is),this.Is=r},o.prototype.fI=function(r){if(this.Is!=-1){var n=this.Is;return this.Is=this.Gm.get(n),this.Gm.set(n,r),this.ew.set(n,this.g.V(r)),n}return this.Gm==null&&(this.Gm=new h.ja(0),this.ew=new h.ja(0)),n=this.Gm.size,this.Gm.add(r),this.ew.add(this.g.V(r)),n},o.prototype.mz=function(r){return this.g.cd(this.dz(r))},o}();h.mY=k;var v=function(){function o(r){this.Ce=r,this.ie=new h.zb,this.Pm=new h.zb,this.uH=0,this.Bo=null,this.sA=-1}return o.prototype.compare=function(r,n,a){a=r.ka(a);var c=this.Ce.hb;if(this.sA==n)var p=this.uH;else this.Bo=c.cc(n),this.Bo==null?((r=c.g).fd(c.uz(n),this.ie),this.Bo=this.ie,p=this.ie.Me(this.Ce.zh,0)):p=this.Bo.Me(this.Ce.zh,0),this.uH=p,this.sA=n;if((r=c.cc(a))==null){(r=c.g).fd(c.uz(a),this.Pm),r=this.Pm;var f=this.Pm.Me(this.Ce.zh,0)}else f=r.Me(this.Ce.zh,0);return p==f&&(n=c.Cv(n),a=c.Cv(a),(n=.5*((a=Math.min(n?this.Bo.ma:this.Bo.oa,a?r.ma:r.oa))+this.Ce.zh))==this.Ce.zh&&(n=a),p=this.Bo.Me(n,0),f=r.Me(n,0)),p<f?-1:p>f?1:0},o.prototype.reset=function(){this.sA=-1},o}(),u=function(){function o(){this.Ym=this.Il=null,this.fb=new h.Yj,this.fb.JP(),this.ae=new v(this),this.fb.Wo(this.ae)}return o.prototype.zQ=function(){var r=!1;if(this.gw&&(r=this.AQ()),this.g.ea(this.Y)==1){var n=this.g.Ob(this.Y);return r=this.g.qz(n),this.g.JB(n,!0),0>r&&(r=this.g.Ya(n),this.g.hJ(r),this.g.Xg(n,this.g.Na(r)),!0)}for(this.Gl=this.g.Ey(),this.xo=this.g.Ey(),n=this.g.Ob(this.Y);n!=-1;n=this.g.Sb(n))this.g.ir(n,this.Gl,0),this.g.ir(n,this.xo,-1);n=new h.ja(0),this.zh=NaN;var a=new h.h;this.et=this.g.ea(this.Y),this.so=this.g.Hd(),this.Ss=this.g.Hd();for(var c=this.Il.sc(this.Il.je);c!=-1;c=this.Il.lb(c)){var p=this.Il.getData(c);if(this.g.Hc(p,a),a.y!=this.zh&&n.size!=0&&(r=this.ut(n)||r,this.ae.reset(),n.clear(!1)),n.add(p),this.zh=a.y,this.et==0)break}for(0<this.et&&(r=this.ut(n)||r,n.clear(!1)),this.g.Ud(this.so),this.g.Ud(this.Ss),n=this.g.Ob(this.Y);n!=-1;)if(this.g.tj(n,this.Gl)==3){for(this.g.JB(n,!0),a=n,n=this.g.tj(n,this.xo);n!=-1;)c=this.g.tj(n,this.xo),this.g.PT(this.Y,this.g.Sb(a),n),a=n,n=c;n=this.g.Sb(a)}else this.g.JB(n,!1),n=this.g.Sb(n);return this.g.wB(this.Gl),this.g.wB(this.xo),r},o.prototype.ut=function(r){return this.QV(r)},o.prototype.QV=function(r){var n=!1;this.hb==null&&(this.hb=new k(this.g)),this.Ym==null?(this.Ym=new h.ja(0),this.Ym.Jb(16)):this.Ym.clear(!1),this.PV(r);for(var a=0,c=r.size;a<c;a++){var p=r.get(a);p!=-1&&this.gG(p,-1)}for(a=0;a<this.Ym.size&&0<this.et;a++)if(r=this.Ym.get(a),p=this.hb.mz(this.fb.ka(r)),c=-1,this.g.tj(p,this.Gl)==0){p=this.fb.xe(r);for(var f,m=r;p!=-1;){var w=this.fb.ka(p),x=this.hb.mz(w),$=this.g.tj(x,this.Gl);if($!=0){c=x;break}m=p,p=this.fb.xe(p)}p==-1?(f=!0,p=m):(w=this.fb.ka(p),f=this.hb.Cv(w),p=this.fb.lb(p),f=!f);do{if(w=this.fb.ka(p),x=this.hb.mz(w),($=this.g.tj(x,this.Gl))==0&&(f!=this.hb.Cv(w)&&(n=this.g.Ya(x),this.g.hJ(n),this.g.Xg(x,this.g.Na(n)),n=!0),this.g.ir(x,this.Gl,f?3:2),f||(m=this.g.tj(c,this.xo),this.g.ir(c,this.xo,x),this.g.ir(x,this.xo,m)),this.et--,this.et==0))return n;c=x,m=p,p=this.fb.lb(p),f=!f}while(m!=r)}return n},o.prototype.PV=function(r){for(var n=0,a=r.size;n<a;n++){var c=r.get(n),p=this.g.Qa(c,this.so),f=this.g.Qa(c,this.Ss);if(p!=-1){var m=this.fb.ka(p);this.hb.jF(m),this.g.Sa(c,this.so,-1)}f!=-1&&(m=this.fb.ka(f),this.hb.jF(m),this.g.Sa(c,this.Ss,-1)),m=-1,p!=-1&&f!=-1?(this.fb.wd(p,-1),this.fb.wd(f,-1),r.set(n,-1)):m=p!=-1?p:f,m!=-1&&(this.gG(c,m)||this.fb.wd(m,-1),r.set(n,-1))}},o.prototype.gG=function(r,n){var a=new h.h,c=new h.h;this.g.Hc(r,a);var p=this.g.V(r);this.g.Hc(p,c);var f=!1;if(a.y<c.y){f=!0;var m=this.hb.fI(r);if(n==-1)var w=this.fb.addElement(m,-1);else w=n,this.fb.Tj(w,m);(m=this.g.Qa(p,this.so))==-1?this.g.Sa(p,this.so,w):this.g.Sa(p,this.Ss,w),p=this.g.cd(r),this.g.tj(p,this.Gl)==0&&this.Ym.add(w)}return p=this.g.Na(r),this.g.Hc(p,c),a.y<c.y&&(f=!0,m=this.hb.fI(p),n==-1?w=this.fb.addElement(m,-1):(w=n,this.fb.Tj(w,m)),(m=this.g.Qa(p,this.so))==-1?this.g.Sa(p,this.so,w):this.g.Sa(p,this.Ss,w),p=this.g.cd(r),this.g.tj(p,this.Gl)==0&&this.Ym.add(w)),f},o.W=function(r,n,a,c){var p=new o;return p.g=r,p.Y=n,p.Il=a,p.gw=c,p.zQ()},o.prototype.AQ=function(){var r=new h.ja(0),n=new h.ja(0),a=-1,c=-1,p=new h.h;p.Sc();for(var f=-1,m=-1,w=-1,x=new h.h,$=this.Il.sc(this.Il.je);$!=-1;$=this.Il.lb($)){var T=this.Il.getData($);this.g.Hc(T,x);var A=this.g.cd(T);p.rb(x)&&m==A?(c==-1&&(a=this.g.Ey(),c=this.g.Hd()),w==-1&&(w=n.size,this.g.Sa(f,c,w),n.add(1),this.g.tj(A,a)==-1&&(this.g.ir(A,a,f),r.add(A))),this.g.Sa(T,c,w),n.PW(n.Gc()+1)):(w=-1,p.N(x)),f=T,m=A}if(r.size==0)return!1;for(p=new h.ja(0),f=new h.ja(0),m=0,w=r.size;m<w;m++){A=r.get(m);var C=this.g.tj(A,a);for(T=this.g.Qa(C,c),p.clear(!1),f.clear(!1),p.add(C),f.add(T),T=this.g.V(C);T!=C;T=this.g.V(T)){var N=T;if((x=this.g.Qa(N,c))!=-1)if(f.size==0)f.add(x),p.add(N);else if(f.Gc()==x){$=p.Gc();var L=this.g.V($);C=this.g.V(N),this.g.Cc($,C),this.g.Dc(C,$),this.g.Cc(N,L),this.g.Dc(L,N),N=[!1],L=this.g.fG(this.Y,L,this.g.Ya(A),N),this.g.Sa(T,c,-1),N[0]&&this.g.Kf(A,C),T=this.g.Ka(A),T-=C=this.g.Ka(L),this.g.Wj(A,T),n.set(x,n.get(x)-1),n.get(x)==1&&(n.set(x,0),f.Jf(),p.Jf()),T=C=$}else p.add(T),f.add(x)}}return this.g.wB(a),this.g.Ud(c),!0},o}();h.OL=u}(G||(G={})),function(h){var k=function(){function v(){}return v.prototype.hg=function(){this.JA=this.tb=null},v.prototype.get=function(){return this.JA},v.prototype.set=function(u){if(this.JA=u,u!=null)throw u.K()==322&&(this.tb=u),h.i.Ra()},v.prototype.create=function(u){if(u!=322)throw h.i.ga("Not Implemented");this.Pr()},v.prototype.Pr=function(){this.tb==null&&(this.tb=new h.zb),this.JA=this.tb},v}();h.hg=k}(G||(G={})),function(h){(h=h.PL||(h.PL={}))[h.enumLineSeg=1]="enumLineSeg",h[h.enumBezierSeg=2]="enumBezierSeg",h[h.enumArcSeg=4]="enumArcSeg",h[h.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",h[h.enumSegmentMask=7]="enumSegmentMask",h[h.enumDensified=8]="enumDensified"}(G||(G={})),function(h){var k=function(u){this.aj=u,this.jC=this.kC=1,this.mB=this.lB=this.nB=0},v=function(){function u(){this.Hq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Cf=new h.Ta,this.ra=this.Dw=0,this.no=[],this.at=[],this.zw=[],this.Kq=[],this.GA=[]}return u.prototype.qB=function(o){if(o!=null){for(var r=0,n=o.length;r<n;r++)this.hW(o[r]);o.length=0}},u.prototype.hW=function(o){o.aj=null,this.Kq.push(o)},u.prototype.Pw=function(o){if(this.Kq.length===0)var r=new k(o);else(r=this.Kq[this.Kq.length-1]).aj=o,--this.Kq.length;return r},u.prototype.JR=function(o,r){return o==0?this.at[r]:this.zw[r]},u.prototype.VA=function(){this.Dw>=this.GA.length&&this.GA.push(new h.hg);var o=this.GA[this.Dw];return this.Dw++,o},u.prototype.clear=function(){this.qB(this.no),this.qB(this.at),this.qB(this.zw),this.Dw=0},u.prototype.Po=function(o){this.no.push(this.Pw(o))},u.prototype.ql=function(o){return o==0?this.at.length:this.zw.length},u.prototype.Xp=function(o,r){return this.JR(o,r).aj},u.prototype.Fa=function(o,r){if(this.no.length!=2)throw h.i.Ra();this.ra=o;var n=h.mc.nx(.01*o),a=!1,c=this.no[0],p=this.no[1];if(r||(5&c.aj.Br(p.aj,o,!0))!=0){if(c.aj.K()==322){var f=c.aj;if(p.aj.K()==322){r=p.aj;var m=h.zb.Xx(f,r,null,this.Hq,this.Bk,o);if(m==0)throw h.zb.Xx(f,r,null,this.Hq,this.Bk,o),h.i.Ra();o=Array(9),h.P.av(o,null);for(var w=0;w<m;w++){var x=this.Hq[w],$=this.Bk[w],T=c.mB,A=1;x==0?(T=c.nB,A=c.kC):x==1&&(T=c.lB,A=c.jC);var C=p.mB,N=1;$==0?(C=p.nB,N=p.kC):$==1&&(C=p.lB,N=p.jC);var L=new h.h;T==C?(T=new h.h,f.ic(x,T),x=new h.h,r.ic($,x),N/=$=A+N,h.mc.GG(T,x,N,L),h.h.zc(L,T)+h.h.zc(L,x)>n&&(a=!0)):T>C?(f.ic(x,L),x=new h.h,r.ic($,x),h.h.zc(L,x)>n&&(a=!0)):(r.ic($,L),T=new h.h,f.ic(x,T),h.h.zc(L,T)>n&&(a=!0)),o[w]=L}for(c=0,p=-1,w=0;w<=m;w++)(N=w<m?this.Hq[w]:1)!=c&&(n=this.VA(),f.bh(c,N,n),p!=-1&&n.get().Ec(o[p]),w!=m&&n.get().Rc(o[w]),c=N,this.at.push(this.Pw(n.get()))),p=w;for(f=[0,0,0,0,0,0,0,0,0],w=0;w<m;w++)f[w]=w;for(1<m&&this.Bk[0]>this.Bk[1]&&(N=this.Bk[0],this.Bk[0]=this.Bk[1],this.Bk[1]=N,w=f[0],f[0]=f[1],f[1]=w),c=0,p=-1,w=0;w<=m;w++)(N=w<m?this.Bk[w]:1)!=c&&(n=this.VA(),r.bh(c,N,n),p!=-1&&(c=f[p],n.get().Ec(o[c])),w!=m&&(c=f[w],n.get().Rc(o[c])),c=N,this.zw.push(this.Pw(n.get()))),p=w;return a}}throw h.i.Ra()}return!1},u.prototype.Fz=function(o,r,n){if(r.copyTo(this.Cf),this.no.length!=1)throw h.i.Ra();this.ra=o;var a=this.no[0];if(n||a.aj.su(r.D(),o,!0)){if(a.aj.K()!=322)throw h.i.Ra();var c=(o=a.aj).fe(r.D(),!1);this.Hq[0]=c;var p=a.mB;for(n=1,c==0?(p=a.nB,n=a.kC):c==1&&(p=a.lB,n=a.jC),a=new h.h,p==0?(p=new h.h,o.ic(c,p),r=r.D(),h.mc.GG(p,r,1/(n+1),a)):0<p?(a=new h.h,o.ic(c,a)):a=r.D(),n=0,c=-1,p=0;1>=p;p++){if((r=1>p?this.Hq[p]:1)!=n){var f=this.VA();o.bh(n,r,f),c!=-1&&f.get().Ec(a),p!=1&&f.get().Rc(a),n=r,this.at.push(this.Pw(f.get()))}c=p}this.Cf.Db(a)}},u}();h.LC=v}(G||(G={})),function(h){var k=function(){function v(u){this.Es=this.rk=this.tb=null,this.bg=0,this.Bm=!1,this.Af=-1,this.El=this.Kd=0,this.gb=-1,this.ib=u,this.bg=this.Ux(this.El),this.Bm=!1,this.rk=null,this.Es=new h.h}return v.prototype.rW=function(u){if(this.ib!=u.ib)throw h.i.Hb();this.Af=u.Af,this.Kd=u.Kd,this.gb=u.gb,this.El=u.El,this.bg=u.bg,this.Bm=u.Bm,this.rk=null},v.prototype.ia=function(){if(this.Af!=this.Kd&&this.tD(),this.Bm)this.Kd=(this.Kd+1)%this.bg;else{if(this.Kd==this.bg)throw h.i.re();this.Kd++}return this.rk},v.prototype.mi=function(){if(this.Bm)this.Kd=(this.bg+this.Kd-1)%this.bg;else{if(this.Kd==0)throw h.i.re();this.Kd--}return this.Kd!=this.Af&&this.tD(),this.rk},v.prototype.sW=function(){this.Af=-1,this.Kd=0},v.prototype.tW=function(){this.Kd=this.bg,this.Af=-1},v.prototype.Wb=function(u,o){if(o===void 0&&(o=-1),0<=this.gb&&this.gb<this.ib.ea()){var r=this.AM();if(u>=r&&u<this.ib.Wc(this.gb))return this.Af=-1,void(this.Kd=u-r)}o=0<=o&&o<this.ib.ea()&&u>=this.ib.Ca(o)&&u<this.ib.Wc(o)?o:this.ib.nz(u),this.El=o+1,this.gb=o,this.Af=-1,this.Kd=u-this.ib.Ca(o),this.bg=this.Ux(o),this.ib.Ca(this.gb),this.ib.ec(this.gb)},v.prototype.ab=function(){return this.gb=this.El,!(this.gb>=this.ib.ea())&&(this.Af=-1,this.Kd=0,this.bg=this.Ux(this.gb),this.ib.Ca(this.gb),this.ib.ec(this.gb),this.El++,!0)},v.prototype.$i=function(){this.bg=this.Kd=this.Af=-1,this.El=0,this.gb=-1},v.prototype.Ux=function(u){if(this.ib.Bc())return 0;var o=1;return this.ib.ec(u)&&(o=0),this.ib.Ka(u)-o},v.prototype.Pn=function(){return this.Af==this.bg-1&&this.ib.ec(this.gb)},v.prototype.DB=function(){this.Bm=!0},v.prototype.xb=function(){return this.ib.nb.o[this.gb]+this.Af},v.prototype.AM=function(){return this.ib.Ca(this.gb)},v.prototype.ik=function(){return this.Pn()?this.ib.Ca(this.gb):this.xb()+1},v.prototype.xm=function(){return this.Af==0},v.prototype.Rn=function(){return this.Af==this.bg-1},v.prototype.Ia=function(){return this.Kd<this.bg},v.prototype.zz=function(){return 0<this.Kd},v.prototype.Pf=function(){var u=new v(this.ib);return u.Af=this.Af,u.Kd=this.Kd,u.bg=this.bg,u.gb=this.gb,u.El=this.El,u.ib=this.ib,u.Bm=this.Bm,u},v.prototype.tD=function(){if(0>this.Kd||this.Kd>=this.bg)throw h.i.re();this.Af=this.Kd;var u=this.xb();this.ib.rc();var o=this.ib.Se,r=1;switch(o!=null&&(r=7&o.read(u)),o=this.ib.description,r){case 1:this.tb==null&&(this.tb=new h.zb),this.rk=this.tb;break;case 2:throw h.i.ga("internal error");default:throw h.i.Ra()}this.rk.kg(o),r=this.ik(),this.ib.Hc(u,this.Es),this.rk.Ec(this.Es),this.ib.Hc(r,this.Es),this.rk.Rc(this.Es);for(var n=1,a=o.Ba;n<a;n++)for(var c=o.qd(n),p=h.ua.Wa(c),f=0;f<p;f++){var m=this.ib.Vc(c,u,f);this.rk.RB(c,f,m),m=this.ib.Vc(c,r,f),this.rk.IB(c,f,m)}},v.prototype.QS=function(){return this.gb==this.ib.ea()-1},v.prototype.Qn=function(){var u=this.ib.MR();return u!=null&&(7&u.read(this.Af))!=1},v}();h.QL=k}(G||(G={})),function(h){var k=function(){function v(u){u instanceof h.ba?(this.pH=u,this.za=-1,this.Fi=1):(this.kT=u.slice(0),this.za=-1,this.Fi=u.length)}return v.prototype.Ma=function(){return this.za},v.prototype.next=function(){return this.za<this.Fi-1?(this.za++,this.pH!=null?this.pH:this.kT[this.za]):null},v.prototype.qe=function(){},v}();h.$c=k}(G||(G={})),function(h){var k=function(){this.next=null},v=function(){function u(){this.Vq=this.Lw=this.Mw=0,this.cF=!1,this.ZJ=0,this.jn=this.Lf=this.Yl=this.Kh=null,this.Ql=0,this.py=null,this.rl=this.pi=-1}return u.prototype.oX=function(o,r,n){this.pi=o,this.rl=r,this.Kh=this.Yl=null,this.Vq=0,this.py=n,this.jn==null&&(this.jn=h.P.lg(384,0)),this.fK()},u.prototype.S=function(){return this.pi},u.prototype.da=function(){return this.rl},u.prototype.flush=function(){0<this.Ql&&(this.py.ZE(this.jn,this.Ql),this.Ql=0)},u.prototype.fK=function(){if(0<this.Vq){for(var o=0;o<this.rl;o++){for(var r=this.Yl[o];r!=null;){var n=r;r=r.next,n.next=null}this.Yl[o]=null}this.Kh=null}this.Mw=this.rl,this.Lw=-1,this.Vq=0},u.prototype.aJ=function(o){for(this.cF=o==u.Ax,o=this.Mw;o<=this.Lw;o++)this.kN(),this.dN(o),this.RP();this.fK()},u.prototype.ey=function(o,r,n,a){if(r!=a){var c=1;if(r>a&&(c=o,o=n,n=c,c=r,r=a,a=c,c=-1),!(0>a||r>=this.rl)){0>o&&0>n?n=o=-1:o>=this.pi&&n>=this.pi&&(n=o=this.pi);var p=(n-o)/(a-r);a>this.rl&&(n=p*((a=this.rl)-r)+o),0>r&&(o=p*(0-r)+o,r=0);var f=Math.max(this.pi+1,8388607);-8388607>o?(r=(0-o)/p+r,o=0):o>f&&(r=(this.pi-o)/p+r,o=this.pi),-8388607>n?a=(0-o)/p+r:n>f&&(a=(this.pi-o)/p+r),(r=h.P.truncate(r))!=(a=h.P.truncate(a))&&((n=new k).x=h.P.truncate(4294967296*o),n.y=r,n.H=a,n.OP=h.P.truncate(4294967296*p),n.dir=c,this.Yl==null&&(this.Yl=h.P.lg(this.rl,null)),n.next=this.Yl[n.y],this.Yl[n.y]=n,n.y<this.Mw&&(this.Mw=n.y),n.H>this.Lw&&(this.Lw=n.H),this.Vq++)}}},u.prototype.kN=function(){if(this.Kh!=null){for(var o=!1,r=null,n=this.Kh;n!=null;)if(n.y++,n.y==n.H){var a=n;n=n.next,r!=null?r.next=n:this.Kh=n,a.next=null}else n.x+=n.OP,r!=null&&r.x>n.x&&(o=!0),r=n,n=n.next;o&&(this.Kh=this.YJ(this.Kh))}},u.prototype.dN=function(o){if(!(o>=this.rl)){var r=this.Yl[o];if(r!=null){this.Yl[o]=null,r=this.YJ(r),this.Vq-=this.ZJ,o=this.Kh;for(var n=!0,a=r,c=null;o!=null&&a!=null;)o.x>a.x?(n&&(this.Kh=a),n=a.next,a.next=o,c!=null&&(c.next=a),c=a,a=n):(n=o.next,o.next=a,c!=null&&(c.next=o),c=o,o=n),n=!1;this.Kh==null&&(this.Kh=r)}}},u.XJ=function(o,r){return 0>o?0:o>r?r:o},u.prototype.RP=function(){if(this.Kh!=null){for(var o=0,r=this.Kh,n=h.P.truncate(h.P.OG(r.x)),a=r.next;a!=null;a=a.next)if(o=this.cF?1^o:o+a.dir,a.x>r.x){var c=h.P.truncate(h.P.OG(a.x));o!=0&&(r=u.XJ(n,this.pi),(n=u.XJ(c,this.pi))>r&&r<this.pi&&(this.jn[this.Ql++]=r,this.jn[this.Ql++]=n,this.jn[this.Ql++]=a.y,this.Ql==this.jn.length&&(this.py.ZE(this.jn,this.Ql),this.Ql=0))),r=a,n=c}}},u.prototype.YJ=function(o){for(var r=0,n=o;n!=null;n=n.next)r++;if(this.ZJ=r,r==1)return o;this.Lf==null?this.Lf=h.P.lg(Math.max(r,16),null):this.Lf.length<r&&(this.Lf=h.P.lg(Math.max(r,2*this.Lf.length),null));var a=0;for(n=o;n!=null;n=n.next)this.Lf[a++]=n;for(r==2?this.Lf[0].x>this.Lf[1].x&&(o=this.Lf[0],this.Lf[0]=this.Lf[1],this.Lf[1]=o):u.sN(this.Lf,r,function(c,p){return c==p?0:c.x<p.x?-1:c.x>p.x?1:0}),o=this.Lf[0],this.Lf[0]=null,n=o,a=1;a<r;a++)n.next=this.Lf[a],n=this.Lf[a],this.Lf[a]=null;return n.next=null,o},u.sN=function(o,r,n){if(r==o.length)o.sort(n);else{var a=o.slice(0,0),c=o.slice(r);r=o.slice(0,r).sort(n),o.length=0,o.push.apply(o,a.concat(r).concat(c))}},u.Ax=0,u}();h.Nx=v}(G||(G={})),function(h){var k=function(){function v(){}return v.prototype.vi=function(u,o){var r=this.g.Qa(u,this.Rq);if(this.Fl==r&&(this.Fl=this.oe.lb(this.Fl)),this.io==r&&(this.io=this.oe.lb(this.io)),this.oe.kd(this.LA,r),this.bk(u),o&&(o=this.g.cd(u))!=-1&&this.g.Ya(o)==u){var n=this.g.V(u);if(n!=u){if((r=this.g.cd(n))==o)return void this.g.Kf(o,n);if((n=this.g.Na(u))!=u&&(r=this.g.cd(n))==o)return void this.g.Kf(o,n)}this.g.Kf(o,-1),this.g.Xg(o,-1)}},v.prototype.hD=function(){for(var u=!1,o=new h.h;;){this.Xh==null?(this.Xh=new h.ja(0),this.As=new h.ja(0),this.ye=new h.ja(0)):(this.Xh.clear(!1),this.As.clear(!1),this.ye.clear(!1));for(var r=this.io,n=0,a=!0;r!=this.Fl;){var c=this.oe.getData(r),p=new h.h;this.g.Hc(c,p),a&&(this.g.Hc(c,o),a=!1),p=this.g.Na(c);var f=this.g.V(c);this.g.Qa(p,this.zg)!=-559038737&&(this.Xh.add(p),this.g.Sa(p,this.zg,-559038737),this.As.add(c),this.ye.add(n++)),this.g.Qa(f,this.zg)!=-559038737&&(this.Xh.add(f),this.g.Sa(f,this.zg,-559038737),this.As.add(c),this.ye.add(n++)),r=this.oe.lb(r)}if(2>this.Xh.size)break;var m=this;for(this.ye.Wd(0,this.ye.size,function(w,x){return m.hM(w,x)}),r=0,n=this.ye.size;r<n;r++)a=this.ye.get(r),a=this.Xh.get(a),this.g.Sa(a,this.zg,r),p=new h.h,this.g.Hc(a,p);for(p=this.LM(o),r=0,n=this.ye.size;r<n;r++)(a=this.ye.get(r))!=-1&&(a=this.Xh.get(a),this.g.Sa(a,this.zg,-1));if(!p)break;u=!0}return u},v.prototype.LM=function(u){for(var o=!1,r=!0;r;){r=!1;var n=0;this.ye.get(n)==-1&&(n=this.em(n));for(var a=this.em(n),c=0,p=this.ye.size;c<p&&n!=-1&&a!=-1&&n!=a;c++){var f=this.ye.get(n);a=this.ye.get(a),f=this.Xh.get(f),a=this.Xh.get(a);var m=this.g.V(f);this.g.Ev(m,u)||(m=this.g.Na(f));var w=this.g.V(a);this.g.Ev(w,u)||(w=this.g.Na(a));var x=this.qu(m,f),$=this.qu(w,a),T=x?this.g.Na(m):this.g.V(m),A=$?this.g.Na(w):this.g.V(w),C=!1;(this.tp(m)||this.tp(w)||this.tp(f)||this.tp(a)||this.tp(T)||this.tp(A))&&(C=!0),!C&&this.g.hq(f,a)&&(C=!0,this.lD(x,$,m,f,w,a)),!C&&this.g.hq(T,A)&&(C=!0,this.lD(!x,!$,m,T,w,A)),C&&(o=!0),r=r||C,n=this.em(n),a=this.em(n)}}if(!o)for(n=0,this.ye.get(n)==-1&&(n=this.em(n)),a=this.em(n),c=0,p=this.ye.size;c<p&&n!=-1&&a!=-1&&n!=a;c++)f=this.ye.get(n),a=this.ye.get(a),f=this.Xh.get(f),a=this.Xh.get(a),m=this.g.V(f),this.g.Ev(m,u)||(m=this.g.Na(f)),w=this.g.V(a),this.g.Ev(w,u)||(w=this.g.Na(a)),x=this.qu(m,f),$=this.qu(w,a),T=x?this.g.Na(m):this.g.V(m),A=$?this.g.Na(w):this.g.V(w),this.vM(x,$,f,m,T,a,w,A)&&(o=!0),n=this.em(n),a=this.em(n);return o},v.prototype.PM=function(){this.g.jc(this.Y)==1736&&this.g.Jn(this.Y)==1&&new h.Hg().CU(this.gw,this.g,this.Y,this.nd);var u=!1,o=!0;this.zg=this.Rq=-1;var r=this.g.I(this.Y),n=new h.ja(0);n.Jb(r);for(var a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a))for(var c=this.g.Ya(a),p=0,f=this.g.Ka(a);p<f;p++)n.add(c),c=this.g.V(c);var m=this.g.ud.o,w=this.g.ud.Mf;this.g.wb.rc();var x=this.g.wb.Aa[0].o;for(n.Wd(0,r,function(T,A){var C=m[w*T],N=m[w*A],L=x[2*C];C=x[2*C+1];var D=x[2*N];return(L=C<(N=x[2*N+1])?-1:C>N?1:L<D?-1:L>D?1:0)==0&&(L=(T=m[w*T+3])<(A=m[w*A+3])?-1:T==A?0:1),L}),this.Rq=this.g.Hd(),this.oe=new h.kp,this.LA=this.oe.Qh(0),this.oe.hn(r),a=0;a<r;a++)c=n.get(a),p=this.oe.addElement(this.LA,c),this.g.Sa(c,this.Rq,p);for(this.zg=this.g.Hd(),this.Fl=-1,this.VC()&&(u=!0);o;){o=!1,r=0,n=!1;do{n=!1,this.io=-1,f=0,a=new h.h,p=new h.h;for(var $=this.oe.sc(this.LA);$!=-1;)c=this.oe.getData($),this.io!=-1?(this.g.Hc(c,p),a.rb(p)?f++:(a.N(p),this.Fl=$,0<f&&(c=this.hD())&&(n=!0,this.Fl!=-1&&(c=this.oe.getData(this.Fl),this.g.Hc(c,a))),this.io=$=this.Fl,f=0)):(this.io=$,this.g.Hc(this.oe.getData($),a),f=0),$!=-1&&($=this.oe.lb($));if(this.Fl=-1,0<f&&(c=this.hD())&&(n=!0),10<r++)throw h.i.Ra();n&&this.yM(),this.VC()&&(n=!0),o=o||n&&!1,u=u||n}while(n)}return this.g.Ud(this.Rq),this.g.Ud(this.zg),h.OL.W(this.g,this.Y,this.oe,this.gw)||u},v.prototype.qu=function(u,o){return this.g.V(o)!=u},v.prototype.vM=function(u,o,r,n,a,c,p,f){if(n==p)return this.bk(r),this.bk(c),!1;var m=this.g.Qa(r,this.zg),w=this.g.Qa(a,this.zg),x=this.g.Qa(c,this.zg),$=this.g.Qa(f,this.zg),T=[0,0,0,0];for((r=[0,0,0,0,0,0,0,0])[0]=0,T[0]=m,r[1]=0,T[1]=w,r[2]=1,T[2]=x,r[3]=1,T[3]=$,m=1;4>m;m++){for(w=T[m],x=r[m],$=m-1;0<=$&&T[$]>w;)T[$+1]=T[$],r[$+1]=r[$],$--;T[$+1]=w,r[$+1]=x}return T=0,r[0]!=0&&(T|=1),r[1]!=0&&(T|=2),r[2]!=0&&(T|=4),r[3]!=0&&(T|=8),(T==5||T==10)&&(u==o?u?(this.g.Cc(f,n),this.g.Dc(n,f),this.g.Cc(a,p),this.g.Dc(p,a)):(this.g.Dc(f,n),this.g.Cc(n,f),this.g.Dc(a,p),this.g.Cc(p,a)):u?(this.g.Dc(n,c),this.g.Cc(c,n),this.g.Dc(p,a),this.g.Cc(a,p)):(this.g.Cc(n,c),this.g.Dc(c,n),this.g.Cc(p,a),this.g.Dc(a,p)),!0)},v.prototype.lD=function(u,o,r,n,a,c){this.BY?this.NM():this.MM(u,o,r,n,a,c)},v.prototype.NM=function(){throw h.i.ga("not implemented.")},v.prototype.MM=function(u,o,r,n,a,c){if(u!=o)u?(this.g.Cc(r,a),this.g.Dc(a,r),this.g.Cc(c,n),this.g.Dc(n,c),this.wn(a,r),this.vi(a,!0),this.g.ni(a,!0),this.bk(r),this.wn(c,n),this.vi(c,!0),this.g.ni(c,!1)):(this.g.Cc(a,r),this.g.Dc(r,a),this.g.Cc(n,c),this.g.Dc(c,n),this.wn(a,r),this.vi(a,!0),this.g.ni(a,!1),this.bk(r),this.wn(c,n),this.vi(c,!0),this.g.ni(c,!0)),this.bk(n);else{var p=u?r:n,f=o?a:c;for(u=u?n:r,o=o?c:a,a=!1,this.g.Cc(p,f),this.g.Cc(f,p),this.g.Dc(u,o),this.g.Dc(o,u),c=o;c!=f;)r=this.g.Na(c),n=this.g.V(c),this.g.Dc(c,n),this.g.Cc(c,r),a=a||c==p,c=n;a||(r=this.g.Na(f),n=this.g.V(f),this.g.Dc(f,n),this.g.Cc(f,r)),this.wn(f,p),this.vi(f,!0),this.g.ni(f,!1),this.bk(p),this.wn(o,u),this.vi(o,!0),this.g.ni(o,!1),this.bk(u)}},v.prototype.VC=function(){for(var u=!1,o=this.g.Ob(this.Y);o!=-1;){for(var r=this.g.Ya(o),n=0,a=this.g.Ka(o);n<a&&1<a;){var c=this.g.Na(r),p=this.g.V(r);this.g.hq(c,p)?(u=!0,this.vi(r,!1),this.g.pd(r,!0),this.vi(p,!1),this.g.pd(p,!0),r=c,n=0,a=this.g.Ka(o)):(r=p,n++)}if(2>this.g.Ka(o)){for(u=this.g.Ya(o),n=0,a=this.g.Ka(o);n<a;n++)this.vi(u,!1),u=this.g.V(u);o=this.g.ar(o),u=!0}else o=this.g.Sb(o)}return u},v.prototype.tp=function(u){for(var o=!1;;){var r=this.g.V(u),n=this.g.Na(u);if(r==u)return this.vi(u,!0),this.g.ni(u,!1),!0;if(!this.g.hq(r,n)||(o=!0,this.bk(n),this.bk(r),this.vi(u,!0),this.g.ni(u,!1),this.wn(r,n),this.vi(r,!0),this.g.ni(r,!0),r==n))break;u=n}return o},v.prototype.yM=function(){for(var u=0,o=this.oe.sc(this.oe.je);o!=-1;o=this.oe.lb(o)){var r=this.oe.getData(o);this.g.bj(r,-1)}for(var n=0,a=this.g.Ob(this.Y);a!=-1;)if((o=this.g.Ya(a))==-1||this.g.cd(o)!=-1)r=a,a=this.g.Sb(a),this.g.br(r);else{this.g.bj(o,a);var c=1;for(r=this.g.V(o);r!=o;r=this.g.V(r))this.g.bj(r,a),c++;this.g.ep(a,!1),this.g.Wj(a,c),this.g.Xg(a,this.g.Na(o)),n+=c,u++,a=this.g.Sb(a)}for(o=this.oe.sc(this.oe.je);o!=-1;o=this.oe.lb(o))r=this.oe.getData(o),this.g.cd(r)==-1&&(a=this.g.fG(this.Y,r,r,null),n+=this.g.Ka(a),u++);for(this.g.Tl(this.Y,u),this.g.Uj(this.Y,n),u=0,n=this.g.ld;n!=-1;n=this.g.ve(n))u+=this.g.I(n);this.g.VB(u)},v.prototype.em=function(u){for(var o=0,r=this.ye.size-1;o<r;o++)if(u=(u+1)%this.ye.size,this.ye.get(u)!=-1)return u;return-1},v.prototype.wn=function(u,o){var r=this.g.Qa(o,this.Rq),n=this.g.Qa(o,this.zg);this.g.eC(u,o),this.g.Sa(o,this.Rq,r),this.g.Sa(o,this.zg,n)},v.prototype.bk=function(u){var o=this.g.Qa(u,this.zg);o!=-1&&(this.ye.set(o,-1),this.g.Sa(u,this.zg,-1))},v.W=function(u,o,r,n,a){var c=new v;return c.g=u,c.Y=o,c.rA=r,c.gw=n,c.nd=a,c.PM()},v.prototype.hM=function(u,o){var r=this.Xh.get(u),n=new h.h;this.g.Hc(r,n),r=new h.h;var a=this.Xh.get(o);return this.g.Hc(a,r),n.rb(r)?0:(a=this.As.get(u),u=new h.h,this.g.Hc(a,u),a=this.As.get(o),o=new h.h,this.g.Hc(a,o),(a=new h.h).vc(n,u),(n=new h.h).vc(r,o),h.h.ou(a,n))},v}();h.tn=k}(G||(G={})),function(h){var k;(k=h.SL||(h.SL={}))[k.Local=0]="Local",k[k.Geographic=1]="Geographic",k[k.Projected=2]="Projected",k[k.Image=3]="Image",k[k.Unknown=4]="Unknown",function(u){u[u.Integer32=0]="Integer32",u[u.Integer64=1]="Integer64",u[u.FloatingPoint=2]="FloatingPoint"}(h.LL||(h.LL={}));var v=function(){function u(){this.qp="",this.tu=null,this.eg=0,this.RH=this.Io=-1,this.xh=null}return u.prototype.Fc=function(){return this.eg},u.prototype.NF=function(){return 1},u.prototype.Yd=function(){var o=.001;return this.eg!=0?o=h.yr.uQ(this.eg):this.xh!=null&&(o=h.PC.vQ(this.xh)),o},u.prototype.wz=function(){return this.xh},u.prototype.Id=function(){return this.eg!=0?h.Uc.$g(h.yr.Ny(this.eg)):this.xh!=null?h.PC.wQ(this.xh):void 0},u.Tb=function(o){if(o.eg!=0){if(h.yr.PS(o.eg)===!0)return 1;if(h.yr.RS(o.eg)===!0)return 2}return 4},u.prototype.bs=function(){var o=this.Fc();return this.Io!=-1?this.Io:(this.Io=h.yr.xK(o),this.Io!=-1?this.Io:o)},u.create=function(o){if(0>=o)throw h.i.O("Invalid or unsupported wkid: "+o);var r=new u;return r.eg=o,r},u.iP=function(o){if(o==null||o.length==0)throw h.i.O("Cannot create SpatialReference from null or empty text.");var r=new u;return r.xh=o,r},u.prototype.Nb=function(o){return this==o||o!=null&&this.constructor==o.constructor&&this.eg==o.eg&&(this.eg!=0||this.xh===o.xh)},u.prototype.toString=function(){return"[ tol: "+this.Ln()+"; wkid: "+this.Fc()+"; wkt: "+this.wz()+"]"},u.prototype.dc=function(){if(this.qp!=="")return this.qp;var o=this.toString();if(Array.prototype.reduce)return this.qp="S"+o.split("").reduce(function(a,c){return(a=(a<<5)-a+c.charCodeAt(0))&a},0);var r=0;if(o.length===0)return"";for(var n=0;n<o.length;n++)r=(r<<5)-r+o.charCodeAt(n),r&=r;return this.qp="S"+r},u.prototype.Ln=function(){return this.Yd(0)},u.prototype.gh=function(){return this.tu!==null?this.tu:this.tu=h.hu.qP(this)},u.RN=2147483645,u.SN=9007199254740990,u}();h.Gg=v}(G||(G={})),function(h){var k=function(v){function u(){var o=v!==null&&v.apply(this,arguments)||this;return o.Ki=null,o.IT=null,o.Jq=new h.RL,o.Fo=null,o.kw=null,o}return ft(u,v),u.qP=function(o){var r=new u;if(r.eg=o.eg,r.Io=o.Io,r.RH=o.RH,r.xh=o.xh,r.xh!==""&&r.xh!==null){o=u.cM(r.xh);var n=u.aM(r.xh);r.Jq.Vx(o,n,h.iu.Integer64),r.$x(o),r.by(n),r.eg=o.bs()}else o=u.bM(r.eg),r.$x(o),r.by(null),r.Jq.Vx(o,null,h.iu.Integer64);return r},u.prototype.Yd=function(o){return this.Jq.Ln(o)},u.aM=function(o){if(0>=o.length)throw h.i.O();var r=null;try{r=h.FC.fromString(o)}catch{r=null}return r==null?null:u.UC(r,!0)},u.prototype.$x=function(o){this.Ld=o,this.Fo=this.Ld.Id()},u.prototype.by=function(o){this.CH=o,this.IT=this.CH!=null?this.CH.Fo:null},u.prototype.Xc=function(){return this.Tb()!=0&&this.Tb()!=3&&this.Ld.Xc()},u.prototype.AG=function(){return this.Tb()!=0&&(this.Tb()==3?this.Ki.fk().Xc():this.Ld.Xc())},u.prototype.fh=function(){return this.Ld!=null?this.Ld.Re:null},u.prototype.rm=function(){return this.Ld.rm()},u.prototype.bf=function(){return this.Ld.bf()},u.prototype.ih=function(){return this.Ld!=null?this.Ld.tw:NaN},u.prototype.Wp=function(){return this.Ld.Wp()},u.prototype.Xr=function(){return this.Ld.Xr()},u.prototype.kk=function(){return this.Ld.kk()},u.prototype.bS=function(o){return h.GC.Ky(this.Ld,o.Ld)},u.prototype.ol=function(){return this.Ld.ol()},u.prototype.Wr=function(){return this.Ld.Wr()},u.prototype.Ai=function(){return this.Tb()==3?this.Ki.fk().Ai():this.Ld.Ai()},u.prototype.hh=function(){if(!this.Xc())throw h.i.O("!isPannable()");var o=new h.l;return this.Ld.hh(o),o},u.prototype.Le=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.to},u.prototype.zR=function(){if(!this.Xc())throw h.i.O("!isPannable()");var o=new h.l;return this.Ld.yR(o),o},u.prototype.qv=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.qv()},u.prototype.pv=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.pv()},u.prototype.Yr=function(){return this.Ki!=null?this.Ki.fk().Yr():this.Ld.Yr()},u.prototype.HQ=function(){return this.Ld.jv()},u.prototype.Sp=function(){return this.Fo.getUnitFactor()},u.prototype.pz=function(o){return this.Jq.pz(o)},u.prototype.tc=function(){var o=this.Tb();if(o==1)return this;if(o==3)return this.Ki.fk().tc();if(o==0||o===4)throw h.i.ga("invalid call");if(this.kw!==null)return this.kw;if((o=this.fh().getGeogcs())==null)throw h.i.Ra();return this.kw=u.UE(o,this.Jq.NF())},u.UE=function(o,r){if(o==null)throw h.i.O("null pointer.");var n=new u;return o=u.nu(o,!0),n.Jq.Vx(o,null,r),n.$x(o),n.by(null),n.eg=o.bs(),n},u.prototype.Tb=function(){var o=this.fh();if(o!=null)switch(o.getType()){case h.Tc.PE_TYPE_GEOGCS:return 1;case h.Tc.PE_TYPE_PROJCS:return 2}return 4},u.prototype.jv=function(){return this.Ld.jv()},u.nu=function(o,r){var n=o.getCode();if(0>=n&&0<(n=h.qf.getCode(o))){if((o=h.qf.coordsys(n))==null)throw h.i.O("Text to wkid mapping had failed: "+n);return u.nu(o,r)}if(r&&0<n&&(r=u.px[n]))return r;r=h.Ab.yv(o,n,!1);var a=u.dK[r];return a||(o=0>=n?o:h.qf.coordsys(n),o=new h.GC(o),u.dK[r]=o,0<n&&(u.px[n]=o),o)},u.bM=function(o){if(0>=o)throw h.i.O("Invalid or unsupported wkid: "+o);var r=u.px[o];if(r!=null)return r;if((r=h.qf.coordsys(o))==null)throw h.i.O("Invalid or unsupported wkid: "+o);return(r=u.nu(r,!1)).bs()!=o&&(u.px[o]=r),r},u.cM=function(o){if(o==null||o===void 0||o.length==0)throw h.i.O("Cannot create SpatialReference from null or empty text.");var r=null;try{r=h.qf.fromString(h.Tc.PE_TYPE_COORDSYS,o)}catch(n){throw h.i.O("Cannot create SpatialReference from text. "+n.message)}if(r===null)throw h.i.O("Cannot create SpatialReference from text. ");return u.nu(r,!0)},u.UC=function(o,r){var n,a=o.getCode();if(0>=a&&0<(a=h.qf.getCode(o))){if((a=h.qf.vertcs(a))===null)throw h.i.O();return u.UC(a,r)}if(r&&0<a&&(r=u.cK[a])||(o=h.Ab.yv(o,a,!1),r=u.eK[o]))return r;if(0>=a||(n=h.qf.vertcs(a)),n===null)throw h.i.O();return n=new h.HL(n),u.eK[o]=n,0<a&&(u.cK[a]=n),n},u.kI=function(o,r){if(r===null||r.B())return null;var n=new h.l;if(r!==null&&o.Tb()!=1){var a=o.tc(),c=a.fh();o=h.xr.Or(o,a,null,null),(r=h.Fx.local().W(r,o,null)).A(n)}else c=o.fh(),r.A(n);return r=c.getPrimem().getLongitude(),c=c.getUnit().getUnitFactor(),new h.DC(n.v,n.G,n.C,n.H,r,c)},u.dD=function(o){var r={name:"",steps:[],_pt:null,_entry:null},n=0;for(o=o.getEntries();n<o.length;n++){var a=o[n],c={AY:!1,OY:"",NY:-1,geogtran:null};a.getDirection()===0?c.isInverse=!1:c.isInverse=!0;var p=a.getGeogtran().getCode();-1<p?c.wkid=p:c.wkt=a.getGeogtran().toString(),r.steps.push(c)}return r},u.OR=function(o,r,n,a){return n===void 0&&(n=null),n=u.kI(a,n),o=h.mp.getGTlist(o.fh(),r.fh(),2,h.mp.PE_GTLIST_OPTS_COMMON,n,1),r=null,o&&0<o.length&&(r=this.dD(o[0]),h.Kx.destroy(o)),n!==null&&n.destroy(),r},u.PR=function(o,r,n,a){var c;if(n===void 0&&(n=null),a===void 0&&(a=null),c===void 0&&(c=30),n=u.kI(a,n),o=h.mp.getGTlist(o.fh(),r.fh(),2,h.mp.PE_GTLIST_OPTS_COMMON,n,c),r=[],o&&0<o.length){for(c=0;c<o.length;c++)r.push(this.dD(o[c]));h.Kx.destroy(o)}return n!==null&&n.destroy(),r},u.px={},u.dK={},u.cK={},u.eK={},u}(h.Gg);h.hu=k}(G||(G={})),function(h){var k,v;(v=k=h.iu||(h.iu={}))[v.Integer32=0]="Integer32",v[v.Integer64=1]="Integer64",v[v.FloatingPoint=2]="FloatingPoint";var u=function(){function o(){this.rp()}return o.prototype.assign=function(r){this.Hm=r.Hm,this.Im=r.Im,this.Qj=r.Qj,this.mA=r.mA,this.Go=r.Go,this.lA=r.lA,this.Ik=r.Ik,this.Oq=r.Oq,this.Nq=r.Nq,this.Tm=r.Tm},o.prototype.NF=function(){return this.Tm},o.prototype.rp=function(){this.Im=this.Hm=0,this.Qj=1,this.mA=0,this.Go=1,this.lA=0,this.Nq=this.Oq=this.Ik=2220446049250313e-29,this.Tm=k.FloatingPoint},o.prototype.Vx=function(r,n,a){if(this.rp(),this.Tm=a,a!=k.FloatingPoint){var c=new h.l;r.$Q(c),this.Hm=c.v,this.Im=c.G}else this.Im=this.Hm=-17976931348623157e292;(c=r.Re.getType())==h.Tc.PE_TYPE_GEOGCS?(c=(a==k.Integer64?1e-9:1/18e5)*r.bf(),this.Qj=1/c):c==h.Tc.PE_TYPE_PROJCS&&(c=(a==k.Integer64?1e-4:.001)*r.rm(),this.Qj=1/c),n!=null?(c=(a==k.Integer32?.001:1e-4)*n.AH,this.Go=1/c):this.Go=1e4,this.QM(),this.Ik=r.tw,this.Oq=n!=null?.001*n.AH:.001,this.Nq=2220446049250313e-29},o.prototype.QM=function(){if(this.Tm!=k.FloatingPoint){var r=this.Tm==k.Integer64?h.Gg.SN:h.Gg.RN,n=r/this.Qj,a=this.Hm+n,c=h.P.truncate((a-this.Hm)*this.Qj);c>r&&(this.Qj=r/(a-this.Hm)),n=this.Im+n,(c=h.P.truncate((n-this.Im)*this.Qj))>r&&(this.Qj=r/(n-this.Im))}},o.prototype.UB=function(r){switch(r){case 0:this.Ik=void 0;case 1:this.Oq=void 0;case 2:this.Nq=void 0}},o.prototype.Ln=function(r){switch(r){case 0:return this.Ik;case 1:return this.Oq;case 2:return this.Nq}return 0},o.prototype.pz=function(r){if(this.Tm==k.FloatingPoint)return 0;switch(r){case 0:return 1/this.Qj;case 1:case 2:return 1/this.Go;default:return 0}},o.prototype.toString=function(){var r="SRPD [m_toleranceXY: "+this.Ik.toString();return(r=(r=(r=(r=(r=(r=(r=(r=(r=r+";m_falseX: "+this.Hm.toString())+";m_falseY: "+this.Im.toString())+";m_unitsXY: "+this.Qj.toString())+";m_falseZ: "+this.mA.toString())+";m_unitsZ: "+this.Go.toString())+";m_falseM: "+this.lA.toString())+";m_toleranceZ: "+this.Oq.toString())+";m_toleranceM: "+this.Nq.toString())+";m_precision: "+this.Tm.toString())+"] "},o}();h.RL=u}(G||(G={})),function(h){function k(a,c){return 89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c*=.017453292519943,[111319.49079327169*a,31890685e-1*Math.log((1+Math.sin(c))/(1-Math.sin(c)))]}function v(a,c,p){return a=a/6378137*57.29577951308232,p?[a,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]:[a-360*Math.floor((a+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]}function u(a,c,p){var f=a.Pf();if(a.K()===33)c=c(f.Mg(),f.jh()),f.Db(c[0],c[1]);else if(a.K()===197){var m=c(a.fs(),a.hs(),p);c=c(a.es(),a.gs(),p),f.L(m[0],m[1],c[0],c[1])}else for(m=new h.h,a=0;a<f.I();a++){f.D(a,m);var w=c(m.x,m.y,p);m.na(w[0],w[1]),f.Db(a,m)}return f}function o(a){return u(a,v,!0)}function r(a){return u(a,k,!0)}var n=Math.PI/180;h.MK=function(){function a(){}return a.wu=function(c){var p=Math.sqrt(.006694379990197414),f=Math.sin(c.y*n);return h.h.construct(6378137*c.x*n,3.1677196636462314e6*(f/(1-.006694379990197414*f*f)-1/(2*p)*Math.log((1-p*f)/(1+p*f))))},a.Tx=function(c,p,f,m){var w=.0033528106647474805,x=Math.sin(f);f=Math.cos(f);var $=(1-w)*Math.tan(c),T=$*(c=1/Math.sqrt(1+$*$)),A=Math.atan2($,f),C=($=c*x)*$,N=1-C,L=27233160610754688e-5*N/4040829998466145e-2,D=1+L/16384*(4096+L*(L*(320-175*L)-768)),F=L/1024*(256+L*(L*(74-47*L)-128));L=m/(635675231424518e-8*D);for(var V,W,K,B=2*Math.PI;1e-12<Math.abs(L-B);)K=Math.cos(2*A+L),B=L,L=m/(635675231424518e-8*D)+F*(V=Math.sin(L))*(K+F/4*((W=Math.cos(L))*(2*K*K-1)-F/6*K*(4*V*V-3)*(4*K*K-3)));return m=T*V-c*W*f,N=w/16*N*(4+w*(4-3*N)),h.h.construct((p+(Math.atan2(V*x,c*W-T*V*f)-(1-N)*w*$*(L+N*V*(K+N*W*(2*K*K-1)))))/n,Math.atan2(T*W+c*V*f,(1-w)*Math.sqrt(C+m*m))/n)},a.EM=function(c,p,f,m){var w=.0033528106647474805,x=m-p,$=Math.atan((1-w)*Math.tan(c)),T=Math.atan((1-w)*Math.tan(f)),A=Math.sin($);$=Math.cos($);var C=Math.sin(T);T=Math.cos(T);var N=x,L=1e3;do{var D=Math.sin(N),F=Math.cos(N),V=Math.sqrt(T*D*T*D+($*C-A*T*F)*($*C-A*T*F));if(V===0)return 0;F=A*C+$*T*F;var W=Math.atan2(V,F),K=$*T*D/V,B=1-K*K;D=F-2*A*C/B,isNaN(D)&&(D=0);var ee=w/16*B*(4+w*(4-3*B)),ae=N;N=x+(1-ee)*w*K*(W+ee*V*(D+ee*F*(2*D*D-1)))}while(1e-12<Math.abs(N-ae)&&0<--L);return L===0?(A=m-p,{azimuth:Math.atan2(Math.sin(A)*Math.cos(f),Math.cos(c)*Math.sin(f)-Math.sin(c)*Math.cos(f)*Math.cos(A)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(c)*Math.sin(f)+Math.cos(c)*Math.cos(f)*Math.cos(m-p))}):(p=(c=27233160610754688e-5*B/4040829998466145e-2)/1024*(256+c*(c*(74-47*c)-128)),{azimuth:Math.atan2(T*Math.sin(N),$*C-A*T*Math.cos(N)),QQ:635675231424518e-8*(1+c/16384*(4096+c*(c*(320-175*c)-768)))*(W-p*V*(D+p/4*(F*(2*D*D-1)-p/6*D*(4*V*V-3)*(4*D*D-3)))),MY:Math.atan2($*Math.sin(N),$*C*Math.cos(N)-A*T)})},a.bQ=function(c){var p=c.hasAttribute(1),f=c.hasAttribute(2),m=[],w=c.ea(),x=null,$=null;p&&(x=c.vb(1)),f&&($=c.vb(2));for(var T=new h.h,A=0;A<w;A++){for(var C=c.Ca(A),N=c.Ka(A),L=0,D=0,F=NaN,V=NaN,W=NaN,K=NaN,B=c.ec(A),ee=[],ae=C;ae<C+N;ae++){c.D(ae,T),K=W=NaN;var me=[T.x,T.y];p&&(W=x.get(ae),me.push(W)),f&&(w=$.get(ae),me.push(K)),ae==C&&B&&(L=T.x,D=T.y,F=W,V=K),ee.push(me)}!B||L==T.x&&D==T.y&&(!p||isNaN(F)&&isNaN(W)||F==W)&&(!f||isNaN(V)&&isNaN(K)||V==K)||ee.push(ee[0].slice(0)),m.push(ee)}return m},a.Ry=function(c,p){c=a.bQ(c),637.100877141506>p&&(p=637.100877141506);for(var f,m=[],w=0;w<c.length;w++){var x,$,T=c[w];m.push(f=[]),f.push([T[0][0],T[0][1]]);var A=T[0][0]*n,C=T[0][1]*n;for(x=0;x<T.length-1;x++){var N=T[x+1][0]*n,L=T[x+1][1]*n;if(A!==N||C!==L){N=(L=a.EM(C,A,L,N)).azimuth;var D=(L=L.QQ)/p;if(1<D){for($=1;$<=D-1;$++){var F=a.Tx(C,A,N,$*p);f.push([F.x,F.y])}$=a.Tx(C,A,N,(L+Math.floor(D-1)*p)/2),f.push([$.x,$.y])}C=a.Tx(C,A,N,L),f.push([C.x,C.y]),A=C.x*n,C=C.y*n}}}return{iJ:m}},a.PQ=function(c){for(var p=[],f=0;f<c.length;f++){var m=c[f];m=a.Ry(m,1e4),p.push(m)}c=[];for(var w=0;w<p.length;w++){m=p[w];var x=0;for(f=0;f<m.iJ.length;f++){var $,T=m.iJ[f],A=a.wu(h.h.construct(T[0][0],T[0][1])),C=a.wu(h.h.construct(T[T.length-1][0],T[T.length-1][1])),N=C.x*A.y-A.x*C.y;for($=0;$<T.length-1;$++)A=a.wu(h.h.construct(T[$+1][0],T[$+1][1])),N+=(C=a.wu(h.h.construct(T[$][0],T[$][1]))).x*A.y-A.x*C.y;x+=N}x/=1,c.push(x/-2)}return c},a}(),h.cb=function(){function a(){}return a.rB=function(c,p,f,m,w,x,$){a.ZC[c.dc()]=p,isNaN(f)==0&&(a.eD[c.dc()]=f),isNaN(m)==0&&(a.rD[c.dc()]=m),isNaN(w)==0&&(a.TC[c.dc()]=w),a.fD[c.dc()]=x,$!==null&&(a.gD[c.dc()]=$)},a.Xw=function(c,p,f){a.kD[c.dc()+"-"+p.dc()]=f},a.tc=function(c){if((c=a.ZC[c.dc()])==null)throw h.i.Fe();return c},a.bf=function(c){if((c=a.eD[c.dc()])==null)throw h.i.Fe();return c},a.wv=function(c){if((c=a.rD[c.dc()])==null)throw h.i.Fe();return c},a.fv=function(c){if((c=a.TC[c.dc()])==null)throw h.i.Fe();return c},a.hh=function(c){if((c=a.gD[c.dc()])==null)throw h.i.Fe();return h.l.construct(c[0],c[1],c[2],c[3])},a.Xc=function(c){if((c=a.fD[c.dc()])==null)throw h.i.Fe();return c},a.Ah=function(c,p,f){if(p.Nb(f))return c;var m=a.kD[p.dc()+"-"+f.dc()];if(m!==void 0)return m(c,p,f);throw h.i.Fe()},a.vt=function(){throw h.i.Fe()},a.UQ=function(){throw h.i.Fe()},a.UV=function(){throw h.i.Fe()},a.ol=function(){throw h.i.Fe()},a.iW=function(){var c=h.Gg.create(102100),p=h.Gg.create(3857),f=h.Gg.create(4326);h.cb.rB(c,f,NaN,NaN,NaN,!1,null),h.cb.rB(f,f,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),h.cb.rB(p,f,NaN,NaN,NaN,!1,null),h.cb.Xw(c,f,o),h.cb.Xw(f,c,r),h.cb.Xw(p,f,o),h.cb.Xw(f,p,r)},a.ZC=[],a.eD=[],a.rD=[],a.TC=[],a.fD=[],a.gD=[],a.kD=[],a}()}(G||(G={})),G.cb.iW(),function(h){var k=function(){function v(u){this.o=new Int32Array(0),this.jo=-1,this.Jg=this.size=this.Dl=0,this.Mf=u}return v.prototype.kd=function(u){u<this.Dl?(this.o[u*this.Mf]=this.jo,this.jo=u):this.Dl--,this.size--},v.prototype.U=function(u,o){return this.o[u*this.Mf+o]},v.prototype.T=function(u,o,r){this.o[u*this.Mf+o]=r},v.prototype.De=function(){var u=this.jo;if(u==-1){if(this.Dl==this.Jg){if(2147483647<(u=this.Jg!=0?h.P.truncate(3*(this.Jg+1)/2):1)&&(u=2147483647),u==this.Jg)throw h.i.re();this.yz(u)}u=this.Dl,this.Dl++}else this.jo=this.o[u*this.Mf];this.size++;for(var o=u*this.Mf;o<u*this.Mf+this.Mf;o++)this.o[o]=-1;return u},v.prototype.Nl=function(u){var o=this.jo;if(o==-1){if(this.Dl==this.Jg){if(2147483647<(o=this.Jg!=0?h.P.truncate(3*(this.Jg+1)/2):1)&&(o=2147483647),o==this.Jg)throw h.i.re();this.yz(o)}o=this.Dl,this.Dl++}else this.jo=this.o[o*this.Mf];this.size++;for(var r=o*this.Mf,n=0;n<u.length;n++)this.o[r+n]=u[n];return o},v.prototype.nj=function(u){this.jo=-1,this.size=this.Dl=0,u&&(this.o=null,this.Jg=0)},v.prototype.Ee=function(u){u>this.Jg&&this.yz(u)},v.prototype.rx=function(u,o){u*=this.Mf,o*=this.Mf;for(var r=0;r<this.Mf;r++){var n=this.o[o+r];this.o[o+r]=this.o[u+r],this.o[u+r]=n}},v.prototype.$B=function(u,o,r){var n=this.o[this.Mf*o+r];this.o[this.Mf*o+r]=this.o[this.Mf*u+r],this.o[this.Mf*u+r]=n},v.DG=function(u){return 0<=u},v.prototype.yz=function(u){this.o==null&&(this.o=new Int32Array(0));var o=new Int32Array(this.Mf*u);o.set(this.o,0),this.o=o,this.Jg=u},v}();h.ad=k}(G||(G={})),function(h){var k,v;(v=k||(k={}))[v.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",v[v.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",v[v.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",v[v.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var u=function(){function r(n){this.Ce=n,this.zh=NaN,this.XG=new h.hg,this.YG=new h.hg,this.ns=new h.Oc,this.os=new h.Oc}return r.prototype.compare=function(n,a,c){if(n=n.ka(c),this.Ce.jB(a,this.XG),this.Ce.jB(n,this.YG),a=this.XG.get(),n=this.YG.get(),this.ns.L(a.sa,a.qa),this.os.L(n.sa,n.qa),this.ns.wa<this.os.pa)return-1;if(this.ns.pa>this.os.wa)return 1;c=a.oa==a.ma;var p=n.oa==n.ma;if(c||p){if(c&&p)return 0;if(a.oa==n.oa&&a.sa==n.sa)return c?1:-1;if(a.ma==n.ma&&a.qa==n.qa)return c?-1:1}return(c=a.Me(this.zh,this.ns.pa))==(p=n.Me(this.zh,this.os.pa))&&((p=.5*((c=Math.min(a.ma,n.ma))+this.zh))==this.zh&&(p=c),c=a.Me(p,this.ns.pa),p=n.Me(p,this.os.pa)),c<p?-1:c>p?1:0},r.prototype.TJ=function(n){this.zh=n},r}(),o=function(){function r(n){this.ib=n,this.OH=new h.hg,this.Cf=new h.h,this.qA=new h.Oc}return r.prototype.YW=function(n){this.Cf.N(n)},r.prototype.compare=function(n,a){return this.ib.jB(n.ka(a),this.OH),n=this.OH.get(),this.qA.L(n.sa,n.qa),this.Cf.x<this.qA.pa?-1:this.Cf.x>this.qA.wa?1:(n=n.Me(this.Cf.y,this.Cf.x),this.Cf.x<n?-1:this.Cf.x>n?1:0)},r}();k=function(){function r(){this.$G=this.Ei=this.Hi=this.fA=this.Zn=this.ze=this.Lc=this.kh=this.ge=null,this.Ho=this.xg=-1,this.ZG=!0,this.jA=!1,this.gA=NaN,this.Oi=new h.Nd,this.UN=2147483647,this.TN=h.P.truncate(-2147483648),this.dg=this.be=this.Jl=this.Eq=this.Em=this.Dq=this.Ps=this.Oe=-1,this.xa=0}return r.prototype.sy=function(n){this.gA=n},r.prototype.$m=function(){this.ge==null&&(this.ge=new h.ad(8));var n=this.ge.De();return this.ge.T(n,1,0),n},r.prototype.lU=function(){this.Lc==null&&(this.Lc=new h.ad(8));var n=this.Lc.De();this.Lc.T(n,2,0),this.Lc.T(n,3,0);var a=this.Lc.De();return this.Lc.T(a,2,0),this.Lc.T(a,3,0),this.BJ(n,a),this.BJ(a,n),n},r.prototype.eI=function(){this.ze==null&&(this.ze=new h.ad(8));var n=this.ze.De();return this.ze.T(n,2,0),n},r.prototype.HW=function(n,a){this.ge.T(n,7,a)},r.prototype.on=function(n,a){this.ge.T(n,2,a)},r.prototype.GW=function(n,a){this.ge.T(n,1,a)},r.prototype.ZW=function(n,a){this.ge.T(n,3,a)},r.prototype.WW=function(n,a){this.ge.T(n,4,a)},r.prototype.er=function(n,a){this.ge.T(n,5,a)},r.prototype.XQ=function(n){return this.ge.U(n,5)},r.prototype.FW=function(n,a){this.ge.T(n,6,a)},r.prototype.VM=function(n,a){this.FW(a,n)},r.prototype.AJ=function(n,a){this.Lc.T(n,1,a)},r.prototype.BJ=function(n,a){this.Lc.T(n,4,a)},r.prototype.Vl=function(n,a){this.Lc.T(n,5,a)},r.prototype.Ul=function(n,a){this.Lc.T(n,6,a)},r.prototype.NW=function(n,a){this.Lc.T(n,2,a)},r.prototype.bx=function(n,a){this.Lc.T(n,3,a)},r.prototype.DF=function(n){return this.Lc.U(n,3)},r.prototype.Gt=function(n,a){this.Lc.T(n,7,a)},r.prototype.wK=function(n,a){if(this.om(n)!=-1)for(a=a?-1:n,n=this.om(n);n!=-1;n=this.ks(n))this.g.Sa(this.uj(n),this.Eq,a)},r.prototype.wx=function(n,a){n!=-1&&(this.wK(n,a),this.wK(this.ya(n),a))},r.prototype.Dt=function(n,a){this.ze.T(n,1,a)},r.prototype.Wg=function(n,a){this.ze.T(n,2,a)},r.prototype.ln=function(n,a){this.ze.T(n,3,a),this.DW(n,this.WQ(a)),this.BW(a,n)},r.prototype.BW=function(n,a){this.ze.T(n,4,a)},r.prototype.DW=function(n,a){this.ze.T(n,5,a)},r.prototype.vJ=function(n,a){this.ze.T(n,6,a)},r.prototype.tJ=function(n,a){this.ze.T(n,7,a)},r.prototype.sJ=function(n,a){this.Zn.write(n,a)},r.prototype.uJ=function(n,a){this.fA.write(n,a)},r.prototype.ZX=function(n){var a=0,c=0,p=this.sF(n),f=new h.h,m=new h.h,w=new h.h;this.Zr(p,f),m.N(f);var x=p;do this.nm(x,w),c+=h.h.ub(m,w),this.$e(this.ya(x))!=n&&(a+=(w.x-f.x-(m.x-f.x))*(w.y-f.y+(m.y-f.y))*.5),m.N(w),x=this.kc(x);while(x!=p);this.Zn.write(n,a),this.fA.write(n,c)},r.prototype.FU=function(n,a){var c=new u(this),p=new h.Yj;p.Ee(h.P.truncate(this.xa/2)),p.Wo(c);for(var f=new h.ja(0),m=this.ah(),w=null,x=0,$=new h.h,T=this.Oe;T!=-1;T=this.Sf(T)){if((255&++x)==0&&a!=null&&!a.progress(-1,-1))throw h.i.OC();var A=this.Je(T);if(A!=-1){if(f.Ch(0),!this.VX(p,m,f,A)){this.D(T,$),c.TJ($.y);var C=A;do{var N=this.Bb(C,m);N!=-1&&(p.wd(N,-1),this.Kb(C,m,-2)),C=this.kc(this.ya(C))}while(A!=C);C=A;do(N=this.Bb(C,m))==-1&&(N=p.addElement(C,-1),f.add(N)),C=this.kc(this.ya(C));while(A!=C)}for(A=f.size-1;0<=A;A--)N=f.get(A),C=p.ka(N),this.Kb(this.ya(C),m,N),this.EU(p,N,n)}else this.Yy(T)==-1&&(w==null&&(w=new o(this)),this.D(T,$),w.YW($),C=p.xW(w),A=this.Jl,C!=-1&&(N=p.ka(C),this.$e(N)==this.$e(this.ya(N))&&(N=this.GF(p,C)),N!=-1&&(A=this.$e(N))),this.VM(A,T))}this.Lg(m)},r.prototype.EU=function(n,a,c){var p=n.ka(a),f=this.$e(p);if(this.Hn(f)==-1){var m=this.GF(n,a),w=this.ya(p),x=this.$e(w);this.Mp(f),this.Mp(x);var $=this.Hn(f),T=this.Hn(x);if(m==-1&&$==-1&&(x==f?(this.ln(x,this.Jl),$=T=this.Jl):(T==-1&&(this.ln(x,this.Jl),T=this.Jl),this.ln(f,x),$=x)),m!=-1){var A=this.$e(m);T==-1&&(0>=this.Mp(A)?(T=this.Hn(A),this.ln(x,T)):(this.ln(x,A),T=A),x==f&&($=T))}$==-1&&this.WX(f,x),c==0?this.$V(n,a,p,m,f,x):c==5?this.aW(n,a,p,w,f,x):c==4&&this.ZV(p,m,f,x)}},r.prototype.$V=function(n,a,c,p,f,m){var w=this.hk(f);if(p!=-1){var x=this.hk(m),$=this.hk(this.$e(p));p=w&x&$,$^=$&this.eh(c),($|=p)!=0&&(this.Wg(m,x|$),this.Wg(f,$|w),w=w||$)}for(a=n.lb(a);a!=-1&&(p=n.ka(a),c=this.$e(this.ya(p)),f=this.hk(c),m=this.eh(p),x=this.$e(p),p=f&($=this.hk(x))&w,w^=w&m,(w|=p)!=0);a=n.lb(a))this.Wg(c,f|w),this.Wg(x,$|w)},r.prototype.aW=function(n,a,c,p,f,m){if(f!=m){c=this.Bb(c,this.dg),c+=this.Bb(p,this.dg),p=0;var w=new h.ja(0),x=new h.ja(0);x.add(0);for(var $=n.sc(-1);$!=a;$=n.lb($)){var T=n.ka($),A=this.ya(T),C=this.$e(T),N=this.$e(A);if(C!=N){if(T=this.Bb(T,this.dg),p+=T+=this.Bb(A,this.dg),A=!1,w.size!=0&&w.Gc()==N&&(x.Jf(),w.Jf(),A=!0),this.Hn(N)==-1)throw h.i.Ra();A&&this.Hn(N)==C||(x.add(p),w.add(C))}}p+=c,w.size!=0&&w.Gc()==m&&(x.Jf(),w.Jf()),p!=0?x.Gc()==0&&(n=this.g.ld,n=this.Ma(n),this.Wg(f,n)):x.Gc()!=0&&(n=this.g.ld,n=this.Ma(n),this.Wg(f,n))}},r.prototype.ZV=function(n,a,c,p){var f=this.Ma(this.g.ld);if(a==-1)this.Wg(p,this.Ho),(1&(n=this.Bb(n,this.xg)))!=0?this.Wg(c,f):this.Wg(c,this.Ho);else{var m=this.hk(p);m==0?(m=this.hk(this.$e(a)),this.Wg(p,m),(1&(n=this.Bb(n,this.xg)))!=0?this.Wg(c,m==f?this.Ho:f):this.Wg(c,m)):(1&(n=this.Bb(n,this.xg)))!=0?this.Wg(c,m==f?this.Ho:f):this.Wg(c,m)}},r.prototype.VX=function(n,a,c,p){var f=p,m=-1,w=-1,x=0;do{if(x==2)return!1;var $=this.Bb(f,a);if($!=-1){if(m!=-1)return!1;m=$}else{if(w!=-1)return!1;w=f}x++,f=this.kc(this.ya(f))}while(p!=f);return w!=-1&&m!=-1&&(this.Kb(n.ka(m),a,-2),n.Tj(m,w),c.add(m),!0)},r.prototype.WX=function(n,a){var c=this.Mp(n);if(c!=0){var p=this.Mp(a);0<c&&0>p||0>c&&0<p?this.ln(n,a):(a=this.Hn(a))!=-1&&this.ln(n,a)}},r.prototype.nP=function(n,a){this.Eq=this.g.Hd();for(var c=0,p=a.size;c<p;c++){var f=a.get(c),m=this.g.Qa(f,this.Em),w=this.g.Rf(this.g.cd(f)),x=this.g.jc(w);if(h.ba.Ic(x)){var $=this.g.V(f);if($!=-1){var T=this.g.Qa($,this.Em);if(m!=T){var A=this.lU(),C=this.ya(A),N=this.kh.De();this.kh.T(N,0,f),this.kh.T(N,1,-1),this.Gt(A,N),this.AJ(A,m),(N=this.Je(m))==-1?(this.on(m,A),this.Vl(A,C),this.Ul(C,A)):(m=this.ue(N),this.Vl(N,C),this.Ul(C,N),this.Ul(m,A),this.Vl(A,m)),this.AJ(C,T),(m=this.Je(T))==-1?(this.on(T,C),this.Ul(A,C),this.Vl(C,A)):(T=this.ue(m),this.Vl(m,A),this.Ul(A,m),this.Ul(T,C),this.Vl(C,T)),w=this.Ma(w),n==0?(this.Kb(C,this.be,0),this.Kb(A,this.be,x==1736?w:0)):n==5?(T=new h.h,this.g.D(f,T),f=new h.h,this.g.D($,f),m=$=0,0>T.compare(f)?$=1:m=-1,this.Kb(C,this.be,0),this.Kb(A,this.be,0),this.Kb(A,this.dg,$),this.Kb(C,this.dg,m)):n==7?(this.Kb(C,this.be,this.Ho),this.Kb(A,this.be,x==1736?w:0)):n==4&&(this.Kb(C,this.be,0),this.Kb(A,this.be,0),this.Kb(A,this.xg,1),this.Kb(C,this.xg,1)),x=x==1736?this.TN:0,this.bx(A,w|x),this.bx(C,w|x)}}}}},r.prototype.LT=function(n,a){var c=this.om(a);if(c!=-1){var p=this.om(n);this.kh.T(c,1,p),this.Gt(n,c),this.Gt(a,-1)}n=this.ya(n),a=this.ya(a),(c=this.om(a))!=-1&&(p=this.om(n),this.kh.T(c,1,p),this.Gt(n,c),this.Gt(a,-1))},r.prototype.wX=function(n){function a(W,K){return p.zO(W,K)}var c=new h.ja(0);c.Jb(10);for(var p=this,f=this.Oe;f!=-1;f=this.Sf(f)){c.clear(!1);var m=this.Je(f);if(m!=-1){var w=m;do c.add(w),w=this.kc(this.ya(w));while(w!=m);if(1<c.size){if(w=!0,2<c.size)c.Wd(0,c.size,a),c.add(c.get(0));else if(0<this.yO(c.get(0),c.get(1))){var x=c.get(0);c.set(0,c.get(1)),c.set(1,x)}else w=!1;for(var $=x=c.get(0),T=this.vf($),A=this.ya($),C=-1,N=1,L=c.size;N<L;N++){var D=c.get(N),F=this.ya(D),V=this.jk(F);if(V==T&&D!=$){if(n==0)C=this.DF($)|this.DF(D),this.bx($,C),this.bx(A,C),this.Kb($,this.be,this.Bb($,this.be)|this.Bb(D,this.be)),this.Kb(A,this.be,this.Bb(A,this.be)|this.Bb(F,this.be));else if(this.dg!=-1)C=this.Bb($,this.dg)+this.Bb(D,this.dg),F=this.Bb(A,this.dg)+this.Bb(F,this.dg),this.Kb($,this.dg,C),this.Kb(A,this.dg,F);else{if(n==7)return void(this.Oi=new h.Nd(5,f,-1));this.xg!=-1&&(C=this.Bb($,this.xg)+this.Bb(D,this.xg),F=this.Bb(A,this.xg)+this.Bb(F,this.xg),this.Kb($,this.xg,C),this.Kb(A,this.xg,F))}this.LT($,D),this.Fy(D),C=$,c.set(N,-1),D==x&&(c.set(0,-1),x=-1)}else this.wx(C,!1),C=-1,$=D,T=V,A=F}if(this.wx(C,!1),C=-1,w){for(x=-1,N=0,L=c.size;N<L;N++)if((D=c.get(N))!=-1){if(x==-1)$=x=D,T=this.vf($),A=this.ya($);else if(D!=$&&(F=this.ya(D),V=this.jk(F),this.Ul(A,D),this.Vl(D,A),$=D,T=V,A=F,n==7&&(this.Bb(D,this.be)|this.Bb(this.ue(D),this.be))==(1|this.Ho)))return void(this.Oi=new h.Nd(5,f,-1))}this.on(f,x)}else{for(x=-1,N=0,L=c.size;N<L;N++)if((D=c.get(N))!=-1){x=D;break}m!=x&&this.on(f,x)}}}}},r.prototype.ON=function(){for(var n=-1,a=this.ah(),c=this.Oe;c!=-1;c=this.Sf(c)){var p=this.Je(c);if(p!=-1){var f=p;do{if(this.Bb(f,a)!=1){var m=this.eI();this.Dt(m,f),this.tJ(m,n),n!=-1&&this.vJ(n,m),n=m;var w=0,x=f;do w|=this.Bb(x,this.be),this.NW(x,m),this.Kb(x,a,1),x=this.kc(x);while(x!=f);this.Wg(m,w)}f=this.kc(this.ya(f))}while(f!=p)}}m=this.eI(),this.Dt(m,-1),this.tJ(m,n),n!=-1&&this.vJ(n,m),this.Jl=m,this.Zn=h.ce.rf(this.ze.size,NaN),this.fA=h.ce.rf(this.ze.size,NaN),this.sJ(this.Jl,1/0),this.uJ(this.Jl,1/0),this.Lg(a)},r.prototype.jR=function(n,a,c){if((a=a!=-1?a:this.Je(n))==-1)return-1;for(n=a;;){if(this.Bb(a,c)!=1)return a;if((a=this.kc(this.ya(a)))==n)return-1}},r.prototype.oW=function(){for(var n=this.ah(),a=this.Oe;a!=-1;a=this.Sf(a))for(var c=-1;;){var p=this.jR(a,c,n);if(p==-1)break;c=this.kc(this.ya(p));for(var f=p;;){var m=this.kc(f),w=this.ue(f),x=this.ya(f);if(w==x){if(this.AP(f),c!=f&&c!=x||(c=-1),f==p||w==p){if(f==(p=m)||w==p)break;f=m;continue}}else this.Kb(f,n,1);if((f=m)==p)break}}this.Lg(n)},r.prototype.GB=function(n,a,c,p,f){this.Vg(),this.ZG=f,this.g=n,this.Dq=this.g.TE(),(n=new h.ja(0)).Jb(c!=null?this.g.I(c.get(0)):this.g.gd);var m=0,w=1,x=c!=null?c.get(0):this.g.ld;for(f=1;x!=-1;){this.g.zJ(x,this.Dq,w),w<<=1;for(var $=this.g.Ob(x);$!=-1;$=this.g.Sb($))for(var T=this.g.Ya($),A=0,C=this.g.Ka($);A<C;A++)n.add(T),T=this.g.V(T);h.ba.Sn(this.g.jc(x))||(m+=this.g.ea(x)),c!=null?(x=f<c.size?c.get(f):-1,f++):x=this.g.ve(x)}for(this.Ho=w,this.xa=n.size,this.g.mx(n,this.xa),this.kh==null&&(this.kh=new h.ad(2),this.ge=new h.ad(8),this.Lc=new h.ad(8),this.ze=new h.ad(8)),this.kh.Ee(this.xa),h.np.Bp(p),this.ge.Ee(this.xa+10),this.Lc.Ee(2*this.xa+32),this.ze.Ee(Math.max(32,m)),this.Em=this.g.Hd(),c=new h.h,f=0,m=new h.h,c.Sc(),w=0;w<=this.xa;w++)if(w<this.xa?(T=n.get(w),this.g.D(T,m)):m.Sc(),!c.rb(m)){if(f<w){for(T=this.$m(),C=A=-1;f<w;f++)C=n.get(f),this.g.Sa(C,this.Em,T),x=this.kh.De(),this.kh.T(x,0,C),this.kh.T(x,1,A),A=x,$=this.g.cd(C),x=this.g.Rf($),x=this.Ma(x),this.GW(T,this.yd(T)|x);this.HW(T,A),this.er(T,this.g.Va(C)),this.Ps!=-1&&this.WW(this.Ps,T),this.ZW(T,this.Ps),this.Ps=T,this.Oe==-1&&(this.Oe=T)}f=w,c.N(m)}h.np.Bp(p),this.be=this.ah(),a==5&&(this.dg=this.ah()),a==4&&(this.xg=this.ah()),this.nP(a,n),this.Oi.Kj==0&&(this.wX(a),this.Oi.Kj==0&&(isNaN(this.gA)||this.pO()?(this.ON(),this.Oi.Kj==0&&(this.Lg(this.be),this.be=-1,this.ZG&&this.FU(a,p))):this.jA=!0))},r.prototype.Fy=function(n){var a=this.kc(n),c=this.ue(n),p=this.ya(n),f=this.kc(p),m=this.ue(p);a!=p&&(this.Ul(m,a),this.Vl(a,m)),c!=p&&(this.Ul(c,f),this.Vl(f,c)),c=this.jk(n),this.Je(c)==n&&(f!=n?this.on(c,f):this.on(c,-1)),f=this.jk(p),this.Je(f)==p&&(a!=p?this.on(f,a):this.on(f,-1)),this.Lc.kd(n),this.Lc.kd(p)},r.prototype.GF=function(n,a){for(;;){if((a=n.xe(a))==-1)return-1;var c=n.ka(a);if(this.$e(c)!=this.$e(this.ya(c)))return c}},r.prototype.fr=function(n,a){var c;c===void 0&&(c=!0),this.GB(n,0,null,a,c)},r.prototype.nJ=function(n,a,c){var p=new h.ja(0);p.add(a),this.GB(n,4,p,c,n.jc(a)==1736)},r.prototype.oJ=function(n,a,c){var p=new h.ja(0);p.add(a),this.GB(n,5,p,c,!0)},r.prototype.Vg=function(){this.g!=null&&(this.Dq!=-1&&(this.g.nW(this.Dq),this.Dq=-1),this.Em!=-1&&(this.g.Ud(this.Em),this.Em=-1),this.Eq!=-1&&(this.g.Ud(this.Eq),this.Eq=-1),this.be!=-1&&(this.Lg(this.be),this.be=-1),this.dg!=-1&&(this.Lg(this.dg),this.dg=-1),this.xg!=-1&&(this.Lg(this.xg),this.xg=-1),this.g=null,this.ge.nj(!0),this.kh.nj(!0),this.Ps=this.Oe=-1,this.Lc!=null&&this.Lc.nj(!0),this.Hi!=null&&(this.Hi.length=0),this.Ei!=null&&(this.Ei.length=0),this.$G!=null&&(this.$G.length=0),this.ze!=null&&this.ze.nj(!0),this.Jl=-1,this.Zn=null)},r.prototype.Je=function(n){return this.ge.U(n,2)},r.prototype.D=function(n,a){this.g.WF(this.XQ(n),a)},r.prototype.yd=function(n){return this.ge.U(n,1)},r.prototype.Sf=function(n){return this.ge.U(n,4)},r.prototype.Yy=function(n){return this.ge.U(n,6)},r.prototype.mm=function(n){return this.ge.U(n,7)},r.prototype.ks=function(n){return this.kh.U(n,1)},r.prototype.uj=function(n){return this.kh.U(n,0)},r.prototype.ng=function(n,a){return(a=this.Ei[a]).size<=n?-1:a.read(n)},r.prototype.pn=function(n,a,c){(a=this.Ei[a]).size<=n&&a.resize(this.ge.size,-1),a.write(n,c)},r.prototype.Fp=function(){this.Ei==null&&(this.Ei=[]);for(var n=h.ja.rf(this.ge.Jg,-1),a=0,c=this.Ei.length;a<c;a++)if(this.Ei[a]==null)return this.Ei[a]=n,a;return this.Ei.push(n),this.Ei.length-1},r.prototype.Gp=function(n){this.Ei[n]=null},r.prototype.jk=function(n){return this.Lc.U(n,1)},r.prototype.vf=function(n){return this.jk(this.ya(n))},r.prototype.ya=function(n){return this.Lc.U(n,4)},r.prototype.ue=function(n){return this.Lc.U(n,5)},r.prototype.kc=function(n){return this.Lc.U(n,6)},r.prototype.$e=function(n){return this.Lc.U(n,2)},r.prototype.af=function(n){return this.hk(this.Lc.U(n,2))},r.prototype.om=function(n){return this.Lc.U(n,7)},r.prototype.Zr=function(n,a){this.D(this.jk(n),a)},r.prototype.nm=function(n,a){this.D(this.vf(n),a)},r.prototype.eh=function(n){return this.Lc.U(n,3)&this.UN},r.prototype.Bb=function(n,a){return(a=this.Hi[a]).size<=n?-1:a.read(n)},r.prototype.Kb=function(n,a,c){(a=this.Hi[a]).size<=n&&a.resize(this.Lc.size,-1),a.write(n,c)},r.prototype.ah=function(){this.Hi==null&&(this.Hi=[]);for(var n=h.ja.rf(this.Lc.Jg,-1),a=0,c=this.Hi.length;a<c;a++)if(this.Hi[a]==null)return this.Hi[a]=n,a;return this.Hi.push(n),this.Hi.length-1},r.prototype.Lg=function(n){this.Hi[n]=null},r.prototype.AP=function(n){var a=this.$e(n),c=this.ya(n),p=this.kc(n);p==c&&(p=this.kc(p))==n&&(p=-1);var f=this.sF(a);f!==n&&f!=c||this.Dt(a,p),c=this.Zn.read(a),isNaN(c)||(this.sJ(a,NaN),this.uJ(a,NaN)),this.wx(n,!0),this.Fy(n)},r.prototype.BP=function(n){for(var a=0,c=n.size;a<c;a++){var p=n.get(a),f=this.$e(this.ya(p));this.Dt(this.$e(p),-1),this.Dt(f,-1),this.wx(p,!0),this.Fy(p)}},r.prototype.sF=function(n){return this.ze.U(n,1)},r.prototype.hk=function(n){return this.ze.U(n,2)},r.prototype.Hn=function(n){return this.ze.U(n,3)},r.prototype.WQ=function(n){return this.ze.U(n,4)},r.prototype.Mp=function(n){var a=this.Zn.read(n);return isNaN(a)&&(this.ZX(n),a=this.Zn.read(n)),a},r.prototype.Ma=function(n){return this.g.CF(n,this.Dq)},r.prototype.Ie=function(n){return this.g.Qa(n,this.Em)},r.prototype.lR=function(n){return this.g.Qa(n,this.Eq)},r.prototype.kR=function(n,a){var c=this.Je(n);if(c==-1)return-1;var p=c,f=-1,m=-1;do{if(this.vf(p)==a)return p;if(f==-1){if((f=this.Je(a))==-1)break;m=f}if(this.vf(m)==n)return this.ya(m);p=this.kc(this.ya(p)),m=this.kc(this.ya(m))}while(p!=c&&m!=f);return-1},r.prototype.jB=function(n,a){a.Pr(),a=a.get();var c=new h.h;this.Zr(n,c),a.Ec(c),this.nm(n,c),a.Rc(c)},r.prototype.zO=function(n,a){if(n==a)return 0;var c=new h.h;this.nm(n,c);var p=new h.h;return this.nm(a,p),c.rb(p)?0:(a=new h.h,this.Zr(n,a),(n=new h.h).vc(c,a),(c=new h.h).vc(p,a),h.h.ou(n,c))},r.prototype.yO=function(n,a){if(n==a)return 0;var c=new h.h;this.nm(n,c);var p=new h.h;return this.nm(a,p),c.rb(p)?0:(a=new h.h,this.Zr(n,a),(n=new h.h).vc(c,a),(c=new h.h).vc(p,a),0<=c.y&&0<n.y?h.h.ou(n,c):0)},r.prototype.pO=function(){for(var n=h.mc.nx(this.gA),a=new h.h,c=new h.h,p=new h.h,f=new h.h,m=new h.h,w=this.Oe;w!=-1;w=this.Sf(w)){var x=this.Je(w);if(x!=-1){var $=x;this.Zr($,a),this.nm($,c),m.vc(c,a);var T=m.Sk();do{var A=$;if(($=this.kc(this.ya($)))!=A){this.nm($,p),f.vc(p,a),A=f.Sk();var C=f.xi(m);if(C*C/(A*T)*Math.min(A,T)<=n)return!1;m.N(f),T=A,c.N(p)}}while($!=x)}}return!0},r}(),h.ju=k}(G||(G={})),function(h){var k=function(){function v(){this.j=null,this.gH=new h.h,this.hH=new h.h,this.Hj=null,this.Nv=!1,this.vl=-1}return v.prototype.cf=function(u){return u<this.Hj.length&&this.Hj[u]},v.prototype.el=function(u,o,r,n){var a=h.ba.uf(this.j.g.jc(r));if(h.ba.uf(this.j.g.jc(o))!=2||a!=1)throw h.i.Ra();this.xP(u,o,r,n)},v.prototype.fr=function(u,o){this.j==null&&(this.j=new h.ju),this.j.fr(u,o)},v.prototype.Ft=function(u,o,r){for(h.Tk.W(u,o,r,!0),o=u.ld;o!=-1;o=u.ve(o))u.jc(o)==1736&&h.tn.W(u,o,-1,this.Nv,r);this.fr(u,r)},v.prototype.EE=function(u,o,r,n,a){var c=this.j.g;if(c.jc(u)==1736)for(u=c.Ob(u);u!=-1;u=c.Sb(u)){var p=c.Ya(u);this.j.Ie(p),this.j.Ie(c.V(p));var f=this.j.lR(p);if(f!=-1){var m=this.j.Bb(f,r);if(m!=1&&m!=2)if(this.cf(this.j.af(f))){this.j.Kb(f,r,1),m=c.wf(o,-1);var w=f,x=this.j.Ie(p),$=1;do{var T=this.um(p,a);c.jj(m,T),n!=-1&&this.j.pn(x,n,1),this.j.Kb(w,r,1),w=this.j.kc(w);do var A=(T=$==1?c.V(p):c.Na(p))!=-1?this.j.Ie(T):-1;while(A==x);var C=this.j.jk(w);if(C!=A){do A=(T=$==1?c.Na(p):c.V(p))!=-1?this.j.Ie(T):-1;while(A==x);C!=A?(A=C,T=this.j.uj(this.j.mm(A))):$=-$}x=A,p=T}while(w!=f);c.mn(m,!0)}else this.j.Kb(f,r,2)}}},v.prototype.XE=function(){for(var u=this.j.ah(),o=new h.ja(0),r=this.j.Oe;r!=-1;r=this.j.Sf(r)){var n=this.j.Je(r),a=n;if(n!=-1)do{if(this.j.Bb(a,u)!=1){var c=this.j.ya(a);this.j.Kb(c,u,1),this.j.Kb(a,u,1),this.cf(this.j.af(a))&&this.cf(this.j.af(c))&&o.add(a)}a=this.j.kc(this.j.ya(a))}while(a!=n)}this.j.Lg(u),this.j.BP(o)},v.prototype.um=function(u,o){return o==-1?u:this.SR(u,o)},v.prototype.SR=function(u,o){var r=this.j.g,n=this.j.mm(this.j.Ie(u));do{var a=this.j.uj(n);if(r.Rf(r.cd(a))==o)return a;n=this.j.ks(n)}while(n!=-1);return u},v.prototype.Pt=function(u,o,r){this.XE();var n=this.j.g,a=n.Kg(1736),c=this.j.ah();return this.mK(u,o,a,r,c,-1),this.j.Lg(c),h.tn.W(n,a,1,this.Nv,null),a},v.prototype.mK=function(u,o,r,n,a,c){for(this.EE(u,r,a,c,n),o!=-1&&this.EE(o,r,a,c,n),u=this.j.g,o=this.j.Oe;o!=-1;o=this.j.Sf(o)){var p=this.j.Je(o);if(p!=-1){var f=p;do{var m=this.j.Bb(f,a);if(m!=1&&m!=2)if(this.cf(this.j.af(f))){m=u.wf(r,-1);var w=f;do{var x=this.j.om(w);x!=-1?x=this.j.uj(x):(x=this.j.uj(this.j.om(this.j.ya(w))),x=this.j.g.V(x)),x=this.um(x,n),u.jj(m,x),this.j.Kb(w,a,1),c!=-1&&(x=this.j.Ie(x),this.j.pn(x,c,1)),w=this.j.kc(w)}while(w!=f);u.mn(m,!0)}else this.j.Kb(f,a,2);f=this.j.kc(this.j.ya(f))}while(f!=p)}}},v.prototype.PX=function(u,o,r){var n=this.j.g,a=n.Kg(1736),c=n.Kg(1607),p=n.Kg(550);this.XE();var f=-1,m=this.j.ah(),w=this.j.Fp();for(this.mK(u,o,a,r,m,w),u=this.j.Oe;u!=-1;u=this.j.Sf(u))if((o=this.j.Je(u))!=-1){var x=o;do{var $=this.j.Bb(x,m),T=this.j.Bb(this.j.ya(x),m);if(($|=T)==2)if($=this.j.eh(x),this.cf($)){var A=n.wf(c,-1),C=x;$=this.Zw(u,n),$=this.um($,r),n.jj(A,$),this.j.pn(u,w,1);do{if($=this.j.vf(C),T=this.Zw($,n),T=this.um(T,r),n.jj(A,T),this.j.Kb(C,m,1),this.j.Kb(this.j.ya(C),m,1),this.j.pn($,w,1),C=this.j.kc(C),$=this.j.Bb(C,m),($|=T=this.j.Bb(this.j.ya(C),m))!=2)break;if($=this.j.eh(C),!this.cf($)){this.j.Kb(C,m,1),this.j.Kb(this.j.ya(C),m,1);break}}while(C!=x)}else this.j.Kb(x,m,1),this.j.Kb(this.j.ya(x),m,1);x=this.j.kc(this.j.ya(x))}while(x!=o)}for(u=this.j.Oe;u!=-1;u=this.j.Sf(u))($=this.j.ng(u,w))!=1&&($=this.j.yd(u),this.cf($)&&(f==-1&&(f=n.wf(p,-1)),(o=this.j.mm(u))!=-1&&(o=this.j.uj(o),$=this.um(o,r),n.jj(f,$))));return this.j.Gp(w),this.j.Lg(m),h.tn.W(n,a,1,this.Nv,null),(r=[])[0]=p,r[1]=c,r[2]=a,r},v.prototype.Zw=function(u,o){var r=-1;for(u=this.j.mm(u);u!=-1;u=this.j.ks(u)){var n=this.j.uj(u);r==-1&&(r=n);var a=this.j.Ma(o.Rf(o.cd(n)));if(this.cf(a)){r=n;break}}return r},v.prototype.fB=function(u,o){for(var r=this.ll(o),n=this.j.jk(o),a=this.j.vf(o),c=0,p=0,f=this.j.mm(n);f!=-1;f=this.j.ks(f)){var m=this.j.uj(f),w=u.cd(m),x=this.j.Ma(u.Rf(w));w=u.Ya(w),(x=(x&r)!=0)&&w==m&&(this.vl=o);var $=u.V(m);$!=-1&&this.j.Ie($)==a?(c++,x&&(this.vl===-1&&w==$&&(m=this.j.kc(o),this.cf(this.ll(m))&&(this.vl=m)),p++)):(m=u.Na(m))!=-1&&this.j.Ie(m)==a&&(c--,x&&(this.vl===-1&&w===m&&(m=this.j.kc(o),this.cf(this.ll(m))&&(this.vl=m)),p--))}return this.j.D(n,this.gH),this.j.D(a,this.hH),(p!=0?p:c)*(u=h.h.ub(this.gH,this.hH))},v.prototype.ll=function(u){return this.j.eh(u)|this.j.af(u)|this.j.af(this.j.ya(u))},v.prototype.pK=function(u){for(var o=this.j.ya(this.j.ue(u)),r=-1;o!=u;){if(this.cf(this.ll(o))){if(r!=-1)return-1;r=o}o=this.j.ya(this.j.ue(o))}return r!=-1?this.j.ya(r):-1},v.prototype.qK=function(u){for(var o=this.j.ya(this.j.kc(u)),r=-1;o!=u;){if(this.cf(this.ll(o))){if(r!=-1)return-1;r=o}o=this.j.ya(this.j.kc(o))}return r!=-1?this.j.ya(r):-1},v.prototype.eJ=function(u,o,r,n,a){var c=this.j.g,p=u,f=this.j.ya(p);this.j.Kb(p,r,1),this.j.Kb(f,r,1),this.vl=-1;for(var m=this.fB(c,p),w=p,x=-1,$=!1,T=1;;){var A=this.j.ue(p);if(A==f)break;if(f=this.j.kc(f),this.j.ya(A)!=f){if((p=this.pK(p))==-1){$=!0;break}f=this.j.ya(p)}else p=A;if(p==u){x=u;break}if(A=this.ll(p),!this.cf(A))break;this.j.Kb(p,r,1),this.j.Kb(f,r,1),w=p,m+=this.fB(c,p),T++}if(x==-1)for(p=u,f=this.j.ya(p),x=p;(u=this.j.kc(p))!=f;){if(f=this.j.ue(f),this.j.ya(u)!=f){if((p=this.qK(p))==-1){$=!0;break}f=this.j.ya(p)}else p=u;if(A=this.ll(p),!this.cf(A))break;this.j.Kb(p,r,1),this.j.Kb(f,r,1),x=p,m+=this.fB(c,p),T++}else if(this.vl!=-1&&(w=this.vl,x=this.j.ue(this.vl),this.j.ya(x)!=this.j.kc(this.j.ya(w))&&(x=this.pK(w))==-1))throw h.i.Ra();for(0<=m||(p=x,x=this.j.ya(w),w=this.j.ya(p)),r=c.wf(o,-1),p=w,w=this.j.jk(w),$=this.j.vf(x)==w&&$,m=this.Zw(w,c),m=this.um(m,a),c.jj(r,m),n!=-1&&this.j.pn(w,n,1),w=0,T=$?h.P.truncate((T+1)/2):-1;u=this.j.vf(p),m=this.Zw(u,c),m=this.um(m,a),c.jj(r,m),w++,n!=-1&&this.j.pn(u,n,1),$&&w==T&&(r=c.wf(o,-1),c.jj(r,m)),p!=x;)if(u=this.j.kc(p),this.j.ue(this.j.ya(p))!=this.j.ya(u)){if((p=this.qK(p))==-1)throw h.i.Ra()}else p=u},v.prototype.Qt=function(u){for(var o=this.j.g.Kg(1607),r=this.j.ah(),n=this.j.Oe;n!=-1;n=this.j.Sf(n)){var a=this.j.Je(n),c=a;do this.j.Bb(c,r)!=1&&this.cf(this.ll(c))&&this.eJ(c,o,r,-1,u),c=this.j.kc(this.j.ya(c));while(c!=a)}return this.j.Lg(r),o},v.prototype.QX=function(u){for(var o=this.j.g,r=o.Kg(1607),n=o.Kg(550),a=this.j.ah(),c=this.j.Fp(),p=-1,f=this.j.Oe;f!=-1;f=this.j.Sf(f)){var m=this.j.Je(f),w=m;do{var x=this.j.Bb(w,a);x!=1&&(x=this.ll(w),this.cf(x)&&this.eJ(w,r,a,c,u)),w=this.j.kc(this.j.ya(w))}while(w!=m)}for(f=this.j.Oe;f!=-1;f=this.j.Sf(f))(x=this.j.ng(f,c))!=1&&(x=this.j.yd(f),this.cf(x)&&(p==-1&&(p=o.wf(n,-1)),(m=this.j.mm(f))!=-1&&(m=this.j.uj(m),m=this.um(m,u),o.jj(p,m))));return this.j.Lg(a),this.j.Gp(c),(u=[])[0]=n,u[1]=r,u},v.prototype.pr=function(){for(var u=this.j.g,o=u.Kg(550),r=u.wf(o,-1),n=this.j.Oe;n!=-1;n=this.j.Sf(n))if(this.cf(this.j.yd(n))){for(var a=-1,c=this.j.mm(n);c!=-1;c=this.j.ks(c)){var p=this.j.uj(c);a==-1&&(a=p);var f=this.j.Ma(u.Rf(u.cd(p)));if(this.cf(f)){a=p;break}}u.jj(r,a)}return o},v.prototype.eq=function(u){this.Hj=[];for(var o=0;o<u;o++)this.Hj[o]=!1},v.RV=function(u,o,r){var n=u.Ja(),a=Array(1e3);h.P.av(a,null);var c=h.P.lg(1e3,0),p=u.I(),f=!0,m=o.Eb()==2;if(o.Eb()!=1&&o.Eb()!=2)throw h.i.Ra();for(var w=0;w<p;){var x=h.P.truncate(u.bW(a,w)-w);m?h.jd.kK(o,a,x,r,c):h.jd.lK(o,a,x,r,c);for(var $=0,T=0;T<x;T++)c[T]==0&&(f&&(f=!1,n.Gd(u,0,w)),$!=T&&n.Gd(u,w+$,w+T),$=T+1);f||$==x||n.Gd(u,w+$,w+x),w+=x}return f?u:n},v.rG=function(u,o,r){return u instanceof h.de?v.RV(u,o,r):o instanceof h.Ta?u.B()||o.B()?u.Ja():h.Tk.pU(r,u,o)?h.Tk.uO(u,o):u.Ja():v.SV(u,o,r)},v.Bv=function(u,o,r,n){var a=new h.l;u.A(a);var c=new h.l;o.A(c);var p=new h.l;if(p.L(a),p.$b(c),r=h.ta.Xd(r,p,!0),(p=new h.l).L(c),c=h.ta.Gr(r),p.X(c,c),!a.isIntersecting(p)){if(u.Eb()<=o.Eb())return v.li(v.Ue(u.Ja()),u,"&");if(u.Eb()>o.Eb())return v.li(v.Ue(o.Ja()),u,"&")}return c=new v,p=(a=new h.hd).Ib(v.Ue(u)),o=a.Ib(v.Ue(o)),c.Ft(a,r,n),n=c.Bv(p,o),u=v.li(a.Ke(n),u,"&"),h.ba.Ic(u.K())&&(u.Dh(2,r),u.K()==1736&&u.hm()),u},v.SV=function(u,o,r){if(u.B()||o.B())return u.Ja();var n=[null],a=[0],c=o.Eb()==2;if(o.Eb()!=1&&o.Eb()!=2)throw h.i.Ra();return n[0]=u.D(),c?h.jd.kK(o,n,1,r,a):h.jd.lK(o,n,1,r,a),a[0]==0?u.Ja():u},v.prototype.BU=function(u,o,r,n,a){if(u.B())return u;var c=new h.hd;return u=c.Ib(u),this.Mk(c,u,o,r,n,a)},v.prototype.DU=function(u,o,r,n,a,c){if(a&&u.jc(o)!=550){var p=new h.JC;p.HX(u,r),p.Og?(h.Tk.W(u,r,c,!0),a=!1):this.j.sy(r)}else h.Tk.W(u,r,c,!0),a=!1;if(n&&u.jc(o)!=550?this.j.oJ(u,o,c):this.j.nJ(u,o,c),this.j.jA)return this.j.Vg(),this.j=null,this.Mk(u,o,r,n,!1,c);if(this.j.sy(NaN),c=this.j.Ma(o),this.eq(c+1),this.Hj[c]=!0,u.jc(o)==1736||n&&u.jc(o)!=550)return u.Zo(o,0),o=this.Pt(o,-1,-1),(u=u.Ke(o)).Zo(0),a?u.Dh(1,0):(u.Dh(2,r),u.hm()),u;if(u.jc(o)==1607)return o=this.Qt(-1),u=u.Ke(o),a||u.Dh(2,r),u;if(u.jc(o)==550)return o=this.pr(),u=u.Ke(o),a||u.Dh(2,r),u;throw h.i.Ra()},v.prototype.Mk=function(u,o,r,n,a,c){this.j=new h.ju;try{return this.DU(u,o,r,n,a,c)}finally{this.j.Vg()}},v.Mk=function(u,o,r,n,a){return new v().BU(u,o,r,n,a)},v.prototype.CU=function(u,o,r,n){this.Nv=u,this.j=new h.ju,u=o.Jn(r);var a=o.jc(r);if(u!=1||a==550?this.j.nJ(o,r,n):this.j.oJ(o,r,n),!this.j.jA)if(this.j.sy(NaN),n=this.j.Ma(r),this.eq(n+1),this.Hj[n]=!0,o.jc(r)==1736||u==1&&o.jc(r)!=550)o.Zo(r,0),n=this.Pt(r,-1,-1),o.aC(n,r),o.vB(n);else if(o.jc(r)==1607)n=this.Qt(-1),o.aC(n,r),o.vB(n);else{if(o.jc(r)!=550)throw h.i.ga("internal error");n=this.pr(),o.aC(n,r),o.vB(n)}},v.prototype.km=function(u,o){var r=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o));if(r>n)return u;var a=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(a|c)),this.Hj[this.j.Ma(u)]=!0,r==2&&n==2)return this.Pt(u,o,-1);if(r==1&&n==2||r==1&&n==1)return this.Qt(-1);if(r==0)return this.pr();throw h.i.Ra()},v.prototype.Bv=function(u,o){var r=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o)),a=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(a|c)),this.Hj[this.j.Ma(u)|this.j.Ma(o)]=!0,a=-1,1<this.j.g.ht.Ba&&(a=u),r==2&&n==2)return this.Pt(u,o,a);if(r==1&&0<n||n==1&&0<r)return this.Qt(a);if(r==0||n==0)return this.pr();throw h.i.Ra()},v.prototype.Kz=function(u,o){var r=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o)),a=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(a|c)),this.Hj[this.j.Ma(u)|this.j.Ma(o)]=!0,a=-1,1<this.j.g.ht.Ba&&(a=u),r==2&&n==2)return this.PX(u,o,a);if(r==1&&0<n||n==1&&0<r)return this.QX(a);if(r==0||n==0)return(u=[])[0]=this.pr(),u;throw h.i.Ra()},v.prototype.fp=function(u,o){var r=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o)),a=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(a|c)),this.Hj[this.j.Ma(u)]=!0,this.Hj[this.j.Ma(o)]=!0,r==2&&n==2)return this.Pt(u,o,-1);if(r==1&&n==1)return this.Qt(-1);if(r==0&&n==0)return this.pr();throw h.i.Ra()},v.Ue=function(u){var o=u.K();return o==197?(o=new h.Ea(u.description),u.B()||o.bd(u,!1),o):o==33?(o=new h.de(u.description),u.B()||o.add(u),o):o==322?(o=new h.Ua(u.description),u.B()||o.oc(u,!0),o):u},v.li=function(u,o,r){var n=u.K();return n==197?(o=new h.Ea(u.description),u.B()||o.bd(u,!1),o):n!=33||r!="|"&&r!="^"?n==322?(o=new h.Ua(u.description),u.B()||o.oc(u,!0),o):n==33&&r=="-"&&o.K()==33||n==550&&r=="&"&&o.K()==33?(o=new h.Ta(u.description),u.B()||u.we(0,o),o):u:(o=new h.de(u.description),u.B()||o.add(u),o)},v.km=function(u,o,r,n){if(u.B()||o.B()||u.Eb()>o.Eb())return v.li(v.Ue(u),u,"-");var a=new h.l;u.A(a);var c=new h.l;if(o.A(c),!a.isIntersecting(c))return v.li(v.Ue(u),u,"-");var p=new h.l;return p.L(a),p.$b(c),r=h.ta.Xd(r,p,!0),c=new v,p=(a=new h.hd).Ib(v.Ue(u)),o=a.Ib(v.Ue(o)),c.Ft(a,r,n),n=c.km(p,o),n=a.Ke(n),u=v.li(n,u,"-"),h.ba.Ic(u.K())&&(u.Dh(2,r),u.K()==1736&&u.hm()),u},v.NP=function(u,o,r){if(2>u.length)throw h.i.O("not enough geometries to dissolve");for(var n=0,a=0,c=u.length;a<c;a++)n=Math.max(u[a].Eb(),n);var p=new h.l;p.Pa();var f=new h.hd,m=-1,w=0,x=-1;for(a=0,c=u.length;a<c;a++)if(u[a].Eb()==n)if(u[a].B())x==-1&&(x=a);else{x=a,m==-1?m=f.Ib(v.Ue(u[a])):f.mN(m,v.Ue(u[a]));var $=new h.l;u[a].yc($),p.$b($),w++}return 2>w?v.Ue(u[x]):(u=n==2,o=h.ta.Xd(n==0?o:null,p,!0),new v().Mk(f,m,o,u,!0,r))},v.Kz=function(u,o,r,n){var a=[null,null,null],c=new h.l;u.A(c);var p=new h.l;o.A(p);var f=new h.l;if(f.L(c),f.$b(p),r=h.ta.Xd(r,f,!0),(f=new h.l).L(p),p=h.ta.Gr(r),f.X(p,p),!c.isIntersecting(f)){if(u.Eb()<=o.Eb())return a[(u=v.li(v.Ue(u.Ja()),u,"&")).Eb()]=u,a;if(u.Eb()>o.Eb())return a[(u=v.li(v.Ue(o.Ja()),u,"&")).Eb()]=u,a}for(p=new v,f=(c=new h.hd).Ib(v.Ue(u)),o=c.Ib(v.Ue(o)),p.Ft(c,r,n),n=p.Kz(f,o),o=0;o<n.length;o++)p=v.li(c.Ke(n[o]),u,"&"),h.ba.Ic(p.K())&&(p.Dh(2,r),p.K()==1736&&p.hm()),a[p.Eb()]=p;return a},v.fp=function(u,o,r,n){if(u.Eb()>o.Eb())return v.li(v.Ue(u),u,"^");if(u.Eb()<o.Eb()||u.B())return v.li(v.Ue(o),u,"^");if(o.B())return v.li(v.Ue(u),u,"^");var a=new h.l;u.A(a);var c=new h.l;o.A(c);var p=new h.l;return p.L(a),p.$b(c),r=h.ta.Xd(r,p,!0),c=new v,p=(a=new h.hd).Ib(v.Ue(u)),o=a.Ib(v.Ue(o)),c.Ft(a,r,n),n=c.fp(p,o),u=v.li(a.Ke(n),u,"^"),h.ba.Ic(u.K())&&(u.Dh(2,r),u.K()==1736&&u.hm()),u},v.prototype.DQ=function(u,o){var r=this.j.g;u=r.wf(u,-1);for(var n=o.size,a=0;a<n;a++){var c=o.get(a);r.jj(u,c)}r.mn(u,!0)},v.prototype.OW=function(u,o){for(var r=this.j.g,n=r.ld;n!=-1;n=r.ve(n))if(n==o)for(var a=r.Ob(n);a!=-1;a=r.Sb(a)){var c=r.Ya(a);if(c!=-1)for(var p=r.V(c);p!=-1;){c=this.j.Ie(c);var f=this.j.Ie(p);(c=this.j.kR(c,f))!=-1&&(f=this.j.ya(c),this.j.Kb(c,u,1),this.j.Kb(f,u,2)),c=p,p=r.V(c)}}},v.prototype.TV=function(u,o,r,n){r=this.j.Ma(r),n=this.j.Ma(n);var a=new h.ja(0);a.Jb(256);for(var c=this.j.g,p=this.j.ah(),f=this.j.Oe;f!=-1;f=this.j.Sf(f)){var m=this.j.Je(f);if(m!=-1){var w=m;do{if(this.j.Bb(w,p)!=1){var x=w,$=w,T=!1,A=0;do{if(this.j.Kb(x,p,1),!T){var C=this.j.eh(x);(C&n)!=0&&(this.j.af(x)&r)!=0&&($=x,T=!0)}T&&(a.add(this.j.uj(this.j.mm(this.j.jk(x)))),u!=-1&&((C=this.j.eh(x))&n)!=0&&(A|=C=this.j.Bb(x,u))),x=this.j.kc(x)}while(x!=$);T&&0<this.j.Mp(this.j.$e($))&&(x=c.Kg(1736),this.DQ(x,a),o!=-1&&c.zJ(x,o,A)),a.clear(!1)}w=this.j.kc(this.j.ya(w))}while(w!=m)}}this.j.Lg(p)},v.prototype.xP=function(u,o,r,n){this.j.oW();var a=-1;u!=-1&&(a=this.j.ah(),this.OW(a,r)),this.TV(a,u,o,r),a!=-1&&(this.j.Lg(a),a=-1);var c=this.j.g;for(u=0,a=c.ld;a!=-1;a=c.ve(a))a!=o&&a!=r&&(n.add(a),u++);n.Wd(0,u,function(p,f){return(p=c.qz(c.Ob(p)))<(f=c.qz(c.Ob(f)))?-1:p==f?0:1})},v.prototype.Vg=function(){this.j!=null&&(this.j.Vg(),this.j=null)},v}();h.Hg=k}(G||(G={})),function(h){var k=function(){function v(u){u!==void 0?this.It(u):this.KB()}return v.prototype.kx=function(){this.Qb=this.Lb=this.qb=this.jb=this.bb=this.eb=0},v.prototype.Nb=function(u){return this==u||u instanceof v&&this.eb==u.eb&&this.jb==u.jb&&this.Lb==u.Lb&&this.qb==u.qb&&this.bb==u.bb&&this.Qb==u.Qb},v.prototype.dc=function(){return h.P.vj(),h.P.vj(),h.P.vj(),h.P.vj(),h.P.vj(),h.P.vj()},v.prototype.Fh=function(u,o){var r=this.qb*u.x+this.bb*u.y+this.Qb;o.x=this.eb*u.x+this.jb*u.y+this.Lb,o.y=r},v.prototype.TX=function(u,o,r){for(var n=0;n<o;n++){var a=u[n].x,c=u[n].y,p=this.eb*a+this.jb*c+this.Lb;a=this.qb*a+this.bb*c+this.Qb,r[n]!=null?r[n].na(p,a):r[n]=h.h.construct(p,a)}},v.prototype.multiply=function(u){v.multiply(this,u,this)},v.multiply=function(u,o,r){var n=u.eb*o.eb+u.qb*o.jb,a=u.jb*o.eb+u.bb*o.jb,c=u.Lb*o.eb+u.Qb*o.jb+o.Lb,p=u.eb*o.qb+u.qb*o.bb,f=u.jb*o.qb+u.bb*o.bb;u=u.Lb*o.qb+u.Qb*o.bb+o.Qb,r.eb=n,r.jb=a,r.Lb=c,r.qb=p,r.bb=f,r.Qb=u},v.prototype.Pf=function(){var u=new v;return u.eb=this.eb,u.jb=this.jb,u.Lb=this.Lb,u.qb=this.qb,u.bb=this.bb,u.Qb=this.Qb,u},v.prototype.fC=function(u){if(!u.B()){for(var o=[],r=0;4>r;r++)o[r]=new h.h;u.hB(o),this.UX(o,o),u.ax(o,4)}},v.prototype.UX=function(u,o){for(var r=0;r<u.length;r++){var n=new h.h,a=u[r];n.x=this.eb*a.x+this.jb*a.y+this.Lb,n.y=this.qb*a.x+this.bb*a.y+this.Qb,o[r]=n}},v.prototype.gS=function(u,o){u.B()||o.B()||u.S()==0||u.da()==0?this.kx():(this.jb=this.qb=0,this.eb=o.S()/u.S(),this.bb=o.da()/u.da(),this.Lb=o.v-u.v*this.eb,this.Qb=o.G-u.G*this.bb)},v.prototype.SX=function(u){var o=new h.h,r=new h.h;o.na(this.eb,this.qb),r.na(this.jb,this.bb),o.sub(o);var n=.5*o.Sk();return o.na(this.eb,this.qb),r.na(this.jb,this.bb),o.add(r),u*(n>(o=.5*o.Sk())?Math.sqrt(n):Math.sqrt(o))},v.prototype.KB=function(){this.eb=1,this.qb=this.Lb=this.jb=0,this.bb=1,this.Qb=0},v.prototype.isIdentity=function(u){if(u!==void 0){var o=h.h.construct(0,1);return this.Fh(o,o),o.sub(h.h.construct(0,1)),o.Sk()>u*u?!1:(o.na(0,0),this.Fh(o,o),!(o.Sk()>u*u)&&(o.na(1,0),this.Fh(o,o),o.sub(h.h.construct(1,0)),o.Sk()<=u*u))}return this.eb==1&&this.bb==1&&this.jb==0&&this.Lb==0&&this.qb==0&&this.Qb==0},v.prototype.Ci=function(u){return Math.abs(this.eb*this.bb-this.qb*this.jb)<=2*u*(Math.abs(this.eb*this.bb)+Math.abs(this.qb*this.jb))},v.prototype.gg=function(u,o){this.eb=1,this.jb=0,this.Lb=u,this.qb=0,this.bb=1,this.Qb=o},v.prototype.It=function(u,o){o!==void 0?(this.eb=u,this.qb=this.Lb=this.jb=0,this.bb=o,this.Qb=0):this.It(u,u)},v.prototype.TB=function(){this.eb=0,this.jb=1,this.Lb=0,this.qb=1,this.Qb=this.bb=0},v.prototype.cX=function(u){this.dX(Math.cos(u),Math.sin(u))},v.prototype.dX=function(u,o){this.eb=u,this.jb=-o,this.Lb=0,this.qb=o,this.bb=u,this.Qb=0},v.prototype.shift=function(u,o){this.Lb+=u,this.Qb+=o},v.prototype.scale=function(u,o){this.eb*=u,this.jb*=u,this.Lb*=u,this.qb*=o,this.bb*=o,this.Qb*=o},v.prototype.flipX=function(u,o){this.eb=-this.eb,this.jb=-this.jb,this.Lb=u+o-this.Lb},v.prototype.flipY=function(u,o){this.qb=-this.qb,this.bb=-this.bb,this.Qb=u+o-this.Qb},v.prototype.rotate=function(u){var o=new v;o.cX(u),this.multiply(o)},v.prototype.inverse=function(u){if(u!==void 0){var o=this.eb*this.bb-this.jb*this.qb;o==0?u.kx():(o=1/o,u.Lb=(this.jb*this.Qb-this.Lb*this.bb)*o,u.Qb=(this.Lb*this.qb-this.eb*this.Qb)*o,u.eb=this.bb*o,u.jb=-this.jb*o,u.qb=-this.qb*o,u.bb=this.eb*o)}else this.inverse(this)},v}();h.Ed=k}(G||(G={})),function(h){var k=function(){function v(){}return v.prototype.kx=function(){this.Cg=this.Qb=this.Lb=this.Ze=this.We=this.Ve=this.Ye=this.bb=this.jb=this.pf=this.qb=this.eb=0},v.prototype.It=function(u,o){this.eb=u,this.jb=this.pf=this.qb=0,this.bb=o,this.We=this.Ve=this.Ye=0,this.Ze=void 0,this.Cg=this.Qb=this.Lb=0},v.prototype.translate=function(u,o,r){this.Lb+=u,this.Qb+=o,this.Cg+=r},v.prototype.fC=function(u){if(!u.B()){for(var o=new h.Od[8],r=0;8>r;r++)o[r]=new h.Od;u.hB(o),this.transform(o,8,o),u.ax(o)}},v.prototype.transform=function(u,o,r){for(var n=0;n<o;n++){var a=new h.Od,c=u[n];a.x=this.eb*c.x+this.jb*c.y+this.Ve*c.z+this.Lb,a.y=this.qb*c.x+this.bb*c.y+this.We*c.z+this.Qb,a.z=this.pf*c.x+this.Ye*c.y+this.Ze*c.z+this.Cg,r[n]=a}},v.prototype.gp=function(u){var o=new h.Od;return o.x=this.eb*u.x+this.jb*u.y+this.Ve*u.z+this.Lb,o.y=this.qb*u.x+this.bb*u.y+this.We*u.z+this.Qb,o.z=this.pf*u.x+this.Ye*u.y+this.Ze*u.z+this.Cg,o},v.prototype.Ag=function(u){v.multiply(this,u,this)},v.multiply=function(u,o,r){var n=u.eb*o.eb+u.qb*o.jb+u.pf*o.Ve,a=u.eb*o.qb+u.qb*o.bb+u.pf*o.We,c=u.eb*o.pf+u.qb*o.Ye+u.pf*o.Ze,p=u.jb*o.eb+u.bb*o.jb+u.Ye*o.Ve,f=u.jb*o.qb+u.bb*o.bb+u.Ye*o.We,m=u.jb*o.pf+u.bb*o.Ye+u.Ye*o.Ze,w=u.Ve*o.eb+u.We*o.jb+u.Ze*o.Ve,x=u.Ve*o.qb+u.We*o.bb+u.Ze*o.We,$=u.Ve*o.pf+u.We*o.Ye+u.Ze*o.Ze,T=u.Lb*o.eb+u.Qb*o.jb+u.Cg*o.Ve+o.Lb,A=u.Lb*o.qb+u.Qb*o.bb+u.Cg*o.We+o.Qb;u=u.Lb*o.pf+u.Qb*o.Ye+u.Cg*o.Ze+o.Cg,r.eb=n,r.qb=a,r.pf=c,r.jb=p,r.bb=f,r.Ye=m,r.Ve=w,r.We=x,r.Ze=$,r.Lb=T,r.Qb=A,r.Cg=u},v.inverse=function(u,o){var r=u.eb*(u.bb*u.Ze-u.Ye*u.We)-u.qb*(u.jb*u.Ze-u.Ye*u.Ve)+u.pf*(u.jb*u.We-u.bb*u.Ve);if(r==0)throw h.i.ga("math singularity");var n=1/r;r=(u.bb*u.Ze-u.Ye*u.We)*n;var a=-(u.jb*u.Ze-u.Ye*u.Ve)*n,c=(u.jb*u.We-u.bb*u.Ve)*n,p=-(u.qb*u.Ze-u.We*u.pf)*n,f=(u.eb*u.Ze-u.pf*u.Ve)*n,m=-(u.eb*u.We-u.qb*u.Ve)*n,w=(u.qb*u.Ye-u.pf*u.bb)*n,x=-(u.eb*u.Ye-u.pf*u.jb)*n;n*=u.eb*u.bb-u.qb*u.jb;var $=-(u.Lb*r+u.Qb*a+u.Cg*c),T=-(u.Lb*p+u.Qb*f+u.Cg*m);u=-(u.Lb*w+u.Qb*x+u.Cg*n),o.eb=r,o.qb=p,o.pf=w,o.jb=a,o.bb=f,o.Ye=x,o.Ve=c,o.We=m,o.Ze=n,o.Lb=$,o.Qb=T,o.Cg=u},v.prototype.Pf=function(){var u=new v;return u.eb=this.eb,u.qb=this.qb,u.pf=this.pf,u.jb=this.jb,u.bb=this.bb,u.Ye=this.Ye,u.Ve=this.Ve,u.We=this.We,u.Ze=this.Ze,u.Lb=this.Lb,u.Qb=this.Qb,u.Cg=this.Cg,u},v}();h.yY=k}(G||(G={})),function(h){var k=function(u){function o(r){if(r!==void 0)r=u.call(this,r.dc(),r)||this;else{(r=u.call(this)||this).cg=[],r.cg[0]=0,r.Ba=1,r.vh=[];for(var n=0;10>n;n++)r.vh[n]=-1;r.vh[r.cg[0]]=0}return r.lq=!0,r}return ft(o,u),o.prototype.se=function(r){this.hasAttribute(r)||(this.vh[r]=0,this.bD())},o.prototype.removeAttribute=function(r){if(r==0)throw h.i.O("Position attribue cannot be removed");this.hasAttribute(r)&&(this.vh[r]=-1,this.bD())},o.prototype.reset=function(){this.cg[0]=0,this.Ba=1;for(var r=0;r<this.vh.length;r++)this.vh[r]=-1;this.vh[this.cg[0]]=0,this.lq=!0},o.prototype.wF=function(){return v.fz().add(this)},o.og=function(){return v.fz().RR()},o.prototype.lM=function(){var r=this.dc();return new h.ua(r,this)},o.prototype.bD=function(){for(var r=this.Ba=0,n=0;10>r;r++)0<=this.vh[r]&&(this.cg[n]=r,this.vh[r]=n,n++,this.Ba++);this.lq=!0},o.prototype.dc=function(){return this.lq&&(this.yl=this.Bn(),this.lq=!1),this.yl},o.prototype.Nb=function(r){if(r==null)return!1;if(r==this)return!0;if(!(r instanceof o)||r.Ba!=this.Ba)return!1;for(var n=0;n<this.Ba;n++)if(this.cg[n]!=r.cg[n])return!1;return this.lq==r.lq},o.prototype.yG=function(r){if(r.Ba!=this.Ba)return!1;for(var n=0;n<this.Ba;n++)if(this.cg[n]!=r.cg[n])return!1;return!0},o.Jw=function(r,n){for(var a=[],c=0;c<r.Ba;c++)a[c]=-1;c=0;for(var p=r.Ba;c<p;c++)a[c]=n.Qf(r.qd(c));return a},o.tR=function(r,n){return(r=new o(r)).se(n),r.wF()},o.uR=function(r,n){for(var a=null,c=0;10>c;c++)!r.hasAttribute(c)&&n.hasAttribute(c)&&(a==null&&(a=new o(r)),a.se(c));return a!=null?a.wF():r},o}(h.ua);h.ee=k;var v=function(){function u(){this.map=[];var o=new k;this.add(o),(o=new k).se(1),this.add(o)}return u.fz=function(){return u.UK},u.prototype.RR=function(){return u.ft},u.prototype.add=function(o){var r=o.dc();if(u.ft!=null&&u.ft.dc()==r&&o.yG(u.ft))return u.ft;if(u.Ew!=null&&u.Ew.dc()==r&&o.yG(u.Ew))return u.Ew;var n=null;return this.map[r]!==void 0&&(n=this.map[r]),n==null&&((n=o.lM()).Ba==1?u.ft=n:n.Ba==2&&n.qd(1)==1?u.Ew=n:this.map[r]=n),n},u.UK=new u,u}()}(G||(G={}));var yf={feet:9002,kilometers:9036,meters:9001,miles:9035,"nautical-miles":9030,yards:9096},pp={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109413,"square-yards":109442},lh=new(function(){function h(){this.JM=50,this.op=new Map,this.hj=[]}return h.prototype.clear=function(){this.hj.length=0,this.op.clear()},h.prototype.delete=function(k){return!!this.op.delete(k)&&(this.hj.splice(this.hj.indexOf(k),1),!0)},h.prototype.get=function(k){var v=this.op.get(k);if(v!==void 0)return this.hj[0]!==k&&(this.hj.splice(this.hj.indexOf(k),1),this.hj.unshift(k)),v},h.prototype.has=function(k){return this.op.has(k)},h.prototype.set=function(k,v){return this.get(k)!==void 0&&this.delete(k),this.hj.unshift(k),this.op.set(k,v),this.gM(),this},h.prototype.gM=function(){for(;this.hj.length&&this.hj.length>this.JM;){var k=this.hj.pop();this.op.delete(k)}},h}()),_e=((vi={}).convertJSONToGeometry=function(h){return G.bc.YO(h)},vi.hasM=function(h){return h.hasAttribute(G.Jh.M)},vi.hasZ=function(h){return h.hasAttribute(G.Jh.Z)},vi.getPointX=function(h){return h.Mg()},vi.getPointY=function(h){return h.jh()},vi.getPointZ=function(h){return h.TR()},vi.getPointM=function(h){return h.rR()},vi.getXMin=function(h){return h.fs()},vi.getYMin=function(h){return h.hs()},vi.getXMax=function(h){return h.es()},vi.getYMax=function(h){return h.gs()},vi.getZExtent=function(h){return h.Ug(G.Jh.Z,0)},vi.getMExtent=function(h){return h.Ug(G.Jh.M,0)},vi.exportPaths=function(h){var k=[],v=h.ea(),u=null,o=null,r=h.hasAttribute(G.Jh.Z),n=h.hasAttribute(G.Jh.M);r&&(u=h.vb(G.Jh.Z)),n&&(o=h.vb(G.Jh.M));for(var a=new G.h,c=0;c<v;c++){for(var p=h.Ca(c),f=h.Ka(c),m=0,w=0,x=NaN,$=NaN,T=NaN,A=NaN,C=h.ec(c),N=[],L=p;L<p+f;L++){h.D(L,a),A=T=NaN;var D=[a.x,a.y];r&&(T=u.get(L),D.push(T)),n&&(A=o.get(L),D.push(A)),L==p&&C&&(m=a.x,w=a.y,x=T,$=A),N.push(D)}!C||m==a.x&&w==a.y&&(!r||isNaN(x)&&isNaN(T)||x==T)&&(!n||isNaN($)&&isNaN(A)||$==A)||N.push(N[0].slice(0)),k.push(N)}return k},vi.exportPathsFlat=function(){},vi.exportPoints=function(h){var k=h.hasAttribute(G.Jh.Z),v=h.hasAttribute(G.Jh.M),u=null,o=null;k&&(u=h.vb(G.Jh.Z)),v&&(o=h.vb(G.Jh.M));for(var r=new G.h,n=h.I(),a=[],c=0;c<n;c++){h.D(c,r);var p=[r.x,r.y];k&&p.push(u.get(c)),v&&p.push(o.get(c)),a.push(p)}return a},vi.exportPointsFlat=function(){},vi);return function(){function h(){}return h.buffer=Rr,h.clip=P,h.contains=R,h.convexHull=Ne,h.crosses=z,h.cut=j,h.densify=cf,h.difference=je,h.disjoint=se,h.distance=q,h.equals=Y,h.extendedSpatialReferenceInfo=O,h.generalize=rv,h.geodesicArea=pf,h.geodesicBuffer=Jt,h.geodesicDensify=sv,h.geodesicLength=av,h.intersect=rt,h.intersects=te,h.isSimple=Oe,h.nearestCoordinate=Lr,h.nearestVertex=iv,h.nearestVertices=hf,h.offset=ni,h.overlaps=ue,h.planarArea=nv,h.planarLength=ov,h.relate=Ee,h.simplify=Le,h.symmetricDifference=De,h.touches=ne,h.union=Ve,h.within=he,h.rotate=G.Cx.rotate,h.flipHorizontal=G.Cx.BQ,h.flipVertical=G.Cx.CQ,h._enableProjection=lv,h._project=cv,h._getTransformation=uv,h._getTransformationBySuitability=hv,h}()}var s=i();s!==void 0&&(e.exports=s)})(L_);const dt=L_.exports,Bae=Object.freeze(Uae({__proto__:null,default:dt},[L_.exports]));var Hae=Object.freeze(Object.defineProperty({__proto__:null,G:dt,g:Bae},Symbol.toStringTag,{value:"Module"}));const _t={convertToGEGeometry:Wae,exportPoint:Jae,exportPolygon:Kae,exportPolyline:Yae,exportMultipoint:Xae,exportExtent:Zae};function Wae(e,t){if(t==null)return null;let i="cache"in t?t.cache._geVersion:void 0;return i==null&&(i=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=i)),i}function Jae(e,t,i){const s=e.hasZ(t),l=e.hasM(t),d=new Be({x:e.getPointX(t),y:e.getPointY(t),spatialReference:i});return s&&(d.z=e.getPointZ(t)),l&&(d.m=e.getPointM(t)),d.cache._geVersion=t,d}function Kae(e,t,i){const s=new Ts({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return s.cache._geVersion=t,s}function Yae(e,t,i){const s=new Ir({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return s.cache._geVersion=t,s}function Xae(e,t,i){const s=new Xu({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:i});return s.cache._geVersion=t,s}function Zae(e,t,i){const s=e.hasZ(t),l=e.hasM(t),d=new Mt({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:i});if(s){const y=e.getZExtent(t);d.zmin=y.vmin,d.zmax=y.vmax}if(l){const y=e.getMExtent(t);d.mmin=y.vmin,d.mmax=y.vmax}return d.cache._geVersion=t,d}var Qae=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:_t},Symbol.toStringTag,{value:"Module"}));function $t(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function ele(e){return dt.extendedSpatialReferenceInfo(e)}function tle(e,t){return dt.clip(_t,$t(e),e,t)}function ile(e,t){return dt.cut(_t,$t(e),e,t)}function rle(e,t){return dt.contains(_t,$t(e),e,t)}function sle(e,t){return dt.crosses(_t,$t(e),e,t)}function nle(e,t,i){return dt.distance(_t,$t(e),e,t,i)}function ole(e,t){return dt.equals(_t,$t(e),e,t)}function ale(e,t){return dt.intersects(_t,$t(e),e,t)}function lle(e,t){return dt.touches(_t,$t(e),e,t)}function ule(e,t){return dt.within(_t,$t(e),e,t)}function hle(e,t){return dt.disjoint(_t,$t(e),e,t)}function cle(e,t){return dt.overlaps(_t,$t(e),e,t)}function ple(e,t,i){return dt.relate(_t,$t(e),e,t,i)}function dle(e){return dt.isSimple(_t,$t(e),e)}function fle(e){return dt.simplify(_t,$t(e),e)}function yle(e,t=!1){return dt.convexHull(_t,$t(e),e,t)}function mle(e,t){return dt.difference(_t,$t(e),e,t)}function gle(e,t){return dt.symmetricDifference(_t,$t(e),e,t)}function vle(e,t){return dt.intersect(_t,$t(e),e,t)}function ble(e,t=null){return dt.union(_t,$t(e),e,t)}function wle(e,t,i,s,l,d){return dt.offset(_t,$t(e),e,t,i,s,l,d)}function _le(e,t,i,s=!1){return dt.buffer(_t,$t(e),e,t,i,s)}function xle(e,t,i,s,l,d){return dt.geodesicBuffer(_t,$t(e),e,t,i,s,l,d)}function Sle(e,t,i=!0){return dt.nearestCoordinate(_t,$t(e),e,t,i)}function Mle(e,t){return dt.nearestVertex(_t,$t(e),e,t)}function $le(e,t,i,s){return dt.nearestVertices(_t,$t(e),e,t,i,s)}function D_(e){return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?e.extent.center:null}function Ile(e,t,i){var s;if(e==null)throw new Error("Illegal Argument Exception");const l=e.spatialReference;if((i=(s=i)!=null?s:D_(e))==null)throw new Error("Illegal Argument Exception");const d=e.constructor.fromJSON(dt.rotate(e,t,i));return d.spatialReference=l,d}function Tle(e,t){var i;if(e==null)throw new Error("Illegal Argument Exception");const s=e.spatialReference;if((t=(i=t)!=null?i:D_(e))==null)throw new Error("Illegal Argument Exception");const l=e.constructor.fromJSON(dt.flipHorizontal(e,t));return l.spatialReference=s,l}function Ele(e,t){var i;if(e==null)throw new Error("Illegal Argument Exception");const s=e.spatialReference;if((t=(i=t)!=null?i:D_(e))==null)throw new Error("Illegal Argument Exception");const l=e.constructor.fromJSON(dt.flipVertical(e,t));return l.spatialReference=s,l}function kle(e,t,i,s){return dt.generalize(_t,$t(e),e,t,i,s)}function Ale(e,t,i){return dt.densify(_t,$t(e),e,t,i)}function Ole(e,t,i,s=0){return dt.geodesicDensify(_t,$t(e),e,t,i,s)}function Cle(e,t){return dt.planarArea(_t,$t(e),e,t)}function Ple(e,t){return dt.planarLength(_t,$t(e),e,t)}function Nle(e,t,i){return dt.geodesicArea(_t,$t(e),e,t,i)}function jle(e,t,i){return dt.geodesicLength(_t,$t(e),e,t,i)}var Kce=Object.freeze(Object.defineProperty({__proto__:null,buffer:_le,clip:tle,contains:rle,convexHull:yle,crosses:sle,cut:ile,densify:Ale,difference:mle,disjoint:hle,distance:nle,equals:ole,extendedSpatialReferenceInfo:ele,flipHorizontal:Tle,flipVertical:Ele,generalize:kle,geodesicArea:Nle,geodesicBuffer:xle,geodesicDensify:Ole,geodesicLength:jle,intersect:vle,intersects:ale,isSimple:dle,nearestCoordinate:Sle,nearestVertex:Mle,nearestVertices:$le,offset:wle,overlaps:cle,planarArea:Cle,planarLength:Ple,relate:ple,rotate:Ile,simplify:fle,symmetricDifference:gle,touches:lle,union:ble,within:ule},Symbol.toStringTag,{value:"Module"}));export{p5 as $,Eu as A,cn as B,Ht as C,yi as D,ks as E,Bn as F,MP as G,mi as H,Ct as I,ji as J,zue as K,bP as L,hl as M,Wc as N,za as O,a5 as P,Qle as Q,pi as R,il as S,EP as T,Mc as U,eg as V,ri as W,$y as X,T_ as Y,Zg as Z,Ln as _,zp as a,aV as a$,Bce as a0,Gce as a1,qce as a2,N5 as a3,Is as a4,Ci as a5,bO as a6,Yu as a7,Fe as a8,M4 as a9,Nu as aA,oc as aB,U5 as aC,q5 as aD,NI as aE,Mu as aF,B5 as aG,Mue as aH,AR as aI,B0 as aJ,bu as aK,Ahe as aL,zd as aM,Dhe as aN,DD as aO,Xk as aP,Hhe as aQ,T7 as aR,Kk as aS,Jue as aT,Nr as aU,Um as aV,Ohe as aW,Kue as aX,Gue as aY,H5 as aZ,gae as a_,b as aa,S as ab,H as ac,tl as ad,Tr as ae,Yn as af,eI as ag,j5 as ah,sI as ai,qn as aj,fg as ak,Qg as al,Vue as am,oP as an,BC as ao,aP as ap,Zse as aq,Lce as ar,une as as,Od as at,Dce as au,yr as av,zM as aw,lue as ax,zu as ay,ln as az,Be as b,zhe as b$,lV as b0,it as b1,Fd as b2,xue as b3,Ece as b4,kce as b5,Tce as b6,mP as b7,P_ as b8,t5 as b9,bx as bA,Mr as bB,Yhe as bC,Vhe as bD,St as bE,Oce as bF,PQ as bG,gce as bH,NQ as bI,yce as bJ,ts as bK,Ri as bL,Kc as bM,mce as bN,qte as bO,Ute as bP,Bte as bQ,mQ as bR,Eue as bS,ke as bT,IO as bU,ac as bV,WZ as bW,iA as bX,nl as bY,tA as bZ,qhe as b_,zc as ba,One as bb,gP as bc,le as bd,GC as be,dP as bf,VC as bg,Ad as bh,Mne as bi,que as bj,hn as bk,jce as bl,al as bm,Hue as bn,mue as bo,Ze as bp,JO as bq,Mee as br,$ee as bs,HN as bt,tc as bu,F0 as bv,phe as bw,Cr as bx,jr as by,x1 as bz,Ft as c,jue as c$,$J as c0,Khe as c1,I3 as c2,EQ as c3,Gle as c4,qle as c5,Yte as c6,Cne as c7,tn as c8,eK as c9,ag as cA,Xu as cB,Ir as cC,uV as cD,doe as cE,zce as cF,Vce as cG,Pr as cH,Mt as cI,Cu as cJ,Ml as cK,$b as cL,og as cM,Wy as cN,X2 as cO,kG as cP,Vc as cQ,Yee as cR,Kee as cS,$ce as cT,Eg as cU,RI as cV,kue as cW,sN as cX,hr as cY,Ihe as cZ,qo as c_,eA as ca,yP as cb,Rp as cc,tp as cd,U9 as ce,bt as cf,Nce as cg,l5 as ch,zie as ci,Cce as cj,Vd as ck,Fce as cl,Rce as cm,ot as cn,yt as co,ge as cp,Or as cq,nie as cr,Zy as cs,qe as ct,Bue as cu,dg as cv,pg as cw,Wd as cx,Uue as cy,LM as cz,Ts as d,hN as d$,Aue as d0,Cue as d1,Oue as d2,Pue as d3,ld as d4,$s as d5,kz as d6,DM as d7,rh as d8,Gn as d9,As as dA,nd as dB,she as dC,ci as dD,g6 as dE,t4 as dF,Q6 as dG,$ue as dH,Xue as dI,The as dJ,Ehe as dK,lt as dL,Xne as dM,TQ as dN,lu as dO,nf as dP,oee as dQ,aue as dR,$e as dS,R4 as dT,$K as dU,Hi as dV,Ue as dW,khe as dX,T$ as dY,Gc as dZ,qc as d_,L5 as da,Nue as db,hU as dc,bg as dd,vce as de,u_ as df,h$ as dg,Ic as dh,Au as di,Ib as dj,MD as dk,Pne as dl,Pc as dm,Nc as dn,qu as dp,qw as dq,Bt as dr,Gw as ds,Bw as dt,hm as du,zq as dv,ane as dw,Nt as dx,N$ as dy,_$ as dz,Cle as e,Ble as e$,cee as e0,cte as e1,mte as e2,RO as e3,Vle as e4,Gg as e5,ste as e6,yg as e7,Wle as e8,_m as e9,Yue as eA,rhe as eB,Whe as eC,Lie as eD,Fue as eE,CI as eF,Iue as eG,Sue as eH,OO as eI,pce as eJ,Ju as eK,Dn as eL,fV as eM,kC as eN,Rle as eO,Dte as eP,zte as eQ,Vte as eR,GG as eS,O$ as eT,Jhe as eU,Rhe as eV,Zk as eW,Hk as eX,IR as eY,CR as eZ,due as e_,eue as ea,Su as eb,gi as ec,QD as ed,lJ as ee,Cg as ef,Vg as eg,_O as eh,xO as ei,SO as ej,an as ek,sQ as el,$$ as em,j$ as en,Ule as eo,rl as ep,cM as eq,uue as er,Fr as es,LZ as et,DZ as eu,dt as ev,gz as ew,Kn as ex,JF as ey,XX as ez,nle as f,Pk as f$,yM as f0,Koe as f1,dM as f2,$M as f3,vL as f4,xb as f5,Jle as f6,Kle as f7,_b as f8,lI as f9,PL as fA,pue as fB,Dne as fC,Jne as fD,ZG as fE,VG as fF,Cc as fG,ys as fH,Ke as fI,YL as fJ,ZL as fK,sD as fL,uD as fM,hD as fN,fI as fO,yI as fP,lD as fQ,yD as fR,mD as fS,JL as fT,Ua as fU,iue as fV,pM as fW,Lk as fX,Nk as fY,Phe as fZ,Uhe as f_,TL as fa,vue as fb,GL as fc,tI as fd,nI as fe,fue as ff,XL as fg,mI as fh,rq as fi,QG as fj,XG as fk,JG as fl,CL as fm,hhe as fn,yhe as fo,HT as fp,Jd as fq,Eq as fr,zL as fs,Tq as ft,aL as fu,hue as fv,hg as fw,cg as fx,$ne as fy,Tne as fz,rs as g,nue as g$,She as g0,Rk as g1,Mhe as g2,Wue as g3,Vo as g4,mc as g5,sC as g6,mhe as g7,tJ as g8,Lhe as g9,Yle as gA,NL as gB,Lt as gC,o_ as gD,BZ as gE,Ja as gF,cN as gG,uhe as gH,lhe as gI,OF as gJ,Jy as gK,$5 as gL,XD as gM,ur as gN,cce as gO,FF as gP,fd as gQ,q0 as gR,Tw as gS,kr as gT,mr as gU,oe as gV,yo as gW,Yw as gX,wk as gY,gM as gZ,fc as g_,J5 as ga,Rue as gb,Lue as gc,Due as gd,bue as ge,eE as gf,_ue as gg,N0 as gh,GJ as gi,FJ as gj,_7 as gk,jk as gl,Bhe as gm,uG as gn,Qn as go,fce as gp,BN as gq,Jv as gr,Kv as gs,oN as gt,HO as gu,Vt as gv,Che as gw,eae as gx,Ghe as gy,Pg as gz,Jce as h,cZ as h$,lg as h0,sn as h1,cue as h2,xhe as h3,bhe as h4,ghe as h5,zE as h6,lH as h7,_he as h8,whe as h9,nZ as hA,Qe as hB,lO as hC,Xr as hD,bZ as hE,fZ as hF,yb as hG,sh as hH,D5 as hI,_Z as hJ,xZ as hK,SZ as hL,t_ as hM,$Z as hN,MZ as hO,IZ as hP,xd as hQ,ZX as hR,gZ as hS,yZ as hT,hZ as hU,jZ as hV,CZ as hW,OZ as hX,oce as hY,PZ as hZ,NZ as h_,vhe as ha,ar as hb,lr as hc,qi as hd,eo as he,Q1 as hf,Sd as hg,r_ as hh,Cm as hi,RM as hj,ec as hk,ti as hl,wZ as hm,el as hn,Qi as ho,vZ as hp,Es as hq,dZ as hr,uZ as hs,lZ as ht,Wu as hu,Kr as hv,uO as hw,Bo as hx,WK as hy,iZ as hz,mN as i,dn as i$,pZ as i0,c5 as i1,mZ as i2,kZ as i3,U4 as i4,n6 as i5,hce as i6,oZ as i7,aZ as i8,sZ as i9,dC as iA,lie as iB,XO as iC,FQ as iD,ZO as iE,Zte as iF,fr as iG,pF as iH,oT as iI,GB as iJ,ree as iK,gc as iL,g$ as iM,Ice as iN,ote as iO,lte as iP,aee as iQ,d_ as iR,uee as iS,hee as iT,s4 as iU,oz as iV,rz as iW,j6 as iX,dr as iY,od as iZ,nte as i_,rZ as ia,Sce as ib,xce as ic,Que as id,nhe as ie,ohe as ig,Go as ih,IK as ii,QQ as ij,hJ as ik,es as il,Vu as im,Bd as io,Uce as ip,f5 as iq,fhe as ir,S5 as is,hL as it,sq as iu,YO as iv,rC as iw,wte as ix,E8 as iy,Mce as iz,az as j,$u as j$,Mg as j0,Qc as j1,eh as j2,fte as j3,Jee as j4,Xee as j5,Ste as j6,K6 as j7,FI as j8,Jte as j9,tue as jA,dO as jB,Fm as jC,lee as jD,e$ as jE,dd as jF,qa as jG,Yr as jH,AV as jI,ug as jJ,Xm as jK,ahe as jL,dhe as jM,Dd as jN,Xle as jO,$he as jP,d5 as jQ,Nh as jR,iie as jS,Jr as jT,Ny as jU,ep as jV,B6 as jW,b4 as jX,Wn as jY,Un as jZ,tT as j_,QO as ja,w_ as jb,Z8 as jc,yy as jd,NO as je,rte as jf,__ as jg,cC as jh,Ge as ji,Zu as jj,Z2 as jk,Fhe as jl,BJ as jm,qJ as jn,Sj as jo,_s as jp,sie as jq,rf as jr,qZ as js,gO as jt,Zie as ju,oQ as jv,Qie as jw,AO as jx,jm as jy,h_ as jz,vN as k,ihe as k$,Dle as k0,jO as k1,gy as k2,W8 as k3,ad as k4,hte as k5,ute as k6,Uc as k7,OT as k8,bce as k9,Qhe as kA,Zhe as kB,ece as kC,tce as kD,rce as kE,tZ as kF,h8 as kG,ice as kH,TZ as kI,zg as kJ,cO as kK,pO as kL,EL as kM,oI as kN,Ku as kO,dN as kP,eR as kQ,gue as kR,ehe as kS,the as kT,aI as kU,wue as kV,kq as kW,kd as kX,qg as kY,Zue as kZ,lL as k_,Rd as ka,Hc as kb,rue as kc,ate as kd,wce as ke,sF as kf,Zle as kg,U as kh,che as ki,b_ as kj,Tue as kk,ol as kl,BI as km,Du as kn,nC as ko,ace as kp,nce as kq,l8 as kr,Xhe as ks,a8 as kt,EZ as ku,sce as kv,uce as kw,Tk as kx,lce as ky,Hu as kz,Hle as l,rI as l0,sue as l1,nq as l2,pj as l3,Ry as l4,Use as l5,uL as l6,Q$ as l7,oue as l8,_ce as l9,pR as la,Nhe as lb,jhe as lc,dce as ld,Ace as le,Kce as lf,zle as m,Hce as n,Fi as o,de as p,re as q,X as r,Se as s,ce as t,yue as u,Wce as v,Lle as w,Pce as x,vle as y,Y2 as z};
